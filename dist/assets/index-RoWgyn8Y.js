var MC=Object.defineProperty;var LC=(t,e,n)=>e in t?MC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Pe=(t,e,n)=>LC(t,typeof e!="symbol"?e+"":e,n);function RC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var pn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ys(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function AC(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Bw={exports:{}},Ah={},Uw={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $c=Symbol.for("react.element"),IC=Symbol.for("react.portal"),FC=Symbol.for("react.fragment"),$C=Symbol.for("react.strict_mode"),zC=Symbol.for("react.profiler"),BC=Symbol.for("react.provider"),UC=Symbol.for("react.context"),HC=Symbol.for("react.forward_ref"),WC=Symbol.for("react.suspense"),YC=Symbol.for("react.memo"),VC=Symbol.for("react.lazy"),F0=Symbol.iterator;function qC(t){return t===null||typeof t!="object"?null:(t=F0&&t[F0]||t["@@iterator"],typeof t=="function"?t:null)}var Hw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ww=Object.assign,Yw={};function Do(t,e,n){this.props=t,this.context=e,this.refs=Yw,this.updater=n||Hw}Do.prototype.isReactComponent={};Do.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Do.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Vw(){}Vw.prototype=Do.prototype;function tx(t,e,n){this.props=t,this.context=e,this.refs=Yw,this.updater=n||Hw}var nx=tx.prototype=new Vw;nx.constructor=tx;Ww(nx,Do.prototype);nx.isPureReactComponent=!0;var $0=Array.isArray,qw=Object.prototype.hasOwnProperty,rx={current:null},Zw={key:!0,ref:!0,__self:!0,__source:!0};function Kw(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)qw.call(e,r)&&!Zw.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var d=Array(l),u=0;u<l;u++)d[u]=arguments[u+2];s.children=d}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:$c,type:t,key:i,ref:o,props:s,_owner:rx.current}}function ZC(t,e){return{$$typeof:$c,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sx(t){return typeof t=="object"&&t!==null&&t.$$typeof===$c}function KC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var z0=/\/+/g;function Qp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?KC(""+t.key):e.toString(36)}function du(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case $c:case IC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Qp(o,0):r,$0(s)?(n="",t!=null&&(n=t.replace(z0,"$&/")+"/"),du(s,e,n,"",function(u){return u})):s!=null&&(sx(s)&&(s=ZC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(z0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",$0(t))for(var l=0;l<t.length;l++){i=t[l];var d=r+Qp(i,l);o+=du(i,e,n,d,s)}else if(d=qC(t),typeof d=="function")for(t=d.call(t),l=0;!(i=t.next()).done;)i=i.value,d=r+Qp(i,l++),o+=du(i,e,n,d,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function vd(t,e,n){if(t==null)return t;var r=[],s=0;return du(t,r,"","",function(i){return e.call(n,i,s++)}),r}function GC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fn={current:null},uu={transition:null},QC={ReactCurrentDispatcher:fn,ReactCurrentBatchConfig:uu,ReactCurrentOwner:rx};function Gw(){throw Error("act(...) is not supported in production builds of React.")}Re.Children={map:vd,forEach:function(t,e,n){vd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return vd(t,function(){e++}),e},toArray:function(t){return vd(t,function(e){return e})||[]},only:function(t){if(!sx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Re.Component=Do;Re.Fragment=FC;Re.Profiler=zC;Re.PureComponent=tx;Re.StrictMode=$C;Re.Suspense=WC;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QC;Re.act=Gw;Re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ww({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=rx.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(d in e)qw.call(e,d)&&!Zw.hasOwnProperty(d)&&(r[d]=e[d]===void 0&&l!==void 0?l[d]:e[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){l=Array(d);for(var u=0;u<d;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:$c,type:t.type,key:s,ref:i,props:r,_owner:o}};Re.createContext=function(t){return t={$$typeof:UC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:BC,_context:t},t.Consumer=t};Re.createElement=Kw;Re.createFactory=function(t){var e=Kw.bind(null,t);return e.type=t,e};Re.createRef=function(){return{current:null}};Re.forwardRef=function(t){return{$$typeof:HC,render:t}};Re.isValidElement=sx;Re.lazy=function(t){return{$$typeof:VC,_payload:{_status:-1,_result:t},_init:GC}};Re.memo=function(t,e){return{$$typeof:YC,type:t,compare:e===void 0?null:e}};Re.startTransition=function(t){var e=uu.transition;uu.transition={};try{t()}finally{uu.transition=e}};Re.unstable_act=Gw;Re.useCallback=function(t,e){return fn.current.useCallback(t,e)};Re.useContext=function(t){return fn.current.useContext(t)};Re.useDebugValue=function(){};Re.useDeferredValue=function(t){return fn.current.useDeferredValue(t)};Re.useEffect=function(t,e){return fn.current.useEffect(t,e)};Re.useId=function(){return fn.current.useId()};Re.useImperativeHandle=function(t,e,n){return fn.current.useImperativeHandle(t,e,n)};Re.useInsertionEffect=function(t,e){return fn.current.useInsertionEffect(t,e)};Re.useLayoutEffect=function(t,e){return fn.current.useLayoutEffect(t,e)};Re.useMemo=function(t,e){return fn.current.useMemo(t,e)};Re.useReducer=function(t,e,n){return fn.current.useReducer(t,e,n)};Re.useRef=function(t){return fn.current.useRef(t)};Re.useState=function(t){return fn.current.useState(t)};Re.useSyncExternalStore=function(t,e,n){return fn.current.useSyncExternalStore(t,e,n)};Re.useTransition=function(){return fn.current.useTransition()};Re.version="18.3.1";Uw.exports=Re;var w=Uw.exports;const Y=ys(w),lo=RC({__proto__:null,default:Y},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XC=w,JC=Symbol.for("react.element"),eE=Symbol.for("react.fragment"),tE=Object.prototype.hasOwnProperty,nE=XC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rE={key:!0,ref:!0,__self:!0,__source:!0};function Qw(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)tE.call(e,r)&&!rE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:JC,type:t,key:i,ref:o,props:s,_owner:nE.current}}Ah.Fragment=eE;Ah.jsx=Qw;Ah.jsxs=Qw;Bw.exports=Ah;var a=Bw.exports,pm={},Xw={exports:{}},In={},Jw={exports:{}},e1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,X){var E=I.length;I.push(X);e:for(;0<E;){var K=E-1>>>1,re=I[K];if(0<s(re,X))I[K]=X,I[E]=re,E=K;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var X=I[0],E=I.pop();if(E!==X){I[0]=E;e:for(var K=0,re=I.length,Q=re>>>1;K<Q;){var se=2*(K+1)-1,le=I[se],ie=se+1,ge=I[ie];if(0>s(le,E))ie<re&&0>s(ge,le)?(I[K]=ge,I[ie]=E,K=ie):(I[K]=le,I[se]=E,K=se);else if(ie<re&&0>s(ge,E))I[K]=ge,I[ie]=E,K=ie;else break e}}return X}function s(I,X){var E=I.sortIndex-X.sortIndex;return E!==0?E:I.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var d=[],u=[],p=1,f=null,x=3,g=!1,v=!1,b=!1,j=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(I){for(var X=n(u);X!==null;){if(X.callback===null)r(u);else if(X.startTime<=I)r(u),X.sortIndex=X.expirationTime,e(d,X);else break;X=n(u)}}function P(I){if(b=!1,S(I),!v)if(n(d)!==null)v=!0,C(M);else{var X=n(u);X!==null&&q(P,X.startTime-I)}}function M(I,X){v=!1,b&&(b=!1,_(T),T=-1),g=!0;var E=x;try{for(S(X),f=n(d);f!==null&&(!(f.expirationTime>X)||I&&!U());){var K=f.callback;if(typeof K=="function"){f.callback=null,x=f.priorityLevel;var re=K(f.expirationTime<=X);X=t.unstable_now(),typeof re=="function"?f.callback=re:f===n(d)&&r(d),S(X)}else r(d);f=n(d)}if(f!==null)var Q=!0;else{var se=n(u);se!==null&&q(P,se.startTime-X),Q=!1}return Q}finally{f=null,x=E,g=!1}}var A=!1,R=null,T=-1,V=5,D=-1;function U(){return!(t.unstable_now()-D<V)}function te(){if(R!==null){var I=t.unstable_now();D=I;var X=!0;try{X=R(!0,I)}finally{X?G():(A=!1,R=null)}}else A=!1}var G;if(typeof N=="function")G=function(){N(te)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,Z=B.port2;B.port1.onmessage=te,G=function(){Z.postMessage(null)}}else G=function(){j(te,0)};function C(I){R=I,A||(A=!0,G())}function q(I,X){T=j(function(){I(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,C(M))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(I){switch(x){case 1:case 2:case 3:var X=3;break;default:X=x}var E=x;x=X;try{return I()}finally{x=E}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,X){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var E=x;x=I;try{return X()}finally{x=E}},t.unstable_scheduleCallback=function(I,X,E){var K=t.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?K+E:K):E=K,I){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=E+re,I={id:p++,callback:X,priorityLevel:I,startTime:E,expirationTime:re,sortIndex:-1},E>K?(I.sortIndex=E,e(u,I),n(d)===null&&I===n(u)&&(b?(_(T),T=-1):b=!0,q(P,E-K))):(I.sortIndex=re,e(d,I),v||g||(v=!0,C(M))),I},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(I){var X=x;return function(){var E=x;x=X;try{return I.apply(this,arguments)}finally{x=E}}}})(e1);Jw.exports=e1;var sE=Jw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iE=w,Rn=sE;function de(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var t1=new Set,ac={};function la(t,e){co(t,e),co(t+"Capture",e)}function co(t,e){for(ac[t]=e,t=0;t<e.length;t++)t1.add(e[t])}var ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fm=Object.prototype.hasOwnProperty,aE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,B0={},U0={};function oE(t){return fm.call(U0,t)?!0:fm.call(B0,t)?!1:aE.test(t)?U0[t]=!0:(B0[t]=!0,!1)}function lE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cE(t,e,n,r){if(e===null||typeof e>"u"||lE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xt[t]=new mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xt[e]=new mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xt[t]=new mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xt[t]=new mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xt[t]=new mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xt[t]=new mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xt[t]=new mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xt[t]=new mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xt[t]=new mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var ix=/[\-:]([a-z])/g;function ax(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ix,ax);Xt[e]=new mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ix,ax);Xt[e]=new mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ix,ax);Xt[e]=new mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xt[t]=new mn(t,1,!1,t.toLowerCase(),null,!1,!1)});Xt.xlinkHref=new mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xt[t]=new mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function ox(t,e,n,r){var s=Xt.hasOwnProperty(e)?Xt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cE(e,n,s,r)&&(n=null),r||s===null?oE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var bs=iE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yd=Symbol.for("react.element"),Ia=Symbol.for("react.portal"),Fa=Symbol.for("react.fragment"),lx=Symbol.for("react.strict_mode"),mm=Symbol.for("react.profiler"),n1=Symbol.for("react.provider"),r1=Symbol.for("react.context"),cx=Symbol.for("react.forward_ref"),gm=Symbol.for("react.suspense"),xm=Symbol.for("react.suspense_list"),dx=Symbol.for("react.memo"),Ds=Symbol.for("react.lazy"),s1=Symbol.for("react.offscreen"),H0=Symbol.iterator;function sl(t){return t===null||typeof t!="object"?null:(t=H0&&t[H0]||t["@@iterator"],typeof t=="function"?t:null)}var vt=Object.assign,Xp;function Nl(t){if(Xp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Xp=e&&e[1]||""}return`
`+Xp+t}var Jp=!1;function ef(t,e){if(!t||Jp)return"";Jp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var d=`
`+s[o].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=o&&0<=l);break}}}finally{Jp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Nl(t):""}function dE(t){switch(t.tag){case 5:return Nl(t.type);case 16:return Nl("Lazy");case 13:return Nl("Suspense");case 19:return Nl("SuspenseList");case 0:case 2:case 15:return t=ef(t.type,!1),t;case 11:return t=ef(t.type.render,!1),t;case 1:return t=ef(t.type,!0),t;default:return""}}function vm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fa:return"Fragment";case Ia:return"Portal";case mm:return"Profiler";case lx:return"StrictMode";case gm:return"Suspense";case xm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case r1:return(t.displayName||"Context")+".Consumer";case n1:return(t._context.displayName||"Context")+".Provider";case cx:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dx:return e=t.displayName||null,e!==null?e:vm(t.type)||"Memo";case Ds:e=t._payload,t=t._init;try{return vm(t(e))}catch{}}return null}function uE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vm(e);case 8:return e===lx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function si(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function i1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hE(t){var e=i1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bd(t){t._valueTracker||(t._valueTracker=hE(t))}function a1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=i1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ou(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ym(t,e){var n=e.checked;return vt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function W0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=si(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function o1(t,e){e=e.checked,e!=null&&ox(t,"checked",e,!1)}function bm(t,e){o1(t,e);var n=si(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_m(t,e.type,n):e.hasOwnProperty("defaultValue")&&_m(t,e.type,si(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Y0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function _m(t,e,n){(e!=="number"||Ou(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var kl=Array.isArray;function Ja(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+si(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function wm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(de(91));return vt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function V0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(de(92));if(kl(n)){if(1<n.length)throw Error(de(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:si(n)}}function l1(t,e){var n=si(e.value),r=si(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function q0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function c1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?c1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var _d,d1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(_d=_d||document.createElement("div"),_d.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_d.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function oc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Al={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pE=["Webkit","ms","Moz","O"];Object.keys(Al).forEach(function(t){pE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Al[e]=Al[t]})});function u1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Al.hasOwnProperty(t)&&Al[t]?(""+e).trim():e+"px"}function h1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=u1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var fE=vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nm(t,e){if(e){if(fE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(de(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(de(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(de(61))}if(e.style!=null&&typeof e.style!="object")throw Error(de(62))}}function km(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sm=null;function ux(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cm=null,eo=null,to=null;function Z0(t){if(t=Uc(t)){if(typeof Cm!="function")throw Error(de(280));var e=t.stateNode;e&&(e=Bh(e),Cm(t.stateNode,t.type,e))}}function p1(t){eo?to?to.push(t):to=[t]:eo=t}function f1(){if(eo){var t=eo,e=to;if(to=eo=null,Z0(t),e)for(t=0;t<e.length;t++)Z0(e[t])}}function m1(t,e){return t(e)}function g1(){}var tf=!1;function x1(t,e,n){if(tf)return t(e,n);tf=!0;try{return m1(t,e,n)}finally{tf=!1,(eo!==null||to!==null)&&(g1(),f1())}}function lc(t,e){var n=t.stateNode;if(n===null)return null;var r=Bh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(de(231,e,typeof n));return n}var Em=!1;if(ps)try{var il={};Object.defineProperty(il,"passive",{get:function(){Em=!0}}),window.addEventListener("test",il,il),window.removeEventListener("test",il,il)}catch{Em=!1}function mE(t,e,n,r,s,i,o,l,d){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(p){this.onError(p)}}var Il=!1,Mu=null,Lu=!1,Tm=null,gE={onError:function(t){Il=!0,Mu=t}};function xE(t,e,n,r,s,i,o,l,d){Il=!1,Mu=null,mE.apply(gE,arguments)}function vE(t,e,n,r,s,i,o,l,d){if(xE.apply(this,arguments),Il){if(Il){var u=Mu;Il=!1,Mu=null}else throw Error(de(198));Lu||(Lu=!0,Tm=u)}}function ca(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function v1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function K0(t){if(ca(t)!==t)throw Error(de(188))}function yE(t){var e=t.alternate;if(!e){if(e=ca(t),e===null)throw Error(de(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return K0(s),t;if(i===r)return K0(s),e;i=i.sibling}throw Error(de(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(de(189))}}if(n.alternate!==r)throw Error(de(190))}if(n.tag!==3)throw Error(de(188));return n.stateNode.current===n?t:e}function y1(t){return t=yE(t),t!==null?b1(t):null}function b1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=b1(t);if(e!==null)return e;t=t.sibling}return null}var _1=Rn.unstable_scheduleCallback,G0=Rn.unstable_cancelCallback,bE=Rn.unstable_shouldYield,_E=Rn.unstable_requestPaint,jt=Rn.unstable_now,wE=Rn.unstable_getCurrentPriorityLevel,hx=Rn.unstable_ImmediatePriority,w1=Rn.unstable_UserBlockingPriority,Ru=Rn.unstable_NormalPriority,jE=Rn.unstable_LowPriority,j1=Rn.unstable_IdlePriority,Ih=null,Fr=null;function NE(t){if(Fr&&typeof Fr.onCommitFiberRoot=="function")try{Fr.onCommitFiberRoot(Ih,t,void 0,(t.current.flags&128)===128)}catch{}}var vr=Math.clz32?Math.clz32:CE,kE=Math.log,SE=Math.LN2;function CE(t){return t>>>=0,t===0?32:31-(kE(t)/SE|0)|0}var wd=64,jd=4194304;function Sl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Au(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Sl(l):(i&=o,i!==0&&(r=Sl(i)))}else o=n&~s,o!==0?r=Sl(o):i!==0&&(r=Sl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vr(e),s=1<<n,r|=t[n],e&=~s;return r}function EE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-vr(i),l=1<<o,d=s[o];d===-1?(!(l&n)||l&r)&&(s[o]=EE(l,e)):d<=e&&(t.expiredLanes|=l),i&=~l}}function Pm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function N1(){var t=wd;return wd<<=1,!(wd&4194240)&&(wd=64),t}function nf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function zc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vr(e),t[e]=n}function PE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function px(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ge=0;function k1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var S1,fx,C1,E1,T1,Dm=!1,Nd=[],qs=null,Zs=null,Ks=null,cc=new Map,dc=new Map,Rs=[],DE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Q0(t,e){switch(t){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":Zs=null;break;case"mouseover":case"mouseout":Ks=null;break;case"pointerover":case"pointerout":cc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":dc.delete(e.pointerId)}}function al(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Uc(e),e!==null&&fx(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function OE(t,e,n,r,s){switch(e){case"focusin":return qs=al(qs,t,e,n,r,s),!0;case"dragenter":return Zs=al(Zs,t,e,n,r,s),!0;case"mouseover":return Ks=al(Ks,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return cc.set(i,al(cc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,dc.set(i,al(dc.get(i)||null,t,e,n,r,s)),!0}return!1}function P1(t){var e=Fi(t.target);if(e!==null){var n=ca(e);if(n!==null){if(e=n.tag,e===13){if(e=v1(n),e!==null){t.blockedOn=e,T1(t.priority,function(){C1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Om(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Sm=r,n.target.dispatchEvent(r),Sm=null}else return e=Uc(n),e!==null&&fx(e),t.blockedOn=n,!1;e.shift()}return!0}function X0(t,e,n){hu(t)&&n.delete(e)}function ME(){Dm=!1,qs!==null&&hu(qs)&&(qs=null),Zs!==null&&hu(Zs)&&(Zs=null),Ks!==null&&hu(Ks)&&(Ks=null),cc.forEach(X0),dc.forEach(X0)}function ol(t,e){t.blockedOn===e&&(t.blockedOn=null,Dm||(Dm=!0,Rn.unstable_scheduleCallback(Rn.unstable_NormalPriority,ME)))}function uc(t){function e(s){return ol(s,t)}if(0<Nd.length){ol(Nd[0],t);for(var n=1;n<Nd.length;n++){var r=Nd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(qs!==null&&ol(qs,t),Zs!==null&&ol(Zs,t),Ks!==null&&ol(Ks,t),cc.forEach(e),dc.forEach(e),n=0;n<Rs.length;n++)r=Rs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Rs.length&&(n=Rs[0],n.blockedOn===null);)P1(n),n.blockedOn===null&&Rs.shift()}var no=bs.ReactCurrentBatchConfig,Iu=!0;function LE(t,e,n,r){var s=Ge,i=no.transition;no.transition=null;try{Ge=1,mx(t,e,n,r)}finally{Ge=s,no.transition=i}}function RE(t,e,n,r){var s=Ge,i=no.transition;no.transition=null;try{Ge=4,mx(t,e,n,r)}finally{Ge=s,no.transition=i}}function mx(t,e,n,r){if(Iu){var s=Om(t,e,n,r);if(s===null)pf(t,e,r,Fu,n),Q0(t,r);else if(OE(s,t,e,n,r))r.stopPropagation();else if(Q0(t,r),e&4&&-1<DE.indexOf(t)){for(;s!==null;){var i=Uc(s);if(i!==null&&S1(i),i=Om(t,e,n,r),i===null&&pf(t,e,r,Fu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else pf(t,e,r,null,n)}}var Fu=null;function Om(t,e,n,r){if(Fu=null,t=ux(r),t=Fi(t),t!==null)if(e=ca(t),e===null)t=null;else if(n=e.tag,n===13){if(t=v1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Fu=t,null}function D1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wE()){case hx:return 1;case w1:return 4;case Ru:case jE:return 16;case j1:return 536870912;default:return 16}default:return 16}}var $s=null,gx=null,pu=null;function O1(){if(pu)return pu;var t,e=gx,n=e.length,r,s="value"in $s?$s.value:$s.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return pu=s.slice(t,1<r?1-r:void 0)}function fu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function kd(){return!0}function J0(){return!1}function Fn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?kd:J0,this.isPropagationStopped=J0,this}return vt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=kd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=kd)},persist:function(){},isPersistent:kd}),e}var Oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xx=Fn(Oo),Bc=vt({},Oo,{view:0,detail:0}),AE=Fn(Bc),rf,sf,ll,Fh=vt({},Bc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ll&&(ll&&t.type==="mousemove"?(rf=t.screenX-ll.screenX,sf=t.screenY-ll.screenY):sf=rf=0,ll=t),rf)},movementY:function(t){return"movementY"in t?t.movementY:sf}}),ey=Fn(Fh),IE=vt({},Fh,{dataTransfer:0}),FE=Fn(IE),$E=vt({},Bc,{relatedTarget:0}),af=Fn($E),zE=vt({},Oo,{animationName:0,elapsedTime:0,pseudoElement:0}),BE=Fn(zE),UE=vt({},Oo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),HE=Fn(UE),WE=vt({},Oo,{data:0}),ty=Fn(WE),YE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qE[t])?!!e[t]:!1}function vx(){return ZE}var KE=vt({},Bc,{key:function(t){if(t.key){var e=YE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?VE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vx,charCode:function(t){return t.type==="keypress"?fu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),GE=Fn(KE),QE=vt({},Fh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ny=Fn(QE),XE=vt({},Bc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vx}),JE=Fn(XE),eT=vt({},Oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),tT=Fn(eT),nT=vt({},Fh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rT=Fn(nT),sT=[9,13,27,32],yx=ps&&"CompositionEvent"in window,Fl=null;ps&&"documentMode"in document&&(Fl=document.documentMode);var iT=ps&&"TextEvent"in window&&!Fl,M1=ps&&(!yx||Fl&&8<Fl&&11>=Fl),ry=" ",sy=!1;function L1(t,e){switch(t){case"keyup":return sT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function R1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $a=!1;function aT(t,e){switch(t){case"compositionend":return R1(e);case"keypress":return e.which!==32?null:(sy=!0,ry);case"textInput":return t=e.data,t===ry&&sy?null:t;default:return null}}function oT(t,e){if($a)return t==="compositionend"||!yx&&L1(t,e)?(t=O1(),pu=gx=$s=null,$a=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return M1&&e.locale!=="ko"?null:e.data;default:return null}}var lT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!lT[t.type]:e==="textarea"}function A1(t,e,n,r){p1(r),e=$u(e,"onChange"),0<e.length&&(n=new xx("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var $l=null,hc=null;function cT(t){q1(t,0)}function $h(t){var e=Ua(t);if(a1(e))return t}function dT(t,e){if(t==="change")return e}var I1=!1;if(ps){var of;if(ps){var lf="oninput"in document;if(!lf){var ay=document.createElement("div");ay.setAttribute("oninput","return;"),lf=typeof ay.oninput=="function"}of=lf}else of=!1;I1=of&&(!document.documentMode||9<document.documentMode)}function oy(){$l&&($l.detachEvent("onpropertychange",F1),hc=$l=null)}function F1(t){if(t.propertyName==="value"&&$h(hc)){var e=[];A1(e,hc,t,ux(t)),x1(cT,e)}}function uT(t,e,n){t==="focusin"?(oy(),$l=e,hc=n,$l.attachEvent("onpropertychange",F1)):t==="focusout"&&oy()}function hT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $h(hc)}function pT(t,e){if(t==="click")return $h(e)}function fT(t,e){if(t==="input"||t==="change")return $h(e)}function mT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var br=typeof Object.is=="function"?Object.is:mT;function pc(t,e){if(br(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!fm.call(e,s)||!br(t[s],e[s]))return!1}return!0}function ly(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cy(t,e){var n=ly(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ly(n)}}function $1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function z1(){for(var t=window,e=Ou();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ou(t.document)}return e}function bx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function gT(t){var e=z1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&$1(n.ownerDocument.documentElement,n)){if(r!==null&&bx(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=cy(n,i);var o=cy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var xT=ps&&"documentMode"in document&&11>=document.documentMode,za=null,Mm=null,zl=null,Lm=!1;function dy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lm||za==null||za!==Ou(r)||(r=za,"selectionStart"in r&&bx(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zl&&pc(zl,r)||(zl=r,r=$u(Mm,"onSelect"),0<r.length&&(e=new xx("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=za)))}function Sd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ba={animationend:Sd("Animation","AnimationEnd"),animationiteration:Sd("Animation","AnimationIteration"),animationstart:Sd("Animation","AnimationStart"),transitionend:Sd("Transition","TransitionEnd")},cf={},B1={};ps&&(B1=document.createElement("div").style,"AnimationEvent"in window||(delete Ba.animationend.animation,delete Ba.animationiteration.animation,delete Ba.animationstart.animation),"TransitionEvent"in window||delete Ba.transitionend.transition);function zh(t){if(cf[t])return cf[t];if(!Ba[t])return t;var e=Ba[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in B1)return cf[t]=e[n];return t}var U1=zh("animationend"),H1=zh("animationiteration"),W1=zh("animationstart"),Y1=zh("transitionend"),V1=new Map,uy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function li(t,e){V1.set(t,e),la(e,[t])}for(var df=0;df<uy.length;df++){var uf=uy[df],vT=uf.toLowerCase(),yT=uf[0].toUpperCase()+uf.slice(1);li(vT,"on"+yT)}li(U1,"onAnimationEnd");li(H1,"onAnimationIteration");li(W1,"onAnimationStart");li("dblclick","onDoubleClick");li("focusin","onFocus");li("focusout","onBlur");li(Y1,"onTransitionEnd");co("onMouseEnter",["mouseout","mouseover"]);co("onMouseLeave",["mouseout","mouseover"]);co("onPointerEnter",["pointerout","pointerover"]);co("onPointerLeave",["pointerout","pointerover"]);la("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));la("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));la("onBeforeInput",["compositionend","keypress","textInput","paste"]);la("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));la("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));la("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cl));function hy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,vE(r,e,void 0,t),t.currentTarget=null}function q1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],d=l.instance,u=l.currentTarget;if(l=l.listener,d!==i&&s.isPropagationStopped())break e;hy(s,l,u),i=d}else for(o=0;o<r.length;o++){if(l=r[o],d=l.instance,u=l.currentTarget,l=l.listener,d!==i&&s.isPropagationStopped())break e;hy(s,l,u),i=d}}}if(Lu)throw t=Tm,Lu=!1,Tm=null,t}function it(t,e){var n=e[$m];n===void 0&&(n=e[$m]=new Set);var r=t+"__bubble";n.has(r)||(Z1(e,t,2,!1),n.add(r))}function hf(t,e,n){var r=0;e&&(r|=4),Z1(n,t,r,e)}var Cd="_reactListening"+Math.random().toString(36).slice(2);function fc(t){if(!t[Cd]){t[Cd]=!0,t1.forEach(function(n){n!=="selectionchange"&&(bT.has(n)||hf(n,!1,t),hf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Cd]||(e[Cd]=!0,hf("selectionchange",!1,e))}}function Z1(t,e,n,r){switch(D1(e)){case 1:var s=LE;break;case 4:s=RE;break;default:s=mx}n=s.bind(null,e,n,t),s=void 0,!Em||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function pf(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Fi(l),o===null)return;if(d=o.tag,d===5||d===6){r=i=o;continue e}l=l.parentNode}}r=r.return}x1(function(){var u=i,p=ux(n),f=[];e:{var x=V1.get(t);if(x!==void 0){var g=xx,v=t;switch(t){case"keypress":if(fu(n)===0)break e;case"keydown":case"keyup":g=GE;break;case"focusin":v="focus",g=af;break;case"focusout":v="blur",g=af;break;case"beforeblur":case"afterblur":g=af;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=ey;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=FE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=JE;break;case U1:case H1:case W1:g=BE;break;case Y1:g=tT;break;case"scroll":g=AE;break;case"wheel":g=rT;break;case"copy":case"cut":case"paste":g=HE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=ny}var b=(e&4)!==0,j=!b&&t==="scroll",_=b?x!==null?x+"Capture":null:x;b=[];for(var N=u,S;N!==null;){S=N;var P=S.stateNode;if(S.tag===5&&P!==null&&(S=P,_!==null&&(P=lc(N,_),P!=null&&b.push(mc(N,P,S)))),j)break;N=N.return}0<b.length&&(x=new g(x,v,null,n,p),f.push({event:x,listeners:b}))}}if(!(e&7)){e:{if(x=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",x&&n!==Sm&&(v=n.relatedTarget||n.fromElement)&&(Fi(v)||v[fs]))break e;if((g||x)&&(x=p.window===p?p:(x=p.ownerDocument)?x.defaultView||x.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?Fi(v):null,v!==null&&(j=ca(v),v!==j||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(b=ey,P="onMouseLeave",_="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(b=ny,P="onPointerLeave",_="onPointerEnter",N="pointer"),j=g==null?x:Ua(g),S=v==null?x:Ua(v),x=new b(P,N+"leave",g,n,p),x.target=j,x.relatedTarget=S,P=null,Fi(p)===u&&(b=new b(_,N+"enter",v,n,p),b.target=S,b.relatedTarget=j,P=b),j=P,g&&v)t:{for(b=g,_=v,N=0,S=b;S;S=Ta(S))N++;for(S=0,P=_;P;P=Ta(P))S++;for(;0<N-S;)b=Ta(b),N--;for(;0<S-N;)_=Ta(_),S--;for(;N--;){if(b===_||_!==null&&b===_.alternate)break t;b=Ta(b),_=Ta(_)}b=null}else b=null;g!==null&&py(f,x,g,b,!1),v!==null&&j!==null&&py(f,j,v,b,!0)}}e:{if(x=u?Ua(u):window,g=x.nodeName&&x.nodeName.toLowerCase(),g==="select"||g==="input"&&x.type==="file")var M=dT;else if(iy(x))if(I1)M=fT;else{M=hT;var A=uT}else(g=x.nodeName)&&g.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(M=pT);if(M&&(M=M(t,u))){A1(f,M,n,p);break e}A&&A(t,x,u),t==="focusout"&&(A=x._wrapperState)&&A.controlled&&x.type==="number"&&_m(x,"number",x.value)}switch(A=u?Ua(u):window,t){case"focusin":(iy(A)||A.contentEditable==="true")&&(za=A,Mm=u,zl=null);break;case"focusout":zl=Mm=za=null;break;case"mousedown":Lm=!0;break;case"contextmenu":case"mouseup":case"dragend":Lm=!1,dy(f,n,p);break;case"selectionchange":if(xT)break;case"keydown":case"keyup":dy(f,n,p)}var R;if(yx)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else $a?L1(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(M1&&n.locale!=="ko"&&($a||T!=="onCompositionStart"?T==="onCompositionEnd"&&$a&&(R=O1()):($s=p,gx="value"in $s?$s.value:$s.textContent,$a=!0)),A=$u(u,T),0<A.length&&(T=new ty(T,t,null,n,p),f.push({event:T,listeners:A}),R?T.data=R:(R=R1(n),R!==null&&(T.data=R)))),(R=iT?aT(t,n):oT(t,n))&&(u=$u(u,"onBeforeInput"),0<u.length&&(p=new ty("onBeforeInput","beforeinput",null,n,p),f.push({event:p,listeners:u}),p.data=R))}q1(f,e)})}function mc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function $u(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=lc(t,n),i!=null&&r.unshift(mc(t,i,s)),i=lc(t,e),i!=null&&r.push(mc(t,i,s))),t=t.return}return r}function Ta(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function py(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,d=l.alternate,u=l.stateNode;if(d!==null&&d===r)break;l.tag===5&&u!==null&&(l=u,s?(d=lc(n,i),d!=null&&o.unshift(mc(n,d,l))):s||(d=lc(n,i),d!=null&&o.push(mc(n,d,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var _T=/\r\n?/g,wT=/\u0000|\uFFFD/g;function fy(t){return(typeof t=="string"?t:""+t).replace(_T,`
`).replace(wT,"")}function Ed(t,e,n){if(e=fy(e),fy(t)!==e&&n)throw Error(de(425))}function zu(){}var Rm=null,Am=null;function Im(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fm=typeof setTimeout=="function"?setTimeout:void 0,jT=typeof clearTimeout=="function"?clearTimeout:void 0,my=typeof Promise=="function"?Promise:void 0,NT=typeof queueMicrotask=="function"?queueMicrotask:typeof my<"u"?function(t){return my.resolve(null).then(t).catch(kT)}:Fm;function kT(t){setTimeout(function(){throw t})}function ff(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),uc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);uc(e)}function Gs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function gy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Mo=Math.random().toString(36).slice(2),Rr="__reactFiber$"+Mo,gc="__reactProps$"+Mo,fs="__reactContainer$"+Mo,$m="__reactEvents$"+Mo,ST="__reactListeners$"+Mo,CT="__reactHandles$"+Mo;function Fi(t){var e=t[Rr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fs]||n[Rr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=gy(t);t!==null;){if(n=t[Rr])return n;t=gy(t)}return e}t=n,n=t.parentNode}return null}function Uc(t){return t=t[Rr]||t[fs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ua(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(de(33))}function Bh(t){return t[gc]||null}var zm=[],Ha=-1;function ci(t){return{current:t}}function ot(t){0>Ha||(t.current=zm[Ha],zm[Ha]=null,Ha--)}function rt(t,e){Ha++,zm[Ha]=t.current,t.current=e}var ii={},ln=ci(ii),Nn=ci(!1),Xi=ii;function uo(t,e){var n=t.type.contextTypes;if(!n)return ii;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function kn(t){return t=t.childContextTypes,t!=null}function Bu(){ot(Nn),ot(ln)}function xy(t,e,n){if(ln.current!==ii)throw Error(de(168));rt(ln,e),rt(Nn,n)}function K1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(de(108,uE(t)||"Unknown",s));return vt({},n,r)}function Uu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ii,Xi=ln.current,rt(ln,t),rt(Nn,Nn.current),!0}function vy(t,e,n){var r=t.stateNode;if(!r)throw Error(de(169));n?(t=K1(t,e,Xi),r.__reactInternalMemoizedMergedChildContext=t,ot(Nn),ot(ln),rt(ln,t)):ot(Nn),rt(Nn,n)}var is=null,Uh=!1,mf=!1;function G1(t){is===null?is=[t]:is.push(t)}function ET(t){Uh=!0,G1(t)}function di(){if(!mf&&is!==null){mf=!0;var t=0,e=Ge;try{var n=is;for(Ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}is=null,Uh=!1}catch(s){throw is!==null&&(is=is.slice(t+1)),_1(hx,di),s}finally{Ge=e,mf=!1}}return null}var Wa=[],Ya=0,Hu=null,Wu=0,qn=[],Zn=0,Ji=null,ls=1,cs="";function Ei(t,e){Wa[Ya++]=Wu,Wa[Ya++]=Hu,Hu=t,Wu=e}function Q1(t,e,n){qn[Zn++]=ls,qn[Zn++]=cs,qn[Zn++]=Ji,Ji=t;var r=ls;t=cs;var s=32-vr(r)-1;r&=~(1<<s),n+=1;var i=32-vr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ls=1<<32-vr(e)+s|n<<s|r,cs=i+t}else ls=1<<i|n<<s|r,cs=t}function _x(t){t.return!==null&&(Ei(t,1),Q1(t,1,0))}function wx(t){for(;t===Hu;)Hu=Wa[--Ya],Wa[Ya]=null,Wu=Wa[--Ya],Wa[Ya]=null;for(;t===Ji;)Ji=qn[--Zn],qn[Zn]=null,cs=qn[--Zn],qn[Zn]=null,ls=qn[--Zn],qn[Zn]=null}var Ln=null,Mn=null,ct=!1,mr=null;function X1(t,e){var n=Kn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function yy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ln=t,Mn=Gs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ln=t,Mn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ji!==null?{id:ls,overflow:cs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ln=t,Mn=null,!0):!1;default:return!1}}function Bm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Um(t){if(ct){var e=Mn;if(e){var n=e;if(!yy(t,e)){if(Bm(t))throw Error(de(418));e=Gs(n.nextSibling);var r=Ln;e&&yy(t,e)?X1(r,n):(t.flags=t.flags&-4097|2,ct=!1,Ln=t)}}else{if(Bm(t))throw Error(de(418));t.flags=t.flags&-4097|2,ct=!1,Ln=t}}}function by(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ln=t}function Td(t){if(t!==Ln)return!1;if(!ct)return by(t),ct=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Im(t.type,t.memoizedProps)),e&&(e=Mn)){if(Bm(t))throw J1(),Error(de(418));for(;e;)X1(t,e),e=Gs(e.nextSibling)}if(by(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(de(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mn=Gs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mn=null}}else Mn=Ln?Gs(t.stateNode.nextSibling):null;return!0}function J1(){for(var t=Mn;t;)t=Gs(t.nextSibling)}function ho(){Mn=Ln=null,ct=!1}function jx(t){mr===null?mr=[t]:mr.push(t)}var TT=bs.ReactCurrentBatchConfig;function cl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(de(309));var r=n.stateNode}if(!r)throw Error(de(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(de(284));if(!n._owner)throw Error(de(290,t))}return t}function Pd(t,e){throw t=Object.prototype.toString.call(e),Error(de(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _y(t){var e=t._init;return e(t._payload)}function ej(t){function e(_,N){if(t){var S=_.deletions;S===null?(_.deletions=[N],_.flags|=16):S.push(N)}}function n(_,N){if(!t)return null;for(;N!==null;)e(_,N),N=N.sibling;return null}function r(_,N){for(_=new Map;N!==null;)N.key!==null?_.set(N.key,N):_.set(N.index,N),N=N.sibling;return _}function s(_,N){return _=ei(_,N),_.index=0,_.sibling=null,_}function i(_,N,S){return _.index=S,t?(S=_.alternate,S!==null?(S=S.index,S<N?(_.flags|=2,N):S):(_.flags|=2,N)):(_.flags|=1048576,N)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,N,S,P){return N===null||N.tag!==6?(N=wf(S,_.mode,P),N.return=_,N):(N=s(N,S),N.return=_,N)}function d(_,N,S,P){var M=S.type;return M===Fa?p(_,N,S.props.children,P,S.key):N!==null&&(N.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ds&&_y(M)===N.type)?(P=s(N,S.props),P.ref=cl(_,N,S),P.return=_,P):(P=_u(S.type,S.key,S.props,null,_.mode,P),P.ref=cl(_,N,S),P.return=_,P)}function u(_,N,S,P){return N===null||N.tag!==4||N.stateNode.containerInfo!==S.containerInfo||N.stateNode.implementation!==S.implementation?(N=jf(S,_.mode,P),N.return=_,N):(N=s(N,S.children||[]),N.return=_,N)}function p(_,N,S,P,M){return N===null||N.tag!==7?(N=Vi(S,_.mode,P,M),N.return=_,N):(N=s(N,S),N.return=_,N)}function f(_,N,S){if(typeof N=="string"&&N!==""||typeof N=="number")return N=wf(""+N,_.mode,S),N.return=_,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case yd:return S=_u(N.type,N.key,N.props,null,_.mode,S),S.ref=cl(_,null,N),S.return=_,S;case Ia:return N=jf(N,_.mode,S),N.return=_,N;case Ds:var P=N._init;return f(_,P(N._payload),S)}if(kl(N)||sl(N))return N=Vi(N,_.mode,S,null),N.return=_,N;Pd(_,N)}return null}function x(_,N,S,P){var M=N!==null?N.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return M!==null?null:l(_,N,""+S,P);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case yd:return S.key===M?d(_,N,S,P):null;case Ia:return S.key===M?u(_,N,S,P):null;case Ds:return M=S._init,x(_,N,M(S._payload),P)}if(kl(S)||sl(S))return M!==null?null:p(_,N,S,P,null);Pd(_,S)}return null}function g(_,N,S,P,M){if(typeof P=="string"&&P!==""||typeof P=="number")return _=_.get(S)||null,l(N,_,""+P,M);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case yd:return _=_.get(P.key===null?S:P.key)||null,d(N,_,P,M);case Ia:return _=_.get(P.key===null?S:P.key)||null,u(N,_,P,M);case Ds:var A=P._init;return g(_,N,S,A(P._payload),M)}if(kl(P)||sl(P))return _=_.get(S)||null,p(N,_,P,M,null);Pd(N,P)}return null}function v(_,N,S,P){for(var M=null,A=null,R=N,T=N=0,V=null;R!==null&&T<S.length;T++){R.index>T?(V=R,R=null):V=R.sibling;var D=x(_,R,S[T],P);if(D===null){R===null&&(R=V);break}t&&R&&D.alternate===null&&e(_,R),N=i(D,N,T),A===null?M=D:A.sibling=D,A=D,R=V}if(T===S.length)return n(_,R),ct&&Ei(_,T),M;if(R===null){for(;T<S.length;T++)R=f(_,S[T],P),R!==null&&(N=i(R,N,T),A===null?M=R:A.sibling=R,A=R);return ct&&Ei(_,T),M}for(R=r(_,R);T<S.length;T++)V=g(R,_,T,S[T],P),V!==null&&(t&&V.alternate!==null&&R.delete(V.key===null?T:V.key),N=i(V,N,T),A===null?M=V:A.sibling=V,A=V);return t&&R.forEach(function(U){return e(_,U)}),ct&&Ei(_,T),M}function b(_,N,S,P){var M=sl(S);if(typeof M!="function")throw Error(de(150));if(S=M.call(S),S==null)throw Error(de(151));for(var A=M=null,R=N,T=N=0,V=null,D=S.next();R!==null&&!D.done;T++,D=S.next()){R.index>T?(V=R,R=null):V=R.sibling;var U=x(_,R,D.value,P);if(U===null){R===null&&(R=V);break}t&&R&&U.alternate===null&&e(_,R),N=i(U,N,T),A===null?M=U:A.sibling=U,A=U,R=V}if(D.done)return n(_,R),ct&&Ei(_,T),M;if(R===null){for(;!D.done;T++,D=S.next())D=f(_,D.value,P),D!==null&&(N=i(D,N,T),A===null?M=D:A.sibling=D,A=D);return ct&&Ei(_,T),M}for(R=r(_,R);!D.done;T++,D=S.next())D=g(R,_,T,D.value,P),D!==null&&(t&&D.alternate!==null&&R.delete(D.key===null?T:D.key),N=i(D,N,T),A===null?M=D:A.sibling=D,A=D);return t&&R.forEach(function(te){return e(_,te)}),ct&&Ei(_,T),M}function j(_,N,S,P){if(typeof S=="object"&&S!==null&&S.type===Fa&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case yd:e:{for(var M=S.key,A=N;A!==null;){if(A.key===M){if(M=S.type,M===Fa){if(A.tag===7){n(_,A.sibling),N=s(A,S.props.children),N.return=_,_=N;break e}}else if(A.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ds&&_y(M)===A.type){n(_,A.sibling),N=s(A,S.props),N.ref=cl(_,A,S),N.return=_,_=N;break e}n(_,A);break}else e(_,A);A=A.sibling}S.type===Fa?(N=Vi(S.props.children,_.mode,P,S.key),N.return=_,_=N):(P=_u(S.type,S.key,S.props,null,_.mode,P),P.ref=cl(_,N,S),P.return=_,_=P)}return o(_);case Ia:e:{for(A=S.key;N!==null;){if(N.key===A)if(N.tag===4&&N.stateNode.containerInfo===S.containerInfo&&N.stateNode.implementation===S.implementation){n(_,N.sibling),N=s(N,S.children||[]),N.return=_,_=N;break e}else{n(_,N);break}else e(_,N);N=N.sibling}N=jf(S,_.mode,P),N.return=_,_=N}return o(_);case Ds:return A=S._init,j(_,N,A(S._payload),P)}if(kl(S))return v(_,N,S,P);if(sl(S))return b(_,N,S,P);Pd(_,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,N!==null&&N.tag===6?(n(_,N.sibling),N=s(N,S),N.return=_,_=N):(n(_,N),N=wf(S,_.mode,P),N.return=_,_=N),o(_)):n(_,N)}return j}var po=ej(!0),tj=ej(!1),Yu=ci(null),Vu=null,Va=null,Nx=null;function kx(){Nx=Va=Vu=null}function Sx(t){var e=Yu.current;ot(Yu),t._currentValue=e}function Hm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ro(t,e){Vu=t,Nx=Va=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wn=!0),t.firstContext=null)}function er(t){var e=t._currentValue;if(Nx!==t)if(t={context:t,memoizedValue:e,next:null},Va===null){if(Vu===null)throw Error(de(308));Va=t,Vu.dependencies={lanes:0,firstContext:t}}else Va=Va.next=t;return e}var $i=null;function Cx(t){$i===null?$i=[t]:$i.push(t)}function nj(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Cx(e)):(n.next=s.next,s.next=n),e.interleaved=n,ms(t,r)}function ms(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Os=!1;function Ex(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rj(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ds(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Qs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Be&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ms(t,n)}return s=r.interleaved,s===null?(e.next=e,Cx(r)):(e.next=s.next,s.next=e),r.interleaved=e,ms(t,n)}function mu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,px(t,n)}}function wy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function qu(t,e,n,r){var s=t.updateQueue;Os=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var d=l,u=d.next;d.next=null,o===null?i=u:o.next=u,o=d;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=u:l.next=u,p.lastBaseUpdate=d))}if(i!==null){var f=s.baseState;o=0,p=u=d=null,l=i;do{var x=l.lane,g=l.eventTime;if((r&x)===x){p!==null&&(p=p.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,b=l;switch(x=e,g=n,b.tag){case 1:if(v=b.payload,typeof v=="function"){f=v.call(g,f,x);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,x=typeof v=="function"?v.call(g,f,x):v,x==null)break e;f=vt({},f,x);break e;case 2:Os=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,x=s.effects,x===null?s.effects=[l]:x.push(l))}else g={eventTime:g,lane:x,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(u=p=g,d=f):p=p.next=g,o|=x;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;x=l,l=x.next,x.next=null,s.lastBaseUpdate=x,s.shared.pending=null}}while(!0);if(p===null&&(d=f),s.baseState=d,s.firstBaseUpdate=u,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ta|=o,t.lanes=o,t.memoizedState=f}}function jy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(de(191,s));s.call(r)}}}var Hc={},$r=ci(Hc),xc=ci(Hc),vc=ci(Hc);function zi(t){if(t===Hc)throw Error(de(174));return t}function Tx(t,e){switch(rt(vc,e),rt(xc,t),rt($r,Hc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=jm(e,t)}ot($r),rt($r,e)}function fo(){ot($r),ot(xc),ot(vc)}function sj(t){zi(vc.current);var e=zi($r.current),n=jm(e,t.type);e!==n&&(rt(xc,t),rt($r,n))}function Px(t){xc.current===t&&(ot($r),ot(xc))}var mt=ci(0);function Zu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gf=[];function Dx(){for(var t=0;t<gf.length;t++)gf[t]._workInProgressVersionPrimary=null;gf.length=0}var gu=bs.ReactCurrentDispatcher,xf=bs.ReactCurrentBatchConfig,ea=0,xt=null,Ot=null,Ft=null,Ku=!1,Bl=!1,yc=0,PT=0;function en(){throw Error(de(321))}function Ox(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!br(t[n],e[n]))return!1;return!0}function Mx(t,e,n,r,s,i){if(ea=i,xt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,gu.current=t===null||t.memoizedState===null?LT:RT,t=n(r,s),Bl){i=0;do{if(Bl=!1,yc=0,25<=i)throw Error(de(301));i+=1,Ft=Ot=null,e.updateQueue=null,gu.current=AT,t=n(r,s)}while(Bl)}if(gu.current=Gu,e=Ot!==null&&Ot.next!==null,ea=0,Ft=Ot=xt=null,Ku=!1,e)throw Error(de(300));return t}function Lx(){var t=yc!==0;return yc=0,t}function Mr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?xt.memoizedState=Ft=t:Ft=Ft.next=t,Ft}function tr(){if(Ot===null){var t=xt.alternate;t=t!==null?t.memoizedState:null}else t=Ot.next;var e=Ft===null?xt.memoizedState:Ft.next;if(e!==null)Ft=e,Ot=t;else{if(t===null)throw Error(de(310));Ot=t,t={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Ft===null?xt.memoizedState=Ft=t:Ft=Ft.next=t}return Ft}function bc(t,e){return typeof e=="function"?e(t):e}function vf(t){var e=tr(),n=e.queue;if(n===null)throw Error(de(311));n.lastRenderedReducer=t;var r=Ot,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,d=null,u=i;do{var p=u.lane;if((ea&p)===p)d!==null&&(d=d.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:p,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};d===null?(l=d=f,o=r):d=d.next=f,xt.lanes|=p,ta|=p}u=u.next}while(u!==null&&u!==i);d===null?o=r:d.next=l,br(r,e.memoizedState)||(wn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=d,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,xt.lanes|=i,ta|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function yf(t){var e=tr(),n=e.queue;if(n===null)throw Error(de(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);br(i,e.memoizedState)||(wn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function ij(){}function aj(t,e){var n=xt,r=tr(),s=e(),i=!br(r.memoizedState,s);if(i&&(r.memoizedState=s,wn=!0),r=r.queue,Rx(cj.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ft!==null&&Ft.memoizedState.tag&1){if(n.flags|=2048,_c(9,lj.bind(null,n,r,s,e),void 0,null),zt===null)throw Error(de(349));ea&30||oj(n,e,s)}return s}function oj(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xt.updateQueue,e===null?(e={lastEffect:null,stores:null},xt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function lj(t,e,n,r){e.value=n,e.getSnapshot=r,dj(e)&&uj(t)}function cj(t,e,n){return n(function(){dj(e)&&uj(t)})}function dj(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!br(t,n)}catch{return!0}}function uj(t){var e=ms(t,1);e!==null&&yr(e,t,1,-1)}function Ny(t){var e=Mr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bc,lastRenderedState:t},e.queue=t,t=t.dispatch=MT.bind(null,xt,t),[e.memoizedState,t]}function _c(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=xt.updateQueue,e===null?(e={lastEffect:null,stores:null},xt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function hj(){return tr().memoizedState}function xu(t,e,n,r){var s=Mr();xt.flags|=t,s.memoizedState=_c(1|e,n,void 0,r===void 0?null:r)}function Hh(t,e,n,r){var s=tr();r=r===void 0?null:r;var i=void 0;if(Ot!==null){var o=Ot.memoizedState;if(i=o.destroy,r!==null&&Ox(r,o.deps)){s.memoizedState=_c(e,n,i,r);return}}xt.flags|=t,s.memoizedState=_c(1|e,n,i,r)}function ky(t,e){return xu(8390656,8,t,e)}function Rx(t,e){return Hh(2048,8,t,e)}function pj(t,e){return Hh(4,2,t,e)}function fj(t,e){return Hh(4,4,t,e)}function mj(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gj(t,e,n){return n=n!=null?n.concat([t]):null,Hh(4,4,mj.bind(null,e,t),n)}function Ax(){}function xj(t,e){var n=tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ox(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function vj(t,e){var n=tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ox(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function yj(t,e,n){return ea&21?(br(n,e)||(n=N1(),xt.lanes|=n,ta|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wn=!0),t.memoizedState=n)}function DT(t,e){var n=Ge;Ge=n!==0&&4>n?n:4,t(!0);var r=xf.transition;xf.transition={};try{t(!1),e()}finally{Ge=n,xf.transition=r}}function bj(){return tr().memoizedState}function OT(t,e,n){var r=Js(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_j(t))wj(e,n);else if(n=nj(t,e,n,r),n!==null){var s=hn();yr(n,t,r,s),jj(n,e,r)}}function MT(t,e,n){var r=Js(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_j(t))wj(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,br(l,o)){var d=e.interleaved;d===null?(s.next=s,Cx(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=nj(t,e,s,r),n!==null&&(s=hn(),yr(n,t,r,s),jj(n,e,r))}}function _j(t){var e=t.alternate;return t===xt||e!==null&&e===xt}function wj(t,e){Bl=Ku=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jj(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,px(t,n)}}var Gu={readContext:er,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},LT={readContext:er,useCallback:function(t,e){return Mr().memoizedState=[t,e===void 0?null:e],t},useContext:er,useEffect:ky,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xu(4194308,4,mj.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xu(4194308,4,t,e)},useInsertionEffect:function(t,e){return xu(4,2,t,e)},useMemo:function(t,e){var n=Mr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Mr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=OT.bind(null,xt,t),[r.memoizedState,t]},useRef:function(t){var e=Mr();return t={current:t},e.memoizedState=t},useState:Ny,useDebugValue:Ax,useDeferredValue:function(t){return Mr().memoizedState=t},useTransition:function(){var t=Ny(!1),e=t[0];return t=DT.bind(null,t[1]),Mr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=xt,s=Mr();if(ct){if(n===void 0)throw Error(de(407));n=n()}else{if(n=e(),zt===null)throw Error(de(349));ea&30||oj(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,ky(cj.bind(null,r,i,t),[t]),r.flags|=2048,_c(9,lj.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Mr(),e=zt.identifierPrefix;if(ct){var n=cs,r=ls;n=(r&~(1<<32-vr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=yc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=PT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},RT={readContext:er,useCallback:xj,useContext:er,useEffect:Rx,useImperativeHandle:gj,useInsertionEffect:pj,useLayoutEffect:fj,useMemo:vj,useReducer:vf,useRef:hj,useState:function(){return vf(bc)},useDebugValue:Ax,useDeferredValue:function(t){var e=tr();return yj(e,Ot.memoizedState,t)},useTransition:function(){var t=vf(bc)[0],e=tr().memoizedState;return[t,e]},useMutableSource:ij,useSyncExternalStore:aj,useId:bj,unstable_isNewReconciler:!1},AT={readContext:er,useCallback:xj,useContext:er,useEffect:Rx,useImperativeHandle:gj,useInsertionEffect:pj,useLayoutEffect:fj,useMemo:vj,useReducer:yf,useRef:hj,useState:function(){return yf(bc)},useDebugValue:Ax,useDeferredValue:function(t){var e=tr();return Ot===null?e.memoizedState=t:yj(e,Ot.memoizedState,t)},useTransition:function(){var t=yf(bc)[0],e=tr().memoizedState;return[t,e]},useMutableSource:ij,useSyncExternalStore:aj,useId:bj,unstable_isNewReconciler:!1};function hr(t,e){if(t&&t.defaultProps){e=vt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Wm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:vt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wh={isMounted:function(t){return(t=t._reactInternals)?ca(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=hn(),s=Js(t),i=ds(r,s);i.payload=e,n!=null&&(i.callback=n),e=Qs(t,i,s),e!==null&&(yr(e,t,s,r),mu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=hn(),s=Js(t),i=ds(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Qs(t,i,s),e!==null&&(yr(e,t,s,r),mu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hn(),r=Js(t),s=ds(n,r);s.tag=2,e!=null&&(s.callback=e),e=Qs(t,s,r),e!==null&&(yr(e,t,r,n),mu(e,t,r))}};function Sy(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!pc(n,r)||!pc(s,i):!0}function Nj(t,e,n){var r=!1,s=ii,i=e.contextType;return typeof i=="object"&&i!==null?i=er(i):(s=kn(e)?Xi:ln.current,r=e.contextTypes,i=(r=r!=null)?uo(t,s):ii),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Cy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Wh.enqueueReplaceState(e,e.state,null)}function Ym(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ex(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=er(i):(i=kn(e)?Xi:ln.current,s.context=uo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Wm(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Wh.enqueueReplaceState(s,s.state,null),qu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function mo(t,e){try{var n="",r=e;do n+=dE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function bf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Vm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var IT=typeof WeakMap=="function"?WeakMap:Map;function kj(t,e,n){n=ds(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xu||(Xu=!0,ng=r),Vm(t,e)},n}function Sj(t,e,n){n=ds(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Vm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Vm(t,e),typeof r!="function"&&(Xs===null?Xs=new Set([this]):Xs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ey(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new IT;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=QT.bind(null,t,e,n),e.then(t,t))}function Ty(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Py(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ds(-1,1),e.tag=2,Qs(n,e,1))),n.lanes|=1),t)}var FT=bs.ReactCurrentOwner,wn=!1;function dn(t,e,n,r){e.child=t===null?tj(e,null,n,r):po(e,t.child,n,r)}function Dy(t,e,n,r,s){n=n.render;var i=e.ref;return ro(e,s),r=Mx(t,e,n,r,i,s),n=Lx(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,gs(t,e,s)):(ct&&n&&_x(e),e.flags|=1,dn(t,e,r,s),e.child)}function Oy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Wx(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Cj(t,e,i,r,s)):(t=_u(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:pc,n(o,r)&&t.ref===e.ref)return gs(t,e,s)}return e.flags|=1,t=ei(i,r),t.ref=e.ref,t.return=e,e.child=t}function Cj(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(pc(i,r)&&t.ref===e.ref)if(wn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(wn=!0);else return e.lanes=t.lanes,gs(t,e,s)}return qm(t,e,n,r,s)}function Ej(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(Za,Dn),Dn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,rt(Za,Dn),Dn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,rt(Za,Dn),Dn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,rt(Za,Dn),Dn|=r;return dn(t,e,s,n),e.child}function Tj(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qm(t,e,n,r,s){var i=kn(n)?Xi:ln.current;return i=uo(e,i),ro(e,s),n=Mx(t,e,n,r,i,s),r=Lx(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,gs(t,e,s)):(ct&&r&&_x(e),e.flags|=1,dn(t,e,n,s),e.child)}function My(t,e,n,r,s){if(kn(n)){var i=!0;Uu(e)}else i=!1;if(ro(e,s),e.stateNode===null)vu(t,e),Nj(e,n,r),Ym(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var d=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=er(u):(u=kn(n)?Xi:ln.current,u=uo(e,u));var p=n.getDerivedStateFromProps,f=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||d!==u)&&Cy(e,o,r,u),Os=!1;var x=e.memoizedState;o.state=x,qu(e,r,o,s),d=e.memoizedState,l!==r||x!==d||Nn.current||Os?(typeof p=="function"&&(Wm(e,n,p,r),d=e.memoizedState),(l=Os||Sy(e,n,l,r,x,d,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=d),o.props=r,o.state=d,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,rj(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:hr(e.type,l),o.props=u,f=e.pendingProps,x=o.context,d=n.contextType,typeof d=="object"&&d!==null?d=er(d):(d=kn(n)?Xi:ln.current,d=uo(e,d));var g=n.getDerivedStateFromProps;(p=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||x!==d)&&Cy(e,o,r,d),Os=!1,x=e.memoizedState,o.state=x,qu(e,r,o,s);var v=e.memoizedState;l!==f||x!==v||Nn.current||Os?(typeof g=="function"&&(Wm(e,n,g,r),v=e.memoizedState),(u=Os||Sy(e,n,u,r,x,v,d)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,d)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=d,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),r=!1)}return Zm(t,e,n,r,i,s)}function Zm(t,e,n,r,s,i){Tj(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&vy(e,n,!1),gs(t,e,i);r=e.stateNode,FT.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=po(e,t.child,null,i),e.child=po(e,null,l,i)):dn(t,e,l,i),e.memoizedState=r.state,s&&vy(e,n,!0),e.child}function Pj(t){var e=t.stateNode;e.pendingContext?xy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&xy(t,e.context,!1),Tx(t,e.containerInfo)}function Ly(t,e,n,r,s){return ho(),jx(s),e.flags|=256,dn(t,e,n,r),e.child}var Km={dehydrated:null,treeContext:null,retryLane:0};function Gm(t){return{baseLanes:t,cachePool:null,transitions:null}}function Dj(t,e,n){var r=e.pendingProps,s=mt.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),rt(mt,s&1),t===null)return Um(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=qh(o,r,0,null),t=Vi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Gm(n),e.memoizedState=Km,t):Ix(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return $T(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var d={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=d,e.deletions=null):(r=ei(s,d),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=ei(l,i):(i=Vi(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Gm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Km,r}return i=t.child,t=i.sibling,r=ei(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ix(t,e){return e=qh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Dd(t,e,n,r){return r!==null&&jx(r),po(e,t.child,null,n),t=Ix(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $T(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=bf(Error(de(422))),Dd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=qh({mode:"visible",children:r.children},s,0,null),i=Vi(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&po(e,t.child,null,o),e.child.memoizedState=Gm(o),e.memoizedState=Km,i);if(!(e.mode&1))return Dd(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(de(419)),r=bf(i,r,void 0),Dd(t,e,o,r)}if(l=(o&t.childLanes)!==0,wn||l){if(r=zt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ms(t,s),yr(r,t,s,-1))}return Hx(),r=bf(Error(de(421))),Dd(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=XT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Mn=Gs(s.nextSibling),Ln=e,ct=!0,mr=null,t!==null&&(qn[Zn++]=ls,qn[Zn++]=cs,qn[Zn++]=Ji,ls=t.id,cs=t.overflow,Ji=e),e=Ix(e,r.children),e.flags|=4096,e)}function Ry(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Hm(t.return,e,n)}function _f(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Oj(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(dn(t,e,r.children,n),r=mt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ry(t,n,e);else if(t.tag===19)Ry(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(rt(mt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Zu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),_f(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Zu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}_f(e,!0,n,null,i);break;case"together":_f(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function vu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ta|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(de(153));if(e.child!==null){for(t=e.child,n=ei(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ei(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function zT(t,e,n){switch(e.tag){case 3:Pj(e),ho();break;case 5:sj(e);break;case 1:kn(e.type)&&Uu(e);break;case 4:Tx(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;rt(Yu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(rt(mt,mt.current&1),e.flags|=128,null):n&e.child.childLanes?Dj(t,e,n):(rt(mt,mt.current&1),t=gs(t,e,n),t!==null?t.sibling:null);rt(mt,mt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Oj(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),rt(mt,mt.current),r)break;return null;case 22:case 23:return e.lanes=0,Ej(t,e,n)}return gs(t,e,n)}var Mj,Qm,Lj,Rj;Mj=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Qm=function(){};Lj=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,zi($r.current);var i=null;switch(n){case"input":s=ym(t,s),r=ym(t,r),i=[];break;case"select":s=vt({},s,{value:void 0}),r=vt({},r,{value:void 0}),i=[];break;case"textarea":s=wm(t,s),r=wm(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=zu)}Nm(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ac.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var d=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&d!==l&&(d!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in d)d.hasOwnProperty(o)&&l[o]!==d[o]&&(n||(n={}),n[o]=d[o])}else n||(i||(i=[]),i.push(u,n)),n=d;else u==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,l=l?l.__html:void 0,d!=null&&l!==d&&(i=i||[]).push(u,d)):u==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(u,""+d):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ac.hasOwnProperty(u)?(d!=null&&u==="onScroll"&&it("scroll",t),i||l===d||(i=[])):(i=i||[]).push(u,d))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Rj=function(t,e,n,r){n!==r&&(e.flags|=4)};function dl(t,e){if(!ct)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function tn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function BT(t,e,n){var r=e.pendingProps;switch(wx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(e),null;case 1:return kn(e.type)&&Bu(),tn(e),null;case 3:return r=e.stateNode,fo(),ot(Nn),ot(ln),Dx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Td(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mr!==null&&(ig(mr),mr=null))),Qm(t,e),tn(e),null;case 5:Px(e);var s=zi(vc.current);if(n=e.type,t!==null&&e.stateNode!=null)Lj(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(de(166));return tn(e),null}if(t=zi($r.current),Td(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Rr]=e,r[gc]=i,t=(e.mode&1)!==0,n){case"dialog":it("cancel",r),it("close",r);break;case"iframe":case"object":case"embed":it("load",r);break;case"video":case"audio":for(s=0;s<Cl.length;s++)it(Cl[s],r);break;case"source":it("error",r);break;case"img":case"image":case"link":it("error",r),it("load",r);break;case"details":it("toggle",r);break;case"input":W0(r,i),it("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},it("invalid",r);break;case"textarea":V0(r,i),it("invalid",r)}Nm(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ed(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ed(r.textContent,l,t),s=["children",""+l]):ac.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&it("scroll",r)}switch(n){case"input":bd(r),Y0(r,i,!0);break;case"textarea":bd(r),q0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=zu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=c1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Rr]=e,t[gc]=r,Mj(t,e,!1,!1),e.stateNode=t;e:{switch(o=km(n,r),n){case"dialog":it("cancel",t),it("close",t),s=r;break;case"iframe":case"object":case"embed":it("load",t),s=r;break;case"video":case"audio":for(s=0;s<Cl.length;s++)it(Cl[s],t);s=r;break;case"source":it("error",t),s=r;break;case"img":case"image":case"link":it("error",t),it("load",t),s=r;break;case"details":it("toggle",t),s=r;break;case"input":W0(t,r),s=ym(t,r),it("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=vt({},r,{value:void 0}),it("invalid",t);break;case"textarea":V0(t,r),s=wm(t,r),it("invalid",t);break;default:s=r}Nm(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var d=l[i];i==="style"?h1(t,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&d1(t,d)):i==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&oc(t,d):typeof d=="number"&&oc(t,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ac.hasOwnProperty(i)?d!=null&&i==="onScroll"&&it("scroll",t):d!=null&&ox(t,i,d,o))}switch(n){case"input":bd(t),Y0(t,r,!1);break;case"textarea":bd(t),q0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+si(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ja(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ja(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=zu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tn(e),null;case 6:if(t&&e.stateNode!=null)Rj(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(de(166));if(n=zi(vc.current),zi($r.current),Td(e)){if(r=e.stateNode,n=e.memoizedProps,r[Rr]=e,(i=r.nodeValue!==n)&&(t=Ln,t!==null))switch(t.tag){case 3:Ed(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ed(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Rr]=e,e.stateNode=r}return tn(e),null;case 13:if(ot(mt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ct&&Mn!==null&&e.mode&1&&!(e.flags&128))J1(),ho(),e.flags|=98560,i=!1;else if(i=Td(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(de(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(de(317));i[Rr]=e}else ho(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tn(e),i=!1}else mr!==null&&(ig(mr),mr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||mt.current&1?Mt===0&&(Mt=3):Hx())),e.updateQueue!==null&&(e.flags|=4),tn(e),null);case 4:return fo(),Qm(t,e),t===null&&fc(e.stateNode.containerInfo),tn(e),null;case 10:return Sx(e.type._context),tn(e),null;case 17:return kn(e.type)&&Bu(),tn(e),null;case 19:if(ot(mt),i=e.memoizedState,i===null)return tn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)dl(i,!1);else{if(Mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Zu(t),o!==null){for(e.flags|=128,dl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return rt(mt,mt.current&1|2),e.child}t=t.sibling}i.tail!==null&&jt()>go&&(e.flags|=128,r=!0,dl(i,!1),e.lanes=4194304)}else{if(!r)if(t=Zu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),dl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ct)return tn(e),null}else 2*jt()-i.renderingStartTime>go&&n!==1073741824&&(e.flags|=128,r=!0,dl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=jt(),e.sibling=null,n=mt.current,rt(mt,r?n&1|2:n&1),e):(tn(e),null);case 22:case 23:return Ux(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Dn&1073741824&&(tn(e),e.subtreeFlags&6&&(e.flags|=8192)):tn(e),null;case 24:return null;case 25:return null}throw Error(de(156,e.tag))}function UT(t,e){switch(wx(e),e.tag){case 1:return kn(e.type)&&Bu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return fo(),ot(Nn),ot(ln),Dx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Px(e),null;case 13:if(ot(mt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(de(340));ho()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ot(mt),null;case 4:return fo(),null;case 10:return Sx(e.type._context),null;case 22:case 23:return Ux(),null;case 24:return null;default:return null}}var Od=!1,rn=!1,HT=typeof WeakSet=="function"?WeakSet:Set,ye=null;function qa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){yt(t,e,r)}else n.current=null}function Xm(t,e,n){try{n()}catch(r){yt(t,e,r)}}var Ay=!1;function WT(t,e){if(Rm=Iu,t=z1(),bx(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,d=-1,u=0,p=0,f=t,x=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==i||r!==0&&f.nodeType!==3||(d=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)x=f,f=g;for(;;){if(f===t)break t;if(x===n&&++u===s&&(l=o),x===i&&++p===r&&(d=o),(g=f.nextSibling)!==null)break;f=x,x=f.parentNode}f=g}n=l===-1||d===-1?null:{start:l,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Am={focusedElem:t,selectionRange:n},Iu=!1,ye=e;ye!==null;)if(e=ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ye=t;else for(;ye!==null;){e=ye;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,j=v.memoizedState,_=e.stateNode,N=_.getSnapshotBeforeUpdate(e.elementType===e.type?b:hr(e.type,b),j);_.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(de(163))}}catch(P){yt(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,ye=t;break}ye=e.return}return v=Ay,Ay=!1,v}function Ul(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Xm(e,n,i)}s=s.next}while(s!==r)}}function Yh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Jm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Aj(t){var e=t.alternate;e!==null&&(t.alternate=null,Aj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Rr],delete e[gc],delete e[$m],delete e[ST],delete e[CT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ij(t){return t.tag===5||t.tag===3||t.tag===4}function Iy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ij(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function eg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=zu));else if(r!==4&&(t=t.child,t!==null))for(eg(t,e,n),t=t.sibling;t!==null;)eg(t,e,n),t=t.sibling}function tg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(tg(t,e,n),t=t.sibling;t!==null;)tg(t,e,n),t=t.sibling}var Kt=null,pr=!1;function Ns(t,e,n){for(n=n.child;n!==null;)Fj(t,e,n),n=n.sibling}function Fj(t,e,n){if(Fr&&typeof Fr.onCommitFiberUnmount=="function")try{Fr.onCommitFiberUnmount(Ih,n)}catch{}switch(n.tag){case 5:rn||qa(n,e);case 6:var r=Kt,s=pr;Kt=null,Ns(t,e,n),Kt=r,pr=s,Kt!==null&&(pr?(t=Kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Kt.removeChild(n.stateNode));break;case 18:Kt!==null&&(pr?(t=Kt,n=n.stateNode,t.nodeType===8?ff(t.parentNode,n):t.nodeType===1&&ff(t,n),uc(t)):ff(Kt,n.stateNode));break;case 4:r=Kt,s=pr,Kt=n.stateNode.containerInfo,pr=!0,Ns(t,e,n),Kt=r,pr=s;break;case 0:case 11:case 14:case 15:if(!rn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Xm(n,e,o),s=s.next}while(s!==r)}Ns(t,e,n);break;case 1:if(!rn&&(qa(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){yt(n,e,l)}Ns(t,e,n);break;case 21:Ns(t,e,n);break;case 22:n.mode&1?(rn=(r=rn)||n.memoizedState!==null,Ns(t,e,n),rn=r):Ns(t,e,n);break;default:Ns(t,e,n)}}function Fy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new HT),e.forEach(function(r){var s=JT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ur(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Kt=l.stateNode,pr=!1;break e;case 3:Kt=l.stateNode.containerInfo,pr=!0;break e;case 4:Kt=l.stateNode.containerInfo,pr=!0;break e}l=l.return}if(Kt===null)throw Error(de(160));Fj(i,o,s),Kt=null,pr=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(u){yt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$j(e,t),e=e.sibling}function $j(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ur(e,t),Cr(t),r&4){try{Ul(3,t,t.return),Yh(3,t)}catch(b){yt(t,t.return,b)}try{Ul(5,t,t.return)}catch(b){yt(t,t.return,b)}}break;case 1:ur(e,t),Cr(t),r&512&&n!==null&&qa(n,n.return);break;case 5:if(ur(e,t),Cr(t),r&512&&n!==null&&qa(n,n.return),t.flags&32){var s=t.stateNode;try{oc(s,"")}catch(b){yt(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&o1(s,i),km(l,o);var u=km(l,i);for(o=0;o<d.length;o+=2){var p=d[o],f=d[o+1];p==="style"?h1(s,f):p==="dangerouslySetInnerHTML"?d1(s,f):p==="children"?oc(s,f):ox(s,p,f,u)}switch(l){case"input":bm(s,i);break;case"textarea":l1(s,i);break;case"select":var x=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Ja(s,!!i.multiple,g,!1):x!==!!i.multiple&&(i.defaultValue!=null?Ja(s,!!i.multiple,i.defaultValue,!0):Ja(s,!!i.multiple,i.multiple?[]:"",!1))}s[gc]=i}catch(b){yt(t,t.return,b)}}break;case 6:if(ur(e,t),Cr(t),r&4){if(t.stateNode===null)throw Error(de(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){yt(t,t.return,b)}}break;case 3:if(ur(e,t),Cr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{uc(e.containerInfo)}catch(b){yt(t,t.return,b)}break;case 4:ur(e,t),Cr(t);break;case 13:ur(e,t),Cr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(zx=jt())),r&4&&Fy(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(rn=(u=rn)||p,ur(e,t),rn=u):ur(e,t),Cr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!p&&t.mode&1)for(ye=t,p=t.child;p!==null;){for(f=ye=p;ye!==null;){switch(x=ye,g=x.child,x.tag){case 0:case 11:case 14:case 15:Ul(4,x,x.return);break;case 1:qa(x,x.return);var v=x.stateNode;if(typeof v.componentWillUnmount=="function"){r=x,n=x.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(b){yt(r,n,b)}}break;case 5:qa(x,x.return);break;case 22:if(x.memoizedState!==null){zy(f);continue}}g!==null?(g.return=x,ye=g):zy(f)}p=p.sibling}e:for(p=null,f=t;;){if(f.tag===5){if(p===null){p=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,d=f.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,l.style.display=u1("display",o))}catch(b){yt(t,t.return,b)}}}else if(f.tag===6){if(p===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(b){yt(t,t.return,b)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ur(e,t),Cr(t),r&4&&Fy(t);break;case 21:break;default:ur(e,t),Cr(t)}}function Cr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ij(n)){var r=n;break e}n=n.return}throw Error(de(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(oc(s,""),r.flags&=-33);var i=Iy(t);tg(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Iy(t);eg(t,l,o);break;default:throw Error(de(161))}}catch(d){yt(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function YT(t,e,n){ye=t,zj(t)}function zj(t,e,n){for(var r=(t.mode&1)!==0;ye!==null;){var s=ye,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Od;if(!o){var l=s.alternate,d=l!==null&&l.memoizedState!==null||rn;l=Od;var u=rn;if(Od=o,(rn=d)&&!u)for(ye=s;ye!==null;)o=ye,d=o.child,o.tag===22&&o.memoizedState!==null?By(s):d!==null?(d.return=o,ye=d):By(s);for(;i!==null;)ye=i,zj(i),i=i.sibling;ye=s,Od=l,rn=u}$y(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ye=i):$y(t)}}function $y(t){for(;ye!==null;){var e=ye;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:rn||Yh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!rn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:hr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&jy(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}jy(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var p=u.memoizedState;if(p!==null){var f=p.dehydrated;f!==null&&uc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(de(163))}rn||e.flags&512&&Jm(e)}catch(x){yt(e,e.return,x)}}if(e===t){ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,ye=n;break}ye=e.return}}function zy(t){for(;ye!==null;){var e=ye;if(e===t){ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ye=n;break}ye=e.return}}function By(t){for(;ye!==null;){var e=ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yh(4,e)}catch(d){yt(e,n,d)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(d){yt(e,s,d)}}var i=e.return;try{Jm(e)}catch(d){yt(e,i,d)}break;case 5:var o=e.return;try{Jm(e)}catch(d){yt(e,o,d)}}}catch(d){yt(e,e.return,d)}if(e===t){ye=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ye=l;break}ye=e.return}}var VT=Math.ceil,Qu=bs.ReactCurrentDispatcher,Fx=bs.ReactCurrentOwner,Xn=bs.ReactCurrentBatchConfig,Be=0,zt=null,Pt=null,Gt=0,Dn=0,Za=ci(0),Mt=0,wc=null,ta=0,Vh=0,$x=0,Hl=null,yn=null,zx=0,go=1/0,rs=null,Xu=!1,ng=null,Xs=null,Md=!1,zs=null,Ju=0,Wl=0,rg=null,yu=-1,bu=0;function hn(){return Be&6?jt():yu!==-1?yu:yu=jt()}function Js(t){return t.mode&1?Be&2&&Gt!==0?Gt&-Gt:TT.transition!==null?(bu===0&&(bu=N1()),bu):(t=Ge,t!==0||(t=window.event,t=t===void 0?16:D1(t.type)),t):1}function yr(t,e,n,r){if(50<Wl)throw Wl=0,rg=null,Error(de(185));zc(t,n,r),(!(Be&2)||t!==zt)&&(t===zt&&(!(Be&2)&&(Vh|=n),Mt===4&&As(t,Gt)),Sn(t,r),n===1&&Be===0&&!(e.mode&1)&&(go=jt()+500,Uh&&di()))}function Sn(t,e){var n=t.callbackNode;TE(t,e);var r=Au(t,t===zt?Gt:0);if(r===0)n!==null&&G0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&G0(n),e===1)t.tag===0?ET(Uy.bind(null,t)):G1(Uy.bind(null,t)),NT(function(){!(Be&6)&&di()}),n=null;else{switch(k1(r)){case 1:n=hx;break;case 4:n=w1;break;case 16:n=Ru;break;case 536870912:n=j1;break;default:n=Ru}n=Zj(n,Bj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Bj(t,e){if(yu=-1,bu=0,Be&6)throw Error(de(327));var n=t.callbackNode;if(so()&&t.callbackNode!==n)return null;var r=Au(t,t===zt?Gt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=eh(t,r);else{e=r;var s=Be;Be|=2;var i=Hj();(zt!==t||Gt!==e)&&(rs=null,go=jt()+500,Yi(t,e));do try{KT();break}catch(l){Uj(t,l)}while(!0);kx(),Qu.current=i,Be=s,Pt!==null?e=0:(zt=null,Gt=0,e=Mt)}if(e!==0){if(e===2&&(s=Pm(t),s!==0&&(r=s,e=sg(t,s))),e===1)throw n=wc,Yi(t,0),As(t,r),Sn(t,jt()),n;if(e===6)As(t,r);else{if(s=t.current.alternate,!(r&30)&&!qT(s)&&(e=eh(t,r),e===2&&(i=Pm(t),i!==0&&(r=i,e=sg(t,i))),e===1))throw n=wc,Yi(t,0),As(t,r),Sn(t,jt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(de(345));case 2:Ti(t,yn,rs);break;case 3:if(As(t,r),(r&130023424)===r&&(e=zx+500-jt(),10<e)){if(Au(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){hn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Fm(Ti.bind(null,t,yn,rs),e);break}Ti(t,yn,rs);break;case 4:if(As(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-vr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=jt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*VT(r/1960))-r,10<r){t.timeoutHandle=Fm(Ti.bind(null,t,yn,rs),r);break}Ti(t,yn,rs);break;case 5:Ti(t,yn,rs);break;default:throw Error(de(329))}}}return Sn(t,jt()),t.callbackNode===n?Bj.bind(null,t):null}function sg(t,e){var n=Hl;return t.current.memoizedState.isDehydrated&&(Yi(t,e).flags|=256),t=eh(t,e),t!==2&&(e=yn,yn=n,e!==null&&ig(e)),t}function ig(t){yn===null?yn=t:yn.push.apply(yn,t)}function qT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!br(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function As(t,e){for(e&=~$x,e&=~Vh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vr(e),r=1<<n;t[n]=-1,e&=~r}}function Uy(t){if(Be&6)throw Error(de(327));so();var e=Au(t,0);if(!(e&1))return Sn(t,jt()),null;var n=eh(t,e);if(t.tag!==0&&n===2){var r=Pm(t);r!==0&&(e=r,n=sg(t,r))}if(n===1)throw n=wc,Yi(t,0),As(t,e),Sn(t,jt()),n;if(n===6)throw Error(de(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ti(t,yn,rs),Sn(t,jt()),null}function Bx(t,e){var n=Be;Be|=1;try{return t(e)}finally{Be=n,Be===0&&(go=jt()+500,Uh&&di())}}function na(t){zs!==null&&zs.tag===0&&!(Be&6)&&so();var e=Be;Be|=1;var n=Xn.transition,r=Ge;try{if(Xn.transition=null,Ge=1,t)return t()}finally{Ge=r,Xn.transition=n,Be=e,!(Be&6)&&di()}}function Ux(){Dn=Za.current,ot(Za)}function Yi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jT(n)),Pt!==null)for(n=Pt.return;n!==null;){var r=n;switch(wx(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Bu();break;case 3:fo(),ot(Nn),ot(ln),Dx();break;case 5:Px(r);break;case 4:fo();break;case 13:ot(mt);break;case 19:ot(mt);break;case 10:Sx(r.type._context);break;case 22:case 23:Ux()}n=n.return}if(zt=t,Pt=t=ei(t.current,null),Gt=Dn=e,Mt=0,wc=null,$x=Vh=ta=0,yn=Hl=null,$i!==null){for(e=0;e<$i.length;e++)if(n=$i[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}$i=null}return t}function Uj(t,e){do{var n=Pt;try{if(kx(),gu.current=Gu,Ku){for(var r=xt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ku=!1}if(ea=0,Ft=Ot=xt=null,Bl=!1,yc=0,Fx.current=null,n===null||n.return===null){Mt=1,wc=e,Pt=null;break}e:{var i=t,o=n.return,l=n,d=e;if(e=Gt,l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var u=d,p=l,f=p.tag;if(!(p.mode&1)&&(f===0||f===11||f===15)){var x=p.alternate;x?(p.updateQueue=x.updateQueue,p.memoizedState=x.memoizedState,p.lanes=x.lanes):(p.updateQueue=null,p.memoizedState=null)}var g=Ty(o);if(g!==null){g.flags&=-257,Py(g,o,l,i,e),g.mode&1&&Ey(i,u,e),e=g,d=u;var v=e.updateQueue;if(v===null){var b=new Set;b.add(d),e.updateQueue=b}else v.add(d);break e}else{if(!(e&1)){Ey(i,u,e),Hx();break e}d=Error(de(426))}}else if(ct&&l.mode&1){var j=Ty(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Py(j,o,l,i,e),jx(mo(d,l));break e}}i=d=mo(d,l),Mt!==4&&(Mt=2),Hl===null?Hl=[i]:Hl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=kj(i,d,e);wy(i,_);break e;case 1:l=d;var N=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof N.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Xs===null||!Xs.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=Sj(i,l,e);wy(i,P);break e}}i=i.return}while(i!==null)}Yj(n)}catch(M){e=M,Pt===n&&n!==null&&(Pt=n=n.return);continue}break}while(!0)}function Hj(){var t=Qu.current;return Qu.current=Gu,t===null?Gu:t}function Hx(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),zt===null||!(ta&268435455)&&!(Vh&268435455)||As(zt,Gt)}function eh(t,e){var n=Be;Be|=2;var r=Hj();(zt!==t||Gt!==e)&&(rs=null,Yi(t,e));do try{ZT();break}catch(s){Uj(t,s)}while(!0);if(kx(),Be=n,Qu.current=r,Pt!==null)throw Error(de(261));return zt=null,Gt=0,Mt}function ZT(){for(;Pt!==null;)Wj(Pt)}function KT(){for(;Pt!==null&&!bE();)Wj(Pt)}function Wj(t){var e=qj(t.alternate,t,Dn);t.memoizedProps=t.pendingProps,e===null?Yj(t):Pt=e,Fx.current=null}function Yj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=UT(n,e),n!==null){n.flags&=32767,Pt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Mt=6,Pt=null;return}}else if(n=BT(n,e,Dn),n!==null){Pt=n;return}if(e=e.sibling,e!==null){Pt=e;return}Pt=e=t}while(e!==null);Mt===0&&(Mt=5)}function Ti(t,e,n){var r=Ge,s=Xn.transition;try{Xn.transition=null,Ge=1,GT(t,e,n,r)}finally{Xn.transition=s,Ge=r}return null}function GT(t,e,n,r){do so();while(zs!==null);if(Be&6)throw Error(de(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(de(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(PE(t,i),t===zt&&(Pt=zt=null,Gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Md||(Md=!0,Zj(Ru,function(){return so(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Xn.transition,Xn.transition=null;var o=Ge;Ge=1;var l=Be;Be|=4,Fx.current=null,WT(t,n),$j(n,t),gT(Am),Iu=!!Rm,Am=Rm=null,t.current=n,YT(n),_E(),Be=l,Ge=o,Xn.transition=i}else t.current=n;if(Md&&(Md=!1,zs=t,Ju=s),i=t.pendingLanes,i===0&&(Xs=null),NE(n.stateNode),Sn(t,jt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Xu)throw Xu=!1,t=ng,ng=null,t;return Ju&1&&t.tag!==0&&so(),i=t.pendingLanes,i&1?t===rg?Wl++:(Wl=0,rg=t):Wl=0,di(),null}function so(){if(zs!==null){var t=k1(Ju),e=Xn.transition,n=Ge;try{if(Xn.transition=null,Ge=16>t?16:t,zs===null)var r=!1;else{if(t=zs,zs=null,Ju=0,Be&6)throw Error(de(331));var s=Be;for(Be|=4,ye=t.current;ye!==null;){var i=ye,o=i.child;if(ye.flags&16){var l=i.deletions;if(l!==null){for(var d=0;d<l.length;d++){var u=l[d];for(ye=u;ye!==null;){var p=ye;switch(p.tag){case 0:case 11:case 15:Ul(8,p,i)}var f=p.child;if(f!==null)f.return=p,ye=f;else for(;ye!==null;){p=ye;var x=p.sibling,g=p.return;if(Aj(p),p===u){ye=null;break}if(x!==null){x.return=g,ye=x;break}ye=g}}}var v=i.alternate;if(v!==null){var b=v.child;if(b!==null){v.child=null;do{var j=b.sibling;b.sibling=null,b=j}while(b!==null)}}ye=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ye=o;else e:for(;ye!==null;){if(i=ye,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ul(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,ye=_;break e}ye=i.return}}var N=t.current;for(ye=N;ye!==null;){o=ye;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,ye=S;else e:for(o=N;ye!==null;){if(l=ye,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Yh(9,l)}}catch(M){yt(l,l.return,M)}if(l===o){ye=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,ye=P;break e}ye=l.return}}if(Be=s,di(),Fr&&typeof Fr.onPostCommitFiberRoot=="function")try{Fr.onPostCommitFiberRoot(Ih,t)}catch{}r=!0}return r}finally{Ge=n,Xn.transition=e}}return!1}function Hy(t,e,n){e=mo(n,e),e=kj(t,e,1),t=Qs(t,e,1),e=hn(),t!==null&&(zc(t,1,e),Sn(t,e))}function yt(t,e,n){if(t.tag===3)Hy(t,t,n);else for(;e!==null;){if(e.tag===3){Hy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xs===null||!Xs.has(r))){t=mo(n,t),t=Sj(e,t,1),e=Qs(e,t,1),t=hn(),e!==null&&(zc(e,1,t),Sn(e,t));break}}e=e.return}}function QT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=hn(),t.pingedLanes|=t.suspendedLanes&n,zt===t&&(Gt&n)===n&&(Mt===4||Mt===3&&(Gt&130023424)===Gt&&500>jt()-zx?Yi(t,0):$x|=n),Sn(t,e)}function Vj(t,e){e===0&&(t.mode&1?(e=jd,jd<<=1,!(jd&130023424)&&(jd=4194304)):e=1);var n=hn();t=ms(t,e),t!==null&&(zc(t,e,n),Sn(t,n))}function XT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Vj(t,n)}function JT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(de(314))}r!==null&&r.delete(e),Vj(t,n)}var qj;qj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nn.current)wn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wn=!1,zT(t,e,n);wn=!!(t.flags&131072)}else wn=!1,ct&&e.flags&1048576&&Q1(e,Wu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;vu(t,e),t=e.pendingProps;var s=uo(e,ln.current);ro(e,n),s=Mx(null,e,r,t,s,n);var i=Lx();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kn(r)?(i=!0,Uu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ex(e),s.updater=Wh,e.stateNode=s,s._reactInternals=e,Ym(e,r,t,n),e=Zm(null,e,r,!0,i,n)):(e.tag=0,ct&&i&&_x(e),dn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(vu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=tP(r),t=hr(r,t),s){case 0:e=qm(null,e,r,t,n);break e;case 1:e=My(null,e,r,t,n);break e;case 11:e=Dy(null,e,r,t,n);break e;case 14:e=Oy(null,e,r,hr(r.type,t),n);break e}throw Error(de(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hr(r,s),qm(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hr(r,s),My(t,e,r,s,n);case 3:e:{if(Pj(e),t===null)throw Error(de(387));r=e.pendingProps,i=e.memoizedState,s=i.element,rj(t,e),qu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=mo(Error(de(423)),e),e=Ly(t,e,r,n,s);break e}else if(r!==s){s=mo(Error(de(424)),e),e=Ly(t,e,r,n,s);break e}else for(Mn=Gs(e.stateNode.containerInfo.firstChild),Ln=e,ct=!0,mr=null,n=tj(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ho(),r===s){e=gs(t,e,n);break e}dn(t,e,r,n)}e=e.child}return e;case 5:return sj(e),t===null&&Um(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Im(r,s)?o=null:i!==null&&Im(r,i)&&(e.flags|=32),Tj(t,e),dn(t,e,o,n),e.child;case 6:return t===null&&Um(e),null;case 13:return Dj(t,e,n);case 4:return Tx(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=po(e,null,r,n):dn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hr(r,s),Dy(t,e,r,s,n);case 7:return dn(t,e,e.pendingProps,n),e.child;case 8:return dn(t,e,e.pendingProps.children,n),e.child;case 12:return dn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,rt(Yu,r._currentValue),r._currentValue=o,i!==null)if(br(i.value,o)){if(i.children===s.children&&!Nn.current){e=gs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var d=l.firstContext;d!==null;){if(d.context===r){if(i.tag===1){d=ds(-1,n&-n),d.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var p=u.pending;p===null?d.next=d:(d.next=p.next,p.next=d),u.pending=d}}i.lanes|=n,d=i.alternate,d!==null&&(d.lanes|=n),Hm(i.return,n,e),l.lanes|=n;break}d=d.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(de(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Hm(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}dn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ro(e,n),s=er(s),r=r(s),e.flags|=1,dn(t,e,r,n),e.child;case 14:return r=e.type,s=hr(r,e.pendingProps),s=hr(r.type,s),Oy(t,e,r,s,n);case 15:return Cj(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hr(r,s),vu(t,e),e.tag=1,kn(r)?(t=!0,Uu(e)):t=!1,ro(e,n),Nj(e,r,s),Ym(e,r,s,n),Zm(null,e,r,!0,t,n);case 19:return Oj(t,e,n);case 22:return Ej(t,e,n)}throw Error(de(156,e.tag))};function Zj(t,e){return _1(t,e)}function eP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(t,e,n,r){return new eP(t,e,n,r)}function Wx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tP(t){if(typeof t=="function")return Wx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===cx)return 11;if(t===dx)return 14}return 2}function ei(t,e){var n=t.alternate;return n===null?(n=Kn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function _u(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Wx(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Fa:return Vi(n.children,s,i,e);case lx:o=8,s|=8;break;case mm:return t=Kn(12,n,e,s|2),t.elementType=mm,t.lanes=i,t;case gm:return t=Kn(13,n,e,s),t.elementType=gm,t.lanes=i,t;case xm:return t=Kn(19,n,e,s),t.elementType=xm,t.lanes=i,t;case s1:return qh(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case n1:o=10;break e;case r1:o=9;break e;case cx:o=11;break e;case dx:o=14;break e;case Ds:o=16,r=null;break e}throw Error(de(130,t==null?t:typeof t,""))}return e=Kn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Vi(t,e,n,r){return t=Kn(7,t,r,e),t.lanes=n,t}function qh(t,e,n,r){return t=Kn(22,t,r,e),t.elementType=s1,t.lanes=n,t.stateNode={isHidden:!1},t}function wf(t,e,n){return t=Kn(6,t,null,e),t.lanes=n,t}function jf(t,e,n){return e=Kn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function nP(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nf(0),this.expirationTimes=nf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nf(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Yx(t,e,n,r,s,i,o,l,d){return t=new nP(t,e,n,l,d),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Kn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ex(i),t}function rP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ia,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Kj(t){if(!t)return ii;t=t._reactInternals;e:{if(ca(t)!==t||t.tag!==1)throw Error(de(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(de(171))}if(t.tag===1){var n=t.type;if(kn(n))return K1(t,n,e)}return e}function Gj(t,e,n,r,s,i,o,l,d){return t=Yx(n,r,!0,t,s,i,o,l,d),t.context=Kj(null),n=t.current,r=hn(),s=Js(n),i=ds(r,s),i.callback=e??null,Qs(n,i,s),t.current.lanes=s,zc(t,s,r),Sn(t,r),t}function Zh(t,e,n,r){var s=e.current,i=hn(),o=Js(s);return n=Kj(n),e.context===null?e.context=n:e.pendingContext=n,e=ds(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Qs(s,e,o),t!==null&&(yr(t,s,o,i),mu(t,s,o)),o}function th(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Wy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vx(t,e){Wy(t,e),(t=t.alternate)&&Wy(t,e)}function sP(){return null}var Qj=typeof reportError=="function"?reportError:function(t){console.error(t)};function qx(t){this._internalRoot=t}Kh.prototype.render=qx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(de(409));Zh(t,e,null,null)};Kh.prototype.unmount=qx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;na(function(){Zh(null,t,null,null)}),e[fs]=null}};function Kh(t){this._internalRoot=t}Kh.prototype.unstable_scheduleHydration=function(t){if(t){var e=E1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rs.length&&e!==0&&e<Rs[n].priority;n++);Rs.splice(n,0,t),n===0&&P1(t)}};function Zx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Gh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Yy(){}function iP(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=th(o);i.call(u)}}var o=Gj(e,r,t,0,null,!1,!1,"",Yy);return t._reactRootContainer=o,t[fs]=o.current,fc(t.nodeType===8?t.parentNode:t),na(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=th(d);l.call(u)}}var d=Yx(t,0,!1,null,null,!1,!1,"",Yy);return t._reactRootContainer=d,t[fs]=d.current,fc(t.nodeType===8?t.parentNode:t),na(function(){Zh(e,d,n,r)}),d}function Qh(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var d=th(o);l.call(d)}}Zh(e,o,t,s)}else o=iP(n,e,t,s,r);return th(o)}S1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Sl(e.pendingLanes);n!==0&&(px(e,n|1),Sn(e,jt()),!(Be&6)&&(go=jt()+500,di()))}break;case 13:na(function(){var r=ms(t,1);if(r!==null){var s=hn();yr(r,t,1,s)}}),Vx(t,1)}};fx=function(t){if(t.tag===13){var e=ms(t,134217728);if(e!==null){var n=hn();yr(e,t,134217728,n)}Vx(t,134217728)}};C1=function(t){if(t.tag===13){var e=Js(t),n=ms(t,e);if(n!==null){var r=hn();yr(n,t,e,r)}Vx(t,e)}};E1=function(){return Ge};T1=function(t,e){var n=Ge;try{return Ge=t,e()}finally{Ge=n}};Cm=function(t,e,n){switch(e){case"input":if(bm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Bh(r);if(!s)throw Error(de(90));a1(r),bm(r,s)}}}break;case"textarea":l1(t,n);break;case"select":e=n.value,e!=null&&Ja(t,!!n.multiple,e,!1)}};m1=Bx;g1=na;var aP={usingClientEntryPoint:!1,Events:[Uc,Ua,Bh,p1,f1,Bx]},ul={findFiberByHostInstance:Fi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oP={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=y1(t),t===null?null:t.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||sP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ld.isDisabled&&Ld.supportsFiber)try{Ih=Ld.inject(oP),Fr=Ld}catch{}}In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aP;In.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zx(e))throw Error(de(200));return rP(t,e,null,n)};In.createRoot=function(t,e){if(!Zx(t))throw Error(de(299));var n=!1,r="",s=Qj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Yx(t,1,!1,null,null,n,!1,r,s),t[fs]=e.current,fc(t.nodeType===8?t.parentNode:t),new qx(e)};In.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(de(188)):(t=Object.keys(t).join(","),Error(de(268,t)));return t=y1(e),t=t===null?null:t.stateNode,t};In.flushSync=function(t){return na(t)};In.hydrate=function(t,e,n){if(!Gh(e))throw Error(de(200));return Qh(null,t,e,!0,n)};In.hydrateRoot=function(t,e,n){if(!Zx(t))throw Error(de(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Qj;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Gj(e,null,t,1,n??null,s,!1,i,o),t[fs]=e.current,fc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Kh(e)};In.render=function(t,e,n){if(!Gh(e))throw Error(de(200));return Qh(null,t,e,!1,n)};In.unmountComponentAtNode=function(t){if(!Gh(t))throw Error(de(40));return t._reactRootContainer?(na(function(){Qh(null,null,t,!1,function(){t._reactRootContainer=null,t[fs]=null})}),!0):!1};In.unstable_batchedUpdates=Bx;In.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Gh(n))throw Error(de(200));if(t==null||t._reactInternals===void 0)throw Error(de(38));return Qh(t,e,n,!1,r)};In.version="18.3.1-next-f1338f8080-20240426";function Xj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xj)}catch(t){console.error(t)}}Xj(),Xw.exports=In;var Wc=Xw.exports;const lP=ys(Wc);var Vy=Wc;pm.createRoot=Vy.createRoot,pm.hydrateRoot=Vy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jc(){return jc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jc.apply(this,arguments)}var Bs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Bs||(Bs={}));const qy="popstate";function cP(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return ag("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:nh(s)}return uP(e,n,null,t)}function Ct(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Jj(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function dP(){return Math.random().toString(36).substr(2,8)}function Zy(t,e){return{usr:t.state,key:t.key,idx:e}}function ag(t,e,n,r){return n===void 0&&(n=null),jc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Lo(e):e,{state:n,key:e&&e.key||r||dP()})}function nh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Lo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function uP(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Bs.Pop,d=null,u=p();u==null&&(u=0,o.replaceState(jc({},o.state,{idx:u}),""));function p(){return(o.state||{idx:null}).idx}function f(){l=Bs.Pop;let j=p(),_=j==null?null:j-u;u=j,d&&d({action:l,location:b.location,delta:_})}function x(j,_){l=Bs.Push;let N=ag(b.location,j,_);u=p()+1;let S=Zy(N,u),P=b.createHref(N);try{o.pushState(S,"",P)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(P)}i&&d&&d({action:l,location:b.location,delta:1})}function g(j,_){l=Bs.Replace;let N=ag(b.location,j,_);u=p();let S=Zy(N,u),P=b.createHref(N);o.replaceState(S,"",P),i&&d&&d({action:l,location:b.location,delta:0})}function v(j){let _=s.location.origin!=="null"?s.location.origin:s.location.href,N=typeof j=="string"?j:nh(j);return N=N.replace(/ $/,"%20"),Ct(_,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,_)}let b={get action(){return l},get location(){return t(s,o)},listen(j){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(qy,f),d=j,()=>{s.removeEventListener(qy,f),d=null}},createHref(j){return e(s,j)},createURL:v,encodeLocation(j){let _=v(j);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:x,replace:g,go(j){return o.go(j)}};return b}var Ky;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ky||(Ky={}));function hP(t,e,n){return n===void 0&&(n="/"),pP(t,e,n)}function pP(t,e,n,r){let s=typeof e=="string"?Lo(e):e,i=Kx(s.pathname||"/",n);if(i==null)return null;let o=e2(t);fP(o);let l=null;for(let d=0;l==null&&d<o.length;++d){let u=SP(i);l=jP(o[d],u)}return l}function e2(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let d={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};d.relativePath.startsWith("/")&&(Ct(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let u=ti([r,d.relativePath]),p=n.concat(d);i.children&&i.children.length>0&&(Ct(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),e2(i.children,e,p,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:_P(u,i.index),routesMeta:p})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let d of t2(i.path))s(i,o,d)}),e}function t2(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=t2(r.join("/")),l=[];return l.push(...o.map(d=>d===""?i:[i,d].join("/"))),s&&l.push(...o),l.map(d=>t.startsWith("/")&&d===""?"/":d)}function fP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:wP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const mP=/^:[\w-]+$/,gP=3,xP=2,vP=1,yP=10,bP=-2,Gy=t=>t==="*";function _P(t,e){let n=t.split("/"),r=n.length;return n.some(Gy)&&(r+=bP),e&&(r+=xP),n.filter(s=>!Gy(s)).reduce((s,i)=>s+(mP.test(i)?gP:i===""?vP:yP),r)}function wP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function jP(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let d=r[l],u=l===r.length-1,p=i==="/"?e:e.slice(i.length)||"/",f=NP({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},p),x=d.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:ti([i,f.pathname]),pathnameBase:PP(ti([i,f.pathnameBase])),route:x}),f.pathnameBase!=="/"&&(i=ti([i,f.pathnameBase]))}return o}function NP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=kP(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,p,f)=>{let{paramName:x,isOptional:g}=p;if(x==="*"){let b=l[f]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const v=l[f];return g&&!v?u[x]=void 0:u[x]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function kP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Jj(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,d)=>(r.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function SP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Jj(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Kx(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function CP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Lo(t):t;return{pathname:n?n.startsWith("/")?n:EP(n,e):e,search:DP(r),hash:OP(s)}}function EP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Nf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function TP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Gx(t,e){let n=TP(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Qx(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Lo(t):(s=jc({},t),Ct(!s.pathname||!s.pathname.includes("?"),Nf("?","pathname","search",s)),Ct(!s.pathname||!s.pathname.includes("#"),Nf("#","pathname","hash",s)),Ct(!s.search||!s.search.includes("#"),Nf("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),f-=1;s.pathname=x.join("/")}l=f>=0?e[f]:"/"}let d=CP(s,l),u=o&&o!=="/"&&o.endsWith("/"),p=(i||o===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(u||p)&&(d.pathname+="/"),d}const ti=t=>t.join("/").replace(/\/\/+/g,"/"),PP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),DP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,OP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function MP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const n2=["post","put","patch","delete"];new Set(n2);const LP=["get",...n2];new Set(LP);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nc(){return Nc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nc.apply(this,arguments)}const Xx=w.createContext(null),RP=w.createContext(null),ui=w.createContext(null),Xh=w.createContext(null),hi=w.createContext({outlet:null,matches:[],isDataRoute:!1}),r2=w.createContext(null);function AP(t,e){let{relative:n}=e===void 0?{}:e;Ro()||Ct(!1);let{basename:r,navigator:s}=w.useContext(ui),{hash:i,pathname:o,search:l}=i2(t,{relative:n}),d=o;return r!=="/"&&(d=o==="/"?r:ti([r,o])),s.createHref({pathname:d,search:l,hash:i})}function Ro(){return w.useContext(Xh)!=null}function pi(){return Ro()||Ct(!1),w.useContext(Xh).location}function s2(t){w.useContext(ui).static||w.useLayoutEffect(t)}function da(){let{isDataRoute:t}=w.useContext(hi);return t?KP():IP()}function IP(){Ro()||Ct(!1);let t=w.useContext(Xx),{basename:e,future:n,navigator:r}=w.useContext(ui),{matches:s}=w.useContext(hi),{pathname:i}=pi(),o=JSON.stringify(Gx(s,n.v7_relativeSplatPath)),l=w.useRef(!1);return s2(()=>{l.current=!0}),w.useCallback(function(u,p){if(p===void 0&&(p={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let f=Qx(u,JSON.parse(o),i,p.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ti([e,f.pathname])),(p.replace?r.replace:r.push)(f,p.state,p)},[e,r,o,i,t])}function i2(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=w.useContext(ui),{matches:s}=w.useContext(hi),{pathname:i}=pi(),o=JSON.stringify(Gx(s,r.v7_relativeSplatPath));return w.useMemo(()=>Qx(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function FP(t,e){return $P(t,e)}function $P(t,e,n,r){Ro()||Ct(!1);let{navigator:s,static:i}=w.useContext(ui),{matches:o}=w.useContext(hi),l=o[o.length-1],d=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let p=pi(),f;if(e){var x;let _=typeof e=="string"?Lo(e):e;u==="/"||(x=_.pathname)!=null&&x.startsWith(u)||Ct(!1),f=_}else f=p;let g=f.pathname||"/",v=g;if(u!=="/"){let _=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(_.length).join("/")}let b=hP(t,{pathname:v}),j=WP(b&&b.map(_=>Object.assign({},_,{params:Object.assign({},d,_.params),pathname:ti([u,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?u:ti([u,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,n,r);return e&&j?w.createElement(Xh.Provider,{value:{location:Nc({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Bs.Pop}},j):j}function zP(){let t=ZP(),e=MP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:s},n):null,null)}const BP=w.createElement(zP,null);class UP extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?w.createElement(hi.Provider,{value:this.props.routeContext},w.createElement(r2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function HP(t){let{routeContext:e,match:n,children:r}=t,s=w.useContext(Xx);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(hi.Provider,{value:e},r)}function WP(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let p=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);p>=0||Ct(!1),o=o.slice(0,Math.min(o.length,p+1))}let d=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<o.length;p++){let f=o[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=p),f.route.id){let{loaderData:x,errors:g}=n,v=f.route.loader&&x[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||v){d=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((p,f,x)=>{let g,v=!1,b=null,j=null;n&&(g=l&&f.route.id?l[f.route.id]:void 0,b=f.route.errorElement||BP,d&&(u<0&&x===0?(GP("route-fallback"),v=!0,j=null):u===x&&(v=!0,j=f.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,x+1)),N=()=>{let S;return g?S=b:v?S=j:f.route.Component?S=w.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=p,w.createElement(HP,{match:f,routeContext:{outlet:p,matches:_,isDataRoute:n!=null},children:S})};return n&&(f.route.ErrorBoundary||f.route.errorElement||x===0)?w.createElement(UP,{location:n.location,revalidation:n.revalidation,component:b,error:g,children:N(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):N()},null)}var a2=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(a2||{}),o2=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(o2||{});function YP(t){let e=w.useContext(Xx);return e||Ct(!1),e}function VP(t){let e=w.useContext(RP);return e||Ct(!1),e}function qP(t){let e=w.useContext(hi);return e||Ct(!1),e}function l2(t){let e=qP(),n=e.matches[e.matches.length-1];return n.route.id||Ct(!1),n.route.id}function ZP(){var t;let e=w.useContext(r2),n=VP(),r=l2();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function KP(){let{router:t}=YP(a2.UseNavigateStable),e=l2(o2.UseNavigateStable),n=w.useRef(!1);return s2(()=>{n.current=!0}),w.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Nc({fromRouteId:e},i)))},[t,e])}const Qy={};function GP(t,e,n){Qy[t]||(Qy[t]=!0)}function QP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function io(t){let{to:e,replace:n,state:r,relative:s}=t;Ro()||Ct(!1);let{future:i,static:o}=w.useContext(ui),{matches:l}=w.useContext(hi),{pathname:d}=pi(),u=da(),p=Qx(e,Gx(l,i.v7_relativeSplatPath),d,s==="path"),f=JSON.stringify(p);return w.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:s}),[u,f,s,n,r]),null}function De(t){Ct(!1)}function XP(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Bs.Pop,navigator:i,static:o=!1,future:l}=t;Ro()&&Ct(!1);let d=e.replace(/^\/*/,"/"),u=w.useMemo(()=>({basename:d,navigator:i,static:o,future:Nc({v7_relativeSplatPath:!1},l)}),[d,l,i,o]);typeof r=="string"&&(r=Lo(r));let{pathname:p="/",search:f="",hash:x="",state:g=null,key:v="default"}=r,b=w.useMemo(()=>{let j=Kx(p,d);return j==null?null:{location:{pathname:j,search:f,hash:x,state:g,key:v},navigationType:s}},[d,p,f,x,g,v,s]);return b==null?null:w.createElement(ui.Provider,{value:u},w.createElement(Xh.Provider,{children:n,value:b}))}function c2(t){let{children:e,location:n}=t;return FP(og(e),n)}new Promise(()=>{});function og(t,e){e===void 0&&(e=[]);let n=[];return w.Children.forEach(t,(r,s)=>{if(!w.isValidElement(r))return;let i=[...e,s];if(r.type===w.Fragment){n.push.apply(n,og(r.props.children,i));return}r.type!==De&&Ct(!1),!r.props.index||!r.props.children||Ct(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=og(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lg(){return lg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lg.apply(this,arguments)}function JP(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function eD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function tD(t,e){return t.button===0&&(!e||e==="_self")&&!eD(t)}const nD=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],rD="6";try{window.__reactRouterVersion=rD}catch{}const sD="startTransition",Xy=lo[sD];function iD(t){let{basename:e,children:n,future:r,window:s}=t,i=w.useRef();i.current==null&&(i.current=cP({window:s,v5Compat:!0}));let o=i.current,[l,d]=w.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},p=w.useCallback(f=>{u&&Xy?Xy(()=>d(f)):d(f)},[d,u]);return w.useLayoutEffect(()=>o.listen(p),[o,p]),w.useEffect(()=>QP(r),[r]),w.createElement(XP,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const aD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",oD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rh=w.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:d,to:u,preventScrollReset:p,viewTransition:f}=e,x=JP(e,nD),{basename:g}=w.useContext(ui),v,b=!1;if(typeof u=="string"&&oD.test(u)&&(v=u,aD))try{let S=new URL(window.location.href),P=u.startsWith("//")?new URL(S.protocol+u):new URL(u),M=Kx(P.pathname,g);P.origin===S.origin&&M!=null?u=M+P.search+P.hash:b=!0}catch{}let j=AP(u,{relative:s}),_=lD(u,{replace:o,state:l,target:d,preventScrollReset:p,relative:s,viewTransition:f});function N(S){r&&r(S),S.defaultPrevented||_(S)}return w.createElement("a",lg({},x,{href:v||j,onClick:b||i?r:N,ref:n,target:d}))});var Jy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Jy||(Jy={}));var eb;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(eb||(eb={}));function lD(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,d=da(),u=pi(),p=i2(t,{relative:o});return w.useCallback(f=>{if(tD(f,n)){f.preventDefault();let x=r!==void 0?r:nh(u)===nh(p);d(t,{replace:x,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,d,p,r,s,n,t,i,o,l])}function d2(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=d2(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function Us(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=d2(t))&&(r&&(r+=" "),r+=e);return r}const Yl=t=>typeof t=="number"&&!isNaN(t),ra=t=>typeof t=="string",jn=t=>typeof t=="function",wu=t=>ra(t)||jn(t)?t:null,kf=t=>w.isValidElement(t)||ra(t)||jn(t)||Yl(t);function cD(t,e,n){n===void 0&&(n=300);const{scrollHeight:r,style:s}=t;requestAnimationFrame(()=>{s.minHeight="initial",s.height=r+"px",s.transition=`all ${n}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(e,n)})})}function Jh(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:s=!0,collapseDuration:i=300}=t;return function(o){let{children:l,position:d,preventExitTransition:u,done:p,nodeRef:f,isIn:x}=o;const g=r?`${e}--${d}`:e,v=r?`${n}--${d}`:n,b=w.useRef(0);return w.useLayoutEffect(()=>{const j=f.current,_=g.split(" "),N=S=>{S.target===f.current&&(j.dispatchEvent(new Event("d")),j.removeEventListener("animationend",N),j.removeEventListener("animationcancel",N),b.current===0&&S.type!=="animationcancel"&&j.classList.remove(..._))};j.classList.add(..._),j.addEventListener("animationend",N),j.addEventListener("animationcancel",N)},[]),w.useEffect(()=>{const j=f.current,_=()=>{j.removeEventListener("animationend",_),s?cD(j,p,i):p()};x||(u?_():(b.current=1,j.className+=` ${v}`,j.addEventListener("animationend",_)))},[x]),Y.createElement(Y.Fragment,null,l)}}function tb(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const Vn={list:new Map,emitQueue:new Map,on(t,e){return this.list.has(t)||this.list.set(t,[]),this.list.get(t).push(e),this},off(t,e){if(e){const n=this.list.get(t).filter(r=>r!==e);return this.list.set(t,n),this}return this.list.delete(t),this},cancelEmit(t){const e=this.emitQueue.get(t);return e&&(e.forEach(clearTimeout),this.emitQueue.delete(t)),this},emit(t){this.list.has(t)&&this.list.get(t).forEach(e=>{const n=setTimeout(()=>{e(...[].slice.call(arguments,1))},0);this.emitQueue.has(t)||this.emitQueue.set(t,[]),this.emitQueue.get(t).push(n)})}},Rd=t=>{let{theme:e,type:n,...r}=t;return Y.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...r})},Sf={info:function(t){return Y.createElement(Rd,{...t},Y.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return Y.createElement(Rd,{...t},Y.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return Y.createElement(Rd,{...t},Y.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return Y.createElement(Rd,{...t},Y.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return Y.createElement("div",{className:"Toastify__spinner"})}};function dD(t){const[,e]=w.useReducer(g=>g+1,0),[n,r]=w.useState([]),s=w.useRef(null),i=w.useRef(new Map).current,o=g=>n.indexOf(g)!==-1,l=w.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:t,containerId:null,isToastActive:o,getToast:g=>i.get(g)}).current;function d(g){let{containerId:v}=g;const{limit:b}=l.props;!b||v&&l.containerId!==v||(l.count-=l.queue.length,l.queue=[])}function u(g){r(v=>g==null?[]:v.filter(b=>b!==g))}function p(){const{toastContent:g,toastProps:v,staleId:b}=l.queue.shift();x(g,v,b)}function f(g,v){let{delay:b,staleId:j,..._}=v;if(!kf(g)||function(te){return!s.current||l.props.enableMultiContainer&&te.containerId!==l.props.containerId||i.has(te.toastId)&&te.updateId==null}(_))return;const{toastId:N,updateId:S,data:P}=_,{props:M}=l,A=()=>u(N),R=S==null;R&&l.count++;const T={...M,style:M.toastStyle,key:l.toastKey++,...Object.fromEntries(Object.entries(_).filter(te=>{let[G,B]=te;return B!=null})),toastId:N,updateId:S,data:P,closeToast:A,isIn:!1,className:wu(_.className||M.toastClassName),bodyClassName:wu(_.bodyClassName||M.bodyClassName),progressClassName:wu(_.progressClassName||M.progressClassName),autoClose:!_.isLoading&&(V=_.autoClose,D=M.autoClose,V===!1||Yl(V)&&V>0?V:D),deleteToast(){const te=tb(i.get(N),"removed");i.delete(N),Vn.emit(4,te);const G=l.queue.length;if(l.count=N==null?l.count-l.displayedToast:l.count-1,l.count<0&&(l.count=0),G>0){const B=N==null?l.props.limit:1;if(G===1||B===1)l.displayedToast++,p();else{const Z=B>G?G:B;l.displayedToast=Z;for(let C=0;C<Z;C++)p()}}else e()}};var V,D;T.iconOut=function(te){let{theme:G,type:B,isLoading:Z,icon:C}=te,q=null;const I={theme:G,type:B};return C===!1||(jn(C)?q=C(I):w.isValidElement(C)?q=w.cloneElement(C,I):ra(C)||Yl(C)?q=C:Z?q=Sf.spinner():(X=>X in Sf)(B)&&(q=Sf[B](I))),q}(T),jn(_.onOpen)&&(T.onOpen=_.onOpen),jn(_.onClose)&&(T.onClose=_.onClose),T.closeButton=M.closeButton,_.closeButton===!1||kf(_.closeButton)?T.closeButton=_.closeButton:_.closeButton===!0&&(T.closeButton=!kf(M.closeButton)||M.closeButton);let U=g;w.isValidElement(g)&&!ra(g.type)?U=w.cloneElement(g,{closeToast:A,toastProps:T,data:P}):jn(g)&&(U=g({closeToast:A,toastProps:T,data:P})),M.limit&&M.limit>0&&l.count>M.limit&&R?l.queue.push({toastContent:U,toastProps:T,staleId:j}):Yl(b)?setTimeout(()=>{x(U,T,j)},b):x(U,T,j)}function x(g,v,b){const{toastId:j}=v;b&&i.delete(b);const _={content:g,props:v};i.set(j,_),r(N=>[...N,j].filter(S=>S!==b)),Vn.emit(4,tb(_,_.props.updateId==null?"added":"updated"))}return w.useEffect(()=>(l.containerId=t.containerId,Vn.cancelEmit(3).on(0,f).on(1,g=>s.current&&u(g)).on(5,d).emit(2,l),()=>{i.clear(),Vn.emit(3,l)}),[]),w.useEffect(()=>{l.props=t,l.isToastActive=o,l.displayedToast=n.length}),{getToastToRender:function(g){const v=new Map,b=Array.from(i.values());return t.newestOnTop&&b.reverse(),b.forEach(j=>{const{position:_}=j.props;v.has(_)||v.set(_,[]),v.get(_).push(j)}),Array.from(v,j=>g(j[0],j[1]))},containerRef:s,isToastActive:o}}function nb(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientX:t.clientX}function rb(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientY:t.clientY}function uD(t){const[e,n]=w.useState(!1),[r,s]=w.useState(!1),i=w.useRef(null),o=w.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,l=w.useRef(t),{autoClose:d,pauseOnHover:u,closeToast:p,onClick:f,closeOnClick:x}=t;function g(P){if(t.draggable){P.nativeEvent.type==="touchstart"&&P.nativeEvent.preventDefault(),o.didMove=!1,document.addEventListener("mousemove",_),document.addEventListener("mouseup",N),document.addEventListener("touchmove",_),document.addEventListener("touchend",N);const M=i.current;o.canCloseOnClick=!0,o.canDrag=!0,o.boundingRect=M.getBoundingClientRect(),M.style.transition="",o.x=nb(P.nativeEvent),o.y=rb(P.nativeEvent),t.draggableDirection==="x"?(o.start=o.x,o.removalDistance=M.offsetWidth*(t.draggablePercent/100)):(o.start=o.y,o.removalDistance=M.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent/100))}}function v(P){if(o.boundingRect){const{top:M,bottom:A,left:R,right:T}=o.boundingRect;P.nativeEvent.type!=="touchend"&&t.pauseOnHover&&o.x>=R&&o.x<=T&&o.y>=M&&o.y<=A?j():b()}}function b(){n(!0)}function j(){n(!1)}function _(P){const M=i.current;o.canDrag&&M&&(o.didMove=!0,e&&j(),o.x=nb(P),o.y=rb(P),o.delta=t.draggableDirection==="x"?o.x-o.start:o.y-o.start,o.start!==o.x&&(o.canCloseOnClick=!1),M.style.transform=`translate${t.draggableDirection}(${o.delta}px)`,M.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function N(){document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",N),document.removeEventListener("touchmove",_),document.removeEventListener("touchend",N);const P=i.current;if(o.canDrag&&o.didMove&&P){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return s(!0),void t.closeToast();P.style.transition="transform 0.2s, opacity 0.2s",P.style.transform=`translate${t.draggableDirection}(0)`,P.style.opacity="1"}}w.useEffect(()=>{l.current=t}),w.useEffect(()=>(i.current&&i.current.addEventListener("d",b,{once:!0}),jn(t.onOpen)&&t.onOpen(w.isValidElement(t.children)&&t.children.props),()=>{const P=l.current;jn(P.onClose)&&P.onClose(w.isValidElement(P.children)&&P.children.props)}),[]),w.useEffect(()=>(t.pauseOnFocusLoss&&(document.hasFocus()||j(),window.addEventListener("focus",b),window.addEventListener("blur",j)),()=>{t.pauseOnFocusLoss&&(window.removeEventListener("focus",b),window.removeEventListener("blur",j))}),[t.pauseOnFocusLoss]);const S={onMouseDown:g,onTouchStart:g,onMouseUp:v,onTouchEnd:v};return d&&u&&(S.onMouseEnter=j,S.onMouseLeave=b),x&&(S.onClick=P=>{f&&f(P),o.canCloseOnClick&&p()}),{playToast:b,pauseToast:j,isRunning:e,preventExitTransition:r,toastRef:i,eventHandlers:S}}function u2(t){let{closeToast:e,theme:n,ariaLabel:r="close"}=t;return Y.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:s=>{s.stopPropagation(),e(s)},"aria-label":r},Y.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Y.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function hD(t){let{delay:e,isRunning:n,closeToast:r,type:s="default",hide:i,className:o,style:l,controlledProgress:d,progress:u,rtl:p,isIn:f,theme:x}=t;const g=i||d&&u===0,v={...l,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused",opacity:g?0:1};d&&(v.transform=`scaleX(${u})`);const b=Us("Toastify__progress-bar",d?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${x}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":p}),j=jn(o)?o({rtl:p,type:s,defaultClassName:b}):Us(b,o);return Y.createElement("div",{role:"progressbar","aria-hidden":g?"true":"false","aria-label":"notification timer",className:j,style:v,[d&&u>=1?"onTransitionEnd":"onAnimationEnd"]:d&&u<1?null:()=>{f&&r()}})}const pD=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:s}=uD(t),{closeButton:i,children:o,autoClose:l,onClick:d,type:u,hideProgressBar:p,closeToast:f,transition:x,position:g,className:v,style:b,bodyClassName:j,bodyStyle:_,progressClassName:N,progressStyle:S,updateId:P,role:M,progress:A,rtl:R,toastId:T,deleteToast:V,isIn:D,isLoading:U,iconOut:te,closeOnClick:G,theme:B}=t,Z=Us("Toastify__toast",`Toastify__toast-theme--${B}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":R},{"Toastify__toast--close-on-click":G}),C=jn(v)?v({rtl:R,position:g,type:u,defaultClassName:Z}):Us(Z,v),q=!!A||!l,I={closeToast:f,type:u,theme:B};let X=null;return i===!1||(X=jn(i)?i(I):w.isValidElement(i)?w.cloneElement(i,I):u2(I)),Y.createElement(x,{isIn:D,done:V,position:g,preventExitTransition:n,nodeRef:r},Y.createElement("div",{id:T,onClick:d,className:C,...s,style:b,ref:r},Y.createElement("div",{...D&&{role:M},className:jn(j)?j({type:u}):Us("Toastify__toast-body",j),style:_},te!=null&&Y.createElement("div",{className:Us("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!U})},te),Y.createElement("div",null,o)),X,Y.createElement(hD,{...P&&!q?{key:`pb-${P}`}:{},rtl:R,theme:B,delay:l,isRunning:e,isIn:D,closeToast:f,hide:p,type:u,style:S,className:N,controlledProgress:q,progress:A||0})))},ep=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},fD=Jh(ep("bounce",!0));Jh(ep("slide",!0));Jh(ep("zoom"));Jh(ep("flip"));const cg=w.forwardRef((t,e)=>{const{getToastToRender:n,containerRef:r,isToastActive:s}=dD(t),{className:i,style:o,rtl:l,containerId:d}=t;function u(p){const f=Us("Toastify__toast-container",`Toastify__toast-container--${p}`,{"Toastify__toast-container--rtl":l});return jn(i)?i({position:p,rtl:l,defaultClassName:f}):Us(f,wu(i))}return w.useEffect(()=>{e&&(e.current=r.current)},[]),Y.createElement("div",{ref:r,className:"Toastify",id:d},n((p,f)=>{const x=f.length?{...o}:{...o,pointerEvents:"none"};return Y.createElement("div",{className:u(p),style:x,key:`container-${p}`},f.map((g,v)=>{let{content:b,props:j}=g;return Y.createElement(pD,{...j,isIn:s(j.toastId),style:{...j.style,"--nth":v+1,"--len":f.length},key:`toast-${j.key}`},b)}))}))});cg.displayName="ToastContainer",cg.defaultProps={position:"top-right",transition:fD,autoClose:5e3,closeButton:u2,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let Cf,Pi=new Map,El=[],mD=1;function h2(){return""+mD++}function gD(t){return t&&(ra(t.toastId)||Yl(t.toastId))?t.toastId:h2()}function Vl(t,e){return Pi.size>0?Vn.emit(0,t,e):El.push({content:t,options:e}),e.toastId}function sh(t,e){return{...e,type:e&&e.type||t,toastId:gD(e)}}function Ad(t){return(e,n)=>Vl(e,sh(t,n))}function $(t,e){return Vl(t,sh("default",e))}$.loading=(t,e)=>Vl(t,sh("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),$.promise=function(t,e,n){let r,{pending:s,error:i,success:o}=e;s&&(r=ra(s)?$.loading(s,n):$.loading(s.render,{...n,...s}));const l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},d=(p,f,x)=>{if(f==null)return void $.dismiss(r);const g={type:p,...l,...n,data:x},v=ra(f)?{render:f}:f;return r?$.update(r,{...g,...v}):$(v.render,{...g,...v}),x},u=jn(t)?t():t;return u.then(p=>d("success",o,p)).catch(p=>d("error",i,p)),u},$.success=Ad("success"),$.info=Ad("info"),$.error=Ad("error"),$.warning=Ad("warning"),$.warn=$.warning,$.dark=(t,e)=>Vl(t,sh("default",{theme:"dark",...e})),$.dismiss=t=>{Pi.size>0?Vn.emit(1,t):El=El.filter(e=>t!=null&&e.options.toastId!==t)},$.clearWaitingQueue=function(t){return t===void 0&&(t={}),Vn.emit(5,t)},$.isActive=t=>{let e=!1;return Pi.forEach(n=>{n.isToastActive&&n.isToastActive(t)&&(e=!0)}),e},$.update=function(t,e){e===void 0&&(e={}),setTimeout(()=>{const n=function(r,s){let{containerId:i}=s;const o=Pi.get(i||Cf);return o&&o.getToast(r)}(t,e);if(n){const{props:r,content:s}=n,i={delay:100,...r,...e,toastId:e.toastId||t,updateId:h2()};i.toastId!==t&&(i.staleId=t);const o=i.render||s;delete i.render,Vl(o,i)}},0)},$.done=t=>{$.update(t,{progress:1})},$.onChange=t=>(Vn.on(4,t),()=>{Vn.off(4,t)}),$.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},$.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},Vn.on(2,t=>{Cf=t.containerId||t,Pi.set(Cf,t),El.forEach(e=>{Vn.emit(0,e.content,e.options)}),El=[]}).on(3,t=>{Pi.delete(t.containerId||t),Pi.size===0&&Vn.off(0).off(1).off(5)});const p2=w.createContext(null),xD=({children:t})=>{const[e,n]=w.useState(null),[r,s]=w.useState(!0);w.useEffect(()=>{(async()=>{try{s(!0);const u=localStorage.getItem("userData");if(u)try{const p=JSON.parse(u);n(p)}catch{localStorage.removeItem("userData")}}catch(u){console.error("Error checking user:",u)}finally{s(!1)}})()},[]);const i=async(d,u)=>{try{if(s(!0),d==="admin@example.com"||d==="admin"){const p={id:"00000000-0000-0000-0000-000000000001",name:"مدير النظام",email:"admin@example.com",role:"admin"};return n(p),localStorage.setItem("userData",JSON.stringify(p)),localStorage.getItem("rememberMe")==="true"&&localStorage.setItem("rememberedEmail",d),$.success("تم تسجيل الدخول بنجاح"),p}else throw new Error("بيانات الدخول غير صحيحة")}catch(p){throw console.error("Login error:",p),$.error(p.message||"فشل تسجيل الدخول"),p}finally{s(!1)}},o=async()=>{try{s(!0),n(null),localStorage.removeItem("userData"),$.info("تم تسجيل الخروج بنجاح")}catch(d){console.error("Logout error:",d),$.error("فشل تسجيل الخروج")}finally{s(!1)}},l=()=>{if(e)return!0;const d=localStorage.getItem("userData");if(d)try{const u=JSON.parse(d);return e||n(u),!0}catch{return localStorage.removeItem("userData"),!1}return!1};return a.jsx(p2.Provider,{value:{user:e,login:i,logout:o,loading:r,isAuthenticated:l},children:t})},Ao=()=>{const t=w.useContext(p2);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},f2=w.createContext(null),sb={store:{name:"متجر خدماتكم",description:"نظام متكامل لإدارة المتجر",email:"info@example.com",phone:"0599123456",address:"غزة، فلسطين",logo:"/logo.svg",currency:"ILS",language:"ar"},social:{facebook:"",twitter:"",instagram:"",whatsapp:""},notifications:{email:!0,sms:!1,push:!0},login:{logo:"/logo.svg",background:"/login-bg.jpg"}},vD=({children:t})=>{const[e,n]=w.useState(sb),[r,s]=w.useState(!0);w.useEffect(()=>{const l=localStorage.getItem("appSettings");if(l)try{n(JSON.parse(l))}catch(d){console.error("Error parsing saved settings:",d),n(sb)}s(!1)},[]);const i=async l=>{try{return s(!0),localStorage.setItem("appSettings",JSON.stringify(l)),n(l),$.success("تم حفظ الإعدادات بنجاح"),!0}catch(d){return console.error("Error saving settings:",d),$.error("فشل في حفظ الإعدادات"),!1}finally{s(!1)}},o=async l=>{try{const d={...e,store:{...e.store,name:l}};return await i(d)}catch(d){return console.error("Error updating store name:",d),!1}};return a.jsx(f2.Provider,{value:{settings:e,loading:r,saveSettings:i,updateStoreName:o},children:t})},tp=()=>{const t=w.useContext(f2);if(!t)throw new Error("useSettings must be used within a SettingsProvider");return t};function yD({children:t,allowedRoles:e=[]}){const{isAuthenticated:n,user:r,loading:s}=Ao();return s?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n()?e.length>0&&r&&!e.includes(r.role)?r.role==="admin"?a.jsx(io,{to:"/admin-dashboard"}):a.jsx(io,{to:"/login",replace:!0,state:{from:window.location.pathname}}):t:a.jsx(io,{to:"/login",replace:!0,state:{from:window.location.pathname}})}function bD(){var P,M,A;const[t,e]=w.useState(""),[n,r]=w.useState(""),[s,i]=w.useState(!1),[o,l]=w.useState(""),[d,u]=w.useState(!1),{login:p,isAuthenticated:f,user:x}=Ao(),{settings:g}=tp(),v=da(),j=((P=pi().state)==null?void 0:P.from)||"/admin-dashboard";if(w.useEffect(()=>{const R=localStorage.getItem("rememberedEmail"),T=localStorage.getItem("rememberMe")==="true";R&&T&&(e(R),u(!0))},[]),w.useEffect(()=>{document.title=`تسجيل الدخول - ${g.store.name}`},[g.store.name]),f())return x&&x.role==="admin"?a.jsx(io,{to:j}):a.jsx(io,{to:j});const _=async R=>{R.preventDefault(),l(""),i(!0);try{localStorage.setItem("rememberMe",d?"true":"false"),(await p(t,n)).role,v(j)}catch(T){console.error("Error logging in:",T),l(T.message||"فشل في تسجيل الدخول")}finally{i(!1)}},N=((M=g.login)==null?void 0:M.background)||"/login-bg.jpg",S=((A=g.login)==null?void 0:A.logo)||"/logo.svg";return a.jsxs("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundImage:`url(${N})`,backgroundSize:"cover",backgroundPosition:"center",position:"relative"},children:[a.jsx("div",{className:"absolute inset-0 z-0",style:{background:"radial-gradient(circle at top right, rgba(250, 204, 21, 0.1) 0%, rgba(15, 23, 42, 0.9) 70%)",boxShadow:"inset 0 0 100px rgba(250, 204, 21, 0.2)"}}),a.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-yellow-400 rounded-full filter blur-3xl opacity-10 -mr-32 -mt-32"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-yellow-400 rounded-full filter blur-3xl opacity-10 -ml-32 -mb-32"}),a.jsxs("div",{className:"relative z-10 bg-white bg-opacity-95 backdrop-blur-sm p-8 rounded-lg shadow-2xl w-full max-w-md border border-gray-200",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("img",{src:S,alt:"Logo",className:"h-20 w-20 rounded-lg shadow-lg",onError:R=>{R.target.onerror=null,R.target.src="/logo.svg"}})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"تسجيل الدخول"}),a.jsxs("p",{className:"text-gray-600 mt-2",children:["مرحباً بك في نظام ",g.store.name]})]}),o&&a.jsx("div",{className:"bg-red-50 text-red-800 p-4 rounded-lg mb-6 border-r-4 border-red-500",children:o}),a.jsxs("form",{onSubmit:_,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم المستخدم"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"email",type:"text",value:t,onChange:R=>e(R.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-yellow-500 focus:border-yellow-500 shadow-sm",placeholder:"أدخل اسم المستخدم",required:!0}),a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:a.jsxs("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[a.jsx("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),a.jsx("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]})})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"كلمة المرور"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",type:"password",value:n,onChange:R=>r(R.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-yellow-500 focus:border-yellow-500 shadow-sm",placeholder:"أدخل كلمة المرور",required:!0}),a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:a.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"remember-me",type:"checkbox",checked:d,onChange:R=>u(R.target.checked),className:"h-4 w-4 text-yellow-600 focus:ring-yellow-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"remember-me",className:"mr-2 block text-sm text-gray-700",children:"تذكرني"})]}),a.jsx("div",{className:"text-sm",children:a.jsx("a",{href:"#",className:"text-yellow-600 hover:text-yellow-500 font-medium",children:"نسيت كلمة المرور؟"})})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:s,className:`w-full bg-gradient-to-r from-yellow-500 to-yellow-600 text-slate-900 py-2 rounded-md hover:from-yellow-600 hover:to-yellow-700 transition-colors shadow-md font-bold ${s?"opacity-50 cursor-not-allowed":""}`,children:s?"جاري تسجيل الدخول...":"تسجيل الدخول"})})]})]})]})}function _D({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const wD=w.forwardRef(_D);function jD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"}))}const ND=w.forwardRef(jD);function kD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const SD=w.forwardRef(kD);function CD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 21v-7.5a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 .75.75V21m-4.5 0H2.36m11.14 0H18m0 0h3.64m-1.39 0V9.349M3.75 21V9.349m0 0a3.001 3.001 0 0 0 3.75-.615A2.993 2.993 0 0 0 9.75 9.75c.896 0 1.7-.393 2.25-1.016a2.993 2.993 0 0 0 2.25 1.016c.896 0 1.7-.393 2.25-1.015a3.001 3.001 0 0 0 3.75.614m-16.5 0a3.004 3.004 0 0 1-.621-4.72l1.189-1.19A1.5 1.5 0 0 1 5.378 3h13.243a1.5 1.5 0 0 1 1.06.44l1.19 1.189a3 3 0 0 1-.621 4.72M6.75 18h3.75a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75H6.75a.75.75 0 0 0-.75.75v3.75c0 .414.336.75.75.75Z"}))}const ED=w.forwardRef(CD);function TD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const PD=w.forwardRef(TD);function DD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const OD=w.forwardRef(DD);function MD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const LD=w.forwardRef(MD);function RD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}const AD=w.forwardRef(RD);function ID({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 11.25v8.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5v-8.25M12 4.875A2.625 2.625 0 1 0 9.375 7.5H12m0-2.625V7.5m0-2.625A2.625 2.625 0 1 1 14.625 7.5H12m0 0V21m-8.625-9.75h18c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125h-18c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}))}const FD=w.forwardRef(ID);function $D({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const zD=w.forwardRef($D);function BD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 1 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 0 1-1.44-4.282m3.102.069a18.03 18.03 0 0 1-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 0 1 8.835 2.535M10.34 6.66a23.847 23.847 0 0 0 8.835-2.535m0 0A23.74 23.74 0 0 0 18.795 3m.38 1.125a23.91 23.91 0 0 1 1.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 0 0 1.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 0 1 0 3.46"}))}const UD=w.forwardRef(BD);function HD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const WD=w.forwardRef(HD);function YD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v17.25m0 0c-1.472 0-2.882.265-4.185.75M12 20.25c1.472 0 2.882.265 4.185.75M18.75 4.97A48.416 48.416 0 0 0 12 4.5c-2.291 0-4.545.16-6.75.47m13.5 0c1.01.143 2.01.317 3 .52m-3-.52 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.988 5.988 0 0 1-2.031.352 5.988 5.988 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L18.75 4.971Zm-16.5.52c.99-.203 1.99-.377 3-.52m0 0 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.989 5.989 0 0 1-2.031.352 5.989 5.989 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L5.25 4.971Z"}))}const VD=w.forwardRef(YD);function qD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const ZD=w.forwardRef(qD);function KD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const GD=w.forwardRef(KD);function QD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const XD=w.forwardRef(QD);function JD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 0 1 0 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 0 1 0-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375Z"}))}const e5=w.forwardRef(JD);function t5({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}))}const ib=w.forwardRef(t5);function n5({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const r5=w.forwardRef(n5);function s5({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const i5=w.forwardRef(s5),a5=[{id:"overview",label:"الإحصائيات",icon:PD},{id:"financial-dashboard",label:"لوحة المعلومات المالية",icon:ND},{id:"orders",label:"الطلبات",icon:GD},{id:"products-management",label:"إدارة المنتجات",icon:AD,subItems:[{id:"products",label:"المنتجات"},{id:"products-management",label:"إدارة المنتجات"},{id:"categories",label:"التصنيفات"}]},{id:"vendors-management",label:"إدارة البائعين",icon:ED,subItems:[{id:"vendors",label:"قائمة البائعين"},{id:"vendors-list",label:"عرض البائعين"},{id:"add-vendor",label:"إضافة بائع"},{id:"vendor-categories-table",label:"أقسام المتاجر"}]},{id:"drivers-management",label:"إدارة السائقين",icon:ib,subItems:[{id:"drivers",label:"قائمة السائقين"},{id:"add-driver",label:"إضافة سائق"}]},{id:"shipping-methods",label:"طرق التوصيل",icon:ib},{id:"payments-management",label:"إدارة المدفوعات",icon:LD,subItems:[{id:"payments",label:"طرق الدفع"},{id:"wallet",label:"المحفظة"},{id:"wallet-settings",label:"إعدادات المحفظة"},{id:"wallet-charging",label:"شحن المحافظ"}]},{id:"customers-management",label:"إدارة الزبائن",icon:r5,subItems:[{id:"customers",label:"قائمة الزبائن"},{id:"add-customer",label:"إضافة زبون"}]},{id:"wholesale",label:"عملاء الجملة",icon:VD},{id:"users-management",label:"إدارة المستخدمين",icon:i5,subItems:[{id:"users",label:"مستخدمي النظام"}]},{id:"media",label:"الوسائط",icon:WD},{id:"api-keys",label:"مفاتيح API",icon:zD},{id:"ratings",label:"التقييمات",icon:XD,subItems:[{id:"vendor-ratings",label:"تقييمات المتاجر"},{id:"driver-ratings",label:"تقييمات السائقين"},{id:"customer-ratings",label:"تقييمات الزبائن"},{id:"ratings-report",label:"تقرير التقييمات الشهري"}]},{id:"advertisements",label:"الإعلانات",icon:UD},{id:"coupons",label:"كوبونات الخصم",icon:e5},{id:"points-rewards",label:"النقاط والمكافآت",icon:FD},{id:"referral",label:"نظام الإحالة",icon:ZD},{id:"notifications",label:"الإشعارات",icon:SD},{id:"settings",label:"الإعدادات",icon:OD}];function o5({activeTab:t,onTabChange:e}){const n=da(),{logout:r}=Ao(),[s,i]=w.useState({"products-management":!1,"vendors-management":!1,"drivers-management":!1,"customers-management":!1,"users-management":!1,ratings:!1,"payments-management":!0}),o=u=>{e(u),n(`/admin-dashboard/${u}`)},l=u=>{i(p=>({...p,[u]:!p[u]}))},d=()=>{r(),n("/login")};return a.jsxs("aside",{className:"fixed right-0 top-0 w-64 h-full flex flex-col bg-slate-900 text-white shadow-xl z-50",children:[a.jsx("div",{className:"p-4 border-b border-slate-700/50 bg-gradient-to-r from-slate-900 to-slate-800",children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center text-white shadow-lg",children:"🛒"}),a.jsx("h2",{className:"mr-2 text-lg font-bold bg-gradient-to-r from-blue-400 to-blue-600 bg-clip-text text-transparent",children:"لوحة التحكم"})]})}),a.jsx("div",{className:"p-4 border-b border-slate-700/50",children:a.jsxs("div",{className:"flex items-center gap-3 bg-slate-800/50 p-3 rounded-lg",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-700 rounded-full flex items-center justify-center border-2 border-yellow-500",children:"👤"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-yellow-100",children:"مدير النظام"}),a.jsx("p",{className:"text-xs text-slate-400",children:"admin@example.com"})]})]})}),a.jsx("nav",{className:"flex-1 overflow-y-auto p-4 space-y-1.5",children:a5.map(u=>{const p=u.icon,f=t===u.id||u.subItems&&u.subItems.some(g=>t===g.id),x=s[u.id];return a.jsxs("div",{children:[a.jsxs(rh,{to:u.subItems?"#":`/admin-dashboard/${u.id}`,onClick:g=>{g.preventDefault(),u.subItems?l(u.id):o(u.id)},className:`flex items-center w-full px-4 py-3 rounded-lg transition-all duration-200 group ${f?"bg-gradient-to-r from-yellow-600 to-yellow-700 text-white shadow-lg":"text-slate-300 hover:bg-slate-800/70 hover:text-white"}`,children:[a.jsx(p,{className:`w-5 h-5 ml-3 ${f?"text-white":"text-slate-400"} group-hover:scale-110`}),a.jsx("span",{className:"font-medium",children:u.label}),u.subItems&&a.jsx("svg",{className:`w-4 h-4 mr-auto transition-transform ${x?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u.subItems&&x&&a.jsx("div",{className:"mt-1 mr-4 space-y-1",children:u.subItems.map(g=>a.jsx(rh,{to:`/admin-dashboard/${g.id}`,onClick:v=>{v.preventDefault(),o(g.id)},className:`flex items-center w-full px-4 py-2 rounded-lg transition-all duration-200 ${t===g.id?"bg-yellow-600/50 text-white":"text-slate-400 hover:bg-slate-800/30 hover:text-white"}`,children:a.jsx("span",{className:"text-sm",children:g.label})},g.id))})]},u.id)})}),a.jsx("div",{className:"p-4 border-t border-slate-700/50 bg-slate-900/50 backdrop-blur-sm",children:a.jsxs("button",{onClick:d,className:"flex items-center w-full px-4 py-2 text-slate-300 hover:text-white hover:bg-red-500/10 rounded-lg transition-colors group",children:[a.jsx(wD,{className:"w-5 h-5 ml-3 group-hover:text-red-400"}),a.jsx("span",{className:"group-hover:text-red-400",children:"تسجيل الخروج"})]})})]})}function l5(){const{settings:t}=tp(),{user:e,logout:n}=Ao(),r=da(),[s]=w.useState([{id:1,text:"طلب جديد #123",time:"قبل 5 دقائق"},{id:2,text:"اكتمال الطلب #120",time:"قبل 10 دقائق"},{id:3,text:"تقييم جديد من العميل أحمد",time:"قبل 15 دقيقة"}]),[i,o]=w.useState(!1),[l,d]=w.useState(!1),u=()=>{n(),r("/login")};return a.jsx("div",{className:"bg-gradient-to-r from-slate-900 to-slate-800 shadow-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsx("div",{className:"flex-1 max-w-lg",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:a.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),a.jsx("input",{type:"text",placeholder:"بحث...",className:"block w-full bg-slate-800 text-white rounded-lg border-gray-700 pr-10 focus:border-yellow-500 focus:ring-yellow-500 placeholder-gray-400"})]})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>o(!i),className:"relative p-2 text-gray-300 hover:text-white rounded-full hover:bg-slate-800",children:[a.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),a.jsx("span",{className:"absolute top-0 right-0 block h-2 w-2 rounded-full bg-yellow-500 ring-2 ring-slate-900"})]}),i&&a.jsxs("div",{className:"absolute left-0 mt-2 w-80 bg-slate-800 rounded-lg shadow-lg py-1 z-50 border border-slate-700",children:[a.jsx("div",{className:"px-4 py-2 border-b border-slate-700",children:a.jsx("h3",{className:"text-sm font-semibold text-white",children:"الإشعارات"})}),a.jsx("div",{className:"max-h-64 overflow-y-auto",children:s.map(p=>a.jsxs("div",{className:"px-4 py-2 hover:bg-slate-700 cursor-pointer",children:[a.jsx("p",{className:"text-sm text-gray-200",children:p.text}),a.jsx("p",{className:"text-xs text-gray-400",children:p.time})]},p.id))}),a.jsx("div",{className:"px-4 py-2 border-t border-slate-700",children:a.jsx("button",{className:"text-sm text-yellow-400 hover:text-yellow-300",children:"عرض كل الإشعارات"})})]})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>d(!l),className:"flex items-center",children:[a.jsx("div",{className:"h-8 w-8 rounded-full border-2 border-yellow-500 overflow-hidden bg-slate-700 flex items-center justify-center",children:a.jsx("span",{className:"text-lg text-slate-300",children:"👤"})}),a.jsx("span",{className:"mr-2 text-sm font-medium text-gray-200",children:(e==null?void 0:e.name)||t.store.name})]}),l&&a.jsxs("div",{className:"absolute left-0 mt-2 w-48 bg-slate-800 rounded-lg shadow-lg py-1 z-50 border border-slate-700",children:[a.jsxs("div",{className:"px-4 py-2 border-b border-slate-700",children:[a.jsx("p",{className:"text-sm font-semibold text-white",children:(e==null?void 0:e.email)||"admin@example.com"}),a.jsx("p",{className:"text-xs text-gray-400",children:(e==null?void 0:e.role)==="admin"?"مدير النظام":"مستخدم"})]}),a.jsx("button",{onClick:()=>r("/admin-dashboard/settings"),className:"block w-full text-right px-4 py-2 text-sm text-gray-200 hover:bg-slate-700",children:"الإعدادات"}),a.jsx("button",{onClick:u,className:"block w-full text-right px-4 py-2 text-sm text-red-400 hover:bg-slate-700",children:"تسجيل الخروج"})]})]})]})]})})})}const c5="modulepreload",d5=function(t){return"/"+t},ab={},sa=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(d=>{if(d=d5(d),d in ab)return;ab[d]=!0;const u=d.endsWith(".css"),p=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":c5,u||(f.as="script"),f.crossOrigin="",f.href=d,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((x,g)=>{f.addEventListener("load",x),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},u5=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>sa(async()=>{const{default:r}=await Promise.resolve().then(()=>Io);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Jx extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class h5 extends Jx{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class p5 extends Jx{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class f5 extends Jx{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var dg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(dg||(dg={}));var m5=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?i(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})};class g5{constructor(e,{headers:n={},customFetch:r,region:s=dg.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=u5(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return m5(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let l={},{region:d}=n;d||(d=this.region),d&&d!=="any"&&(l["x-region"]=d);let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const p=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:u}).catch(v=>{throw new h5(v)}),f=p.headers.get("x-relay-error");if(f&&f==="true")throw new p5(p);if(!p.ok)throw new f5(p);let x=((r=p.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return x==="application/json"?g=yield p.json():x==="application/octet-stream"?g=yield p.blob():x==="text/event-stream"?g=p:x==="multipart/form-data"?g=yield p.formData():g=yield p.text(),{data:g,error:null}}catch(s){return{data:null,error:s}}})}}var bn={},ev={},np={},Yc={},rp={},sp={},x5=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},xo=x5();const v5=xo.fetch,m2=xo.fetch.bind(xo),g2=xo.Headers,y5=xo.Request,b5=xo.Response,Io=Object.freeze(Object.defineProperty({__proto__:null,Headers:g2,Request:y5,Response:b5,default:m2,fetch:v5},Symbol.toStringTag,{value:"Module"})),_5=AC(Io);var ip={};Object.defineProperty(ip,"__esModule",{value:!0});let w5=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};ip.default=w5;var x2=pn&&pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sp,"__esModule",{value:!0});const j5=x2(_5),N5=x2(ip);let k5=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=j5.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,d;let u=null,p=null,f=null,x=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const _=await i.text();_===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?p=_:p=JSON.parse(_))}const b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),j=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&j&&j.length>1&&(f=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(u={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,f=null,x=406,g="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const b=await i.text();try{u=JSON.parse(b),Array.isArray(u)&&i.status===404&&(p=[],u=null,x=200,g="OK")}catch{i.status===404&&b===""?(x=204,g="No Content"):u={message:b}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,x=200,g="OK"),u&&this.shouldThrowOnError)throw new N5.default(u)}return{error:u,data:p,count:f,status:x,statusText:g}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,d;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(d=i==null?void 0:i.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};sp.default=k5;var S5=pn&&pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rp,"__esModule",{value:!0});const C5=S5(sp);let E5=class extends C5.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const d=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${d};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};rp.default=E5;var T5=pn&&pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yc,"__esModule",{value:!0});const P5=T5(rp);let D5=class extends P5.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Yc.default=D5;var O5=pn&&pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(np,"__esModule",{value:!0});const hl=O5(Yc);let M5=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new hl.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,d)=>l.concat(Object.keys(d)),[]);if(o.length>0){const l=[...new Set(o)].map(d=>`"${d}"`);this.url.searchParams.set("columns",l.join(","))}}return new hl.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const d=e.reduce((u,p)=>u.concat(Object.keys(p)),[]);if(d.length>0){const u=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",u.join(","))}}return new hl.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new hl.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new hl.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};np.default=M5;var ap={},op={};Object.defineProperty(op,"__esModule",{value:!0});op.version=void 0;op.version="0.0.0-automated";Object.defineProperty(ap,"__esModule",{value:!0});ap.DEFAULT_HEADERS=void 0;const L5=op;ap.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${L5.version}`};var v2=pn&&pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ev,"__esModule",{value:!0});const R5=v2(np),A5=v2(Yc),I5=ap;let F5=class y2{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},I5.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new R5.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new y2(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let d;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([p,f])=>f!==void 0).map(([p,f])=>[p,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([p,f])=>{l.searchParams.append(p,f)})):(o="POST",d=n);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new A5.default({method:o,url:l,headers:u,schema:this.schemaName,body:d,fetch:this.fetch,allowEmpty:!1})}};ev.default=F5;var Fo=pn&&pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bn,"__esModule",{value:!0});bn.PostgrestError=bn.PostgrestBuilder=bn.PostgrestTransformBuilder=bn.PostgrestFilterBuilder=bn.PostgrestQueryBuilder=bn.PostgrestClient=void 0;const b2=Fo(ev);bn.PostgrestClient=b2.default;const _2=Fo(np);bn.PostgrestQueryBuilder=_2.default;const w2=Fo(Yc);bn.PostgrestFilterBuilder=w2.default;const j2=Fo(rp);bn.PostgrestTransformBuilder=j2.default;const N2=Fo(sp);bn.PostgrestBuilder=N2.default;const k2=Fo(ip);bn.PostgrestError=k2.default;var $5=bn.default={PostgrestClient:b2.default,PostgrestQueryBuilder:_2.default,PostgrestFilterBuilder:w2.default,PostgrestTransformBuilder:j2.default,PostgrestBuilder:N2.default,PostgrestError:k2.default};const{PostgrestClient:z5,PostgrestQueryBuilder:x9,PostgrestFilterBuilder:v9,PostgrestTransformBuilder:y9,PostgrestBuilder:b9,PostgrestError:_9}=$5,B5="2.11.2",U5={"X-Client-Info":`realtime-js/${B5}`},H5="1.0.0",S2=1e4,W5=1e3;var ao;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ao||(ao={}));var Pn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Pn||(Pn={}));var fr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(fr||(fr={}));var ug;(function(t){t.websocket="websocket"})(ug||(ug={}));var Ri;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ri||(Ri={}));class Y5{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+s));o=o+s;const d=r.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:d,payload:u}}}class C2{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var tt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(tt||(tt={}));const ob=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=V5(o,t,e,s),i),{})},V5=(t,e,n,r)=>{const s=e.find(l=>l.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?E2(i,o):hg(o)},E2=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return G5(e,n)}switch(t){case tt.bool:return q5(e);case tt.float4:case tt.float8:case tt.int2:case tt.int4:case tt.int8:case tt.numeric:case tt.oid:return Z5(e);case tt.json:case tt.jsonb:return K5(e);case tt.timestamp:return Q5(e);case tt.abstime:case tt.date:case tt.daterange:case tt.int4range:case tt.int8range:case tt.money:case tt.reltime:case tt.text:case tt.time:case tt.timestamptz:case tt.timetz:case tt.tsrange:case tt.tstzrange:return hg(e);default:return hg(e)}},hg=t=>t,q5=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Z5=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},K5=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},G5=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>E2(e,l))}return t},Q5=t=>typeof t=="string"?t.replace(" ","T"):t,T2=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Ef{constructor(e,n,r={},s=S2){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var lb;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(lb||(lb={}));class ql{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ql.syncState(this.state,s,i,o),this.pendingDiffs.forEach(d=>{this.state=ql.syncDiff(this.state,d,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ql.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),l={},d={};return this.map(i,(u,p)=>{o[u]||(d[u]=p)}),this.map(o,(u,p)=>{const f=i[u];if(f){const x=p.map(j=>j.presence_ref),g=f.map(j=>j.presence_ref),v=p.filter(j=>g.indexOf(j.presence_ref)<0),b=f.filter(j=>x.indexOf(j.presence_ref)<0);v.length>0&&(l[u]=v),b.length>0&&(d[u]=b)}else l[u]=p}),this.syncDiff(i,{joins:l,leaves:d},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,d)=>{var u;const p=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(d),p.length>0){const f=e[l].map(g=>g.presence_ref),x=p.filter(g=>f.indexOf(g.presence_ref)<0);e[l].unshift(...x)}r(l,p,d)}),this.map(o,(l,d)=>{let u=e[l];if(!u)return;const p=d.map(f=>f.presence_ref);u=u.filter(f=>p.indexOf(f.presence_ref)<0),e[l]=u,s(l,u,d),u.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var cb;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(cb||(cb={}));var db;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(db||(db={}));var ss;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ss||(ss={}));class tv{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Pn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ef(this,fr.join,this.params,this.timeout),this.rejoinTimer=new C2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Pn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fr.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new ql(this),this.broadcastEndpointURL=T2(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(p=>e==null?void 0:e(ss.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(ss.CLOSED));const d={},u={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var f;if(this.socket.setAuth(),p===void 0){e==null||e(ss.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,g=(f=x==null?void 0:x.length)!==null&&f!==void 0?f:0,v=[];for(let b=0;b<g;b++){const j=x[b],{filter:{event:_,schema:N,table:S,filter:P}}=j,M=p&&p[b];if(M&&M.event===_&&M.schema===N&&M.table===S&&M.filter===P)v.push(Object.assign(Object.assign({},j),{id:M.id}));else{this.unsubscribe(),e==null||e(ss.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(ss.SUBSCRIBED);return}}).receive("error",p=>{e==null||e(ss.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ss.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,d;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Pn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new Ef(this,fr.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Ef(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:l,error:d,leave:u,join:p}=fr;if(r&&[l,d,u,p].indexOf(o)>=0&&r!==this._joinRef())return;let x=this._onMessage(o,n,r);if(n&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var v,b,j;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((j=(b=g.filter)===null||b===void 0?void 0:b.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===o}).map(g=>g.callback(x,r)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var v,b,j,_,N,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const P=g.id,M=(v=g.filter)===null||v===void 0?void 0:v.event;return P&&((b=n.ids)===null||b===void 0?void 0:b.includes(P))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((j=n.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const P=(N=(_=g==null?void 0:g.filter)===null||_===void 0?void 0:_.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return P==="*"||P===((S=n==null?void 0:n.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof x=="object"&&"ids"in x){const v=x.data,{schema:b,table:j,commit_timestamp:_,type:N,errors:S}=v;x=Object.assign(Object.assign({},{schema:b,table:j,commit_timestamp:_,eventType:N,new:{},old:{},errors:S}),this._getPayloadRecords(v))}g.callback(x,r)})}_isClosed(){return this.state===Pn.closed}_isJoined(){return this.state===Pn.joined}_isJoining(){return this.state===Pn.joining}_isLeaving(){return this.state===Pn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&tv.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(fr.close,{},e)}_onError(e){this._on(fr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=ob(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=ob(e.columns,e.old_record)),n}}const X5=()=>{},J5=typeof WebSocket<"u",e4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class t4{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=U5,this.params={},this.timeout=S2,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=X5,this.conn=null,this.sendBuffer=[],this.serializer=new Y5,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>sa(async()=>{const{default:d}=await Promise.resolve().then(()=>Io);return{default:d}},void 0).then(({default:d})=>d(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${ug.websocket}`,this.httpEndpoint=T2(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new C2(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(J5){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new n4(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),sa(async()=>{const{default:e}=await import("./browser-vWYBvyXZ.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:H5}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ao.connecting:return Ri.Connecting;case ao.open:return Ri.Open;case ao.closing:return Ri.Closing;default:return Ri.Closed}}isConnected(){return this.connectionState()===Ri.Open}channel(e,n={config:{}}){const r=new tv(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,l=>{var d;(d=this.conn)===null||d===void 0||d.send(l)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(s=>{n&&s.updateJoinPayload({access_token:n}),s.joinedOnce&&s._isJoined()&&s._push(fr.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(W5,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(fr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([e4],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class n4{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ao.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class nv extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function At(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class r4 extends nv{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class pg extends nv{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var s4=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?i(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})};const P2=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>sa(async()=>{const{default:r}=await Promise.resolve().then(()=>Io);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},i4=()=>s4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield sa(()=>Promise.resolve().then(()=>Io),void 0)).Response:Response}),fg=t=>{if(Array.isArray(t))return t.map(n=>fg(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=fg(r)}),e};var ua=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?i(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})};const Tf=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),a4=(t,e,n)=>ua(void 0,void 0,void 0,function*(){const r=yield i4();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new r4(Tf(s),t.status||500))}).catch(s=>{e(new pg(Tf(s),s))}):e(new pg(Tf(t),t))}),o4=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function Vc(t,e,n,r,s,i){return ua(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(n,o4(e,r,s,i)).then(d=>{if(!d.ok)throw d;return r!=null&&r.noResolveJson?d:d.json()}).then(d=>o(d)).catch(d=>a4(d,l,r))})})}function ih(t,e,n,r){return ua(this,void 0,void 0,function*(){return Vc(t,"GET",e,n,r)})}function Ms(t,e,n,r,s){return ua(this,void 0,void 0,function*(){return Vc(t,"POST",e,r,s,n)})}function l4(t,e,n,r,s){return ua(this,void 0,void 0,function*(){return Vc(t,"PUT",e,r,s,n)})}function c4(t,e,n,r){return ua(this,void 0,void 0,function*(){return Vc(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function D2(t,e,n,r,s){return ua(this,void 0,void 0,function*(){return Vc(t,"DELETE",e,r,s,n)})}var xn=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?i(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})};const d4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ub={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class u4{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=P2(s)}uploadOrUpdate(e,n,r,s){return xn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},ub),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const d=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,d&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),p=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),x=yield f.json();return f.ok?{data:{path:u,id:x.Id,fullPath:x.Key},error:null}:{data:null,error:x}}catch(i){if(At(i))return{data:null,error:i};throw i}})}upload(e,n,r){return xn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return xn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let d;const u=Object.assign({upsert:ub.upsert},s),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",u.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",u.cacheControl)):(d=r,p["cache-control"]=`max-age=${u.cacheControl}`,p["content-type"]=u.contentType);const f=yield this.fetch(l.toString(),{method:"PUT",body:d,headers:p}),x=yield f.json();return f.ok?{data:{path:i,fullPath:x.Key},error:null}:{data:null,error:x}}catch(d){if(At(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,n){return xn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Ms(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new nv("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(At(r))return{data:null,error:r};throw r}})}update(e,n,r){return xn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return xn(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(At(s))return{data:null,error:s};throw s}})}copy(e,n,r){return xn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ms(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(At(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return xn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Ms(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(At(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return xn(this,void 0,void 0,function*(){try{const s=yield Ms(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(At(s))return{data:null,error:s};throw s}})}download(e,n){return xn(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield ih(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(At(l))return{data:null,error:l};throw l}})}info(e){return xn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield ih(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:fg(r),error:null}}catch(r){if(At(r))return{data:null,error:r};throw r}})}exists(e){return xn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield c4(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(At(r)&&r instanceof pg){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});d!==""&&s.push(d);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(e){return xn(this,void 0,void 0,function*(){try{return{data:yield D2(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(At(n))return{data:null,error:n};throw n}})}list(e,n,r){return xn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},d4),n),{prefix:e||""});return{data:yield Ms(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(At(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const h4="2.7.1",p4={"X-Client-Info":`storage-js/${h4}`};var Pa=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?i(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})};class f4{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},p4),n),this.fetch=P2(r)}listBuckets(){return Pa(this,void 0,void 0,function*(){try{return{data:yield ih(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(At(e))return{data:null,error:e};throw e}})}getBucket(e){return Pa(this,void 0,void 0,function*(){try{return{data:yield ih(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(At(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Pa(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(At(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Pa(this,void 0,void 0,function*(){try{return{data:yield l4(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(At(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Pa(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(At(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Pa(this,void 0,void 0,function*(){try{return{data:yield D2(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(At(n))return{data:null,error:n};throw n}})}}class m4 extends f4{constructor(e,n={},r){super(e,n,r)}from(e){return new u4(this.url,this.headers,e,this.fetch)}}const g4="2.49.4";let Tl="";typeof Deno<"u"?Tl="deno":typeof document<"u"?Tl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Tl="react-native":Tl="node";const x4={"X-Client-Info":`supabase-js-${Tl}/${g4}`},v4={headers:x4},y4={schema:"public"},b4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},_4={};var w4=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?i(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})};const j4=t=>{let e;return t?e=t:typeof fetch>"u"?e=m2:e=fetch,(...n)=>e(...n)},N4=()=>typeof Headers>"u"?g2:Headers,k4=(t,e,n)=>{const r=j4(n),s=N4();return(i,o)=>w4(void 0,void 0,void 0,function*(){var l;const d=(l=yield e())!==null&&l!==void 0?l:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${d}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var S4=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?i(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})};function C4(t){return t.replace(/\/$/,"")}function E4(t,e){const{db:n,auth:r,realtime:s,global:i}=t,{db:o,auth:l,realtime:d,global:u}=e,p={db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},d),s),global:Object.assign(Object.assign({},u),i),accessToken:()=>S4(this,void 0,void 0,function*(){return""})};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}const O2="2.69.1",Aa=30*1e3,mg=3,Pf=mg*Aa,T4="http://localhost:9999",P4="supabase.auth.token",D4={"X-Client-Info":`gotrue-js/${O2}`},gg="X-Supabase-Api-Version",M2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},O4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,M4=6e5;class rv extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ee(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class L4 extends rv{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function R4(t){return Ee(t)&&t.name==="AuthApiError"}class L2 extends rv{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class fi extends rv{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Es extends fi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function A4(t){return Ee(t)&&t.name==="AuthSessionMissingError"}class Df extends fi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Id extends fi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Fd extends fi{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function I4(t){return Ee(t)&&t.name==="AuthImplicitGrantRedirectError"}class hb extends fi{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xg extends fi{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Of(t){return Ee(t)&&t.name==="AuthRetryableFetchError"}class pb extends fi{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Zl extends fi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const fb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),mb=` 	
\r=`.split(""),F4=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<mb.length;e+=1)t[mb[e].charCodeAt(0)]=-2;for(let e=0;e<fb.length;e+=1)t[fb[e].charCodeAt(0)]=e;return t})();function R2(t,e,n){const r=F4[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function gb(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{B4(o,r,n)};for(let o=0;o<t.length;o+=1)R2(t.charCodeAt(o),s,i);return e.join("")}function $4(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function z4(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}$4(r,e)}}function B4(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function U4(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)R2(t.charCodeAt(s),n,r);return new Uint8Array(e)}function H4(t){const e=[];return z4(t,n=>e.push(n)),new Uint8Array(e)}function W4(t){return Math.round(Date.now()/1e3)+t}function Y4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Dr=()=>typeof window<"u"&&typeof document<"u",Ni={tested:!1,writable:!1},Kl=()=>{if(!Dr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ni.tested)return Ni.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ni.tested=!0,Ni.writable=!0}catch{Ni.tested=!0,Ni.writable=!1}return Ni.writable};function V4(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const A2=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>sa(async()=>{const{default:r}=await Promise.resolve().then(()=>Io);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},q4=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",I2=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},$d=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},zd=async(t,e)=>{await t.removeItem(e)};class lp{constructor(){this.promise=new lp.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}lp.promiseConstructor=Promise;function Mf(t){const e=t.split(".");if(e.length!==3)throw new Zl("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!O4.test(e[r]))throw new Zl("JWT not in base64url format");return{header:JSON.parse(gb(e[0])),payload:JSON.parse(gb(e[1])),signature:U4(e[2]),raw:{header:e[0],payload:e[1]}}}async function Z4(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function K4(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function G4(t){return("0"+t.toString(16)).substr(-2)}function Q4(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,G4).join("")}async function X4(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function J4(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await X4(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Da(t,e,n=!1){const r=Q4();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await I2(t,`${e}-code-verifier`,s);const i=await J4(r);return[i,r===i?"plain":"s256"]}const e3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function t3(t){const e=t.headers.get(gg);if(!e||!e.match(e3))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function n3(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function r3(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var s3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Di=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),i3=[502,503,504];async function xb(t){var e;if(!q4(t))throw new xg(Di(t),0);if(i3.includes(t.status))throw new xg(Di(t),t.status);let n;try{n=await t.json()}catch(i){throw new L2(Di(i),i)}let r;const s=t3(t);if(s&&s.getTime()>=M2["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new pb(Di(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Es}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new pb(Di(n),t.status,n.weak_password.reasons);throw new L4(Di(n),t.status||500,r)}const a3=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ae(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[gg]||(i[gg]=M2["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",d=await o3(t,e,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(d):{data:Object.assign({},d),error:null}}async function o3(t,e,n,r,s,i){const o=a3(e,r,s,i);let l;try{l=await t(n,Object.assign({},o))}catch(d){throw console.error(d),new xg(Di(d),0)}if(l.ok||await xb(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(d){await xb(d)}}function Ts(t){var e;let n=null;u3(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=W4(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function vb(t){const e=Ts(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Is(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function l3(t){return{data:t,error:null}}function c3(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=s3(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},d=Object.assign({},o);return{data:{properties:l,user:d},error:null}}function d3(t){return t}function u3(t){return t.access_token&&t.refresh_token&&t.expires_in}var h3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class p3{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=A2(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await Ae(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ee(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Is})}catch(r){if(Ee(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=h3(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:c3,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ee(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ae(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Is})}catch(n){if(Ee(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,l,d;try{const u={nextPage:null,lastPage:0,total:0},p=await Ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:d3});if(p.error)throw p.error;const f=await p.json(),x=(o=p.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(d=(l=p.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return g.length>0&&(g.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(v.split(";")[1].split("=")[1]);u[`${j}Page`]=b}),u.total=parseInt(x)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Ee(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await Ae(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Is})}catch(n){if(Ee(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await Ae(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Is})}catch(r){if(Ee(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await Ae(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Is})}catch(r){if(Ee(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await Ae(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await Ae(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ee(n))return{data:null,error:n};throw n}}}const f3={getItem:t=>Kl()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Kl()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Kl()&&globalThis.localStorage.removeItem(t)}};function yb(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function m3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Oa={debug:!!(globalThis&&Kl()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class F2 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class g3 extends F2{}async function x3(t,e,n){Oa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Oa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Oa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Oa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Oa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new g3(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Oa.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}m3();const v3={url:T4,storageKey:P4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:D4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function bb(t,e,n){return await n()}class kc{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=kc.nextInstanceID,kc.nextInstanceID+=1,this.instanceID>0&&Dr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},v3),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new p3({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=A2(s.fetch),this.lock=s.lock||bb,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Dr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=x3:this.lock=bb,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Kl()?this.storage=f3:(this.memoryStorage={},this.storage=yb(this.memoryStorage)):(this.memoryStorage={},this.storage=yb(this.memoryStorage)),Dr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${O2}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=V4(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Dr()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),I4(i)){const d=(e=i.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ee(n)?{error:n}:{error:new L2("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ts}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const d=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:u,session:d},error:null}}catch(i){if(Ee(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:p,password:f,options:x}=e;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await Da(this.storage,this.storageKey)),i=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:p,password:f,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:g,code_challenge_method:v},xform:Ts})}else if("phone"in e){const{phone:p,password:f,options:x}=e;i=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:f,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},channel:(s=x==null?void 0:x.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:Ts})}else throw new Id("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const d=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:u,session:d},error:null}}catch(i){if(Ee(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:l}=e;n=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:vb})}else if("phone"in e){const{phone:i,password:o,options:l}=e;n=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:vb})}else throw new Id("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Df}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Ee(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await $d(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ts});if(await zd(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Df}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(Ee(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,l=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ts}),{data:d,error:u}=l;return u?{data:{user:null,session:null},error:u}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Df}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:u})}catch(n){if(Ee(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:l,options:d}=e;let u=null,p=null;this.flowType==="pkce"&&([u,p]=await Da(this.storage,this.storageKey));const{error:f}=await Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:u,code_challenge_method:p},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:d}=e,{data:u,error:p}=await Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(o=d==null?void 0:d.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:p}}throw new Id("You must provide either an email or phone number.")}catch(l){if(Ee(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await Ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ts});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const d=o.session,u=o.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:u,session:d},error:null}}catch(s){if(Ee(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Da(this.storage,this.storageKey)),await Ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:l3})}catch(i){if(Ee(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Es;const{error:s}=await Ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Ee(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await Ae(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:l}=await Ae(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Id("You must provide either an email or phone number and a type")}catch(n){if(Ee(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await $d(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Pf:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,u,p)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,u,p))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Is}):await this._useSession(async n=>{var r,s,i;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Es}:await Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Is})})}catch(n){if(Ee(n))return A4(n)&&(await this._removeSession(),await zd(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Es;const o=s.session;let l=null,d=null;this.flowType==="pkce"&&e.email!=null&&([l,d]=await Da(this.storage,this.storageKey));const{data:u,error:p}=await Ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:d}),jwt:o.access_token,xform:Is});if(p)throw p;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Ee(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Es;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Mf(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:l,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:d}=await this._getUser(e.access_token);if(d)throw d;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Ee(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:l}=n;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Es;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ee(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Dr())throw new Fd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Fd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new hb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new hb("No code detected.");const{data:N,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:d,token_type:u}=e;if(!i||!l||!o||!u)throw new Fd("No session defined in URL");const p=Math.round(Date.now()/1e3),f=parseInt(l);let x=p+f;d&&(x=parseInt(d));const g=x-p;g*1e3<=Aa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const v=x-f;p-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,x,p):p-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,x,p);const{data:b,error:j}=await this._getUser(i);if(j)throw j;const _={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:x,refresh_token:o,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:e.type},error:null}}catch(r){if(Ee(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await $d(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(R4(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await zd(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=Y4(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Da(this.storage,this.storageKey,!0));try{return await Ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Ee(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,l,d,u,p;const{data:f,error:x}=i;if(x)throw x;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Ae(this.fetch,"GET",g,{headers:this.headers,jwt:(p=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&p!==void 0?p:void 0})});if(s)throw s;return Dr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ee(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await Ae(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await K4(async s=>(s>0&&await Z4(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ts})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Of(i)&&Date.now()+o-r<Aa})}catch(r){if(this._debug(n,"error",r),Ee(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Dr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await $d(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Pf;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Pf}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),Of(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Es;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new lp;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Es;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),Ee(i)){const o={session:null,error:i};return Of(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(d){i.push(d)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await I2(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await zd(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Dr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Aa);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Aa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Aa}ms, refresh threshold is ${mg} ticks`),s<=mg&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof F2)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Dr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Da(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ae(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:d,error:u}=await Ae(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:l}=await Ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(Ee(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ee(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Mf(s.access_token);let l=null;o.aal&&(l=o.aal);let d=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const p=o.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+M4>Date.now()))return r;const{data:s,error:i}=await Ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new Zl("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new Zl("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:g,error:v}=await this.getSession();if(v||!g.session)return{data:null,error:v};r=g.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:d}}=Mf(r);if(n3(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:i,header:s,signature:o},error:null}}const u=r3(s.alg),p=await this.fetchJwk(s.kid,n),f=await crypto.subtle.importKey("jwk",p,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,o,H4(`${l}.${d}`)))throw new Zl("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(Ee(r))return{data:null,error:r};throw r}}}kc.nextInstanceID=0;const y3=kc;class b3 extends y3{constructor(e){super(e)}}var _3=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?i(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})};class w3{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=C4(e);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const d=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:y4,realtime:_4,auth:Object.assign(Object.assign({},b4),{storageKey:d}),global:v4},p=E4(r??{},u);this.storageKey=(s=p.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=p.global.headers)!==null&&i!==void 0?i:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(f,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=p.auth)!==null&&o!==void 0?o:{},this.headers,p.global.fetch),this.fetch=k4(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new z5(`${l}/rest/v1`,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new g5(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new m4(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return _3(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:l,debug:d},u,p){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new b3({url:this.authUrl,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:l,debug:d,fetch:p,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new t4(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const j3=(t,e,n)=>new w3(t,e,n),N3="https://lrszjkghzvndusfysriq.supabase.co",k3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxyc3pqa2doenZuZHVzZnlzcmlxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU1Mjg4NjEsImV4cCI6MjA2MTEwNDg2MX0.k-veSylkcZ57meRaMry1WtzjytqRTuHvP2B09ZduJiw",ee=j3(N3,k3,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storageKey:"supabase.auth.token"}});function Lf(){const[t,e]=w.useState(!0),[n,r]=w.useState(null),[s,i]=w.useState({totalOrders:0,totalRevenue:0,totalCustomers:0,totalVendors:0,totalDrivers:0,totalProducts:0,averageOrderValue:0,completionRate:0}),[o,l]=w.useState([]),[d,u]=w.useState([]);w.useEffect(()=>{p(),f(),x()},[]);const p=async()=>{try{const{data:g,error:v}=await ee.from("orders").select("total, status");if(v)throw v;const b=g.length,j=g.reduce((te,G)=>te+(parseFloat(G.total)||0),0),_=g.filter(te=>te.status==="completed").length,N=b>0?_/b*100:0,S=b>0?j/b:0,{count:P,error:M}=await ee.from("customers").select("id",{count:"exact"});if(M)throw M;const{count:A,error:R}=await ee.from("vendors").select("id",{count:"exact"});if(R)throw R;const{count:T,error:V}=await ee.from("drivers").select("id",{count:"exact"});if(V)throw V;const{count:D,error:U}=await ee.from("products").select("id",{count:"exact"});if(U)throw U;i({totalOrders:b,totalRevenue:j,totalCustomers:P,totalVendors:A,totalDrivers:T,totalProducts:D,averageOrderValue:S,completionRate:N})}catch(g){console.error("Error fetching stats:",g),r(g.message),$.error("فشل في تحميل الإحصائيات")}},f=async()=>{try{const{data:g,error:v}=await ee.from("orders").select(`
          vendor_id,
          total,
          vendor:vendors(store_name)
        `).not("vendor_id","is",null);if(v)throw v;const b=g.reduce((_,N)=>{var P;const S=N.vendor_id;return _[S]||(_[S]={id:S,store_name:(P=N.vendor)==null?void 0:P.store_name,total_orders:0,total_revenue:0}),_[S].total_orders++,_[S].total_revenue+=parseFloat(N.total)||0,_},{}),j=Object.values(b).sort((_,N)=>N.total_revenue-_.total_revenue).slice(0,5);l(j)}catch(g){console.error("Error fetching vendor orders:",g),$.error("فشل في تحميل بيانات البائعين")}},x=async()=>{try{const{data:g,error:v}=await ee.from("orders").select(`
          *,
          customer:customers(name),
          vendor:vendors(store_name),
          driver:drivers(name)
        `).order("created_at",{ascending:!1}).limit(5);if(v)throw v;u(g)}catch(g){console.error("Error fetching recent orders:",g),$.error("فشل في تحميل الطلبات الأخيرة")}finally{e(!1)}};return t?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n?a.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"خطأ"}),a.jsx("p",{children:n}),a.jsx("button",{onClick:()=>{e(!0),r(null),p(),f(),x()},className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"إجمالي الطلبات"}),a.jsx("p",{className:"text-3xl font-bold text-blue-600",children:s.totalOrders})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"إجمالي الإيرادات"}),a.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["₪",s.totalRevenue.toFixed(2)]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"متوسط قيمة الطلب"}),a.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:["₪",s.averageOrderValue.toFixed(2)]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"معدل إكمال الطلبات"}),a.jsxs("p",{className:"text-3xl font-bold text-orange-600",children:[s.completionRate.toFixed(1),"%"]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"عدد العملاء"}),a.jsx("p",{className:"text-3xl font-bold text-red-600",children:s.totalCustomers})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"عدد البائعين"}),a.jsx("p",{className:"text-3xl font-bold text-indigo-600",children:s.totalVendors})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"عدد السائقين"}),a.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:s.totalDrivers})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"عدد المنتجات"}),a.jsx("p",{className:"text-3xl font-bold text-pink-600",children:s.totalProducts})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-xl font-semibold mb-4",children:"أفضل البائعين"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المتجر"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"عدد الطلبات"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"إجمالي الإيرادات"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(g=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.store_name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.total_orders}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",g.total_revenue.toFixed(2)]})]},g.id))})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-xl font-semibold mb-4",children:"آخر الطلبات"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"رقم الطلب"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العميل"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المتجر"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"السائق"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المبلغ"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التاريخ"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(g=>{var v,b,j;return a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.order_number}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(v=g.customer)==null?void 0:v.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(b=g.vendor)==null?void 0:b.store_name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:((j=g.driver)==null?void 0:j.name)||"-"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",parseFloat(g.total).toFixed(2)]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${g.status==="completed"?"bg-green-100 text-green-800":g.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:g.status==="completed"?"مكتمل":g.status==="cancelled"?"ملغي":g.status==="pending"?"معلق":g.status==="processing"?"قيد المعالجة":g.status==="delivering"?"قيد التوصيل":g.status})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(g.created_at).toLocaleDateString("ar-SA")})]},g.id)})})]})})]})]})}const S3=async(t={})=>{try{let e=ee.from("products").select(`
        *,
        vendor:vendor_id(store_name),
        category:category_id(name)
      `);t.status&&(e=e.eq("status",t.status)),t.vendorId&&(e=e.eq("vendor_id",t.vendorId)),t.categoryId&&(e=e.eq("category_id",t.categoryId)),t.search&&(e=e.ilike("name",`%${t.search}%`)),e=e.order("created_at",{ascending:!1});const{data:n,error:r}=await e;if(r)throw r;return n||[]}catch(e){throw console.error("Error fetching products:",e),e}};function C3(){const[t,e]=w.useState([]),[n,r]=w.useState(!0),[s,i]=w.useState("grid");w.useEffect(()=>{o()},[]);const o=async()=>{try{r(!0);const f=await S3();e(f)}catch(f){console.error("Error fetching products:",f),$.error("فشل في تحميل المنتجات"),e([{id:1,name:"قهوة تركية",description:"قهوة تركية أصلية مطحونة ناعمة",price:15,image_url:"https://images.unsplash.com/photo-1514432324607-a09d9b4aefdd?q=80&w=200&auto=format&fit=crop",category:{name:"مشروبات ساخنة"},vendor:{store_name:"متجر كوفي"},status:"active",stock:100},{id:2,name:"شاي أخضر",description:"شاي أخضر صيني عالي الجودة",price:12,image_url:"https://images.unsplash.com/photo-1627435601361-ec25f5b1d0e5?q=80&w=200&auto=format&fit=crop",category:{name:"مشروبات ساخنة"},vendor:{store_name:"متجر الشاي"},status:"active",stock:75},{id:3,name:"عصير برتقال",description:"عصير برتقال طازج 100%",price:10,image_url:"https://images.unsplash.com/photo-1600271886742-f049cd451bba?q=80&w=200&auto=format&fit=crop",category:{name:"عصائر"},vendor:{store_name:"متجر العصائر"},status:"active",stock:50},{id:4,name:"كيك شوكولاتة",description:"كيك شوكولاتة بلجيكية فاخرة",price:25,image_url:"https://images.unsplash.com/photo-1606313564200-e75d5e30476c?q=80&w=200&auto=format&fit=crop",category:{name:"حلويات"},vendor:{store_name:"متجر الحلويات"},status:"active",stock:30}])}finally{r(!1)}},l=f=>{switch(f){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"draft":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},d=f=>{switch(f){case"active":return"نشط";case"inactive":return"غير نشط";case"draft":return"مسودة";default:return f}},u=()=>a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map(f=>{var x,g;return a.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[f.image_url&&a.jsx("img",{src:f.image_url,alt:f.name,className:"w-full h-48 object-cover",onError:v=>{v.target.onerror=null,v.target.src="https://via.placeholder.com/300x200?text=No+Image"}}),a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold",children:f.name}),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${l(f.status)}`,children:d(f.status)})]}),a.jsx("p",{className:"text-gray-600 text-sm mb-2",children:f.description}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("p",{className:"text-xl font-bold text-green-600",children:["₪",f.price.toFixed(2)]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["المخزون: ",f.stock," قطعة"]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["المتجر: ",(x=f.vendor)==null?void 0:x.store_name]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["التصنيف: ",(g=f.category)==null?void 0:g.name]})]})]})]},f.id)})}),p=()=>a.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المنتج"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"السعر"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المخزون"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المتجر"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التصنيف"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(f=>{var x,g;return a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[f.image_url&&a.jsx("img",{src:f.image_url,alt:f.name,className:"w-10 h-10 rounded-full object-cover ml-3",onError:v=>{v.target.onerror=null,v.target.src="https://via.placeholder.com/40?text=No+Image"}}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:f.name}),a.jsx("div",{className:"text-gray-500",children:f.description})]})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-lg font-semibold text-green-600",children:["₪",f.price.toFixed(2)]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:[f.stock," قطعة"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:(x=f.vendor)==null?void 0:x.store_name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:(g=f.category)==null?void 0:g.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${l(f.status)}`,children:d(f.status)})})]},f.id)})})]})})});return n?a.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"المنتجات"}),a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>i("grid"),className:`px-3 py-1 rounded ${s==="grid"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض شبكي"}),a.jsx("button",{onClick:()=>i("table"),className:`px-3 py-1 rounded ${s==="table"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض جدول"})]})})]}),s==="grid"?u():p()]})}var E3=Object.defineProperty,T3=(t,e,n)=>e in t?E3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rf=(t,e,n)=>(T3(t,typeof e!="symbol"?e+"":e,n),n);let P3=class{constructor(){Rf(this,"current",this.detect()),Rf(this,"handoffState","pending"),Rf(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},us=new P3,nr=(t,e)=>{us.isServer?w.useEffect(t,e):w.useLayoutEffect(t,e)};function hs(t){let e=w.useRef(t);return nr(()=>{e.current=t},[t]),e}let ut=function(t){let e=hs(t);return Y.useCallback((...n)=>e.current(...n),[e])};function cp(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function ha(){let t=[],e={addEventListener(n,r,s,i){return n.addEventListener(r,s,i),e.add(()=>n.removeEventListener(r,s,i))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return cp(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,s){let i=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:s}),this.add(()=>{Object.assign(n.style,{[r]:i})})},group(n){let r=ha();return n(r),this.add(()=>r.dispose())},add(n){return t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let s of t.splice(r,1))s()}},dispose(){for(let n of t.splice(0))n()}};return e}function sv(){let[t]=w.useState(ha);return w.useEffect(()=>()=>t.dispose(),[t]),t}function D3(){let t=typeof document>"u";return"useSyncExternalStore"in lo?(e=>e.useSyncExternalStore)(lo)(()=>()=>{},()=>!1,()=>!t):!1}function $o(){let t=D3(),[e,n]=w.useState(us.isHandoffComplete);return e&&us.isHandoffComplete===!1&&n(!1),w.useEffect(()=>{e!==!0&&n(!0)},[e]),w.useEffect(()=>us.handoff(),[]),t?!1:e}var _b;let zo=(_b=Y.useId)!=null?_b:function(){let t=$o(),[e,n]=Y.useState(t?()=>us.nextId():null);return nr(()=>{e===null&&n(us.nextId())},[e]),e!=null?""+e:void 0};function an(t,e,...n){if(t in e){let s=e[t];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,an),r}function $2(t){return us.isServer?null:t instanceof Node?t.ownerDocument:t!=null&&t.hasOwnProperty("current")&&t.current instanceof Node?t.current.ownerDocument:document}let vg=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Ai=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(Ai||{}),z2=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(z2||{}),O3=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(O3||{});function M3(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(vg)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var B2=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(B2||{});function L3(t,e=0){var n;return t===((n=$2(t))==null?void 0:n.body)?!1:an(e,{0(){return t.matches(vg)},1(){let r=t;for(;r!==null;){if(r.matches(vg))return!0;r=r.parentElement}return!1}})}var R3=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(R3||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function qi(t){t==null||t.focus({preventScroll:!0})}let A3=["textarea","input"].join(",");function I3(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,A3))!=null?n:!1}function F3(t,e=n=>n){return t.slice().sort((n,r)=>{let s=e(n),i=e(r);if(s===null||i===null)return 0;let o=s.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function ju(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){let i=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,o=Array.isArray(t)?n?F3(t):t:M3(t);s.length>0&&o.length>1&&(o=o.filter(g=>!s.includes(g))),r=r??i.activeElement;let l=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,o.indexOf(r))-1;if(e&4)return Math.max(0,o.indexOf(r))+1;if(e&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=e&32?{preventScroll:!0}:{},p=0,f=o.length,x;do{if(p>=f||p+f<=0)return 0;let g=d+p;if(e&16)g=(g+f)%f;else{if(g<0)return 3;if(g>=f)return 1}x=o[g],x==null||x.focus(u),p+=l}while(x!==i.activeElement);return e&6&&I3(x)&&x.select(),2}function U2(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function $3(){return/Android/gi.test(window.navigator.userAgent)}function z3(){return U2()||$3()}function Bd(t,e,n){let r=hs(e);w.useEffect(()=>{function s(i){r.current(i)}return document.addEventListener(t,s,n),()=>document.removeEventListener(t,s,n)},[t,n])}function H2(t,e,n){let r=hs(e);w.useEffect(()=>{function s(i){r.current(i)}return window.addEventListener(t,s,n),()=>window.removeEventListener(t,s,n)},[t,n])}function B3(t,e,n=!0){let r=w.useRef(!1);w.useEffect(()=>{requestAnimationFrame(()=>{r.current=n})},[n]);function s(o,l){if(!r.current||o.defaultPrevented)return;let d=l(o);if(d===null||!d.getRootNode().contains(d)||!d.isConnected)return;let u=function p(f){return typeof f=="function"?p(f()):Array.isArray(f)||f instanceof Set?f:[f]}(t);for(let p of u){if(p===null)continue;let f=p instanceof HTMLElement?p:p.current;if(f!=null&&f.contains(d)||o.composed&&o.composedPath().includes(f))return}return!L3(d,B2.Loose)&&d.tabIndex!==-1&&o.preventDefault(),e(o,d)}let i=w.useRef(null);Bd("pointerdown",o=>{var l,d;r.current&&(i.current=((d=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:d[0])||o.target)},!0),Bd("mousedown",o=>{var l,d;r.current&&(i.current=((d=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:d[0])||o.target)},!0),Bd("click",o=>{z3()||i.current&&(s(o,()=>i.current),i.current=null)},!0),Bd("touchend",o=>s(o,()=>o.target instanceof HTMLElement?o.target:null),!0),H2("blur",o=>s(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function qc(...t){return w.useMemo(()=>$2(...t),[...t])}let W2=Symbol();function U3(t,e=!0){return Object.assign(t,{[W2]:e})}function wr(...t){let e=w.useRef(t);w.useEffect(()=>{e.current=t},[t]);let n=ut(r=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(r):s.current=r)});return t.every(r=>r==null||(r==null?void 0:r[W2]))?void 0:n}function iv(t,e){let n=w.useRef([]),r=ut(t);w.useEffect(()=>{let s=[...n.current];for(let[i,o]of e.entries())if(n.current[i]!==o){let l=r(e,s);return n.current=e,l}},[r,...e])}function ah(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}var oh=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(oh||{}),Hs=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(Hs||{});function lr({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:s,visible:i=!0,name:o,mergeRefs:l}){l=l??H3;let d=Y2(e,t);if(i)return Ud(d,n,r,o,l);let u=s??0;if(u&2){let{static:p=!1,...f}=d;if(p)return Ud(f,n,r,o,l)}if(u&1){let{unmount:p=!0,...f}=d;return an(p?0:1,{0(){return null},1(){return Ud({...f,hidden:!0,style:{display:"none"}},n,r,o,l)}})}return Ud(d,n,r,o,l)}function Ud(t,e={},n,r,s){let{as:i=n,children:o,refName:l="ref",...d}=Af(t,["unmount","static"]),u=t.ref!==void 0?{[l]:t.ref}:{},p=typeof o=="function"?o(e):o;"className"in d&&d.className&&typeof d.className=="function"&&(d.className=d.className(e));let f={};if(e){let x=!1,g=[];for(let[v,b]of Object.entries(e))typeof b=="boolean"&&(x=!0),b===!0&&g.push(v);x&&(f["data-headlessui-state"]=g.join(" "))}if(i===w.Fragment&&Object.keys(wb(d)).length>0){if(!w.isValidElement(p)||Array.isArray(p)&&p.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(d).map(b=>`  - ${b}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(b=>`  - ${b}`).join(`
`)].join(`
`));let x=p.props,g=typeof(x==null?void 0:x.className)=="function"?(...b)=>ah(x==null?void 0:x.className(...b),d.className):ah(x==null?void 0:x.className,d.className),v=g?{className:g}:{};return w.cloneElement(p,Object.assign({},Y2(p.props,wb(Af(d,["ref"]))),f,u,{ref:s(p.ref,u.ref)},v))}return w.createElement(i,Object.assign({},Af(d,["ref"]),i!==w.Fragment&&u,i!==w.Fragment&&f),p)}function H3(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function Y2(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):e[s]=r[s];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(e,{[r](s,...i){let o=n[r];for(let l of o){if((s instanceof Event||(s==null?void 0:s.nativeEvent)instanceof Event)&&s.defaultPrevented)return;l(s,...i)}}});return e}function $n(t){var e;return Object.assign(w.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function wb(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function Af(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}let W3="div";var lh=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(lh||{});function Y3(t,e){var n;let{features:r=1,...s}=t,i={ref:e,"aria-hidden":(r&2)===2?!0:(n=s["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return lr({ourProps:i,theirProps:s,slot:{},defaultTag:W3,name:"Hidden"})}let yg=$n(Y3),av=w.createContext(null);av.displayName="OpenClosedContext";var On=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(On||{});function ov(){return w.useContext(av)}function V3({value:t,children:e}){return Y.createElement(av.Provider,{value:t},e)}function q3(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let Fs=[];q3(()=>{function t(e){e.target instanceof HTMLElement&&e.target!==document.body&&Fs[0]!==e.target&&(Fs.unshift(e.target),Fs=Fs.filter(n=>n!=null&&n.isConnected),Fs.splice(10))}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function Z3(t){let e=t.parentElement,n=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(n=e),e=e.parentElement;let r=(e==null?void 0:e.getAttribute("disabled"))==="";return r&&K3(n)?!1:r}function K3(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}var V2=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(V2||{});function q2(t,e,n,r){let s=hs(n);w.useEffect(()=>{t=t??window;function i(o){s.current(o)}return t.addEventListener(e,i,r),()=>t.removeEventListener(e,i,r)},[t,e,r])}function Zc(){let t=w.useRef(!1);return nr(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function Z2(t){let e=ut(t),n=w.useRef(!1);w.useEffect(()=>(n.current=!1,()=>{n.current=!0,cp(()=>{n.current&&e()})}),[e])}var Pl=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Pl||{});function G3(){let t=w.useRef(0);return H2("keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function K2(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let e=new Set;for(let n of t.current)n.current instanceof HTMLElement&&e.add(n.current);return e}let Q3="div";var G2=(t=>(t[t.None=1]="None",t[t.InitialFocus=2]="InitialFocus",t[t.TabLock=4]="TabLock",t[t.FocusLock=8]="FocusLock",t[t.RestoreFocus=16]="RestoreFocus",t[t.All=30]="All",t))(G2||{});function X3(t,e){let n=w.useRef(null),r=wr(n,e),{initialFocus:s,containers:i,features:o=30,...l}=t;$o()||(o=1);let d=qc(n);tO({ownerDocument:d},!!(o&16));let u=nO({ownerDocument:d,container:n,initialFocus:s},!!(o&2));rO({ownerDocument:d,container:n,containers:i,previousActiveElement:u},!!(o&8));let p=G3(),f=ut(b=>{let j=n.current;j&&(_=>_())(()=>{an(p.current,{[Pl.Forwards]:()=>{ju(j,Ai.First,{skipElements:[b.relatedTarget]})},[Pl.Backwards]:()=>{ju(j,Ai.Last,{skipElements:[b.relatedTarget]})}})})}),x=sv(),g=w.useRef(!1),v={ref:r,onKeyDown(b){b.key=="Tab"&&(g.current=!0,x.requestAnimationFrame(()=>{g.current=!1}))},onBlur(b){let j=K2(i);n.current instanceof HTMLElement&&j.add(n.current);let _=b.relatedTarget;_ instanceof HTMLElement&&_.dataset.headlessuiFocusGuard!=="true"&&(Q2(j,_)||(g.current?ju(n.current,an(p.current,{[Pl.Forwards]:()=>Ai.Next,[Pl.Backwards]:()=>Ai.Previous})|Ai.WrapAround,{relativeTo:b.target}):b.target instanceof HTMLElement&&qi(b.target)))}};return Y.createElement(Y.Fragment,null,!!(o&4)&&Y.createElement(yg,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:lh.Focusable}),lr({ourProps:v,theirProps:l,defaultTag:Q3,name:"FocusTrap"}),!!(o&4)&&Y.createElement(yg,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:lh.Focusable}))}let J3=$n(X3),pl=Object.assign(J3,{features:G2});function eO(t=!0){let e=w.useRef(Fs.slice());return iv(([n],[r])=>{r===!0&&n===!1&&cp(()=>{e.current.splice(0)}),r===!1&&n===!0&&(e.current=Fs.slice())},[t,Fs,e]),ut(()=>{var n;return(n=e.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function tO({ownerDocument:t},e){let n=eO(e);iv(()=>{e||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&qi(n())},[e]),Z2(()=>{e&&qi(n())})}function nO({ownerDocument:t,container:e,initialFocus:n},r){let s=w.useRef(null),i=Zc();return iv(()=>{if(!r)return;let o=e.current;o&&cp(()=>{if(!i.current)return;let l=t==null?void 0:t.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===l){s.current=l;return}}else if(o.contains(l)){s.current=l;return}n!=null&&n.current?qi(n.current):ju(o,Ai.First)===z2.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),s.current=t==null?void 0:t.activeElement})},[r]),s}function rO({ownerDocument:t,container:e,containers:n,previousActiveElement:r},s){let i=Zc();q2(t==null?void 0:t.defaultView,"focus",o=>{if(!s||!i.current)return;let l=K2(n);e.current instanceof HTMLElement&&l.add(e.current);let d=r.current;if(!d)return;let u=o.target;u&&u instanceof HTMLElement?Q2(l,u)?(r.current=u,qi(u)):(o.preventDefault(),o.stopPropagation(),qi(d)):qi(r.current)},!0)}function Q2(t,e){for(let n of t)if(n.contains(e))return!0;return!1}let X2=w.createContext(!1);function sO(){return w.useContext(X2)}function bg(t){return Y.createElement(X2.Provider,{value:t.force},t.children)}function iO(t){let e=sO(),n=w.useContext(J2),r=qc(t),[s,i]=w.useState(()=>{if(!e&&n!==null||us.isServer)return null;let o=r==null?void 0:r.getElementById("headlessui-portal-root");if(o)return o;if(r===null)return null;let l=r.createElement("div");return l.setAttribute("id","headlessui-portal-root"),r.body.appendChild(l)});return w.useEffect(()=>{s!==null&&(r!=null&&r.body.contains(s)||r==null||r.body.appendChild(s))},[s,r]),w.useEffect(()=>{e||n!==null&&i(n.current)},[n,i,e]),s}let aO=w.Fragment;function oO(t,e){let n=t,r=w.useRef(null),s=wr(U3(p=>{r.current=p}),e),i=qc(r),o=iO(r),[l]=w.useState(()=>{var p;return us.isServer?null:(p=i==null?void 0:i.createElement("div"))!=null?p:null}),d=w.useContext(_g),u=$o();return nr(()=>{!o||!l||o.contains(l)||(l.setAttribute("data-headlessui-portal",""),o.appendChild(l))},[o,l]),nr(()=>{if(l&&d)return d.register(l)},[d,l]),Z2(()=>{var p;!o||!l||(l instanceof Node&&o.contains(l)&&o.removeChild(l),o.childNodes.length<=0&&((p=o.parentElement)==null||p.removeChild(o)))}),u?!o||!l?null:Wc.createPortal(lr({ourProps:{ref:s},theirProps:n,defaultTag:aO,name:"Portal"}),l):null}let lO=w.Fragment,J2=w.createContext(null);function cO(t,e){let{target:n,...r}=t,s={ref:wr(e)};return Y.createElement(J2.Provider,{value:n},lr({ourProps:s,theirProps:r,defaultTag:lO,name:"Popover.Group"}))}let _g=w.createContext(null);function dO(){let t=w.useContext(_g),e=w.useRef([]),n=ut(i=>(e.current.push(i),t&&t.register(i),()=>r(i))),r=ut(i=>{let o=e.current.indexOf(i);o!==-1&&e.current.splice(o,1),t&&t.unregister(i)}),s=w.useMemo(()=>({register:n,unregister:r,portals:e}),[n,r,e]);return[e,w.useMemo(()=>function({children:i}){return Y.createElement(_g.Provider,{value:s},i)},[s])]}let uO=$n(oO),hO=$n(cO),wg=Object.assign(uO,{Group:hO});function pO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}const fO=typeof Object.is=="function"?Object.is:pO,{useState:mO,useEffect:gO,useLayoutEffect:xO,useDebugValue:vO}=lo;function yO(t,e,n){const r=e(),[{inst:s},i]=mO({inst:{value:r,getSnapshot:e}});return xO(()=>{s.value=r,s.getSnapshot=e,If(s)&&i({inst:s})},[t,r,e]),gO(()=>(If(s)&&i({inst:s}),t(()=>{If(s)&&i({inst:s})})),[t]),vO(r),r}function If(t){const e=t.getSnapshot,n=t.value;try{const r=e();return!fO(n,r)}catch{return!0}}function bO(t,e,n){return e()}const _O=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wO=!_O,jO=wO?bO:yO,NO="useSyncExternalStore"in lo?(t=>t.useSyncExternalStore)(lo):jO;function kO(t){return NO(t.subscribe,t.getSnapshot,t.getSnapshot)}function SO(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...i){let o=e[s].call(n,...i);o&&(n=o,r.forEach(l=>l()))}}}function CO(){let t;return{before({doc:e}){var n;let r=e.documentElement;t=((n=e.defaultView)!=null?n:window).innerWidth-r.clientWidth},after({doc:e,d:n}){let r=e.documentElement,s=r.clientWidth-r.offsetWidth,i=t-s;n.style(r,"paddingRight",`${i}px`)}}}function EO(){return U2()?{before({doc:t,d:e,meta:n}){function r(s){return n.containers.flatMap(i=>i()).some(i=>i.contains(s))}e.microTask(()=>{var s;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let l=ha();l.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>l.dispose()))}let i=(s=window.scrollY)!=null?s:window.pageYOffset,o=null;e.addEventListener(t,"click",l=>{if(l.target instanceof HTMLElement)try{let d=l.target.closest("a");if(!d)return;let{hash:u}=new URL(d.href),p=t.querySelector(u);p&&!r(p)&&(o=p)}catch{}},!0),e.addEventListener(t,"touchstart",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let d=l.target;for(;d.parentElement&&r(d.parentElement);)d=d.parentElement;e.style(d,"overscrollBehavior","contain")}else e.style(l.target,"touchAction","none")}),e.addEventListener(t,"touchmove",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let d=l.target;for(;d.parentElement&&d.dataset.headlessuiPortal!==""&&!(d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth);)d=d.parentElement;d.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()},{passive:!1}),e.add(()=>{var l;let d=(l=window.scrollY)!=null?l:window.pageYOffset;i!==d&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function TO(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function PO(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let Bi=SO(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:ha(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:PO(n)},s=[EO(),CO(),TO()];s.forEach(({before:i})=>i==null?void 0:i(r)),s.forEach(({after:i})=>i==null?void 0:i(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});Bi.subscribe(()=>{let t=Bi.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",s=n.count!==0;(s&&!r||!s&&r)&&Bi.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Bi.dispatch("TEARDOWN",n)}});function DO(t,e,n){let r=kO(Bi),s=t?r.get(t):void 0,i=s?s.count>0:!1;return nr(()=>{if(!(!t||!e))return Bi.dispatch("PUSH",t,n),()=>Bi.dispatch("POP",t,n)},[e,t]),i}let Ff=new Map,fl=new Map;function jb(t,e=!0){nr(()=>{var n;if(!e)return;let r=typeof t=="function"?t():t.current;if(!r)return;function s(){var o;if(!r)return;let l=(o=fl.get(r))!=null?o:1;if(l===1?fl.delete(r):fl.set(r,l-1),l!==1)return;let d=Ff.get(r);d&&(d["aria-hidden"]===null?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden",d["aria-hidden"]),r.inert=d.inert,Ff.delete(r))}let i=(n=fl.get(r))!=null?n:0;return fl.set(r,i+1),i!==0||(Ff.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),r.setAttribute("aria-hidden","true"),r.inert=!0),s},[t,e])}function OO({defaultContainers:t=[],portals:e,mainTreeNodeRef:n}={}){var r;let s=w.useRef((r=n==null?void 0:n.current)!=null?r:null),i=qc(s),o=ut(()=>{var l,d,u;let p=[];for(let f of t)f!==null&&(f instanceof HTMLElement?p.push(f):"current"in f&&f.current instanceof HTMLElement&&p.push(f.current));if(e!=null&&e.current)for(let f of e.current)p.push(f);for(let f of(l=i==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?l:[])f!==document.body&&f!==document.head&&f instanceof HTMLElement&&f.id!=="headlessui-portal-root"&&(f.contains(s.current)||f.contains((u=(d=s.current)==null?void 0:d.getRootNode())==null?void 0:u.host)||p.some(x=>f.contains(x))||p.push(f));return p});return{resolveContainers:o,contains:ut(l=>o().some(d=>d.contains(l))),mainTreeNodeRef:s,MainTreeNode:w.useMemo(()=>function(){return n!=null?null:Y.createElement(yg,{features:lh.Hidden,ref:s})},[s,n])}}let lv=w.createContext(()=>{});lv.displayName="StackContext";var jg=(t=>(t[t.Add=0]="Add",t[t.Remove=1]="Remove",t))(jg||{});function MO(){return w.useContext(lv)}function LO({children:t,onUpdate:e,type:n,element:r,enabled:s}){let i=MO(),o=ut((...l)=>{e==null||e(...l),i(...l)});return nr(()=>{let l=s===void 0||s===!0;return l&&o(0,n,r),()=>{l&&o(1,n,r)}},[o,n,r,s]),Y.createElement(lv.Provider,{value:o},t)}let eN=w.createContext(null);function tN(){let t=w.useContext(eN);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,tN),e}return t}function RO(){let[t,e]=w.useState([]);return[t.length>0?t.join(" "):void 0,w.useMemo(()=>function(n){let r=ut(i=>(e(o=>[...o,i]),()=>e(o=>{let l=o.slice(),d=l.indexOf(i);return d!==-1&&l.splice(d,1),l}))),s=w.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props}),[r,n.slot,n.name,n.props]);return Y.createElement(eN.Provider,{value:s},n.children)},[e])]}let AO="p";function IO(t,e){let n=zo(),{id:r=`headlessui-description-${n}`,...s}=t,i=tN(),o=wr(e);nr(()=>i.register(r),[r,i.register]);let l={ref:o,...i.props,id:r};return lr({ourProps:l,theirProps:s,slot:i.slot||{},defaultTag:AO,name:i.name||"Description"})}let FO=$n(IO),$O=Object.assign(FO,{});var zO=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(zO||{}),BO=(t=>(t[t.SetTitleId=0]="SetTitleId",t))(BO||{});let UO={0(t,e){return t.titleId===e.id?t:{...t,titleId:e.id}}},ch=w.createContext(null);ch.displayName="DialogContext";function Kc(t){let e=w.useContext(ch);if(e===null){let n=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Kc),n}return e}function HO(t,e,n=()=>[document.body]){DO(t,e,r=>{var s;return{containers:[...(s=r.containers)!=null?s:[],n]}})}function WO(t,e){return an(e.type,UO,t,e)}let YO="div",VO=oh.RenderStrategy|oh.Static;function qO(t,e){let n=zo(),{id:r=`headlessui-dialog-${n}`,open:s,onClose:i,initialFocus:o,role:l="dialog",__demoMode:d=!1,...u}=t,[p,f]=w.useState(0),x=w.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(x.current||(x.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let g=ov();s===void 0&&g!==null&&(s=(g&On.Open)===On.Open);let v=w.useRef(null),b=wr(v,e),j=qc(v),_=t.hasOwnProperty("open")||g!==null,N=t.hasOwnProperty("onClose");if(!_&&!N)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!_)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!N)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof s!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${s}`);if(typeof i!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${i}`);let S=s?0:1,[P,M]=w.useReducer(WO,{titleId:null,descriptionId:null,panelRef:w.createRef()}),A=ut(()=>i(!1)),R=ut(he=>M({type:0,id:he})),T=$o()?d?!1:S===0:!1,V=p>1,D=w.useContext(ch)!==null,[U,te]=dO(),G={get current(){var he;return(he=P.panelRef.current)!=null?he:v.current}},{resolveContainers:B,mainTreeNodeRef:Z,MainTreeNode:C}=OO({portals:U,defaultContainers:[G]}),q=V?"parent":"leaf",I=g!==null?(g&On.Closing)===On.Closing:!1,X=D||I?!1:T,E=w.useCallback(()=>{var he,Se;return(Se=Array.from((he=j==null?void 0:j.querySelectorAll("body > *"))!=null?he:[]).find(ae=>ae.id==="headlessui-portal-root"?!1:ae.contains(Z.current)&&ae instanceof HTMLElement))!=null?Se:null},[Z]);jb(E,X);let K=V?!0:T,re=w.useCallback(()=>{var he,Se;return(Se=Array.from((he=j==null?void 0:j.querySelectorAll("[data-headlessui-portal]"))!=null?he:[]).find(ae=>ae.contains(Z.current)&&ae instanceof HTMLElement))!=null?Se:null},[Z]);jb(re,K),B3(B,he=>{he.preventDefault(),A()},!(!T||V));let se=!(V||S!==0);q2(j==null?void 0:j.defaultView,"keydown",he=>{se&&(he.defaultPrevented||he.key===V2.Escape&&(he.preventDefault(),he.stopPropagation(),A()))}),HO(j,!(I||S!==0||D),B),w.useEffect(()=>{if(S!==0||!v.current)return;let he=new ResizeObserver(Se=>{for(let ae of Se){let ke=ae.target.getBoundingClientRect();ke.x===0&&ke.y===0&&ke.width===0&&ke.height===0&&A()}});return he.observe(v.current),()=>he.disconnect()},[S,v,A]);let[ie,ge]=RO(),ve=w.useMemo(()=>[{dialogState:S,close:A,setTitleId:R},P],[S,P,A,R]),W=w.useMemo(()=>({open:S===0}),[S]),oe={ref:b,id:r,role:l,"aria-modal":S===0?!0:void 0,"aria-labelledby":P.titleId,"aria-describedby":ie};return Y.createElement(LO,{type:"Dialog",enabled:S===0,element:v,onUpdate:ut((he,Se)=>{Se==="Dialog"&&an(he,{[jg.Add]:()=>f(ae=>ae+1),[jg.Remove]:()=>f(ae=>ae-1)})})},Y.createElement(bg,{force:!0},Y.createElement(wg,null,Y.createElement(ch.Provider,{value:ve},Y.createElement(wg.Group,{target:v},Y.createElement(bg,{force:!1},Y.createElement(ge,{slot:W,name:"Dialog.Description"},Y.createElement(pl,{initialFocus:o,containers:B,features:T?an(q,{parent:pl.features.RestoreFocus,leaf:pl.features.All&~pl.features.FocusLock}):pl.features.None},Y.createElement(te,null,lr({ourProps:oe,theirProps:u,slot:W,defaultTag:YO,features:VO,visible:S===0,name:"Dialog"}))))))))),Y.createElement(C,null))}let ZO="div";function KO(t,e){let n=zo(),{id:r=`headlessui-dialog-overlay-${n}`,...s}=t,[{dialogState:i,close:o}]=Kc("Dialog.Overlay"),l=wr(e),d=ut(p=>{if(p.target===p.currentTarget){if(Z3(p.currentTarget))return p.preventDefault();p.preventDefault(),p.stopPropagation(),o()}}),u=w.useMemo(()=>({open:i===0}),[i]);return lr({ourProps:{ref:l,id:r,"aria-hidden":!0,onClick:d},theirProps:s,slot:u,defaultTag:ZO,name:"Dialog.Overlay"})}let GO="div";function QO(t,e){let n=zo(),{id:r=`headlessui-dialog-backdrop-${n}`,...s}=t,[{dialogState:i},o]=Kc("Dialog.Backdrop"),l=wr(e);w.useEffect(()=>{if(o.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[o.panelRef]);let d=w.useMemo(()=>({open:i===0}),[i]);return Y.createElement(bg,{force:!0},Y.createElement(wg,null,lr({ourProps:{ref:l,id:r,"aria-hidden":!0},theirProps:s,slot:d,defaultTag:GO,name:"Dialog.Backdrop"})))}let XO="div";function JO(t,e){let n=zo(),{id:r=`headlessui-dialog-panel-${n}`,...s}=t,[{dialogState:i},o]=Kc("Dialog.Panel"),l=wr(e,o.panelRef),d=w.useMemo(()=>({open:i===0}),[i]),u=ut(p=>{p.stopPropagation()});return lr({ourProps:{ref:l,id:r,onClick:u},theirProps:s,slot:d,defaultTag:XO,name:"Dialog.Panel"})}let eM="h2";function tM(t,e){let n=zo(),{id:r=`headlessui-dialog-title-${n}`,...s}=t,[{dialogState:i,setTitleId:o}]=Kc("Dialog.Title"),l=wr(e);w.useEffect(()=>(o(r),()=>o(null)),[r,o]);let d=w.useMemo(()=>({open:i===0}),[i]);return lr({ourProps:{ref:l,id:r},theirProps:s,slot:d,defaultTag:eM,name:"Dialog.Title"})}let nM=$n(qO),rM=$n(QO),sM=$n(JO),iM=$n(KO),aM=$n(tM),_e=Object.assign(nM,{Backdrop:rM,Panel:sM,Overlay:iM,Title:aM,Description:$O});function oM(t=0){let[e,n]=w.useState(t),r=Zc(),s=w.useCallback(d=>{r.current&&n(u=>u|d)},[e,r]),i=w.useCallback(d=>!!(e&d),[e]),o=w.useCallback(d=>{r.current&&n(u=>u&~d)},[n,r]),l=w.useCallback(d=>{r.current&&n(u=>u^d)},[n]);return{flags:e,addFlag:s,hasFlag:i,removeFlag:o,toggleFlag:l}}function lM(t){let e={called:!1};return(...n)=>{if(!e.called)return e.called=!0,t(...n)}}function $f(t,...e){t&&e.length>0&&t.classList.add(...e)}function zf(t,...e){t&&e.length>0&&t.classList.remove(...e)}function cM(t,e){let n=ha();if(!t)return n.dispose;let{transitionDuration:r,transitionDelay:s}=getComputedStyle(t),[i,o]=[r,s].map(d=>{let[u=0]=d.split(",").filter(Boolean).map(p=>p.includes("ms")?parseFloat(p):parseFloat(p)*1e3).sort((p,f)=>f-p);return u}),l=i+o;if(l!==0){n.group(u=>{u.setTimeout(()=>{e(),u.dispose()},l),u.addEventListener(t,"transitionrun",p=>{p.target===p.currentTarget&&u.dispose()})});let d=n.addEventListener(t,"transitionend",u=>{u.target===u.currentTarget&&(e(),d())})}else e();return n.add(()=>e()),n.dispose}function dM(t,e,n,r){let s=n?"enter":"leave",i=ha(),o=r!==void 0?lM(r):()=>{};s==="enter"&&(t.removeAttribute("hidden"),t.style.display="");let l=an(s,{enter:()=>e.enter,leave:()=>e.leave}),d=an(s,{enter:()=>e.enterTo,leave:()=>e.leaveTo}),u=an(s,{enter:()=>e.enterFrom,leave:()=>e.leaveFrom});return zf(t,...e.base,...e.enter,...e.enterTo,...e.enterFrom,...e.leave,...e.leaveFrom,...e.leaveTo,...e.entered),$f(t,...e.base,...l,...u),i.nextFrame(()=>{zf(t,...e.base,...l,...u),$f(t,...e.base,...l,...d),cM(t,()=>(zf(t,...e.base,...l),$f(t,...e.base,...e.entered),o()))}),i.dispose}function uM({immediate:t,container:e,direction:n,classes:r,onStart:s,onStop:i}){let o=Zc(),l=sv(),d=hs(n);nr(()=>{t&&(d.current="enter")},[t]),nr(()=>{let u=ha();l.add(u.dispose);let p=e.current;if(p&&d.current!=="idle"&&o.current)return u.dispose(),s.current(d.current),u.add(dM(p,r.current,d.current==="enter",()=>{u.dispose(),i.current(d.current)})),u.dispose},[n])}function ks(t=""){return t.split(/\s+/).filter(e=>e.length>1)}let dp=w.createContext(null);dp.displayName="TransitionContext";var hM=(t=>(t.Visible="visible",t.Hidden="hidden",t))(hM||{});function pM(){let t=w.useContext(dp);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function fM(){let t=w.useContext(up);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let up=w.createContext(null);up.displayName="NestingContext";function hp(t){return"children"in t?hp(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function nN(t,e){let n=hs(t),r=w.useRef([]),s=Zc(),i=sv(),o=ut((g,v=Hs.Hidden)=>{let b=r.current.findIndex(({el:j})=>j===g);b!==-1&&(an(v,{[Hs.Unmount](){r.current.splice(b,1)},[Hs.Hidden](){r.current[b].state="hidden"}}),i.microTask(()=>{var j;!hp(r)&&s.current&&((j=n.current)==null||j.call(n))}))}),l=ut(g=>{let v=r.current.find(({el:b})=>b===g);return v?v.state!=="visible"&&(v.state="visible"):r.current.push({el:g,state:"visible"}),()=>o(g,Hs.Unmount)}),d=w.useRef([]),u=w.useRef(Promise.resolve()),p=w.useRef({enter:[],leave:[],idle:[]}),f=ut((g,v,b)=>{d.current.splice(0),e&&(e.chains.current[v]=e.chains.current[v].filter(([j])=>j!==g)),e==null||e.chains.current[v].push([g,new Promise(j=>{d.current.push(j)})]),e==null||e.chains.current[v].push([g,new Promise(j=>{Promise.all(p.current[v].map(([_,N])=>N)).then(()=>j())})]),v==="enter"?u.current=u.current.then(()=>e==null?void 0:e.wait.current).then(()=>b(v)):b(v)}),x=ut((g,v,b)=>{Promise.all(p.current[v].splice(0).map(([j,_])=>_)).then(()=>{var j;(j=d.current.shift())==null||j()}).then(()=>b(v))});return w.useMemo(()=>({children:r,register:l,unregister:o,onStart:f,onStop:x,wait:u,chains:p}),[l,o,r,f,x,p,u])}function mM(){}let gM=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function Nb(t){var e;let n={};for(let r of gM)n[r]=(e=t[r])!=null?e:mM;return n}function xM(t){let e=w.useRef(Nb(t));return w.useEffect(()=>{e.current=Nb(t)},[t]),e}let vM="div",rN=oh.RenderStrategy;function yM(t,e){var n,r;let{beforeEnter:s,afterEnter:i,beforeLeave:o,afterLeave:l,enter:d,enterFrom:u,enterTo:p,entered:f,leave:x,leaveFrom:g,leaveTo:v,...b}=t,j=w.useRef(null),_=wr(j,e),N=(n=b.unmount)==null||n?Hs.Unmount:Hs.Hidden,{show:S,appear:P,initial:M}=pM(),[A,R]=w.useState(S?"visible":"hidden"),T=fM(),{register:V,unregister:D}=T;w.useEffect(()=>V(j),[V,j]),w.useEffect(()=>{if(N===Hs.Hidden&&j.current){if(S&&A!=="visible"){R("visible");return}return an(A,{hidden:()=>D(j),visible:()=>V(j)})}},[A,j,V,D,S,N]);let U=hs({base:ks(b.className),enter:ks(d),enterFrom:ks(u),enterTo:ks(p),entered:ks(f),leave:ks(x),leaveFrom:ks(g),leaveTo:ks(v)}),te=xM({beforeEnter:s,afterEnter:i,beforeLeave:o,afterLeave:l}),G=$o();w.useEffect(()=>{if(G&&A==="visible"&&j.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[j,A,G]);let B=M&&!P,Z=P&&S&&M,C=!G||B?"idle":S?"enter":"leave",q=oM(0),I=ut(se=>an(se,{enter:()=>{q.addFlag(On.Opening),te.current.beforeEnter()},leave:()=>{q.addFlag(On.Closing),te.current.beforeLeave()},idle:()=>{}})),X=ut(se=>an(se,{enter:()=>{q.removeFlag(On.Opening),te.current.afterEnter()},leave:()=>{q.removeFlag(On.Closing),te.current.afterLeave()},idle:()=>{}})),E=nN(()=>{R("hidden"),D(j)},T),K=w.useRef(!1);uM({immediate:Z,container:j,classes:U,direction:C,onStart:hs(se=>{K.current=!0,E.onStart(j,se,I)}),onStop:hs(se=>{K.current=!1,E.onStop(j,se,X),se==="leave"&&!hp(E)&&(R("hidden"),D(j))})});let re=b,Q={ref:_};return Z?re={...re,className:ah(b.className,...U.current.enter,...U.current.enterFrom)}:K.current&&(re.className=ah(b.className,(r=j.current)==null?void 0:r.className),re.className===""&&delete re.className),Y.createElement(up.Provider,{value:E},Y.createElement(V3,{value:an(A,{visible:On.Open,hidden:On.Closed})|q.flags},lr({ourProps:Q,theirProps:re,defaultTag:vM,features:rN,visible:A==="visible",name:"Transition.Child"})))}function bM(t,e){let{show:n,appear:r=!1,unmount:s=!0,...i}=t,o=w.useRef(null),l=wr(o,e);$o();let d=ov();if(n===void 0&&d!==null&&(n=(d&On.Open)===On.Open),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,p]=w.useState(n?"visible":"hidden"),f=nN(()=>{p("hidden")}),[x,g]=w.useState(!0),v=w.useRef([n]);nr(()=>{x!==!1&&v.current[v.current.length-1]!==n&&(v.current.push(n),g(!1))},[v,n]);let b=w.useMemo(()=>({show:n,appear:r,initial:x}),[n,r,x]);w.useEffect(()=>{if(n)p("visible");else if(!hp(f))p("hidden");else{let S=o.current;if(!S)return;let P=S.getBoundingClientRect();P.x===0&&P.y===0&&P.width===0&&P.height===0&&p("hidden")}},[n,f]);let j={unmount:s},_=ut(()=>{var S;x&&g(!1),(S=t.beforeEnter)==null||S.call(t)}),N=ut(()=>{var S;x&&g(!1),(S=t.beforeLeave)==null||S.call(t)});return Y.createElement(up.Provider,{value:f},Y.createElement(dp.Provider,{value:b},lr({ourProps:{...j,as:w.Fragment,children:Y.createElement(sN,{ref:l,...j,...i,beforeEnter:_,beforeLeave:N})},theirProps:{},defaultTag:w.Fragment,features:rN,visible:u==="visible",name:"Transition"})))}function _M(t,e){let n=w.useContext(dp)!==null,r=ov()!==null;return Y.createElement(Y.Fragment,null,!n&&r?Y.createElement(Ng,{ref:e,...t}):Y.createElement(sN,{ref:e,...t}))}let Ng=$n(bM),sN=$n(yM),wM=$n(_M),Bf=Object.assign(Ng,{Child:wM,Root:Ng});function zn({filters:t,onFilterChange:e}){const n=(s,i)=>{e({...t,[s]:i})},r=(s,i)=>{switch(i.type){case"text":return a.jsx("input",{type:"text",value:t[s]||"",onChange:o=>n(s,o.target.value),placeholder:i.placeholder,className:"w-full border rounded-md px-3 py-2"});case"select":return a.jsxs("select",{value:t[s]||"",onChange:o=>n(s,o.target.value),className:"w-full border rounded-md px-3 py-2",children:[a.jsx("option",{value:"",children:i.placeholder}),i.options.map(o=>a.jsx("option",{value:o.value,children:o.label},o.value))]});case"number":return a.jsx("input",{type:"number",value:t[s]||"",onChange:o=>n(s,o.target.value),placeholder:i.placeholder,min:i.min,max:i.max,step:i.step,className:"w-full border rounded-md px-3 py-2"});case"date":return a.jsx("input",{type:"date",value:t[s]||"",onChange:o=>n(s,o.target.value),className:"w-full border rounded-md px-3 py-2"});case"dateRange":return a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"date",value:t[`${s}Start`]||"",onChange:o=>n(`${s}Start`,o.target.value),className:"w-full border rounded-md px-3 py-2"}),a.jsx("input",{type:"date",value:t[`${s}End`]||"",onChange:o=>n(`${s}End`,o.target.value),className:"w-full border rounded-md px-3 py-2"})]});default:return null}};return a.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Object.entries(t).map(([s,i])=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:i.label}),r(s,i)]},s))})})}function Bn(t={},e=[]){const[n,r]=w.useState(t),s=w.useCallback(l=>l.filter(d=>Object.entries(n).every(([u,p])=>{if(!p.value&&p.value!==0)return!0;switch(p.type){case"text":const f=String(d[u]||""),x=String(p.value||"");return f.toLowerCase().includes(x.toLowerCase());case"select":return p.value===""||d[u]===p.value;case"number":return d[u]===Number(p.value);case"date":return new Date(d[u]).toISOString().split("T")[0]===p.value;case"dateRange":const v=new Date(d[u]),b=p.value.start?new Date(p.value.start):null,j=p.value.end?new Date(p.value.end):null;return b&&j?v>=b&&v<=j:b?v>=b:j?v<=j:!0;default:return!0}})),[n]),i=w.useCallback(l=>{r(d=>({...d,...Object.fromEntries(Object.entries(l).map(([u,p])=>[u,{...d[u],value:p}]))}))},[]),o=w.useCallback(()=>{r(t)},[t]);return{filters:n,filterData:s,handleFilterChange:i,resetFilters:o}}var iN={exports:{}},jM="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",NM=jM,kM=NM;function aN(){}function oN(){}oN.resetWarningCache=aN;var SM=function(){function t(r,s,i,o,l,d){if(d!==kM){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:oN,resetWarningCache:aN};return n.PropTypes=n,n};iN.exports=SM();var CM=iN.exports;const Xe=ys(CM);function pa(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?i(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})}const EM=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function vo(t,e,n){const r=TM(t),{webkitRelativePath:s}=t,i=typeof e=="string"?e:typeof s=="string"&&s.length>0?s:`./${t.name}`;return typeof r.path!="string"&&kb(r,"path",i),kb(r,"relativePath",i),r}function TM(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const r=e.split(".").pop().toLowerCase(),s=EM.get(r);s&&Object.defineProperty(t,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return t}function kb(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1,configurable:!1,enumerable:!0})}const PM=[".DS_Store","Thumbs.db"];function DM(t){return pa(this,void 0,void 0,function*(){return dh(t)&&OM(t.dataTransfer)?AM(t.dataTransfer,t.type):MM(t)?LM(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?RM(t):[]})}function OM(t){return dh(t)}function MM(t){return dh(t)&&dh(t.target)}function dh(t){return typeof t=="object"&&t!==null}function LM(t){return kg(t.target.files).map(e=>vo(e))}function RM(t){return pa(this,void 0,void 0,function*(){return(yield Promise.all(t.map(n=>n.getFile()))).map(n=>vo(n))})}function AM(t,e){return pa(this,void 0,void 0,function*(){if(t.items){const n=kg(t.items).filter(s=>s.kind==="file");if(e!=="drop")return n;const r=yield Promise.all(n.map(IM));return Sb(lN(r))}return Sb(kg(t.files).map(n=>vo(n)))})}function Sb(t){return t.filter(e=>PM.indexOf(e.name)===-1)}function kg(t){if(t===null)return[];const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(r)}return e}function IM(t){if(typeof t.webkitGetAsEntry!="function")return Cb(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?cN(e):Cb(t,e)}function lN(t){return t.reduce((e,n)=>[...e,...Array.isArray(n)?lN(n):[n]],[])}function Cb(t,e){return pa(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const i=yield t.getAsFileSystemHandle();if(i===null)throw new Error(`${t} is not a File`);if(i!==void 0){const o=yield i.getFile();return o.handle=i,vo(o)}}const r=t.getAsFile();if(!r)throw new Error(`${t} is not a File`);return vo(r,(n=e==null?void 0:e.fullPath)!==null&&n!==void 0?n:void 0)})}function FM(t){return pa(this,void 0,void 0,function*(){return t.isDirectory?cN(t):$M(t)})}function cN(t){const e=t.createReader();return new Promise((n,r)=>{const s=[];function i(){e.readEntries(o=>pa(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(FM));s.push(l),i()}else try{const l=yield Promise.all(s);n(l)}catch(l){r(l)}}),o=>{r(o)})}i()})}function $M(t){return pa(this,void 0,void 0,function*(){return new Promise((e,n)=>{t.file(r=>{const s=vo(r,t.fullPath);e(s)},r=>{n(r)})})})}var Uf=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var r=t.name||"",s=(t.type||"").toLowerCase(),i=s.replace(/\/.*$/,"");return n.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?r.toLowerCase().endsWith(l):l.endsWith("/*")?i===l.replace(/\/.*$/,""):s===l})}return!0};function Eb(t){return UM(t)||BM(t)||uN(t)||zM()}function zM(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BM(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function UM(t){if(Array.isArray(t))return Sg(t)}function Tb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Pb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tb(Object(n),!0).forEach(function(r){dN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dN(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sc(t,e){return YM(t)||WM(t,e)||uN(t,e)||HM()}function HM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uN(t,e){if(t){if(typeof t=="string")return Sg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sg(t,e)}}function Sg(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function WM(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],s=!0,i=!1,o,l;try{for(n=n.call(t);!(s=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));s=!0);}catch(d){i=!0,l=d}finally{try{!s&&n.return!=null&&n.return()}finally{if(i)throw l}}return r}}function YM(t){if(Array.isArray(t))return t}var VM=typeof Uf=="function"?Uf:Uf.default,qM="file-invalid-type",ZM="file-too-large",KM="file-too-small",GM="too-many-files",QM=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:qM,message:"File type must be ".concat(r)}},Db=function(e){return{code:ZM,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},Ob=function(e){return{code:KM,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},XM={code:GM,message:"Too many files"};function hN(t,e){var n=t.type==="application/x-moz-file"||VM(t,e);return[n,n?null:QM(e)]}function pN(t,e,n){if(Ii(t.size))if(Ii(e)&&Ii(n)){if(t.size>n)return[!1,Db(n)];if(t.size<e)return[!1,Ob(e)]}else{if(Ii(e)&&t.size<e)return[!1,Ob(e)];if(Ii(n)&&t.size>n)return[!1,Db(n)]}return[!0,null]}function Ii(t){return t!=null}function JM(t){var e=t.files,n=t.accept,r=t.minSize,s=t.maxSize,i=t.multiple,o=t.maxFiles,l=t.validator;return!i&&e.length>1||i&&o>=1&&e.length>o?!1:e.every(function(d){var u=hN(d,n),p=Sc(u,1),f=p[0],x=pN(d,r,s),g=Sc(x,1),v=g[0],b=l?l(d):null;return f&&v&&!b})}function uh(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Hd(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function Mb(t){t.preventDefault()}function eL(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function tL(t){return t.indexOf("Edge/")!==-1}function nL(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return eL(t)||tL(t)}function Er(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var s=arguments.length,i=new Array(s>1?s-1:0),o=1;o<s;o++)i[o-1]=arguments[o];return e.some(function(l){return!uh(r)&&l&&l.apply(void 0,[r].concat(i)),uh(r)})}}function rL(){return"showOpenFilePicker"in window}function sL(t){if(Ii(t)){var e=Object.entries(t).filter(function(n){var r=Sc(n,2),s=r[0],i=r[1],o=!0;return fN(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(i)||!i.every(mN))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(n,r){var s=Sc(r,2),i=s[0],o=s[1];return Pb(Pb({},n),{},dN({},i,o))},{});return[{description:"Files",accept:e}]}return t}function iL(t){if(Ii(t))return Object.entries(t).reduce(function(e,n){var r=Sc(n,2),s=r[0],i=r[1];return[].concat(Eb(e),[s],Eb(i))},[]).filter(function(e){return fN(e)||mN(e)}).join(",")}function aL(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function oL(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function fN(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function mN(t){return/^.*\.[\w]+$/.test(t)}var lL=["children"],cL=["open"],dL=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],uL=["refKey","onChange","onClick"];function hL(t){return mL(t)||fL(t)||gN(t)||pL()}function pL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fL(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mL(t){if(Array.isArray(t))return Cg(t)}function Hf(t,e){return vL(t)||xL(t,e)||gN(t,e)||gL()}function gL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gN(t,e){if(t){if(typeof t=="string")return Cg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cg(t,e)}}function Cg(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xL(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],s=!0,i=!1,o,l;try{for(n=n.call(t);!(s=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));s=!0);}catch(d){i=!0,l=d}finally{try{!s&&n.return!=null&&n.return()}finally{if(i)throw l}}return r}}function vL(t){if(Array.isArray(t))return t}function Lb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ft(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Lb(Object(n),!0).forEach(function(r){Eg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Eg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hh(t,e){if(t==null)return{};var n=yL(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yL(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var cv=w.forwardRef(function(t,e){var n=t.children,r=hh(t,lL),s=vN(r),i=s.open,o=hh(s,cL);return w.useImperativeHandle(e,function(){return{open:i}},[i]),Y.createElement(w.Fragment,null,n(ft(ft({},o),{},{open:i})))});cv.displayName="Dropzone";var xN={disabled:!1,getFilesFromEvent:DM,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};cv.defaultProps=xN;cv.propTypes={children:Xe.func,accept:Xe.objectOf(Xe.arrayOf(Xe.string)),multiple:Xe.bool,preventDropOnDocument:Xe.bool,noClick:Xe.bool,noKeyboard:Xe.bool,noDrag:Xe.bool,noDragEventsBubbling:Xe.bool,minSize:Xe.number,maxSize:Xe.number,maxFiles:Xe.number,disabled:Xe.bool,getFilesFromEvent:Xe.func,onFileDialogCancel:Xe.func,onFileDialogOpen:Xe.func,useFsAccessApi:Xe.bool,autoFocus:Xe.bool,onDragEnter:Xe.func,onDragLeave:Xe.func,onDragOver:Xe.func,onDrop:Xe.func,onDropAccepted:Xe.func,onDropRejected:Xe.func,onError:Xe.func,validator:Xe.func};var Tg={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function vN(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=ft(ft({},xN),t),n=e.accept,r=e.disabled,s=e.getFilesFromEvent,i=e.maxSize,o=e.minSize,l=e.multiple,d=e.maxFiles,u=e.onDragEnter,p=e.onDragLeave,f=e.onDragOver,x=e.onDrop,g=e.onDropAccepted,v=e.onDropRejected,b=e.onFileDialogCancel,j=e.onFileDialogOpen,_=e.useFsAccessApi,N=e.autoFocus,S=e.preventDropOnDocument,P=e.noClick,M=e.noKeyboard,A=e.noDrag,R=e.noDragEventsBubbling,T=e.onError,V=e.validator,D=w.useMemo(function(){return iL(n)},[n]),U=w.useMemo(function(){return sL(n)},[n]),te=w.useMemo(function(){return typeof j=="function"?j:Rb},[j]),G=w.useMemo(function(){return typeof b=="function"?b:Rb},[b]),B=w.useRef(null),Z=w.useRef(null),C=w.useReducer(bL,Tg),q=Hf(C,2),I=q[0],X=q[1],E=I.isFocused,K=I.isFileDialogActive,re=w.useRef(typeof window<"u"&&window.isSecureContext&&_&&rL()),Q=function(){!re.current&&K&&setTimeout(function(){if(Z.current){var je=Z.current.files;je.length||(X({type:"closeDialog"}),G())}},300)};w.useEffect(function(){return window.addEventListener("focus",Q,!1),function(){window.removeEventListener("focus",Q,!1)}},[Z,K,G,re]);var se=w.useRef([]),le=function(je){B.current&&B.current.contains(je.target)||(je.preventDefault(),se.current=[])};w.useEffect(function(){return S&&(document.addEventListener("dragover",Mb,!1),document.addEventListener("drop",le,!1)),function(){S&&(document.removeEventListener("dragover",Mb),document.removeEventListener("drop",le))}},[B,S]),w.useEffect(function(){return!r&&N&&B.current&&B.current.focus(),function(){}},[B,N,r]);var ie=w.useCallback(function(ue){T?T(ue):console.error(ue)},[T]),ge=w.useCallback(function(ue){ue.preventDefault(),ue.persist(),_t(ue),se.current=[].concat(hL(se.current),[ue.target]),Hd(ue)&&Promise.resolve(s(ue)).then(function(je){if(!(uh(ue)&&!R)){var Qe=je.length,lt=Qe>0&&JM({files:je,accept:D,minSize:o,maxSize:i,multiple:l,maxFiles:d,validator:V}),Dt=Qe>0&&!lt;X({isDragAccept:lt,isDragReject:Dt,isDragActive:!0,type:"setDraggedFiles"}),u&&u(ue)}}).catch(function(je){return ie(je)})},[s,u,ie,R,D,o,i,l,d,V]),ve=w.useCallback(function(ue){ue.preventDefault(),ue.persist(),_t(ue);var je=Hd(ue);if(je&&ue.dataTransfer)try{ue.dataTransfer.dropEffect="copy"}catch{}return je&&f&&f(ue),!1},[f,R]),W=w.useCallback(function(ue){ue.preventDefault(),ue.persist(),_t(ue);var je=se.current.filter(function(lt){return B.current&&B.current.contains(lt)}),Qe=je.indexOf(ue.target);Qe!==-1&&je.splice(Qe,1),se.current=je,!(je.length>0)&&(X({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Hd(ue)&&p&&p(ue))},[B,p,R]),oe=w.useCallback(function(ue,je){var Qe=[],lt=[];ue.forEach(function(Dt){var vi=hN(Dt,D),Zr=Hf(vi,2),xa=Zr[0],Ho=Zr[1],va=pN(Dt,o,i),_s=Hf(va,2),ya=_s[0],Wo=_s[1],Kr=V?V(Dt):null;if(xa&&ya&&!Kr)Qe.push(Dt);else{var Yo=[Ho,Wo];Kr&&(Yo=Yo.concat(Kr)),lt.push({file:Dt,errors:Yo.filter(function(jp){return jp})})}}),(!l&&Qe.length>1||l&&d>=1&&Qe.length>d)&&(Qe.forEach(function(Dt){lt.push({file:Dt,errors:[XM]})}),Qe.splice(0)),X({acceptedFiles:Qe,fileRejections:lt,isDragReject:lt.length>0,type:"setFiles"}),x&&x(Qe,lt,je),lt.length>0&&v&&v(lt,je),Qe.length>0&&g&&g(Qe,je)},[X,l,D,o,i,d,x,g,v,V]),he=w.useCallback(function(ue){ue.preventDefault(),ue.persist(),_t(ue),se.current=[],Hd(ue)&&Promise.resolve(s(ue)).then(function(je){uh(ue)&&!R||oe(je,ue)}).catch(function(je){return ie(je)}),X({type:"reset"})},[s,oe,ie,R]),Se=w.useCallback(function(){if(re.current){X({type:"openDialog"}),te();var ue={multiple:l,types:U};window.showOpenFilePicker(ue).then(function(je){return s(je)}).then(function(je){oe(je,null),X({type:"closeDialog"})}).catch(function(je){aL(je)?(G(je),X({type:"closeDialog"})):oL(je)?(re.current=!1,Z.current?(Z.current.value=null,Z.current.click()):ie(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):ie(je)});return}Z.current&&(X({type:"openDialog"}),te(),Z.current.value=null,Z.current.click())},[X,te,G,_,oe,ie,U,l]),ae=w.useCallback(function(ue){!B.current||!B.current.isEqualNode(ue.target)||(ue.key===" "||ue.key==="Enter"||ue.keyCode===32||ue.keyCode===13)&&(ue.preventDefault(),Se())},[B,Se]),ke=w.useCallback(function(){X({type:"focus"})},[]),We=w.useCallback(function(){X({type:"blur"})},[]),ht=w.useCallback(function(){P||(nL()?setTimeout(Se,0):Se())},[P,Se]),Lt=function(je){return r?null:je},Vt=function(je){return M?null:Lt(je)},Jt=function(je){return A?null:Lt(je)},_t=function(je){R&&je.stopPropagation()},Tn=w.useMemo(function(){return function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},je=ue.refKey,Qe=je===void 0?"ref":je,lt=ue.role,Dt=ue.onKeyDown,vi=ue.onFocus,Zr=ue.onBlur,xa=ue.onClick,Ho=ue.onDragEnter,va=ue.onDragOver,_s=ue.onDragLeave,ya=ue.onDrop,Wo=hh(ue,dL);return ft(ft(Eg({onKeyDown:Vt(Er(Dt,ae)),onFocus:Vt(Er(vi,ke)),onBlur:Vt(Er(Zr,We)),onClick:Lt(Er(xa,ht)),onDragEnter:Jt(Er(Ho,ge)),onDragOver:Jt(Er(va,ve)),onDragLeave:Jt(Er(_s,W)),onDrop:Jt(Er(ya,he)),role:typeof lt=="string"&&lt!==""?lt:"presentation"},Qe,B),!r&&!M?{tabIndex:0}:{}),Wo)}},[B,ae,ke,We,ht,ge,ve,W,he,M,A,r]),gi=w.useCallback(function(ue){ue.stopPropagation()},[]),xi=w.useMemo(function(){return function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},je=ue.refKey,Qe=je===void 0?"ref":je,lt=ue.onChange,Dt=ue.onClick,vi=hh(ue,uL),Zr=Eg({accept:D,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Lt(Er(lt,he)),onClick:Lt(Er(Dt,gi)),tabIndex:-1},Qe,Z);return ft(ft({},Zr),vi)}},[Z,n,l,he,r]);return ft(ft({},I),{},{isFocused:E&&!r,getRootProps:Tn,getInputProps:xi,rootRef:B,inputRef:Z,open:Lt(Se)})}function bL(t,e){switch(e.type){case"focus":return ft(ft({},t),{},{isFocused:!0});case"blur":return ft(ft({},t),{},{isFocused:!1});case"openDialog":return ft(ft({},Tg),{},{isFileDialogActive:!0});case"closeDialog":return ft(ft({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return ft(ft({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return ft(ft({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return ft({},Tg);default:return t}}function Rb(){}const It={PRODUCTS:"products",VENDORS:"vendors",PROFILES:"profiles",ADVERTISEMENTS:"advertisements",GENERAL:"general"},_L=async(t,e=It.GENERAL,n="")=>{try{const r=t.name.split(".").pop(),s=`${Math.random().toString(36).substring(2,15)}_${Date.now()}.${r}`,i=n?`${n}/${s}`:s,{data:o,error:l}=await ee.storage.from(e).upload(i,t,{cacheControl:"3600",upsert:!1});if(l)throw l;const{data:{publicUrl:d}}=ee.storage.from(e).getPublicUrl(i);return{path:o.path,url:d}}catch(r){throw console.error("Error uploading file:",r),r}};function xs({onUpload:t,type:e="image",accept:n,maxSize:r=5242880,preview:s=null,bucket:i=It.GENERAL,folder:o="",storeInSupabase:l=!0}){const[d,u]=w.useState(s),[p,f]=w.useState(null),[x,g]=w.useState(!1);w.useEffect(()=>{u(s)},[s]);const v={image:{"image/*":[".jpg",".jpeg",".png",".gif",".webp"]},video:{"video/*":[".mp4",".webm"]}},b=w.useCallback(async A=>{f(null);const R=A[0];if(R){g(!0);try{if(l){const{url:T,path:V}=await _L(R,i,o);u(T),t({file:R,preview:T,path:V,bucket:i,isSupabaseFile:!0})}else $.error("يجب تفعيل storeInSupabase لتخزين الصورة")}catch(T){console.error("Error uploading to Supabase:",T),$.error("فشل رفع الملف إلى Supabase"),f("فشل رفع الملف"),t({file:null,preview:null,isSupabaseFile:!1})}g(!1)}},[t,i,o,l]),{getRootProps:j,getInputProps:_,isDragActive:N}=vN({onDrop:b,accept:n||v[e],maxSize:r,multiple:!1,onDropRejected:A=>{var T,V;const R=(V=(T=A[0])==null?void 0:T.errors[0])==null?void 0:V.code;f(R==="file-too-large"?`حجم الملف كبير جدًا. الحد الأقصى هو ${Math.round(r/1024/1024)} ميجابايت`:R==="file-invalid-type"?"نوع الملف غير مدعوم":"الملف غير صالح")}}),S=()=>{u(null),t({file:null,preview:null})},P=A=>{f("فشل في تحميل الصورة"),A.target.onerror=null,A.target.src="https://placehold.co/200x200/e2e8f0/64748b?text=Image+Not+Found"},M=A=>{f("فشل في تحميل الفيديو"),A.target.onerror=null;const R=A.target.parentNode;R&&(R.innerHTML='<div class="h-48 flex items-center justify-center bg-gray-200 text-gray-500">فشل تحميل الفيديو</div>')};return a.jsxs("div",{className:"space-y-2",children:[p&&a.jsx("div",{className:"text-red-500 text-sm",children:p}),a.jsxs("div",{...j(),className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors ${N?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-blue-500"} ${x?"opacity-70 pointer-events-none":""}`,children:[a.jsx("input",{..._(),disabled:x}),d?a.jsxs("div",{className:"relative",children:[e==="image"?a.jsx("img",{src:d,alt:"Preview",className:"max-h-48 mx-auto rounded",onError:P}):a.jsx("video",{src:d,className:"max-h-48 mx-auto rounded",controls:!0,onError:M}),a.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:a.jsxs("p",{className:"text-white",children:["تغيير ",e==="image"?"الصورة":"الفيديو"]})})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),a.jsx("div",{className:"text-sm text-gray-600",children:x?a.jsx("p",{children:"جاري رفع الملف..."}):N?a.jsx("p",{children:"أفلت الملف هنا ..."}):a.jsxs(a.Fragment,{children:[a.jsxs("p",{children:["اسحب وأفلت ",e==="image"?"الصورة":"الفيديو"," هنا، أو"]}),a.jsx("p",{className:"text-blue-600",children:"اضغط للاختيار"})]})}),a.jsxs("p",{className:"text-xs text-gray-500",children:[e==="image"?"PNG, JPG, GIF, WEBP":"MP4, WebM"," حتى ",Math.round(r/1024/1024)," ميجابايت"]})]})]}),d&&a.jsx("div",{className:"flex justify-center",children:a.jsxs("button",{onClick:S,className:"text-red-600 hover:text-red-800 text-sm",children:["إزالة ",e==="image"?"الصورة":"الفيديو"]})}),l&&a.jsx("p",{className:"text-xs text-gray-500 text-center",children:"سيتم تخزين الملف في Supabase Storage"})]})}let Wd;const wL=new Uint8Array(16);function jL(){if(!Wd&&(Wd=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Wd))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Wd(wL)}const Zt=[];for(let t=0;t<256;++t)Zt.push((t+256).toString(16).slice(1));function NL(t,e=0){return Zt[t[e+0]]+Zt[t[e+1]]+Zt[t[e+2]]+Zt[t[e+3]]+"-"+Zt[t[e+4]]+Zt[t[e+5]]+"-"+Zt[t[e+6]]+Zt[t[e+7]]+"-"+Zt[t[e+8]]+Zt[t[e+9]]+"-"+Zt[t[e+10]]+Zt[t[e+11]]+Zt[t[e+12]]+Zt[t[e+13]]+Zt[t[e+14]]+Zt[t[e+15]]}const kL=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ab={randomUUID:kL};function Vr(t,e,n){if(Ab.randomUUID&&!t)return Ab.randomUUID();t=t||{};const r=t.random||(t.rng||jL)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,NL(r)}function SL({images:t=[],onUpdate:e}){const[n,r]=w.useState(null),s=({base64:o,preview:l,file:d})=>{r(null);try{e([...t,{id:Vr(),file:o,preview:l,name:d.name,size:d.size,type:d.type,isNew:!0}])}catch(u){r("فشل في إضافة الصورة"),console.error("Error adding image:",u)}},i=o=>{e(t.filter(l=>l.id!==o))};return a.jsxs("div",{className:"space-y-4",children:[n&&a.jsx("div",{className:"text-red-500 text-sm",children:n}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:t.map(o=>a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:o.preview||o.url,alt:o.name||"Gallery image",className:"w-full h-32 object-cover rounded-lg",onError:l=>{l.target.onerror=null,l.target.src="https://via.placeholder.com/150?text=Image+Error"}}),a.jsx("button",{onClick:()=>i(o.id),className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]},o.id))}),a.jsx(xs,{onUpload:s,type:"image",accept:{"image/*":[".jpg",".jpeg",".png",".gif",".webp"]},maxSize:2*1024*1024}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"يمكنك إضافة حتى 10 صور للمنتج. الحد الأقصى لحجم الصورة 2 ميجابايت."})]})}function CL({prices:t=[],onChange:e}){const[n]=w.useState([{id:1,name:"برونزي"},{id:2,name:"فضي"},{id:3,name:"ذهبي"},{id:4,name:"بلاتيني"}]),[r,s]=w.useState({tier_id:"",price:"",min_quantity:1}),i=()=>{if(!r.tier_id||!r.price){$.error("الرجاء إدخال المستوى والسعر");return}const u={id:Vr(),...r};e([...t,u]),s({tier_id:"",price:"",min_quantity:1})},o=u=>{e(t.filter(p=>p.id!==u))},l=(u,p,f)=>{e(t.map(x=>x.id===u?{...x,[p]:f}:x))},d=u=>{const p=n.find(f=>f.id===Number(u));switch(p==null?void 0:p.name){case"برونزي":return"bg-amber-100 text-amber-800";case"فضي":return"bg-gray-100 text-gray-800";case"ذهبي":return"bg-yellow-100 text-yellow-800";case"بلاتيني":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"أسعار الجملة"}),t.length>0?a.jsx("div",{className:"space-y-4",children:t.map(u=>a.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المستوى"}),a.jsxs("select",{value:u.tier_id,onChange:p=>l(u.id,"tier_id",Number(p.target.value)),className:`w-full border rounded-md px-3 py-1.5 ${d(u.tier_id)}`,children:[a.jsx("option",{value:"",children:"اختر المستوى"}),n.map(p=>a.jsx("option",{value:p.id,children:p.name},p.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعر (₪)"}),a.jsx("input",{type:"number",value:u.price,onChange:p=>l(u.id,"price",parseFloat(p.target.value)),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحد الأدنى للكمية"}),a.jsx("input",{type:"number",value:u.min_quantity,onChange:p=>l(u.id,"min_quantity",parseInt(p.target.value)),className:"w-full border rounded-md px-3 py-1.5",min:"1"})]})]}),a.jsx("button",{type:"button",onClick:()=>o(u.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]},u.id))}):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"لا توجد أسعار جملة"})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"إضافة سعر جديد"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المستوى"}),a.jsxs("select",{value:r.tier_id,onChange:u=>s({...r,tier_id:Number(u.target.value)}),className:`w-full border rounded-md px-3 py-1.5 ${d(r.tier_id)}`,children:[a.jsx("option",{value:"",children:"اختر المستوى"}),n.map(u=>a.jsx("option",{value:u.id,children:u.name},u.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعر (₪)"}),a.jsx("input",{type:"number",value:r.price,onChange:u=>s({...r,price:parseFloat(u.target.value)}),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحد الأدنى للكمية"}),a.jsx("input",{type:"number",value:r.min_quantity,onChange:u=>s({...r,min_quantity:parseInt(u.target.value)}),className:"w-full border rounded-md px-3 py-1.5",min:"1"})]})]}),a.jsx("div",{className:"mt-4 flex justify-end",children:a.jsx("button",{type:"button",onClick:i,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"إضافة السعر"})})]})]})}function EL({variants:t=[],onChange:e}){const[n,r]=w.useState({name:"",price:0,wholesale_price:0,discount_price:0,stock:0,image:"",sku:""}),s=()=>{if(!n.name){$.error("الرجاء إدخال اسم النوع");return}const l={id:Vr(),...n};e([...t,l]),r({name:"",price:0,wholesale_price:0,discount_price:0,stock:0,image:"",sku:""})},i=l=>{e(t.filter(d=>d.id!==l))},o=(l,d,u)=>{e(t.map(p=>p.id===l?{...p,[d]:u}:p))};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"الأنواع المتوفرة"}),t.length>0?a.jsx("div",{className:"space-y-4",children:t.map(l=>a.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم النوع"}),a.jsx("input",{type:"text",value:l.name,onChange:d=>o(l.id,"name",d.target.value),className:"w-full border rounded-md px-3 py-1.5"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعر (₪)"}),a.jsx("input",{type:"number",value:l.price,onChange:d=>o(l.id,"price",parseFloat(d.target.value)),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"سعر الجملة (₪)"}),a.jsx("input",{type:"number",value:l.wholesale_price,onChange:d=>o(l.id,"wholesale_price",parseFloat(d.target.value)),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"سعر التخفيض (₪)"}),a.jsx("input",{type:"number",value:l.discount_price,onChange:d=>o(l.id,"discount_price",parseFloat(d.target.value)),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المخزون"}),a.jsx("input",{type:"number",value:l.stock,onChange:d=>o(l.id,"stock",parseInt(d.target.value)),className:"w-full border rounded-md px-3 py-1.5",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم المنتج (SKU)"}),a.jsx("input",{type:"text",value:l.sku,onChange:d=>o(l.id,"sku",d.target.value),className:"w-full border rounded-md px-3 py-1.5"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رابط الصورة"}),a.jsx("input",{type:"url",value:l.image,onChange:d=>o(l.id,"image",d.target.value),className:"w-full border rounded-md px-3 py-1.5",placeholder:"https://example.com/image.jpg"})]})]}),a.jsx("button",{type:"button",onClick:()=>i(l.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]},l.id))}):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"لا توجد أنواع بعد"})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"إضافة نوع جديد"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم النوع"}),a.jsx("input",{type:"text",value:n.name,onChange:l=>r({...n,name:l.target.value}),className:"w-full border rounded-md px-3 py-1.5",placeholder:"مثال: أحمر كبير"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعر (₪)"}),a.jsx("input",{type:"number",value:n.price,onChange:l=>r({...n,price:parseFloat(l.target.value)}),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"سعر الجملة (₪)"}),a.jsx("input",{type:"number",value:n.wholesale_price,onChange:l=>r({...n,wholesale_price:parseFloat(l.target.value)}),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"سعر التخفيض (₪)"}),a.jsx("input",{type:"number",value:n.discount_price,onChange:l=>r({...n,discount_price:parseFloat(l.target.value)}),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المخزون"}),a.jsx("input",{type:"number",value:n.stock,onChange:l=>r({...n,stock:parseInt(l.target.value)}),className:"w-full border rounded-md px-3 py-1.5",min:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم المنتج (SKU)"}),a.jsx("input",{type:"text",value:n.sku,onChange:l=>r({...n,sku:l.target.value}),className:"w-full border rounded-md px-3 py-1.5",placeholder:"ABC123"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رابط الصورة"}),a.jsx("input",{type:"url",value:n.image,onChange:l=>r({...n,image:l.target.value}),className:"w-full border rounded-md px-3 py-1.5",placeholder:"https://example.com/image.jpg"})]})]}),a.jsx("div",{className:"mt-4 flex justify-end",children:a.jsx("button",{type:"button",onClick:s,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"إضافة النوع"})})]})]})}var yN={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var i="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(i=s(i,r(l)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var o="";for(var l in i)e.call(i,l)&&i[l]&&(o=s(o,l));return o}function s(i,o){return o?i?i+" "+o:i+o:i}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(yN);var TL=yN.exports;const Qt=ys(TL);function rr(t){"@babel/helpers - typeof";return rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rr(t)}function pe(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function pp(t){return pe(1,arguments),t instanceof Date||rr(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function be(t){pe(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||rr(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Cc(t){if(pe(1,arguments),!pp(t)&&typeof t!="number")return!1;var e=be(t);return!isNaN(Number(e))}function Oe(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function dv(t,e){pe(2,arguments);var n=be(t).getTime(),r=Oe(e);return new Date(n+r)}function bN(t,e){pe(2,arguments);var n=Oe(e);return dv(t,-n)}var PL=864e5;function DL(t){pe(1,arguments);var e=be(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),s=n-r;return Math.floor(s/PL)+1}function yo(t){pe(1,arguments);var e=1,n=be(t),r=n.getUTCDay(),s=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function _N(t){pe(1,arguments);var e=be(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=yo(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var o=yo(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function OL(t){pe(1,arguments);var e=_N(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=yo(n);return r}var ML=6048e5;function wN(t){pe(1,arguments);var e=be(t),n=yo(e).getTime()-OL(e).getTime();return Math.round(n/ML)+1}var LL={};function fa(){return LL}function ia(t,e){var n,r,s,i,o,l,d,u;pe(1,arguments);var p=fa(),f=Oe((n=(r=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:p.weekStartsOn)!==null&&r!==void 0?r:(d=p.locale)===null||d===void 0||(u=d.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var x=be(t),g=x.getUTCDay(),v=(g<f?7:0)+g-f;return x.setUTCDate(x.getUTCDate()-v),x.setUTCHours(0,0,0,0),x}function uv(t,e){var n,r,s,i,o,l,d,u;pe(1,arguments);var p=be(t),f=p.getUTCFullYear(),x=fa(),g=Oe((n=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:x.firstWeekContainsDate)!==null&&r!==void 0?r:(d=x.locale)===null||d===void 0||(u=d.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(g>=1&&g<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var v=new Date(0);v.setUTCFullYear(f+1,0,g),v.setUTCHours(0,0,0,0);var b=ia(v,e),j=new Date(0);j.setUTCFullYear(f,0,g),j.setUTCHours(0,0,0,0);var _=ia(j,e);return p.getTime()>=b.getTime()?f+1:p.getTime()>=_.getTime()?f:f-1}function RL(t,e){var n,r,s,i,o,l,d,u;pe(1,arguments);var p=fa(),f=Oe((n=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:p.firstWeekContainsDate)!==null&&r!==void 0?r:(d=p.locale)===null||d===void 0||(u=d.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),x=uv(t,e),g=new Date(0);g.setUTCFullYear(x,0,f),g.setUTCHours(0,0,0,0);var v=ia(g,e);return v}var AL=6048e5;function jN(t,e){pe(1,arguments);var n=be(t),r=ia(n,e).getTime()-RL(n,e).getTime();return Math.round(r/AL)+1}function Ze(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var Ss={y:function(e,n){var r=e.getUTCFullYear(),s=r>0?r:1-r;return Ze(n==="yy"?s%100:s,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):Ze(r+1,2)},d:function(e,n){return Ze(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return Ze(e.getUTCHours()%12||12,n.length)},H:function(e,n){return Ze(e.getUTCHours(),n.length)},m:function(e,n){return Ze(e.getUTCMinutes(),n.length)},s:function(e,n){return Ze(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,s=e.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,r-3));return Ze(i,n.length)}},Ma={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},IL={G:function(e,n,r){var s=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var s=e.getUTCFullYear(),i=s>0?s:1-s;return r.ordinalNumber(i,{unit:"year"})}return Ss.y(e,n)},Y:function(e,n,r,s){var i=uv(e,s),o=i>0?i:1-i;if(n==="YY"){var l=o%100;return Ze(l,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):Ze(o,n.length)},R:function(e,n){var r=_N(e);return Ze(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return Ze(r,n.length)},Q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return Ze(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return Ze(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,n,r){var s=e.getUTCMonth();switch(n){case"M":case"MM":return Ss.M(e,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,n,r){var s=e.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return Ze(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,n,r,s){var i=jN(e,s);return n==="wo"?r.ordinalNumber(i,{unit:"week"}):Ze(i,n.length)},I:function(e,n,r){var s=wN(e);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):Ze(s,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):Ss.d(e,n)},D:function(e,n,r){var s=DL(e);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):Ze(s,n.length)},E:function(e,n,r){var s=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,n,r,s){var i=e.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return Ze(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,n,r,s){var i=e.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return Ze(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,n,r){var s=e.getUTCDay(),i=s===0?7:s;switch(n){case"i":return String(i);case"ii":return Ze(i,n.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,n,r){var s=e.getUTCHours(),i=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,n,r){var s=e.getUTCHours(),i;switch(s===12?i=Ma.noon:s===0?i=Ma.midnight:i=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,n,r){var s=e.getUTCHours(),i;switch(s>=17?i=Ma.evening:s>=12?i=Ma.afternoon:s>=4?i=Ma.morning:i=Ma.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var s=e.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return Ss.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Ss.H(e,n)},K:function(e,n,r){var s=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):Ze(s,n.length)},k:function(e,n,r){var s=e.getUTCHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):Ze(s,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Ss.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Ss.s(e,n)},S:function(e,n){return Ss.S(e,n)},X:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return Fb(o);case"XXXX":case"XX":return Oi(o);case"XXXXX":case"XXX":default:return Oi(o,":")}},x:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"x":return Fb(o);case"xxxx":case"xx":return Oi(o);case"xxxxx":case"xxx":default:return Oi(o,":")}},O:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Ib(o,":");case"OOOO":default:return"GMT"+Oi(o,":")}},z:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Ib(o,":");case"zzzz":default:return"GMT"+Oi(o,":")}},t:function(e,n,r,s){var i=s._originalDate||e,o=Math.floor(i.getTime()/1e3);return Ze(o,n.length)},T:function(e,n,r,s){var i=s._originalDate||e,o=i.getTime();return Ze(o,n.length)}};function Ib(t,e){var n=t>0?"-":"+",r=Math.abs(t),s=Math.floor(r/60),i=r%60;if(i===0)return n+String(s);var o=e;return n+String(s)+o+Ze(i,2)}function Fb(t,e){if(t%60===0){var n=t>0?"-":"+";return n+Ze(Math.abs(t)/60,2)}return Oi(t,e)}function Oi(t,e){var n=e||"",r=t>0?"-":"+",s=Math.abs(t),i=Ze(Math.floor(s/60),2),o=Ze(s%60,2);return r+i+n+o}var $b=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},NN=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},FL=function(e,n){var r=e.match(/(P+)(p+)?/)||[],s=r[1],i=r[2];if(!i)return $b(e,n);var o;switch(s){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",$b(s,n)).replace("{{time}}",NN(i,n))},Pg={p:NN,P:FL};function ph(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}var $L=["D","DD"],zL=["YY","YYYY"];function kN(t){return $L.indexOf(t)!==-1}function SN(t){return zL.indexOf(t)!==-1}function fh(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var BL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},UL=function(e,n,r){var s,i=BL[e];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function Wf(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var HL={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},WL={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},YL={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},VL={date:Wf({formats:HL,defaultWidth:"full"}),time:Wf({formats:WL,defaultWidth:"full"}),dateTime:Wf({formats:YL,defaultWidth:"full"})},qL={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ZL=function(e,n,r,s){return qL[e]};function ml(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):i;s=t.formattingValues[o]||t.formattingValues[i]}else{var l=t.defaultWidth,d=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[d]||t.values[l]}var u=t.argumentCallback?t.argumentCallback(e):e;return s[u]}}var KL={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},GL={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},QL={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},XL={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},JL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},e6={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},t6=function(e,n){var r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},n6={ordinalNumber:t6,era:ml({values:KL,defaultWidth:"wide"}),quarter:ml({values:GL,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:ml({values:QL,defaultWidth:"wide"}),day:ml({values:XL,defaultWidth:"wide"}),dayPeriod:ml({values:JL,defaultWidth:"wide",formattingValues:e6,defaultFormattingWidth:"wide"})};function gl(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;var o=i[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(l)?s6(l,function(f){return f.test(o)}):r6(l,function(f){return f.test(o)}),u;u=t.valueCallback?t.valueCallback(d):d,u=n.valueCallback?n.valueCallback(u):u;var p=e.slice(o.length);return{value:u,rest:p}}}function r6(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function s6(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function i6(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var s=r[0],i=e.match(t.parsePattern);if(!i)return null;var o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;var l=e.slice(s.length);return{value:o,rest:l}}}var a6=/^(\d+)(th|st|nd|rd)?/i,o6=/\d+/i,l6={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},c6={any:[/^b/i,/^(a|c)/i]},d6={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},u6={any:[/1/i,/2/i,/3/i,/4/i]},h6={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},p6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},f6={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},m6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},g6={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},x6={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},v6={ordinalNumber:i6({matchPattern:a6,parsePattern:o6,valueCallback:function(e){return parseInt(e,10)}}),era:gl({matchPatterns:l6,defaultMatchWidth:"wide",parsePatterns:c6,defaultParseWidth:"any"}),quarter:gl({matchPatterns:d6,defaultMatchWidth:"wide",parsePatterns:u6,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:gl({matchPatterns:h6,defaultMatchWidth:"wide",parsePatterns:p6,defaultParseWidth:"any"}),day:gl({matchPatterns:f6,defaultMatchWidth:"wide",parsePatterns:m6,defaultParseWidth:"any"}),dayPeriod:gl({matchPatterns:g6,defaultMatchWidth:"any",parsePatterns:x6,defaultParseWidth:"any"})},CN={code:"en-US",formatDistance:UL,formatLong:VL,formatRelative:ZL,localize:n6,match:v6,options:{weekStartsOn:0,firstWeekContainsDate:1}},y6=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,b6=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_6=/^'([^]*?)'?$/,w6=/''/g,j6=/[a-zA-Z]/;function zb(t,e,n){var r,s,i,o,l,d,u,p,f,x,g,v,b,j,_,N,S,P;pe(2,arguments);var M=String(e),A=fa(),R=(r=(s=n==null?void 0:n.locale)!==null&&s!==void 0?s:A.locale)!==null&&r!==void 0?r:CN,T=Oe((i=(o=(l=(d=n==null?void 0:n.firstWeekContainsDate)!==null&&d!==void 0?d:n==null||(u=n.locale)===null||u===void 0||(p=u.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&l!==void 0?l:A.firstWeekContainsDate)!==null&&o!==void 0?o:(f=A.locale)===null||f===void 0||(x=f.options)===null||x===void 0?void 0:x.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(T>=1&&T<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var V=Oe((g=(v=(b=(j=n==null?void 0:n.weekStartsOn)!==null&&j!==void 0?j:n==null||(_=n.locale)===null||_===void 0||(N=_.options)===null||N===void 0?void 0:N.weekStartsOn)!==null&&b!==void 0?b:A.weekStartsOn)!==null&&v!==void 0?v:(S=A.locale)===null||S===void 0||(P=S.options)===null||P===void 0?void 0:P.weekStartsOn)!==null&&g!==void 0?g:0);if(!(V>=0&&V<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!R.localize)throw new RangeError("locale must contain localize property");if(!R.formatLong)throw new RangeError("locale must contain formatLong property");var D=be(t);if(!Cc(D))throw new RangeError("Invalid time value");var U=ph(D),te=bN(D,U),G={firstWeekContainsDate:T,weekStartsOn:V,locale:R,_originalDate:D},B=M.match(b6).map(function(Z){var C=Z[0];if(C==="p"||C==="P"){var q=Pg[C];return q(Z,R.formatLong)}return Z}).join("").match(y6).map(function(Z){if(Z==="''")return"'";var C=Z[0];if(C==="'")return N6(Z);var q=IL[C];if(q)return!(n!=null&&n.useAdditionalWeekYearTokens)&&SN(Z)&&fh(Z,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&kN(Z)&&fh(Z,e,String(t)),q(te,Z,R.localize,G);if(C.match(j6))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return Z}).join("");return B}function N6(t){var e=t.match(_6);return e?e[1].replace(w6,"'"):t}var k6=6e4;function Dg(t,e){pe(2,arguments);var n=Oe(e);return dv(t,n*k6)}var S6=36e5;function C6(t,e){pe(2,arguments);var n=Oe(e);return dv(t,n*S6)}function Bo(t,e){pe(2,arguments);var n=be(t),r=Oe(e);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function mh(t,e){pe(2,arguments);var n=Oe(e),r=n*7;return Bo(t,r)}function _r(t,e){pe(2,arguments);var n=be(t),r=Oe(e);if(isNaN(r))return new Date(NaN);if(!r)return n;var s=n.getDate(),i=new Date(n.getTime());i.setMonth(n.getMonth()+r+1,0);var o=i.getDate();return s>=o?i:(n.setFullYear(i.getFullYear(),i.getMonth(),s),n)}function EN(t,e){pe(2,arguments);var n=Oe(e),r=n*3;return _r(t,r)}function bo(t,e){pe(2,arguments);var n=Oe(e);return _r(t,n*12)}function E6(t,e){pe(2,arguments);var n=Oe(e);return Bo(t,-n)}function Bb(t,e){pe(2,arguments);var n=Oe(e);return mh(t,-n)}function _o(t,e){pe(2,arguments);var n=Oe(e);return _r(t,-n)}function T6(t,e){pe(2,arguments);var n=Oe(e);return EN(t,-n)}function Ec(t,e){pe(2,arguments);var n=Oe(e);return bo(t,-n)}function Ub(t){pe(1,arguments);var e=be(t),n=e.getSeconds();return n}function zr(t){pe(1,arguments);var e=be(t),n=e.getMinutes();return n}function Br(t){pe(1,arguments);var e=be(t),n=e.getHours();return n}function P6(t){pe(1,arguments);var e=be(t),n=e.getDay();return n}function Hb(t){pe(1,arguments);var e=be(t),n=e.getDate();return n}function TN(t,e){var n,r,s,i,o,l,d,u;pe(1,arguments);var p=fa(),f=Oe((n=(r=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:p.weekStartsOn)!==null&&r!==void 0?r:(d=p.locale)===null||d===void 0||(u=d.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var x=be(t),g=x.getDay(),v=(g<f?7:0)+g-f;return x.setDate(x.getDate()-v),x.setHours(0,0,0,0),x}function gh(t){return pe(1,arguments),TN(t,{weekStartsOn:1})}function D6(t){pe(1,arguments);var e=be(t),n=e.getFullYear(),r=new Date(0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);var s=gh(r),i=new Date(0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);var o=gh(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function O6(t){pe(1,arguments);var e=D6(t),n=new Date(0);n.setFullYear(e,0,4),n.setHours(0,0,0,0);var r=gh(n);return r}var M6=6048e5;function L6(t){pe(1,arguments);var e=be(t),n=gh(e).getTime()-O6(e).getTime();return Math.round(n/M6)+1}function sn(t){pe(1,arguments);var e=be(t),n=e.getMonth();return n}function Ka(t){pe(1,arguments);var e=be(t),n=Math.floor(e.getMonth()/3)+1;return n}function Le(t){return pe(1,arguments),be(t).getFullYear()}function Og(t){pe(1,arguments);var e=be(t),n=e.getTime();return n}function R6(t,e){pe(2,arguments);var n=be(t),r=Oe(e);return n.setSeconds(r),n}function Nu(t,e){pe(2,arguments);var n=be(t),r=Oe(e);return n.setMinutes(r),n}function ku(t,e){pe(2,arguments);var n=be(t),r=Oe(e);return n.setHours(r),n}function A6(t){pe(1,arguments);var e=be(t),n=e.getFullYear(),r=e.getMonth(),s=new Date(0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function un(t,e){pe(2,arguments);var n=be(t),r=Oe(e),s=n.getFullYear(),i=n.getDate(),o=new Date(0);o.setFullYear(s,r,15),o.setHours(0,0,0,0);var l=A6(o);return n.setMonth(r,Math.min(i,l)),n}function La(t,e){pe(2,arguments);var n=be(t),r=Oe(e),s=Math.floor(n.getMonth()/3)+1,i=r-s;return un(n,n.getMonth()+i*3)}function as(t,e){pe(2,arguments);var n=be(t),r=Oe(e);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(r),n)}function Wb(t){pe(1,arguments);var e;if(t&&typeof t.forEach=="function")e=t;else if(rr(t)==="object"&&t!==null)e=Array.prototype.slice.call(t);else return new Date(NaN);var n;return e.forEach(function(r){var s=be(r);(n===void 0||n>s||isNaN(s.getDate()))&&(n=s)}),n||new Date(NaN)}function Yb(t){pe(1,arguments);var e;if(t&&typeof t.forEach=="function")e=t;else if(rr(t)==="object"&&t!==null)e=Array.prototype.slice.call(t);else return new Date(NaN);var n;return e.forEach(function(r){var s=be(r);(n===void 0||n<s||isNaN(Number(s)))&&(n=s)}),n||new Date(NaN)}function Ur(t){pe(1,arguments);var e=be(t);return e.setHours(0,0,0,0),e}var I6=864e5;function xh(t,e){pe(2,arguments);var n=Ur(t),r=Ur(e),s=n.getTime()-ph(n),i=r.getTime()-ph(r);return Math.round((s-i)/I6)}function vh(t,e){pe(2,arguments);var n=be(t),r=be(e),s=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return s*12+i}function yh(t,e){pe(2,arguments);var n=be(t),r=be(e);return n.getFullYear()-r.getFullYear()}function PN(t){pe(1,arguments);var e=be(t);return e.setDate(1),e.setHours(0,0,0,0),e}function Mg(t){pe(1,arguments);var e=be(t),n=e.getMonth(),r=n-n%3;return e.setMonth(r,1),e.setHours(0,0,0,0),e}function DN(t){pe(1,arguments);var e=be(t),n=new Date(0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Lg(t){pe(1,arguments);var e=be(t);return e.setHours(23,59,59,999),e}function F6(t){pe(1,arguments);var e=be(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function $6(t){pe(1,arguments);var e=be(t),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}function z6(t,e){pe(2,arguments);var n=be(t),r=be(e);return n.getTime()===r.getTime()}function B6(t,e){pe(2,arguments);var n=Ur(t),r=Ur(e);return n.getTime()===r.getTime()}function U6(t,e){pe(2,arguments);var n=be(t),r=be(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function H6(t,e){pe(2,arguments);var n=be(t),r=be(e);return n.getFullYear()===r.getFullYear()}function W6(t,e){pe(2,arguments);var n=Mg(t),r=Mg(e);return n.getTime()===r.getTime()}function ai(t,e){pe(2,arguments);var n=be(t),r=be(e);return n.getTime()>r.getTime()}function Ws(t,e){pe(2,arguments);var n=be(t),r=be(e);return n.getTime()<r.getTime()}function Tc(t,e){pe(2,arguments);var n=be(t).getTime(),r=be(e.start).getTime(),s=be(e.end).getTime();if(!(r<=s))throw new RangeError("Invalid interval");return n>=r&&n<=s}function Vb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Y6(t,e){if(t){if(typeof t=="string")return Vb(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vb(t,e):void 0}}function qb(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Y6(t))||e){n&&(t=n);var r=0,s=function(){};return{s,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,o=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return o=u.done,u},e:function(u){l=!0,i=u},f:function(){try{o||n.return==null||n.return()}finally{if(l)throw i}}}}function V6(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function xe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rg(t,e){return Rg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Rg(t,e)}function Ue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rg(t,e)}function bh(t){return bh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bh(t)}function ON(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ON=function(){return!!t})()}function q6(t,e){if(e&&(rr(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xe(t)}function He(t){var e=ON();return function(){var n,r=bh(t);if(e){var s=bh(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return q6(this,n)}}function Ie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z6(t,e){if(rr(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MN(t){var e=Z6(t,"string");return rr(e)=="symbol"?e:e+""}function K6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,MN(r.key),r)}}function Fe(t,e,n){return e&&K6(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function fe(t,e,n){return(e=MN(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var G6=10,LN=function(){function t(){Ie(this,t),fe(this,"priority",void 0),fe(this,"subPriority",0)}return Fe(t,[{key:"validate",value:function(n,r){return!0}}]),t}(),Q6=function(t){Ue(n,t);var e=He(n);function n(r,s,i,o,l){var d;return Ie(this,n),d=e.call(this),d.value=r,d.validateValue=s,d.setValue=i,d.priority=o,l&&(d.subPriority=l),d}return Fe(n,[{key:"validate",value:function(s,i){return this.validateValue(s,this.value,i)}},{key:"set",value:function(s,i,o){return this.setValue(s,i,this.value,o)}}]),n}(LN),X6=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",G6),fe(xe(r),"subPriority",-1),r}return Fe(n,[{key:"set",value:function(s,i){if(i.timestampIsSet)return s;var o=new Date(0);return o.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),o.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),o}}]),n}(LN),qe=function(){function t(){Ie(this,t),fe(this,"incompatibleTokens",void 0),fe(this,"priority",void 0),fe(this,"subPriority",void 0)}return Fe(t,[{key:"run",value:function(n,r,s,i){var o=this.parse(n,r,s,i);return o?{setter:new Q6(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}},{key:"validate",value:function(n,r,s){return!0}}]),t}(),J6=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",140),fe(xe(r),"incompatibleTokens",["R","u","t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i,o){switch(i){case"G":case"GG":case"GGG":return o.era(s,{width:"abbreviated"})||o.era(s,{width:"narrow"});case"GGGGG":return o.era(s,{width:"narrow"});case"GGGG":default:return o.era(s,{width:"wide"})||o.era(s,{width:"abbreviated"})||o.era(s,{width:"narrow"})}}},{key:"set",value:function(s,i,o){return i.era=o,s.setUTCFullYear(o,0,1),s.setUTCHours(0,0,0,0),s}}]),n}(qe),hv=6e4,pv=36e5,eR=1e3,Nt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Ar={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function kt(t,e){return t&&{value:e(t.value),rest:t.rest}}function gt(t,e){var n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function Ir(t,e){var n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};var r=n[1]==="+"?1:-1,s=n[2]?parseInt(n[2],10):0,i=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(s*pv+i*hv+o*eR),rest:e.slice(n[0].length)}}function RN(t){return gt(Nt.anyDigitsSigned,t)}function bt(t,e){switch(t){case 1:return gt(Nt.singleDigit,e);case 2:return gt(Nt.twoDigits,e);case 3:return gt(Nt.threeDigits,e);case 4:return gt(Nt.fourDigits,e);default:return gt(new RegExp("^\\d{1,"+t+"}"),e)}}function _h(t,e){switch(t){case 1:return gt(Nt.singleDigitSigned,e);case 2:return gt(Nt.twoDigitsSigned,e);case 3:return gt(Nt.threeDigitsSigned,e);case 4:return gt(Nt.fourDigitsSigned,e);default:return gt(new RegExp("^-?\\d{1,"+t+"}"),e)}}function fv(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function AN(t,e){var n=e>0,r=n?e:1-e,s;if(r<=50)s=t||100;else{var i=r+50,o=Math.floor(i/100)*100,l=t>=i%100;s=t+o-(l?100:0)}return n?s:1-s}function IN(t){return t%400===0||t%4===0&&t%100!==0}var tR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",130),fe(xe(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i,o){var l=function(u){return{year:u,isTwoDigitYear:i==="yy"}};switch(i){case"y":return kt(bt(4,s),l);case"yo":return kt(o.ordinalNumber(s,{unit:"year"}),l);default:return kt(bt(i.length,s),l)}}},{key:"validate",value:function(s,i){return i.isTwoDigitYear||i.year>0}},{key:"set",value:function(s,i,o){var l=s.getUTCFullYear();if(o.isTwoDigitYear){var d=AN(o.year,l);return s.setUTCFullYear(d,0,1),s.setUTCHours(0,0,0,0),s}var u=!("era"in i)||i.era===1?o.year:1-o.year;return s.setUTCFullYear(u,0,1),s.setUTCHours(0,0,0,0),s}}]),n}(qe),nR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",130),fe(xe(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i,o){var l=function(u){return{year:u,isTwoDigitYear:i==="YY"}};switch(i){case"Y":return kt(bt(4,s),l);case"Yo":return kt(o.ordinalNumber(s,{unit:"year"}),l);default:return kt(bt(i.length,s),l)}}},{key:"validate",value:function(s,i){return i.isTwoDigitYear||i.year>0}},{key:"set",value:function(s,i,o,l){var d=uv(s,l);if(o.isTwoDigitYear){var u=AN(o.year,d);return s.setUTCFullYear(u,0,l.firstWeekContainsDate),s.setUTCHours(0,0,0,0),ia(s,l)}var p=!("era"in i)||i.era===1?o.year:1-o.year;return s.setUTCFullYear(p,0,l.firstWeekContainsDate),s.setUTCHours(0,0,0,0),ia(s,l)}}]),n}(qe),rR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",130),fe(xe(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i){return _h(i==="R"?4:i.length,s)}},{key:"set",value:function(s,i,o){var l=new Date(0);return l.setUTCFullYear(o,0,4),l.setUTCHours(0,0,0,0),yo(l)}}]),n}(qe),sR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",130),fe(xe(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i){return _h(i==="u"?4:i.length,s)}},{key:"set",value:function(s,i,o){return s.setUTCFullYear(o,0,1),s.setUTCHours(0,0,0,0),s}}]),n}(qe),iR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",120),fe(xe(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i,o){switch(i){case"Q":case"QQ":return bt(i.length,s);case"Qo":return o.ordinalNumber(s,{unit:"quarter"});case"QQQ":return o.quarter(s,{width:"abbreviated",context:"formatting"})||o.quarter(s,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(s,{width:"wide",context:"formatting"})||o.quarter(s,{width:"abbreviated",context:"formatting"})||o.quarter(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,i){return i>=1&&i<=4}},{key:"set",value:function(s,i,o){return s.setUTCMonth((o-1)*3,1),s.setUTCHours(0,0,0,0),s}}]),n}(qe),aR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",120),fe(xe(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i,o){switch(i){case"q":case"qq":return bt(i.length,s);case"qo":return o.ordinalNumber(s,{unit:"quarter"});case"qqq":return o.quarter(s,{width:"abbreviated",context:"standalone"})||o.quarter(s,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(s,{width:"wide",context:"standalone"})||o.quarter(s,{width:"abbreviated",context:"standalone"})||o.quarter(s,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(s,i){return i>=1&&i<=4}},{key:"set",value:function(s,i,o){return s.setUTCMonth((o-1)*3,1),s.setUTCHours(0,0,0,0),s}}]),n}(qe),oR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),fe(xe(r),"priority",110),r}return Fe(n,[{key:"parse",value:function(s,i,o){var l=function(u){return u-1};switch(i){case"M":return kt(gt(Nt.month,s),l);case"MM":return kt(bt(2,s),l);case"Mo":return kt(o.ordinalNumber(s,{unit:"month"}),l);case"MMM":return o.month(s,{width:"abbreviated",context:"formatting"})||o.month(s,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(s,{width:"wide",context:"formatting"})||o.month(s,{width:"abbreviated",context:"formatting"})||o.month(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,i){return i>=0&&i<=11}},{key:"set",value:function(s,i,o){return s.setUTCMonth(o,1),s.setUTCHours(0,0,0,0),s}}]),n}(qe),lR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",110),fe(xe(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i,o){var l=function(u){return u-1};switch(i){case"L":return kt(gt(Nt.month,s),l);case"LL":return kt(bt(2,s),l);case"Lo":return kt(o.ordinalNumber(s,{unit:"month"}),l);case"LLL":return o.month(s,{width:"abbreviated",context:"standalone"})||o.month(s,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(s,{width:"wide",context:"standalone"})||o.month(s,{width:"abbreviated",context:"standalone"})||o.month(s,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(s,i){return i>=0&&i<=11}},{key:"set",value:function(s,i,o){return s.setUTCMonth(o,1),s.setUTCHours(0,0,0,0),s}}]),n}(qe);function cR(t,e,n){pe(2,arguments);var r=be(t),s=Oe(e),i=jN(r,n)-s;return r.setUTCDate(r.getUTCDate()-i*7),r}var dR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",100),fe(xe(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i,o){switch(i){case"w":return gt(Nt.week,s);case"wo":return o.ordinalNumber(s,{unit:"week"});default:return bt(i.length,s)}}},{key:"validate",value:function(s,i){return i>=1&&i<=53}},{key:"set",value:function(s,i,o,l){return ia(cR(s,o,l),l)}}]),n}(qe);function uR(t,e){pe(2,arguments);var n=be(t),r=Oe(e),s=wN(n)-r;return n.setUTCDate(n.getUTCDate()-s*7),n}var hR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",100),fe(xe(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i,o){switch(i){case"I":return gt(Nt.week,s);case"Io":return o.ordinalNumber(s,{unit:"week"});default:return bt(i.length,s)}}},{key:"validate",value:function(s,i){return i>=1&&i<=53}},{key:"set",value:function(s,i,o){return yo(uR(s,o))}}]),n}(qe),pR=[31,28,31,30,31,30,31,31,30,31,30,31],fR=[31,29,31,30,31,30,31,31,30,31,30,31],mR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",90),fe(xe(r),"subPriority",1),fe(xe(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i,o){switch(i){case"d":return gt(Nt.date,s);case"do":return o.ordinalNumber(s,{unit:"date"});default:return bt(i.length,s)}}},{key:"validate",value:function(s,i){var o=s.getUTCFullYear(),l=IN(o),d=s.getUTCMonth();return l?i>=1&&i<=fR[d]:i>=1&&i<=pR[d]}},{key:"set",value:function(s,i,o){return s.setUTCDate(o),s.setUTCHours(0,0,0,0),s}}]),n}(qe),gR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",90),fe(xe(r),"subpriority",1),fe(xe(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i,o){switch(i){case"D":case"DD":return gt(Nt.dayOfYear,s);case"Do":return o.ordinalNumber(s,{unit:"date"});default:return bt(i.length,s)}}},{key:"validate",value:function(s,i){var o=s.getUTCFullYear(),l=IN(o);return l?i>=1&&i<=366:i>=1&&i<=365}},{key:"set",value:function(s,i,o){return s.setUTCMonth(0,o),s.setUTCHours(0,0,0,0),s}}]),n}(qe);function mv(t,e,n){var r,s,i,o,l,d,u,p;pe(2,arguments);var f=fa(),x=Oe((r=(s=(i=(o=n==null?void 0:n.weekStartsOn)!==null&&o!==void 0?o:n==null||(l=n.locale)===null||l===void 0||(d=l.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&i!==void 0?i:f.weekStartsOn)!==null&&s!==void 0?s:(u=f.locale)===null||u===void 0||(p=u.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&r!==void 0?r:0);if(!(x>=0&&x<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=be(t),v=Oe(e),b=g.getUTCDay(),j=v%7,_=(j+7)%7,N=(_<x?7:0)+v-b;return g.setUTCDate(g.getUTCDate()+N),g}var xR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",90),fe(xe(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i,o){switch(i){case"E":case"EE":case"EEE":return o.day(s,{width:"abbreviated",context:"formatting"})||o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(s,{width:"wide",context:"formatting"})||o.day(s,{width:"abbreviated",context:"formatting"})||o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,i){return i>=0&&i<=6}},{key:"set",value:function(s,i,o,l){return s=mv(s,o,l),s.setUTCHours(0,0,0,0),s}}]),n}(qe),vR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",90),fe(xe(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i,o,l){var d=function(p){var f=Math.floor((p-1)/7)*7;return(p+l.weekStartsOn+6)%7+f};switch(i){case"e":case"ee":return kt(bt(i.length,s),d);case"eo":return kt(o.ordinalNumber(s,{unit:"day"}),d);case"eee":return o.day(s,{width:"abbreviated",context:"formatting"})||o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"});case"eeeee":return o.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(s,{width:"wide",context:"formatting"})||o.day(s,{width:"abbreviated",context:"formatting"})||o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,i){return i>=0&&i<=6}},{key:"set",value:function(s,i,o,l){return s=mv(s,o,l),s.setUTCHours(0,0,0,0),s}}]),n}(qe),yR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",90),fe(xe(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i,o,l){var d=function(p){var f=Math.floor((p-1)/7)*7;return(p+l.weekStartsOn+6)%7+f};switch(i){case"c":case"cc":return kt(bt(i.length,s),d);case"co":return kt(o.ordinalNumber(s,{unit:"day"}),d);case"ccc":return o.day(s,{width:"abbreviated",context:"standalone"})||o.day(s,{width:"short",context:"standalone"})||o.day(s,{width:"narrow",context:"standalone"});case"ccccc":return o.day(s,{width:"narrow",context:"standalone"});case"cccccc":return o.day(s,{width:"short",context:"standalone"})||o.day(s,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(s,{width:"wide",context:"standalone"})||o.day(s,{width:"abbreviated",context:"standalone"})||o.day(s,{width:"short",context:"standalone"})||o.day(s,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(s,i){return i>=0&&i<=6}},{key:"set",value:function(s,i,o,l){return s=mv(s,o,l),s.setUTCHours(0,0,0,0),s}}]),n}(qe);function bR(t,e){pe(2,arguments);var n=Oe(e);n%7===0&&(n=n-7);var r=1,s=be(t),i=s.getUTCDay(),o=n%7,l=(o+7)%7,d=(l<r?7:0)+n-i;return s.setUTCDate(s.getUTCDate()+d),s}var _R=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",90),fe(xe(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i,o){var l=function(u){return u===0?7:u};switch(i){case"i":case"ii":return bt(i.length,s);case"io":return o.ordinalNumber(s,{unit:"day"});case"iii":return kt(o.day(s,{width:"abbreviated",context:"formatting"})||o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"}),l);case"iiiii":return kt(o.day(s,{width:"narrow",context:"formatting"}),l);case"iiiiii":return kt(o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"}),l);case"iiii":default:return kt(o.day(s,{width:"wide",context:"formatting"})||o.day(s,{width:"abbreviated",context:"formatting"})||o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"}),l)}}},{key:"validate",value:function(s,i){return i>=1&&i<=7}},{key:"set",value:function(s,i,o){return s=bR(s,o),s.setUTCHours(0,0,0,0),s}}]),n}(qe),wR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",80),fe(xe(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i,o){switch(i){case"a":case"aa":case"aaa":return o.dayPeriod(s,{width:"abbreviated",context:"formatting"})||o.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(s,{width:"wide",context:"formatting"})||o.dayPeriod(s,{width:"abbreviated",context:"formatting"})||o.dayPeriod(s,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(s,i,o){return s.setUTCHours(fv(o),0,0,0),s}}]),n}(qe),jR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",80),fe(xe(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i,o){switch(i){case"b":case"bb":case"bbb":return o.dayPeriod(s,{width:"abbreviated",context:"formatting"})||o.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(s,{width:"wide",context:"formatting"})||o.dayPeriod(s,{width:"abbreviated",context:"formatting"})||o.dayPeriod(s,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(s,i,o){return s.setUTCHours(fv(o),0,0,0),s}}]),n}(qe),NR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",80),fe(xe(r),"incompatibleTokens",["a","b","t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i,o){switch(i){case"B":case"BB":case"BBB":return o.dayPeriod(s,{width:"abbreviated",context:"formatting"})||o.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(s,{width:"wide",context:"formatting"})||o.dayPeriod(s,{width:"abbreviated",context:"formatting"})||o.dayPeriod(s,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(s,i,o){return s.setUTCHours(fv(o),0,0,0),s}}]),n}(qe),kR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",70),fe(xe(r),"incompatibleTokens",["H","K","k","t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i,o){switch(i){case"h":return gt(Nt.hour12h,s);case"ho":return o.ordinalNumber(s,{unit:"hour"});default:return bt(i.length,s)}}},{key:"validate",value:function(s,i){return i>=1&&i<=12}},{key:"set",value:function(s,i,o){var l=s.getUTCHours()>=12;return l&&o<12?s.setUTCHours(o+12,0,0,0):!l&&o===12?s.setUTCHours(0,0,0,0):s.setUTCHours(o,0,0,0),s}}]),n}(qe),SR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",70),fe(xe(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i,o){switch(i){case"H":return gt(Nt.hour23h,s);case"Ho":return o.ordinalNumber(s,{unit:"hour"});default:return bt(i.length,s)}}},{key:"validate",value:function(s,i){return i>=0&&i<=23}},{key:"set",value:function(s,i,o){return s.setUTCHours(o,0,0,0),s}}]),n}(qe),CR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",70),fe(xe(r),"incompatibleTokens",["h","H","k","t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i,o){switch(i){case"K":return gt(Nt.hour11h,s);case"Ko":return o.ordinalNumber(s,{unit:"hour"});default:return bt(i.length,s)}}},{key:"validate",value:function(s,i){return i>=0&&i<=11}},{key:"set",value:function(s,i,o){var l=s.getUTCHours()>=12;return l&&o<12?s.setUTCHours(o+12,0,0,0):s.setUTCHours(o,0,0,0),s}}]),n}(qe),ER=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",70),fe(xe(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i,o){switch(i){case"k":return gt(Nt.hour24h,s);case"ko":return o.ordinalNumber(s,{unit:"hour"});default:return bt(i.length,s)}}},{key:"validate",value:function(s,i){return i>=1&&i<=24}},{key:"set",value:function(s,i,o){var l=o<=24?o%24:o;return s.setUTCHours(l,0,0,0),s}}]),n}(qe),TR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",60),fe(xe(r),"incompatibleTokens",["t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i,o){switch(i){case"m":return gt(Nt.minute,s);case"mo":return o.ordinalNumber(s,{unit:"minute"});default:return bt(i.length,s)}}},{key:"validate",value:function(s,i){return i>=0&&i<=59}},{key:"set",value:function(s,i,o){return s.setUTCMinutes(o,0,0),s}}]),n}(qe),PR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",50),fe(xe(r),"incompatibleTokens",["t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i,o){switch(i){case"s":return gt(Nt.second,s);case"so":return o.ordinalNumber(s,{unit:"second"});default:return bt(i.length,s)}}},{key:"validate",value:function(s,i){return i>=0&&i<=59}},{key:"set",value:function(s,i,o){return s.setUTCSeconds(o,0),s}}]),n}(qe),DR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",30),fe(xe(r),"incompatibleTokens",["t","T"]),r}return Fe(n,[{key:"parse",value:function(s,i){var o=function(d){return Math.floor(d*Math.pow(10,-i.length+3))};return kt(bt(i.length,s),o)}},{key:"set",value:function(s,i,o){return s.setUTCMilliseconds(o),s}}]),n}(qe),OR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",10),fe(xe(r),"incompatibleTokens",["t","T","x"]),r}return Fe(n,[{key:"parse",value:function(s,i){switch(i){case"X":return Ir(Ar.basicOptionalMinutes,s);case"XX":return Ir(Ar.basic,s);case"XXXX":return Ir(Ar.basicOptionalSeconds,s);case"XXXXX":return Ir(Ar.extendedOptionalSeconds,s);case"XXX":default:return Ir(Ar.extended,s)}}},{key:"set",value:function(s,i,o){return i.timestampIsSet?s:new Date(s.getTime()-o)}}]),n}(qe),MR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",10),fe(xe(r),"incompatibleTokens",["t","T","X"]),r}return Fe(n,[{key:"parse",value:function(s,i){switch(i){case"x":return Ir(Ar.basicOptionalMinutes,s);case"xx":return Ir(Ar.basic,s);case"xxxx":return Ir(Ar.basicOptionalSeconds,s);case"xxxxx":return Ir(Ar.extendedOptionalSeconds,s);case"xxx":default:return Ir(Ar.extended,s)}}},{key:"set",value:function(s,i,o){return i.timestampIsSet?s:new Date(s.getTime()-o)}}]),n}(qe),LR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",40),fe(xe(r),"incompatibleTokens","*"),r}return Fe(n,[{key:"parse",value:function(s){return RN(s)}},{key:"set",value:function(s,i,o){return[new Date(o*1e3),{timestampIsSet:!0}]}}]),n}(qe),RR=function(t){Ue(n,t);var e=He(n);function n(){var r;Ie(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),fe(xe(r),"priority",20),fe(xe(r),"incompatibleTokens","*"),r}return Fe(n,[{key:"parse",value:function(s){return RN(s)}},{key:"set",value:function(s,i,o){return[new Date(o),{timestampIsSet:!0}]}}]),n}(qe),AR={G:new J6,y:new tR,Y:new nR,R:new rR,u:new sR,Q:new iR,q:new aR,M:new oR,L:new lR,w:new dR,I:new hR,d:new mR,D:new gR,E:new xR,e:new vR,c:new yR,i:new _R,a:new wR,b:new jR,B:new NR,h:new kR,H:new SR,K:new CR,k:new ER,m:new TR,s:new PR,S:new DR,X:new OR,x:new MR,t:new LR,T:new RR},IR=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,FR=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$R=/^'([^]*?)'?$/,zR=/''/g,BR=/\S/,UR=/[a-zA-Z]/;function Yf(t,e,n,r){var s,i,o,l,d,u,p,f,x,g,v,b,j,_,N,S,P,M;pe(3,arguments);var A=String(t),R=String(e),T=fa(),V=(s=(i=r==null?void 0:r.locale)!==null&&i!==void 0?i:T.locale)!==null&&s!==void 0?s:CN;if(!V.match)throw new RangeError("locale must contain match property");var D=Oe((o=(l=(d=(u=r==null?void 0:r.firstWeekContainsDate)!==null&&u!==void 0?u:r==null||(p=r.locale)===null||p===void 0||(f=p.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&d!==void 0?d:T.firstWeekContainsDate)!==null&&l!==void 0?l:(x=T.locale)===null||x===void 0||(g=x.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(D>=1&&D<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var U=Oe((v=(b=(j=(_=r==null?void 0:r.weekStartsOn)!==null&&_!==void 0?_:r==null||(N=r.locale)===null||N===void 0||(S=N.options)===null||S===void 0?void 0:S.weekStartsOn)!==null&&j!==void 0?j:T.weekStartsOn)!==null&&b!==void 0?b:(P=T.locale)===null||P===void 0||(M=P.options)===null||M===void 0?void 0:M.weekStartsOn)!==null&&v!==void 0?v:0);if(!(U>=0&&U<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(R==="")return A===""?be(n):new Date(NaN);var te={firstWeekContainsDate:D,weekStartsOn:U,locale:V},G=[new X6],B=R.match(FR).map(function(ve){var W=ve[0];if(W in Pg){var oe=Pg[W];return oe(ve,V.formatLong)}return ve}).join("").match(IR),Z=[],C=qb(B),q;try{var I=function(){var W=q.value;!(r!=null&&r.useAdditionalWeekYearTokens)&&SN(W)&&fh(W,R,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&kN(W)&&fh(W,R,t);var oe=W[0],he=AR[oe];if(he){var Se=he.incompatibleTokens;if(Array.isArray(Se)){var ae=Z.find(function(We){return Se.includes(We.token)||We.token===oe});if(ae)throw new RangeError("The format string mustn't contain `".concat(ae.fullToken,"` and `").concat(W,"` at the same time"))}else if(he.incompatibleTokens==="*"&&Z.length>0)throw new RangeError("The format string mustn't contain `".concat(W,"` and any other token at the same time"));Z.push({token:oe,fullToken:W});var ke=he.run(A,W,V.match,te);if(!ke)return{v:new Date(NaN)};G.push(ke.setter),A=ke.rest}else{if(oe.match(UR))throw new RangeError("Format string contains an unescaped latin alphabet character `"+oe+"`");if(W==="''"?W="'":oe==="'"&&(W=HR(W)),A.indexOf(W)===0)A=A.slice(W.length);else return{v:new Date(NaN)}}};for(C.s();!(q=C.n()).done;){var X=I();if(rr(X)==="object")return X.v}}catch(ve){C.e(ve)}finally{C.f()}if(A.length>0&&BR.test(A))return new Date(NaN);var E=G.map(function(ve){return ve.priority}).sort(function(ve,W){return W-ve}).filter(function(ve,W,oe){return oe.indexOf(ve)===W}).map(function(ve){return G.filter(function(W){return W.priority===ve}).sort(function(W,oe){return oe.subPriority-W.subPriority})}).map(function(ve){return ve[0]}),K=be(n);if(isNaN(K.getTime()))return new Date(NaN);var re=bN(K,ph(K)),Q={},se=qb(E),le;try{for(se.s();!(le=se.n()).done;){var ie=le.value;if(!ie.validate(re,te))return new Date(NaN);var ge=ie.set(re,Q,te);Array.isArray(ge)?(re=ge[0],V6(Q,ge[1])):re=ge}}catch(ve){se.e(ve)}finally{se.f()}return re}function HR(t){return t.match($R)[1].replace(zR,"'")}function WR(t,e){var n;pe(1,arguments);var r=Oe((n=void 0)!==null&&n!==void 0?n:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var s=ZR(t),i;if(s.date){var o=KR(s.date,r);i=GR(o.restDateString,o.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var l=i.getTime(),d=0,u;if(s.time&&(d=QR(s.time),isNaN(d)))return new Date(NaN);if(s.timezone){if(u=XR(s.timezone),isNaN(u))return new Date(NaN)}else{var p=new Date(l+d),f=new Date(0);return f.setFullYear(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate()),f.setHours(p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds(),p.getUTCMilliseconds()),f}return new Date(l+d+u)}var Yd={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},YR=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,VR=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,qR=/^([+-])(\d{2})(?::?(\d{2}))?$/;function ZR(t){var e={},n=t.split(Yd.dateTimeDelimiter),r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],Yd.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Yd.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){var s=Yd.timezone.exec(r);s?(e.time=r.replace(s[1],""),e.timezone=s[1]):e.time=r}return e}function KR(t,e){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};var s=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?s:i*100,restDateString:t.slice((r[1]||r[2]).length)}}function GR(t,e){if(e===null)return new Date(NaN);var n=t.match(YR);if(!n)return new Date(NaN);var r=!!n[4],s=xl(n[1]),i=xl(n[2])-1,o=xl(n[3]),l=xl(n[4]),d=xl(n[5])-1;if(r)return rA(e,l,d)?JR(e,l,d):new Date(NaN);var u=new Date(0);return!tA(e,i,o)||!nA(e,s)?new Date(NaN):(u.setUTCFullYear(e,i,Math.max(s,o)),u)}function xl(t){return t?parseInt(t):1}function QR(t){var e=t.match(VR);if(!e)return NaN;var n=Vf(e[1]),r=Vf(e[2]),s=Vf(e[3]);return sA(n,r,s)?n*pv+r*hv+s*1e3:NaN}function Vf(t){return t&&parseFloat(t.replace(",","."))||0}function XR(t){if(t==="Z")return 0;var e=t.match(qR);if(!e)return 0;var n=e[1]==="+"?-1:1,r=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return iA(r,s)?n*(r*pv+s*hv):NaN}function JR(t,e,n){var r=new Date(0);r.setUTCFullYear(t,0,4);var s=r.getUTCDay()||7,i=(e-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+i),r}var eA=[31,null,31,30,31,30,31,31,30,31,30,31];function FN(t){return t%400===0||t%4===0&&t%100!==0}function tA(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(eA[e]||(FN(t)?29:28))}function nA(t,e){return e>=1&&e<=(FN(t)?366:365)}function rA(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function sA(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function iA(t,e){return e>=0&&e<=59}function aA(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Ag(t,e)}function Ag(t,e){return Ag=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},Ag(t,e)}function oA(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Zb(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lA(t,e,n){return t===e?!0:t.correspondingElement?t.correspondingElement.classList.contains(n):t.classList.contains(n)}function cA(t,e,n){if(t===e)return!0;for(;t.parentNode||t.host;){if(t.parentNode&&lA(t,e,n))return!0;t=t.parentNode||t.host}return t}function dA(t){return document.documentElement.clientWidth<=t.clientX||document.documentElement.clientHeight<=t.clientY}var uA=function(){if(!(typeof window>"u"||typeof window.addEventListener!="function")){var e=!1,n=Object.defineProperty({},"passive",{get:function(){e=!0}}),r=function(){};return window.addEventListener("testPassiveEventSupport",r,n),window.removeEventListener("testPassiveEventSupport",r,n),e}};function hA(t){return t===void 0&&(t=0),function(){return++t}}var pA=hA(),Ig,Vd={},qf={},fA=["touchstart","touchmove"],mA="ignore-react-onclickoutside";function Kb(t,e){var n={},r=fA.indexOf(e)!==-1;return r&&Ig&&(n.passive=!t.props.preventDefault),n}function fp(t,e){var n,r,s=t.displayName||t.name||"Component";return r=n=function(i){aA(o,i);function o(d){var u;return u=i.call(this,d)||this,u.__outsideClickHandler=function(p){if(typeof u.__clickOutsideHandlerProp=="function"){u.__clickOutsideHandlerProp(p);return}var f=u.getInstance();if(typeof f.props.handleClickOutside=="function"){f.props.handleClickOutside(p);return}if(typeof f.handleClickOutside=="function"){f.handleClickOutside(p);return}throw new Error("WrappedComponent: "+s+" lacks a handleClickOutside(event) function for processing outside click events.")},u.__getComponentNode=function(){var p=u.getInstance();return typeof p.setClickOutsideRef=="function"?p.setClickOutsideRef():Wc.findDOMNode(p)},u.enableOnClickOutside=function(){if(!(typeof document>"u"||qf[u._uid])){typeof Ig>"u"&&(Ig=uA()),qf[u._uid]=!0;var p=u.props.eventTypes;p.forEach||(p=[p]),Vd[u._uid]=function(f){if(u.componentNode!==null&&!(u.initTimeStamp>f.timeStamp)&&(u.props.preventDefault&&f.preventDefault(),u.props.stopPropagation&&f.stopPropagation(),!(u.props.excludeScrollbar&&dA(f)))){var x=f.composed&&f.composedPath&&f.composedPath().shift()||f.target;cA(x,u.componentNode,u.props.outsideClickIgnoreClass)===document&&u.__outsideClickHandler(f)}},p.forEach(function(f){document.addEventListener(f,Vd[u._uid],Kb(Zb(u),f))})}},u.disableOnClickOutside=function(){delete qf[u._uid];var p=Vd[u._uid];if(p&&typeof document<"u"){var f=u.props.eventTypes;f.forEach||(f=[f]),f.forEach(function(x){return document.removeEventListener(x,p,Kb(Zb(u),x))}),delete Vd[u._uid]}},u.getRef=function(p){return u.instanceRef=p},u._uid=pA(),u.initTimeStamp=performance.now(),u}var l=o.prototype;return l.getInstance=function(){if(t.prototype&&!t.prototype.isReactComponent)return this;var u=this.instanceRef;return u.getInstance?u.getInstance():u},l.componentDidMount=function(){typeof document>"u"||!document.createElement||(this.getInstance(),this.componentNode=this.__getComponentNode(),!this.props.disableOnClickOutside&&this.enableOnClickOutside())},l.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},l.componentWillUnmount=function(){this.disableOnClickOutside()},l.render=function(){var u=this.props;u.excludeScrollbar;var p=oA(u,["excludeScrollbar"]);return t.prototype&&t.prototype.isReactComponent?p.ref=this.getRef:p.wrappedRef=this.getRef,p.disableOnClickOutside=this.disableOnClickOutside,p.enableOnClickOutside=this.enableOnClickOutside,w.createElement(t,p)},o}(w.Component),n.displayName="OnClickOutside("+s+")",n.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:!1,outsideClickIgnoreClass:mA,preventDefault:!1,stopPropagation:!1},n.getClass=function(){return t.getClass?t.getClass():t},r}var $N=w.createContext(),zN=w.createContext();function gA(t){var e=t.children,n=w.useState(null),r=n[0],s=n[1],i=w.useRef(!1);w.useEffect(function(){return function(){i.current=!0}},[]);var o=w.useCallback(function(l){i.current||s(l)},[]);return w.createElement($N.Provider,{value:r},w.createElement(zN.Provider,{value:o},e))}var BN=function(e){return Array.isArray(e)?e[0]:e},UN=function(e){if(typeof e=="function"){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return e.apply(void 0,r)}},Fg=function(e,n){if(typeof e=="function")return UN(e,n);e!=null&&(e.current=n)},Gb=function(e){return e.reduce(function(n,r){var s=r[0],i=r[1];return n[s]=i,n},{})},Qb=typeof window<"u"&&window.document&&window.document.createElement?w.useLayoutEffect:w.useEffect,Cn="top",sr="bottom",ir="right",En="left",gv="auto",Gc=[Cn,sr,ir,En],wo="start",Pc="end",xA="clippingParents",HN="viewport",vl="popper",vA="reference",Xb=Gc.reduce(function(t,e){return t.concat([e+"-"+wo,e+"-"+Pc])},[]),WN=[].concat(Gc,[gv]).reduce(function(t,e){return t.concat([e,e+"-"+wo,e+"-"+Pc])},[]),yA="beforeRead",bA="read",_A="afterRead",wA="beforeMain",jA="main",NA="afterMain",kA="beforeWrite",SA="write",CA="afterWrite",EA=[yA,bA,_A,wA,jA,NA,kA,SA,CA];function qr(t){return t?(t.nodeName||"").toLowerCase():null}function An(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function aa(t){var e=An(t).Element;return t instanceof e||t instanceof Element}function Jn(t){var e=An(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function xv(t){if(typeof ShadowRoot>"u")return!1;var e=An(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function TA(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},s=e.attributes[n]||{},i=e.elements[n];!Jn(i)||!qr(i)||(Object.assign(i.style,r),Object.keys(s).forEach(function(o){var l=s[o];l===!1?i.removeAttribute(o):i.setAttribute(o,l===!0?"":l)}))})}function PA(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],i=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),l=o.reduce(function(d,u){return d[u]="",d},{});!Jn(s)||!qr(s)||(Object.assign(s.style,l),Object.keys(i).forEach(function(d){s.removeAttribute(d)}))})}}const DA={name:"applyStyles",enabled:!0,phase:"write",fn:TA,effect:PA,requires:["computeStyles"]};function Hr(t){return t.split("-")[0]}var Zi=Math.max,wh=Math.min,jo=Math.round;function $g(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function YN(){return!/^((?!chrome|android).)*safari/i.test($g())}function No(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),s=1,i=1;e&&Jn(t)&&(s=t.offsetWidth>0&&jo(r.width)/t.offsetWidth||1,i=t.offsetHeight>0&&jo(r.height)/t.offsetHeight||1);var o=aa(t)?An(t):window,l=o.visualViewport,d=!YN()&&n,u=(r.left+(d&&l?l.offsetLeft:0))/s,p=(r.top+(d&&l?l.offsetTop:0))/i,f=r.width/s,x=r.height/i;return{width:f,height:x,top:p,right:u+f,bottom:p+x,left:u,x:u,y:p}}function vv(t){var e=No(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function VN(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&xv(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function vs(t){return An(t).getComputedStyle(t)}function OA(t){return["table","td","th"].indexOf(qr(t))>=0}function mi(t){return((aa(t)?t.ownerDocument:t.document)||window.document).documentElement}function mp(t){return qr(t)==="html"?t:t.assignedSlot||t.parentNode||(xv(t)?t.host:null)||mi(t)}function Jb(t){return!Jn(t)||vs(t).position==="fixed"?null:t.offsetParent}function MA(t){var e=/firefox/i.test($g()),n=/Trident/i.test($g());if(n&&Jn(t)){var r=vs(t);if(r.position==="fixed")return null}var s=mp(t);for(xv(s)&&(s=s.host);Jn(s)&&["html","body"].indexOf(qr(s))<0;){var i=vs(s);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return s;s=s.parentNode}return null}function Qc(t){for(var e=An(t),n=Jb(t);n&&OA(n)&&vs(n).position==="static";)n=Jb(n);return n&&(qr(n)==="html"||qr(n)==="body"&&vs(n).position==="static")?e:n||MA(t)||e}function yv(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Gl(t,e,n){return Zi(t,wh(e,n))}function LA(t,e,n){var r=Gl(t,e,n);return r>n?n:r}function qN(){return{top:0,right:0,bottom:0,left:0}}function ZN(t){return Object.assign({},qN(),t)}function KN(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var RA=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,ZN(typeof e!="number"?e:KN(e,Gc))};function AA(t){var e,n=t.state,r=t.name,s=t.options,i=n.elements.arrow,o=n.modifiersData.popperOffsets,l=Hr(n.placement),d=yv(l),u=[En,ir].indexOf(l)>=0,p=u?"height":"width";if(!(!i||!o)){var f=RA(s.padding,n),x=vv(i),g=d==="y"?Cn:En,v=d==="y"?sr:ir,b=n.rects.reference[p]+n.rects.reference[d]-o[d]-n.rects.popper[p],j=o[d]-n.rects.reference[d],_=Qc(i),N=_?d==="y"?_.clientHeight||0:_.clientWidth||0:0,S=b/2-j/2,P=f[g],M=N-x[p]-f[v],A=N/2-x[p]/2+S,R=Gl(P,A,M),T=d;n.modifiersData[r]=(e={},e[T]=R,e.centerOffset=R-A,e)}}function IA(t){var e=t.state,n=t.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||VN(e.elements.popper,s)&&(e.elements.arrow=s))}const FA={name:"arrow",enabled:!0,phase:"main",fn:AA,effect:IA,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ko(t){return t.split("-")[1]}var $A={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zA(t,e){var n=t.x,r=t.y,s=e.devicePixelRatio||1;return{x:jo(n*s)/s||0,y:jo(r*s)/s||0}}function e_(t){var e,n=t.popper,r=t.popperRect,s=t.placement,i=t.variation,o=t.offsets,l=t.position,d=t.gpuAcceleration,u=t.adaptive,p=t.roundOffsets,f=t.isFixed,x=o.x,g=x===void 0?0:x,v=o.y,b=v===void 0?0:v,j=typeof p=="function"?p({x:g,y:b}):{x:g,y:b};g=j.x,b=j.y;var _=o.hasOwnProperty("x"),N=o.hasOwnProperty("y"),S=En,P=Cn,M=window;if(u){var A=Qc(n),R="clientHeight",T="clientWidth";if(A===An(n)&&(A=mi(n),vs(A).position!=="static"&&l==="absolute"&&(R="scrollHeight",T="scrollWidth")),A=A,s===Cn||(s===En||s===ir)&&i===Pc){P=sr;var V=f&&A===M&&M.visualViewport?M.visualViewport.height:A[R];b-=V-r.height,b*=d?1:-1}if(s===En||(s===Cn||s===sr)&&i===Pc){S=ir;var D=f&&A===M&&M.visualViewport?M.visualViewport.width:A[T];g-=D-r.width,g*=d?1:-1}}var U=Object.assign({position:l},u&&$A),te=p===!0?zA({x:g,y:b},An(n)):{x:g,y:b};if(g=te.x,b=te.y,d){var G;return Object.assign({},U,(G={},G[P]=N?"0":"",G[S]=_?"0":"",G.transform=(M.devicePixelRatio||1)<=1?"translate("+g+"px, "+b+"px)":"translate3d("+g+"px, "+b+"px, 0)",G))}return Object.assign({},U,(e={},e[P]=N?b+"px":"",e[S]=_?g+"px":"",e.transform="",e))}function BA(t){var e=t.state,n=t.options,r=n.gpuAcceleration,s=r===void 0?!0:r,i=n.adaptive,o=i===void 0?!0:i,l=n.roundOffsets,d=l===void 0?!0:l,u={placement:Hr(e.placement),variation:ko(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,e_(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:d})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,e_(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const UA={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:BA,data:{}};var qd={passive:!0};function HA(t){var e=t.state,n=t.instance,r=t.options,s=r.scroll,i=s===void 0?!0:s,o=r.resize,l=o===void 0?!0:o,d=An(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&u.forEach(function(p){p.addEventListener("scroll",n.update,qd)}),l&&d.addEventListener("resize",n.update,qd),function(){i&&u.forEach(function(p){p.removeEventListener("scroll",n.update,qd)}),l&&d.removeEventListener("resize",n.update,qd)}}const WA={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:HA,data:{}};var YA={left:"right",right:"left",bottom:"top",top:"bottom"};function Su(t){return t.replace(/left|right|bottom|top/g,function(e){return YA[e]})}var VA={start:"end",end:"start"};function t_(t){return t.replace(/start|end/g,function(e){return VA[e]})}function bv(t){var e=An(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function _v(t){return No(mi(t)).left+bv(t).scrollLeft}function qA(t,e){var n=An(t),r=mi(t),s=n.visualViewport,i=r.clientWidth,o=r.clientHeight,l=0,d=0;if(s){i=s.width,o=s.height;var u=YN();(u||!u&&e==="fixed")&&(l=s.offsetLeft,d=s.offsetTop)}return{width:i,height:o,x:l+_v(t),y:d}}function ZA(t){var e,n=mi(t),r=bv(t),s=(e=t.ownerDocument)==null?void 0:e.body,i=Zi(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=Zi(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),l=-r.scrollLeft+_v(t),d=-r.scrollTop;return vs(s||n).direction==="rtl"&&(l+=Zi(n.clientWidth,s?s.clientWidth:0)-i),{width:i,height:o,x:l,y:d}}function wv(t){var e=vs(t),n=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function GN(t){return["html","body","#document"].indexOf(qr(t))>=0?t.ownerDocument.body:Jn(t)&&wv(t)?t:GN(mp(t))}function Ql(t,e){var n;e===void 0&&(e=[]);var r=GN(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=An(r),o=s?[i].concat(i.visualViewport||[],wv(r)?r:[]):r,l=e.concat(o);return s?l:l.concat(Ql(mp(o)))}function zg(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function KA(t,e){var n=No(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function n_(t,e,n){return e===HN?zg(qA(t,n)):aa(e)?KA(e,n):zg(ZA(mi(t)))}function GA(t){var e=Ql(mp(t)),n=["absolute","fixed"].indexOf(vs(t).position)>=0,r=n&&Jn(t)?Qc(t):t;return aa(r)?e.filter(function(s){return aa(s)&&VN(s,r)&&qr(s)!=="body"}):[]}function QA(t,e,n,r){var s=e==="clippingParents"?GA(t):[].concat(e),i=[].concat(s,[n]),o=i[0],l=i.reduce(function(d,u){var p=n_(t,u,r);return d.top=Zi(p.top,d.top),d.right=wh(p.right,d.right),d.bottom=wh(p.bottom,d.bottom),d.left=Zi(p.left,d.left),d},n_(t,o,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function QN(t){var e=t.reference,n=t.element,r=t.placement,s=r?Hr(r):null,i=r?ko(r):null,o=e.x+e.width/2-n.width/2,l=e.y+e.height/2-n.height/2,d;switch(s){case Cn:d={x:o,y:e.y-n.height};break;case sr:d={x:o,y:e.y+e.height};break;case ir:d={x:e.x+e.width,y:l};break;case En:d={x:e.x-n.width,y:l};break;default:d={x:e.x,y:e.y}}var u=s?yv(s):null;if(u!=null){var p=u==="y"?"height":"width";switch(i){case wo:d[u]=d[u]-(e[p]/2-n[p]/2);break;case Pc:d[u]=d[u]+(e[p]/2-n[p]/2);break}}return d}function Dc(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=r===void 0?t.placement:r,i=n.strategy,o=i===void 0?t.strategy:i,l=n.boundary,d=l===void 0?xA:l,u=n.rootBoundary,p=u===void 0?HN:u,f=n.elementContext,x=f===void 0?vl:f,g=n.altBoundary,v=g===void 0?!1:g,b=n.padding,j=b===void 0?0:b,_=ZN(typeof j!="number"?j:KN(j,Gc)),N=x===vl?vA:vl,S=t.rects.popper,P=t.elements[v?N:x],M=QA(aa(P)?P:P.contextElement||mi(t.elements.popper),d,p,o),A=No(t.elements.reference),R=QN({reference:A,element:S,placement:s}),T=zg(Object.assign({},S,R)),V=x===vl?T:A,D={top:M.top-V.top+_.top,bottom:V.bottom-M.bottom+_.bottom,left:M.left-V.left+_.left,right:V.right-M.right+_.right},U=t.modifiersData.offset;if(x===vl&&U){var te=U[s];Object.keys(D).forEach(function(G){var B=[ir,sr].indexOf(G)>=0?1:-1,Z=[Cn,sr].indexOf(G)>=0?"y":"x";D[G]+=te[Z]*B})}return D}function XA(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=n.boundary,i=n.rootBoundary,o=n.padding,l=n.flipVariations,d=n.allowedAutoPlacements,u=d===void 0?WN:d,p=ko(r),f=p?l?Xb:Xb.filter(function(v){return ko(v)===p}):Gc,x=f.filter(function(v){return u.indexOf(v)>=0});x.length===0&&(x=f);var g=x.reduce(function(v,b){return v[b]=Dc(t,{placement:b,boundary:s,rootBoundary:i,padding:o})[Hr(b)],v},{});return Object.keys(g).sort(function(v,b){return g[v]-g[b]})}function JA(t){if(Hr(t)===gv)return[];var e=Su(t);return[t_(t),e,t_(e)]}function eI(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var s=n.mainAxis,i=s===void 0?!0:s,o=n.altAxis,l=o===void 0?!0:o,d=n.fallbackPlacements,u=n.padding,p=n.boundary,f=n.rootBoundary,x=n.altBoundary,g=n.flipVariations,v=g===void 0?!0:g,b=n.allowedAutoPlacements,j=e.options.placement,_=Hr(j),N=_===j,S=d||(N||!v?[Su(j)]:JA(j)),P=[j].concat(S).reduce(function(se,le){return se.concat(Hr(le)===gv?XA(e,{placement:le,boundary:p,rootBoundary:f,padding:u,flipVariations:v,allowedAutoPlacements:b}):le)},[]),M=e.rects.reference,A=e.rects.popper,R=new Map,T=!0,V=P[0],D=0;D<P.length;D++){var U=P[D],te=Hr(U),G=ko(U)===wo,B=[Cn,sr].indexOf(te)>=0,Z=B?"width":"height",C=Dc(e,{placement:U,boundary:p,rootBoundary:f,altBoundary:x,padding:u}),q=B?G?ir:En:G?sr:Cn;M[Z]>A[Z]&&(q=Su(q));var I=Su(q),X=[];if(i&&X.push(C[te]<=0),l&&X.push(C[q]<=0,C[I]<=0),X.every(function(se){return se})){V=U,T=!1;break}R.set(U,X)}if(T)for(var E=v?3:1,K=function(le){var ie=P.find(function(ge){var ve=R.get(ge);if(ve)return ve.slice(0,le).every(function(W){return W})});if(ie)return V=ie,"break"},re=E;re>0;re--){var Q=K(re);if(Q==="break")break}e.placement!==V&&(e.modifiersData[r]._skip=!0,e.placement=V,e.reset=!0)}}const tI={name:"flip",enabled:!0,phase:"main",fn:eI,requiresIfExists:["offset"],data:{_skip:!1}};function r_(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function s_(t){return[Cn,ir,sr,En].some(function(e){return t[e]>=0})}function nI(t){var e=t.state,n=t.name,r=e.rects.reference,s=e.rects.popper,i=e.modifiersData.preventOverflow,o=Dc(e,{elementContext:"reference"}),l=Dc(e,{altBoundary:!0}),d=r_(o,r),u=r_(l,s,i),p=s_(d),f=s_(u);e.modifiersData[n]={referenceClippingOffsets:d,popperEscapeOffsets:u,isReferenceHidden:p,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":f})}const rI={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:nI};function sI(t,e,n){var r=Hr(t),s=[En,Cn].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=i[0],l=i[1];return o=o||0,l=(l||0)*s,[En,ir].indexOf(r)>=0?{x:l,y:o}:{x:o,y:l}}function iI(t){var e=t.state,n=t.options,r=t.name,s=n.offset,i=s===void 0?[0,0]:s,o=WN.reduce(function(p,f){return p[f]=sI(f,e.rects,i),p},{}),l=o[e.placement],d=l.x,u=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=d,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=o}const aI={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:iI};function oI(t){var e=t.state,n=t.name;e.modifiersData[n]=QN({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const lI={name:"popperOffsets",enabled:!0,phase:"read",fn:oI,data:{}};function cI(t){return t==="x"?"y":"x"}function dI(t){var e=t.state,n=t.options,r=t.name,s=n.mainAxis,i=s===void 0?!0:s,o=n.altAxis,l=o===void 0?!1:o,d=n.boundary,u=n.rootBoundary,p=n.altBoundary,f=n.padding,x=n.tether,g=x===void 0?!0:x,v=n.tetherOffset,b=v===void 0?0:v,j=Dc(e,{boundary:d,rootBoundary:u,padding:f,altBoundary:p}),_=Hr(e.placement),N=ko(e.placement),S=!N,P=yv(_),M=cI(P),A=e.modifiersData.popperOffsets,R=e.rects.reference,T=e.rects.popper,V=typeof b=="function"?b(Object.assign({},e.rects,{placement:e.placement})):b,D=typeof V=="number"?{mainAxis:V,altAxis:V}:Object.assign({mainAxis:0,altAxis:0},V),U=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,te={x:0,y:0};if(A){if(i){var G,B=P==="y"?Cn:En,Z=P==="y"?sr:ir,C=P==="y"?"height":"width",q=A[P],I=q+j[B],X=q-j[Z],E=g?-T[C]/2:0,K=N===wo?R[C]:T[C],re=N===wo?-T[C]:-R[C],Q=e.elements.arrow,se=g&&Q?vv(Q):{width:0,height:0},le=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:qN(),ie=le[B],ge=le[Z],ve=Gl(0,R[C],se[C]),W=S?R[C]/2-E-ve-ie-D.mainAxis:K-ve-ie-D.mainAxis,oe=S?-R[C]/2+E+ve+ge+D.mainAxis:re+ve+ge+D.mainAxis,he=e.elements.arrow&&Qc(e.elements.arrow),Se=he?P==="y"?he.clientTop||0:he.clientLeft||0:0,ae=(G=U==null?void 0:U[P])!=null?G:0,ke=q+W-ae-Se,We=q+oe-ae,ht=Gl(g?wh(I,ke):I,q,g?Zi(X,We):X);A[P]=ht,te[P]=ht-q}if(l){var Lt,Vt=P==="x"?Cn:En,Jt=P==="x"?sr:ir,_t=A[M],Tn=M==="y"?"height":"width",gi=_t+j[Vt],xi=_t-j[Jt],ue=[Cn,En].indexOf(_)!==-1,je=(Lt=U==null?void 0:U[M])!=null?Lt:0,Qe=ue?gi:_t-R[Tn]-T[Tn]-je+D.altAxis,lt=ue?_t+R[Tn]+T[Tn]-je-D.altAxis:xi,Dt=g&&ue?LA(Qe,_t,lt):Gl(g?Qe:gi,_t,g?lt:xi);A[M]=Dt,te[M]=Dt-_t}e.modifiersData[r]=te}}const uI={name:"preventOverflow",enabled:!0,phase:"main",fn:dI,requiresIfExists:["offset"]};function hI(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function pI(t){return t===An(t)||!Jn(t)?bv(t):hI(t)}function fI(t){var e=t.getBoundingClientRect(),n=jo(e.width)/t.offsetWidth||1,r=jo(e.height)/t.offsetHeight||1;return n!==1||r!==1}function mI(t,e,n){n===void 0&&(n=!1);var r=Jn(e),s=Jn(e)&&fI(e),i=mi(e),o=No(t,s,n),l={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(r||!r&&!n)&&((qr(e)!=="body"||wv(i))&&(l=pI(e)),Jn(e)?(d=No(e,!0),d.x+=e.clientLeft,d.y+=e.clientTop):i&&(d.x=_v(i))),{x:o.left+l.scrollLeft-d.x,y:o.top+l.scrollTop-d.y,width:o.width,height:o.height}}function gI(t){var e=new Map,n=new Set,r=[];t.forEach(function(i){e.set(i.name,i)});function s(i){n.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(l){if(!n.has(l)){var d=e.get(l);d&&s(d)}}),r.push(i)}return t.forEach(function(i){n.has(i.name)||s(i)}),r}function xI(t){var e=gI(t);return EA.reduce(function(n,r){return n.concat(e.filter(function(s){return s.phase===r}))},[])}function vI(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function yI(t){var e=t.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var i_={placement:"bottom",modifiers:[],strategy:"absolute"};function a_(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function bI(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,s=e.defaultOptions,i=s===void 0?i_:s;return function(l,d,u){u===void 0&&(u=i);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},i_,i),modifiersData:{},elements:{reference:l,popper:d},attributes:{},styles:{}},f=[],x=!1,g={state:p,setOptions:function(_){var N=typeof _=="function"?_(p.options):_;b(),p.options=Object.assign({},i,p.options,N),p.scrollParents={reference:aa(l)?Ql(l):l.contextElement?Ql(l.contextElement):[],popper:Ql(d)};var S=xI(yI([].concat(r,p.options.modifiers)));return p.orderedModifiers=S.filter(function(P){return P.enabled}),v(),g.update()},forceUpdate:function(){if(!x){var _=p.elements,N=_.reference,S=_.popper;if(a_(N,S)){p.rects={reference:mI(N,Qc(S),p.options.strategy==="fixed"),popper:vv(S)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(D){return p.modifiersData[D.name]=Object.assign({},D.data)});for(var P=0;P<p.orderedModifiers.length;P++){if(p.reset===!0){p.reset=!1,P=-1;continue}var M=p.orderedModifiers[P],A=M.fn,R=M.options,T=R===void 0?{}:R,V=M.name;typeof A=="function"&&(p=A({state:p,options:T,name:V,instance:g})||p)}}}},update:vI(function(){return new Promise(function(j){g.forceUpdate(),j(p)})}),destroy:function(){b(),x=!0}};if(!a_(l,d))return g;g.setOptions(u).then(function(j){!x&&u.onFirstUpdate&&u.onFirstUpdate(j)});function v(){p.orderedModifiers.forEach(function(j){var _=j.name,N=j.options,S=N===void 0?{}:N,P=j.effect;if(typeof P=="function"){var M=P({state:p,name:_,instance:g,options:S}),A=function(){};f.push(M||A)}})}function b(){f.forEach(function(j){return j()}),f=[]}return g}}var _I=[WA,lI,UA,DA,aI,tI,uI,FA,rI],wI=bI({defaultModifiers:_I}),jI=typeof Element<"u",NI=typeof Map=="function",kI=typeof Set=="function",SI=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Cu(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Cu(t[r],e[r]))return!1;return!0}var i;if(NI&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;for(i=t.entries();!(r=i.next()).done;)if(!Cu(r.value[1],e.get(r.value[0])))return!1;return!0}if(kI&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(SI&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;if(jI&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((s[r]==="_owner"||s[r]==="__v"||s[r]==="__o")&&t.$$typeof)&&!Cu(t[s[r]],e[s[r]]))return!1;return!0}return t!==t&&e!==e}var CI=function(e,n){try{return Cu(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const EI=ys(CI);var TI=[],PI=function(e,n,r){r===void 0&&(r={});var s=w.useRef(null),i={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||TI},o=w.useState({styles:{popper:{position:i.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),l=o[0],d=o[1],u=w.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(g){var v=g.state,b=Object.keys(v.elements);Wc.flushSync(function(){d({styles:Gb(b.map(function(j){return[j,v.styles[j]||{}]})),attributes:Gb(b.map(function(j){return[j,v.attributes[j]]}))})})},requires:["computeStyles"]}},[]),p=w.useMemo(function(){var x={onFirstUpdate:i.onFirstUpdate,placement:i.placement,strategy:i.strategy,modifiers:[].concat(i.modifiers,[u,{name:"applyStyles",enabled:!1}])};return EI(s.current,x)?s.current||x:(s.current=x,x)},[i.onFirstUpdate,i.placement,i.strategy,i.modifiers,u]),f=w.useRef();return Qb(function(){f.current&&f.current.setOptions(p)},[p]),Qb(function(){if(!(e==null||n==null)){var x=r.createPopper||wI,g=x(e,n,p);return f.current=g,function(){g.destroy(),f.current=null}}},[e,n,r.createPopper]),{state:f.current?f.current.state:null,styles:l.styles,attributes:l.attributes,update:f.current?f.current.update:null,forceUpdate:f.current?f.current.forceUpdate:null}},DI=function(){},OI=function(){return Promise.resolve(null)},MI=[];function LI(t){var e=t.placement,n=e===void 0?"bottom":e,r=t.strategy,s=r===void 0?"absolute":r,i=t.modifiers,o=i===void 0?MI:i,l=t.referenceElement,d=t.onFirstUpdate,u=t.innerRef,p=t.children,f=w.useContext($N),x=w.useState(null),g=x[0],v=x[1],b=w.useState(null),j=b[0],_=b[1];w.useEffect(function(){Fg(u,g)},[u,g]);var N=w.useMemo(function(){return{placement:n,strategy:s,onFirstUpdate:d,modifiers:[].concat(o,[{name:"arrow",enabled:j!=null,options:{element:j}}])}},[n,s,d,o,j]),S=PI(l||f,g,N),P=S.state,M=S.styles,A=S.forceUpdate,R=S.update,T=w.useMemo(function(){return{ref:v,style:M.popper,placement:P?P.placement:n,hasPopperEscaped:P&&P.modifiersData.hide?P.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:P&&P.modifiersData.hide?P.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:M.arrow,ref:_},forceUpdate:A||DI,update:R||OI}},[v,_,n,P,M,R,A]);return BN(p)(T)}var RI=function(){},AI=RI;const II=ys(AI);function FI(t){var e=t.children,n=t.innerRef,r=w.useContext(zN),s=w.useCallback(function(i){Fg(n,i),UN(r,i)},[n,r]);return w.useEffect(function(){return function(){return Fg(n,null)}},[]),w.useEffect(function(){II(!!r,"`Reference` should not be used outside of a `Manager` component.")},[r]),BN(e)({ref:s})}function $I(t,e){if(pe(2,arguments),rr(e)!=="object"||e===null)throw new RangeError("values parameter must be an object");var n=be(t);return isNaN(n.getTime())?new Date(NaN):(e.year!=null&&n.setFullYear(e.year),e.month!=null&&(n=un(n,e.month)),e.date!=null&&n.setDate(Oe(e.date)),e.hours!=null&&n.setHours(Oe(e.hours)),e.minutes!=null&&n.setMinutes(Oe(e.minutes)),e.seconds!=null&&n.setSeconds(Oe(e.seconds)),e.milliseconds!=null&&n.setMilliseconds(Oe(e.milliseconds)),n)}function o_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function jh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o_(Object(n),!0).forEach(function(r){F(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bg(t){return Bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bg(t)}function Ut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,XN(r.key),r)}}function Ht(t,e,n){return e&&l_(t.prototype,e),n&&l_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function F(t,e,n){return(e=XN(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function So(){return So=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},So.apply(this,arguments)}function Wt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ug(t,e)}function Nh(t){return Nh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nh(t)}function Ug(t,e){return Ug=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Ug(t,e)}function z(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yt(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Nh(t);if(e){var s=Nh(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return function(i,o){if(o&&(typeof o=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z(i)}(this,n)}}function Oc(t){return function(e){if(Array.isArray(e))return Zf(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(e){if(typeof e=="string")return Zf(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zf(e,n)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Zf(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function XN(t){var e=function(n,r){if(typeof n!="object"||n===null)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var i=s.call(n,r);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}(t,"string");return typeof e=="symbol"?e:String(e)}var c_=function(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},d_=function(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},zI={p:d_,P:function(t,e){var n,r=t.match(/(P+)(p+)?/)||[],s=r[1],i=r[2];if(!i)return c_(t,e);switch(s){case"P":n=e.dateTime({width:"short"});break;case"PP":n=e.dateTime({width:"medium"});break;case"PPP":n=e.dateTime({width:"long"});break;default:n=e.dateTime({width:"full"})}return n.replace("{{date}}",c_(s,e)).replace("{{time}}",d_(i,e))}},Xl=12,BI=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function Je(t){var e=t?typeof t=="string"||t instanceof String?WR(t):be(t):new Date;return Ls(e)?e:null}function Ls(t,e){return e=e||new Date("1/1/1000"),Cc(t)&&!Ws(t,e)}function dt(t,e,n){if(n==="en")return zb(t,e,{awareOfUnicodeTokens:!0});var r=Gi(n);return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),!r&&Ki()&&Gi(Ki())&&(r=Gi(Ki())),zb(t,e,{locale:r||null,awareOfUnicodeTokens:!0})}function Tr(t,e){var n=e.dateFormat,r=e.locale;return t&&dt(t,Array.isArray(n)?n[0]:n,r)||""}function u_(t,e){var n=e.hour,r=n===void 0?0:n,s=e.minute,i=s===void 0?0:s,o=e.second;return ku(Nu(R6(t,o===void 0?0:o),i),r)}function Wr(t,e,n){var r=Gi(e||Ki());return TN(t,{locale:r,weekStartsOn:n})}function ni(t){return PN(t)}function Dl(t){return DN(t)}function h_(t){return Mg(t)}function p_(){return Ur(Je())}function Ys(t,e){return t&&e?H6(t,e):!t&&!e}function gr(t,e){return t&&e?U6(t,e):!t&&!e}function kh(t,e){return t&&e?W6(t,e):!t&&!e}function nt(t,e){return t&&e?B6(t,e):!t&&!e}function Ui(t,e){return t&&e?z6(t,e):!t&&!e}function Eu(t,e,n){var r,s=Ur(e),i=Lg(n);try{r=Tc(t,{start:s,end:i})}catch{r=!1}return r}function Ki(){return(typeof window<"u"?window:globalThis).__localeId__}function Gi(t){if(typeof t=="string"){var e=typeof window<"u"?window:globalThis;return e.__localeData__?e.__localeData__[t]:null}return t}function jv(t,e){return dt(un(Je(),t),"LLLL",e)}function JN(t,e){return dt(un(Je(),t),"LLL",e)}function gp(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.maxDate,s=e.excludeDates,i=e.excludeDateIntervals,o=e.includeDates,l=e.includeDateIntervals,d=e.filterDate;return xp(t,{minDate:n,maxDate:r})||s&&s.some(function(u){return nt(t,u)})||i&&i.some(function(u){var p=u.start,f=u.end;return Tc(t,{start:p,end:f})})||o&&!o.some(function(u){return nt(t,u)})||l&&!l.some(function(u){var p=u.start,f=u.end;return Tc(t,{start:p,end:f})})||d&&!d(Je(t))||!1}function Nv(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.excludeDates,r=e.excludeDateIntervals;return r&&r.length>0?r.some(function(s){var i=s.start,o=s.end;return Tc(t,{start:i,end:o})}):n&&n.some(function(s){return nt(t,s)})||!1}function ek(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.maxDate,s=e.excludeDates,i=e.includeDates,o=e.filterDate;return xp(t,{minDate:PN(n),maxDate:F6(r)})||s&&s.some(function(l){return gr(t,l)})||i&&!i.some(function(l){return gr(t,l)})||o&&!o(Je(t))||!1}function Kf(t,e,n,r){var s=Le(t),i=sn(t),o=Le(e),l=sn(e),d=Le(r);return s===o&&s===d?i<=n&&n<=l:s<o?d===s&&i<=n||d===o&&l>=n||d<o&&d>s:void 0}function UI(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.maxDate,s=e.excludeDates,i=e.includeDates,o=e.filterDate;return xp(t,{minDate:n,maxDate:r})||s&&s.some(function(l){return kh(t,l)})||i&&!i.some(function(l){return kh(t,l)})||o&&!o(Je(t))||!1}function Gf(t,e,n){if(!Cc(e)||!Cc(n))return!1;var r=Le(e),s=Le(n);return r<=t&&s>=t}function tk(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.maxDate,s=e.excludeDates,i=e.includeDates,o=e.filterDate,l=new Date(t,0,1);return xp(l,{minDate:DN(n),maxDate:$6(r)})||s&&s.some(function(d){return Ys(l,d)})||i&&!i.some(function(d){return Ys(l,d)})||o&&!o(Je(l))||!1}function Qf(t,e,n,r){var s=Le(t),i=Ka(t),o=Le(e),l=Ka(e),d=Le(r);return s===o&&s===d?i<=n&&n<=l:s<o?d===s&&i<=n||d===o&&l>=n||d<o&&d>s:void 0}function xp(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.maxDate;return n&&xh(t,n)<0||r&&xh(t,r)>0}function f_(t,e){return e.some(function(n){return Br(n)===Br(t)&&zr(n)===zr(t)})}function m_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.excludeTimes,r=e.includeTimes,s=e.filterTime;return n&&f_(t,n)||r&&!f_(t,r)||s&&!s(t)||!1}function g_(t,e){var n=e.minTime,r=e.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var s,i=Je(),o=ku(Nu(i,zr(t)),Br(t)),l=ku(Nu(i,zr(n)),Br(n)),d=ku(Nu(i,zr(r)),Br(r));try{s=!Tc(o,{start:l,end:d})}catch{s=!1}return s}function x_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.includeDates,s=_o(t,1);return n&&vh(n,s)>0||r&&r.every(function(i){return vh(i,s)>0})||!1}function v_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.maxDate,r=e.includeDates,s=_r(t,1);return n&&vh(s,n)>0||r&&r.every(function(i){return vh(s,i)>0})||!1}function y_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.includeDates,s=Ec(t,1);return n&&yh(n,s)>0||r&&r.every(function(i){return yh(i,s)>0})||!1}function b_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.maxDate,r=e.includeDates,s=bo(t,1);return n&&yh(s,n)>0||r&&r.every(function(i){return yh(s,i)>0})||!1}function nk(t){var e=t.minDate,n=t.includeDates;if(n&&e){var r=n.filter(function(s){return xh(s,e)>=0});return Wb(r)}return n?Wb(n):e}function rk(t){var e=t.maxDate,n=t.includeDates;if(n&&e){var r=n.filter(function(s){return xh(s,e)<=0});return Yb(r)}return n?Yb(n):e}function __(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"react-datepicker__day--highlighted",n=new Map,r=0,s=t.length;r<s;r++){var i=t[r];if(pp(i)){var o=dt(i,"MM.dd.yyyy"),l=n.get(o)||[];l.includes(e)||(l.push(e),n.set(o,l))}else if(Bg(i)==="object"){var d=Object.keys(i),u=d[0],p=i[d[0]];if(typeof u=="string"&&p.constructor===Array)for(var f=0,x=p.length;f<x;f++){var g=dt(p[f],"MM.dd.yyyy"),v=n.get(g)||[];v.includes(u)||(v.push(u),n.set(g,v))}}}return n}function HI(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"react-datepicker__day--holidays",n=new Map;return t.forEach(function(r){var s=r.date,i=r.holidayName;if(pp(s)){var o=dt(s,"MM.dd.yyyy"),l=n.get(o)||{};if(!("className"in l)||l.className!==e||(d=l.holidayNames,u=[i],d.length!==u.length||!d.every(function(f,x){return f===u[x]}))){var d,u;l.className=e;var p=l.holidayNames;l.holidayNames=p?[].concat(Oc(p),[i]):[i],n.set(o,l)}}}),n}function WI(t,e,n,r,s){for(var i=s.length,o=[],l=0;l<i;l++){var d=Dg(C6(t,Br(s[l])),zr(s[l])),u=Dg(t,(n+1)*r);ai(d,e)&&Ws(d,u)&&o.push(s[l])}return o}function w_(t){return t<10?"0".concat(t):"".concat(t)}function Ga(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xl,n=Math.ceil(Le(t)/e)*e;return{startPeriod:n-(e-1),endPeriod:n}}function j_(t){var e=t.getSeconds(),n=t.getMilliseconds();return be(t.getTime()-1e3*e-n)}function YI(t,e,n,r){for(var s=[],i=0;i<2*e+1;i++){var o=t+e-i,l=!0;n&&(l=Le(n)<=o),r&&l&&(l=Le(r)>=o),l&&s.push(o)}return s}var VI=fp(function(t){Wt(n,Y.Component);var e=Yt(n);function n(r){var s;Ut(this,n),F(z(s=e.call(this,r)),"renderOptions",function(){var d=s.props.year,u=s.state.yearsList.map(function(x){return Y.createElement("div",{className:d===x?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:x,onClick:s.onChange.bind(z(s),x),"aria-selected":d===x?"true":void 0},d===x?Y.createElement("span",{className:"react-datepicker__year-option--selected"},"✓"):"",x)}),p=s.props.minDate?Le(s.props.minDate):null,f=s.props.maxDate?Le(s.props.maxDate):null;return f&&s.state.yearsList.find(function(x){return x===f})||u.unshift(Y.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:s.incrementYears},Y.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),p&&s.state.yearsList.find(function(x){return x===p})||u.push(Y.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:s.decrementYears},Y.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),u}),F(z(s),"onChange",function(d){s.props.onChange(d)}),F(z(s),"handleClickOutside",function(){s.props.onCancel()}),F(z(s),"shiftYears",function(d){var u=s.state.yearsList.map(function(p){return p+d});s.setState({yearsList:u})}),F(z(s),"incrementYears",function(){return s.shiftYears(1)}),F(z(s),"decrementYears",function(){return s.shiftYears(-1)});var i=r.yearDropdownItemNumber,o=r.scrollableYearDropdown,l=i||(o?10:5);return s.state={yearsList:YI(s.props.year,l,s.props.minDate,s.props.maxDate)},s.dropdownRef=w.createRef(),s}return Ht(n,[{key:"componentDidMount",value:function(){var r=this.dropdownRef.current;if(r){var s=r.children?Array.from(r.children):null,i=s?s.find(function(o){return o.ariaSelected}):null;r.scrollTop=i?i.offsetTop+(i.clientHeight-r.clientHeight)/2:(r.scrollHeight-r.clientHeight)/2}}},{key:"render",value:function(){var r=Qt({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return Y.createElement("div",{className:r,ref:this.dropdownRef},this.renderOptions())}}]),n}()),qI=function(t){Wt(n,Y.Component);var e=Yt(n);function n(){var r;Ut(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return F(z(r=e.call.apply(e,[this].concat(i))),"state",{dropdownVisible:!1}),F(z(r),"renderSelectOptions",function(){for(var l=r.props.minDate?Le(r.props.minDate):1900,d=r.props.maxDate?Le(r.props.maxDate):2100,u=[],p=l;p<=d;p++)u.push(Y.createElement("option",{key:p,value:p},p));return u}),F(z(r),"onSelectChange",function(l){r.onChange(l.target.value)}),F(z(r),"renderSelectMode",function(){return Y.createElement("select",{value:r.props.year,className:"react-datepicker__year-select",onChange:r.onSelectChange},r.renderSelectOptions())}),F(z(r),"renderReadView",function(l){return Y.createElement("div",{key:"read",style:{visibility:l?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(d){return r.toggleDropdown(d)}},Y.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),Y.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},r.props.year))}),F(z(r),"renderDropdown",function(){return Y.createElement(VI,{key:"dropdown",year:r.props.year,onChange:r.onChange,onCancel:r.toggleDropdown,minDate:r.props.minDate,maxDate:r.props.maxDate,scrollableYearDropdown:r.props.scrollableYearDropdown,yearDropdownItemNumber:r.props.yearDropdownItemNumber})}),F(z(r),"renderScrollMode",function(){var l=r.state.dropdownVisible,d=[r.renderReadView(!l)];return l&&d.unshift(r.renderDropdown()),d}),F(z(r),"onChange",function(l){r.toggleDropdown(),l!==r.props.year&&r.props.onChange(l)}),F(z(r),"toggleDropdown",function(l){r.setState({dropdownVisible:!r.state.dropdownVisible},function(){r.props.adjustDateOnChange&&r.handleYearChange(r.props.date,l)})}),F(z(r),"handleYearChange",function(l,d){r.onSelect(l,d),r.setOpen()}),F(z(r),"onSelect",function(l,d){r.props.onSelect&&r.props.onSelect(l,d)}),F(z(r),"setOpen",function(){r.props.setOpen&&r.props.setOpen(!0)}),r}return Ht(n,[{key:"render",value:function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode()}return Y.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},r)}}]),n}(),ZI=fp(function(t){Wt(n,Y.Component);var e=Yt(n);function n(){var r;Ut(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return F(z(r=e.call.apply(e,[this].concat(i))),"isSelectedMonth",function(l){return r.props.month===l}),F(z(r),"renderOptions",function(){return r.props.monthNames.map(function(l,d){return Y.createElement("div",{className:r.isSelectedMonth(d)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:l,onClick:r.onChange.bind(z(r),d),"aria-selected":r.isSelectedMonth(d)?"true":void 0},r.isSelectedMonth(d)?Y.createElement("span",{className:"react-datepicker__month-option--selected"},"✓"):"",l)})}),F(z(r),"onChange",function(l){return r.props.onChange(l)}),F(z(r),"handleClickOutside",function(){return r.props.onCancel()}),r}return Ht(n,[{key:"render",value:function(){return Y.createElement("div",{className:"react-datepicker__month-dropdown"},this.renderOptions())}}]),n}()),KI=function(t){Wt(n,Y.Component);var e=Yt(n);function n(){var r;Ut(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return F(z(r=e.call.apply(e,[this].concat(i))),"state",{dropdownVisible:!1}),F(z(r),"renderSelectOptions",function(l){return l.map(function(d,u){return Y.createElement("option",{key:u,value:u},d)})}),F(z(r),"renderSelectMode",function(l){return Y.createElement("select",{value:r.props.month,className:"react-datepicker__month-select",onChange:function(d){return r.onChange(d.target.value)}},r.renderSelectOptions(l))}),F(z(r),"renderReadView",function(l,d){return Y.createElement("div",{key:"read",style:{visibility:l?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:r.toggleDropdown},Y.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),Y.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},d[r.props.month]))}),F(z(r),"renderDropdown",function(l){return Y.createElement(ZI,{key:"dropdown",month:r.props.month,monthNames:l,onChange:r.onChange,onCancel:r.toggleDropdown})}),F(z(r),"renderScrollMode",function(l){var d=r.state.dropdownVisible,u=[r.renderReadView(!d,l)];return d&&u.unshift(r.renderDropdown(l)),u}),F(z(r),"onChange",function(l){r.toggleDropdown(),l!==r.props.month&&r.props.onChange(l)}),F(z(r),"toggleDropdown",function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})}),r}return Ht(n,[{key:"render",value:function(){var r,s=this,i=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(o){return JN(o,s.props.locale)}:function(o){return jv(o,s.props.locale)});switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode(i);break;case"select":r=this.renderSelectMode(i)}return Y.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},r)}}]),n}();function GI(t,e){for(var n=[],r=ni(t),s=ni(e);!ai(r,s);)n.push(Je(r)),r=_r(r,1);return n}var QI=fp(function(t){Wt(n,Y.Component);var e=Yt(n);function n(r){var s;return Ut(this,n),F(z(s=e.call(this,r)),"renderOptions",function(){return s.state.monthYearsList.map(function(i){var o=Og(i),l=Ys(s.props.date,i)&&gr(s.props.date,i);return Y.createElement("div",{className:l?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:o,onClick:s.onChange.bind(z(s),o),"aria-selected":l?"true":void 0},l?Y.createElement("span",{className:"react-datepicker__month-year-option--selected"},"✓"):"",dt(i,s.props.dateFormat,s.props.locale))})}),F(z(s),"onChange",function(i){return s.props.onChange(i)}),F(z(s),"handleClickOutside",function(){s.props.onCancel()}),s.state={monthYearsList:GI(s.props.minDate,s.props.maxDate)},s}return Ht(n,[{key:"render",value:function(){var r=Qt({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return Y.createElement("div",{className:r},this.renderOptions())}}]),n}()),XI=function(t){Wt(n,Y.Component);var e=Yt(n);function n(){var r;Ut(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return F(z(r=e.call.apply(e,[this].concat(i))),"state",{dropdownVisible:!1}),F(z(r),"renderSelectOptions",function(){for(var l=ni(r.props.minDate),d=ni(r.props.maxDate),u=[];!ai(l,d);){var p=Og(l);u.push(Y.createElement("option",{key:p,value:p},dt(l,r.props.dateFormat,r.props.locale))),l=_r(l,1)}return u}),F(z(r),"onSelectChange",function(l){r.onChange(l.target.value)}),F(z(r),"renderSelectMode",function(){return Y.createElement("select",{value:Og(ni(r.props.date)),className:"react-datepicker__month-year-select",onChange:r.onSelectChange},r.renderSelectOptions())}),F(z(r),"renderReadView",function(l){var d=dt(r.props.date,r.props.dateFormat,r.props.locale);return Y.createElement("div",{key:"read",style:{visibility:l?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:function(u){return r.toggleDropdown(u)}},Y.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),Y.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},d))}),F(z(r),"renderDropdown",function(){return Y.createElement(QI,{key:"dropdown",date:r.props.date,dateFormat:r.props.dateFormat,onChange:r.onChange,onCancel:r.toggleDropdown,minDate:r.props.minDate,maxDate:r.props.maxDate,scrollableMonthYearDropdown:r.props.scrollableMonthYearDropdown,locale:r.props.locale})}),F(z(r),"renderScrollMode",function(){var l=r.state.dropdownVisible,d=[r.renderReadView(!l)];return l&&d.unshift(r.renderDropdown()),d}),F(z(r),"onChange",function(l){r.toggleDropdown();var d=Je(parseInt(l));Ys(r.props.date,d)&&gr(r.props.date,d)||r.props.onChange(d)}),F(z(r),"toggleDropdown",function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})}),r}return Ht(n,[{key:"render",value:function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode()}return Y.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},r)}}]),n}(),JI=function(t){Wt(n,Y.Component);var e=Yt(n);function n(){var r;Ut(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return F(z(r=e.call.apply(e,[this].concat(i))),"dayEl",Y.createRef()),F(z(r),"handleClick",function(l){!r.isDisabled()&&r.props.onClick&&r.props.onClick(l)}),F(z(r),"handleMouseEnter",function(l){!r.isDisabled()&&r.props.onMouseEnter&&r.props.onMouseEnter(l)}),F(z(r),"handleOnKeyDown",function(l){l.key===" "&&(l.preventDefault(),l.key="Enter"),r.props.handleOnKeyDown(l)}),F(z(r),"isSameDay",function(l){return nt(r.props.day,l)}),F(z(r),"isKeyboardSelected",function(){return!r.props.disabledKeyboardNavigation&&!(r.isSameDay(r.props.selected)||r.isSameWeek(r.props.selected))&&(r.isSameDay(r.props.preSelection)||r.isSameWeek(r.props.preSelection))}),F(z(r),"isDisabled",function(){return gp(r.props.day,r.props)}),F(z(r),"isExcluded",function(){return Nv(r.props.day,r.props)}),F(z(r),"isStartOfWeek",function(){return nt(r.props.day,Wr(r.props.day,r.props.locale,r.props.calendarStartDay))}),F(z(r),"isSameWeek",function(l){return r.props.showWeekPicker&&nt(l,Wr(r.props.day,r.props.locale,r.props.calendarStartDay))}),F(z(r),"getHighLightedClass",function(){var l=r.props,d=l.day,u=l.highlightDates;if(!u)return!1;var p=dt(d,"MM.dd.yyyy");return u.get(p)}),F(z(r),"getHolidaysClass",function(){var l=r.props,d=l.day,u=l.holidays;if(!u)return!1;var p=dt(d,"MM.dd.yyyy");return u.has(p)?[u.get(p).className]:void 0}),F(z(r),"isInRange",function(){var l=r.props,d=l.day,u=l.startDate,p=l.endDate;return!(!u||!p)&&Eu(d,u,p)}),F(z(r),"isInSelectingRange",function(){var l,d=r.props,u=d.day,p=d.selectsStart,f=d.selectsEnd,x=d.selectsRange,g=d.selectsDisabledDaysInRange,v=d.startDate,b=d.endDate,j=(l=r.props.selectingDate)!==null&&l!==void 0?l:r.props.preSelection;return!(!(p||f||x)||!j||!g&&r.isDisabled())&&(p&&b&&(Ws(j,b)||Ui(j,b))?Eu(u,j,b):(f&&v&&(ai(j,v)||Ui(j,v))||!(!x||!v||b||!ai(j,v)&&!Ui(j,v)))&&Eu(u,v,j))}),F(z(r),"isSelectingRangeStart",function(){var l;if(!r.isInSelectingRange())return!1;var d=r.props,u=d.day,p=d.startDate,f=d.selectsStart,x=(l=r.props.selectingDate)!==null&&l!==void 0?l:r.props.preSelection;return nt(u,f?x:p)}),F(z(r),"isSelectingRangeEnd",function(){var l;if(!r.isInSelectingRange())return!1;var d=r.props,u=d.day,p=d.endDate,f=d.selectsEnd,x=d.selectsRange,g=(l=r.props.selectingDate)!==null&&l!==void 0?l:r.props.preSelection;return nt(u,f||x?g:p)}),F(z(r),"isRangeStart",function(){var l=r.props,d=l.day,u=l.startDate,p=l.endDate;return!(!u||!p)&&nt(u,d)}),F(z(r),"isRangeEnd",function(){var l=r.props,d=l.day,u=l.startDate,p=l.endDate;return!(!u||!p)&&nt(p,d)}),F(z(r),"isWeekend",function(){var l=P6(r.props.day);return l===0||l===6}),F(z(r),"isAfterMonth",function(){return r.props.month!==void 0&&(r.props.month+1)%12===sn(r.props.day)}),F(z(r),"isBeforeMonth",function(){return r.props.month!==void 0&&(sn(r.props.day)+1)%12===r.props.month}),F(z(r),"isCurrentDay",function(){return r.isSameDay(Je())}),F(z(r),"isSelected",function(){return r.isSameDay(r.props.selected)||r.isSameWeek(r.props.selected)}),F(z(r),"getClassNames",function(l){var d,u=r.props.dayClassName?r.props.dayClassName(l):void 0;return Qt("react-datepicker__day",u,"react-datepicker__day--"+dt(r.props.day,"ddd",d),{"react-datepicker__day--disabled":r.isDisabled(),"react-datepicker__day--excluded":r.isExcluded(),"react-datepicker__day--selected":r.isSelected(),"react-datepicker__day--keyboard-selected":r.isKeyboardSelected(),"react-datepicker__day--range-start":r.isRangeStart(),"react-datepicker__day--range-end":r.isRangeEnd(),"react-datepicker__day--in-range":r.isInRange(),"react-datepicker__day--in-selecting-range":r.isInSelectingRange(),"react-datepicker__day--selecting-range-start":r.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":r.isSelectingRangeEnd(),"react-datepicker__day--today":r.isCurrentDay(),"react-datepicker__day--weekend":r.isWeekend(),"react-datepicker__day--outside-month":r.isAfterMonth()||r.isBeforeMonth()},r.getHighLightedClass("react-datepicker__day--highlighted"),r.getHolidaysClass())}),F(z(r),"getAriaLabel",function(){var l=r.props,d=l.day,u=l.ariaLabelPrefixWhenEnabled,p=u===void 0?"Choose":u,f=l.ariaLabelPrefixWhenDisabled,x=f===void 0?"Not available":f,g=r.isDisabled()||r.isExcluded()?x:p;return"".concat(g," ").concat(dt(d,"PPPP",r.props.locale))}),F(z(r),"getTitle",function(){var l=r.props,d=l.day,u=l.holidays,p=u===void 0?new Map:u,f=dt(d,"MM.dd.yyyy");return p.has(f)&&p.get(f).holidayNames.length>0?p.get(f).holidayNames.join(", "):""}),F(z(r),"getTabIndex",function(l,d){var u=l||r.props.selected,p=d||r.props.preSelection;return(!r.props.showWeekPicker||!r.props.showWeekNumber&&r.isStartOfWeek())&&(r.isKeyboardSelected()||r.isSameDay(u)&&nt(p,u))?0:-1}),F(z(r),"handleFocusDay",function(){var l,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=!1;r.getTabIndex()===0&&!d.isInputFocused&&r.isSameDay(r.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(u=!0),r.props.inline&&!r.props.shouldFocusDayInline&&(u=!1),r.props.containerRef&&r.props.containerRef.current&&r.props.containerRef.current.contains(document.activeElement)&&document.activeElement.classList.contains("react-datepicker__day")&&(u=!0),r.props.monthShowsDuplicateDaysEnd&&r.isAfterMonth()&&(u=!1),r.props.monthShowsDuplicateDaysStart&&r.isBeforeMonth()&&(u=!1)),u&&((l=r.dayEl.current)===null||l===void 0||l.focus({preventScroll:!0}))}),F(z(r),"renderDayContents",function(){return r.props.monthShowsDuplicateDaysEnd&&r.isAfterMonth()||r.props.monthShowsDuplicateDaysStart&&r.isBeforeMonth()?null:r.props.renderDayContents?r.props.renderDayContents(Hb(r.props.day),r.props.day):Hb(r.props.day)}),F(z(r),"render",function(){return Y.createElement("div",{ref:r.dayEl,className:r.getClassNames(r.props.day),onKeyDown:r.handleOnKeyDown,onClick:r.handleClick,onMouseEnter:r.handleMouseEnter,tabIndex:r.getTabIndex(),"aria-label":r.getAriaLabel(),role:"option",title:r.getTitle(),"aria-disabled":r.isDisabled(),"aria-current":r.isCurrentDay()?"date":void 0,"aria-selected":r.isSelected()||r.isInRange()},r.renderDayContents(),r.getTitle()!==""&&Y.createElement("span",{className:"holiday-overlay"},r.getTitle()))}),r}return Ht(n,[{key:"componentDidMount",value:function(){this.handleFocusDay()}},{key:"componentDidUpdate",value:function(r){this.handleFocusDay(r)}}]),n}(),eF=function(t){Wt(n,Y.Component);var e=Yt(n);function n(){var r;Ut(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return F(z(r=e.call.apply(e,[this].concat(i))),"weekNumberEl",Y.createRef()),F(z(r),"handleClick",function(l){r.props.onClick&&r.props.onClick(l)}),F(z(r),"handleOnKeyDown",function(l){l.key===" "&&(l.preventDefault(),l.key="Enter"),r.props.handleOnKeyDown(l)}),F(z(r),"isKeyboardSelected",function(){return!r.props.disabledKeyboardNavigation&&!nt(r.props.date,r.props.selected)&&nt(r.props.date,r.props.preSelection)}),F(z(r),"getTabIndex",function(){return r.props.showWeekPicker&&r.props.showWeekNumber&&(r.isKeyboardSelected()||nt(r.props.date,r.props.selected)&&nt(r.props.preSelection,r.props.selected))?0:-1}),F(z(r),"handleFocusWeekNumber",function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=!1;r.getTabIndex()===0&&!l.isInputFocused&&nt(r.props.date,r.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(d=!0),r.props.inline&&!r.props.shouldFocusDayInline&&(d=!1),r.props.containerRef&&r.props.containerRef.current&&r.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(d=!0)),d&&r.weekNumberEl.current&&r.weekNumberEl.current.focus({preventScroll:!0})}),r}return Ht(n,[{key:"componentDidMount",value:function(){this.handleFocusWeekNumber()}},{key:"componentDidUpdate",value:function(r){this.handleFocusWeekNumber(r)}},{key:"render",value:function(){var r=this.props,s=r.weekNumber,i=r.ariaLabelPrefix,o=i===void 0?"week ":i,l={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!r.onClick,"react-datepicker__week-number--selected":nt(this.props.date,this.props.selected),"react-datepicker__week-number--keyboard-selected":this.isKeyboardSelected()};return Y.createElement("div",{ref:this.weekNumberEl,className:Qt(l),"aria-label":"".concat(o," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},s)}}],[{key:"defaultProps",get:function(){return{ariaLabelPrefix:"week "}}}]),n}(),tF=function(t){Wt(n,Y.Component);var e=Yt(n);function n(){var r;Ut(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return F(z(r=e.call.apply(e,[this].concat(i))),"handleDayClick",function(l,d){r.props.onDayClick&&r.props.onDayClick(l,d)}),F(z(r),"handleDayMouseEnter",function(l){r.props.onDayMouseEnter&&r.props.onDayMouseEnter(l)}),F(z(r),"handleWeekClick",function(l,d,u){if(typeof r.props.onWeekSelect=="function"&&r.props.onWeekSelect(l,d,u),r.props.showWeekPicker){var p=Wr(l,r.props.locale,r.props.calendarStartDay);r.handleDayClick(p,u)}r.props.shouldCloseOnSelect&&r.props.setOpen(!1)}),F(z(r),"formatWeekNumber",function(l){return r.props.formatWeekNumber?r.props.formatWeekNumber(l):function(d,u){var p=Ki()&&Gi(Ki());return L6(d,p?{locale:p}:null)}(l)}),F(z(r),"renderDays",function(){var l=Wr(r.props.day,r.props.locale,r.props.calendarStartDay),d=[],u=r.formatWeekNumber(l);if(r.props.showWeekNumber){var p=r.props.onWeekSelect||r.props.showWeekPicker?r.handleWeekClick.bind(z(r),l,u):void 0;d.push(Y.createElement(eF,{key:"W",weekNumber:u,date:l,onClick:p,selected:r.props.selected,preSelection:r.props.preSelection,ariaLabelPrefix:r.props.ariaLabelPrefix,showWeekPicker:r.props.showWeekPicker,showWeekNumber:r.props.showWeekNumber,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,handleOnKeyDown:r.props.handleOnKeyDown,isInputFocused:r.props.isInputFocused,containerRef:r.props.containerRef}))}return d.concat([0,1,2,3,4,5,6].map(function(f){var x=Bo(l,f);return Y.createElement(JI,{ariaLabelPrefixWhenEnabled:r.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:r.props.disabledDayAriaLabelPrefix,key:x.valueOf(),day:x,month:r.props.month,onClick:r.handleDayClick.bind(z(r),x),onMouseEnter:r.handleDayMouseEnter.bind(z(r),x),minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,highlightDates:r.props.highlightDates,holidays:r.props.holidays,selectingDate:r.props.selectingDate,filterDate:r.props.filterDate,preSelection:r.props.preSelection,selected:r.props.selected,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,showWeekPicker:r.props.showWeekPicker,showWeekNumber:r.props.showWeekNumber,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,startDate:r.props.startDate,endDate:r.props.endDate,dayClassName:r.props.dayClassName,renderDayContents:r.props.renderDayContents,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,handleOnKeyDown:r.props.handleOnKeyDown,isInputFocused:r.props.isInputFocused,containerRef:r.props.containerRef,inline:r.props.inline,shouldFocusDayInline:r.props.shouldFocusDayInline,monthShowsDuplicateDaysEnd:r.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:r.props.monthShowsDuplicateDaysStart,locale:r.props.locale})}))}),F(z(r),"startOfWeek",function(){return Wr(r.props.day,r.props.locale,r.props.calendarStartDay)}),F(z(r),"isKeyboardSelected",function(){return!r.props.disabledKeyboardNavigation&&!nt(r.startOfWeek(),r.props.selected)&&nt(r.startOfWeek(),r.props.preSelection)}),r}return Ht(n,[{key:"render",value:function(){var r={"react-datepicker__week":!0,"react-datepicker__week--selected":nt(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return Y.createElement("div",{className:Qt(r)},this.renderDays())}}],[{key:"defaultProps",get:function(){return{shouldCloseOnSelect:!0}}}]),n}(),sk="two_columns",ik="three_columns",ak="four_columns",Xf=F(F(F({},sk,{grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2}),ik,{grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3}),ak,{grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4});function N_(t,e){return t?ak:e?sk:ik}var nF=function(t){Wt(n,Y.Component);var e=Yt(n);function n(){var r;Ut(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return F(z(r=e.call.apply(e,[this].concat(i))),"MONTH_REFS",Oc(Array(12)).map(function(){return Y.createRef()})),F(z(r),"QUARTER_REFS",Oc(Array(4)).map(function(){return Y.createRef()})),F(z(r),"isDisabled",function(l){return gp(l,r.props)}),F(z(r),"isExcluded",function(l){return Nv(l,r.props)}),F(z(r),"handleDayClick",function(l,d){r.props.onDayClick&&r.props.onDayClick(l,d,r.props.orderInDisplay)}),F(z(r),"handleDayMouseEnter",function(l){r.props.onDayMouseEnter&&r.props.onDayMouseEnter(l)}),F(z(r),"handleMouseLeave",function(){r.props.onMouseLeave&&r.props.onMouseLeave()}),F(z(r),"isRangeStartMonth",function(l){var d=r.props,u=d.day,p=d.startDate,f=d.endDate;return!(!p||!f)&&gr(un(u,l),p)}),F(z(r),"isRangeStartQuarter",function(l){var d=r.props,u=d.day,p=d.startDate,f=d.endDate;return!(!p||!f)&&kh(La(u,l),p)}),F(z(r),"isRangeEndMonth",function(l){var d=r.props,u=d.day,p=d.startDate,f=d.endDate;return!(!p||!f)&&gr(un(u,l),f)}),F(z(r),"isRangeEndQuarter",function(l){var d=r.props,u=d.day,p=d.startDate,f=d.endDate;return!(!p||!f)&&kh(La(u,l),f)}),F(z(r),"isInSelectingRangeMonth",function(l){var d,u=r.props,p=u.day,f=u.selectsStart,x=u.selectsEnd,g=u.selectsRange,v=u.startDate,b=u.endDate,j=(d=r.props.selectingDate)!==null&&d!==void 0?d:r.props.preSelection;return!(!(f||x||g)||!j)&&(f&&b?Kf(j,b,l,p):(x&&v||!(!g||!v||b))&&Kf(v,j,l,p))}),F(z(r),"isSelectingMonthRangeStart",function(l){var d;if(!r.isInSelectingRangeMonth(l))return!1;var u=r.props,p=u.day,f=u.startDate,x=u.selectsStart,g=un(p,l),v=(d=r.props.selectingDate)!==null&&d!==void 0?d:r.props.preSelection;return gr(g,x?v:f)}),F(z(r),"isSelectingMonthRangeEnd",function(l){var d;if(!r.isInSelectingRangeMonth(l))return!1;var u=r.props,p=u.day,f=u.endDate,x=u.selectsEnd,g=u.selectsRange,v=un(p,l),b=(d=r.props.selectingDate)!==null&&d!==void 0?d:r.props.preSelection;return gr(v,x||g?b:f)}),F(z(r),"isInSelectingRangeQuarter",function(l){var d,u=r.props,p=u.day,f=u.selectsStart,x=u.selectsEnd,g=u.selectsRange,v=u.startDate,b=u.endDate,j=(d=r.props.selectingDate)!==null&&d!==void 0?d:r.props.preSelection;return!(!(f||x||g)||!j)&&(f&&b?Qf(j,b,l,p):(x&&v||!(!g||!v||b))&&Qf(v,j,l,p))}),F(z(r),"isWeekInMonth",function(l){var d=r.props.day,u=Bo(l,6);return gr(l,d)||gr(u,d)}),F(z(r),"isCurrentMonth",function(l,d){return Le(l)===Le(Je())&&d===sn(Je())}),F(z(r),"isCurrentQuarter",function(l,d){return Le(l)===Le(Je())&&d===Ka(Je())}),F(z(r),"isSelectedMonth",function(l,d,u){return sn(u)===d&&Le(l)===Le(u)}),F(z(r),"isSelectedQuarter",function(l,d,u){return Ka(l)===d&&Le(l)===Le(u)}),F(z(r),"renderWeeks",function(){for(var l=[],d=r.props.fixedHeight,u=0,p=!1,f=Wr(ni(r.props.day),r.props.locale,r.props.calendarStartDay);l.push(Y.createElement(tF,{ariaLabelPrefix:r.props.weekAriaLabelPrefix,chooseDayAriaLabelPrefix:r.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:r.props.disabledDayAriaLabelPrefix,key:u,day:f,month:sn(r.props.day),onDayClick:r.handleDayClick,onDayMouseEnter:r.handleDayMouseEnter,onWeekSelect:r.props.onWeekSelect,formatWeekNumber:r.props.formatWeekNumber,locale:r.props.locale,minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,inline:r.props.inline,shouldFocusDayInline:r.props.shouldFocusDayInline,highlightDates:r.props.highlightDates,holidays:r.props.holidays,selectingDate:r.props.selectingDate,filterDate:r.props.filterDate,preSelection:r.props.preSelection,selected:r.props.selected,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,showWeekNumber:r.props.showWeekNumbers,showWeekPicker:r.props.showWeekPicker,startDate:r.props.startDate,endDate:r.props.endDate,dayClassName:r.props.dayClassName,setOpen:r.props.setOpen,shouldCloseOnSelect:r.props.shouldCloseOnSelect,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,renderDayContents:r.props.renderDayContents,handleOnKeyDown:r.props.handleOnKeyDown,isInputFocused:r.props.isInputFocused,containerRef:r.props.containerRef,calendarStartDay:r.props.calendarStartDay,monthShowsDuplicateDaysEnd:r.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:r.props.monthShowsDuplicateDaysStart})),!p;){u++,f=mh(f,1);var x=d&&u>=6,g=!d&&!r.isWeekInMonth(f);if(x||g){if(!r.props.peekNextMonth)break;p=!0}}return l}),F(z(r),"onMonthClick",function(l,d){r.handleDayClick(ni(un(r.props.day,d)),l)}),F(z(r),"onMonthMouseEnter",function(l){r.handleDayMouseEnter(ni(un(r.props.day,l)))}),F(z(r),"handleMonthNavigation",function(l,d){r.isDisabled(d)||r.isExcluded(d)||(r.props.setPreSelection(d),r.MONTH_REFS[l].current&&r.MONTH_REFS[l].current.focus())}),F(z(r),"onMonthKeyDown",function(l,d){var u=r.props,p=u.selected,f=u.preSelection,x=u.disabledKeyboardNavigation,g=u.showTwoColumnMonthYearPicker,v=u.showFourColumnMonthYearPicker,b=u.setPreSelection,j=l.key;if(j!=="Tab"&&l.preventDefault(),!x){var _=N_(v,g),N=Xf[_].verticalNavigationOffset,S=Xf[_].grid;switch(j){case"Enter":r.onMonthClick(l,d),b(p);break;case"ArrowRight":r.handleMonthNavigation(d===11?0:d+1,_r(f,1));break;case"ArrowLeft":r.handleMonthNavigation(d===0?11:d-1,_o(f,1));break;case"ArrowUp":r.handleMonthNavigation(S[0].includes(d)?d+12-N:d-N,_o(f,N));break;case"ArrowDown":r.handleMonthNavigation(S[S.length-1].includes(d)?d-12+N:d+N,_r(f,N))}}}),F(z(r),"onQuarterClick",function(l,d){r.handleDayClick(h_(La(r.props.day,d)),l)}),F(z(r),"onQuarterMouseEnter",function(l){r.handleDayMouseEnter(h_(La(r.props.day,l)))}),F(z(r),"handleQuarterNavigation",function(l,d){r.isDisabled(d)||r.isExcluded(d)||(r.props.setPreSelection(d),r.QUARTER_REFS[l-1].current&&r.QUARTER_REFS[l-1].current.focus())}),F(z(r),"onQuarterKeyDown",function(l,d){var u=l.key;if(!r.props.disabledKeyboardNavigation)switch(u){case"Enter":r.onQuarterClick(l,d),r.props.setPreSelection(r.props.selected);break;case"ArrowRight":r.handleQuarterNavigation(d===4?1:d+1,EN(r.props.preSelection,1));break;case"ArrowLeft":r.handleQuarterNavigation(d===1?4:d-1,T6(r.props.preSelection,1))}}),F(z(r),"getMonthClassNames",function(l){var d=r.props,u=d.day,p=d.startDate,f=d.endDate,x=d.selected,g=d.minDate,v=d.maxDate,b=d.preSelection,j=d.monthClassName,_=d.excludeDates,N=d.includeDates,S=j?j(un(u,l)):void 0,P=un(u,l);return Qt("react-datepicker__month-text","react-datepicker__month-".concat(l),S,{"react-datepicker__month-text--disabled":(g||v||_||N)&&ek(P,r.props),"react-datepicker__month-text--selected":r.isSelectedMonth(u,l,x),"react-datepicker__month-text--keyboard-selected":!r.props.disabledKeyboardNavigation&&sn(b)===l,"react-datepicker__month-text--in-selecting-range":r.isInSelectingRangeMonth(l),"react-datepicker__month-text--in-range":Kf(p,f,l,u),"react-datepicker__month-text--range-start":r.isRangeStartMonth(l),"react-datepicker__month-text--range-end":r.isRangeEndMonth(l),"react-datepicker__month-text--selecting-range-start":r.isSelectingMonthRangeStart(l),"react-datepicker__month-text--selecting-range-end":r.isSelectingMonthRangeEnd(l),"react-datepicker__month-text--today":r.isCurrentMonth(u,l)})}),F(z(r),"getTabIndex",function(l){var d=sn(r.props.preSelection);return r.props.disabledKeyboardNavigation||l!==d?"-1":"0"}),F(z(r),"getQuarterTabIndex",function(l){var d=Ka(r.props.preSelection);return r.props.disabledKeyboardNavigation||l!==d?"-1":"0"}),F(z(r),"getAriaLabel",function(l){var d=r.props,u=d.chooseDayAriaLabelPrefix,p=u===void 0?"Choose":u,f=d.disabledDayAriaLabelPrefix,x=f===void 0?"Not available":f,g=d.day,v=un(g,l),b=r.isDisabled(v)||r.isExcluded(v)?x:p;return"".concat(b," ").concat(dt(v,"MMMM yyyy"))}),F(z(r),"getQuarterClassNames",function(l){var d=r.props,u=d.day,p=d.startDate,f=d.endDate,x=d.selected,g=d.minDate,v=d.maxDate,b=d.preSelection,j=d.disabledKeyboardNavigation;return Qt("react-datepicker__quarter-text","react-datepicker__quarter-".concat(l),{"react-datepicker__quarter-text--disabled":(g||v)&&UI(La(u,l),r.props),"react-datepicker__quarter-text--selected":r.isSelectedQuarter(u,l,x),"react-datepicker__quarter-text--keyboard-selected":!j&&Ka(b)===l,"react-datepicker__quarter-text--in-selecting-range":r.isInSelectingRangeQuarter(l),"react-datepicker__quarter-text--in-range":Qf(p,f,l,u),"react-datepicker__quarter-text--range-start":r.isRangeStartQuarter(l),"react-datepicker__quarter-text--range-end":r.isRangeEndQuarter(l)})}),F(z(r),"getMonthContent",function(l){var d=r.props,u=d.showFullMonthYearPicker,p=d.renderMonthContent,f=d.locale,x=d.day,g=JN(l,f),v=jv(l,f);return p?p(l,g,v,x):u?v:g}),F(z(r),"getQuarterContent",function(l){var d=r.props,u=d.renderQuarterContent,p=function(f,x){return dt(La(Je(),f),"QQQ",x)}(l,d.locale);return u?u(l,p):p}),F(z(r),"renderMonths",function(){var l=r.props,d=l.showTwoColumnMonthYearPicker,u=l.showFourColumnMonthYearPicker,p=l.day,f=l.selected;return Xf[N_(u,d)].grid.map(function(x,g){return Y.createElement("div",{className:"react-datepicker__month-wrapper",key:g},x.map(function(v,b){return Y.createElement("div",{ref:r.MONTH_REFS[v],key:b,onClick:function(j){r.onMonthClick(j,v)},onKeyDown:function(j){r.onMonthKeyDown(j,v)},onMouseEnter:function(){return r.onMonthMouseEnter(v)},tabIndex:r.getTabIndex(v),className:r.getMonthClassNames(v),role:"option","aria-label":r.getAriaLabel(v),"aria-current":r.isCurrentMonth(p,v)?"date":void 0,"aria-selected":r.isSelectedMonth(p,v,f)},r.getMonthContent(v))}))})}),F(z(r),"renderQuarters",function(){var l=r.props,d=l.day,u=l.selected;return Y.createElement("div",{className:"react-datepicker__quarter-wrapper"},[1,2,3,4].map(function(p,f){return Y.createElement("div",{key:f,ref:r.QUARTER_REFS[f],role:"option",onClick:function(x){r.onQuarterClick(x,p)},onKeyDown:function(x){r.onQuarterKeyDown(x,p)},onMouseEnter:function(){return r.onQuarterMouseEnter(p)},className:r.getQuarterClassNames(p),"aria-selected":r.isSelectedQuarter(d,p,u),tabIndex:r.getQuarterTabIndex(p),"aria-current":r.isCurrentQuarter(d,p)?"date":void 0},r.getQuarterContent(p))}))}),F(z(r),"getClassNames",function(){var l=r.props,d=l.selectingDate,u=l.selectsStart,p=l.selectsEnd,f=l.showMonthYearPicker,x=l.showQuarterYearPicker,g=l.showWeekPicker;return Qt("react-datepicker__month",{"react-datepicker__month--selecting-range":d&&(u||p)},{"react-datepicker__monthPicker":f},{"react-datepicker__quarterPicker":x},{"react-datepicker__weekPicker":g})}),r}return Ht(n,[{key:"render",value:function(){var r=this.props,s=r.showMonthYearPicker,i=r.showQuarterYearPicker,o=r.day,l=r.ariaLabelPrefix,d=l===void 0?"month ":l;return Y.createElement("div",{className:this.getClassNames(),onMouseLeave:this.handleMouseLeave,"aria-label":"".concat(d," ").concat(dt(o,"yyyy-MM")),role:"listbox"},s?this.renderMonths():i?this.renderQuarters():this.renderWeeks())}}]),n}(),ok=function(t){Wt(n,Y.Component);var e=Yt(n);function n(){var r;Ut(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return F(z(r=e.call.apply(e,[this].concat(i))),"state",{height:null}),F(z(r),"scrollToTheSelectedTime",function(){requestAnimationFrame(function(){r.list&&(r.list.scrollTop=r.centerLi&&n.calcCenterPosition(r.props.monthRef?r.props.monthRef.clientHeight-r.header.clientHeight:r.list.clientHeight,r.centerLi))})}),F(z(r),"handleClick",function(l){(r.props.minTime||r.props.maxTime)&&g_(l,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&m_(l,r.props)||r.props.onChange(l)}),F(z(r),"isSelectedTime",function(l){return r.props.selected&&(d=r.props.selected,u=l,j_(d).getTime()===j_(u).getTime());var d,u}),F(z(r),"isDisabledTime",function(l){return(r.props.minTime||r.props.maxTime)&&g_(l,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&m_(l,r.props)}),F(z(r),"liClasses",function(l){var d=["react-datepicker__time-list-item",r.props.timeClassName?r.props.timeClassName(l):void 0];return r.isSelectedTime(l)&&d.push("react-datepicker__time-list-item--selected"),r.isDisabledTime(l)&&d.push("react-datepicker__time-list-item--disabled"),r.props.injectTimes&&(60*Br(l)+zr(l))%r.props.intervals!=0&&d.push("react-datepicker__time-list-item--injected"),d.join(" ")}),F(z(r),"handleOnKeyDown",function(l,d){l.key===" "&&(l.preventDefault(),l.key="Enter"),l.key!=="ArrowUp"&&l.key!=="ArrowLeft"||!l.target.previousSibling||(l.preventDefault(),l.target.previousSibling.focus()),l.key!=="ArrowDown"&&l.key!=="ArrowRight"||!l.target.nextSibling||(l.preventDefault(),l.target.nextSibling.focus()),l.key==="Enter"&&r.handleClick(d),r.props.handleOnKeyDown(l)}),F(z(r),"renderTimes",function(){for(var l=[],d=r.props.format?r.props.format:"p",u=r.props.intervals,p=r.props.selected||r.props.openToDate||Je(),f=Ur(p),x=r.props.injectTimes&&r.props.injectTimes.sort(function(S,P){return S-P}),g=60*function(S){var P=new Date(S.getFullYear(),S.getMonth(),S.getDate()),M=new Date(S.getFullYear(),S.getMonth(),S.getDate(),24);return Math.round((+M-+P)/36e5)}(p),v=g/u,b=0;b<v;b++){var j=Dg(f,b*u);if(l.push(j),x){var _=WI(f,j,b,u,x);l=l.concat(_)}}var N=l.reduce(function(S,P){return P.getTime()<=p.getTime()?P:S},l[0]);return l.map(function(S,P){return Y.createElement("li",{key:P,onClick:r.handleClick.bind(z(r),S),className:r.liClasses(S),ref:function(M){S===N&&(r.centerLi=M)},onKeyDown:function(M){r.handleOnKeyDown(M,S)},tabIndex:S===N?0:-1,role:"option","aria-selected":r.isSelectedTime(S)?"true":void 0,"aria-disabled":r.isDisabledTime(S)?"true":void 0},dt(S,d,r.props.locale))})}),r}return Ht(n,[{key:"componentDidMount",value:function(){this.scrollToTheSelectedTime(),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})}},{key:"render",value:function(){var r=this,s=this.state.height;return Y.createElement("div",{className:"react-datepicker__time-container ".concat(this.props.todayButton?"react-datepicker__time-container--with-today-button":"")},Y.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(this.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(i){r.header=i}},Y.createElement("div",{className:"react-datepicker-time__header"},this.props.timeCaption)),Y.createElement("div",{className:"react-datepicker__time"},Y.createElement("div",{className:"react-datepicker__time-box"},Y.createElement("ul",{className:"react-datepicker__time-list",ref:function(i){r.list=i},style:s?{height:s}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))}}],[{key:"defaultProps",get:function(){return{intervals:30,onTimeChange:function(){},todayButton:null,timeCaption:"Time"}}}]),n}();F(ok,"calcCenterPosition",function(t,e){return e.offsetTop-(t/2-e.clientHeight/2)});var rF=function(t){Wt(n,Y.Component);var e=Yt(n);function n(r){var s;return Ut(this,n),F(z(s=e.call(this,r)),"YEAR_REFS",Oc(Array(s.props.yearItemNumber)).map(function(){return Y.createRef()})),F(z(s),"isDisabled",function(i){return gp(i,s.props)}),F(z(s),"isExcluded",function(i){return Nv(i,s.props)}),F(z(s),"selectingDate",function(){var i;return(i=s.props.selectingDate)!==null&&i!==void 0?i:s.props.preSelection}),F(z(s),"updateFocusOnPaginate",function(i){var o=(function(){this.YEAR_REFS[i].current.focus()}).bind(z(s));window.requestAnimationFrame(o)}),F(z(s),"handleYearClick",function(i,o){s.props.onDayClick&&s.props.onDayClick(i,o)}),F(z(s),"handleYearNavigation",function(i,o){var l=s.props,d=l.date,u=l.yearItemNumber,p=Ga(d,u).startPeriod;s.isDisabled(o)||s.isExcluded(o)||(s.props.setPreSelection(o),i-p==-1?s.updateFocusOnPaginate(u-1):i-p===u?s.updateFocusOnPaginate(0):s.YEAR_REFS[i-p].current.focus())}),F(z(s),"isSameDay",function(i,o){return nt(i,o)}),F(z(s),"isCurrentYear",function(i){return i===Le(Je())}),F(z(s),"isRangeStart",function(i){return s.props.startDate&&s.props.endDate&&Ys(as(Je(),i),s.props.startDate)}),F(z(s),"isRangeEnd",function(i){return s.props.startDate&&s.props.endDate&&Ys(as(Je(),i),s.props.endDate)}),F(z(s),"isInRange",function(i){return Gf(i,s.props.startDate,s.props.endDate)}),F(z(s),"isInSelectingRange",function(i){var o=s.props,l=o.selectsStart,d=o.selectsEnd,u=o.selectsRange,p=o.startDate,f=o.endDate;return!(!(l||d||u)||!s.selectingDate())&&(l&&f?Gf(i,s.selectingDate(),f):(d&&p||!(!u||!p||f))&&Gf(i,p,s.selectingDate()))}),F(z(s),"isSelectingRangeStart",function(i){if(!s.isInSelectingRange(i))return!1;var o=s.props,l=o.startDate,d=o.selectsStart,u=as(Je(),i);return Ys(u,d?s.selectingDate():l)}),F(z(s),"isSelectingRangeEnd",function(i){if(!s.isInSelectingRange(i))return!1;var o=s.props,l=o.endDate,d=o.selectsEnd,u=o.selectsRange,p=as(Je(),i);return Ys(p,d||u?s.selectingDate():l)}),F(z(s),"isKeyboardSelected",function(i){var o=Dl(as(s.props.date,i));return!s.props.disabledKeyboardNavigation&&!s.props.inline&&!nt(o,Dl(s.props.selected))&&nt(o,Dl(s.props.preSelection))}),F(z(s),"onYearClick",function(i,o){var l=s.props.date;s.handleYearClick(Dl(as(l,o)),i)}),F(z(s),"onYearKeyDown",function(i,o){var l=i.key;if(!s.props.disabledKeyboardNavigation)switch(l){case"Enter":s.onYearClick(i,o),s.props.setPreSelection(s.props.selected);break;case"ArrowRight":s.handleYearNavigation(o+1,bo(s.props.preSelection,1));break;case"ArrowLeft":s.handleYearNavigation(o-1,Ec(s.props.preSelection,1))}}),F(z(s),"getYearClassNames",function(i){var o=s.props,l=o.minDate,d=o.maxDate,u=o.selected,p=o.excludeDates,f=o.includeDates,x=o.filterDate;return Qt("react-datepicker__year-text",{"react-datepicker__year-text--selected":i===Le(u),"react-datepicker__year-text--disabled":(l||d||p||f||x)&&tk(i,s.props),"react-datepicker__year-text--keyboard-selected":s.isKeyboardSelected(i),"react-datepicker__year-text--range-start":s.isRangeStart(i),"react-datepicker__year-text--range-end":s.isRangeEnd(i),"react-datepicker__year-text--in-range":s.isInRange(i),"react-datepicker__year-text--in-selecting-range":s.isInSelectingRange(i),"react-datepicker__year-text--selecting-range-start":s.isSelectingRangeStart(i),"react-datepicker__year-text--selecting-range-end":s.isSelectingRangeEnd(i),"react-datepicker__year-text--today":s.isCurrentYear(i)})}),F(z(s),"getYearTabIndex",function(i){return s.props.disabledKeyboardNavigation?"-1":i===Le(s.props.preSelection)?"0":"-1"}),F(z(s),"getYearContainerClassNames",function(){var i=s.props,o=i.selectingDate,l=i.selectsStart,d=i.selectsEnd,u=i.selectsRange;return Qt("react-datepicker__year",{"react-datepicker__year--selecting-range":o&&(l||d||u)})}),F(z(s),"getYearContent",function(i){return s.props.renderYearContent?s.props.renderYearContent(i):i}),s}return Ht(n,[{key:"render",value:function(){for(var r=this,s=[],i=this.props,o=i.date,l=i.yearItemNumber,d=i.onYearMouseEnter,u=i.onYearMouseLeave,p=Ga(o,l),f=p.startPeriod,x=p.endPeriod,g=function(b){s.push(Y.createElement("div",{ref:r.YEAR_REFS[b-f],onClick:function(j){r.onYearClick(j,b)},onKeyDown:function(j){r.onYearKeyDown(j,b)},tabIndex:r.getYearTabIndex(b),className:r.getYearClassNames(b),onMouseEnter:function(j){return d(j,b)},onMouseLeave:function(j){return u(j,b)},key:b,"aria-current":r.isCurrentYear(b)?"date":void 0},r.getYearContent(b)))},v=f;v<=x;v++)g(v);return Y.createElement("div",{className:this.getYearContainerClassNames()},Y.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.clearSelectingDate},s))}}]),n}(),sF=function(t){Wt(n,Y.Component);var e=Yt(n);function n(r){var s;return Ut(this,n),F(z(s=e.call(this,r)),"onTimeChange",function(i){s.setState({time:i});var o=s.props.date,l=o instanceof Date&&!isNaN(o)?o:new Date;l.setHours(i.split(":")[0]),l.setMinutes(i.split(":")[1]),s.props.onChange(l)}),F(z(s),"renderTimeInput",function(){var i=s.state.time,o=s.props,l=o.date,d=o.timeString,u=o.customTimeInput;return u?Y.cloneElement(u,{date:l,value:i,onChange:s.onTimeChange}):Y.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",required:!0,value:i,onChange:function(p){s.onTimeChange(p.target.value||d)}})}),s.state={time:s.props.timeString},s}return Ht(n,[{key:"render",value:function(){return Y.createElement("div",{className:"react-datepicker__input-time-container"},Y.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),Y.createElement("div",{className:"react-datepicker-time__input-container"},Y.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.timeString!==s.time?{time:r.timeString}:null}}]),n}();function iF(t){var e=t.className,n=t.children,r=t.showPopperArrow,s=t.arrowProps,i=s===void 0?{}:s;return Y.createElement("div",{className:e},r&&Y.createElement("div",So({className:"react-datepicker__triangle"},i)),n)}var aF=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],oF=function(t){Wt(n,Y.Component);var e=Yt(n);function n(r){var s;return Ut(this,n),F(z(s=e.call(this,r)),"handleClickOutside",function(i){s.props.onClickOutside(i)}),F(z(s),"setClickOutsideRef",function(){return s.containerRef.current}),F(z(s),"handleDropdownFocus",function(i){(function(){var o=((arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).className||"").split(/\s+/);return aF.some(function(l){return o.indexOf(l)>=0})})(i.target)&&s.props.onDropdownFocus()}),F(z(s),"getDateInView",function(){var i=s.props,o=i.preSelection,l=i.selected,d=i.openToDate,u=nk(s.props),p=rk(s.props),f=Je(),x=d||l||o;return x||(u&&Ws(f,u)?u:p&&ai(f,p)?p:f)}),F(z(s),"increaseMonth",function(){s.setState(function(i){var o=i.date;return{date:_r(o,1)}},function(){return s.handleMonthChange(s.state.date)})}),F(z(s),"decreaseMonth",function(){s.setState(function(i){var o=i.date;return{date:_o(o,1)}},function(){return s.handleMonthChange(s.state.date)})}),F(z(s),"handleDayClick",function(i,o,l){s.props.onSelect(i,o,l),s.props.setPreSelection&&s.props.setPreSelection(i)}),F(z(s),"handleDayMouseEnter",function(i){s.setState({selectingDate:i}),s.props.onDayMouseEnter&&s.props.onDayMouseEnter(i)}),F(z(s),"handleMonthMouseLeave",function(){s.setState({selectingDate:null}),s.props.onMonthMouseLeave&&s.props.onMonthMouseLeave()}),F(z(s),"handleYearMouseEnter",function(i,o){s.setState({selectingDate:as(Je(),o)}),s.props.onYearMouseEnter&&s.props.onYearMouseEnter(i,o)}),F(z(s),"handleYearMouseLeave",function(i,o){s.props.onYearMouseLeave&&s.props.onYearMouseLeave(i,o)}),F(z(s),"handleYearChange",function(i){s.props.onYearChange&&(s.props.onYearChange(i),s.setState({isRenderAriaLiveMessage:!0})),s.props.adjustDateOnChange&&(s.props.onSelect&&s.props.onSelect(i),s.props.setOpen&&s.props.setOpen(!0)),s.props.setPreSelection&&s.props.setPreSelection(i)}),F(z(s),"handleMonthChange",function(i){s.handleCustomMonthChange(i),s.props.adjustDateOnChange&&(s.props.onSelect&&s.props.onSelect(i),s.props.setOpen&&s.props.setOpen(!0)),s.props.setPreSelection&&s.props.setPreSelection(i)}),F(z(s),"handleCustomMonthChange",function(i){s.props.onMonthChange&&(s.props.onMonthChange(i),s.setState({isRenderAriaLiveMessage:!0}))}),F(z(s),"handleMonthYearChange",function(i){s.handleYearChange(i),s.handleMonthChange(i)}),F(z(s),"changeYear",function(i){s.setState(function(o){var l=o.date;return{date:as(l,i)}},function(){return s.handleYearChange(s.state.date)})}),F(z(s),"changeMonth",function(i){s.setState(function(o){var l=o.date;return{date:un(l,i)}},function(){return s.handleMonthChange(s.state.date)})}),F(z(s),"changeMonthYear",function(i){s.setState(function(o){var l=o.date;return{date:as(un(l,sn(i)),Le(i))}},function(){return s.handleMonthYearChange(s.state.date)})}),F(z(s),"header",function(){var i=Wr(arguments.length>0&&arguments[0]!==void 0?arguments[0]:s.state.date,s.props.locale,s.props.calendarStartDay),o=[];return s.props.showWeekNumbers&&o.push(Y.createElement("div",{key:"W",className:"react-datepicker__day-name"},s.props.weekLabel||"#")),o.concat([0,1,2,3,4,5,6].map(function(l){var d=Bo(i,l),u=s.formatWeekday(d,s.props.locale),p=s.props.weekDayClassName?s.props.weekDayClassName(d):void 0;return Y.createElement("div",{key:l,className:Qt("react-datepicker__day-name",p)},u)}))}),F(z(s),"formatWeekday",function(i,o){return s.props.formatWeekDay?function(l,d,u){return d(dt(l,"EEEE",u))}(i,s.props.formatWeekDay,o):s.props.useWeekdaysShort?function(l,d){return dt(l,"EEE",d)}(i,o):function(l,d){return dt(l,"EEEEEE",d)}(i,o)}),F(z(s),"decreaseYear",function(){s.setState(function(i){var o=i.date;return{date:Ec(o,s.props.showYearPicker?s.props.yearItemNumber:1)}},function(){return s.handleYearChange(s.state.date)})}),F(z(s),"clearSelectingDate",function(){s.setState({selectingDate:null})}),F(z(s),"renderPreviousButton",function(){if(!s.props.renderCustomHeader){var i;switch(!0){case s.props.showMonthYearPicker:i=y_(s.state.date,s.props);break;case s.props.showYearPicker:i=function(_){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},S=N.minDate,P=N.yearItemNumber,M=P===void 0?Xl:P,A=Ga(Dl(Ec(_,M)),M).endPeriod,R=S&&Le(S);return R&&R>A||!1}(s.state.date,s.props);break;default:i=x_(s.state.date,s.props)}if((s.props.forceShowMonthNavigation||s.props.showDisabledMonthNavigation||!i)&&!s.props.showTimeSelectOnly){var o=["react-datepicker__navigation","react-datepicker__navigation--previous"],l=s.decreaseMonth;(s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker)&&(l=s.decreaseYear),i&&s.props.showDisabledMonthNavigation&&(o.push("react-datepicker__navigation--previous--disabled"),l=null);var d=s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker,u=s.props,p=u.previousMonthButtonLabel,f=u.previousYearButtonLabel,x=s.props,g=x.previousMonthAriaLabel,v=g===void 0?typeof p=="string"?p:"Previous Month":g,b=x.previousYearAriaLabel,j=b===void 0?typeof f=="string"?f:"Previous Year":b;return Y.createElement("button",{type:"button",className:o.join(" "),onClick:l,onKeyDown:s.props.handleOnKeyDown,"aria-label":d?j:v},Y.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"].join(" ")},d?s.props.previousYearButtonLabel:s.props.previousMonthButtonLabel))}}}),F(z(s),"increaseYear",function(){s.setState(function(i){var o=i.date;return{date:bo(o,s.props.showYearPicker?s.props.yearItemNumber:1)}},function(){return s.handleYearChange(s.state.date)})}),F(z(s),"renderNextButton",function(){if(!s.props.renderCustomHeader){var i;switch(!0){case s.props.showMonthYearPicker:i=b_(s.state.date,s.props);break;case s.props.showYearPicker:i=function(_){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},S=N.maxDate,P=N.yearItemNumber,M=P===void 0?Xl:P,A=Ga(bo(_,M),M).startPeriod,R=S&&Le(S);return R&&R<A||!1}(s.state.date,s.props);break;default:i=v_(s.state.date,s.props)}if((s.props.forceShowMonthNavigation||s.props.showDisabledMonthNavigation||!i)&&!s.props.showTimeSelectOnly){var o=["react-datepicker__navigation","react-datepicker__navigation--next"];s.props.showTimeSelect&&o.push("react-datepicker__navigation--next--with-time"),s.props.todayButton&&o.push("react-datepicker__navigation--next--with-today-button");var l=s.increaseMonth;(s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker)&&(l=s.increaseYear),i&&s.props.showDisabledMonthNavigation&&(o.push("react-datepicker__navigation--next--disabled"),l=null);var d=s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker,u=s.props,p=u.nextMonthButtonLabel,f=u.nextYearButtonLabel,x=s.props,g=x.nextMonthAriaLabel,v=g===void 0?typeof p=="string"?p:"Next Month":g,b=x.nextYearAriaLabel,j=b===void 0?typeof f=="string"?f:"Next Year":b;return Y.createElement("button",{type:"button",className:o.join(" "),onClick:l,onKeyDown:s.props.handleOnKeyDown,"aria-label":d?j:v},Y.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"].join(" ")},d?s.props.nextYearButtonLabel:s.props.nextMonthButtonLabel))}}}),F(z(s),"renderCurrentMonth",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s.state.date,o=["react-datepicker__current-month"];return s.props.showYearDropdown&&o.push("react-datepicker__current-month--hasYearDropdown"),s.props.showMonthDropdown&&o.push("react-datepicker__current-month--hasMonthDropdown"),s.props.showMonthYearDropdown&&o.push("react-datepicker__current-month--hasMonthYearDropdown"),Y.createElement("div",{className:o.join(" ")},dt(i,s.props.dateFormat,s.props.locale))}),F(z(s),"renderYearDropdown",function(){var i=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(s.props.showYearDropdown&&!i)return Y.createElement(qI,{adjustDateOnChange:s.props.adjustDateOnChange,date:s.state.date,onSelect:s.props.onSelect,setOpen:s.props.setOpen,dropdownMode:s.props.dropdownMode,onChange:s.changeYear,minDate:s.props.minDate,maxDate:s.props.maxDate,year:Le(s.state.date),scrollableYearDropdown:s.props.scrollableYearDropdown,yearDropdownItemNumber:s.props.yearDropdownItemNumber})}),F(z(s),"renderMonthDropdown",function(){var i=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(s.props.showMonthDropdown&&!i)return Y.createElement(KI,{dropdownMode:s.props.dropdownMode,locale:s.props.locale,onChange:s.changeMonth,month:sn(s.state.date),useShortMonthInDropdown:s.props.useShortMonthInDropdown})}),F(z(s),"renderMonthYearDropdown",function(){var i=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(s.props.showMonthYearDropdown&&!i)return Y.createElement(XI,{dropdownMode:s.props.dropdownMode,locale:s.props.locale,dateFormat:s.props.dateFormat,onChange:s.changeMonthYear,minDate:s.props.minDate,maxDate:s.props.maxDate,date:s.state.date,scrollableMonthYearDropdown:s.props.scrollableMonthYearDropdown})}),F(z(s),"handleTodayButtonClick",function(i){s.props.onSelect(p_(),i),s.props.setPreSelection&&s.props.setPreSelection(p_())}),F(z(s),"renderTodayButton",function(){if(s.props.todayButton&&!s.props.showTimeSelectOnly)return Y.createElement("div",{className:"react-datepicker__today-button",onClick:function(i){return s.handleTodayButtonClick(i)}},s.props.todayButton)}),F(z(s),"renderDefaultHeader",function(i){var o=i.monthDate,l=i.i;return Y.createElement("div",{className:"react-datepicker__header ".concat(s.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},s.renderCurrentMonth(o),Y.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(s.props.dropdownMode),onFocus:s.handleDropdownFocus},s.renderMonthDropdown(l!==0),s.renderMonthYearDropdown(l!==0),s.renderYearDropdown(l!==0)),Y.createElement("div",{className:"react-datepicker__day-names"},s.header(o)))}),F(z(s),"renderCustomHeader",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=i.monthDate,l=i.i;if(s.props.showTimeSelect&&!s.state.monthContainer||s.props.showTimeSelectOnly)return null;var d=x_(s.state.date,s.props),u=v_(s.state.date,s.props),p=y_(s.state.date,s.props),f=b_(s.state.date,s.props),x=!s.props.showMonthYearPicker&&!s.props.showQuarterYearPicker&&!s.props.showYearPicker;return Y.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:s.props.onDropdownFocus},s.props.renderCustomHeader(jh(jh({},s.state),{},{customHeaderCount:l,monthDate:o,changeMonth:s.changeMonth,changeYear:s.changeYear,decreaseMonth:s.decreaseMonth,increaseMonth:s.increaseMonth,decreaseYear:s.decreaseYear,increaseYear:s.increaseYear,prevMonthButtonDisabled:d,nextMonthButtonDisabled:u,prevYearButtonDisabled:p,nextYearButtonDisabled:f})),x&&Y.createElement("div",{className:"react-datepicker__day-names"},s.header(o)))}),F(z(s),"renderYearHeader",function(){var i=s.state.date,o=s.props,l=o.showYearPicker,d=Ga(i,o.yearItemNumber),u=d.startPeriod,p=d.endPeriod;return Y.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},l?"".concat(u," - ").concat(p):Le(i))}),F(z(s),"renderHeader",function(i){switch(!0){case s.props.renderCustomHeader!==void 0:return s.renderCustomHeader(i);case(s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker):return s.renderYearHeader(i);default:return s.renderDefaultHeader(i)}}),F(z(s),"renderMonths",function(){var i;if(!s.props.showTimeSelectOnly&&!s.props.showYearPicker){for(var o=[],l=s.props.showPreviousMonths?s.props.monthsShown-1:0,d=_o(s.state.date,l),u=(i=s.props.monthSelectedIn)!==null&&i!==void 0?i:l,p=0;p<s.props.monthsShown;++p){var f=_r(d,p-u+l),x="month-".concat(p),g=p<s.props.monthsShown-1,v=p>0;o.push(Y.createElement("div",{key:x,ref:function(b){s.monthContainer=b},className:"react-datepicker__month-container"},s.renderHeader({monthDate:f,i:p}),Y.createElement(nF,{chooseDayAriaLabelPrefix:s.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:s.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:s.props.weekAriaLabelPrefix,ariaLabelPrefix:s.props.monthAriaLabelPrefix,onChange:s.changeMonthYear,day:f,dayClassName:s.props.dayClassName,calendarStartDay:s.props.calendarStartDay,monthClassName:s.props.monthClassName,onDayClick:s.handleDayClick,handleOnKeyDown:s.props.handleOnDayKeyDown,onDayMouseEnter:s.handleDayMouseEnter,onMouseLeave:s.handleMonthMouseLeave,onWeekSelect:s.props.onWeekSelect,orderInDisplay:p,formatWeekNumber:s.props.formatWeekNumber,locale:s.props.locale,minDate:s.props.minDate,maxDate:s.props.maxDate,excludeDates:s.props.excludeDates,excludeDateIntervals:s.props.excludeDateIntervals,highlightDates:s.props.highlightDates,holidays:s.props.holidays,selectingDate:s.state.selectingDate,includeDates:s.props.includeDates,includeDateIntervals:s.props.includeDateIntervals,inline:s.props.inline,shouldFocusDayInline:s.props.shouldFocusDayInline,fixedHeight:s.props.fixedHeight,filterDate:s.props.filterDate,preSelection:s.props.preSelection,setPreSelection:s.props.setPreSelection,selected:s.props.selected,selectsStart:s.props.selectsStart,selectsEnd:s.props.selectsEnd,selectsRange:s.props.selectsRange,selectsDisabledDaysInRange:s.props.selectsDisabledDaysInRange,showWeekNumbers:s.props.showWeekNumbers,startDate:s.props.startDate,endDate:s.props.endDate,peekNextMonth:s.props.peekNextMonth,setOpen:s.props.setOpen,shouldCloseOnSelect:s.props.shouldCloseOnSelect,renderDayContents:s.props.renderDayContents,renderMonthContent:s.props.renderMonthContent,renderQuarterContent:s.props.renderQuarterContent,renderYearContent:s.props.renderYearContent,disabledKeyboardNavigation:s.props.disabledKeyboardNavigation,showMonthYearPicker:s.props.showMonthYearPicker,showFullMonthYearPicker:s.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:s.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:s.props.showFourColumnMonthYearPicker,showYearPicker:s.props.showYearPicker,showQuarterYearPicker:s.props.showQuarterYearPicker,showWeekPicker:s.props.showWeekPicker,isInputFocused:s.props.isInputFocused,containerRef:s.containerRef,monthShowsDuplicateDaysEnd:g,monthShowsDuplicateDaysStart:v})))}return o}}),F(z(s),"renderYears",function(){if(!s.props.showTimeSelectOnly)return s.props.showYearPicker?Y.createElement("div",{className:"react-datepicker__year--container"},s.renderHeader(),Y.createElement(rF,So({onDayClick:s.handleDayClick,selectingDate:s.state.selectingDate,clearSelectingDate:s.clearSelectingDate,date:s.state.date},s.props,{onYearMouseEnter:s.handleYearMouseEnter,onYearMouseLeave:s.handleYearMouseLeave}))):void 0}),F(z(s),"renderTimeSection",function(){if(s.props.showTimeSelect&&(s.state.monthContainer||s.props.showTimeSelectOnly))return Y.createElement(ok,{selected:s.props.selected,openToDate:s.props.openToDate,onChange:s.props.onTimeChange,timeClassName:s.props.timeClassName,format:s.props.timeFormat,includeTimes:s.props.includeTimes,intervals:s.props.timeIntervals,minTime:s.props.minTime,maxTime:s.props.maxTime,excludeTimes:s.props.excludeTimes,filterTime:s.props.filterTime,timeCaption:s.props.timeCaption,todayButton:s.props.todayButton,showMonthDropdown:s.props.showMonthDropdown,showMonthYearDropdown:s.props.showMonthYearDropdown,showYearDropdown:s.props.showYearDropdown,withPortal:s.props.withPortal,monthRef:s.state.monthContainer,injectTimes:s.props.injectTimes,locale:s.props.locale,handleOnKeyDown:s.props.handleOnKeyDown,showTimeSelectOnly:s.props.showTimeSelectOnly})}),F(z(s),"renderInputTimeSection",function(){var i=new Date(s.props.selected),o=Ls(i)&&s.props.selected?"".concat(w_(i.getHours()),":").concat(w_(i.getMinutes())):"";if(s.props.showTimeInput)return Y.createElement(sF,{date:i,timeString:o,timeInputLabel:s.props.timeInputLabel,onChange:s.props.onTimeChange,customTimeInput:s.props.customTimeInput})}),F(z(s),"renderAriaLiveRegion",function(){var i,o=Ga(s.state.date,s.props.yearItemNumber),l=o.startPeriod,d=o.endPeriod;return i=s.props.showYearPicker?"".concat(l," - ").concat(d):s.props.showMonthYearPicker||s.props.showQuarterYearPicker?Le(s.state.date):"".concat(jv(sn(s.state.date),s.props.locale)," ").concat(Le(s.state.date)),Y.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},s.state.isRenderAriaLiveMessage&&i)}),F(z(s),"renderChildren",function(){if(s.props.children)return Y.createElement("div",{className:"react-datepicker__children-container"},s.props.children)}),s.containerRef=Y.createRef(),s.state={date:s.getDateInView(),selectingDate:null,monthContainer:null,isRenderAriaLiveMessage:!1},s}return Ht(n,[{key:"componentDidMount",value:function(){var r=this;this.props.showTimeSelect&&(this.assignMonthContainer=void r.setState({monthContainer:r.monthContainer}))}},{key:"componentDidUpdate",value:function(r){var s=this;if(!this.props.preSelection||nt(this.props.preSelection,r.preSelection)&&this.props.monthSelectedIn===r.monthSelectedIn)this.props.openToDate&&!nt(this.props.openToDate,r.openToDate)&&this.setState({date:this.props.openToDate});else{var i=!gr(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return i&&s.handleCustomMonthChange(s.state.date)})}}},{key:"render",value:function(){var r=this.props.container||iF;return Y.createElement("div",{style:{display:"contents"},ref:this.containerRef},Y.createElement(r,{className:Qt("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showPopperArrow:this.props.showPopperArrow,arrowProps:this.props.arrowProps},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))}}],[{key:"defaultProps",get:function(){return{onDropdownFocus:function(){},monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",customTimeInput:null,yearItemNumber:Xl}}}]),n}(),lF=function(t){var e=t.icon,n=t.className,r=n===void 0?"":n,s=t.onClick,i="react-datepicker__calendar-icon";return Y.isValidElement(e)?Y.cloneElement(e,{className:"".concat(e.props.className||""," ").concat(i," ").concat(r),onClick:function(o){typeof e.props.onClick=="function"&&e.props.onClick(o),typeof s=="function"&&s(o)}}):typeof e=="string"?Y.createElement("i",{className:"".concat(i," ").concat(e," ").concat(r),"aria-hidden":"true",onClick:s}):Y.createElement("svg",{className:"".concat(i," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},Y.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},lk=function(t){Wt(n,Y.Component);var e=Yt(n);function n(r){var s;return Ut(this,n),(s=e.call(this,r)).el=document.createElement("div"),s}return Ht(n,[{key:"componentDidMount",value:function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.portalRoot.removeChild(this.el)}},{key:"render",value:function(){return lP.createPortal(this.props.children,this.el)}}]),n}(),cF=function(t){return!t.disabled&&t.tabIndex!==-1},ck=function(t){Wt(n,Y.Component);var e=Yt(n);function n(r){var s;return Ut(this,n),F(z(s=e.call(this,r)),"getTabChildren",function(){return Array.prototype.slice.call(s.tabLoopRef.current.querySelectorAll("[tabindex], a, button, input, select, textarea"),1,-1).filter(cF)}),F(z(s),"handleFocusStart",function(){var i=s.getTabChildren();i&&i.length>1&&i[i.length-1].focus()}),F(z(s),"handleFocusEnd",function(){var i=s.getTabChildren();i&&i.length>1&&i[0].focus()}),s.tabLoopRef=Y.createRef(),s}return Ht(n,[{key:"render",value:function(){return this.props.enableTabLoop?Y.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},Y.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:"0",onFocus:this.handleFocusStart}),this.props.children,Y.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:"0",onFocus:this.handleFocusEnd})):this.props.children}}],[{key:"defaultProps",get:function(){return{enableTabLoop:!0}}}]),n}(),dF=function(t){Wt(n,Y.Component);var e=Yt(n);function n(){return Ut(this,n),e.apply(this,arguments)}return Ht(n,[{key:"render",value:function(){var r,s=this.props,i=s.className,o=s.wrapperClassName,l=s.hidePopper,d=s.popperComponent,u=s.popperModifiers,p=s.popperPlacement,f=s.popperProps,x=s.targetComponent,g=s.enableTabLoop,v=s.popperOnKeyDown,b=s.portalId,j=s.portalHost;if(!l){var _=Qt("react-datepicker-popper",i);r=Y.createElement(LI,So({modifiers:u,placement:p},f),function(S){var P=S.ref,M=S.style,A=S.placement,R=S.arrowProps;return Y.createElement(ck,{enableTabLoop:g},Y.createElement("div",{ref:P,style:M,className:_,"data-placement":A,onKeyDown:v},Y.cloneElement(d,{arrowProps:R})))})}this.props.popperContainer&&(r=Y.createElement(this.props.popperContainer,{},r)),b&&!l&&(r=Y.createElement(lk,{portalId:b,portalHost:j},r));var N=Qt("react-datepicker-wrapper",o);return Y.createElement(gA,{className:"react-datepicker-manager"},Y.createElement(FI,null,function(S){var P=S.ref;return Y.createElement("div",{ref:P,className:N},x)}),r)}}],[{key:"defaultProps",get:function(){return{hidePopper:!0,popperModifiers:[],popperProps:{},popperPlacement:"bottom-start"}}}]),n}(),k_="react-datepicker-ignore-onclickoutside",uF=fp(oF),Jf="Date input not valid.",Zd=function(t){Wt(n,Y.Component);var e=Yt(n);function n(r){var s;return Ut(this,n),F(z(s=e.call(this,r)),"getPreSelection",function(){return s.props.openToDate?s.props.openToDate:s.props.selectsEnd&&s.props.startDate?s.props.startDate:s.props.selectsStart&&s.props.endDate?s.props.endDate:Je()}),F(z(s),"modifyHolidays",function(){var i;return(i=s.props.holidays)===null||i===void 0?void 0:i.reduce(function(o,l){var d=new Date(l.date);return Cc(d)?[].concat(Oc(o),[jh(jh({},l),{},{date:d})]):o},[])}),F(z(s),"calcInitialState",function(){var i,o=s.getPreSelection(),l=nk(s.props),d=rk(s.props),u=l&&Ws(o,Ur(l))?l:d&&ai(o,Lg(d))?d:o;return{open:s.props.startOpen||!1,preventFocus:!1,preSelection:(i=s.props.selectsRange?s.props.startDate:s.props.selected)!==null&&i!==void 0?i:u,highlightDates:__(s.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1}}),F(z(s),"clearPreventFocusTimeout",function(){s.preventFocusTimeout&&clearTimeout(s.preventFocusTimeout)}),F(z(s),"setFocus",function(){s.input&&s.input.focus&&s.input.focus({preventScroll:!0})}),F(z(s),"setBlur",function(){s.input&&s.input.blur&&s.input.blur(),s.cancelFocusInput()}),F(z(s),"setOpen",function(i){var o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];s.setState({open:i,preSelection:i&&s.state.open?s.state.preSelection:s.calcInitialState().preSelection,lastPreSelectChange:em},function(){i||s.setState(function(l){return{focused:!!o&&l.focused}},function(){!o&&s.setBlur(),s.setState({inputValue:null})})})}),F(z(s),"inputOk",function(){return pp(s.state.preSelection)}),F(z(s),"isCalendarOpen",function(){return s.props.open===void 0?s.state.open&&!s.props.disabled&&!s.props.readOnly:s.props.open}),F(z(s),"handleFocus",function(i){s.state.preventFocus||(s.props.onFocus(i),s.props.preventOpenOnFocus||s.props.readOnly||s.setOpen(!0)),s.setState({focused:!0})}),F(z(s),"sendFocusBackToInput",function(){s.preventFocusTimeout&&s.clearPreventFocusTimeout(),s.setState({preventFocus:!0},function(){s.preventFocusTimeout=setTimeout(function(){s.setFocus(),s.setState({preventFocus:!1})})})}),F(z(s),"cancelFocusInput",function(){clearTimeout(s.inputFocusTimeout),s.inputFocusTimeout=null}),F(z(s),"deferFocusInput",function(){s.cancelFocusInput(),s.inputFocusTimeout=setTimeout(function(){return s.setFocus()},1)}),F(z(s),"handleDropdownFocus",function(){s.cancelFocusInput()}),F(z(s),"handleBlur",function(i){(!s.state.open||s.props.withPortal||s.props.showTimeInput)&&s.props.onBlur(i),s.setState({focused:!1})}),F(z(s),"handleCalendarClickOutside",function(i){s.props.inline||s.setOpen(!1),s.props.onClickOutside(i),s.props.withPortal&&i.preventDefault()}),F(z(s),"handleChange",function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];var d=o[0];if(!s.props.onChangeRaw||(s.props.onChangeRaw.apply(z(s),o),typeof d.isDefaultPrevented=="function"&&!d.isDefaultPrevented())){s.setState({inputValue:d.target.value,lastPreSelectChange:hF});var u,p,f,x,g,v,b,j,_=(u=d.target.value,p=s.props.dateFormat,f=s.props.locale,x=s.props.strictParsing,g=s.props.minDate,v=null,b=Gi(f)||Gi(Ki()),j=!0,Array.isArray(p)?(p.forEach(function(N){var S=Yf(u,N,new Date,{locale:b});x&&(j=Ls(S,g)&&u===dt(S,N,f)),Ls(S,g)&&j&&(v=S)}),v):(v=Yf(u,p,new Date,{locale:b}),x?j=Ls(v)&&u===dt(v,p,f):Ls(v)||(p=p.match(BI).map(function(N){var S=N[0];return S==="p"||S==="P"?b?(0,zI[S])(N,b.formatLong):S:N}).join(""),u.length>0&&(v=Yf(u,p.slice(0,u.length),new Date)),Ls(v)||(v=new Date(u))),Ls(v)&&j?v:null));s.props.showTimeSelectOnly&&s.props.selected&&_&&!nt(_,s.props.selected)&&(_=$I(s.props.selected,{hours:Br(_),minutes:zr(_),seconds:Ub(_)})),!_&&d.target.value||(s.props.showWeekPicker&&(_=Wr(_,s.props.locale,s.props.calendarStartDay)),s.setSelected(_,d,!0))}}),F(z(s),"handleSelect",function(i,o,l){if(s.props.shouldCloseOnSelect&&!s.props.showTimeSelect&&s.sendFocusBackToInput(),s.props.onChangeRaw&&s.props.onChangeRaw(o),s.props.showWeekPicker&&(i=Wr(i,s.props.locale,s.props.calendarStartDay)),s.setSelected(i,o,!1,l),s.props.showDateSelect&&s.setState({isRenderAriaLiveMessage:!0}),!s.props.shouldCloseOnSelect||s.props.showTimeSelect)s.setPreSelection(i);else if(!s.props.inline){s.props.selectsRange||s.setOpen(!1);var d=s.props,u=d.startDate,p=d.endDate;!u||p||Ws(i,u)||s.setOpen(!1)}}),F(z(s),"setSelected",function(i,o,l,d){var u=i;if(s.props.showYearPicker){if(u!==null&&tk(Le(u),s.props))return}else if(s.props.showMonthYearPicker){if(u!==null&&ek(u,s.props))return}else if(u!==null&&gp(u,s.props))return;var p=s.props,f=p.onChange,x=p.selectsRange,g=p.startDate,v=p.endDate;if(!Ui(s.props.selected,u)||s.props.allowSameDay||x)if(u!==null&&(!s.props.selected||l&&(s.props.showTimeSelect||s.props.showTimeSelectOnly||s.props.showTimeInput)||(u=u_(u,{hour:Br(s.props.selected),minute:zr(s.props.selected),second:Ub(s.props.selected)})),s.props.inline||s.setState({preSelection:u}),s.props.focusSelectedMonth||s.setState({monthSelectedIn:d})),x){var b=g&&!v,j=g&&v;!g&&!v?f([u,null],o):b&&(Ws(u,g)?f([u,null],o):f([g,u],o)),j&&f([u,null],o)}else f(u,o);l||(s.props.onSelect(u,o),s.setState({inputValue:null}))}),F(z(s),"setPreSelection",function(i){var o=s.props.minDate!==void 0,l=s.props.maxDate!==void 0,d=!0;if(i){s.props.showWeekPicker&&(i=Wr(i,s.props.locale,s.props.calendarStartDay));var u=Ur(i);if(o&&l)d=Eu(i,s.props.minDate,s.props.maxDate);else if(o){var p=Ur(s.props.minDate);d=ai(i,p)||Ui(u,p)}else if(l){var f=Lg(s.props.maxDate);d=Ws(i,f)||Ui(u,f)}}d&&s.setState({preSelection:i})}),F(z(s),"toggleCalendar",function(){s.setOpen(!s.state.open)}),F(z(s),"handleTimeChange",function(i){var o=s.props.selected?s.props.selected:s.getPreSelection(),l=s.props.selected?i:u_(o,{hour:Br(i),minute:zr(i)});s.setState({preSelection:l}),s.props.onChange(l),s.props.shouldCloseOnSelect&&(s.sendFocusBackToInput(),s.setOpen(!1)),s.props.showTimeInput&&s.setOpen(!0),(s.props.showTimeSelectOnly||s.props.showTimeSelect)&&s.setState({isRenderAriaLiveMessage:!0}),s.setState({inputValue:null})}),F(z(s),"onInputClick",function(){s.props.disabled||s.props.readOnly||s.setOpen(!0),s.props.onInputClick()}),F(z(s),"onInputKeyDown",function(i){s.props.onKeyDown(i);var o=i.key;if(s.state.open||s.props.inline||s.props.preventOpenOnFocus){if(s.state.open){if(o==="ArrowDown"||o==="ArrowUp"){i.preventDefault();var l=s.props.showWeekPicker&&s.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',d=s.calendar.componentNode&&s.calendar.componentNode.querySelector(l);return void(d&&d.focus({preventScroll:!0}))}var u=Je(s.state.preSelection);o==="Enter"?(i.preventDefault(),s.inputOk()&&s.state.lastPreSelectChange===em?(s.handleSelect(u,i),!s.props.shouldCloseOnSelect&&s.setPreSelection(u)):s.setOpen(!1)):o==="Escape"?(i.preventDefault(),s.sendFocusBackToInput(),s.setOpen(!1)):o==="Tab"&&s.setOpen(!1),s.inputOk()||s.props.onInputError({code:1,msg:Jf})}}else o!=="ArrowDown"&&o!=="ArrowUp"&&o!=="Enter"||s.onInputClick()}),F(z(s),"onPortalKeyDown",function(i){i.key==="Escape"&&(i.preventDefault(),s.setState({preventFocus:!0},function(){s.setOpen(!1),setTimeout(function(){s.setFocus(),s.setState({preventFocus:!1})})}))}),F(z(s),"onDayKeyDown",function(i){s.props.onKeyDown(i);var o=i.key,l=Je(s.state.preSelection);if(o==="Enter")i.preventDefault(),s.handleSelect(l,i),!s.props.shouldCloseOnSelect&&s.setPreSelection(l);else if(o==="Escape")i.preventDefault(),s.setOpen(!1),s.inputOk()||s.props.onInputError({code:1,msg:Jf});else if(!s.props.disabledKeyboardNavigation){var d;switch(o){case"ArrowLeft":d=s.props.showWeekPicker?Bb(l,1):E6(l,1);break;case"ArrowRight":d=s.props.showWeekPicker?mh(l,1):Bo(l,1);break;case"ArrowUp":d=Bb(l,1);break;case"ArrowDown":d=mh(l,1);break;case"PageUp":d=_o(l,1);break;case"PageDown":d=_r(l,1);break;case"Home":d=Ec(l,1);break;case"End":d=bo(l,1);break;default:d=null}if(!d)return void(s.props.onInputError&&s.props.onInputError({code:1,msg:Jf}));if(i.preventDefault(),s.setState({lastPreSelectChange:em}),s.props.adjustDateOnChange&&s.setSelected(d),s.setPreSelection(d),s.props.inline){var u=sn(l),p=sn(d),f=Le(l),x=Le(d);u!==p||f!==x?s.setState({shouldFocusDayInline:!0}):s.setState({shouldFocusDayInline:!1})}}}),F(z(s),"onPopperKeyDown",function(i){i.key==="Escape"&&(i.preventDefault(),s.sendFocusBackToInput())}),F(z(s),"onClearClick",function(i){i&&i.preventDefault&&i.preventDefault(),s.sendFocusBackToInput(),s.props.selectsRange?s.props.onChange([null,null],i):s.props.onChange(null,i),s.setState({inputValue:null})}),F(z(s),"clear",function(){s.onClearClick()}),F(z(s),"onScroll",function(i){typeof s.props.closeOnScroll=="boolean"&&s.props.closeOnScroll?i.target!==document&&i.target!==document.documentElement&&i.target!==document.body||s.setOpen(!1):typeof s.props.closeOnScroll=="function"&&s.props.closeOnScroll(i)&&s.setOpen(!1)}),F(z(s),"renderCalendar",function(){return s.props.inline||s.isCalendarOpen()?Y.createElement(uF,{ref:function(i){s.calendar=i},locale:s.props.locale,calendarStartDay:s.props.calendarStartDay,chooseDayAriaLabelPrefix:s.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:s.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:s.props.weekAriaLabelPrefix,monthAriaLabelPrefix:s.props.monthAriaLabelPrefix,adjustDateOnChange:s.props.adjustDateOnChange,setOpen:s.setOpen,shouldCloseOnSelect:s.props.shouldCloseOnSelect,dateFormat:s.props.dateFormatCalendar,useWeekdaysShort:s.props.useWeekdaysShort,formatWeekDay:s.props.formatWeekDay,dropdownMode:s.props.dropdownMode,selected:s.props.selected,preSelection:s.state.preSelection,onSelect:s.handleSelect,onWeekSelect:s.props.onWeekSelect,openToDate:s.props.openToDate,minDate:s.props.minDate,maxDate:s.props.maxDate,selectsStart:s.props.selectsStart,selectsEnd:s.props.selectsEnd,selectsRange:s.props.selectsRange,startDate:s.props.startDate,endDate:s.props.endDate,excludeDates:s.props.excludeDates,excludeDateIntervals:s.props.excludeDateIntervals,filterDate:s.props.filterDate,onClickOutside:s.handleCalendarClickOutside,formatWeekNumber:s.props.formatWeekNumber,highlightDates:s.state.highlightDates,holidays:HI(s.modifyHolidays()),includeDates:s.props.includeDates,includeDateIntervals:s.props.includeDateIntervals,includeTimes:s.props.includeTimes,injectTimes:s.props.injectTimes,inline:s.props.inline,shouldFocusDayInline:s.state.shouldFocusDayInline,peekNextMonth:s.props.peekNextMonth,showMonthDropdown:s.props.showMonthDropdown,showPreviousMonths:s.props.showPreviousMonths,useShortMonthInDropdown:s.props.useShortMonthInDropdown,showMonthYearDropdown:s.props.showMonthYearDropdown,showWeekNumbers:s.props.showWeekNumbers,showYearDropdown:s.props.showYearDropdown,withPortal:s.props.withPortal,forceShowMonthNavigation:s.props.forceShowMonthNavigation,showDisabledMonthNavigation:s.props.showDisabledMonthNavigation,scrollableYearDropdown:s.props.scrollableYearDropdown,scrollableMonthYearDropdown:s.props.scrollableMonthYearDropdown,todayButton:s.props.todayButton,weekLabel:s.props.weekLabel,outsideClickIgnoreClass:k_,fixedHeight:s.props.fixedHeight,monthsShown:s.props.monthsShown,monthSelectedIn:s.state.monthSelectedIn,onDropdownFocus:s.handleDropdownFocus,onMonthChange:s.props.onMonthChange,onYearChange:s.props.onYearChange,dayClassName:s.props.dayClassName,weekDayClassName:s.props.weekDayClassName,monthClassName:s.props.monthClassName,timeClassName:s.props.timeClassName,showDateSelect:s.props.showDateSelect,showTimeSelect:s.props.showTimeSelect,showTimeSelectOnly:s.props.showTimeSelectOnly,onTimeChange:s.handleTimeChange,timeFormat:s.props.timeFormat,timeIntervals:s.props.timeIntervals,minTime:s.props.minTime,maxTime:s.props.maxTime,excludeTimes:s.props.excludeTimes,filterTime:s.props.filterTime,timeCaption:s.props.timeCaption,className:s.props.calendarClassName,container:s.props.calendarContainer,yearItemNumber:s.props.yearItemNumber,yearDropdownItemNumber:s.props.yearDropdownItemNumber,previousMonthAriaLabel:s.props.previousMonthAriaLabel,previousMonthButtonLabel:s.props.previousMonthButtonLabel,nextMonthAriaLabel:s.props.nextMonthAriaLabel,nextMonthButtonLabel:s.props.nextMonthButtonLabel,previousYearAriaLabel:s.props.previousYearAriaLabel,previousYearButtonLabel:s.props.previousYearButtonLabel,nextYearAriaLabel:s.props.nextYearAriaLabel,nextYearButtonLabel:s.props.nextYearButtonLabel,timeInputLabel:s.props.timeInputLabel,disabledKeyboardNavigation:s.props.disabledKeyboardNavigation,renderCustomHeader:s.props.renderCustomHeader,popperProps:s.props.popperProps,renderDayContents:s.props.renderDayContents,renderMonthContent:s.props.renderMonthContent,renderQuarterContent:s.props.renderQuarterContent,renderYearContent:s.props.renderYearContent,onDayMouseEnter:s.props.onDayMouseEnter,onMonthMouseLeave:s.props.onMonthMouseLeave,onYearMouseEnter:s.props.onYearMouseEnter,onYearMouseLeave:s.props.onYearMouseLeave,selectsDisabledDaysInRange:s.props.selectsDisabledDaysInRange,showTimeInput:s.props.showTimeInput,showMonthYearPicker:s.props.showMonthYearPicker,showFullMonthYearPicker:s.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:s.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:s.props.showFourColumnMonthYearPicker,showYearPicker:s.props.showYearPicker,showQuarterYearPicker:s.props.showQuarterYearPicker,showWeekPicker:s.props.showWeekPicker,showPopperArrow:s.props.showPopperArrow,excludeScrollbar:s.props.excludeScrollbar,handleOnKeyDown:s.props.onKeyDown,handleOnDayKeyDown:s.onDayKeyDown,isInputFocused:s.state.focused,customTimeInput:s.props.customTimeInput,setPreSelection:s.setPreSelection},s.props.children):null}),F(z(s),"renderAriaLiveRegion",function(){var i,o=s.props,l=o.dateFormat,d=o.locale,u=s.props.showTimeInput||s.props.showTimeSelect?"PPPPp":"PPPP";return i=s.props.selectsRange?"Selected start date: ".concat(Tr(s.props.startDate,{dateFormat:u,locale:d}),". ").concat(s.props.endDate?"End date: "+Tr(s.props.endDate,{dateFormat:u,locale:d}):""):s.props.showTimeSelectOnly?"Selected time: ".concat(Tr(s.props.selected,{dateFormat:l,locale:d})):s.props.showYearPicker?"Selected year: ".concat(Tr(s.props.selected,{dateFormat:"yyyy",locale:d})):s.props.showMonthYearPicker?"Selected month: ".concat(Tr(s.props.selected,{dateFormat:"MMMM yyyy",locale:d})):s.props.showQuarterYearPicker?"Selected quarter: ".concat(Tr(s.props.selected,{dateFormat:"yyyy, QQQ",locale:d})):"Selected date: ".concat(Tr(s.props.selected,{dateFormat:u,locale:d})),Y.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},i)}),F(z(s),"renderDateInput",function(){var i,o=Qt(s.props.className,F({},k_,s.state.open)),l=s.props.customInput||Y.createElement("input",{type:"text"}),d=s.props.customInputRef||"ref",u=typeof s.props.value=="string"?s.props.value:typeof s.state.inputValue=="string"?s.state.inputValue:s.props.selectsRange?function(p,f,x){if(!p)return"";var g=Tr(p,x),v=f?Tr(f,x):"";return"".concat(g," - ").concat(v)}(s.props.startDate,s.props.endDate,s.props):Tr(s.props.selected,s.props);return Y.cloneElement(l,(F(F(F(F(F(F(F(F(F(F(i={},d,function(p){s.input=p}),"value",u),"onBlur",s.handleBlur),"onChange",s.handleChange),"onClick",s.onInputClick),"onFocus",s.handleFocus),"onKeyDown",s.onInputKeyDown),"id",s.props.id),"name",s.props.name),"form",s.props.form),F(F(F(F(F(F(F(F(F(F(i,"autoFocus",s.props.autoFocus),"placeholder",s.props.placeholderText),"disabled",s.props.disabled),"autoComplete",s.props.autoComplete),"className",Qt(l.props.className,o)),"title",s.props.title),"readOnly",s.props.readOnly),"required",s.props.required),"tabIndex",s.props.tabIndex),"aria-describedby",s.props.ariaDescribedBy),F(F(F(i,"aria-invalid",s.props.ariaInvalid),"aria-labelledby",s.props.ariaLabelledBy),"aria-required",s.props.ariaRequired)))}),F(z(s),"renderClearButton",function(){var i=s.props,o=i.isClearable,l=i.disabled,d=i.selected,u=i.startDate,p=i.endDate,f=i.clearButtonTitle,x=i.clearButtonClassName,g=x===void 0?"":x,v=i.ariaLabelClose,b=v===void 0?"Close":v;return!o||d==null&&u==null&&p==null?null:Y.createElement("button",{type:"button",className:Qt("react-datepicker__close-icon",g,{"react-datepicker__close-icon--disabled":l}),disabled:l,"aria-label":b,onClick:s.onClearClick,title:f,tabIndex:-1})}),s.state=s.calcInitialState(),s.preventFocusTimeout=null,s}return Ht(n,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll,!0)}},{key:"componentDidUpdate",value:function(r,s){var i,o;r.inline&&(i=r.selected,o=this.props.selected,i&&o?sn(i)!==sn(o)||Le(i)!==Le(o):i!==o)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&r.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),r.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:__(this.props.highlightDates)}),s.focused||Ui(r.selected,this.props.selected)||this.setState({inputValue:null}),s.open!==this.state.open&&(s.open===!1&&this.state.open===!0&&this.props.onCalendarOpen(),s.open===!0&&this.state.open===!1&&this.props.onCalendarClose())}},{key:"componentWillUnmount",value:function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0)}},{key:"renderInputContainer",value:function(){var r=this.props,s=r.showIcon,i=r.icon,o=r.calendarIconClassname,l=r.toggleCalendarOnIconClick,d=this.state.open;return Y.createElement("div",{className:"react-datepicker__input-container".concat(s?" react-datepicker__view-calendar-icon":"")},s&&Y.createElement(lF,So({icon:i,className:"".concat(o," ").concat(d&&"react-datepicker-ignore-onclickoutside")},l?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())}},{key:"render",value:function(){var r=this.renderCalendar();if(this.props.inline)return r;if(this.props.withPortal){var s=this.state.open?Y.createElement(ck,{enableTabLoop:this.props.enableTabLoop},Y.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},r)):null;return this.state.open&&this.props.portalId&&(s=Y.createElement(lk,{portalId:this.props.portalId,portalHost:this.props.portalHost},s)),Y.createElement("div",null,this.renderInputContainer(),s)}return Y.createElement(dF,{className:this.props.popperClassName,wrapperClassName:this.props.wrapperClassName,hidePopper:!this.isCalendarOpen(),portalId:this.props.portalId,portalHost:this.props.portalHost,popperModifiers:this.props.popperModifiers,targetComponent:this.renderInputContainer(),popperContainer:this.props.popperContainer,popperComponent:r,popperPlacement:this.props.popperPlacement,popperProps:this.props.popperProps,popperOnKeyDown:this.onPopperKeyDown,enableTabLoop:this.props.enableTabLoop})}}],[{key:"defaultProps",get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",onChange:function(){},disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",onFocus:function(){},onBlur:function(){},onKeyDown:function(){},onInputClick:function(){},onSelect:function(){},onClickOutside:function(){},onMonthChange:function(){},onCalendarOpen:function(){},onCalendarClose:function(){},preventOpenOnFocus:!1,onYearChange:function(){},onInputError:function(){},monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Xl,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1}}}]),n}(),hF="input",em="navigate";function pF({discounts:t=[],onChange:e}){const[n,r]=w.useState({price:"",start_date:null,end_date:null,description:""}),s=()=>{if(!n.price||!n.start_date||!n.end_date){$.error("الرجاء إدخال السعر وتواريخ التخفيض");return}if(n.start_date>=n.end_date){$.error("تاريخ البداية يجب أن يكون قبل تاريخ النهاية");return}const l={id:Vr(),...n};e([...t,l]),r({price:"",start_date:null,end_date:null,description:""})},i=l=>{e(t.filter(d=>d.id!==l))},o=(l,d,u)=>{e(t.map(p=>p.id===l?{...p,[d]:u}:p))};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"التخفيضات المجدولة"}),t.length>0?a.jsx("div",{className:"space-y-4",children:t.map(l=>a.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex-1 grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"سعر التخفيض (₪)"}),a.jsx("input",{type:"number",value:l.price,onChange:d=>o(l.id,"price",parseFloat(d.target.value)),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ البداية"}),a.jsx(Zd,{selected:new Date(l.start_date),onChange:d=>o(l.id,"start_date",d),className:"w-full border rounded-md px-3 py-1.5",dateFormat:"yyyy/MM/dd",minDate:new Date})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ النهاية"}),a.jsx(Zd,{selected:new Date(l.end_date),onChange:d=>o(l.id,"end_date",d),className:"w-full border rounded-md px-3 py-1.5",dateFormat:"yyyy/MM/dd",minDate:new Date(l.start_date)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الوصف"}),a.jsx("input",{type:"text",value:l.description,onChange:d=>o(l.id,"description",d.target.value),className:"w-full border rounded-md px-3 py-1.5",placeholder:"مثال: تخفيض العيد"})]})]}),a.jsx("button",{type:"button",onClick:()=>i(l.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]},l.id))}):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"لا توجد تخفيضات مجدولة"})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"إضافة تخفيض جديد"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"سعر التخفيض (₪)"}),a.jsx("input",{type:"number",value:n.price,onChange:l=>r({...n,price:parseFloat(l.target.value)}),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ البداية"}),a.jsx(Zd,{selected:n.start_date,onChange:l=>r({...n,start_date:l}),className:"w-full border rounded-md px-3 py-1.5",dateFormat:"yyyy/MM/dd",minDate:new Date,placeholderText:"اختر تاريخ البداية"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ النهاية"}),a.jsx(Zd,{selected:n.end_date,onChange:l=>r({...n,end_date:l}),className:"w-full border rounded-md px-3 py-1.5",dateFormat:"yyyy/MM/dd",minDate:n.start_date||new Date,placeholderText:"اختر تاريخ النهاية"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الوصف"}),a.jsx("input",{type:"text",value:n.description,onChange:l=>r({...n,description:l.target.value}),className:"w-full border rounded-md px-3 py-1.5",placeholder:"مثال: تخفيض العيد"})]})]}),a.jsx("div",{className:"mt-4 flex justify-end",children:a.jsx("button",{type:"button",onClick:s,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"إضافة التخفيض"})})]})]})}function fF({attributes:t=[],onChange:e}){const[n,r]=w.useState({name:"",type:"select",required:!1,values:[]}),[s,i]=w.useState(""),o=()=>{if(!n.name){$.error("الرجاء إدخال اسم السمة");return}if(n.type==="select"&&n.values.length===0){$.error("الرجاء إضافة قيم للسمة");return}const f={id:Vr(),...n};e([...t,f]),r({name:"",type:"select",required:!1,values:[]})},l=f=>{e(t.filter(x=>x.id!==f))},d=(f,x,g)=>{e(t.map(v=>v.id===f?{...v,[x]:g}:v))},u=()=>{if(!s){$.error("الرجاء إدخال قيمة");return}r({...n,values:[...n.values,{id:Vr(),value:s}]}),i("")},p=(f,x)=>{e(t.map(g=>g.id===f?{...g,values:g.values.filter(v=>v.id!==x)}:g))};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"السمات العامة"}),t.length>0?a.jsx("div",{className:"space-y-4",children:t.map(f=>a.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex-1 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم السمة"}),a.jsx("input",{type:"text",value:f.name,onChange:x=>d(f.id,"name",x.target.value),className:"w-full border rounded-md px-3 py-1.5",placeholder:"مثال: المقاس"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع السمة"}),a.jsxs("select",{value:f.type,onChange:x=>d(f.id,"type",x.target.value),className:"w-full border rounded-md px-3 py-1.5",children:[a.jsx("option",{value:"select",children:"قائمة اختيار"}),a.jsx("option",{value:"text",children:"نص"}),a.jsx("option",{value:"number",children:"رقم"})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:f.required,onChange:x=>d(f.id,"required",x.target.checked),className:"ml-2"}),"إجباري"]})})]}),f.type==="select"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"القيم المتاحة"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:f.values.map(x=>a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[x.value,a.jsx("button",{type:"button",onClick:()=>p(f.id,x.id),className:"mr-1 text-blue-600 hover:text-blue-800",children:"×"})]},x.id))})]})]}),a.jsx("button",{type:"button",onClick:()=>l(f.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]},f.id))}):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"لا توجد سمات بعد"})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"إضافة سمة جديدة"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم السمة"}),a.jsx("input",{type:"text",value:n.name,onChange:f=>r({...n,name:f.target.value}),className:"w-full border rounded-md px-3 py-1.5",placeholder:"مثال: المقاس"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع السمة"}),a.jsxs("select",{value:n.type,onChange:f=>r({...n,type:f.target.value}),className:"w-full border rounded-md px-3 py-1.5",children:[a.jsx("option",{value:"select",children:"قائمة اختيار"}),a.jsx("option",{value:"text",children:"نص"}),a.jsx("option",{value:"number",children:"رقم"})]})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:n.required,onChange:f=>r({...n,required:f.target.checked}),className:"ml-2"}),"إجباري"]})})]}),n.type==="select"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"القيم المتاحة"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:s,onChange:f=>i(f.target.value),className:"flex-1 border rounded-md px-3 py-1.5",placeholder:"أدخل قيمة"}),a.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"إضافة"})]}),a.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:n.values.map(f=>a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[f.value,a.jsx("button",{type:"button",onClick:()=>r({...n,values:n.values.filter(x=>x.id!==f.id)}),className:"mr-1 text-blue-600 hover:text-blue-800",children:"×"})]},f.id))})]})]}),a.jsx("div",{className:"mt-4 flex justify-end",children:a.jsx("button",{type:"button",onClick:o,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"إضافة السمة"})})]})]})}function mF({addons:t=[],onChange:e}){const[n,r]=w.useState({name:"",price:0,is_default:!1,is_required:!1}),s=()=>{if(!n.name){$.error("الرجاء إدخال اسم الإضافة");return}const l={id:Vr(),...n};e([...t,l]),r({name:"",price:0,is_default:!1,is_required:!1})},i=l=>{e(t.filter(d=>d.id!==l))},o=(l,d,u)=>{e(t.map(p=>p.id===l?{...p,[d]:u}:p))};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"الإضافات"}),t.length>0?a.jsx("div",{className:"space-y-4",children:t.map(l=>a.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex-1 grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الإضافة"}),a.jsx("input",{type:"text",value:l.name,onChange:d=>o(l.id,"name",d.target.value),className:"w-full border rounded-md px-3 py-1.5"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعر (₪)"}),a.jsx("input",{type:"number",value:l.price,onChange:d=>o(l.id,"price",parseFloat(d.target.value)),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:l.is_default,onChange:d=>o(l.id,"is_default",d.target.checked),className:"ml-2"}),"افتراضي"]})}),a.jsx("div",{className:"flex items-end",children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:l.is_required,onChange:d=>o(l.id,"is_required",d.target.checked),className:"ml-2"}),"إجباري"]})})]}),a.jsx("button",{type:"button",onClick:()=>i(l.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]},l.id))}):a.jsx("p",{className:"text-gray-500 text-center py-4",children:"لا توجد إضافات بعد"})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"إضافة إضافة جديدة"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الإضافة"}),a.jsx("input",{type:"text",value:n.name,onChange:l=>r({...n,name:l.target.value}),className:"w-full border rounded-md px-3 py-1.5",placeholder:"مثال: سكر إضافي"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعر (₪)"}),a.jsx("input",{type:"number",value:n.price,onChange:l=>r({...n,price:parseFloat(l.target.value)}),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:n.is_default,onChange:l=>r({...n,is_default:l.target.checked}),className:"ml-2"}),"افتراضي"]})}),a.jsx("div",{className:"flex items-end",children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:n.is_required,onChange:l=>r({...n,is_required:l.target.checked}),className:"ml-2"}),"إجباري"]})})]}),a.jsx("div",{className:"mt-4 flex justify-end",children:a.jsx("button",{type:"button",onClick:s,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"إضافة"})})]})]})}function gF({onSubmit:t,initialData:e=null}){const[n,r]=w.useState({name:"",description:"",price:"",wholesale_price:"",discount_price:"",scheduled_discounts:[],vendor_id:"",category_id:"",status:"active",image:"",gallery:[],video:"",stock:0,addons:[],type:"regular",variants:[],wholesale_prices:[],attributes:[],...e}),[s,i]=w.useState([]),[o,l]=w.useState([]),[d,u]=w.useState(!0);w.useEffect(()=>{(async()=>{try{u(!0);const{data:x,error:g}=await ee.from("vendors").select("id, store_name").order("store_name");g?(console.error("Error fetching vendors:",g),i([{id:1,store_name:"متجر كوفي"},{id:2,store_name:"متجر الشاي"},{id:3,store_name:"متجر العصائر"}])):i(x||[]);const{data:v,error:b}=await ee.from("categories").select("id, name").order("name");b?(console.error("Error fetching categories:",b),l([{id:1,name:"مشروبات ساخنة"},{id:2,name:"عصائر"},{id:3,name:"حلويات"}])):l(v||[])}catch(x){console.error("Error fetching data:",x),i([{id:1,store_name:"متجر كوفي"},{id:2,store_name:"متجر الشاي"},{id:3,store_name:"متجر العصائر"}]),l([{id:1,name:"مشروبات ساخنة"},{id:2,name:"عصائر"},{id:3,name:"حلويات"}])}finally{u(!1)}})()},[]);const p=f=>{if(f.preventDefault(),!n.name||!n.price||!n.vendor_id||!n.category_id){$.error("الرجاء تعبئة جميع الحقول المطلوبة");return}t(n)};return a.jsxs("form",{onSubmit:p,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"col-span-1 md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع المنتج"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",value:"regular",checked:n.type==="regular",onChange:f=>r({...n,type:f.target.value}),className:"ml-2"}),"منتج عادي"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",value:"variant",checked:n.type==="variant",onChange:f=>r({...n,type:f.target.value}),className:"ml-2"}),"منتج متعدد الأنواع"]})]})]}),a.jsxs("div",{className:"col-span-1 md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الصورة المميزة"}),a.jsx(xs,{type:"image",preview:n.image,onUpload:({preview:f})=>r({...n,image:f})})]}),a.jsxs("div",{className:"col-span-1 md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"معرض الصور"}),a.jsx(SL,{images:n.gallery,onUpdate:f=>r({...n,gallery:f})})]}),a.jsxs("div",{className:"col-span-1 md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"فيديو المنتج"}),a.jsx(xs,{type:"video",preview:n.video,onUpload:({preview:f})=>r({...n,video:f})})]}),a.jsxs("div",{className:"col-span-1 md:col-span-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم المنتج ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"text",value:n.name,onChange:f=>r({...n,name:f.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{className:"col-span-1 md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),a.jsx("textarea",{value:n.description,onChange:f=>r({...n,description:f.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),n.type==="regular"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["السعر (₪) ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"number",value:n.price,onChange:f=>r({...n,price:f.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"سعر الجملة (₪)"}),a.jsx("input",{type:"number",value:n.wholesale_price,onChange:f=>r({...n,wholesale_price:f.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"اختياري"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"سعر التخفيض الحالي (₪)"}),a.jsx("input",{type:"number",value:n.discount_price,onChange:f=>r({...n,discount_price:f.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"اختياري"})]})]}),a.jsx("div",{className:"col-span-1 md:col-span-2",children:a.jsx(pF,{discounts:n.scheduled_discounts,onChange:f=>r({...n,scheduled_discounts:f})})}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["المخزون ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"number",value:n.stock,onChange:f=>r({...n,stock:parseInt(f.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",required:!0})]})]}):a.jsx("div",{className:"col-span-1 md:col-span-2",children:a.jsx(EL,{variants:n.variants,onChange:f=>r({...n,variants:f})})}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["المتجر ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsxs("select",{value:n.vendor_id,onChange:f=>r({...n,vendor_id:f.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,disabled:d,children:[a.jsx("option",{value:"",children:"اختر المتجر"}),s.map(f=>a.jsx("option",{value:f.id,children:f.store_name},f.id))]}),d&&a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"جاري تحميل المتاجر..."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["التصنيف ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsxs("select",{value:n.category_id,onChange:f=>r({...n,category_id:f.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,disabled:d,children:[a.jsx("option",{value:"",children:"اختر التصنيف"}),o.map(f=>a.jsx("option",{value:f.id,children:f.name},f.id))]}),d&&a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"جاري تحميل التصنيفات..."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الحالة ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsxs("select",{value:n.status,onChange:f=>r({...n,status:f.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[a.jsx("option",{value:"active",children:"نشط"}),a.jsx("option",{value:"inactive",children:"غير نشط"}),a.jsx("option",{value:"draft",children:"مسودة"})]})]}),a.jsxs("div",{className:"col-span-1 md:col-span-2",children:[a.jsx(CL,{prices:n.wholesale_prices,onChange:f=>r({...n,wholesale_prices:f})}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"أسعار الجملة اختيارية"})]}),a.jsx("div",{className:"col-span-1 md:col-span-2",children:a.jsx(fF,{attributes:n.attributes,onChange:f=>r({...n,attributes:f})})}),a.jsx("div",{className:"col-span-1 md:col-span-2",children:a.jsx(mF,{addons:n.addons,onChange:f=>r({...n,addons:f})})})]}),a.jsx("div",{className:"flex justify-end space-x-2 pt-4",children:a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:e?"تحديث":"إضافة"})})]})}function xF(){const[t,e]=w.useState([]),[n,r]=w.useState([]),[s,i]=w.useState([]),[o,l]=w.useState(!0),[d,u]=w.useState(null),[p,f]=w.useState(!1),[x,g]=w.useState(null),[v,b]=w.useState("grid"),[j,_]=w.useState(null),[N,S]=w.useState({});w.useEffect(()=>{P()},[]);const P=async()=>{try{l(!0),u(null);const{data:E,error:K}=await ee.from("products").select("*");if(K)throw K;const{data:re,error:Q}=await ee.from("categories").select("*").order("name");if(Q)throw Q;r(re||[]);const{data:se,error:le}=await ee.from("vendors").select("id, store_name");if(le)throw le;i(se||[]);const ie=await Promise.all((E||[]).map(async ge=>{let ve=null;if(ge.category_id){const{data:oe}=await ee.from("categories").select("name").eq("id",ge.category_id).single();oe&&(ve=oe)}let W=null;if(ge.vendor_id){const{data:oe}=await ee.from("vendors").select("store_name").eq("id",ge.vendor_id).single();oe&&(W=oe)}return{...ge,category:ve,vendor:W}}));e(ie)}catch(E){console.error("Error fetching data:",E),u("فشل في تحميل البيانات. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل البيانات")}finally{l(!1)}},M={name:{type:"text",label:"اسم المنتج",placeholder:"البحث باسم المنتج",value:""},vendor_id:{type:"select",label:"المتجر",placeholder:"جميع المتاجر",options:s.map(E=>({value:E.id,label:E.store_name})),value:""},category_id:{type:"select",label:"التصنيف",placeholder:"جميع التصنيفات",options:n.map(E=>({value:E.id,label:E.name})),value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"active",label:"نشط"},{value:"inactive",label:"غير نشط"},{value:"draft",label:"مسودة"}],value:""}},{filters:A,filterData:R,handleFilterChange:T}=Bn(M),V=async E=>{try{l(!0);const K={id:x?x.id:Vr(),name:E.name,description:E.description,price:parseFloat(E.price),wholesale_price:E.wholesale_price?parseFloat(E.wholesale_price):null,discount_price:E.discount_price?parseFloat(E.discount_price):null,vendor_id:E.vendor_id,category_id:E.category_id,status:E.status,stock:parseInt(E.stock),image_url:E.image};if(x){const{data:re,error:Q}=await ee.from("products").update(K).eq("id",x.id).select();if(Q)throw Q;if(E.addons&&E.addons.length>0){await ee.from("product_addons").delete().eq("product_id",x.id);const se=E.addons.map(ie=>({product_id:x.id,name:ie.name,price:parseFloat(ie.price),is_default:ie.is_default,is_required:ie.is_required})),{error:le}=await ee.from("product_addons").insert(se);if(le)throw le}$.success("تم تحديث المنتج بنجاح")}else{const{data:re,error:Q}=await ee.from("products").insert([K]).select();if(Q)throw Q;if(E.addons&&E.addons.length>0&&re&&re.length>0){const se=E.addons.map(ie=>({product_id:re[0].id,name:ie.name,price:parseFloat(ie.price),is_default:ie.is_default,is_required:ie.is_required})),{error:le}=await ee.from("product_addons").insert(se);if(le)throw le}$.success("تم إضافة المنتج بنجاح")}P(),f(!1),g(null)}catch(K){console.error("Error saving product:",K),$.error(x?"فشل في تحديث المنتج":"فشل في إضافة المنتج")}finally{l(!1)}},D=async E=>{if(window.confirm("هل أنت متأكد من حذف هذا المنتج؟"))try{l(!0);const{error:K}=await ee.from("products").delete().eq("id",E);if(K)throw K;$.success("تم حذف المنتج بنجاح"),P()}catch(K){console.error("Error deleting product:",K),$.error("فشل في حذف المنتج")}finally{l(!1)}},U=(E,K)=>{_({id:E.id,field:K}),S({...N,[E.id]:{...N[E.id]||{},[K]:E[K]}})},te=(E,K,re)=>{S({...N,[E]:{...N[E]||{},[K]:re}})},G=async E=>{try{const K=N[E];if(!K)return;K.price!==void 0&&(K.price=parseFloat(K.price)),K.wholesale_price!==void 0&&(K.wholesale_price=parseFloat(K.wholesale_price)||null),K.discount_price!==void 0&&(K.discount_price=parseFloat(K.discount_price)||null),K.stock!==void 0&&(K.stock=parseInt(K.stock));const{error:re}=await ee.from("products").update(K).eq("id",E);if(re)throw re;$.success("تم تحديث المنتج بنجاح"),P(),_(null)}catch(K){console.error("Error updating product:",K),$.error("فشل في تحديث المنتج")}},B=()=>{_(null)},Z=E=>{switch(E){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"draft":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},C=E=>{switch(E){case"active":return"نشط";case"inactive":return"غير نشط";case"draft":return"مسودة";default:return E}},q=R(t),I=()=>a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6",children:q.length===0?a.jsx("div",{className:"col-span-full text-center py-12",children:a.jsx("p",{className:"text-gray-500",children:"لا توجد منتجات متطابقة مع معايير البحث"})}):q.map(E=>{var K,re;return a.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[E.image_url&&a.jsx("img",{src:E.image_url,alt:E.name,className:"w-full h-48 object-cover",onError:Q=>{Q.target.onerror=null,Q.target.src="https://via.placeholder.com/300x200?text=No+Image"}}),a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold",children:E.name}),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Z(E.status)}`,children:C(E.status)})]}),a.jsx("p",{className:"text-gray-600 text-sm mb-2",children:E.description}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("p",{className:"text-xl font-bold text-green-600",children:["₪",E.price]}),E.wholesale_price&&a.jsxs("p",{className:"text-sm text-gray-500",children:["سعر الجملة: ₪",E.wholesale_price]}),E.discount_price&&a.jsxs("p",{className:"text-sm text-red-500",children:["سعر التخفيض: ₪",E.discount_price]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["المخزون: ",E.stock," قطعة"]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["المتجر: ",(K=E.vendor)==null?void 0:K.store_name]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["التصنيف: ",(re=E.category)==null?void 0:re.name]})]}),a.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[a.jsx("button",{onClick:()=>{g(E),f(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),a.jsx("button",{onClick:()=>D(E.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]})]},E.id)})}),X=()=>a.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المنتج"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"السعر"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"سعر الجملة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"سعر التخفيض"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المخزون"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المتجر"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التصنيف"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:q.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"9",className:"px-6 py-4 text-center text-gray-500",children:"لا توجد منتجات متطابقة مع معايير البحث"})}):q.map(E=>{var K,re,Q,se,le,ie,ge,ve,W;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[E.image_url&&a.jsx("img",{src:E.image_url,alt:E.name,className:"w-10 h-10 rounded-full object-cover ml-3",onError:oe=>{oe.target.onerror=null,oe.target.src="https://via.placeholder.com/40?text=No+Image"}}),a.jsxs("div",{children:[(j==null?void 0:j.id)===E.id&&(j==null?void 0:j.field)==="name"?a.jsx("input",{type:"text",value:((K=N[E.id])==null?void 0:K.name)||E.name,onChange:oe=>te(E.id,"name",oe.target.value),className:"w-full border rounded-md px-2 py-1 text-sm",autoFocus:!0}):a.jsx("div",{className:"font-medium text-gray-900 cursor-pointer hover:text-blue-600",onClick:()=>U(E,"name"),children:E.name}),(j==null?void 0:j.id)===E.id&&(j==null?void 0:j.field)==="description"?a.jsx("textarea",{value:((re=N[E.id])==null?void 0:re.description)||E.description||"",onChange:oe=>te(E.id,"description",oe.target.value),className:"w-full border rounded-md px-2 py-1 text-sm mt-1",rows:"2",autoFocus:!0}):a.jsx("div",{className:"text-gray-500 cursor-pointer hover:text-blue-600",onClick:()=>U(E,"description"),children:E.description||"إضافة وصف"})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(j==null?void 0:j.id)===E.id&&(j==null?void 0:j.field)==="price"?a.jsx("input",{type:"number",value:((Q=N[E.id])==null?void 0:Q.price)||E.price,onChange:oe=>te(E.id,"price",oe.target.value),className:"w-24 border rounded-md px-2 py-1 text-sm",min:"0",step:"0.01",autoFocus:!0}):a.jsxs("div",{className:"text-lg font-semibold text-green-600 cursor-pointer hover:text-blue-600",onClick:()=>U(E,"price"),children:["₪",E.price]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(j==null?void 0:j.id)===E.id&&(j==null?void 0:j.field)==="wholesale_price"?a.jsx("input",{type:"number",value:((se=N[E.id])==null?void 0:se.wholesale_price)||E.wholesale_price||"",onChange:oe=>te(E.id,"wholesale_price",oe.target.value),className:"w-24 border rounded-md px-2 py-1 text-sm",min:"0",step:"0.01",autoFocus:!0}):a.jsx("div",{className:"text-gray-500 cursor-pointer hover:text-blue-600",onClick:()=>U(E,"wholesale_price"),children:E.wholesale_price?`₪${E.wholesale_price}`:"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(j==null?void 0:j.id)===E.id&&(j==null?void 0:j.field)==="discount_price"?a.jsx("input",{type:"number",value:((le=N[E.id])==null?void 0:le.discount_price)||E.discount_price||"",onChange:oe=>te(E.id,"discount_price",oe.target.value),className:"w-24 border rounded-md px-2 py-1 text-sm",min:"0",step:"0.01",autoFocus:!0}):a.jsx("div",{className:"text-red-500 cursor-pointer hover:text-blue-600",onClick:()=>U(E,"discount_price"),children:E.discount_price?`₪${E.discount_price}`:"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(j==null?void 0:j.id)===E.id&&(j==null?void 0:j.field)==="stock"?a.jsx("input",{type:"number",value:((ie=N[E.id])==null?void 0:ie.stock)||E.stock,onChange:oe=>te(E.id,"stock",oe.target.value),className:"w-24 border rounded-md px-2 py-1 text-sm",min:"0",autoFocus:!0}):a.jsxs("div",{className:"text-gray-500 cursor-pointer hover:text-blue-600",onClick:()=>U(E,"stock"),children:[E.stock," قطعة"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:(ge=E.vendor)==null?void 0:ge.store_name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:(ve=E.category)==null?void 0:ve.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(j==null?void 0:j.id)===E.id&&(j==null?void 0:j.field)==="status"?a.jsxs("select",{value:((W=N[E.id])==null?void 0:W.status)||E.status,onChange:oe=>te(E.id,"status",oe.target.value),className:"border rounded-md px-2 py-1 text-sm",autoFocus:!0,children:[a.jsx("option",{value:"active",children:"نشط"}),a.jsx("option",{value:"inactive",children:"غير نشط"}),a.jsx("option",{value:"draft",children:"مسودة"})]}):a.jsx("span",{className:`px-2 py-1 text-xs rounded-full cursor-pointer ${Z(E.status)}`,onClick:()=>U(E,"status"),children:C(E.status)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(j==null?void 0:j.id)===E.id?a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>G(E.id),className:"text-green-600 hover:text-green-800 ml-2",children:"حفظ"}),a.jsx("button",{onClick:B,className:"text-gray-600 hover:text-gray-800",children:"إلغاء"})]}):a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>{g(E),f(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),a.jsx("button",{onClick:()=>D(E.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})})]},E.id)})})]})})});return o&&t.length===0?a.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):d?a.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),a.jsx("p",{children:d}),a.jsx("button",{onClick:P,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"إدارة المنتجات"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>b("grid"),className:`px-3 py-1 rounded ${v==="grid"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض شبكي"}),a.jsx("button",{onClick:()=>b("table"),className:`px-3 py-1 rounded ${v==="table"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض جدول"})]}),a.jsx("button",{onClick:()=>{g(null),f(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة منتج جديد"})]})]}),a.jsx(zn,{filters:A,onFilterChange:T}),v==="grid"?I():X(),a.jsx(_e,{open:p,onClose:()=>{f(!1),g(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-start justify-center min-h-screen",children:[a.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),a.jsxs("div",{className:"relative bg-white w-full min-h-screen",children:[a.jsx("div",{className:"sticky top-0 bg-white border-b z-10",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[a.jsx(_e.Title,{className:"text-2xl font-bold",children:x?"تعديل منتج":"إضافة منتج جديد"}),a.jsx("button",{onClick:()=>{f(!1),g(null)},className:"p-2 rounded-full hover:bg-gray-100",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:a.jsx(gF,{onSubmit:V,initialData:x})})]})]})}),a.jsxs("div",{className:"fixed bottom-4 right-4 bg-blue-600 text-white p-4 rounded-lg shadow-lg max-w-xs",children:[a.jsx("h4",{className:"font-bold mb-2",children:"تلميح: التعديل السريع"}),a.jsx("p",{className:"text-sm",children:'يمكنك النقر مباشرة على أي حقل في العرض الجدولي للتعديل السريع، ثم الضغط على زر "حفظ" لتأكيد التغييرات.'})]})]})}function vF(){const[t,e]=w.useState([]),[n,r]=w.useState(!1),[s,i]=w.useState(!0),[o,l]=w.useState(null),[d,u]=w.useState({name:"",slug:"",description:"",parent_id:"",image_url:""});w.useEffect(()=>{b()},[]);const p={name:{type:"text",label:"اسم التصنيف",placeholder:"البحث باسم التصنيف",value:""},parent_id:{type:"select",label:"التصنيف الأب",placeholder:"جميع التصنيفات",options:t.map(M=>({value:M.id,label:M.name})),value:""}},{filters:f,filterData:x,handleFilterChange:g}=Bn(p),v=x(t),b=async()=>{try{i(!0),l(null);const{data:M,error:A}=await ee.from("categories").select("*").order("name");if(A)throw A;e(M||[])}catch(M){console.error("Error fetching categories:",M),l("فشل في تحميل التصنيفات. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل التصنيفات")}finally{i(!1)}},j=async M=>{let A=M,R=1,T=!1;for(;!T;){const{data:V,error:D}=await ee.from("categories").select("id").eq("slug",A).maybeSingle();if(D)throw D;!V||d.id&&V.id===d.id?T=!0:(A=`${M}-${R}`,R++)}return A},_=async M=>{M.preventDefault();try{const A=d.name.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""),R=await j(A),T={...d,slug:R,parent_id:d.parent_id||null};if(d.id||(T.id=Vr()),d.id){const{error:V}=await ee.from("categories").update(T).eq("id",d.id);if(V)throw V;$.success("تم تحديث التصنيف بنجاح")}else{const{error:V}=await ee.from("categories").insert([T]);if(V)throw V;$.success("تم إضافة التصنيف بنجاح")}r(!1),u({name:"",slug:"",description:"",parent_id:"",image_url:""}),b()}catch(A){console.error("Error saving category:",A),$.error(d.id?"فشل في تحديث التصنيف":"فشل في إضافة التصنيف")}},N=async M=>{if(window.confirm("هل أنت متأكد من حذف هذا التصنيف؟"))try{const{error:A}=await ee.from("categories").delete().eq("id",M);if(A)throw A;$.success("تم حذف التصنيف بنجاح"),b()}catch(A){console.error("Error deleting category:",A),$.error("فشل في حذف التصنيف")}},S=({preview:M})=>{M&&u({...d,image_url:M})};if(s)return a.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(o)return a.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),a.jsx("p",{children:o}),a.jsx("button",{onClick:b,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]});const P=(M,A=0)=>{var R,T;return a.jsxs(Y.Fragment,{children:[a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{style:{marginRight:`${A*20}px`},children:[A>0&&"↳ ",M.name]})}),a.jsx("td",{className:"px-6 py-4",children:M.description}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:((R=t.find(V=>V.id===M.parent_id))==null?void 0:R.name)||"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:M.image_url?a.jsx("img",{src:M.image_url,alt:M.name,className:"w-10 h-10 object-cover rounded",onError:V=>{V.target.onerror=null,V.target.src="https://via.placeholder.com/40?text=No+Image"}}):"-"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[a.jsx("button",{onClick:()=>{u(M),r(!0)},className:"text-blue-600 hover:text-blue-900 ml-4",children:"تعديل"}),a.jsx("button",{onClick:()=>N(M.id),className:"text-red-600 hover:text-red-900",children:"حذف"})]})]}),(T=M.children)==null?void 0:T.map(V=>P(V,A+1))]},M.id)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"التصنيفات"}),a.jsx("button",{onClick:()=>{u({name:"",slug:"",description:"",parent_id:"",image_url:""}),r(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"إضافة تصنيف جديد"})]}),a.jsx(zn,{filters:f,onFilterChange:g}),a.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:a.jsx("div",{className:"p-6",children:t.length===0?a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-gray-500",children:"لا توجد تصنيفات. قم بإضافة تصنيف جديد."})}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الاسم"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الوصف"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التصنيف الأب"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الصورة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(M=>P(M))})]})})})}),a.jsx(_e,{open:n,onClose:()=>r(!1),className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),a.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[a.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:d.id?"تعديل تصنيف":"إضافة تصنيف جديد"}),a.jsxs("form",{onSubmit:_,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم التصنيف ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"text",value:d.name,onChange:M=>{u({...d,name:M.target.value})},className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),a.jsx("textarea",{value:d.description,onChange:M=>u({...d,description:M.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"التصنيف الأب"}),a.jsxs("select",{value:d.parent_id||"",onChange:M=>u({...d,parent_id:M.target.value||null}),className:"w-full border rounded-md px-3 py-2",children:[a.jsx("option",{value:"",children:"بدون تصنيف أب"}),t.filter(M=>M.id!==d.id).map(M=>a.jsx("option",{value:M.id,children:M.name},M.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"صورة التصنيف"}),a.jsx(xs,{type:"image",preview:d.image_url,onUpload:S,storeInSupabase:!0,bucket:It.GENERAL,folder:"categories"})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>{r(!1),u({name:"",slug:"",description:"",parent_id:"",image_url:""})},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:d.id?"تحديث":"إضافة"})]})]})]})]})})]})}function yF(t,e){const n=w.useRef(e);w.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const bF=1;function _F(t){return Object.freeze({__version:bF,map:t})}function wF(t,e){return Object.freeze({...t,...e})}const dk=w.createContext(null),uk=dk.Provider;function hk(){const t=w.useContext(dk);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function jF(t){function e(n,r){const{instance:s,context:i}=t(n).current;return w.useImperativeHandle(r,()=>s),n.children==null?null:Y.createElement(uk,{value:i},n.children)}return w.forwardRef(e)}function NF(t){function e(n,r){const{instance:s}=t(n).current;return w.useImperativeHandle(r,()=>s),null}return w.forwardRef(e)}function kF(t,e){const n=w.useRef();w.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function pk(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var Hg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(pn,function(n){var r="1.9.4";function s(c){var h,m,y,k;for(m=1,y=arguments.length;m<y;m++){k=arguments[m];for(h in k)c[h]=k[h]}return c}var i=Object.create||function(){function c(){}return function(h){return c.prototype=h,new c}}();function o(c,h){var m=Array.prototype.slice;if(c.bind)return c.bind.apply(c,m.call(arguments,1));var y=m.call(arguments,2);return function(){return c.apply(h,y.length?y.concat(m.call(arguments)):arguments)}}var l=0;function d(c){return"_leaflet_id"in c||(c._leaflet_id=++l),c._leaflet_id}function u(c,h,m){var y,k,O,H;return H=function(){y=!1,k&&(O.apply(m,k),k=!1)},O=function(){y?k=arguments:(c.apply(m,arguments),setTimeout(H,h),y=!0)},O}function p(c,h,m){var y=h[1],k=h[0],O=y-k;return c===y&&m?c:((c-k)%O+O)%O+k}function f(){return!1}function x(c,h){if(h===!1)return c;var m=Math.pow(10,h===void 0?6:h);return Math.round(c*m)/m}function g(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}function v(c){return g(c).split(/\s+/)}function b(c,h){Object.prototype.hasOwnProperty.call(c,"options")||(c.options=c.options?i(c.options):{});for(var m in h)c.options[m]=h[m];return c.options}function j(c,h,m){var y=[];for(var k in c)y.push(encodeURIComponent(m?k.toUpperCase():k)+"="+encodeURIComponent(c[k]));return(!h||h.indexOf("?")===-1?"?":"&")+y.join("&")}var _=/\{ *([\w_ -]+) *\}/g;function N(c,h){return c.replace(_,function(m,y){var k=h[y];if(k===void 0)throw new Error("No value provided for variable "+m);return typeof k=="function"&&(k=k(h)),k})}var S=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"};function P(c,h){for(var m=0;m<c.length;m++)if(c[m]===h)return m;return-1}var M="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function A(c){return window["webkit"+c]||window["moz"+c]||window["ms"+c]}var R=0;function T(c){var h=+new Date,m=Math.max(0,16-(h-R));return R=h+m,window.setTimeout(c,m)}var V=window.requestAnimationFrame||A("RequestAnimationFrame")||T,D=window.cancelAnimationFrame||A("CancelAnimationFrame")||A("CancelRequestAnimationFrame")||function(c){window.clearTimeout(c)};function U(c,h,m){if(m&&V===T)c.call(h);else return V.call(window,o(c,h))}function te(c){c&&D.call(window,c)}var G={__proto__:null,extend:s,create:i,bind:o,get lastId(){return l},stamp:d,throttle:u,wrapNum:p,falseFn:f,formatNum:x,trim:g,splitWords:v,setOptions:b,getParamString:j,template:N,isArray:S,indexOf:P,emptyImageUrl:M,requestFn:V,cancelFn:D,requestAnimFrame:U,cancelAnimFrame:te};function B(){}B.extend=function(c){var h=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=h.__super__=this.prototype,y=i(m);y.constructor=h,h.prototype=y;for(var k in this)Object.prototype.hasOwnProperty.call(this,k)&&k!=="prototype"&&k!=="__super__"&&(h[k]=this[k]);return c.statics&&s(h,c.statics),c.includes&&(Z(c.includes),s.apply(null,[y].concat(c.includes))),s(y,c),delete y.statics,delete y.includes,y.options&&(y.options=m.options?i(m.options):{},s(y.options,c.options)),y._initHooks=[],y.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var O=0,H=y._initHooks.length;O<H;O++)y._initHooks[O].call(this)}},h},B.include=function(c){var h=this.prototype.options;return s(this.prototype,c),c.options&&(this.prototype.options=h,this.mergeOptions(c.options)),this},B.mergeOptions=function(c){return s(this.prototype.options,c),this},B.addInitHook=function(c){var h=Array.prototype.slice.call(arguments,1),m=typeof c=="function"?c:function(){this[c].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function Z(c){if(!(typeof L>"u"||!L||!L.Mixin)){c=S(c)?c:[c];for(var h=0;h<c.length;h++)c[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var C={on:function(c,h,m){if(typeof c=="object")for(var y in c)this._on(y,c[y],h);else{c=v(c);for(var k=0,O=c.length;k<O;k++)this._on(c[k],h,m)}return this},off:function(c,h,m){if(!arguments.length)delete this._events;else if(typeof c=="object")for(var y in c)this._off(y,c[y],h);else{c=v(c);for(var k=arguments.length===1,O=0,H=c.length;O<H;O++)k?this._off(c[O]):this._off(c[O],h,m)}return this},_on:function(c,h,m,y){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(c,h,m)===!1){m===this&&(m=void 0);var k={fn:h,ctx:m};y&&(k.once=!0),this._events=this._events||{},this._events[c]=this._events[c]||[],this._events[c].push(k)}},_off:function(c,h,m){var y,k,O;if(this._events&&(y=this._events[c],!!y)){if(arguments.length===1){if(this._firingCount)for(k=0,O=y.length;k<O;k++)y[k].fn=f;delete this._events[c];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var H=this._listens(c,h,m);if(H!==!1){var J=y[H];this._firingCount&&(J.fn=f,this._events[c]=y=y.slice()),y.splice(H,1)}}},fire:function(c,h,m){if(!this.listens(c,m))return this;var y=s({},h,{type:c,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var k=this._events[c];if(k){this._firingCount=this._firingCount+1||1;for(var O=0,H=k.length;O<H;O++){var J=k[O],ne=J.fn;J.once&&this.off(c,ne,J.ctx),ne.call(J.ctx||this,y)}this._firingCount--}}return m&&this._propagateEvent(y),this},listens:function(c,h,m,y){typeof c!="string"&&console.warn('"string" type argument expected');var k=h;typeof h!="function"&&(y=!!h,k=void 0,m=void 0);var O=this._events&&this._events[c];if(O&&O.length&&this._listens(c,k,m)!==!1)return!0;if(y){for(var H in this._eventParents)if(this._eventParents[H].listens(c,h,m,y))return!0}return!1},_listens:function(c,h,m){if(!this._events)return!1;var y=this._events[c]||[];if(!h)return!!y.length;m===this&&(m=void 0);for(var k=0,O=y.length;k<O;k++)if(y[k].fn===h&&y[k].ctx===m)return k;return!1},once:function(c,h,m){if(typeof c=="object")for(var y in c)this._on(y,c[y],h,!0);else{c=v(c);for(var k=0,O=c.length;k<O;k++)this._on(c[k],h,m,!0)}return this},addEventParent:function(c){return this._eventParents=this._eventParents||{},this._eventParents[d(c)]=c,this},removeEventParent:function(c){return this._eventParents&&delete this._eventParents[d(c)],this},_propagateEvent:function(c){for(var h in this._eventParents)this._eventParents[h].fire(c.type,s({layer:c.target,propagatedFrom:c.target},c),!0)}};C.addEventListener=C.on,C.removeEventListener=C.clearAllEventListeners=C.off,C.addOneTimeEventListener=C.once,C.fireEvent=C.fire,C.hasEventListeners=C.listens;var q=B.extend(C);function I(c,h,m){this.x=m?Math.round(c):c,this.y=m?Math.round(h):h}var X=Math.trunc||function(c){return c>0?Math.floor(c):Math.ceil(c)};I.prototype={clone:function(){return new I(this.x,this.y)},add:function(c){return this.clone()._add(E(c))},_add:function(c){return this.x+=c.x,this.y+=c.y,this},subtract:function(c){return this.clone()._subtract(E(c))},_subtract:function(c){return this.x-=c.x,this.y-=c.y,this},divideBy:function(c){return this.clone()._divideBy(c)},_divideBy:function(c){return this.x/=c,this.y/=c,this},multiplyBy:function(c){return this.clone()._multiplyBy(c)},_multiplyBy:function(c){return this.x*=c,this.y*=c,this},scaleBy:function(c){return new I(this.x*c.x,this.y*c.y)},unscaleBy:function(c){return new I(this.x/c.x,this.y/c.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=X(this.x),this.y=X(this.y),this},distanceTo:function(c){c=E(c);var h=c.x-this.x,m=c.y-this.y;return Math.sqrt(h*h+m*m)},equals:function(c){return c=E(c),c.x===this.x&&c.y===this.y},contains:function(c){return c=E(c),Math.abs(c.x)<=Math.abs(this.x)&&Math.abs(c.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function E(c,h,m){return c instanceof I?c:S(c)?new I(c[0],c[1]):c==null?c:typeof c=="object"&&"x"in c&&"y"in c?new I(c.x,c.y):new I(c,h,m)}function K(c,h){if(c)for(var m=h?[c,h]:c,y=0,k=m.length;y<k;y++)this.extend(m[y])}K.prototype={extend:function(c){var h,m;if(!c)return this;if(c instanceof I||typeof c[0]=="number"||"x"in c)h=m=E(c);else if(c=re(c),h=c.min,m=c.max,!h||!m)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=m.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(c){return E((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,c)},getBottomLeft:function(){return E(this.min.x,this.max.y)},getTopRight:function(){return E(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(c){var h,m;return typeof c[0]=="number"||c instanceof I?c=E(c):c=re(c),c instanceof K?(h=c.min,m=c.max):h=m=c,h.x>=this.min.x&&m.x<=this.max.x&&h.y>=this.min.y&&m.y<=this.max.y},intersects:function(c){c=re(c);var h=this.min,m=this.max,y=c.min,k=c.max,O=k.x>=h.x&&y.x<=m.x,H=k.y>=h.y&&y.y<=m.y;return O&&H},overlaps:function(c){c=re(c);var h=this.min,m=this.max,y=c.min,k=c.max,O=k.x>h.x&&y.x<m.x,H=k.y>h.y&&y.y<m.y;return O&&H},isValid:function(){return!!(this.min&&this.max)},pad:function(c){var h=this.min,m=this.max,y=Math.abs(h.x-m.x)*c,k=Math.abs(h.y-m.y)*c;return re(E(h.x-y,h.y-k),E(m.x+y,m.y+k))},equals:function(c){return c?(c=re(c),this.min.equals(c.getTopLeft())&&this.max.equals(c.getBottomRight())):!1}};function re(c,h){return!c||c instanceof K?c:new K(c,h)}function Q(c,h){if(c)for(var m=h?[c,h]:c,y=0,k=m.length;y<k;y++)this.extend(m[y])}Q.prototype={extend:function(c){var h=this._southWest,m=this._northEast,y,k;if(c instanceof le)y=c,k=c;else if(c instanceof Q){if(y=c._southWest,k=c._northEast,!y||!k)return this}else return c?this.extend(ie(c)||se(c)):this;return!h&&!m?(this._southWest=new le(y.lat,y.lng),this._northEast=new le(k.lat,k.lng)):(h.lat=Math.min(y.lat,h.lat),h.lng=Math.min(y.lng,h.lng),m.lat=Math.max(k.lat,m.lat),m.lng=Math.max(k.lng,m.lng)),this},pad:function(c){var h=this._southWest,m=this._northEast,y=Math.abs(h.lat-m.lat)*c,k=Math.abs(h.lng-m.lng)*c;return new Q(new le(h.lat-y,h.lng-k),new le(m.lat+y,m.lng+k))},getCenter:function(){return new le((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new le(this.getNorth(),this.getWest())},getSouthEast:function(){return new le(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(c){typeof c[0]=="number"||c instanceof le||"lat"in c?c=ie(c):c=se(c);var h=this._southWest,m=this._northEast,y,k;return c instanceof Q?(y=c.getSouthWest(),k=c.getNorthEast()):y=k=c,y.lat>=h.lat&&k.lat<=m.lat&&y.lng>=h.lng&&k.lng<=m.lng},intersects:function(c){c=se(c);var h=this._southWest,m=this._northEast,y=c.getSouthWest(),k=c.getNorthEast(),O=k.lat>=h.lat&&y.lat<=m.lat,H=k.lng>=h.lng&&y.lng<=m.lng;return O&&H},overlaps:function(c){c=se(c);var h=this._southWest,m=this._northEast,y=c.getSouthWest(),k=c.getNorthEast(),O=k.lat>h.lat&&y.lat<m.lat,H=k.lng>h.lng&&y.lng<m.lng;return O&&H},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(c,h){return c?(c=se(c),this._southWest.equals(c.getSouthWest(),h)&&this._northEast.equals(c.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function se(c,h){return c instanceof Q?c:new Q(c,h)}function le(c,h,m){if(isNaN(c)||isNaN(h))throw new Error("Invalid LatLng object: ("+c+", "+h+")");this.lat=+c,this.lng=+h,m!==void 0&&(this.alt=+m)}le.prototype={equals:function(c,h){if(!c)return!1;c=ie(c);var m=Math.max(Math.abs(this.lat-c.lat),Math.abs(this.lng-c.lng));return m<=(h===void 0?1e-9:h)},toString:function(c){return"LatLng("+x(this.lat,c)+", "+x(this.lng,c)+")"},distanceTo:function(c){return ve.distance(this,ie(c))},wrap:function(){return ve.wrapLatLng(this)},toBounds:function(c){var h=180*c/40075017,m=h/Math.cos(Math.PI/180*this.lat);return se([this.lat-h,this.lng-m],[this.lat+h,this.lng+m])},clone:function(){return new le(this.lat,this.lng,this.alt)}};function ie(c,h,m){return c instanceof le?c:S(c)&&typeof c[0]!="object"?c.length===3?new le(c[0],c[1],c[2]):c.length===2?new le(c[0],c[1]):null:c==null?c:typeof c=="object"&&"lat"in c?new le(c.lat,"lng"in c?c.lng:c.lon,c.alt):h===void 0?null:new le(c,h,m)}var ge={latLngToPoint:function(c,h){var m=this.projection.project(c),y=this.scale(h);return this.transformation._transform(m,y)},pointToLatLng:function(c,h){var m=this.scale(h),y=this.transformation.untransform(c,m);return this.projection.unproject(y)},project:function(c){return this.projection.project(c)},unproject:function(c){return this.projection.unproject(c)},scale:function(c){return 256*Math.pow(2,c)},zoom:function(c){return Math.log(c/256)/Math.LN2},getProjectedBounds:function(c){if(this.infinite)return null;var h=this.projection.bounds,m=this.scale(c),y=this.transformation.transform(h.min,m),k=this.transformation.transform(h.max,m);return new K(y,k)},infinite:!1,wrapLatLng:function(c){var h=this.wrapLng?p(c.lng,this.wrapLng,!0):c.lng,m=this.wrapLat?p(c.lat,this.wrapLat,!0):c.lat,y=c.alt;return new le(m,h,y)},wrapLatLngBounds:function(c){var h=c.getCenter(),m=this.wrapLatLng(h),y=h.lat-m.lat,k=h.lng-m.lng;if(y===0&&k===0)return c;var O=c.getSouthWest(),H=c.getNorthEast(),J=new le(O.lat-y,O.lng-k),ne=new le(H.lat-y,H.lng-k);return new Q(J,ne)}},ve=s({},ge,{wrapLng:[-180,180],R:6371e3,distance:function(c,h){var m=Math.PI/180,y=c.lat*m,k=h.lat*m,O=Math.sin((h.lat-c.lat)*m/2),H=Math.sin((h.lng-c.lng)*m/2),J=O*O+Math.cos(y)*Math.cos(k)*H*H,ne=2*Math.atan2(Math.sqrt(J),Math.sqrt(1-J));return this.R*ne}}),W=6378137,oe={R:W,MAX_LATITUDE:85.0511287798,project:function(c){var h=Math.PI/180,m=this.MAX_LATITUDE,y=Math.max(Math.min(m,c.lat),-m),k=Math.sin(y*h);return new I(this.R*c.lng*h,this.R*Math.log((1+k)/(1-k))/2)},unproject:function(c){var h=180/Math.PI;return new le((2*Math.atan(Math.exp(c.y/this.R))-Math.PI/2)*h,c.x*h/this.R)},bounds:function(){var c=W*Math.PI;return new K([-c,-c],[c,c])}()};function he(c,h,m,y){if(S(c)){this._a=c[0],this._b=c[1],this._c=c[2],this._d=c[3];return}this._a=c,this._b=h,this._c=m,this._d=y}he.prototype={transform:function(c,h){return this._transform(c.clone(),h)},_transform:function(c,h){return h=h||1,c.x=h*(this._a*c.x+this._b),c.y=h*(this._c*c.y+this._d),c},untransform:function(c,h){return h=h||1,new I((c.x/h-this._b)/this._a,(c.y/h-this._d)/this._c)}};function Se(c,h,m,y){return new he(c,h,m,y)}var ae=s({},ve,{code:"EPSG:3857",projection:oe,transformation:function(){var c=.5/(Math.PI*oe.R);return Se(c,.5,-c,.5)}()}),ke=s({},ae,{code:"EPSG:900913"});function We(c){return document.createElementNS("http://www.w3.org/2000/svg",c)}function ht(c,h){var m="",y,k,O,H,J,ne;for(y=0,O=c.length;y<O;y++){for(J=c[y],k=0,H=J.length;k<H;k++)ne=J[k],m+=(k?"L":"M")+ne.x+" "+ne.y;m+=h?we.svg?"z":"x":""}return m||"M0 0"}var Lt=document.documentElement.style,Vt="ActiveXObject"in window,Jt=Vt&&!document.addEventListener,_t="msLaunchUri"in navigator&&!("documentMode"in document),Tn=jr("webkit"),gi=jr("android"),xi=jr("android 2")||jr("android 3"),ue=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),je=gi&&jr("Google")&&ue<537&&!("AudioNode"in window),Qe=!!window.opera,lt=!_t&&jr("chrome"),Dt=jr("gecko")&&!Tn&&!Qe&&!Vt,vi=!lt&&jr("safari"),Zr=jr("phantom"),xa="OTransition"in Lt,Ho=navigator.platform.indexOf("Win")===0,va=Vt&&"transition"in Lt,_s="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!xi,ya="MozPerspective"in Lt,Wo=!window.L_DISABLE_3D&&(va||_s||ya)&&!xa&&!Zr,Kr=typeof orientation<"u"||jr("mobile"),Yo=Kr&&Tn,jp=Kr&&_s,zv=!window.PointerEvent&&window.MSPointerEvent,Bv=!!(window.PointerEvent||zv),Uv="ontouchstart"in window||!!window.TouchEvent,vS=!window.L_NO_TOUCH&&(Uv||Bv),yS=Kr&&Qe,bS=Kr&&Dt,_S=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,wS=function(){var c=!1;try{var h=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("testPassiveEventSupport",f,h),window.removeEventListener("testPassiveEventSupport",f,h)}catch{}return c}(),jS=function(){return!!document.createElement("canvas").getContext}(),Np=!!(document.createElementNS&&We("svg").createSVGRect),NS=!!Np&&function(){var c=document.createElement("div");return c.innerHTML="<svg/>",(c.firstChild&&c.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),kS=!Np&&function(){try{var c=document.createElement("div");c.innerHTML='<v:shape adj="1"/>';var h=c.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}}(),SS=navigator.platform.indexOf("Mac")===0,CS=navigator.platform.indexOf("Linux")===0;function jr(c){return navigator.userAgent.toLowerCase().indexOf(c)>=0}var we={ie:Vt,ielt9:Jt,edge:_t,webkit:Tn,android:gi,android23:xi,androidStock:je,opera:Qe,chrome:lt,gecko:Dt,safari:vi,phantom:Zr,opera12:xa,win:Ho,ie3d:va,webkit3d:_s,gecko3d:ya,any3d:Wo,mobile:Kr,mobileWebkit:Yo,mobileWebkit3d:jp,msPointer:zv,pointer:Bv,touch:vS,touchNative:Uv,mobileOpera:yS,mobileGecko:bS,retina:_S,passiveEvents:wS,canvas:jS,svg:Np,vml:kS,inlineSvg:NS,mac:SS,linux:CS},Hv=we.msPointer?"MSPointerDown":"pointerdown",Wv=we.msPointer?"MSPointerMove":"pointermove",Yv=we.msPointer?"MSPointerUp":"pointerup",Vv=we.msPointer?"MSPointerCancel":"pointercancel",kp={touchstart:Hv,touchmove:Wv,touchend:Yv,touchcancel:Vv},qv={touchstart:MS,touchmove:ed,touchend:ed,touchcancel:ed},ba={},Zv=!1;function ES(c,h,m){return h==="touchstart"&&OS(),qv[h]?(m=qv[h].bind(this,m),c.addEventListener(kp[h],m,!1),m):(console.warn("wrong event specified:",h),f)}function TS(c,h,m){if(!kp[h]){console.warn("wrong event specified:",h);return}c.removeEventListener(kp[h],m,!1)}function PS(c){ba[c.pointerId]=c}function DS(c){ba[c.pointerId]&&(ba[c.pointerId]=c)}function Kv(c){delete ba[c.pointerId]}function OS(){Zv||(document.addEventListener(Hv,PS,!0),document.addEventListener(Wv,DS,!0),document.addEventListener(Yv,Kv,!0),document.addEventListener(Vv,Kv,!0),Zv=!0)}function ed(c,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var m in ba)h.touches.push(ba[m]);h.changedTouches=[h],c(h)}}function MS(c,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&qt(h),ed(c,h)}function LS(c){var h={},m,y;for(y in c)m=c[y],h[y]=m&&m.bind?m.bind(c):m;return c=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var RS=200;function AS(c,h){c.addEventListener("dblclick",h);var m=0,y;function k(O){if(O.detail!==1){y=O.detail;return}if(!(O.pointerType==="mouse"||O.sourceCapabilities&&!O.sourceCapabilities.firesTouchEvents)){var H=e0(O);if(!(H.some(function(ne){return ne instanceof HTMLLabelElement&&ne.attributes.for})&&!H.some(function(ne){return ne instanceof HTMLInputElement||ne instanceof HTMLSelectElement}))){var J=Date.now();J-m<=RS?(y++,y===2&&h(LS(O))):y=1,m=J}}}return c.addEventListener("click",k),{dblclick:h,simDblclick:k}}function IS(c,h){c.removeEventListener("dblclick",h.dblclick),c.removeEventListener("click",h.simDblclick)}var Sp=rd(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Vo=rd(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Gv=Vo==="webkitTransition"||Vo==="OTransition"?Vo+"End":"transitionend";function Qv(c){return typeof c=="string"?document.getElementById(c):c}function qo(c,h){var m=c.style[h]||c.currentStyle&&c.currentStyle[h];if((!m||m==="auto")&&document.defaultView){var y=document.defaultView.getComputedStyle(c,null);m=y?y[h]:null}return m==="auto"?null:m}function Ye(c,h,m){var y=document.createElement(c);return y.className=h||"",m&&m.appendChild(y),y}function pt(c){var h=c.parentNode;h&&h.removeChild(c)}function td(c){for(;c.firstChild;)c.removeChild(c.firstChild)}function _a(c){var h=c.parentNode;h&&h.lastChild!==c&&h.appendChild(c)}function wa(c){var h=c.parentNode;h&&h.firstChild!==c&&h.insertBefore(c,h.firstChild)}function Cp(c,h){if(c.classList!==void 0)return c.classList.contains(h);var m=nd(c);return m.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(m)}function Te(c,h){if(c.classList!==void 0)for(var m=v(h),y=0,k=m.length;y<k;y++)c.classList.add(m[y]);else if(!Cp(c,h)){var O=nd(c);Ep(c,(O?O+" ":"")+h)}}function wt(c,h){c.classList!==void 0?c.classList.remove(h):Ep(c,g((" "+nd(c)+" ").replace(" "+h+" "," ")))}function Ep(c,h){c.className.baseVal===void 0?c.className=h:c.className.baseVal=h}function nd(c){return c.correspondingElement&&(c=c.correspondingElement),c.className.baseVal===void 0?c.className:c.className.baseVal}function Un(c,h){"opacity"in c.style?c.style.opacity=h:"filter"in c.style&&FS(c,h)}function FS(c,h){var m=!1,y="DXImageTransform.Microsoft.Alpha";try{m=c.filters.item(y)}catch{if(h===1)return}h=Math.round(h*100),m?(m.Enabled=h!==100,m.Opacity=h):c.style.filter+=" progid:"+y+"(opacity="+h+")"}function rd(c){for(var h=document.documentElement.style,m=0;m<c.length;m++)if(c[m]in h)return c[m];return!1}function yi(c,h,m){var y=h||new I(0,0);c.style[Sp]=(we.ie3d?"translate("+y.x+"px,"+y.y+"px)":"translate3d("+y.x+"px,"+y.y+"px,0)")+(m?" scale("+m+")":"")}function Et(c,h){c._leaflet_pos=h,we.any3d?yi(c,h):(c.style.left=h.x+"px",c.style.top=h.y+"px")}function bi(c){return c._leaflet_pos||new I(0,0)}var Zo,Ko,Tp;if("onselectstart"in document)Zo=function(){Ce(window,"selectstart",qt)},Ko=function(){et(window,"selectstart",qt)};else{var Go=rd(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Zo=function(){if(Go){var c=document.documentElement.style;Tp=c[Go],c[Go]="none"}},Ko=function(){Go&&(document.documentElement.style[Go]=Tp,Tp=void 0)}}function Pp(){Ce(window,"dragstart",qt)}function Dp(){et(window,"dragstart",qt)}var sd,Op;function Mp(c){for(;c.tabIndex===-1;)c=c.parentNode;c.style&&(id(),sd=c,Op=c.style.outlineStyle,c.style.outlineStyle="none",Ce(window,"keydown",id))}function id(){sd&&(sd.style.outlineStyle=Op,sd=void 0,Op=void 0,et(window,"keydown",id))}function Xv(c){do c=c.parentNode;while((!c.offsetWidth||!c.offsetHeight)&&c!==document.body);return c}function Lp(c){var h=c.getBoundingClientRect();return{x:h.width/c.offsetWidth||1,y:h.height/c.offsetHeight||1,boundingClientRect:h}}var $S={__proto__:null,TRANSFORM:Sp,TRANSITION:Vo,TRANSITION_END:Gv,get:Qv,getStyle:qo,create:Ye,remove:pt,empty:td,toFront:_a,toBack:wa,hasClass:Cp,addClass:Te,removeClass:wt,setClass:Ep,getClass:nd,setOpacity:Un,testProp:rd,setTransform:yi,setPosition:Et,getPosition:bi,get disableTextSelection(){return Zo},get enableTextSelection(){return Ko},disableImageDrag:Pp,enableImageDrag:Dp,preventOutline:Mp,restoreOutline:id,getSizedParentNode:Xv,getScale:Lp};function Ce(c,h,m,y){if(h&&typeof h=="object")for(var k in h)Ap(c,k,h[k],m);else{h=v(h);for(var O=0,H=h.length;O<H;O++)Ap(c,h[O],m,y)}return this}var Nr="_leaflet_events";function et(c,h,m,y){if(arguments.length===1)Jv(c),delete c[Nr];else if(h&&typeof h=="object")for(var k in h)Ip(c,k,h[k],m);else if(h=v(h),arguments.length===2)Jv(c,function(J){return P(h,J)!==-1});else for(var O=0,H=h.length;O<H;O++)Ip(c,h[O],m,y);return this}function Jv(c,h){for(var m in c[Nr]){var y=m.split(/\d/)[0];(!h||h(y))&&Ip(c,y,null,null,m)}}var Rp={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ap(c,h,m,y){var k=h+d(m)+(y?"_"+d(y):"");if(c[Nr]&&c[Nr][k])return this;var O=function(J){return m.call(y||c,J||window.event)},H=O;!we.touchNative&&we.pointer&&h.indexOf("touch")===0?O=ES(c,h,O):we.touch&&h==="dblclick"?O=AS(c,O):"addEventListener"in c?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?c.addEventListener(Rp[h]||h,O,we.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(O=function(J){J=J||window.event,$p(c,J)&&H(J)},c.addEventListener(Rp[h],O,!1)):c.addEventListener(h,H,!1):c.attachEvent("on"+h,O),c[Nr]=c[Nr]||{},c[Nr][k]=O}function Ip(c,h,m,y,k){k=k||h+d(m)+(y?"_"+d(y):"");var O=c[Nr]&&c[Nr][k];if(!O)return this;!we.touchNative&&we.pointer&&h.indexOf("touch")===0?TS(c,h,O):we.touch&&h==="dblclick"?IS(c,O):"removeEventListener"in c?c.removeEventListener(Rp[h]||h,O,!1):c.detachEvent("on"+h,O),c[Nr][k]=null}function _i(c){return c.stopPropagation?c.stopPropagation():c.originalEvent?c.originalEvent._stopped=!0:c.cancelBubble=!0,this}function Fp(c){return Ap(c,"wheel",_i),this}function Qo(c){return Ce(c,"mousedown touchstart dblclick contextmenu",_i),c._leaflet_disable_click=!0,this}function qt(c){return c.preventDefault?c.preventDefault():c.returnValue=!1,this}function wi(c){return qt(c),_i(c),this}function e0(c){if(c.composedPath)return c.composedPath();for(var h=[],m=c.target;m;)h.push(m),m=m.parentNode;return h}function t0(c,h){if(!h)return new I(c.clientX,c.clientY);var m=Lp(h),y=m.boundingClientRect;return new I((c.clientX-y.left)/m.x-h.clientLeft,(c.clientY-y.top)/m.y-h.clientTop)}var zS=we.linux&&we.chrome?window.devicePixelRatio:we.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function n0(c){return we.edge?c.wheelDeltaY/2:c.deltaY&&c.deltaMode===0?-c.deltaY/zS:c.deltaY&&c.deltaMode===1?-c.deltaY*20:c.deltaY&&c.deltaMode===2?-c.deltaY*60:c.deltaX||c.deltaZ?0:c.wheelDelta?(c.wheelDeltaY||c.wheelDelta)/2:c.detail&&Math.abs(c.detail)<32765?-c.detail*20:c.detail?c.detail/-32765*60:0}function $p(c,h){var m=h.relatedTarget;if(!m)return!0;try{for(;m&&m!==c;)m=m.parentNode}catch{return!1}return m!==c}var BS={__proto__:null,on:Ce,off:et,stopPropagation:_i,disableScrollPropagation:Fp,disableClickPropagation:Qo,preventDefault:qt,stop:wi,getPropagationPath:e0,getMousePosition:t0,getWheelDelta:n0,isExternalTarget:$p,addListener:Ce,removeListener:et},r0=q.extend({run:function(c,h,m,y){this.stop(),this._el=c,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(y||.5,.2),this._startPos=bi(c),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=U(this._animate,this),this._step()},_step:function(c){var h=+new Date-this._startTime,m=this._duration*1e3;h<m?this._runFrame(this._easeOut(h/m),c):(this._runFrame(1),this._complete())},_runFrame:function(c,h){var m=this._startPos.add(this._offset.multiplyBy(c));h&&m._round(),Et(this._el,m),this.fire("step")},_complete:function(){te(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(c){return 1-Math.pow(1-c,this._easeOutPower)}}),$e=q.extend({options:{crs:ae,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(c,h){h=b(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(c),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(ie(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Vo&&we.any3d&&!we.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ce(this._proxy,Gv,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(c,h,m){if(h=h===void 0?this._zoom:this._limitZoom(h),c=this._limitCenter(ie(c),h,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=s({animate:m.animate},m.zoom),m.pan=s({animate:m.animate,duration:m.duration},m.pan));var y=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(c,h,m.zoom):this._tryAnimatedPan(c,m.pan);if(y)return clearTimeout(this._sizeTimer),this}return this._resetView(c,h,m.pan&&m.pan.noMoveStart),this},setZoom:function(c,h){return this._loaded?this.setView(this.getCenter(),c,{zoom:h}):(this._zoom=c,this)},zoomIn:function(c,h){return c=c||(we.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+c,h)},zoomOut:function(c,h){return c=c||(we.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-c,h)},setZoomAround:function(c,h,m){var y=this.getZoomScale(h),k=this.getSize().divideBy(2),O=c instanceof I?c:this.latLngToContainerPoint(c),H=O.subtract(k).multiplyBy(1-1/y),J=this.containerPointToLatLng(k.add(H));return this.setView(J,h,{zoom:m})},_getBoundsCenterZoom:function(c,h){h=h||{},c=c.getBounds?c.getBounds():se(c);var m=E(h.paddingTopLeft||h.padding||[0,0]),y=E(h.paddingBottomRight||h.padding||[0,0]),k=this.getBoundsZoom(c,!1,m.add(y));if(k=typeof h.maxZoom=="number"?Math.min(h.maxZoom,k):k,k===1/0)return{center:c.getCenter(),zoom:k};var O=y.subtract(m).divideBy(2),H=this.project(c.getSouthWest(),k),J=this.project(c.getNorthEast(),k),ne=this.unproject(H.add(J).divideBy(2).add(O),k);return{center:ne,zoom:k}},fitBounds:function(c,h){if(c=se(c),!c.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(c,h);return this.setView(m.center,m.zoom,h)},fitWorld:function(c){return this.fitBounds([[-90,-180],[90,180]],c)},panTo:function(c,h){return this.setView(c,this._zoom,{pan:h})},panBy:function(c,h){if(c=E(c).round(),h=h||{},!c.x&&!c.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(c))return this._resetView(this.unproject(this.project(this.getCenter()).add(c)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new r0,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){Te(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(c).round();this._panAnim.run(this._mapPane,m,h.duration||.25,h.easeLinearity)}else this._rawPanBy(c),this.fire("move").fire("moveend");return this},flyTo:function(c,h,m){if(m=m||{},m.animate===!1||!we.any3d)return this.setView(c,h,m);this._stop();var y=this.project(this.getCenter()),k=this.project(c),O=this.getSize(),H=this._zoom;c=ie(c),h=h===void 0?H:h;var J=Math.max(O.x,O.y),ne=J*this.getZoomScale(H,h),ce=k.distanceTo(y)||1,me=1.42,Ne=me*me;function Me(Tt){var xd=Tt?-1:1,TC=Tt?ne:J,PC=ne*ne-J*J+xd*Ne*Ne*ce*ce,DC=2*TC*Ne*ce,Gp=PC/DC,I0=Math.sqrt(Gp*Gp+1)-Gp,OC=I0<1e-9?-18:Math.log(I0);return OC}function cn(Tt){return(Math.exp(Tt)-Math.exp(-Tt))/2}function Rt(Tt){return(Math.exp(Tt)+Math.exp(-Tt))/2}function Wn(Tt){return cn(Tt)/Rt(Tt)}var gn=Me(0);function Ea(Tt){return J*(Rt(gn)/Rt(gn+me*Tt))}function kC(Tt){return J*(Rt(gn)*Wn(gn+me*Tt)-cn(gn))/Ne}function SC(Tt){return 1-Math.pow(1-Tt,1.5)}var CC=Date.now(),R0=(Me(1)-gn)/me,EC=m.duration?1e3*m.duration:1e3*R0*.8;function A0(){var Tt=(Date.now()-CC)/EC,xd=SC(Tt)*R0;Tt<=1?(this._flyToFrame=U(A0,this),this._move(this.unproject(y.add(k.subtract(y).multiplyBy(kC(xd)/ce)),H),this.getScaleZoom(J/Ea(xd),H),{flyTo:!0})):this._move(c,h)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),A0.call(this),this},flyToBounds:function(c,h){var m=this._getBoundsCenterZoom(c,h);return this.flyTo(m.center,m.zoom,h)},setMaxBounds:function(c){return c=se(c),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),c.isValid()?(this.options.maxBounds=c,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(c){var h=this.options.minZoom;return this.options.minZoom=c,this._loaded&&h!==c&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(c):this},setMaxZoom:function(c){var h=this.options.maxZoom;return this.options.maxZoom=c,this._loaded&&h!==c&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(c):this},panInsideBounds:function(c,h){this._enforcingBounds=!0;var m=this.getCenter(),y=this._limitCenter(m,this._zoom,se(c));return m.equals(y)||this.panTo(y,h),this._enforcingBounds=!1,this},panInside:function(c,h){h=h||{};var m=E(h.paddingTopLeft||h.padding||[0,0]),y=E(h.paddingBottomRight||h.padding||[0,0]),k=this.project(this.getCenter()),O=this.project(c),H=this.getPixelBounds(),J=re([H.min.add(m),H.max.subtract(y)]),ne=J.getSize();if(!J.contains(O)){this._enforcingBounds=!0;var ce=O.subtract(J.getCenter()),me=J.extend(O).getSize().subtract(ne);k.x+=ce.x<0?-me.x:me.x,k.y+=ce.y<0?-me.y:me.y,this.panTo(this.unproject(k),h),this._enforcingBounds=!1}return this},invalidateSize:function(c){if(!this._loaded)return this;c=s({animate:!1,pan:!0},c===!0?{animate:!0}:c);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),y=h.divideBy(2).round(),k=m.divideBy(2).round(),O=y.subtract(k);return!O.x&&!O.y?this:(c.animate&&c.pan?this.panBy(O):(c.pan&&this._rawPanBy(O),this.fire("move"),c.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(c){if(c=this._locateOptions=s({timeout:1e4,watch:!1},c),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=o(this._handleGeolocationResponse,this),m=o(this._handleGeolocationError,this);return c.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,m,c):navigator.geolocation.getCurrentPosition(h,m,c),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(c){if(this._container._leaflet_id){var h=c.code,m=c.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(c){if(this._container._leaflet_id){var h=c.coords.latitude,m=c.coords.longitude,y=new le(h,m),k=y.toBounds(c.coords.accuracy*2),O=this._locateOptions;if(O.setView){var H=this.getBoundsZoom(k);this.setView(y,O.maxZoom?Math.min(H,O.maxZoom):H)}var J={latlng:y,bounds:k,timestamp:c.timestamp};for(var ne in c.coords)typeof c.coords[ne]=="number"&&(J[ne]=c.coords[ne]);this.fire("locationfound",J)}},addHandler:function(c,h){if(!h)return this;var m=this[c]=new h(this);return this._handlers.push(m),this.options[c]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),pt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(te(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var c;for(c in this._layers)this._layers[c].remove();for(c in this._panes)pt(this._panes[c]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(c,h){var m="leaflet-pane"+(c?" leaflet-"+c.replace("Pane","")+"-pane":""),y=Ye("div",m,h||this._mapPane);return c&&(this._panes[c]=y),y},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var c=this.getPixelBounds(),h=this.unproject(c.getBottomLeft()),m=this.unproject(c.getTopRight());return new Q(h,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(c,h,m){c=se(c),m=E(m||[0,0]);var y=this.getZoom()||0,k=this.getMinZoom(),O=this.getMaxZoom(),H=c.getNorthWest(),J=c.getSouthEast(),ne=this.getSize().subtract(m),ce=re(this.project(J,y),this.project(H,y)).getSize(),me=we.any3d?this.options.zoomSnap:1,Ne=ne.x/ce.x,Me=ne.y/ce.y,cn=h?Math.max(Ne,Me):Math.min(Ne,Me);return y=this.getScaleZoom(cn,y),me&&(y=Math.round(y/(me/100))*(me/100),y=h?Math.ceil(y/me)*me:Math.floor(y/me)*me),Math.max(k,Math.min(O,y))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new I(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(c,h){var m=this._getTopLeftPoint(c,h);return new K(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(c){return this.options.crs.getProjectedBounds(c===void 0?this.getZoom():c)},getPane:function(c){return typeof c=="string"?this._panes[c]:c},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(c,h){var m=this.options.crs;return h=h===void 0?this._zoom:h,m.scale(c)/m.scale(h)},getScaleZoom:function(c,h){var m=this.options.crs;h=h===void 0?this._zoom:h;var y=m.zoom(c*m.scale(h));return isNaN(y)?1/0:y},project:function(c,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(ie(c),h)},unproject:function(c,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(E(c),h)},layerPointToLatLng:function(c){var h=E(c).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(c){var h=this.project(ie(c))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(c){return this.options.crs.wrapLatLng(ie(c))},wrapLatLngBounds:function(c){return this.options.crs.wrapLatLngBounds(se(c))},distance:function(c,h){return this.options.crs.distance(ie(c),ie(h))},containerPointToLayerPoint:function(c){return E(c).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(c){return E(c).add(this._getMapPanePos())},containerPointToLatLng:function(c){var h=this.containerPointToLayerPoint(E(c));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(c){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ie(c)))},mouseEventToContainerPoint:function(c){return t0(c,this._container)},mouseEventToLayerPoint:function(c){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(c))},mouseEventToLatLng:function(c){return this.layerPointToLatLng(this.mouseEventToLayerPoint(c))},_initContainer:function(c){var h=this._container=Qv(c);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ce(h,"scroll",this._onScroll,this),this._containerId=d(h)},_initLayout:function(){var c=this._container;this._fadeAnimated=this.options.fadeAnimation&&we.any3d,Te(c,"leaflet-container"+(we.touch?" leaflet-touch":"")+(we.retina?" leaflet-retina":"")+(we.ielt9?" leaflet-oldie":"")+(we.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=qo(c,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(c.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var c=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Et(this._mapPane,new I(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Te(c.markerPane,"leaflet-zoom-hide"),Te(c.shadowPane,"leaflet-zoom-hide"))},_resetView:function(c,h,m){Et(this._mapPane,new I(0,0));var y=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var k=this._zoom!==h;this._moveStart(k,m)._move(c,h)._moveEnd(k),this.fire("viewreset"),y&&this.fire("load")},_moveStart:function(c,h){return c&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(c,h,m,y){h===void 0&&(h=this._zoom);var k=this._zoom!==h;return this._zoom=h,this._lastCenter=c,this._pixelOrigin=this._getNewPixelOrigin(c),y?m&&m.pinch&&this.fire("zoom",m):((k||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(c){return c&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return te(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(c){Et(this._mapPane,this._getMapPanePos().subtract(c))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(c){this._targets={},this._targets[d(this._container)]=this;var h=c?et:Ce;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),we.any3d&&this.options.transform3DLimit&&(c?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){te(this._resizeRequest),this._resizeRequest=U(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var c=this._getMapPanePos();Math.max(Math.abs(c.x),Math.abs(c.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(c,h){for(var m=[],y,k=h==="mouseout"||h==="mouseover",O=c.target||c.srcElement,H=!1;O;){if(y=this._targets[d(O)],y&&(h==="click"||h==="preclick")&&this._draggableMoved(y)){H=!0;break}if(y&&y.listens(h,!0)&&(k&&!$p(O,c)||(m.push(y),k))||O===this._container)break;O=O.parentNode}return!m.length&&!H&&!k&&this.listens(h,!0)&&(m=[this]),m},_isClickDisabled:function(c){for(;c&&c!==this._container;){if(c._leaflet_disable_click)return!0;c=c.parentNode}},_handleDOMEvent:function(c){var h=c.target||c.srcElement;if(!(!this._loaded||h._leaflet_disable_events||c.type==="click"&&this._isClickDisabled(h))){var m=c.type;m==="mousedown"&&Mp(h),this._fireDOMEvent(c,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(c,h,m){if(c.type==="click"){var y=s({},c);y.type="preclick",this._fireDOMEvent(y,y.type,m)}var k=this._findEventTargets(c,h);if(m){for(var O=[],H=0;H<m.length;H++)m[H].listens(h,!0)&&O.push(m[H]);k=O.concat(k)}if(k.length){h==="contextmenu"&&qt(c);var J=k[0],ne={originalEvent:c};if(c.type!=="keypress"&&c.type!=="keydown"&&c.type!=="keyup"){var ce=J.getLatLng&&(!J._radius||J._radius<=10);ne.containerPoint=ce?this.latLngToContainerPoint(J.getLatLng()):this.mouseEventToContainerPoint(c),ne.layerPoint=this.containerPointToLayerPoint(ne.containerPoint),ne.latlng=ce?J.getLatLng():this.layerPointToLatLng(ne.layerPoint)}for(H=0;H<k.length;H++)if(k[H].fire(h,ne,!0),ne.originalEvent._stopped||k[H].options.bubblingMouseEvents===!1&&P(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(c){return c=c.dragging&&c.dragging.enabled()?c:this,c.dragging&&c.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var c=0,h=this._handlers.length;c<h;c++)this._handlers[c].disable()},whenReady:function(c,h){return this._loaded?c.call(h||this,{target:this}):this.on("load",c,h),this},_getMapPanePos:function(){return bi(this._mapPane)||new I(0,0)},_moved:function(){var c=this._getMapPanePos();return c&&!c.equals([0,0])},_getTopLeftPoint:function(c,h){var m=c&&h!==void 0?this._getNewPixelOrigin(c,h):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(c,h){var m=this.getSize()._divideBy(2);return this.project(c,h)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(c,h,m){var y=this._getNewPixelOrigin(m,h);return this.project(c,h)._subtract(y)},_latLngBoundsToNewLayerBounds:function(c,h,m){var y=this._getNewPixelOrigin(m,h);return re([this.project(c.getSouthWest(),h)._subtract(y),this.project(c.getNorthWest(),h)._subtract(y),this.project(c.getSouthEast(),h)._subtract(y),this.project(c.getNorthEast(),h)._subtract(y)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(c){return this.latLngToLayerPoint(c).subtract(this._getCenterLayerPoint())},_limitCenter:function(c,h,m){if(!m)return c;var y=this.project(c,h),k=this.getSize().divideBy(2),O=new K(y.subtract(k),y.add(k)),H=this._getBoundsOffset(O,m,h);return Math.abs(H.x)<=1&&Math.abs(H.y)<=1?c:this.unproject(y.add(H),h)},_limitOffset:function(c,h){if(!h)return c;var m=this.getPixelBounds(),y=new K(m.min.add(c),m.max.add(c));return c.add(this._getBoundsOffset(y,h))},_getBoundsOffset:function(c,h,m){var y=re(this.project(h.getNorthEast(),m),this.project(h.getSouthWest(),m)),k=y.min.subtract(c.min),O=y.max.subtract(c.max),H=this._rebound(k.x,-O.x),J=this._rebound(k.y,-O.y);return new I(H,J)},_rebound:function(c,h){return c+h>0?Math.round(c-h)/2:Math.max(0,Math.ceil(c))-Math.max(0,Math.floor(h))},_limitZoom:function(c){var h=this.getMinZoom(),m=this.getMaxZoom(),y=we.any3d?this.options.zoomSnap:1;return y&&(c=Math.round(c/y)*y),Math.max(h,Math.min(m,c))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){wt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(c,h){var m=this._getCenterOffset(c)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,h),!0)},_createAnimProxy:function(){var c=this._proxy=Ye("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(c),this.on("zoomanim",function(h){var m=Sp,y=this._proxy.style[m];yi(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),y===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){pt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var c=this.getCenter(),h=this.getZoom();yi(this._proxy,this.project(c,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(c){this._animatingZoom&&c.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(c,h,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var y=this.getZoomScale(h),k=this._getCenterOffset(c)._divideBy(1-1/y);return m.animate!==!0&&!this.getSize().contains(k)?!1:(U(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(c,h,!0)},this),!0)},_animateZoom:function(c,h,m,y){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=c,this._animateToZoom=h,Te(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:c,zoom:h,noUpdate:y}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&wt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function US(c,h){return new $e(c,h)}var cr=B.extend({options:{position:"topright"},initialize:function(c){b(this,c)},getPosition:function(){return this.options.position},setPosition:function(c){var h=this._map;return h&&h.removeControl(this),this.options.position=c,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(c){this.remove(),this._map=c;var h=this._container=this.onAdd(c),m=this.getPosition(),y=c._controlCorners[m];return Te(h,"leaflet-control"),m.indexOf("bottom")!==-1?y.insertBefore(h,y.firstChild):y.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(pt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(c){this._map&&c&&c.screenX>0&&c.screenY>0&&this._map.getContainer().focus()}}),Xo=function(c){return new cr(c)};$e.include({addControl:function(c){return c.addTo(this),this},removeControl:function(c){return c.remove(),this},_initControlPos:function(){var c=this._controlCorners={},h="leaflet-",m=this._controlContainer=Ye("div",h+"control-container",this._container);function y(k,O){var H=h+k+" "+h+O;c[k+O]=Ye("div",H,m)}y("top","left"),y("top","right"),y("bottom","left"),y("bottom","right")},_clearControlPos:function(){for(var c in this._controlCorners)pt(this._controlCorners[c]);pt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var s0=cr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(c,h,m,y){return m<y?-1:y<m?1:0}},initialize:function(c,h,m){b(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var y in c)this._addLayer(c[y],y);for(y in h)this._addLayer(h[y],y,!0)},onAdd:function(c){this._initLayout(),this._update(),this._map=c,c.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(c){return cr.prototype.addTo.call(this,c),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(c,h){return this._addLayer(c,h),this._map?this._update():this},addOverlay:function(c,h){return this._addLayer(c,h,!0),this._map?this._update():this},removeLayer:function(c){c.off("add remove",this._onLayerChange,this);var h=this._getLayer(d(c));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){Te(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var c=this._map.getSize().y-(this._container.offsetTop+50);return c<this._section.clientHeight?(Te(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=c+"px"):wt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return wt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var c="leaflet-control-layers",h=this._container=Ye("div",c),m=this.options.collapsed;h.setAttribute("aria-haspopup",!0),Qo(h),Fp(h);var y=this._section=Ye("section",c+"-list");m&&(this._map.on("click",this.collapse,this),Ce(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var k=this._layersLink=Ye("a",c+"-toggle",h);k.href="#",k.title="Layers",k.setAttribute("role","button"),Ce(k,{keydown:function(O){O.keyCode===13&&this._expandSafely()},click:function(O){qt(O),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=Ye("div",c+"-base",y),this._separator=Ye("div",c+"-separator",y),this._overlaysList=Ye("div",c+"-overlays",y),h.appendChild(y)},_getLayer:function(c){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&d(this._layers[h].layer)===c)return this._layers[h]},_addLayer:function(c,h,m){this._map&&c.on("add remove",this._onLayerChange,this),this._layers.push({layer:c,name:h,overlay:m}),this.options.sortLayers&&this._layers.sort(o(function(y,k){return this.options.sortFunction(y.layer,k.layer,y.name,k.name)},this)),this.options.autoZIndex&&c.setZIndex&&(this._lastZIndex++,c.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;td(this._baseLayersList),td(this._overlaysList),this._layerControlInputs=[];var c,h,m,y,k=0;for(m=0;m<this._layers.length;m++)y=this._layers[m],this._addItem(y),h=h||y.overlay,c=c||!y.overlay,k+=y.overlay?0:1;return this.options.hideSingleBase&&(c=c&&k>1,this._baseLayersList.style.display=c?"":"none"),this._separator.style.display=h&&c?"":"none",this},_onLayerChange:function(c){this._handlingClick||this._update();var h=this._getLayer(d(c.target)),m=h.overlay?c.type==="add"?"overlayadd":"overlayremove":c.type==="add"?"baselayerchange":null;m&&this._map.fire(m,h)},_createRadioElement:function(c,h){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+c+'"'+(h?' checked="checked"':"")+"/>",y=document.createElement("div");return y.innerHTML=m,y.firstChild},_addItem:function(c){var h=document.createElement("label"),m=this._map.hasLayer(c.layer),y;c.overlay?(y=document.createElement("input"),y.type="checkbox",y.className="leaflet-control-layers-selector",y.defaultChecked=m):y=this._createRadioElement("leaflet-base-layers_"+d(this),m),this._layerControlInputs.push(y),y.layerId=d(c.layer),Ce(y,"click",this._onInputClick,this);var k=document.createElement("span");k.innerHTML=" "+c.name;var O=document.createElement("span");h.appendChild(O),O.appendChild(y),O.appendChild(k);var H=c.overlay?this._overlaysList:this._baseLayersList;return H.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var c=this._layerControlInputs,h,m,y=[],k=[];this._handlingClick=!0;for(var O=c.length-1;O>=0;O--)h=c[O],m=this._getLayer(h.layerId).layer,h.checked?y.push(m):h.checked||k.push(m);for(O=0;O<k.length;O++)this._map.hasLayer(k[O])&&this._map.removeLayer(k[O]);for(O=0;O<y.length;O++)this._map.hasLayer(y[O])||this._map.addLayer(y[O]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var c=this._layerControlInputs,h,m,y=this._map.getZoom(),k=c.length-1;k>=0;k--)h=c[k],m=this._getLayer(h.layerId).layer,h.disabled=m.options.minZoom!==void 0&&y<m.options.minZoom||m.options.maxZoom!==void 0&&y>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var c=this._section;this._preventClick=!0,Ce(c,"click",qt),this.expand();var h=this;setTimeout(function(){et(c,"click",qt),h._preventClick=!1})}}),HS=function(c,h,m){return new s0(c,h,m)},zp=cr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(c){var h="leaflet-control-zoom",m=Ye("div",h+" leaflet-bar"),y=this.options;return this._zoomInButton=this._createButton(y.zoomInText,y.zoomInTitle,h+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(y.zoomOutText,y.zoomOutTitle,h+"-out",m,this._zoomOut),this._updateDisabled(),c.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(c){c.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(c){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(c.shiftKey?3:1))},_zoomOut:function(c){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(c.shiftKey?3:1))},_createButton:function(c,h,m,y,k){var O=Ye("a",m,y);return O.innerHTML=c,O.href="#",O.title=h,O.setAttribute("role","button"),O.setAttribute("aria-label",h),Qo(O),Ce(O,"click",wi),Ce(O,"click",k,this),Ce(O,"click",this._refocusOnMap,this),O},_updateDisabled:function(){var c=this._map,h="leaflet-disabled";wt(this._zoomInButton,h),wt(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||c._zoom===c.getMinZoom())&&(Te(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||c._zoom===c.getMaxZoom())&&(Te(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});$e.mergeOptions({zoomControl:!0}),$e.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new zp,this.addControl(this.zoomControl))});var WS=function(c){return new zp(c)},i0=cr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(c){var h="leaflet-control-scale",m=Ye("div",h),y=this.options;return this._addScales(y,h+"-line",m),c.on(y.updateWhenIdle?"moveend":"move",this._update,this),c.whenReady(this._update,this),m},onRemove:function(c){c.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(c,h,m){c.metric&&(this._mScale=Ye("div",h,m)),c.imperial&&(this._iScale=Ye("div",h,m))},_update:function(){var c=this._map,h=c.getSize().y/2,m=c.distance(c.containerPointToLatLng([0,h]),c.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(m)},_updateScales:function(c){this.options.metric&&c&&this._updateMetric(c),this.options.imperial&&c&&this._updateImperial(c)},_updateMetric:function(c){var h=this._getRoundNum(c),m=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,m,h/c)},_updateImperial:function(c){var h=c*3.2808399,m,y,k;h>5280?(m=h/5280,y=this._getRoundNum(m),this._updateScale(this._iScale,y+" mi",y/m)):(k=this._getRoundNum(h),this._updateScale(this._iScale,k+" ft",k/h))},_updateScale:function(c,h,m){c.style.width=Math.round(this.options.maxWidth*m)+"px",c.innerHTML=h},_getRoundNum:function(c){var h=Math.pow(10,(Math.floor(c)+"").length-1),m=c/h;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,h*m}}),YS=function(c){return new i0(c)},VS='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Bp=cr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(we.inlineSvg?VS+" ":"")+"Leaflet</a>"},initialize:function(c){b(this,c),this._attributions={}},onAdd:function(c){c.attributionControl=this,this._container=Ye("div","leaflet-control-attribution"),Qo(this._container);for(var h in c._layers)c._layers[h].getAttribution&&this.addAttribution(c._layers[h].getAttribution());return this._update(),c.on("layeradd",this._addAttribution,this),this._container},onRemove:function(c){c.off("layeradd",this._addAttribution,this)},_addAttribution:function(c){c.layer.getAttribution&&(this.addAttribution(c.layer.getAttribution()),c.layer.once("remove",function(){this.removeAttribution(c.layer.getAttribution())},this))},setPrefix:function(c){return this.options.prefix=c,this._update(),this},addAttribution:function(c){return c?(this._attributions[c]||(this._attributions[c]=0),this._attributions[c]++,this._update(),this):this},removeAttribution:function(c){return c?(this._attributions[c]&&(this._attributions[c]--,this._update()),this):this},_update:function(){if(this._map){var c=[];for(var h in this._attributions)this._attributions[h]&&c.push(h);var m=[];this.options.prefix&&m.push(this.options.prefix),c.length&&m.push(c.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});$e.mergeOptions({attributionControl:!0}),$e.addInitHook(function(){this.options.attributionControl&&new Bp().addTo(this)});var qS=function(c){return new Bp(c)};cr.Layers=s0,cr.Zoom=zp,cr.Scale=i0,cr.Attribution=Bp,Xo.layers=HS,Xo.zoom=WS,Xo.scale=YS,Xo.attribution=qS;var kr=B.extend({initialize:function(c){this._map=c},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});kr.addTo=function(c,h){return c.addHandler(h,this),this};var ZS={Events:C},a0=we.touch?"touchstart mousedown":"mousedown",ws=q.extend({options:{clickTolerance:3},initialize:function(c,h,m,y){b(this,y),this._element=c,this._dragStartTarget=h||c,this._preventOutline=m},enable:function(){this._enabled||(Ce(this._dragStartTarget,a0,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ws._dragging===this&&this.finishDrag(!0),et(this._dragStartTarget,a0,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(c){if(this._enabled&&(this._moved=!1,!Cp(this._element,"leaflet-zoom-anim"))){if(c.touches&&c.touches.length!==1){ws._dragging===this&&this.finishDrag();return}if(!(ws._dragging||c.shiftKey||c.which!==1&&c.button!==1&&!c.touches)&&(ws._dragging=this,this._preventOutline&&Mp(this._element),Pp(),Zo(),!this._moving)){this.fire("down");var h=c.touches?c.touches[0]:c,m=Xv(this._element);this._startPoint=new I(h.clientX,h.clientY),this._startPos=bi(this._element),this._parentScale=Lp(m);var y=c.type==="mousedown";Ce(document,y?"mousemove":"touchmove",this._onMove,this),Ce(document,y?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(c){if(this._enabled){if(c.touches&&c.touches.length>1){this._moved=!0;return}var h=c.touches&&c.touches.length===1?c.touches[0]:c,m=new I(h.clientX,h.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,qt(c),this._moved||(this.fire("dragstart"),this._moved=!0,Te(document.body,"leaflet-dragging"),this._lastTarget=c.target||c.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Te(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=c,this._updatePosition())}},_updatePosition:function(){var c={originalEvent:this._lastEvent};this.fire("predrag",c),Et(this._element,this._newPos),this.fire("drag",c)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(c){wt(document.body,"leaflet-dragging"),this._lastTarget&&(wt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),et(document,"mousemove touchmove",this._onMove,this),et(document,"mouseup touchend touchcancel",this._onUp,this),Dp(),Ko();var h=this._moved&&this._moving;this._moving=!1,ws._dragging=!1,h&&this.fire("dragend",{noInertia:c,distance:this._newPos.distanceTo(this._startPos)})}});function o0(c,h,m){var y,k=[1,4,2,8],O,H,J,ne,ce,me,Ne,Me;for(O=0,me=c.length;O<me;O++)c[O]._code=ji(c[O],h);for(J=0;J<4;J++){for(Ne=k[J],y=[],O=0,me=c.length,H=me-1;O<me;H=O++)ne=c[O],ce=c[H],ne._code&Ne?ce._code&Ne||(Me=ad(ce,ne,Ne,h,m),Me._code=ji(Me,h),y.push(Me)):(ce._code&Ne&&(Me=ad(ce,ne,Ne,h,m),Me._code=ji(Me,h),y.push(Me)),y.push(ne));c=y}return c}function l0(c,h){var m,y,k,O,H,J,ne,ce,me;if(!c||c.length===0)throw new Error("latlngs not passed");Hn(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var Ne=ie([0,0]),Me=se(c),cn=Me.getNorthWest().distanceTo(Me.getSouthWest())*Me.getNorthEast().distanceTo(Me.getNorthWest());cn<1700&&(Ne=Up(c));var Rt=c.length,Wn=[];for(m=0;m<Rt;m++){var gn=ie(c[m]);Wn.push(h.project(ie([gn.lat-Ne.lat,gn.lng-Ne.lng])))}for(J=ne=ce=0,m=0,y=Rt-1;m<Rt;y=m++)k=Wn[m],O=Wn[y],H=k.y*O.x-O.y*k.x,ne+=(k.x+O.x)*H,ce+=(k.y+O.y)*H,J+=H*3;J===0?me=Wn[0]:me=[ne/J,ce/J];var Ea=h.unproject(E(me));return ie([Ea.lat+Ne.lat,Ea.lng+Ne.lng])}function Up(c){for(var h=0,m=0,y=0,k=0;k<c.length;k++){var O=ie(c[k]);h+=O.lat,m+=O.lng,y++}return ie([h/y,m/y])}var KS={__proto__:null,clipPolygon:o0,polygonCenter:l0,centroid:Up};function c0(c,h){if(!h||!c.length)return c.slice();var m=h*h;return c=XS(c,m),c=QS(c,m),c}function d0(c,h,m){return Math.sqrt(Jo(c,h,m,!0))}function GS(c,h,m){return Jo(c,h,m)}function QS(c,h){var m=c.length,y=typeof Uint8Array<"u"?Uint8Array:Array,k=new y(m);k[0]=k[m-1]=1,Hp(c,k,h,0,m-1);var O,H=[];for(O=0;O<m;O++)k[O]&&H.push(c[O]);return H}function Hp(c,h,m,y,k){var O=0,H,J,ne;for(J=y+1;J<=k-1;J++)ne=Jo(c[J],c[y],c[k],!0),ne>O&&(H=J,O=ne);O>m&&(h[H]=1,Hp(c,h,m,y,H),Hp(c,h,m,H,k))}function XS(c,h){for(var m=[c[0]],y=1,k=0,O=c.length;y<O;y++)JS(c[y],c[k])>h&&(m.push(c[y]),k=y);return k<O-1&&m.push(c[O-1]),m}var u0;function h0(c,h,m,y,k){var O=y?u0:ji(c,m),H=ji(h,m),J,ne,ce;for(u0=H;;){if(!(O|H))return[c,h];if(O&H)return!1;J=O||H,ne=ad(c,h,J,m,k),ce=ji(ne,m),J===O?(c=ne,O=ce):(h=ne,H=ce)}}function ad(c,h,m,y,k){var O=h.x-c.x,H=h.y-c.y,J=y.min,ne=y.max,ce,me;return m&8?(ce=c.x+O*(ne.y-c.y)/H,me=ne.y):m&4?(ce=c.x+O*(J.y-c.y)/H,me=J.y):m&2?(ce=ne.x,me=c.y+H*(ne.x-c.x)/O):m&1&&(ce=J.x,me=c.y+H*(J.x-c.x)/O),new I(ce,me,k)}function ji(c,h){var m=0;return c.x<h.min.x?m|=1:c.x>h.max.x&&(m|=2),c.y<h.min.y?m|=4:c.y>h.max.y&&(m|=8),m}function JS(c,h){var m=h.x-c.x,y=h.y-c.y;return m*m+y*y}function Jo(c,h,m,y){var k=h.x,O=h.y,H=m.x-k,J=m.y-O,ne=H*H+J*J,ce;return ne>0&&(ce=((c.x-k)*H+(c.y-O)*J)/ne,ce>1?(k=m.x,O=m.y):ce>0&&(k+=H*ce,O+=J*ce)),H=c.x-k,J=c.y-O,y?H*H+J*J:new I(k,O)}function Hn(c){return!S(c[0])||typeof c[0][0]!="object"&&typeof c[0][0]<"u"}function p0(c){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Hn(c)}function f0(c,h){var m,y,k,O,H,J,ne,ce;if(!c||c.length===0)throw new Error("latlngs not passed");Hn(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var me=ie([0,0]),Ne=se(c),Me=Ne.getNorthWest().distanceTo(Ne.getSouthWest())*Ne.getNorthEast().distanceTo(Ne.getNorthWest());Me<1700&&(me=Up(c));var cn=c.length,Rt=[];for(m=0;m<cn;m++){var Wn=ie(c[m]);Rt.push(h.project(ie([Wn.lat-me.lat,Wn.lng-me.lng])))}for(m=0,y=0;m<cn-1;m++)y+=Rt[m].distanceTo(Rt[m+1])/2;if(y===0)ce=Rt[0];else for(m=0,O=0;m<cn-1;m++)if(H=Rt[m],J=Rt[m+1],k=H.distanceTo(J),O+=k,O>y){ne=(O-y)/k,ce=[J.x-ne*(J.x-H.x),J.y-ne*(J.y-H.y)];break}var gn=h.unproject(E(ce));return ie([gn.lat+me.lat,gn.lng+me.lng])}var eC={__proto__:null,simplify:c0,pointToSegmentDistance:d0,closestPointOnSegment:GS,clipSegment:h0,_getEdgeIntersection:ad,_getBitCode:ji,_sqClosestPointOnSegment:Jo,isFlat:Hn,_flat:p0,polylineCenter:f0},Wp={project:function(c){return new I(c.lng,c.lat)},unproject:function(c){return new le(c.y,c.x)},bounds:new K([-180,-90],[180,90])},Yp={R:6378137,R_MINOR:6356752314245179e-9,bounds:new K([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(c){var h=Math.PI/180,m=this.R,y=c.lat*h,k=this.R_MINOR/m,O=Math.sqrt(1-k*k),H=O*Math.sin(y),J=Math.tan(Math.PI/4-y/2)/Math.pow((1-H)/(1+H),O/2);return y=-m*Math.log(Math.max(J,1e-10)),new I(c.lng*h*m,y)},unproject:function(c){for(var h=180/Math.PI,m=this.R,y=this.R_MINOR/m,k=Math.sqrt(1-y*y),O=Math.exp(-c.y/m),H=Math.PI/2-2*Math.atan(O),J=0,ne=.1,ce;J<15&&Math.abs(ne)>1e-7;J++)ce=k*Math.sin(H),ce=Math.pow((1-ce)/(1+ce),k/2),ne=Math.PI/2-2*Math.atan(O*ce)-H,H+=ne;return new le(H*h,c.x*h/m)}},tC={__proto__:null,LonLat:Wp,Mercator:Yp,SphericalMercator:oe},nC=s({},ve,{code:"EPSG:3395",projection:Yp,transformation:function(){var c=.5/(Math.PI*Yp.R);return Se(c,.5,-c,.5)}()}),m0=s({},ve,{code:"EPSG:4326",projection:Wp,transformation:Se(1/180,1,-1/180,.5)}),rC=s({},ge,{projection:Wp,transformation:Se(1,0,-1,0),scale:function(c){return Math.pow(2,c)},zoom:function(c){return Math.log(c)/Math.LN2},distance:function(c,h){var m=h.lng-c.lng,y=h.lat-c.lat;return Math.sqrt(m*m+y*y)},infinite:!0});ge.Earth=ve,ge.EPSG3395=nC,ge.EPSG3857=ae,ge.EPSG900913=ke,ge.EPSG4326=m0,ge.Simple=rC;var dr=q.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(c){return c.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(c){return c&&c.removeLayer(this),this},getPane:function(c){return this._map.getPane(c?this.options[c]||c:this.options.pane)},addInteractiveTarget:function(c){return this._map._targets[d(c)]=this,this},removeInteractiveTarget:function(c){return delete this._map._targets[d(c)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(c){var h=c.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var m=this.getEvents();h.on(m,this),this.once("remove",function(){h.off(m,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});$e.include({addLayer:function(c){if(!c._layerAdd)throw new Error("The provided object is not a Layer.");var h=d(c);return this._layers[h]?this:(this._layers[h]=c,c._mapToAdd=this,c.beforeAdd&&c.beforeAdd(this),this.whenReady(c._layerAdd,c),this)},removeLayer:function(c){var h=d(c);return this._layers[h]?(this._loaded&&c.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:c}),c.fire("remove")),c._map=c._mapToAdd=null,this):this},hasLayer:function(c){return d(c)in this._layers},eachLayer:function(c,h){for(var m in this._layers)c.call(h,this._layers[m]);return this},_addLayers:function(c){c=c?S(c)?c:[c]:[];for(var h=0,m=c.length;h<m;h++)this.addLayer(c[h])},_addZoomLimit:function(c){(!isNaN(c.options.maxZoom)||!isNaN(c.options.minZoom))&&(this._zoomBoundLayers[d(c)]=c,this._updateZoomLevels())},_removeZoomLimit:function(c){var h=d(c);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var c=1/0,h=-1/0,m=this._getZoomSpan();for(var y in this._zoomBoundLayers){var k=this._zoomBoundLayers[y].options;c=k.minZoom===void 0?c:Math.min(c,k.minZoom),h=k.maxZoom===void 0?h:Math.max(h,k.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=c===1/0?void 0:c,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ja=dr.extend({initialize:function(c,h){b(this,h),this._layers={};var m,y;if(c)for(m=0,y=c.length;m<y;m++)this.addLayer(c[m])},addLayer:function(c){var h=this.getLayerId(c);return this._layers[h]=c,this._map&&this._map.addLayer(c),this},removeLayer:function(c){var h=c in this._layers?c:this.getLayerId(c);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(c){var h=typeof c=="number"?c:this.getLayerId(c);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(c){var h=Array.prototype.slice.call(arguments,1),m,y;for(m in this._layers)y=this._layers[m],y[c]&&y[c].apply(y,h);return this},onAdd:function(c){this.eachLayer(c.addLayer,c)},onRemove:function(c){this.eachLayer(c.removeLayer,c)},eachLayer:function(c,h){for(var m in this._layers)c.call(h,this._layers[m]);return this},getLayer:function(c){return this._layers[c]},getLayers:function(){var c=[];return this.eachLayer(c.push,c),c},setZIndex:function(c){return this.invoke("setZIndex",c)},getLayerId:function(c){return d(c)}}),sC=function(c,h){return new ja(c,h)},Gr=ja.extend({addLayer:function(c){return this.hasLayer(c)?this:(c.addEventParent(this),ja.prototype.addLayer.call(this,c),this.fire("layeradd",{layer:c}))},removeLayer:function(c){return this.hasLayer(c)?(c in this._layers&&(c=this._layers[c]),c.removeEventParent(this),ja.prototype.removeLayer.call(this,c),this.fire("layerremove",{layer:c})):this},setStyle:function(c){return this.invoke("setStyle",c)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var c=new Q;for(var h in this._layers){var m=this._layers[h];c.extend(m.getBounds?m.getBounds():m.getLatLng())}return c}}),iC=function(c,h){return new Gr(c,h)},Na=B.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(c){b(this,c)},createIcon:function(c){return this._createIcon("icon",c)},createShadow:function(c){return this._createIcon("shadow",c)},_createIcon:function(c,h){var m=this._getIconUrl(c);if(!m){if(c==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var y=this._createImg(m,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(y,c),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),y},_setIconStyles:function(c,h){var m=this.options,y=m[h+"Size"];typeof y=="number"&&(y=[y,y]);var k=E(y),O=E(h==="shadow"&&m.shadowAnchor||m.iconAnchor||k&&k.divideBy(2,!0));c.className="leaflet-marker-"+h+" "+(m.className||""),O&&(c.style.marginLeft=-O.x+"px",c.style.marginTop=-O.y+"px"),k&&(c.style.width=k.x+"px",c.style.height=k.y+"px")},_createImg:function(c,h){return h=h||document.createElement("img"),h.src=c,h},_getIconUrl:function(c){return we.retina&&this.options[c+"RetinaUrl"]||this.options[c+"Url"]}});function aC(c){return new Na(c)}var el=Na.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(c){return typeof el.imagePath!="string"&&(el.imagePath=this._detectIconPath()),(this.options.imagePath||el.imagePath)+Na.prototype._getIconUrl.call(this,c)},_stripUrl:function(c){var h=function(m,y,k){var O=y.exec(m);return O&&O[k]};return c=h(c,/^url\((['"])?(.+)\1\)$/,2),c&&h(c,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var c=Ye("div","leaflet-default-icon-path",document.body),h=qo(c,"background-image")||qo(c,"backgroundImage");if(document.body.removeChild(c),h=this._stripUrl(h),h)return h;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),g0=kr.extend({initialize:function(c){this._marker=c},addHooks:function(){var c=this._marker._icon;this._draggable||(this._draggable=new ws(c,c,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Te(c,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&wt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(c){var h=this._marker,m=h._map,y=this._marker.options.autoPanSpeed,k=this._marker.options.autoPanPadding,O=bi(h._icon),H=m.getPixelBounds(),J=m.getPixelOrigin(),ne=re(H.min._subtract(J).add(k),H.max._subtract(J).subtract(k));if(!ne.contains(O)){var ce=E((Math.max(ne.max.x,O.x)-ne.max.x)/(H.max.x-ne.max.x)-(Math.min(ne.min.x,O.x)-ne.min.x)/(H.min.x-ne.min.x),(Math.max(ne.max.y,O.y)-ne.max.y)/(H.max.y-ne.max.y)-(Math.min(ne.min.y,O.y)-ne.min.y)/(H.min.y-ne.min.y)).multiplyBy(y);m.panBy(ce,{animate:!1}),this._draggable._newPos._add(ce),this._draggable._startPos._add(ce),Et(h._icon,this._draggable._newPos),this._onDrag(c),this._panRequest=U(this._adjustPan.bind(this,c))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(c){this._marker.options.autoPan&&(te(this._panRequest),this._panRequest=U(this._adjustPan.bind(this,c)))},_onDrag:function(c){var h=this._marker,m=h._shadow,y=bi(h._icon),k=h._map.layerPointToLatLng(y);m&&Et(m,y),h._latlng=k,c.latlng=k,c.oldLatLng=this._oldLatLng,h.fire("move",c).fire("drag",c)},_onDragEnd:function(c){te(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",c)}}),od=dr.extend({options:{icon:new el,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(c,h){b(this,h),this._latlng=ie(c)},onAdd:function(c){this._zoomAnimated=this._zoomAnimated&&c.options.markerZoomAnimation,this._zoomAnimated&&c.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(c){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&c.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(c){var h=this._latlng;return this._latlng=ie(c),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(c){return this.options.zIndexOffset=c,this.update()},getIcon:function(){return this.options.icon},setIcon:function(c){return this.options.icon=c,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var c=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(c)}return this},_initIcon:function(){var c=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=c.icon.createIcon(this._icon),y=!1;m!==this._icon&&(this._icon&&this._removeIcon(),y=!0,c.title&&(m.title=c.title),m.tagName==="IMG"&&(m.alt=c.alt||"")),Te(m,h),c.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,c.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ce(m,"focus",this._panOnFocus,this);var k=c.icon.createShadow(this._shadow),O=!1;k!==this._shadow&&(this._removeShadow(),O=!0),k&&(Te(k,h),k.alt=""),this._shadow=k,c.opacity<1&&this._updateOpacity(),y&&this.getPane().appendChild(this._icon),this._initInteraction(),k&&O&&this.getPane(c.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&et(this._icon,"focus",this._panOnFocus,this),pt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&pt(this._shadow),this._shadow=null},_setPos:function(c){this._icon&&Et(this._icon,c),this._shadow&&Et(this._shadow,c),this._zIndex=c.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(c){this._icon&&(this._icon.style.zIndex=this._zIndex+c)},_animateZoom:function(c){var h=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(Te(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),g0)){var c=this.options.draggable;this.dragging&&(c=this.dragging.enabled(),this.dragging.disable()),this.dragging=new g0(this),c&&this.dragging.enable()}},setOpacity:function(c){return this.options.opacity=c,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var c=this.options.opacity;this._icon&&Un(this._icon,c),this._shadow&&Un(this._shadow,c)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var c=this._map;if(c){var h=this.options.icon.options,m=h.iconSize?E(h.iconSize):E(0,0),y=h.iconAnchor?E(h.iconAnchor):E(0,0);c.panInside(this._latlng,{paddingTopLeft:y,paddingBottomRight:m.subtract(y)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function oC(c,h){return new od(c,h)}var js=dr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(c){this._renderer=c.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(c){return b(this,c),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&c&&Object.prototype.hasOwnProperty.call(c,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ld=js.extend({options:{fill:!0,radius:10},initialize:function(c,h){b(this,h),this._latlng=ie(c),this._radius=this.options.radius},setLatLng:function(c){var h=this._latlng;return this._latlng=ie(c),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(c){return this.options.radius=this._radius=c,this.redraw()},getRadius:function(){return this._radius},setStyle:function(c){var h=c&&c.radius||this._radius;return js.prototype.setStyle.call(this,c),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var c=this._radius,h=this._radiusY||c,m=this._clickTolerance(),y=[c+m,h+m];this._pxBounds=new K(this._point.subtract(y),this._point.add(y))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(c){return c.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function lC(c,h){return new ld(c,h)}var Vp=ld.extend({initialize:function(c,h,m){if(typeof h=="number"&&(h=s({},m,{radius:h})),b(this,h),this._latlng=ie(c),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(c){return this._mRadius=c,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var c=[this._radius,this._radiusY||this._radius];return new Q(this._map.layerPointToLatLng(this._point.subtract(c)),this._map.layerPointToLatLng(this._point.add(c)))},setStyle:js.prototype.setStyle,_project:function(){var c=this._latlng.lng,h=this._latlng.lat,m=this._map,y=m.options.crs;if(y.distance===ve.distance){var k=Math.PI/180,O=this._mRadius/ve.R/k,H=m.project([h+O,c]),J=m.project([h-O,c]),ne=H.add(J).divideBy(2),ce=m.unproject(ne).lat,me=Math.acos((Math.cos(O*k)-Math.sin(h*k)*Math.sin(ce*k))/(Math.cos(h*k)*Math.cos(ce*k)))/k;(isNaN(me)||me===0)&&(me=O/Math.cos(Math.PI/180*h)),this._point=ne.subtract(m.getPixelOrigin()),this._radius=isNaN(me)?0:ne.x-m.project([ce,c-me]).x,this._radiusY=ne.y-H.y}else{var Ne=y.unproject(y.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(Ne).x}this._updateBounds()}});function cC(c,h,m){return new Vp(c,h,m)}var Qr=js.extend({options:{smoothFactor:1,noClip:!1},initialize:function(c,h){b(this,h),this._setLatLngs(c)},getLatLngs:function(){return this._latlngs},setLatLngs:function(c){return this._setLatLngs(c),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(c){for(var h=1/0,m=null,y=Jo,k,O,H=0,J=this._parts.length;H<J;H++)for(var ne=this._parts[H],ce=1,me=ne.length;ce<me;ce++){k=ne[ce-1],O=ne[ce];var Ne=y(c,k,O,!0);Ne<h&&(h=Ne,m=y(c,k,O))}return m&&(m.distance=Math.sqrt(h)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return f0(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(c,h){return h=h||this._defaultShape(),c=ie(c),h.push(c),this._bounds.extend(c),this.redraw()},_setLatLngs:function(c){this._bounds=new Q,this._latlngs=this._convertLatLngs(c)},_defaultShape:function(){return Hn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(c){for(var h=[],m=Hn(c),y=0,k=c.length;y<k;y++)m?(h[y]=ie(c[y]),this._bounds.extend(h[y])):h[y]=this._convertLatLngs(c[y]);return h},_project:function(){var c=new K;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,c),this._bounds.isValid()&&c.isValid()&&(this._rawPxBounds=c,this._updateBounds())},_updateBounds:function(){var c=this._clickTolerance(),h=new I(c,c);this._rawPxBounds&&(this._pxBounds=new K([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(c,h,m){var y=c[0]instanceof le,k=c.length,O,H;if(y){for(H=[],O=0;O<k;O++)H[O]=this._map.latLngToLayerPoint(c[O]),m.extend(H[O]);h.push(H)}else for(O=0;O<k;O++)this._projectLatlngs(c[O],h,m)},_clipPoints:function(){var c=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,m,y,k,O,H,J,ne;for(m=0,k=0,O=this._rings.length;m<O;m++)for(ne=this._rings[m],y=0,H=ne.length;y<H-1;y++)J=h0(ne[y],ne[y+1],c,y,!0),J&&(h[k]=h[k]||[],h[k].push(J[0]),(J[1]!==ne[y+1]||y===H-2)&&(h[k].push(J[1]),k++))}},_simplifyPoints:function(){for(var c=this._parts,h=this.options.smoothFactor,m=0,y=c.length;m<y;m++)c[m]=c0(c[m],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(c,h){var m,y,k,O,H,J,ne=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(m=0,O=this._parts.length;m<O;m++)for(J=this._parts[m],y=0,H=J.length,k=H-1;y<H;k=y++)if(!(!h&&y===0)&&d0(c,J[k],J[y])<=ne)return!0;return!1}});function dC(c,h){return new Qr(c,h)}Qr._flat=p0;var ka=Qr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return l0(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(c){var h=Qr.prototype._convertLatLngs.call(this,c),m=h.length;return m>=2&&h[0]instanceof le&&h[0].equals(h[m-1])&&h.pop(),h},_setLatLngs:function(c){Qr.prototype._setLatLngs.call(this,c),Hn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Hn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var c=this._renderer._bounds,h=this.options.weight,m=new I(h,h);if(c=new K(c.min.subtract(m),c.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}for(var y=0,k=this._rings.length,O;y<k;y++)O=o0(this._rings[y],c,!0),O.length&&this._parts.push(O)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(c){var h=!1,m,y,k,O,H,J,ne,ce;if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(O=0,ne=this._parts.length;O<ne;O++)for(m=this._parts[O],H=0,ce=m.length,J=ce-1;H<ce;J=H++)y=m[H],k=m[J],y.y>c.y!=k.y>c.y&&c.x<(k.x-y.x)*(c.y-y.y)/(k.y-y.y)+y.x&&(h=!h);return h||Qr.prototype._containsPoint.call(this,c,!0)}});function uC(c,h){return new ka(c,h)}var Xr=Gr.extend({initialize:function(c,h){b(this,h),this._layers={},c&&this.addData(c)},addData:function(c){var h=S(c)?c:c.features,m,y,k;if(h){for(m=0,y=h.length;m<y;m++)k=h[m],(k.geometries||k.geometry||k.features||k.coordinates)&&this.addData(k);return this}var O=this.options;if(O.filter&&!O.filter(c))return this;var H=cd(c,O);return H?(H.feature=hd(c),H.defaultOptions=H.options,this.resetStyle(H),O.onEachFeature&&O.onEachFeature(c,H),this.addLayer(H)):this},resetStyle:function(c){return c===void 0?this.eachLayer(this.resetStyle,this):(c.options=s({},c.defaultOptions),this._setLayerStyle(c,this.options.style),this)},setStyle:function(c){return this.eachLayer(function(h){this._setLayerStyle(h,c)},this)},_setLayerStyle:function(c,h){c.setStyle&&(typeof h=="function"&&(h=h(c.feature)),c.setStyle(h))}});function cd(c,h){var m=c.type==="Feature"?c.geometry:c,y=m?m.coordinates:null,k=[],O=h&&h.pointToLayer,H=h&&h.coordsToLatLng||qp,J,ne,ce,me;if(!y&&!m)return null;switch(m.type){case"Point":return J=H(y),x0(O,c,J,h);case"MultiPoint":for(ce=0,me=y.length;ce<me;ce++)J=H(y[ce]),k.push(x0(O,c,J,h));return new Gr(k);case"LineString":case"MultiLineString":return ne=dd(y,m.type==="LineString"?0:1,H),new Qr(ne,h);case"Polygon":case"MultiPolygon":return ne=dd(y,m.type==="Polygon"?1:2,H),new ka(ne,h);case"GeometryCollection":for(ce=0,me=m.geometries.length;ce<me;ce++){var Ne=cd({geometry:m.geometries[ce],type:"Feature",properties:c.properties},h);Ne&&k.push(Ne)}return new Gr(k);case"FeatureCollection":for(ce=0,me=m.features.length;ce<me;ce++){var Me=cd(m.features[ce],h);Me&&k.push(Me)}return new Gr(k);default:throw new Error("Invalid GeoJSON object.")}}function x0(c,h,m,y){return c?c(h,m):new od(m,y&&y.markersInheritOptions&&y)}function qp(c){return new le(c[1],c[0],c[2])}function dd(c,h,m){for(var y=[],k=0,O=c.length,H;k<O;k++)H=h?dd(c[k],h-1,m):(m||qp)(c[k]),y.push(H);return y}function Zp(c,h){return c=ie(c),c.alt!==void 0?[x(c.lng,h),x(c.lat,h),x(c.alt,h)]:[x(c.lng,h),x(c.lat,h)]}function ud(c,h,m,y){for(var k=[],O=0,H=c.length;O<H;O++)k.push(h?ud(c[O],Hn(c[O])?0:h-1,m,y):Zp(c[O],y));return!h&&m&&k.length>0&&k.push(k[0].slice()),k}function Sa(c,h){return c.feature?s({},c.feature,{geometry:h}):hd(h)}function hd(c){return c.type==="Feature"||c.type==="FeatureCollection"?c:{type:"Feature",properties:{},geometry:c}}var Kp={toGeoJSON:function(c){return Sa(this,{type:"Point",coordinates:Zp(this.getLatLng(),c)})}};od.include(Kp),Vp.include(Kp),ld.include(Kp),Qr.include({toGeoJSON:function(c){var h=!Hn(this._latlngs),m=ud(this._latlngs,h?1:0,!1,c);return Sa(this,{type:(h?"Multi":"")+"LineString",coordinates:m})}}),ka.include({toGeoJSON:function(c){var h=!Hn(this._latlngs),m=h&&!Hn(this._latlngs[0]),y=ud(this._latlngs,m?2:h?1:0,!0,c);return h||(y=[y]),Sa(this,{type:(m?"Multi":"")+"Polygon",coordinates:y})}}),ja.include({toMultiPoint:function(c){var h=[];return this.eachLayer(function(m){h.push(m.toGeoJSON(c).geometry.coordinates)}),Sa(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(c){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(c);var m=h==="GeometryCollection",y=[];return this.eachLayer(function(k){if(k.toGeoJSON){var O=k.toGeoJSON(c);if(m)y.push(O.geometry);else{var H=hd(O);H.type==="FeatureCollection"?y.push.apply(y,H.features):y.push(H)}}}),m?Sa(this,{geometries:y,type:"GeometryCollection"}):{type:"FeatureCollection",features:y}}});function v0(c,h){return new Xr(c,h)}var hC=v0,pd=dr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(c,h,m){this._url=c,this._bounds=se(h),b(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Te(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){pt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(c){return this.options.opacity=c,this._image&&this._updateOpacity(),this},setStyle:function(c){return c.opacity&&this.setOpacity(c.opacity),this},bringToFront:function(){return this._map&&_a(this._image),this},bringToBack:function(){return this._map&&wa(this._image),this},setUrl:function(c){return this._url=c,this._image&&(this._image.src=c),this},setBounds:function(c){return this._bounds=se(c),this._map&&this._reset(),this},getEvents:function(){var c={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var c=this._url.tagName==="IMG",h=this._image=c?this._url:Ye("img");if(Te(h,"leaflet-image-layer"),this._zoomAnimated&&Te(h,"leaflet-zoom-animated"),this.options.className&&Te(h,this.options.className),h.onselectstart=f,h.onmousemove=f,h.onload=o(this.fire,this,"load"),h.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),c){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(c){var h=this._map.getZoomScale(c.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,c.zoom,c.center).min;yi(this._image,m,h)},_reset:function(){var c=this._image,h=new K(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=h.getSize();Et(c,h.min),c.style.width=m.x+"px",c.style.height=m.y+"px"},_updateOpacity:function(){Un(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var c=this.options.errorOverlayUrl;c&&this._url!==c&&(this._url=c,this._image.src=c)},getCenter:function(){return this._bounds.getCenter()}}),pC=function(c,h,m){return new pd(c,h,m)},y0=pd.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var c=this._url.tagName==="VIDEO",h=this._image=c?this._url:Ye("video");if(Te(h,"leaflet-image-layer"),this._zoomAnimated&&Te(h,"leaflet-zoom-animated"),this.options.className&&Te(h,this.options.className),h.onselectstart=f,h.onmousemove=f,h.onloadeddata=o(this.fire,this,"load"),c){for(var m=h.getElementsByTagName("source"),y=[],k=0;k<m.length;k++)y.push(m[k].src);this._url=m.length>0?y:[h.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var O=0;O<this._url.length;O++){var H=Ye("source");H.src=this._url[O],h.appendChild(H)}}});function fC(c,h,m){return new y0(c,h,m)}var b0=pd.extend({_initImage:function(){var c=this._image=this._url;Te(c,"leaflet-image-layer"),this._zoomAnimated&&Te(c,"leaflet-zoom-animated"),this.options.className&&Te(c,this.options.className),c.onselectstart=f,c.onmousemove=f}});function mC(c,h,m){return new b0(c,h,m)}var Sr=dr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(c,h){c&&(c instanceof le||S(c))?(this._latlng=ie(c),b(this,h)):(b(this,c),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(c){return c=arguments.length?c:this._source._map,c.hasLayer(this)||c.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(c){return this._map?this.close():(arguments.length?this._source=c:c=this._source,this._prepareOpen(),this.openOn(c._map)),this},onAdd:function(c){this._zoomAnimated=c._zoomAnimated,this._container||this._initLayout(),c._fadeAnimated&&Un(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),c._fadeAnimated&&Un(this._container,1),this.bringToFront(),this.options.interactive&&(Te(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(c){c._fadeAnimated?(Un(this._container,0),this._removeTimeout=setTimeout(o(pt,void 0,this._container),200)):pt(this._container),this.options.interactive&&(wt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(c){return this._latlng=ie(c),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(c){return this._content=c,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var c={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&_a(this._container),this},bringToBack:function(){return this._map&&wa(this._container),this},_prepareOpen:function(c){var h=this._source;if(!h._map)return!1;if(h instanceof Gr){h=null;var m=this._source._layers;for(var y in m)if(m[y]._map){h=m[y];break}if(!h)return!1;this._source=h}if(!c)if(h.getCenter)c=h.getCenter();else if(h.getLatLng)c=h.getLatLng();else if(h.getBounds)c=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(c),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var c=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")c.innerHTML=h;else{for(;c.hasChildNodes();)c.removeChild(c.firstChild);c.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var c=this._map.latLngToLayerPoint(this._latlng),h=E(this.options.offset),m=this._getAnchor();this._zoomAnimated?Et(this._container,c.add(m)):h=h.add(c).add(m);var y=this._containerBottom=-h.y,k=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=y+"px",this._container.style.left=k+"px"}},_getAnchor:function(){return[0,0]}});$e.include({_initOverlay:function(c,h,m,y){var k=h;return k instanceof c||(k=new c(y).setContent(h)),m&&k.setLatLng(m),k}}),dr.include({_initOverlay:function(c,h,m,y){var k=m;return k instanceof c?(b(k,y),k._source=this):(k=h&&!y?h:new c(y,this),k.setContent(m)),k}});var fd=Sr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(c){return c=arguments.length?c:this._source._map,!c.hasLayer(this)&&c._popup&&c._popup.options.autoClose&&c.removeLayer(c._popup),c._popup=this,Sr.prototype.openOn.call(this,c)},onAdd:function(c){Sr.prototype.onAdd.call(this,c),c.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof js||this._source.on("preclick",_i))},onRemove:function(c){Sr.prototype.onRemove.call(this,c),c.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof js||this._source.off("preclick",_i))},getEvents:function(){var c=Sr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(c.preclick=this.close),this.options.keepInView&&(c.moveend=this._adjustPan),c},_initLayout:function(){var c="leaflet-popup",h=this._container=Ye("div",c+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=Ye("div",c+"-content-wrapper",h);if(this._contentNode=Ye("div",c+"-content",m),Qo(h),Fp(this._contentNode),Ce(h,"contextmenu",_i),this._tipContainer=Ye("div",c+"-tip-container",h),this._tip=Ye("div",c+"-tip",this._tipContainer),this.options.closeButton){var y=this._closeButton=Ye("a",c+"-close-button",h);y.setAttribute("role","button"),y.setAttribute("aria-label","Close popup"),y.href="#close",y.innerHTML='<span aria-hidden="true">&#215;</span>',Ce(y,"click",function(k){qt(k),this.close()},this)}},_updateLayout:function(){var c=this._contentNode,h=c.style;h.width="",h.whiteSpace="nowrap";var m=c.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),h.width=m+1+"px",h.whiteSpace="",h.height="";var y=c.offsetHeight,k=this.options.maxHeight,O="leaflet-popup-scrolled";k&&y>k?(h.height=k+"px",Te(c,O)):wt(c,O),this._containerWidth=this._container.offsetWidth},_animateZoom:function(c){var h=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center),m=this._getAnchor();Et(this._container,h.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var c=this._map,h=parseInt(qo(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+h,y=this._containerWidth,k=new I(this._containerLeft,-m-this._containerBottom);k._add(bi(this._container));var O=c.layerPointToContainerPoint(k),H=E(this.options.autoPanPadding),J=E(this.options.autoPanPaddingTopLeft||H),ne=E(this.options.autoPanPaddingBottomRight||H),ce=c.getSize(),me=0,Ne=0;O.x+y+ne.x>ce.x&&(me=O.x+y-ce.x+ne.x),O.x-me-J.x<0&&(me=O.x-J.x),O.y+m+ne.y>ce.y&&(Ne=O.y+m-ce.y+ne.y),O.y-Ne-J.y<0&&(Ne=O.y-J.y),(me||Ne)&&(this.options.keepInView&&(this._autopanning=!0),c.fire("autopanstart").panBy([me,Ne]))}},_getAnchor:function(){return E(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),gC=function(c,h){return new fd(c,h)};$e.mergeOptions({closePopupOnClick:!0}),$e.include({openPopup:function(c,h,m){return this._initOverlay(fd,c,h,m).openOn(this),this},closePopup:function(c){return c=arguments.length?c:this._popup,c&&c.close(),this}}),dr.include({bindPopup:function(c,h){return this._popup=this._initOverlay(fd,this._popup,c,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(c){return this._popup&&(this instanceof Gr||(this._popup._source=this),this._popup._prepareOpen(c||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(c){return this._popup&&this._popup.setContent(c),this},getPopup:function(){return this._popup},_openPopup:function(c){if(!(!this._popup||!this._map)){wi(c);var h=c.layer||c.target;if(this._popup._source===h&&!(h instanceof js)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(c.latlng);return}this._popup._source=h,this.openPopup(c.latlng)}},_movePopup:function(c){this._popup.setLatLng(c.latlng)},_onKeyPress:function(c){c.originalEvent.keyCode===13&&this._openPopup(c)}});var md=Sr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(c){Sr.prototype.onAdd.call(this,c),this.setOpacity(this.options.opacity),c.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(c){Sr.prototype.onRemove.call(this,c),c.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var c=Sr.prototype.getEvents.call(this);return this.options.permanent||(c.preclick=this.close),c},_initLayout:function(){var c="leaflet-tooltip",h=c+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ye("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(c){var h,m,y=this._map,k=this._container,O=y.latLngToContainerPoint(y.getCenter()),H=y.layerPointToContainerPoint(c),J=this.options.direction,ne=k.offsetWidth,ce=k.offsetHeight,me=E(this.options.offset),Ne=this._getAnchor();J==="top"?(h=ne/2,m=ce):J==="bottom"?(h=ne/2,m=0):J==="center"?(h=ne/2,m=ce/2):J==="right"?(h=0,m=ce/2):J==="left"?(h=ne,m=ce/2):H.x<O.x?(J="right",h=0,m=ce/2):(J="left",h=ne+(me.x+Ne.x)*2,m=ce/2),c=c.subtract(E(h,m,!0)).add(me).add(Ne),wt(k,"leaflet-tooltip-right"),wt(k,"leaflet-tooltip-left"),wt(k,"leaflet-tooltip-top"),wt(k,"leaflet-tooltip-bottom"),Te(k,"leaflet-tooltip-"+J),Et(k,c)},_updatePosition:function(){var c=this._map.latLngToLayerPoint(this._latlng);this._setPosition(c)},setOpacity:function(c){this.options.opacity=c,this._container&&Un(this._container,c)},_animateZoom:function(c){var h=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center);this._setPosition(h)},_getAnchor:function(){return E(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),xC=function(c,h){return new md(c,h)};$e.include({openTooltip:function(c,h,m){return this._initOverlay(md,c,h,m).openOn(this),this},closeTooltip:function(c){return c.close(),this}}),dr.include({bindTooltip:function(c,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(md,this._tooltip,c,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(c){if(!(!c&&this._tooltipHandlersAdded)){var h=c?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[h](m),this._tooltipHandlersAdded=!c}},openTooltip:function(c){return this._tooltip&&(this instanceof Gr||(this._tooltip._source=this),this._tooltip._prepareOpen(c)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(c){return this._tooltip&&this._tooltip.setContent(c),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(c){var h=typeof c.getElement=="function"&&c.getElement();h&&(Ce(h,"focus",function(){this._tooltip._source=c,this.openTooltip()},this),Ce(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(c){var h=typeof c.getElement=="function"&&c.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(c){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(c)});return}this._tooltip._source=c.layer||c.target,this.openTooltip(this._tooltip.options.sticky?c.latlng:void 0)}},_moveTooltip:function(c){var h=c.latlng,m,y;this._tooltip.options.sticky&&c.originalEvent&&(m=this._map.mouseEventToContainerPoint(c.originalEvent),y=this._map.containerPointToLayerPoint(m),h=this._map.layerPointToLatLng(y)),this._tooltip.setLatLng(h)}});var _0=Na.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(c){var h=c&&c.tagName==="DIV"?c:document.createElement("div"),m=this.options;if(m.html instanceof Element?(td(h),h.appendChild(m.html)):h.innerHTML=m.html!==!1?m.html:"",m.bgPos){var y=E(m.bgPos);h.style.backgroundPosition=-y.x+"px "+-y.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function vC(c){return new _0(c)}Na.Default=el;var tl=dr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:we.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(c){b(this,c)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(c){c._addZoomLimit(this)},onRemove:function(c){this._removeAllTiles(),pt(this._container),c._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(_a(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(wa(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(c){return this.options.opacity=c,this._updateOpacity(),this},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var c=this._clampZoom(this._map.getZoom());c!==this._tileZoom&&(this._tileZoom=c,this._updateLevels()),this._update()}return this},getEvents:function(){var c={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),c.move=this._onMove),this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},createTile:function(){return document.createElement("div")},getTileSize:function(){var c=this.options.tileSize;return c instanceof I?c:new I(c,c)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(c){for(var h=this.getPane().children,m=-c(-1/0,1/0),y=0,k=h.length,O;y<k;y++)O=h[y].style.zIndex,h[y]!==this._container&&O&&(m=c(m,+O));isFinite(m)&&(this.options.zIndex=m+c(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!we.ielt9){Un(this._container,this.options.opacity);var c=+new Date,h=!1,m=!1;for(var y in this._tiles){var k=this._tiles[y];if(!(!k.current||!k.loaded)){var O=Math.min(1,(c-k.loaded)/200);Un(k.el,O),O<1?h=!0:(k.active?m=!0:this._onOpaqueTile(k),k.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),h&&(te(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=Ye("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var c=this._tileZoom,h=this.options.maxZoom;if(c!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===c?(this._levels[m].el.style.zIndex=h-Math.abs(c-m),this._onUpdateLevel(m)):(pt(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var y=this._levels[c],k=this._map;return y||(y=this._levels[c]={},y.el=Ye("div","leaflet-tile-container leaflet-zoom-animated",this._container),y.el.style.zIndex=h,y.origin=k.project(k.unproject(k.getPixelOrigin()),c).round(),y.zoom=c,this._setZoomTransform(y,k.getCenter(),k.getZoom()),f(y.el.offsetWidth),this._onCreateLevel(y)),this._level=y,y}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var c,h,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(c in this._tiles)h=this._tiles[c],h.retain=h.current;for(c in this._tiles)if(h=this._tiles[c],h.current&&!h.active){var y=h.coords;this._retainParent(y.x,y.y,y.z,y.z-5)||this._retainChildren(y.x,y.y,y.z,y.z+2)}for(c in this._tiles)this._tiles[c].retain||this._removeTile(c)}},_removeTilesAtZoom:function(c){for(var h in this._tiles)this._tiles[h].coords.z===c&&this._removeTile(h)},_removeAllTiles:function(){for(var c in this._tiles)this._removeTile(c)},_invalidateAll:function(){for(var c in this._levels)pt(this._levels[c].el),this._onRemoveLevel(Number(c)),delete this._levels[c];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(c,h,m,y){var k=Math.floor(c/2),O=Math.floor(h/2),H=m-1,J=new I(+k,+O);J.z=+H;var ne=this._tileCoordsToKey(J),ce=this._tiles[ne];return ce&&ce.active?(ce.retain=!0,!0):(ce&&ce.loaded&&(ce.retain=!0),H>y?this._retainParent(k,O,H,y):!1)},_retainChildren:function(c,h,m,y){for(var k=2*c;k<2*c+2;k++)for(var O=2*h;O<2*h+2;O++){var H=new I(k,O);H.z=m+1;var J=this._tileCoordsToKey(H),ne=this._tiles[J];if(ne&&ne.active){ne.retain=!0;continue}else ne&&ne.loaded&&(ne.retain=!0);m+1<y&&this._retainChildren(k,O,m+1,y)}},_resetView:function(c){var h=c&&(c.pinch||c.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(c){this._setView(c.center,c.zoom,!0,c.noUpdate)},_clampZoom:function(c){var h=this.options;return h.minNativeZoom!==void 0&&c<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<c?h.maxNativeZoom:c},_setView:function(c,h,m,y){var k=Math.round(h);this.options.maxZoom!==void 0&&k>this.options.maxZoom||this.options.minZoom!==void 0&&k<this.options.minZoom?k=void 0:k=this._clampZoom(k);var O=this.options.updateWhenZooming&&k!==this._tileZoom;(!y||O)&&(this._tileZoom=k,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),k!==void 0&&this._update(c),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(c,h)},_setZoomTransforms:function(c,h){for(var m in this._levels)this._setZoomTransform(this._levels[m],c,h)},_setZoomTransform:function(c,h,m){var y=this._map.getZoomScale(m,c.zoom),k=c.origin.multiplyBy(y).subtract(this._map._getNewPixelOrigin(h,m)).round();we.any3d?yi(c.el,k,y):Et(c.el,k)},_resetGrid:function(){var c=this._map,h=c.options.crs,m=this._tileSize=this.getTileSize(),y=this._tileZoom,k=this._map.getPixelWorldBounds(this._tileZoom);k&&(this._globalTileRange=this._pxBoundsToTileRange(k)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(c.project([0,h.wrapLng[0]],y).x/m.x),Math.ceil(c.project([0,h.wrapLng[1]],y).x/m.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(c.project([h.wrapLat[0],0],y).y/m.x),Math.ceil(c.project([h.wrapLat[1],0],y).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(c){var h=this._map,m=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),y=h.getZoomScale(m,this._tileZoom),k=h.project(c,this._tileZoom).floor(),O=h.getSize().divideBy(y*2);return new K(k.subtract(O),k.add(O))},_update:function(c){var h=this._map;if(h){var m=this._clampZoom(h.getZoom());if(c===void 0&&(c=h.getCenter()),this._tileZoom!==void 0){var y=this._getTiledPixelBounds(c),k=this._pxBoundsToTileRange(y),O=k.getCenter(),H=[],J=this.options.keepBuffer,ne=new K(k.getBottomLeft().subtract([J,-J]),k.getTopRight().add([J,-J]));if(!(isFinite(k.min.x)&&isFinite(k.min.y)&&isFinite(k.max.x)&&isFinite(k.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ce in this._tiles){var me=this._tiles[ce].coords;(me.z!==this._tileZoom||!ne.contains(new I(me.x,me.y)))&&(this._tiles[ce].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(c,m);return}for(var Ne=k.min.y;Ne<=k.max.y;Ne++)for(var Me=k.min.x;Me<=k.max.x;Me++){var cn=new I(Me,Ne);if(cn.z=this._tileZoom,!!this._isValidTile(cn)){var Rt=this._tiles[this._tileCoordsToKey(cn)];Rt?Rt.current=!0:H.push(cn)}}if(H.sort(function(gn,Ea){return gn.distanceTo(O)-Ea.distanceTo(O)}),H.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Wn=document.createDocumentFragment();for(Me=0;Me<H.length;Me++)this._addTile(H[Me],Wn);this._level.el.appendChild(Wn)}}}},_isValidTile:function(c){var h=this._map.options.crs;if(!h.infinite){var m=this._globalTileRange;if(!h.wrapLng&&(c.x<m.min.x||c.x>m.max.x)||!h.wrapLat&&(c.y<m.min.y||c.y>m.max.y))return!1}if(!this.options.bounds)return!0;var y=this._tileCoordsToBounds(c);return se(this.options.bounds).overlaps(y)},_keyToBounds:function(c){return this._tileCoordsToBounds(this._keyToTileCoords(c))},_tileCoordsToNwSe:function(c){var h=this._map,m=this.getTileSize(),y=c.scaleBy(m),k=y.add(m),O=h.unproject(y,c.z),H=h.unproject(k,c.z);return[O,H]},_tileCoordsToBounds:function(c){var h=this._tileCoordsToNwSe(c),m=new Q(h[0],h[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(c){return c.x+":"+c.y+":"+c.z},_keyToTileCoords:function(c){var h=c.split(":"),m=new I(+h[0],+h[1]);return m.z=+h[2],m},_removeTile:function(c){var h=this._tiles[c];h&&(pt(h.el),delete this._tiles[c],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(c)}))},_initTile:function(c){Te(c,"leaflet-tile");var h=this.getTileSize();c.style.width=h.x+"px",c.style.height=h.y+"px",c.onselectstart=f,c.onmousemove=f,we.ielt9&&this.options.opacity<1&&Un(c,this.options.opacity)},_addTile:function(c,h){var m=this._getTilePos(c),y=this._tileCoordsToKey(c),k=this.createTile(this._wrapCoords(c),o(this._tileReady,this,c));this._initTile(k),this.createTile.length<2&&U(o(this._tileReady,this,c,null,k)),Et(k,m),this._tiles[y]={el:k,coords:c,current:!0},h.appendChild(k),this.fire("tileloadstart",{tile:k,coords:c})},_tileReady:function(c,h,m){h&&this.fire("tileerror",{error:h,tile:m,coords:c});var y=this._tileCoordsToKey(c);m=this._tiles[y],m&&(m.loaded=+new Date,this._map._fadeAnimated?(Un(m.el,0),te(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),h||(Te(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:c})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),we.ielt9||!this._map._fadeAnimated?U(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(c){return c.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(c){var h=new I(this._wrapX?p(c.x,this._wrapX):c.x,this._wrapY?p(c.y,this._wrapY):c.y);return h.z=c.z,h},_pxBoundsToTileRange:function(c){var h=this.getTileSize();return new K(c.min.unscaleBy(h).floor(),c.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var c in this._tiles)if(!this._tiles[c].loaded)return!1;return!0}});function yC(c){return new tl(c)}var Ca=tl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(c,h){this._url=c,h=b(this,h),h.detectRetina&&we.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(c,h){return this._url===c&&h===void 0&&(h=!0),this._url=c,h||this.redraw(),this},createTile:function(c,h){var m=document.createElement("img");return Ce(m,"load",o(this._tileOnLoad,this,h,m)),Ce(m,"error",o(this._tileOnError,this,h,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(c),m},getTileUrl:function(c){var h={r:we.retina?"@2x":"",s:this._getSubdomain(c),x:c.x,y:c.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-c.y;this.options.tms&&(h.y=m),h["-y"]=m}return N(this._url,s(h,this.options))},_tileOnLoad:function(c,h){we.ielt9?setTimeout(o(c,this,null,h),0):c(null,h)},_tileOnError:function(c,h,m){var y=this.options.errorTileUrl;y&&h.getAttribute("src")!==y&&(h.src=y),c(m,h)},_onTileRemove:function(c){c.tile.onload=null},_getZoomForUrl:function(){var c=this._tileZoom,h=this.options.maxZoom,m=this.options.zoomReverse,y=this.options.zoomOffset;return m&&(c=h-c),c+y},_getSubdomain:function(c){var h=Math.abs(c.x+c.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var c,h;for(c in this._tiles)if(this._tiles[c].coords.z!==this._tileZoom&&(h=this._tiles[c].el,h.onload=f,h.onerror=f,!h.complete)){h.src=M;var m=this._tiles[c].coords;pt(h),delete this._tiles[c],this.fire("tileabort",{tile:h,coords:m})}},_removeTile:function(c){var h=this._tiles[c];if(h)return h.el.setAttribute("src",M),tl.prototype._removeTile.call(this,c)},_tileReady:function(c,h,m){if(!(!this._map||m&&m.getAttribute("src")===M))return tl.prototype._tileReady.call(this,c,h,m)}});function w0(c,h){return new Ca(c,h)}var j0=Ca.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(c,h){this._url=c;var m=s({},this.defaultWmsParams);for(var y in h)y in this.options||(m[y]=h[y]);h=b(this,h);var k=h.detectRetina&&we.retina?2:1,O=this.getTileSize();m.width=O.x*k,m.height=O.y*k,this.wmsParams=m},onAdd:function(c){this._crs=this.options.crs||c.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,Ca.prototype.onAdd.call(this,c)},getTileUrl:function(c){var h=this._tileCoordsToNwSe(c),m=this._crs,y=re(m.project(h[0]),m.project(h[1])),k=y.min,O=y.max,H=(this._wmsVersion>=1.3&&this._crs===m0?[k.y,k.x,O.y,O.x]:[k.x,k.y,O.x,O.y]).join(","),J=Ca.prototype.getTileUrl.call(this,c);return J+j(this.wmsParams,J,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+H},setParams:function(c,h){return s(this.wmsParams,c),h||this.redraw(),this}});function bC(c,h){return new j0(c,h)}Ca.WMS=j0,w0.wms=bC;var Jr=dr.extend({options:{padding:.1},initialize:function(c){b(this,c),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Te(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var c={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(c.zoomanim=this._onAnimZoom),c},_onAnimZoom:function(c){this._updateTransform(c.center,c.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(c,h){var m=this._map.getZoomScale(h,this._zoom),y=this._map.getSize().multiplyBy(.5+this.options.padding),k=this._map.project(this._center,h),O=y.multiplyBy(-m).add(k).subtract(this._map._getNewPixelOrigin(c,h));we.any3d?yi(this._container,O,m):Et(this._container,O)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var c in this._layers)this._layers[c]._reset()},_onZoomEnd:function(){for(var c in this._layers)this._layers[c]._project()},_updatePaths:function(){for(var c in this._layers)this._layers[c]._update()},_update:function(){var c=this.options.padding,h=this._map.getSize(),m=this._map.containerPointToLayerPoint(h.multiplyBy(-c)).round();this._bounds=new K(m,m.add(h.multiplyBy(1+c*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),N0=Jr.extend({options:{tolerance:0},getEvents:function(){var c=Jr.prototype.getEvents.call(this);return c.viewprereset=this._onViewPreReset,c},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Jr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var c=this._container=document.createElement("canvas");Ce(c,"mousemove",this._onMouseMove,this),Ce(c,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ce(c,"mouseout",this._handleMouseOut,this),c._leaflet_disable_events=!0,this._ctx=c.getContext("2d")},_destroyContainer:function(){te(this._redrawRequest),delete this._ctx,pt(this._container),et(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var c;this._redrawBounds=null;for(var h in this._layers)c=this._layers[h],c._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Jr.prototype._update.call(this);var c=this._bounds,h=this._container,m=c.getSize(),y=we.retina?2:1;Et(h,c.min),h.width=y*m.x,h.height=y*m.y,h.style.width=m.x+"px",h.style.height=m.y+"px",we.retina&&this._ctx.scale(2,2),this._ctx.translate(-c.min.x,-c.min.y),this.fire("update")}},_reset:function(){Jr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(c){this._updateDashArray(c),this._layers[d(c)]=c;var h=c._order={layer:c,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(c){this._requestRedraw(c)},_removePath:function(c){var h=c._order,m=h.next,y=h.prev;m?m.prev=y:this._drawLast=y,y?y.next=m:this._drawFirst=m,delete c._order,delete this._layers[d(c)],this._requestRedraw(c)},_updatePath:function(c){this._extendRedrawBounds(c),c._project(),c._update(),this._requestRedraw(c)},_updateStyle:function(c){this._updateDashArray(c),this._requestRedraw(c)},_updateDashArray:function(c){if(typeof c.options.dashArray=="string"){var h=c.options.dashArray.split(/[, ]+/),m=[],y,k;for(k=0;k<h.length;k++){if(y=Number(h[k]),isNaN(y))return;m.push(y)}c.options._dashArray=m}else c.options._dashArray=c.options.dashArray},_requestRedraw:function(c){this._map&&(this._extendRedrawBounds(c),this._redrawRequest=this._redrawRequest||U(this._redraw,this))},_extendRedrawBounds:function(c){if(c._pxBounds){var h=(c.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new K,this._redrawBounds.extend(c._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(c._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var c=this._redrawBounds;if(c){var h=c.getSize();this._ctx.clearRect(c.min.x,c.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var c,h=this._redrawBounds;if(this._ctx.save(),h){var m=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var y=this._drawFirst;y;y=y.next)c=y.layer,(!h||c._pxBounds&&c._pxBounds.intersects(h))&&c._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(c,h){if(this._drawing){var m,y,k,O,H=c._parts,J=H.length,ne=this._ctx;if(J){for(ne.beginPath(),m=0;m<J;m++){for(y=0,k=H[m].length;y<k;y++)O=H[m][y],ne[y?"lineTo":"moveTo"](O.x,O.y);h&&ne.closePath()}this._fillStroke(ne,c)}}},_updateCircle:function(c){if(!(!this._drawing||c._empty())){var h=c._point,m=this._ctx,y=Math.max(Math.round(c._radius),1),k=(Math.max(Math.round(c._radiusY),1)||y)/y;k!==1&&(m.save(),m.scale(1,k)),m.beginPath(),m.arc(h.x,h.y/k,y,0,Math.PI*2,!1),k!==1&&m.restore(),this._fillStroke(m,c)}},_fillStroke:function(c,h){var m=h.options;m.fill&&(c.globalAlpha=m.fillOpacity,c.fillStyle=m.fillColor||m.color,c.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(c.setLineDash&&c.setLineDash(h.options&&h.options._dashArray||[]),c.globalAlpha=m.opacity,c.lineWidth=m.weight,c.strokeStyle=m.color,c.lineCap=m.lineCap,c.lineJoin=m.lineJoin,c.stroke())},_onClick:function(c){for(var h=this._map.mouseEventToLayerPoint(c),m,y,k=this._drawFirst;k;k=k.next)m=k.layer,m.options.interactive&&m._containsPoint(h)&&(!(c.type==="click"||c.type==="preclick")||!this._map._draggableMoved(m))&&(y=m);this._fireEvent(y?[y]:!1,c)},_onMouseMove:function(c){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(c);this._handleMouseHover(c,h)}},_handleMouseOut:function(c){var h=this._hoveredLayer;h&&(wt(this._container,"leaflet-interactive"),this._fireEvent([h],c,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(c,h){if(!this._mouseHoverThrottled){for(var m,y,k=this._drawFirst;k;k=k.next)m=k.layer,m.options.interactive&&m._containsPoint(h)&&(y=m);y!==this._hoveredLayer&&(this._handleMouseOut(c),y&&(Te(this._container,"leaflet-interactive"),this._fireEvent([y],c,"mouseover"),this._hoveredLayer=y)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,c),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(c,h,m){this._map._fireDOMEvent(h,m||h.type,c)},_bringToFront:function(c){var h=c._order;if(h){var m=h.next,y=h.prev;if(m)m.prev=y;else return;y?y.next=m:m&&(this._drawFirst=m),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(c)}},_bringToBack:function(c){var h=c._order;if(h){var m=h.next,y=h.prev;if(y)y.next=m;else return;m?m.prev=y:y&&(this._drawLast=y),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(c)}}});function k0(c){return we.canvas?new N0(c):null}var nl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(c){return document.createElement("<lvml:"+c+' class="lvml">')}}catch{}return function(c){return document.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),_C={_initContainer:function(){this._container=Ye("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Jr.prototype._update.call(this),this.fire("update"))},_initPath:function(c){var h=c._container=nl("shape");Te(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",c._path=nl("path"),h.appendChild(c._path),this._updateStyle(c),this._layers[d(c)]=c},_addPath:function(c){var h=c._container;this._container.appendChild(h),c.options.interactive&&c.addInteractiveTarget(h)},_removePath:function(c){var h=c._container;pt(h),c.removeInteractiveTarget(h),delete this._layers[d(c)]},_updateStyle:function(c){var h=c._stroke,m=c._fill,y=c.options,k=c._container;k.stroked=!!y.stroke,k.filled=!!y.fill,y.stroke?(h||(h=c._stroke=nl("stroke")),k.appendChild(h),h.weight=y.weight+"px",h.color=y.color,h.opacity=y.opacity,y.dashArray?h.dashStyle=S(y.dashArray)?y.dashArray.join(" "):y.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=y.lineCap.replace("butt","flat"),h.joinstyle=y.lineJoin):h&&(k.removeChild(h),c._stroke=null),y.fill?(m||(m=c._fill=nl("fill")),k.appendChild(m),m.color=y.fillColor||y.color,m.opacity=y.fillOpacity):m&&(k.removeChild(m),c._fill=null)},_updateCircle:function(c){var h=c._point.round(),m=Math.round(c._radius),y=Math.round(c._radiusY||m);this._setPath(c,c._empty()?"M0 0":"AL "+h.x+","+h.y+" "+m+","+y+" 0,"+65535*360)},_setPath:function(c,h){c._path.v=h},_bringToFront:function(c){_a(c._container)},_bringToBack:function(c){wa(c._container)}},gd=we.vml?nl:We,rl=Jr.extend({_initContainer:function(){this._container=gd("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=gd("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){pt(this._container),et(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Jr.prototype._update.call(this);var c=this._bounds,h=c.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,m.setAttribute("width",h.x),m.setAttribute("height",h.y)),Et(m,c.min),m.setAttribute("viewBox",[c.min.x,c.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(c){var h=c._path=gd("path");c.options.className&&Te(h,c.options.className),c.options.interactive&&Te(h,"leaflet-interactive"),this._updateStyle(c),this._layers[d(c)]=c},_addPath:function(c){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(c._path),c.addInteractiveTarget(c._path)},_removePath:function(c){pt(c._path),c.removeInteractiveTarget(c._path),delete this._layers[d(c)]},_updatePath:function(c){c._project(),c._update()},_updateStyle:function(c){var h=c._path,m=c.options;h&&(m.stroke?(h.setAttribute("stroke",m.color),h.setAttribute("stroke-opacity",m.opacity),h.setAttribute("stroke-width",m.weight),h.setAttribute("stroke-linecap",m.lineCap),h.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?h.setAttribute("stroke-dasharray",m.dashArray):h.removeAttribute("stroke-dasharray"),m.dashOffset?h.setAttribute("stroke-dashoffset",m.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),m.fill?(h.setAttribute("fill",m.fillColor||m.color),h.setAttribute("fill-opacity",m.fillOpacity),h.setAttribute("fill-rule",m.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(c,h){this._setPath(c,ht(c._parts,h))},_updateCircle:function(c){var h=c._point,m=Math.max(Math.round(c._radius),1),y=Math.max(Math.round(c._radiusY),1)||m,k="a"+m+","+y+" 0 1,0 ",O=c._empty()?"M0 0":"M"+(h.x-m)+","+h.y+k+m*2+",0 "+k+-m*2+",0 ";this._setPath(c,O)},_setPath:function(c,h){c._path.setAttribute("d",h)},_bringToFront:function(c){_a(c._path)},_bringToBack:function(c){wa(c._path)}});we.vml&&rl.include(_C);function S0(c){return we.svg||we.vml?new rl(c):null}$e.include({getRenderer:function(c){var h=c.options.renderer||this._getPaneRenderer(c.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(c){if(c==="overlayPane"||c===void 0)return!1;var h=this._paneRenderers[c];return h===void 0&&(h=this._createRenderer({pane:c}),this._paneRenderers[c]=h),h},_createRenderer:function(c){return this.options.preferCanvas&&k0(c)||S0(c)}});var C0=ka.extend({initialize:function(c,h){ka.prototype.initialize.call(this,this._boundsToLatLngs(c),h)},setBounds:function(c){return this.setLatLngs(this._boundsToLatLngs(c))},_boundsToLatLngs:function(c){return c=se(c),[c.getSouthWest(),c.getNorthWest(),c.getNorthEast(),c.getSouthEast()]}});function wC(c,h){return new C0(c,h)}rl.create=gd,rl.pointsToPath=ht,Xr.geometryToLayer=cd,Xr.coordsToLatLng=qp,Xr.coordsToLatLngs=dd,Xr.latLngToCoords=Zp,Xr.latLngsToCoords=ud,Xr.getFeature=Sa,Xr.asFeature=hd,$e.mergeOptions({boxZoom:!0});var E0=kr.extend({initialize:function(c){this._map=c,this._container=c._container,this._pane=c._panes.overlayPane,this._resetStateTimeout=0,c.on("unload",this._destroy,this)},addHooks:function(){Ce(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){et(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){pt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(c){if(!c.shiftKey||c.which!==1&&c.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Zo(),Pp(),this._startPoint=this._map.mouseEventToContainerPoint(c),Ce(document,{contextmenu:wi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(c){this._moved||(this._moved=!0,this._box=Ye("div","leaflet-zoom-box",this._container),Te(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(c);var h=new K(this._point,this._startPoint),m=h.getSize();Et(this._box,h.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(pt(this._box),wt(this._container,"leaflet-crosshair")),Ko(),Dp(),et(document,{contextmenu:wi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(c){if(!(c.which!==1&&c.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var h=new Q(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(c){c.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});$e.addInitHook("addHandler","boxZoom",E0),$e.mergeOptions({doubleClickZoom:!0});var T0=kr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(c){var h=this._map,m=h.getZoom(),y=h.options.zoomDelta,k=c.originalEvent.shiftKey?m-y:m+y;h.options.doubleClickZoom==="center"?h.setZoom(k):h.setZoomAround(c.containerPoint,k)}});$e.addInitHook("addHandler","doubleClickZoom",T0),$e.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var P0=kr.extend({addHooks:function(){if(!this._draggable){var c=this._map;this._draggable=new ws(c._mapPane,c._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),c.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),c.on("zoomend",this._onZoomEnd,this),c.whenReady(this._onZoomEnd,this))}Te(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){wt(this._map._container,"leaflet-grab"),wt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var c=this._map;if(c._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=se(this._map.options.maxBounds);this._offsetLimit=re(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;c.fire("movestart").fire("dragstart"),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(c){if(this._map.options.inertia){var h=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(h),this._prunePositions(h)}this._map.fire("move",c).fire("drag",c)},_prunePositions:function(c){for(;this._positions.length>1&&c-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var c=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(c).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(c,h){return c-(c-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var c=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;c.x<h.min.x&&(c.x=this._viscousLimit(c.x,h.min.x)),c.y<h.min.y&&(c.y=this._viscousLimit(c.y,h.min.y)),c.x>h.max.x&&(c.x=this._viscousLimit(c.x,h.max.x)),c.y>h.max.y&&(c.y=this._viscousLimit(c.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(c)}},_onPreDragWrap:function(){var c=this._worldWidth,h=Math.round(c/2),m=this._initialWorldOffset,y=this._draggable._newPos.x,k=(y-h+m)%c+h-m,O=(y+h+m)%c-h-m,H=Math.abs(k+m)<Math.abs(O+m)?k:O;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=H},_onDragEnd:function(c){var h=this._map,m=h.options,y=!m.inertia||c.noInertia||this._times.length<2;if(h.fire("dragend",c),y)h.fire("moveend");else{this._prunePositions(+new Date);var k=this._lastPos.subtract(this._positions[0]),O=(this._lastTime-this._times[0])/1e3,H=m.easeLinearity,J=k.multiplyBy(H/O),ne=J.distanceTo([0,0]),ce=Math.min(m.inertiaMaxSpeed,ne),me=J.multiplyBy(ce/ne),Ne=ce/(m.inertiaDeceleration*H),Me=me.multiplyBy(-Ne/2).round();!Me.x&&!Me.y?h.fire("moveend"):(Me=h._limitOffset(Me,h.options.maxBounds),U(function(){h.panBy(Me,{duration:Ne,easeLinearity:H,noMoveStart:!0,animate:!0})}))}}});$e.addInitHook("addHandler","dragging",P0),$e.mergeOptions({keyboard:!0,keyboardPanDelta:80});var D0=kr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(c){this._map=c,this._setPanDelta(c.options.keyboardPanDelta),this._setZoomDelta(c.options.zoomDelta)},addHooks:function(){var c=this._map._container;c.tabIndex<=0&&(c.tabIndex="0"),Ce(c,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),et(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=document.body,h=document.documentElement,m=c.scrollTop||h.scrollTop,y=c.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(y,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(c){var h=this._panKeys={},m=this.keyCodes,y,k;for(y=0,k=m.left.length;y<k;y++)h[m.left[y]]=[-1*c,0];for(y=0,k=m.right.length;y<k;y++)h[m.right[y]]=[c,0];for(y=0,k=m.down.length;y<k;y++)h[m.down[y]]=[0,c];for(y=0,k=m.up.length;y<k;y++)h[m.up[y]]=[0,-1*c]},_setZoomDelta:function(c){var h=this._zoomKeys={},m=this.keyCodes,y,k;for(y=0,k=m.zoomIn.length;y<k;y++)h[m.zoomIn[y]]=c;for(y=0,k=m.zoomOut.length;y<k;y++)h[m.zoomOut[y]]=-c},_addHooks:function(){Ce(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){et(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(c){if(!(c.altKey||c.ctrlKey||c.metaKey)){var h=c.keyCode,m=this._map,y;if(h in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(y=this._panKeys[h],c.shiftKey&&(y=E(y).multiplyBy(3)),m.options.maxBounds&&(y=m._limitOffset(E(y),m.options.maxBounds)),m.options.worldCopyJump){var k=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(y)));m.panTo(k)}else m.panBy(y)}else if(h in this._zoomKeys)m.setZoom(m.getZoom()+(c.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;wi(c)}}});$e.addInitHook("addHandler","keyboard",D0),$e.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var O0=kr.extend({addHooks:function(){Ce(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){et(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(c){var h=n0(c),m=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(c),this._startTime||(this._startTime=+new Date);var y=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),y),wi(c)},_performZoom:function(){var c=this._map,h=c.getZoom(),m=this._map.options.zoomSnap||0;c._stop();var y=this._delta/(this._map.options.wheelPxPerZoomLevel*4),k=4*Math.log(2/(1+Math.exp(-Math.abs(y))))/Math.LN2,O=m?Math.ceil(k/m)*m:k,H=c._limitZoom(h+(this._delta>0?O:-O))-h;this._delta=0,this._startTime=null,H&&(c.options.scrollWheelZoom==="center"?c.setZoom(h+H):c.setZoomAround(this._lastMousePos,h+H))}});$e.addInitHook("addHandler","scrollWheelZoom",O0);var jC=600;$e.mergeOptions({tapHold:we.touchNative&&we.safari&&we.mobile,tapTolerance:15});var M0=kr.extend({addHooks:function(){Ce(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){et(this._map._container,"touchstart",this._onDown,this)},_onDown:function(c){if(clearTimeout(this._holdTimeout),c.touches.length===1){var h=c.touches[0];this._startPos=this._newPos=new I(h.clientX,h.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Ce(document,"touchend",qt),Ce(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),jC),Ce(document,"touchend touchcancel contextmenu",this._cancel,this),Ce(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function c(){et(document,"touchend",qt),et(document,"touchend touchcancel",c)},_cancel:function(){clearTimeout(this._holdTimeout),et(document,"touchend touchcancel contextmenu",this._cancel,this),et(document,"touchmove",this._onMove,this)},_onMove:function(c){var h=c.touches[0];this._newPos=new I(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(c,h){var m=new MouseEvent(c,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});m._simulated=!0,h.target.dispatchEvent(m)}});$e.addInitHook("addHandler","tapHold",M0),$e.mergeOptions({touchZoom:we.touch,bounceAtZoomLimits:!0});var L0=kr.extend({addHooks:function(){Te(this._map._container,"leaflet-touch-zoom"),Ce(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){wt(this._map._container,"leaflet-touch-zoom"),et(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(c){var h=this._map;if(!(!c.touches||c.touches.length!==2||h._animatingZoom||this._zooming)){var m=h.mouseEventToContainerPoint(c.touches[0]),y=h.mouseEventToContainerPoint(c.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(m.add(y)._divideBy(2))),this._startDist=m.distanceTo(y),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),Ce(document,"touchmove",this._onTouchMove,this),Ce(document,"touchend touchcancel",this._onTouchEnd,this),qt(c)}},_onTouchMove:function(c){if(!(!c.touches||c.touches.length!==2||!this._zooming)){var h=this._map,m=h.mouseEventToContainerPoint(c.touches[0]),y=h.mouseEventToContainerPoint(c.touches[1]),k=m.distanceTo(y)/this._startDist;if(this._zoom=h.getScaleZoom(k,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&k<1||this._zoom>h.getMaxZoom()&&k>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,k===1)return}else{var O=m._add(y)._divideBy(2)._subtract(this._centerPoint);if(k===1&&O.x===0&&O.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(O),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),te(this._animRequest);var H=o(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=U(H,this,!0),qt(c)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,te(this._animRequest),et(document,"touchmove",this._onTouchMove,this),et(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});$e.addInitHook("addHandler","touchZoom",L0),$e.BoxZoom=E0,$e.DoubleClickZoom=T0,$e.Drag=P0,$e.Keyboard=D0,$e.ScrollWheelZoom=O0,$e.TapHold=M0,$e.TouchZoom=L0,n.Bounds=K,n.Browser=we,n.CRS=ge,n.Canvas=N0,n.Circle=Vp,n.CircleMarker=ld,n.Class=B,n.Control=cr,n.DivIcon=_0,n.DivOverlay=Sr,n.DomEvent=BS,n.DomUtil=$S,n.Draggable=ws,n.Evented=q,n.FeatureGroup=Gr,n.GeoJSON=Xr,n.GridLayer=tl,n.Handler=kr,n.Icon=Na,n.ImageOverlay=pd,n.LatLng=le,n.LatLngBounds=Q,n.Layer=dr,n.LayerGroup=ja,n.LineUtil=eC,n.Map=$e,n.Marker=od,n.Mixin=ZS,n.Path=js,n.Point=I,n.PolyUtil=KS,n.Polygon=ka,n.Polyline=Qr,n.Popup=fd,n.PosAnimation=r0,n.Projection=tC,n.Rectangle=C0,n.Renderer=Jr,n.SVG=rl,n.SVGOverlay=b0,n.TileLayer=Ca,n.Tooltip=md,n.Transformation=he,n.Util=G,n.VideoOverlay=y0,n.bind=o,n.bounds=re,n.canvas=k0,n.circle=cC,n.circleMarker=lC,n.control=Xo,n.divIcon=vC,n.extend=s,n.featureGroup=iC,n.geoJSON=v0,n.geoJson=hC,n.gridLayer=yC,n.icon=aC,n.imageOverlay=pC,n.latLng=ie,n.latLngBounds=se,n.layerGroup=sC,n.map=US,n.marker=oC,n.point=E,n.polygon=uC,n.polyline=dC,n.popup=gC,n.rectangle=wC,n.setOptions=b,n.stamp=d,n.svg=S0,n.svgOverlay=mC,n.tileLayer=w0,n.tooltip=xC,n.transformation=Se,n.version=r,n.videoOverlay=fC;var NC=window.L;n.noConflict=function(){return window.L=NC,this},window.L=n})})(Hg,Hg.exports);var vp=Hg.exports;const fk=ys(vp);function mk(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function gk(t,e){return e==null?function(r,s){const i=w.useRef();return i.current||(i.current=t(r,s)),i}:function(r,s){const i=w.useRef();i.current||(i.current=t(r,s));const o=w.useRef(r),{instance:l}=i.current;return w.useEffect(function(){o.current!==r&&(e(l,r,o.current),o.current=r)},[l,r,s]),i}}function SF(t,e){w.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var i;(i=e.layerContainer)==null||i.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function xk(t){return function(n){const r=hk(),s=t(pk(n,r),r);return yF(r.map,n.attribution),kF(s.current,n.eventHandlers),SF(s.current,r),s}}function CF(t,e){const n=gk(t,e),r=xk(n);return jF(r)}function EF(t,e){const n=gk(t,e),r=xk(n);return NF(r)}function TF(t,e,n){const{opacity:r,zIndex:s}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function PF(){return hk().map}function Wg(){return Wg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wg.apply(this,arguments)}function DF({bounds:t,boundsOptions:e,center:n,children:r,className:s,id:i,placeholder:o,style:l,whenReady:d,zoom:u,...p},f){const[x]=w.useState({className:s,id:i,style:l}),[g,v]=w.useState(null);w.useImperativeHandle(f,()=>(g==null?void 0:g.map)??null,[g]);const b=w.useCallback(_=>{if(_!==null&&g===null){const N=new vp.Map(_,p);n!=null&&u!=null?N.setView(n,u):t!=null&&N.fitBounds(t,e),d!=null&&N.whenReady(d),v(_F(N))}},[]);w.useEffect(()=>()=>{g==null||g.map.remove()},[g]);const j=g?Y.createElement(uk,{value:g},r):o??null;return Y.createElement("div",Wg({},x,{ref:b}),j)}const OF=w.forwardRef(DF),MF=CF(function({position:e,...n},r){const s=new vp.Marker(e,n);return mk(s,wF(r,{overlayContainer:s}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),LF=EF(function({url:e,...n},r){const s=new vp.TileLayer(e,pk(n,r));return mk(s,r)},function(e,n,r){TF(e,n,r);const{url:s}=n;s!=null&&s!==r.url&&e.setUrl(s)});delete fk.Icon.Default.prototype._getIconUrl;fk.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function RF({position:t,onPositionChange:e}){return PF(),a.jsx(MF,{position:t,draggable:!0,eventHandlers:{dragend:n=>{const s=n.target.getLatLng();e(s.lat,s.lng)}}})}function AF({initialLat:t,initialLng:e,onLocationSelect:n}){const i=[t||31.5017,e||34.4668],o=l=>{n(l.latlng.lat,l.latlng.lng)};return a.jsx("div",{className:"w-full h-96 rounded-lg overflow-hidden border border-gray-300",children:a.jsxs(OF,{center:i,zoom:10,style:{height:"100%",width:"100%"},onClick:o,children:[a.jsx(LF,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a.jsx(RF,{position:i,onPositionChange:n})]})})}function IF({availableAreas:t,selectedAreas:e,onChange:n}){const[r,s]=w.useState(""),[i,o]=w.useState(""),[l,d]=w.useState(!1),u=r?t.filter(v=>v.toLowerCase().includes(r.toLowerCase())):t,p=v=>{const b=e.includes(v)?e.filter(j=>j!==v):[...e,v];n(b)},f=()=>{n(t)},x=()=>{n([])},g=()=>{if(i.trim()){if(t.includes(i.trim())||e.includes(i.trim())){alert("هذه المنطقة موجودة بالفعل");return}n([...e,i.trim()]),o(""),d(!1)}};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx("input",{type:"text",value:r,onChange:v=>s(v.target.value),placeholder:"بحث عن منطقة...",className:"flex-1 border rounded-md px-3 py-2"}),a.jsx("button",{type:"button",onClick:f,className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200",children:"تحديد الكل"}),a.jsx("button",{type:"button",onClick:x,className:"px-3 py-2 bg-red-100 text-red-700 rounded-md hover:bg-red-200",children:"إلغاء الكل"})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 max-h-60 overflow-y-auto border rounded-md p-4",children:u.length>0?u.map(v=>a.jsxs("label",{className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded",children:[a.jsx("input",{type:"checkbox",checked:e.includes(v),onChange:()=>p(v),className:"rounded text-blue-600"}),a.jsx("span",{children:v})]},v)):a.jsxs("div",{className:"col-span-full text-center py-4 text-gray-500",children:["لا توجد مناطق متطابقة مع البحث",a.jsx("button",{type:"button",onClick:()=>d(!0),className:"block mx-auto mt-2 text-blue-600 hover:text-blue-800",children:"إضافة منطقة جديدة"})]})}),l&&a.jsxs("div",{className:"mt-4 p-4 border rounded-md bg-gray-50",children:[a.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"إضافة منطقة خدمة جديدة"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:i,onChange:v=>o(v.target.value),placeholder:"اسم المنطقة الجديدة...",className:"flex-1 border rounded-md px-3 py-2"}),a.jsx("button",{type:"button",onClick:g,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"إضافة"}),a.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"إلغاء"})]})]}),!l&&a.jsx("div",{className:"flex justify-center",children:a.jsxs("button",{type:"button",onClick:()=>d(!0),className:"px-4 py-2 text-blue-600 hover:text-blue-800 flex items-center",children:[a.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"إضافة منطقة خدمة جديدة"]})}),a.jsxs("div",{className:"mt-4",children:[a.jsxs("h4",{className:"font-medium text-gray-700 mb-2",children:["المناطق المحددة (",e.length,")"]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:e.length>0?e.map(v=>a.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm flex items-center",children:[v,a.jsx("button",{type:"button",onClick:()=>p(v),className:"ml-1 text-blue-600 hover:text-blue-800",children:"×"})]},v)):a.jsx("span",{className:"text-gray-500",children:"لم يتم تحديد أي منطقة"})})]})]})}function FF({availableCategories:t,selectedCategories:e,onChange:n,loading:r}){const[s,i]=w.useState(""),o=s?t.filter(d=>d.name.toLowerCase().includes(s.toLowerCase())):t,l=d=>{const u=e.includes(d)?e.filter(p=>p!==d):[...e,d];n(u)};return a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center space-x-2 mb-4",children:a.jsx("input",{type:"text",value:s,onChange:d=>i(d.target.value),placeholder:"بحث عن تصنيف...",className:"flex-1 border rounded-md px-3 py-2"})}),r?a.jsx("div",{className:"flex justify-center items-center h-40",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-60 overflow-y-auto border rounded-md p-4",children:o.length>0?o.map(d=>a.jsxs("label",{className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded",children:[a.jsx("input",{type:"checkbox",checked:e.includes(d.id),onChange:()=>l(d.id),className:"rounded text-blue-600"}),a.jsx("span",{children:d.name})]},d.id)):a.jsx("div",{className:"col-span-full text-center py-4 text-gray-500",children:"لا توجد تصنيفات متطابقة مع البحث"})}),a.jsxs("div",{className:"mt-4",children:[a.jsxs("h4",{className:"font-medium text-gray-700 mb-2",children:["التصنيفات المحددة (",e.length,")"]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:e.length>0?e.map(d=>{const u=t.find(p=>p.id===d);return a.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm flex items-center",children:[u?u.name:"تصنيف غير معروف",a.jsx("button",{type:"button",onClick:()=>l(d),className:"ml-1 text-blue-600 hover:text-blue-800",children:"×"})]},d)}):a.jsx("span",{className:"text-gray-500",children:"لم يتم تحديد أي تصنيف"})})]})]})]})}function vk({onSubmit:t,initialData:e=null}){const[n,r]=w.useState({store_name:"",phone:"",address:"",description:"",delivery_type:"distance",delivery_radius:5,price_per_km:2,min_delivery_fee:5,delivery_fee_per_km:1,status:"active",logo_url:"",banner_url:"",commission_rate:10,wallet_enabled:!1,auto_charge:!1,service_areas:[],categories:[],latitude:null,longitude:null,membership:{type:"basic",expires_at:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString().split("T")[0],commission_rate:10},featured:!1,featured_until:new Date(new Date().setMonth(new Date().getMonth()+1)).toISOString().split("T")[0],featured_order:1,...e}),[s,i]=w.useState([]),[o,l]=w.useState(!0),[d,u]=w.useState(Date.now()),p=["رام الله","البيرة","نابلس","جنين","طولكرم","قلقيلية","طوباس","سلفيت","أريحا","بيت لحم","الخليل","بيت جالا","بيت ساحور","بيرزيت","الظاهرية","دورا","يطا","عنبتا","بيت فجار","بديا","عزون","بيت أمر","حلحول","سعير","ترقوميا","عرابة","يعبد","قباطية","طمون","عقابا","بيت فوريك","عصيرة الشمالية","بيتا","حوارة","سبسطية","عقربا"];w.useEffect(()=>{(async()=>{try{l(!0);const{data:N,error:S}=await ee.from("categories").select("*").order("name");if(S)throw S;i(N||[])}catch(N){console.error("Error fetching categories:",N),$.error("فشل في تحميل التصنيفات")}finally{l(!1)}})()},[]);const f=async _=>{_.preventDefault();try{if(!n.store_name||!n.phone||!n.address){$.error("الرجاء تعبئة جميع الحقول المطلوبة");return}if(n.delivery_type==="distance"&&(!n.delivery_radius||!n.price_per_km)){$.error("الرجاء تعبئة نطاق التوصيل وسعر الكيلومتر");return}if(!n.membership.expires_at){$.error("الرجاء تحديد تاريخ انتهاء العضوية");return}if(n.categories.length===0){$.error("الرجاء اختيار تصنيف واحد على الأقل");return}const N={...n};n.featured?(N.featured_until=n.featured_until,N.featured_order=n.featured_order):(N.featured_until=null,N.featured_order=null),t(_,N)}catch(N){console.error("Error submitting form:",N),$.error("حدث خطأ أثناء حفظ البيانات")}},x=(_,N)=>{r({...n,latitude:_,longitude:N}),u(Date.now())},g=_=>{r({...n,service_areas:_})},v=_=>{r({...n,categories:_})},b=({preview:_})=>{_&&r({...n,logo_url:_})},j=({preview:_})=>{_&&r({...n,banner_url:_})};return a.jsxs("form",{onSubmit:f,className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"بيانات المتجر"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم المتجر ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"text",value:n.store_name,onChange:_=>r({...n,store_name:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["رقم الهاتف ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"tel",value:n.phone,onChange:_=>r({...n,phone:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{className:"col-span-1 md:col-span-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["العنوان ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"text",value:n.address,onChange:_=>r({...n,address:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{className:"col-span-1 md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"وصف المتجر"}),a.jsx("textarea",{value:n.description,onChange:_=>r({...n,description:_.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"صورة اللوجو"}),a.jsx(xs,{type:"image",preview:n.logo_url,onUpload:b,storeInSupabase:!0,bucket:It.VENDORS,folder:"logos"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"صورة الغلاف"}),a.jsx(xs,{type:"image",preview:n.banner_url,onUpload:j,storeInSupabase:!0,bucket:It.VENDORS,folder:"banners"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"تصنيف المتجر"}),a.jsx("div",{className:"mb-4",children:a.jsx(FF,{availableCategories:s,selectedCategories:n.categories,onChange:v,loading:o})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"حالة المتجر"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الحالة ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsxs("select",{value:n.status,onChange:_=>r({...n,status:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[a.jsx("option",{value:"active",children:"نشط"}),a.jsx("option",{value:"inactive",children:"غير نشط"}),a.jsx("option",{value:"pending",children:"معلق"}),a.jsx("option",{value:"suspended",children:"موقوف"}),a.jsx("option",{value:"busy",children:"مشغول"})]})]}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center space-x-2 mt-8",children:[a.jsx("input",{type:"checkbox",checked:n.featured,onChange:_=>r({...n,featured:_.target.checked}),className:"rounded text-blue-600"}),a.jsx("span",{children:"متجر مميز"})]})}),n.featured&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ انتهاء التمييز"}),a.jsx("input",{type:"date",value:n.featured_until,onChange:_=>r({...n,featured_until:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:n.featured})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ترتيب العرض (الأقل = الأعلى)"}),a.jsx("input",{type:"number",value:n.featured_order,onChange:_=>r({...n,featured_order:parseInt(_.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"1",required:n.featured})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"موقع المتجر"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"حدد موقع المتجر على الخريطة بالنقر على المكان المناسب"}),a.jsx(AF,{initialLat:n.latitude,initialLng:n.longitude,onLocationSelect:x},d)]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"خط العرض"}),a.jsx("input",{type:"text",value:n.latitude||"",onChange:_=>r({...n,latitude:parseFloat(_.target.value)}),className:"w-full border rounded-md px-3 py-2",placeholder:"مثال: 31.5017"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"خط الطول"}),a.jsx("input",{type:"text",value:n.longitude||"",onChange:_=>r({...n,longitude:parseFloat(_.target.value)}),className:"w-full border rounded-md px-3 py-2",placeholder:"مثال: 34.4668"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"إعدادات التوصيل"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نوع التوصيل ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsxs("select",{value:n.delivery_type,onChange:_=>r({...n,delivery_type:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[a.jsx("option",{value:"distance",children:"حسب المسافة"}),a.jsx("option",{value:"fixed",children:"سعر ثابت"}),a.jsx("option",{value:"zones",children:"مناطق"})]})]}),n.delivery_type==="distance"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نطاق التوصيل (كم) ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"number",value:n.delivery_radius,onChange:_=>r({...n,delivery_radius:Number(_.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.1",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["سعر الكيلومتر (₪) ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"number",value:n.price_per_km,onChange:_=>r({...n,price_per_km:Number(_.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.1",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأدنى لتكلفة التوصيل (₪)"}),a.jsx("input",{type:"number",value:n.min_delivery_fee,onChange:_=>r({...n,min_delivery_fee:Number(_.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.1"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تكلفة التوصيل لكل كيلومتر (₪)"}),a.jsx("input",{type:"number",value:n.delivery_fee_per_km,onChange:_=>r({...n,delivery_fee_per_km:Number(_.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.1"})]})]}),n.delivery_type==="fixed"&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["سعر التوصيل الثابت (₪) ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"number",value:n.min_delivery_fee,onChange:_=>r({...n,min_delivery_fee:Number(_.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.1",required:!0})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"مناطق الخدمة"}),a.jsx(IF,{availableAreas:p,selectedAreas:n.service_areas,onChange:g})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"إعدادات العضوية"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نوع العضوية ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsxs("select",{value:n.membership.type,onChange:_=>r({...n,membership:{...n.membership,type:_.target.value}}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[a.jsx("option",{value:"basic",children:"أساسية"}),a.jsx("option",{value:"premium",children:"مميزة"}),a.jsx("option",{value:"gold",children:"ذهبية"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نسبة العمولة (%) ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"number",value:n.membership.commission_rate,onChange:_=>r({...n,membership:{...n.membership,commission_rate:Number(_.target.value)}}),className:"w-full border rounded-md px-3 py-2",min:"0",max:"100",step:"0.1",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["تاريخ انتهاء العضوية ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"date",value:n.membership.expires_at,onChange:_=>r({...n,membership:{...n.membership,expires_at:_.target.value}}),className:"w-full border rounded-md px-3 py-2",required:!0})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"إعدادات إضافية"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نسبة العمولة (%) ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"number",value:n.commission_rate,onChange:_=>r({...n,commission_rate:Number(_.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",max:"100",step:"0.1",required:!0})]}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:n.wallet_enabled,onChange:_=>r({...n,wallet_enabled:_.target.checked}),className:"rounded text-blue-600"}),a.jsx("span",{children:"تفعيل المحفظة"})]})}),n.wallet_enabled&&a.jsx("div",{children:a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:n.auto_charge,onChange:_=>r({...n,auto_charge:_.target.checked}),className:"rounded text-blue-600"}),a.jsx("span",{children:"تفعيل الشحن التلقائي"})]})})]})]}),a.jsx("div",{className:"flex justify-end space-x-2",children:a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:e?"تحديث":"إضافة"})})]})}const $F=async()=>{try{const{data:t,error:e}=await ee.from("vendors").select("*").order("created_at",{ascending:!1});if(e)throw e;return t||[]}catch(t){throw console.error("Error fetching vendors:",t),t}},zF=async(t,e)=>{try{const{data:n,error:r}=await ee.from("vendors").update({store_name:e.store_name,phone:e.phone,address:e.address,description:e.description,delivery_type:e.delivery_type,delivery_radius:e.delivery_radius,price_per_km:e.price_per_km,min_delivery_fee:e.min_delivery_fee,delivery_fee_per_km:e.delivery_fee_per_km,latitude:e.latitude,longitude:e.longitude,status:e.status,logo_url:e.logo_url,banner_url:e.banner_url,commission_rate:e.commission_rate,wallet_enabled:e.wallet_enabled,auto_charge:e.auto_charge,service_areas:e.service_areas,membership:e.membership,updated_at:new Date().toISOString()}).eq("id",t).select();if(r)throw r;return n[0]}catch(n){throw console.error("Error updating vendor:",n),n}},BF=async t=>{try{const{error:e}=await ee.from("vendors").delete().eq("id",t);if(e)throw e;return!0}catch(e){throw console.error("Error deleting vendor:",e),e}};function UF(){const[t,e]=w.useState([]),[n,r]=w.useState([]),[s,i]=w.useState(!0),[o,l]=w.useState(null),[d,u]=w.useState(!1),[p,f]=w.useState(null),[x,g]=w.useState("grid"),[v,b]=w.useState({store_name:"",phone:"",address:"",delivery_type:"distance",delivery_radius:5,price_per_km:2,status:"active",logo_url:"",banner_url:"",categories:[],wallet_enabled:!1,auto_charge:!1,service_areas:[],latitude:null,longitude:null,membership:{type:"basic",expires_at:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString().split("T")[0],commission_rate:10},featured:!1,featured_until:new Date(new Date().setMonth(new Date().getMonth()+1)).toISOString().split("T")[0],featured_order:1});w.useEffect(()=>{j()},[]);const j=async()=>{try{i(!0),l(null);const{data:C,error:q}=await ee.from("vendors").select("*").order("created_at",{ascending:!1});if(q)throw q;e(C||[]);const{data:I,error:X}=await ee.from("categories").select("*").order("name");if(X)throw X;r(I||[])}catch(C){console.error("Error fetching data:",C),l("فشل في تحميل البيانات. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل البيانات")}finally{i(!1)}},_={store_name:{type:"text",label:"اسم المتجر",placeholder:"البحث باسم المتجر",value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"active",label:"مفتوح"},{value:"inactive",label:"مغلق"},{value:"busy",label:"مشغول"},{value:"pending",label:"معلق"},{value:"suspended",label:"موقوف"}],value:""},delivery_type:{type:"select",label:"نوع التوصيل",placeholder:"جميع الأنواع",options:[{value:"distance",label:"حسب المسافة"},{value:"fixed",label:"سعر ثابت"},{value:"zones",label:"مناطق"}],value:""},featured:{type:"select",label:"التمييز",placeholder:"الكل",options:[{value:"true",label:"مميز"},{value:"false",label:"غير مميز"}],value:""}},{filters:N,filterData:S,handleFilterChange:P}=Bn(_),M=async(C,q)=>{C.preventDefault();try{if(!q.store_name||!q.phone||!q.address){$.error("الرجاء تعبئة جميع الحقول المطلوبة");return}if(q.delivery_type==="distance"&&(!q.delivery_radius||!q.price_per_km)){$.error("الرجاء تعبئة نطاق التوصيل وسعر الكيلومتر");return}if(q.categories.length===0){$.error("الرجاء اختيار تصنيف واحد على الأقل");return}if(!q.membership.expires_at){$.error("الرجاء تحديد تاريخ انتهاء العضوية");return}if(p)await zF(p.id,q),$.success("تم تحديث البائع بنجاح");else{const{data:I,error:X}=await ee.from("vendors").insert([q]).select();if(X)throw X;$.success("تم إضافة البائع بنجاح")}j(),u(!1),f(null),b({store_name:"",phone:"",address:"",delivery_type:"distance",delivery_radius:5,price_per_km:2,status:"active",logo_url:"",banner_url:"",categories:[],wallet_enabled:!1,auto_charge:!1,service_areas:[],latitude:null,longitude:null,membership:{type:"basic",expires_at:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString().split("T")[0],commission_rate:10},featured:!1,featured_until:new Date(new Date().setMonth(new Date().getMonth()+1)).toISOString().split("T")[0],featured_order:1})}catch(I){console.error("Error saving vendor:",I),$.error(p?"فشل في تحديث البائع":"فشل في إضافة البائع")}},A=async C=>{if(window.confirm("هل أنت متأكد من حذف هذا البائع؟"))try{i(!0),await BF(C),e(t.filter(q=>q.id!==C)),$.success("تم حذف البائع بنجاح"),j()}catch(q){console.error("Error deleting vendor:",q),$.error("فشل في حذف البائع")}finally{i(!1)}},R=async(C,q)=>{try{i(!0);const{error:I}=await ee.rpc("update_vendor_status",{p_vendor_id:C,p_status:q});if(I)throw I;e(t.map(X=>X.id===C?{...X,status:q}:X)),$.success(`تم تغيير حالة البائع إلى ${V(q)}`)}catch(I){console.error("Error updating vendor status:",I),$.error("فشل في تحديث حالة البائع")}finally{i(!1)}},T=C=>{switch(C){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"busy":return"bg-yellow-100 text-yellow-800";case"pending":return"bg-blue-100 text-blue-800";case"suspended":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},V=C=>{switch(C){case"active":return"مفتوح";case"inactive":return"مغلق";case"busy":return"مشغول";case"pending":return"معلق";case"suspended":return"موقوف";default:return C}},D=C=>{switch(C){case"distance":return"حسب المسافة";case"fixed":return"سعر ثابت";case"zones":return"مناطق";default:return C}},U=C=>{if(!C)return"bg-gray-100 text-gray-800";switch(C){case"gold":return"bg-yellow-100 text-yellow-800";case"premium":return"bg-purple-100 text-purple-800";case"basic":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},te=C=>{if(!C)return"أساسية";switch(C){case"gold":return"ذهبية";case"premium":return"مميزة";case"basic":return"أساسية";default:return C}},G=S(t),B=()=>a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:G.map(C=>{var q,I,X;return a.jsxs("div",{className:`bg-white rounded-lg shadow-md overflow-hidden ${C.featured?"ring-2 ring-yellow-500":""}`,children:[C.featured&&a.jsxs("div",{className:"bg-yellow-500 text-white px-4 py-1 text-sm text-center",children:["متجر مميز حتى ",new Date(C.featured_until).toLocaleDateString("ar-SA")]}),C.banner_url&&a.jsx("img",{src:C.banner_url,alt:`${C.store_name} banner`,className:"w-full h-32 object-cover",onError:E=>{E.target.onerror=null,E.target.src="https://via.placeholder.com/400x150?text=Banner"}}),a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[C.logo_url&&a.jsx("img",{src:C.logo_url,alt:`${C.store_name} logo`,className:"w-16 h-16 rounded-full object-cover",onError:E=>{E.target.onerror=null,E.target.src="https://via.placeholder.com/80?text=Logo"}}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold",children:C.store_name}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsxs("div",{className:"relative inline-block",children:[a.jsxs("select",{value:C.status,onChange:E=>R(C.id,E.target.value),className:`px-2 py-1 text-sm rounded-full ${T(C.status)} appearance-none pr-8 cursor-pointer`,children:[a.jsx("option",{value:"active",children:"مفتوح"}),a.jsx("option",{value:"inactive",children:"مغلق"}),a.jsx("option",{value:"busy",children:"مشغول"}),a.jsx("option",{value:"pending",children:"معلق"}),a.jsx("option",{value:"suspended",children:"موقوف"})]}),a.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-2",children:a.jsx("svg",{className:"h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),a.jsx("span",{className:`px-2 py-1 text-sm rounded-full ${U((q=C.membership)==null?void 0:q.type)}`,children:te((I=C.membership)==null?void 0:I.type)}),a.jsxs("span",{className:"text-yellow-500",children:["★ ",C.rating]}),a.jsxs("span",{className:"text-gray-500",children:["(",C.rating_count,")"]})]})]})]}),a.jsxs("div",{className:"mt-4 space-y-2",children:[a.jsx("p",{className:"text-gray-600",children:C.address}),a.jsx("p",{className:"text-gray-600",children:C.phone}),a.jsx("div",{className:"flex flex-wrap gap-2",children:(X=C.categories)==null?void 0:X.map(E=>{const K=n.find(re=>re.id===E);return K?a.jsx("span",{className:"bg-blue-100 text-blue-800 text-sm px-2 py-1 rounded-full",children:K.name},K.id):null})})]}),a.jsx("div",{className:"mt-4 pt-4 border-t",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500",children:"نوع التوصيل"}),a.jsx("p",{className:"font-medium",children:D(C.delivery_type)})]}),C.delivery_type==="distance"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500",children:"سعر الكيلومتر"}),a.jsxs("p",{className:"font-medium",children:["₪",C.price_per_km]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500",children:"نطاق التوصيل"}),a.jsxs("p",{className:"font-medium",children:[C.delivery_radius," كم"]})]})]})]})}),a.jsx("div",{className:"mt-4 pt-4 border-t",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500",children:"المحفظة"}),a.jsx("p",{className:"font-medium",children:C.wallet_enabled?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-green-600",children:"مفعلة"}),a.jsxs("span",{className:"text-gray-600 mr-2",children:["(₪",C.wallet_balance||0,")"]})]}):a.jsx("span",{className:"text-red-600",children:"غير مفعلة"})})]}),C.wallet_enabled&&a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500",children:"الشحن التلقائي"}),a.jsx("p",{className:"font-medium",children:C.auto_charge?a.jsx("span",{className:"text-green-600",children:"مفعل"}):a.jsx("span",{className:"text-red-600",children:"غير مفعل"})})]})]})}),a.jsxs("div",{className:"mt-4 pt-4 border-t",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"مناطق الخدمة"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:C.service_areas&&C.service_areas.length>0?C.service_areas.map((E,K)=>a.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:E},K)):a.jsx("span",{className:"text-gray-500",children:"لا توجد مناطق خدمة محددة"})})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t flex justify-end space-x-2",children:[a.jsx("button",{onClick:()=>{f(C),b({...C,categories:C.categories||[]}),u(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),a.jsx("button",{onClick:()=>A(C.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]})]},C.id)})}),Z=()=>a.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المتجر"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التقييم"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العنوان"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التصنيفات"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التوصيل"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المحفظة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العضوية"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"مناطق الخدمة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:G.map(C=>{var q,I,X,E;return a.jsxs("tr",{className:C.featured?"bg-yellow-50":"",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[C.logo_url&&a.jsx("img",{src:C.logo_url,alt:C.store_name,className:"w-10 h-10 rounded-full object-cover ml-3",onError:K=>{K.target.onerror=null,K.target.src="https://via.placeholder.com/40?text=Logo"}}),a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium text-gray-900",children:[C.store_name,C.featured&&a.jsx("span",{className:"mr-2 text-yellow-500 text-sm",children:"(مميز)"})]}),a.jsx("div",{className:"text-gray-500",children:C.phone})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-yellow-500",children:"★"}),a.jsx("span",{className:"ml-1",children:C.rating}),a.jsxs("span",{className:"text-gray-500 ml-1",children:["(",C.rating_count,")"]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:C.address}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"flex flex-wrap gap-1",children:(q=C.categories)==null?void 0:q.map(K=>{const re=n.find(Q=>Q.id===K);return re?a.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:re.name},re.id):null})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:D(C.delivery_type)}),C.delivery_type==="distance"&&a.jsxs("div",{className:"text-sm text-gray-500",children:[C.delivery_radius," كم - ₪",C.price_per_km,"/كم"]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{children:a.jsx("div",{className:"text-sm font-medium",children:C.wallet_enabled?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-green-600",children:"مفعلة"}),a.jsxs("div",{className:"text-sm text-gray-500",children:["₪",C.wallet_balance||0]})]}):a.jsx("span",{className:"text-red-600",children:"غير مفعلة"})})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${U((I=C.membership)==null?void 0:I.type)}`,children:te((X=C.membership)==null?void 0:X.type)}),a.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[((E=C.membership)==null?void 0:E.commission_rate)||10,"%"]})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex flex-wrap gap-1",children:[C.service_areas&&C.service_areas.length>0?C.service_areas.slice(0,3).map((K,re)=>a.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:K},re)):a.jsx("span",{className:"text-gray-500",children:"-"}),C.service_areas&&C.service_areas.length>3&&a.jsxs("span",{className:"text-gray-500 text-xs",children:["+",C.service_areas.length-3]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"relative inline-block",children:[a.jsxs("select",{value:C.status,onChange:K=>R(C.id,K.target.value),className:`px-2 py-1 text-xs rounded-full ${T(C.status)} appearance-none pr-8 cursor-pointer`,children:[a.jsx("option",{value:"active",children:"مفتوح"}),a.jsx("option",{value:"inactive",children:"مغلق"}),a.jsx("option",{value:"busy",children:"مشغول"}),a.jsx("option",{value:"pending",children:"معلق"}),a.jsx("option",{value:"suspended",children:"موقوف"})]}),a.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-2",children:a.jsx("svg",{className:"h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[a.jsx("button",{onClick:()=>{f(C),b({...C,categories:C.categories||[]}),u(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),a.jsx("button",{onClick:()=>A(C.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},C.id)})})]})})});return s?a.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o?a.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),a.jsx("p",{children:o}),a.jsx("button",{onClick:j,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"البائعين"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>g("grid"),className:`px-3 py-1 rounded ${x==="grid"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض شبكي"}),a.jsx("button",{onClick:()=>g("table"),className:`px-3 py-1 rounded ${x==="table"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض جدول"})]}),a.jsx("button",{onClick:()=>{f(null),b({store_name:"",phone:"",address:"",delivery_type:"distance",delivery_radius:5,price_per_km:2,status:"active",logo_url:"",banner_url:"",categories:[],wallet_enabled:!1,auto_charge:!1,service_areas:[],latitude:null,longitude:null,membership:{type:"basic",expires_at:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString().split("T")[0],commission_rate:10},featured:!1,featured_until:new Date(new Date().setMonth(new Date().getMonth()+1)).toISOString().split("T")[0],featured_order:1}),u(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة بائع جديد"})]})]}),a.jsx(zn,{filters:N,onFilterChange:P}),x==="grid"?B():Z(),d&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-start justify-center min-h-screen",children:[a.jsx("div",{className:"fixed inset-0 bg-black opacity-30",onClick:()=>u(!1)}),a.jsxs("div",{className:"relative bg-white w-full min-h-screen",children:[a.jsx("div",{className:"sticky top-0 bg-white border-b z-10",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:p?"تعديل بائع":"إضافة بائع جديد"}),a.jsx("button",{onClick:()=>{u(!1),f(null)},className:"p-2 rounded-full hover:bg-gray-100",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:a.jsx(vk,{onSubmit:M,initialData:p})})]})]})})]})}function HF(){const[t,e]=w.useState(!1),n=async(i,o)=>{i.preventDefault();try{e(!0);const l=await r({username:o.store_name.replace(/\s+/g,"_").toLowerCase(),password:"password123",name:o.store_name,email:o.email||null,phone:o.phone,role:"vendor"});if(!l)throw new Error("فشل في إنشاء المستخدم المخصص");const{data:d,error:u}=await ee.from("vendors").insert([{user_id:l,store_name:o.store_name,phone:o.phone,address:o.address,description:o.description,delivery_type:o.delivery_type,delivery_radius:o.delivery_radius,price_per_km:o.price_per_km,min_delivery_fee:o.min_delivery_fee,delivery_fee_per_km:o.delivery_fee_per_km,latitude:o.latitude,longitude:o.longitude,status:o.status,logo_url:o.logo_url,banner_url:o.banner_url,commission_rate:o.commission_rate,wallet_enabled:o.wallet_enabled,auto_charge:o.auto_charge,service_areas:o.service_areas,membership:o.membership}]).select();if(u)throw u;if(o.categories.length>0){const p=d[0].id,f=o.categories.map(g=>({vendor_id:p,category_id:g})),{error:x}=await ee.from("vendor_categories").insert(f);x&&console.error("Error linking categories:",x)}$.success("تم إضافة البائع بنجاح")}catch(l){console.error("Error adding vendor:",l),$.error(l.message||"فشل في إضافة البائع")}finally{e(!1)}},r=async i=>{try{const{data:o,error:l}=await ee.from("custom_users").select("id").eq("username",i.username).maybeSingle();if(l)throw l;o&&(i.username=`${i.username}_${Math.floor(Math.random()*1e3)}`);const{data:d,error:u}=await ee.rpc("add_custom_user",{p_username:i.username,p_password:i.password,p_name:i.name,p_email:i.email,p_phone:i.phone,p_role:i.role});if(u)throw u;return d}catch(o){console.error("Error adding custom user:",o);try{const l=Vr(),{error:d}=await ee.from("custom_users").insert([{id:l,username:i.username,password:i.password,password_hash:await s(i.password),name:i.name,email:i.email,phone:i.phone,role:i.role,status:"active"}]);if(d)throw d;return l}catch(l){throw console.error("Fallback error adding custom user:",l),l}}},s=async i=>{const l=new TextEncoder().encode(i),d=await crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(d)).map(f=>f.toString(16).padStart(2,"0")).join("")};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"إضافة بائع جديد"}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:a.jsx(vk,{onSubmit:n})}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-6 rounded-lg",children:[a.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"ملاحظات هامة"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 text-blue-700",children:[a.jsx("li",{children:"سيتم إنشاء حساب مستخدم مخصص للبائع تلقائيًا."}),a.jsx("li",{children:'كلمة المرور الافتراضية هي "password123" ويجب تغييرها بعد الإنشاء.'}),a.jsx("li",{children:"تأكد من تحديد موقع المتجر بدقة على الخريطة لضمان دقة حسابات التوصيل."}),a.jsx("li",{children:"يمكن للبائع تحديث بياناته لاحقًا من خلال لوحة التحكم الخاصة به."}),a.jsx("li",{children:"تأكد من اختيار مناطق الخدمة المناسبة للبائع."}),a.jsx("li",{children:"يجب اختيار تصنيف واحد على الأقل للبائع."})]})]})]})}function WF(){const[t,e]=w.useState([]),[n,r]=w.useState(!0),[s,i]=w.useState(null),[o,l]=w.useState(!1),[d,u]=w.useState(null),[p,f]=w.useState({name:"",phone:"",email:"",status:"offline",commission_rate:15,vehicle_type:"motorcycle",vehicle_model:"",vehicle_year:"",vehicle_plate:"",working_areas:[]}),x=["رام الله","البيرة","نابلس","جنين","طولكرم","قلقيلية","طوباس","سلفيت","أريحا","بيت لحم","الخليل","بيت جالا","بيت ساحور","بيرزيت","الظاهرية","دورا","يطا","عنبتا","بيت فجار","بديا","عزون"];w.useEffect(()=>{g()},[]);const g=async()=>{try{r(!0),i(null);const{data:T,error:V}=await ee.from("drivers").select(`
          *,
          user:user_id(*)
        `).order("created_at",{ascending:!1});if(V)throw V;e(T||[])}catch(T){console.error("Error fetching drivers:",T),i("فشل في تحميل بيانات السائقين. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل بيانات السائقين"),e([{id:1,name:"خالد أحمد",phone:"0599123456",email:"khaled@example.com",status:"active",rating:4.8,rating_count:156,total_orders:230,completed_orders:220,cancelled_orders:10,commission_rate:15,wallet_balance:450,vehicle:{type:"motorcycle",model:"هوندا",year:"2022",plate_number:"1234-H"},working_areas:["رام الله","البيرة","نابلس"]},{id:2,name:"محمد علي",phone:"0599234567",email:"mohammad@example.com",status:"active",rating:4.5,rating_count:98,total_orders:180,completed_orders:170,cancelled_orders:10,commission_rate:15,wallet_balance:320,vehicle:{type:"car",model:"تويوتا",year:"2020",plate_number:"5678-T"},working_areas:["جنين","طولكرم","قلقيلية"]},{id:3,name:"أحمد محمود",phone:"0599345678",email:"ahmad@example.com",status:"inactive",rating:4.2,rating_count:75,total_orders:120,completed_orders:110,cancelled_orders:10,commission_rate:15,wallet_balance:200,vehicle:{type:"motorcycle",model:"سوزوكي",year:"2021",plate_number:"9012-S"},working_areas:["بيت لحم","الخليل"]}])}finally{r(!1)}},v={name:{type:"text",label:"اسم السائق",placeholder:"البحث باسم السائق",value:""},phone:{type:"text",label:"رقم الهاتف",placeholder:"البحث برقم الهاتف",value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"offline",label:"غير متصل"},{value:"available",label:"متاح"},{value:"busy",label:"مشغول"}],value:""},vehicle_type:{type:"select",label:"نوع المركبة",placeholder:"جميع الأنواع",options:[{value:"motorcycle",label:"دراجة نارية"},{value:"car",label:"سيارة"},{value:"bicycle",label:"دراجة هوائية"}],value:""}},{filters:b,filterData:j,handleFilterChange:_}=Bn(v),N=async T=>{T.preventDefault();try{if(!p.name||!p.phone){$.error("الرجاء تعبئة جميع الحقول المطلوبة");return}if(d){const{error:V}=await ee.from("drivers").update({name:p.name,phone:p.phone,email:p.email,status:p.status,commission_rate:p.commission_rate,vehicle_type:p.vehicle_type,vehicle_model:p.vehicle_model,vehicle_year:p.vehicle_year,vehicle_plate:p.vehicle_plate,working_areas:p.working_areas}).eq("id",d.id);if(V)throw V;$.success("تم تحديث السائق بنجاح")}else{const{error:V}=await ee.from("drivers").insert([{name:p.name,phone:p.phone,email:p.email,status:p.status,commission_rate:p.commission_rate,vehicle_type:p.vehicle_type,vehicle_model:p.vehicle_model,vehicle_year:p.vehicle_year,vehicle_plate:p.vehicle_plate,working_areas:p.working_areas}]);if(V)throw V;$.success("تم إضافة السائق بنجاح")}g(),l(!1),u(null),f({name:"",phone:"",email:"",status:"offline",commission_rate:15,vehicle_type:"motorcycle",vehicle_model:"",vehicle_year:"",vehicle_plate:"",working_areas:[]})}catch(V){console.error("Error saving driver:",V),$.error(d?"فشل في تحديث السائق":"فشل في إضافة السائق")}},S=async T=>{if(window.confirm("هل أنت متأكد من حذف هذا السائق؟"))try{const{error:V}=await ee.from("drivers").delete().eq("id",T);if(V)throw V;$.success("تم حذف السائق بنجاح"),g()}catch(V){console.error("Error deleting driver:",V),$.error("فشل في حذف السائق")}},P=T=>{switch(T){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"available":return"bg-green-100 text-green-800";case"busy":return"bg-yellow-100 text-yellow-800";case"offline":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},M=T=>{switch(T){case"active":return"نشط";case"inactive":return"غير نشط";case"available":return"متاح";case"busy":return"مشغول";case"offline":return"غير متصل";default:return T}},A=T=>{switch(T){case"motorcycle":return"دراجة نارية";case"car":return"سيارة";case"bicycle":return"دراجة هوائية";default:return T}},R=j(t);return n&&t.length===0?a.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?a.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),a.jsx("p",{children:s}),a.jsx("button",{onClick:g,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"السائقين"}),a.jsx("button",{onClick:()=>{u(null),f({name:"",phone:"",email:"",status:"offline",commission_rate:15,vehicle_type:"motorcycle",vehicle_model:"",vehicle_year:"",vehicle_plate:"",working_areas:[]}),l(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة سائق جديد"})]}),a.jsx(zn,{filters:b,onFilterChange:_}),a.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"السائق"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التقييم"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الطلبات"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العمولة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المركبة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"مناطق العمل"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:"لا يوجد سائقين متطابقين مع معايير البحث"})}):R.map(T=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:T.name}),a.jsxs("div",{className:"text-sm text-gray-500",children:[a.jsx("div",{children:T.phone}),a.jsx("div",{children:T.email})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-yellow-500",children:"★"}),a.jsx("span",{className:"ml-1",children:T.rating}),a.jsxs("span",{className:"text-gray-500 ml-1",children:["(",T.rating_count,")"]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsxs("div",{className:"text-sm",children:["الكل: ",T.total_orders||0]}),a.jsxs("div",{className:"text-sm text-green-600",children:["مكتمل: ",T.completed_orders||0]}),a.jsxs("div",{className:"text-sm text-red-600",children:["ملغي: ",T.cancelled_orders||0]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsxs("div",{className:"text-sm font-medium",children:[T.commission_rate,"%"]}),a.jsxs("div",{className:"text-sm text-gray-500",children:["الرصيد: ₪",T.wallet_balance||0]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:A(T.vehicle_type)}),a.jsxs("div",{className:"text-sm text-gray-500",children:[T.vehicle_model," ",T.vehicle_year]}),a.jsx("div",{className:"text-sm text-gray-500",children:T.vehicle_plate})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"flex flex-wrap gap-1",children:T.working_areas&&T.working_areas.length>0?T.working_areas.map((V,D)=>a.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:V},D)):a.jsx("span",{className:"text-gray-500",children:"-"})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${P(T.status)}`,children:M(T.status)})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[a.jsx("button",{onClick:()=>{u(T),f({name:T.name,phone:T.phone,email:T.email,status:T.status,commission_rate:T.commission_rate,vehicle_type:T.vehicle_type,vehicle_model:T.vehicle_model,vehicle_year:T.vehicle_year,vehicle_plate:T.vehicle_plate,working_areas:T.working_areas||[]}),l(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),a.jsx("button",{onClick:()=>S(T.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},T.id))})]})})}),o&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx("div",{className:"fixed inset-0 bg-black opacity-30"}),a.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-3xl w-full mx-4",children:[a.jsx("h2",{className:"text-2xl font-bold mb-6",children:d?"تعديل سائق":"إضافة سائق جديد"}),a.jsxs("form",{onSubmit:N,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم السائق"}),a.jsx("input",{type:"text",value:p.name,onChange:T=>f({...p,name:T.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم الهاتف"}),a.jsx("input",{type:"tel",value:p.phone,onChange:T=>f({...p,phone:T.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),a.jsx("input",{type:"email",value:p.email,onChange:T=>f({...p,email:T.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحالة"}),a.jsxs("select",{value:p.status,onChange:T=>f({...p,status:T.target.value}),className:"w-full border rounded-md px-3 py-2",children:[a.jsx("option",{value:"offline",children:"غير متصل"}),a.jsx("option",{value:"available",children:"متاح"}),a.jsx("option",{value:"busy",children:"مشغول"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نسبة العمولة (%)"}),a.jsx("input",{type:"number",value:p.commission_rate,onChange:T=>f({...p,commission_rate:Number(T.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",max:"100",step:"0.1"})]})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"معلومات المركبة"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع المركبة"}),a.jsxs("select",{value:p.vehicle_type,onChange:T=>f({...p,vehicle_type:T.target.value}),className:"w-full border rounded-md px-3 py-2",children:[a.jsx("option",{value:"motorcycle",children:"دراجة نارية"}),a.jsx("option",{value:"car",children:"سيارة"}),a.jsx("option",{value:"bicycle",children:"دراجة هوائية"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الموديل"}),a.jsx("input",{type:"text",value:p.vehicle_model,onChange:T=>f({...p,vehicle_model:T.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"سنة الصنع"}),a.jsx("input",{type:"text",value:p.vehicle_year,onChange:T=>f({...p,vehicle_year:T.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم اللوحة"}),a.jsx("input",{type:"text",value:p.vehicle_plate,onChange:T=>f({...p,vehicle_plate:T.target.value}),className:"w-full border rounded-md px-3 py-2"})]})]})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"مناطق العمل"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-60 overflow-y-auto",children:x.map(T=>a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:p.working_areas.includes(T),onChange:V=>{const D=V.target.checked?[...p.working_areas,T]:p.working_areas.filter(U=>U!==T);f({...p,working_areas:D})},className:"rounded text-blue-600"}),a.jsx("span",{children:T})]},T))})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{l(!1),u(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:d?"تحديث":"إضافة"})]})]})]})]})})]})}function YF(){const[t,e]=w.useState(!1),[n,r]=w.useState({name:"",phone:"",email:"",password:"",status:"offline",commission_rate:15,vehicle_type:"motorcycle",vehicle_model:"",vehicle_year:"",vehicle_plate:"",working_areas:[]}),s=["رام الله","البيرة","نابلس","جنين","طولكرم","قلقيلية","طوباس","سلفيت","أريحا","بيت لحم","الخليل","بيت جالا","بيت ساحور","بيرزيت","الظاهرية","دورا","يطا","عنبتا","بيت فجار","بديا","عزون"],i=async o=>{o.preventDefault();try{if(e(!0),!n.name||!n.phone||!n.password){$.error("الرجاء تعبئة جميع الحقول المطلوبة"),e(!1);return}const l=n.phone.replace(/\s+/g,""),{data:d,error:u}=await supabase.rpc("add_custom_user",{p_username:l,p_password:n.password,p_name:n.name,p_email:n.email||null,p_phone:n.phone,p_role:"driver"});if(u){console.error("Error creating custom user:",u),$.error("فشل في إنشاء حساب المستخدم: "+u.message),e(!1);return}const{data:p,error:f}=await supabase.from("drivers").insert([{user_id:d,name:n.name,phone:n.phone,email:n.email,status:n.status,commission_rate:n.commission_rate,vehicle_type:n.vehicle_type,vehicle_model:n.vehicle_model,vehicle_year:n.vehicle_year,vehicle_plate:n.vehicle_plate,working_areas:n.working_areas}]).select();if(f){console.error("Error creating driver:",f),$.error("فشل في إنشاء بيانات السائق: "+f.message),e(!1);return}const{error:x}=await supabase.rpc("register_driver_in_auth",{p_driver_id:p[0].id});x&&console.error("Error registering driver in auth system:",x),$.success("تم إضافة السائق بنجاح"),r({name:"",phone:"",email:"",password:"",status:"offline",commission_rate:15,vehicle_type:"motorcycle",vehicle_model:"",vehicle_year:"",vehicle_plate:"",working_areas:[]})}catch(l){console.error("Error adding driver:",l),$.error(l.message||"فشل في إضافة السائق")}finally{e(!1)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"إضافة سائق جديد"}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:a.jsxs("form",{onSubmit:i,className:"space-y-6",children:[a.jsxs("div",{className:"border-b pb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"بيانات السائق"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الاسم ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"text",value:n.name,onChange:o=>r({...n,name:o.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["رقم الهاتف ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"tel",value:n.phone,onChange:o=>r({...n,phone:o.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),a.jsx("input",{type:"email",value:n.email,onChange:o=>r({...n,email:o.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["كلمة المرور ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"password",value:n.password,onChange:o=>r({...n,password:o.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الحالة ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsxs("select",{value:n.status,onChange:o=>r({...n,status:o.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[a.jsx("option",{value:"offline",children:"غير متصل"}),a.jsx("option",{value:"available",children:"متاح"}),a.jsx("option",{value:"busy",children:"مشغول"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نسبة العمولة (%) ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"number",value:n.commission_rate,onChange:o=>r({...n,commission_rate:Number(o.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",max:"100",step:"0.1",required:!0})]})]})]}),a.jsxs("div",{className:"border-b pb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"معلومات المركبة"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نوع المركبة ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsxs("select",{value:n.vehicle_type,onChange:o=>r({...n,vehicle_type:o.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[a.jsx("option",{value:"motorcycle",children:"دراجة نارية"}),a.jsx("option",{value:"car",children:"سيارة"}),a.jsx("option",{value:"bicycle",children:"دراجة هوائية"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الموديل"}),a.jsx("input",{type:"text",value:n.vehicle_model,onChange:o=>r({...n,vehicle_model:o.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"سنة الصنع"}),a.jsx("input",{type:"text",value:n.vehicle_year,onChange:o=>r({...n,vehicle_year:o.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم اللوحة"}),a.jsx("input",{type:"text",value:n.vehicle_plate,onChange:o=>r({...n,vehicle_plate:o.target.value}),className:"w-full border rounded-md px-3 py-2"})]})]})]}),a.jsxs("div",{className:"border-b pb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"مناطق العمل"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 max-h-60 overflow-y-auto",children:s.map(o=>a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:n.working_areas.includes(o),onChange:l=>{const d=l.target.checked?[...n.working_areas,o]:n.working_areas.filter(u=>u!==o);r({...n,working_areas:d})},className:"rounded text-blue-600"}),a.jsx("span",{children:o})]},o))})]}),a.jsx("div",{className:"flex justify-end space-x-2",children:a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:t,children:t?"جاري الإضافة...":"إضافة سائق جديد"})})]})})]})}function VF(){const{user:t}=Ao(),[e,n]=w.useState([]),[r,s]=w.useState([]),[i,o]=w.useState(!0),[l,d]=w.useState(null),[u,p]=w.useState(!1),[f,x]=w.useState(null),[g,v]=w.useState({name:"",zone_id:"",cost:0,min_amount:null,max_amount:null,delivery_type:"distance",settings:{distance:{min_distance:1,max_distance:20,base_fee:5,price_per_km:2},fixed:{fixed_price:10},zones:{zones:[{name:"المنطقة أ",price:10},{name:"المنطقة ب",price:15},{name:"المنطقة ج",price:20}]}}});w.useEffect(()=>{b()},[]);const b=async()=>{try{o(!0),d(null);const{data:D,error:U}=await ee.from("shipping_zones").select("*").order("name");if(U)throw U;s(D||[]);const{data:te,error:G}=await ee.from("shipping_methods").select(`
          *,
          zone:zone_id(name)
        `).order("name");if(G)throw G;n(te||[])}catch(D){console.error("Error fetching data:",D),d("فشل في تحميل البيانات. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل البيانات")}finally{o(!1)}},j={name:{type:"text",label:"اسم الطريقة",placeholder:"البحث باسم طريقة الشحن",value:""},zone_id:{type:"select",label:"منطقة الشحن",placeholder:"جميع المناطق",options:r.map(D=>({value:D.id,label:D.name})),value:""},delivery_type:{type:"select",label:"نوع التوصيل",placeholder:"جميع الأنواع",options:[{value:"distance",label:"حسب المسافة"},{value:"fixed",label:"سعر ثابت"},{value:"zones",label:"مناطق"}],value:""},cost:{type:"number",label:"التكلفة",placeholder:"البحث بالتكلفة",min:0,value:""}},{filters:_,filterData:N,handleFilterChange:S}=Bn(j),P=async D=>{D.preventDefault();try{if(!g.name||g.cost===""){$.error("الرجاء تعبئة جميع الحقول المطلوبة");return}if(g.min_amount!==null&&g.max_amount!==null&&parseFloat(g.min_amount)>parseFloat(g.max_amount)){$.error("الحد الأدنى يجب أن يكون أقل من أو يساوي الحد الأقصى");return}const U={name:g.name,zone_id:g.zone_id||null,cost:parseFloat(g.cost),min_amount:g.min_amount!==""?parseFloat(g.min_amount):null,max_amount:g.max_amount!==""?parseFloat(g.max_amount):null,delivery_type:g.delivery_type,settings:g.settings[g.delivery_type]};if(f){const{error:te}=await ee.from("shipping_methods").update(U).eq("id",f.id);if(te)throw te;$.success("تم تحديث طريقة الشحن بنجاح")}else{const{error:te}=await ee.from("shipping_methods").insert([U]);if(te)throw te;$.success("تم إضافة طريقة الشحن بنجاح")}b(),p(!1),x(null),v({name:"",zone_id:"",cost:0,min_amount:null,max_amount:null,delivery_type:"distance",settings:{distance:{min_distance:1,max_distance:20,base_fee:5,price_per_km:2},fixed:{fixed_price:10},zones:{zones:[{name:"المنطقة أ",price:10},{name:"المنطقة ب",price:15},{name:"المنطقة ج",price:20}]}}})}catch(U){console.error("Error saving shipping method:",U),$.error(f?"فشل في تحديث طريقة الشحن":"فشل في إضافة طريقة الشحن")}},M=async D=>{if(window.confirm("هل أنت متأكد من حذف طريقة الشحن هذه؟"))try{const{error:U}=await ee.from("shipping_methods").delete().eq("id",D);if(U)throw U;$.success("تم حذف طريقة الشحن بنجاح"),b()}catch(U){console.error("Error deleting shipping method:",U),$.error("فشل في حذف طريقة الشحن")}},A=async()=>{const D=prompt("أدخل اسم منطقة الشحن الجديدة:");if(D)try{const U=t==null?void 0:t.id;if(!U){$.error("يجب تسجيل الدخول لإضافة منطقة شحن");return}const{data:te,error:G}=await ee.from("shipping_zones").insert([{name:D,vendor_id:U}]).select();if(G){console.error("Error adding shipping zone:",G);const{data:B,error:Z}=await ee.from("shipping_zones").insert([{name:D,vendor_id:null}]).select();if(Z)throw Z;$.success("تم إضافة منطقة الشحن بنجاح (بدون ربط بالبائع)")}else $.success("تم إضافة منطقة الشحن بنجاح");b()}catch(U){console.error("Error adding shipping zone:",U),$.error("فشل في إضافة منطقة الشحن")}},R=async D=>{if(window.confirm("هل أنت متأكد من حذف منطقة الشحن هذه؟ سيتم حذف جميع طرق الشحن المرتبطة بها."))try{const{error:U}=await ee.from("shipping_zones").delete().eq("id",D);if(U)throw U;$.success("تم حذف منطقة الشحن بنجاح"),b()}catch(U){console.error("Error deleting shipping zone:",U),$.error("فشل في حذف منطقة الشحن")}},T=D=>{switch(D){case"distance":return"حسب المسافة";case"fixed":return"سعر ثابت";case"zones":return"مناطق";default:return D}},V=N(e);return i?a.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):l?a.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),a.jsx("p",{children:l}),a.jsx("button",{onClick:b,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"طرق التوصيل"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:A,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"إضافة منطقة شحن"}),a.jsx("button",{onClick:()=>{x(null),v({name:"",zone_id:"",cost:0,min_amount:null,max_amount:null,delivery_type:"distance",settings:{distance:{min_distance:1,max_distance:20,base_fee:5,price_per_km:2},fixed:{fixed_price:10},zones:{zones:[{name:"المنطقة أ",price:10},{name:"المنطقة ب",price:15},{name:"المنطقة ج",price:20}]}}}),p(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة طريقة توصيل"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"مناطق الشحن"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:r.length===0?a.jsx("div",{className:"col-span-full text-center py-4 text-gray-500",children:"لا توجد مناطق شحن. قم بإضافة منطقة شحن جديدة."}):r.map(D=>a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h4",{className:"font-medium",children:D.name}),a.jsx("button",{onClick:()=>R(D.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]}),a.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:[e.filter(U=>U.zone_id===D.id).length," طريقة توصيل"]})]},D.id))})]}),a.jsx(zn,{filters:_,onFilterChange:S}),a.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"اسم الطريقة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"نوع التوصيل"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"منطقة الشحن"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التكلفة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحد الأدنى للطلب"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحد الأقصى للطلب"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإعدادات"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:V.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:"لا توجد طرق شحن متطابقة مع معايير البحث"})}):V.map(D=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"font-medium text-gray-900",children:D.name})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:T(D.delivery_type)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:D.zone?D.zone:"جميع المناطق"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",D.cost]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:D.min_amount!==null?`₪${D.min_amount}`:"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:D.max_amount!==null?`₪${D.max_amount}`:"-"}),a.jsxs("td",{className:"px-6 py-4",children:[D.delivery_type==="distance"&&D.settings&&a.jsxs("div",{className:"text-sm",children:[a.jsxs("div",{children:["السعر الأساسي: ₪",D.settings.base_fee]}),a.jsxs("div",{children:["سعر الكيلومتر: ₪",D.settings.price_per_km]}),a.jsxs("div",{children:["نطاق التوصيل: ",D.settings.min_distance," - ",D.settings.max_distance," كم"]})]}),D.delivery_type==="fixed"&&D.settings&&a.jsx("div",{className:"text-sm",children:a.jsxs("div",{children:["السعر الثابت: ₪",D.settings.fixed_price]})}),D.delivery_type==="zones"&&D.settings&&D.settings.zones&&a.jsx("div",{className:"text-sm",children:D.settings.zones.map((U,te)=>a.jsxs("div",{children:[U.name,": ₪",U.price]},te))})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[a.jsx("button",{onClick:()=>{x(D),v({name:D.name,zone_id:D.zone_id||"",cost:D.cost,min_amount:D.min_amount,max_amount:D.max_amount,delivery_type:D.delivery_type||"distance",settings:{distance:D.delivery_type==="distance"?D.settings:{min_distance:1,max_distance:20,base_fee:5,price_per_km:2},fixed:D.delivery_type==="fixed"?D.settings:{fixed_price:10},zones:D.delivery_type==="zones"?D.settings:{zones:[{name:"المنطقة أ",price:10},{name:"المنطقة ب",price:15},{name:"المنطقة ج",price:20}]}}}),p(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),a.jsx("button",{onClick:()=>M(D.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},D.id))})]})})}),a.jsx(_e,{open:u,onClose:()=>{p(!1),x(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),a.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-3xl w-full mx-4",children:[a.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:f?"تعديل طريقة التوصيل":"إضافة طريقة توصيل جديدة"}),a.jsxs("form",{onSubmit:P,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم الطريقة ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"text",value:g.name,onChange:D=>v({...g,name:D.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"منطقة الشحن"}),a.jsxs("select",{value:g.zone_id,onChange:D=>v({...g,zone_id:D.target.value}),className:"w-full border rounded-md px-3 py-2",children:[a.jsx("option",{value:"",children:"جميع المناطق"}),r.map(D=>a.jsx("option",{value:D.id,children:D.name},D.id))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نوع التوصيل ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsxs("select",{value:g.delivery_type,onChange:D=>v({...g,delivery_type:D.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[a.jsx("option",{value:"distance",children:"حسب المسافة"}),a.jsx("option",{value:"fixed",children:"سعر ثابت"}),a.jsx("option",{value:"zones",children:"مناطق"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["التكلفة (₪) ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"number",value:g.cost,onChange:D=>v({...g,cost:D.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأدنى للطلب (₪)"}),a.jsx("input",{type:"number",value:g.min_amount!==null?g.min_amount:"",onChange:D=>v({...g,min_amount:D.target.value===""?null:D.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01",placeholder:"اتركه فارغاً إذا لم يكن هناك حد أدنى"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأقصى للطلب (₪)"}),a.jsx("input",{type:"number",value:g.max_amount!==null?g.max_amount:"",onChange:D=>v({...g,max_amount:D.target.value===""?null:D.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01",placeholder:"اتركه فارغاً إذا لم يكن هناك حد أقصى"})]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["إعدادات ",T(g.delivery_type)]}),g.delivery_type==="distance"&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"السعر الأساسي (₪)"}),a.jsx("input",{type:"number",value:g.settings.distance.base_fee,onChange:D=>v({...g,settings:{...g.settings,distance:{...g.settings.distance,base_fee:parseFloat(D.target.value)}}}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"سعر الكيلومتر (₪)"}),a.jsx("input",{type:"number",value:g.settings.distance.price_per_km,onChange:D=>v({...g,settings:{...g.settings,distance:{...g.settings.distance,price_per_km:parseFloat(D.target.value)}}}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأدنى للمسافة (كم)"}),a.jsx("input",{type:"number",value:g.settings.distance.min_distance,onChange:D=>v({...g,settings:{...g.settings,distance:{...g.settings.distance,min_distance:parseFloat(D.target.value)}}}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.1"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأقصى للمسافة (كم)"}),a.jsx("input",{type:"number",value:g.settings.distance.max_distance,onChange:D=>v({...g,settings:{...g.settings,distance:{...g.settings.distance,max_distance:parseFloat(D.target.value)}}}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.1"})]})]}),g.delivery_type==="fixed"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"السعر الثابت (₪)"}),a.jsx("input",{type:"number",value:g.settings.fixed.fixed_price,onChange:D=>v({...g,settings:{...g.settings,fixed:{fixed_price:parseFloat(D.target.value)}}}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01"})]}),g.delivery_type==="zones"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المناطق"}),a.jsxs("div",{className:"space-y-2",children:[g.settings.zones.zones.map((D,U)=>a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:D.name,onChange:te=>{const G=[...g.settings.zones.zones];G[U]={...D,name:te.target.value},v({...g,settings:{...g.settings,zones:{zones:G}}})},className:"flex-1 border rounded-md px-3 py-2",placeholder:"اسم المنطقة"}),a.jsx("input",{type:"number",value:D.price,onChange:te=>{const G=[...g.settings.zones.zones];G[U]={...D,price:parseFloat(te.target.value)},v({...g,settings:{...g.settings,zones:{zones:G}}})},className:"w-32 border rounded-md px-3 py-2",min:"0",step:"0.01",placeholder:"السعر"}),a.jsx("button",{type:"button",onClick:()=>{const te=g.settings.zones.zones.filter((G,B)=>B!==U);v({...g,settings:{...g.settings,zones:{zones:te}}})},className:"text-red-600 hover:text-red-800",children:"حذف"})]},U)),a.jsx("button",{type:"button",onClick:()=>{const D=[...g.settings.zones.zones,{name:"",price:0}];v({...g,settings:{...g.settings,zones:{zones:D}}})},className:"text-blue-600 hover:text-blue-800 text-sm",children:"إضافة منطقة"})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{p(!1),x(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:f?"تحديث":"إضافة"})]})]})]})]})})]})}function qF(){const[t,e]=w.useState([]),[n,r]=w.useState(!0),[s,i]=w.useState(null),[o,l]=w.useState(!1),[d,u]=w.useState(null),[p,f]=w.useState({name:"",phone:"",address:"",email:"",notes:""});w.useEffect(()=>{x()},[]);const x=async()=>{try{r(!0),i(null);const{data:R,error:T}=await ee.from("customers").select("*").order("created_at",{ascending:!1});if(T)throw console.error("Error fetching customers:",T),new Error(`فشل في جلب بيانات الزبائن: ${T.message}`);e(R||[])}catch(R){console.error("Error fetching customers:",R),i(R.message||"فشل في تحميل بيانات العملاء. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل بيانات العملاء"),e([])}finally{r(!1)}},g={name:{type:"text",label:"اسم العميل",placeholder:"البحث باسم العميل",value:""},phone:{type:"text",label:"رقم الهاتف",placeholder:"البحث برقم الهاتف",value:""},address:{type:"text",label:"العنوان",placeholder:"البحث بالعنوان",value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"active",label:"نشط"},{value:"blocked",label:"محظور"}],value:""},orders_count:{type:"number",label:"عدد الطلبات",placeholder:"الحد الأدنى للطلبات",min:0,value:""},total_spent:{type:"number",label:"إجمالي الإنفاق",placeholder:"الحد الأدنى للإنفاق",min:0,value:""}},{filters:v,filterData:b,handleFilterChange:j}=Bn(g),_=async R=>{if(R.preventDefault(),!p.name||!p.phone){$.error("الرجاء إدخال الاسم ورقم الهاتف");return}try{if(r(!0),d){const{error:T}=await ee.from("customers").update({name:p.name,phone:p.phone,address:p.address,email:p.email,notes:p.notes,updated_at:new Date().toISOString()}).eq("id",d.id);if(T)throw T;$.success("تم تحديث بيانات العميل بنجاح")}else{const{error:T}=await ee.from("customers").insert([{name:p.name,phone:p.phone,address:p.address,email:p.email,notes:p.notes}]);if(T)throw T;$.success("تم إضافة العميل بنجاح")}f({name:"",phone:"",address:"",email:"",notes:""}),u(null),l(!1),x()}catch(T){console.error("Error saving customer:",T),$.error(d?"فشل في تحديث بيانات العميل":"فشل في إضافة العميل")}finally{r(!1)}},N=R=>{u(R),f({name:R.name,phone:R.phone,address:R.address||"",email:R.email||"",notes:R.notes||""}),l(!0)},S=async R=>{try{const T=t.find(U=>U.id===R);if(!T)return;const V=T.status==="active"?"blocked":"active",{error:D}=await ee.from("customers").update({status:V}).eq("id",R);if(D)throw D;e(t.map(U=>U.id===R?{...U,status:V}:U)),$.success(`تم ${V==="active"?"إلغاء حظر":"حظر"} العميل بنجاح`)}catch(T){console.error("Error updating customer status:",T),$.error("فشل في تحديث حالة العميل")}},P=R=>{switch(R){case"active":return"bg-green-100 text-green-800";case"blocked":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},M=R=>{switch(R){case"active":return"نشط";case"blocked":return"محظور";default:return R}},A=b(t);return n&&t.length===0?a.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?a.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),a.jsx("p",{children:s}),a.jsx("button",{onClick:x,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):a.jsxs("div",{className:"bg-white rounded-lg shadow",children:[a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"الزبائن"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{u(null),f({name:"",phone:"",address:"",email:"",notes:""}),l(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة زبون جديد"}),a.jsx("button",{className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"تصدير البيانات"})]})]}),a.jsx(zn,{filters:v,onFilterChange:j}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الاسم"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"رقم الهاتف"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العنوان"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"عدد الطلبات"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"إجمالي الإنفاق"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"آخر طلب"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:"لا يوجد زبائن متطابقين مع معايير البحث"})}):A.map(R=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.phone}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.address||"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.orders_count||0}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",(R.total_spent||0).toFixed(2)]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.last_order?new Date(R.last_order).toLocaleDateString("ar-SA"):"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${P(R.status||"active")}`,children:M(R.status||"active")})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[a.jsx("button",{onClick:()=>N(R),className:"text-blue-600 hover:text-blue-900 ml-4",children:"تعديل"}),a.jsx("button",{onClick:()=>S(R.id),className:`${(R.status||"active")==="blocked"?"text-green-600 hover:text-green-900":"text-red-600 hover:text-red-900"}`,children:(R.status||"active")==="blocked"?"إلغاء الحظر":"حظر"})]})]},R.id))})]})})]}),a.jsx(_e,{open:o,onClose:()=>{l(!1),u(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),a.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[a.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:d?"تعديل بيانات الزبون":"إضافة زبون جديد"}),a.jsxs("form",{onSubmit:_,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الاسم ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"text",value:p.name,onChange:R=>f({...p,name:R.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["رقم الهاتف ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"tel",value:p.phone,onChange:R=>f({...p,phone:R.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),a.jsx("input",{type:"email",value:p.email,onChange:R=>f({...p,email:R.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"العنوان"}),a.jsx("input",{type:"text",value:p.address,onChange:R=>f({...p,address:R.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ملاحظات"}),a.jsx("textarea",{value:p.notes,onChange:R=>f({...p,notes:R.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{l(!1),u(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:n,children:n?"جاري الحفظ...":d?"تحديث":"إضافة"})]})]})]})]})})]})}function ZF(){const[t,e]=w.useState(!1),[n,r]=w.useState({name:"",phone:"",email:"",password:"",address:"",notes:""}),[s,i]=w.useState(!1),[o,l]=w.useState(null);w.useEffect(()=>{const u=localStorage.getItem("customerToEdit");if(u)try{const p=JSON.parse(u);r({name:p.name||"",phone:p.phone||"",email:p.email||"",password:"",address:p.address||"",notes:p.notes||""}),l(p.id),i(!0),localStorage.removeItem("customerToEdit")}catch(p){console.error("Error parsing customer data:",p)}},[]);const d=async u=>{u.preventDefault();try{if(e(!0),!n.name||!n.phone){$.error("الرجاء تعبئة جميع الحقول المطلوبة"),e(!1);return}if(s){const p={name:n.name,phone:n.phone,email:n.email||null,address:n.address||null,notes:n.notes||null},{error:f}=await ee.from("customers").update(p).eq("id",o);if(f)throw f;if(n.password){const{data:x,error:g}=await ee.from("customers").select("user_id").eq("id",o).single();if(g)throw g;if(x.user_id){const{error:v}=await ee.rpc("change_custom_user_password",{p_user_id:x.user_id,p_new_password:n.password});if(v)throw v}}$.success("تم تحديث بيانات الزبون بنجاح")}else{if(!n.password){$.error("الرجاء إدخال كلمة مرور للزبون"),e(!1);return}const{data:p,error:f}=await ee.auth.signUp({email:n.email||`${n.phone}@example.com`,password:n.password,options:{data:{name:n.name,phone:n.phone,role:"customer"}}});if(f){console.error("Error creating user:",f),$.error("خطأ في إنشاء المستخدم: "+f.message),e(!1);return}const{data:x,error:g}=await ee.from("customers").insert([{user_id:p.user.id,name:n.name,phone:n.phone,email:n.email,address:n.address,notes:n.notes}]).select();if(g)throw g;$.success("تم إضافة الزبون بنجاح")}r({name:"",phone:"",email:"",password:"",address:"",notes:""}),i(!1),l(null)}catch(p){console.error("Error adding/updating customer:",p),$.error(p.message||"فشل في إضافة/تحديث الزبون")}finally{e(!1)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold",children:s?"تعديل بيانات الزبون":"إضافة زبون جديد"}),a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:a.jsxs("form",{onSubmit:d,className:"space-y-6",children:[a.jsxs("div",{className:"border-b pb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"بيانات الزبون"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الاسم ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"text",value:n.name,onChange:u=>r({...n,name:u.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["رقم الهاتف ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"tel",value:n.phone,onChange:u=>r({...n,phone:u.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),a.jsx("input",{type:"email",value:n.email,onChange:u=>r({...n,email:u.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["كلمة المرور ",s?"":a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"password",value:n.password,onChange:u=>r({...n,password:u.target.value}),className:"w-full border rounded-md px-3 py-2",required:!s,placeholder:s?"اتركه فارغاً للاحتفاظ بكلمة المرور الحالية":""}),s&&a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"اتركه فارغاً للاحتفاظ بكلمة المرور الحالية"})]}),a.jsxs("div",{className:"col-span-1 md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"العنوان"}),a.jsx("input",{type:"text",value:n.address,onChange:u=>r({...n,address:u.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),a.jsxs("div",{className:"col-span-1 md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ملاحظات"}),a.jsx("textarea",{value:n.notes,onChange:u=>r({...n,notes:u.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]})]})]}),a.jsx("div",{className:"flex justify-end space-x-2",children:a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:t,children:t?"جاري الحفظ...":s?"تحديث الزبون":"إضافة زبون جديد"})})]})})]})}function KF(){const[t,e]=w.useState([]),[n,r]=w.useState(!0),[s,i]=w.useState(null),[o,l]=w.useState(!1),[d,u]=w.useState(!1),[p,f]=w.useState(null),[x,g]=w.useState({name:"",email:"",role:"customer",password:"",confirm_password:""}),[v,b]=w.useState({password:"",confirm_password:""});w.useEffect(()=>{j()},[]);const j=async()=>{try{r(!0),i(null);const{data:B,error:Z}=await ee.from("custom_users").select("*").order("created_at",{ascending:!1});if(Z)throw Z;e(B||[])}catch(B){console.error("Error fetching users:",B),i("فشل في تحميل المستخدمين. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل المستخدمين"),e([])}finally{r(!1)}},_={username:{type:"text",label:"اسم المستخدم",placeholder:"البحث باسم المستخدم",value:""},name:{type:"text",label:"الاسم",placeholder:"البحث بالاسم",value:""},email:{type:"text",label:"البريد الإلكتروني",placeholder:"البحث بالبريد الإلكتروني",value:""},role:{type:"select",label:"الدور",placeholder:"جميع الأدوار",options:[{value:"admin",label:"مدير"},{value:"vendor",label:"بائع"},{value:"driver",label:"سائق"},{value:"customer",label:"زبون"}],value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"active",label:"نشط"},{value:"inactive",label:"غير نشط"},{value:"blocked",label:"محظور"}],value:""}},{filters:N,filterData:S,handleFilterChange:P}=Bn(_),M=async B=>{if(B.preventDefault(),x.password!==x.confirm_password){$.error("كلمة المرور غير متطابقة");return}try{if(r(!0),p){const Z={name:x.name,email:x.email,role:x.role,status:x.status,updated_at:new Date().toISOString()};if(x.password){const{data:q,error:I}=await ee.rpc("hash_password",{password:x.password});if(I)throw I;Z.password_hash=q}const{error:C}=await ee.from("custom_users").update(Z).eq("id",p.id);if(C)throw C;$.success("تم تحديث المستخدم بنجاح")}else{const{data:Z,error:C}=await ee.rpc("add_custom_user",{p_username:x.username,p_password:x.password,p_name:x.name,p_email:x.email,p_phone:x.phone||"",p_role:x.role});if(C)throw C;$.success("تم إضافة المستخدم بنجاح")}j(),l(!1),f(null),g({username:"",password:"",name:"",email:"",role:"customer",confirm_password:""})}catch(Z){console.error("Error saving user:",Z),$.error(p?"فشل في تحديث المستخدم":"فشل في إضافة المستخدم")}finally{r(!1)}},A=B=>{if(B.preventDefault(),!p){$.error("لم يتم تحديد المستخدم");return}if(v.password!==v.confirm_password){$.error("كلمة المرور غير متطابقة");return}R(p.id,v.password)},R=async(B,Z)=>{try{r(!0);const{data:C,error:q}=await ee.rpc("hash_password",{password:Z});if(q)throw q;const{error:I}=await ee.from("custom_users").update({password_hash:C,updated_at:new Date().toISOString()}).eq("id",B);if(I)throw I;$.success("تم تحديث كلمة المرور بنجاح"),u(!1),f(null),b({password:"",confirm_password:""})}catch(C){console.error("Error updating password:",C),$.error("فشل في تحديث كلمة المرور")}finally{r(!1)}},T=async(B,Z)=>{try{r(!0);const{error:C}=await ee.from("custom_users").update({status:Z,updated_at:new Date().toISOString()}).eq("id",B);if(C)throw C;e(t.map(q=>q.id===B?{...q,status:Z}:q)),$.success("تم تحديث حالة المستخدم بنجاح")}catch(C){console.error("Error updating user status:",C),$.error("فشل في تحديث حالة المستخدم")}finally{r(!1)}},V=async B=>{if(window.confirm("هل أنت متأكد من حذف هذا المستخدم؟"))try{r(!0);const{error:Z}=await ee.from("custom_users").delete().eq("id",B);if(Z)throw Z;e(t.filter(C=>C.id!==B)),$.success("تم حذف المستخدم بنجاح")}catch(Z){console.error("Error deleting user:",Z),$.error("فشل في حذف المستخدم")}finally{r(!1)}},D=B=>{switch(B){case"admin":return"مدير";case"vendor":return"بائع";case"driver":return"سائق";case"customer":return"زبون";default:return B}},U=B=>{switch(B){case"admin":return"bg-purple-100 text-purple-800";case"vendor":return"bg-blue-100 text-blue-800";case"driver":return"bg-green-100 text-green-800";case"customer":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},te=B=>{switch(B){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-yellow-100 text-yellow-800";case"blocked":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},G=S(t);return n&&t.length===0?a.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?a.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),a.jsx("p",{children:s}),a.jsx("button",{onClick:j,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"إدارة المستخدمين"}),a.jsx("button",{onClick:()=>{f(null),g({username:"",password:"",name:"",email:"",role:"customer",confirm_password:""}),l(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة مستخدم جديد"})]}),a.jsx(zn,{filters:N,onFilterChange:P}),a.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"اسم المستخدم"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الاسم"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"البريد الإلكتروني"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"رقم الهاتف"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الدور"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"تاريخ الإنشاء"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:G.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:"لا يوجد مستخدمين متطابقين مع معايير البحث"})}):G.map(B=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:B.username}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:B.name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:B.email}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:B.phone}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${U(B.role)}`,children:D(B.role)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("select",{value:B.status,onChange:Z=>T(B.id,Z.target.value),className:`px-2 py-1 rounded-full text-xs ${te(B.status)}`,children:[a.jsx("option",{value:"active",children:"نشط"}),a.jsx("option",{value:"inactive",children:"غير نشط"}),a.jsx("option",{value:"blocked",children:"محظور"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(B.created_at).toLocaleDateString("ar-SA")}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[a.jsx("button",{onClick:()=>{f(B),g({username:B.username,password:"",name:B.name,email:B.email||"",phone:B.phone||"",role:B.role,status:B.status}),l(!0)},className:"text-blue-600 hover:text-blue-800 ml-4",children:"تعديل"}),a.jsx("button",{onClick:()=>{f(B),b({password:"",confirm_password:""}),u(!0)},className:"text-yellow-600 hover:text-yellow-800 ml-4",children:"كلمة المرور"}),a.jsx("button",{onClick:()=>V(B.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},B.id))})]})})}),a.jsx(_e,{open:o,onClose:()=>{l(!1),f(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),a.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[a.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:p?"تعديل مستخدم":"إضافة مستخدم جديد"}),a.jsxs("form",{onSubmit:M,className:"space-y-4",children:[!p&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم المستخدم ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"text",value:x.username,onChange:B=>g({...x,username:B.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[p?"كلمة المرور الجديدة":"كلمة المرور"," ",!p&&a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"password",value:x.password,onChange:B=>g({...x,password:B.target.value}),className:"w-full border rounded-md px-3 py-2",required:!p,placeholder:p?"اتركه فارغًا للاحتفاظ بكلمة المرور الحالية":""})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["تأكيد كلمة المرور ",!p&&a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"password",value:x.confirm_password,onChange:B=>g({...x,confirm_password:B.target.value}),className:"w-full border rounded-md px-3 py-2",required:!p||x.password!=="",placeholder:p?"اتركه فارغًا للاحتفاظ بكلمة المرور الحالية":""})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الاسم ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"text",value:x.name,onChange:B=>g({...x,name:B.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),a.jsx("input",{type:"email",value:x.email,onChange:B=>g({...x,email:B.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم الهاتف"}),a.jsx("input",{type:"tel",value:x.phone,onChange:B=>g({...x,phone:B.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الدور ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsxs("select",{value:x.role,onChange:B=>g({...x,role:B.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[a.jsx("option",{value:"admin",children:"مدير"}),a.jsx("option",{value:"vendor",children:"بائع"}),a.jsx("option",{value:"driver",children:"سائق"}),a.jsx("option",{value:"customer",children:"زبون"})]})]}),p&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الحالة ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsxs("select",{value:x.status,onChange:B=>g({...x,status:B.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[a.jsx("option",{value:"active",children:"نشط"}),a.jsx("option",{value:"inactive",children:"غير نشط"}),a.jsx("option",{value:"blocked",children:"محظور"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{l(!1),f(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:n,children:n?"جاري الحفظ...":p?"تحديث":"إضافة"})]})]})]})]})}),a.jsx(_e,{open:d,onClose:()=>{u(!1),f(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),a.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[a.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:"تغيير كلمة المرور"}),a.jsxs("form",{onSubmit:A,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"كلمة المرور الجديدة"}),a.jsx("input",{type:"password",value:v.password,onChange:B=>b({...v,password:B.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تأكيد كلمة المرور"}),a.jsx("input",{type:"password",value:v.confirm_password,onChange:B=>b({...v,confirm_password:B.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{u(!1),f(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"تحديث كلمة المرور"})]})]})]})]})})]})}var yk={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(pn,function(){var n=1e3,r=6e4,s=36e5,i="millisecond",o="second",l="minute",d="hour",u="day",p="week",f="month",x="quarter",g="year",v="date",b="Invalid Date",j=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,N={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(B){var Z=["th","st","nd","rd"],C=B%100;return"["+B+(Z[(C-20)%10]||Z[C]||Z[0])+"]"}},S=function(B,Z,C){var q=String(B);return!q||q.length>=Z?B:""+Array(Z+1-q.length).join(C)+B},P={s:S,z:function(B){var Z=-B.utcOffset(),C=Math.abs(Z),q=Math.floor(C/60),I=C%60;return(Z<=0?"+":"-")+S(q,2,"0")+":"+S(I,2,"0")},m:function B(Z,C){if(Z.date()<C.date())return-B(C,Z);var q=12*(C.year()-Z.year())+(C.month()-Z.month()),I=Z.clone().add(q,f),X=C-I<0,E=Z.clone().add(q+(X?-1:1),f);return+(-(q+(C-I)/(X?I-E:E-I))||0)},a:function(B){return B<0?Math.ceil(B)||0:Math.floor(B)},p:function(B){return{M:f,y:g,w:p,d:u,D:v,h:d,m:l,s:o,ms:i,Q:x}[B]||String(B||"").toLowerCase().replace(/s$/,"")},u:function(B){return B===void 0}},M="en",A={};A[M]=N;var R="$isDayjsObject",T=function(B){return B instanceof te||!(!B||!B[R])},V=function B(Z,C,q){var I;if(!Z)return M;if(typeof Z=="string"){var X=Z.toLowerCase();A[X]&&(I=X),C&&(A[X]=C,I=X);var E=Z.split("-");if(!I&&E.length>1)return B(E[0])}else{var K=Z.name;A[K]=Z,I=K}return!q&&I&&(M=I),I||!q&&M},D=function(B,Z){if(T(B))return B.clone();var C=typeof Z=="object"?Z:{};return C.date=B,C.args=arguments,new te(C)},U=P;U.l=V,U.i=T,U.w=function(B,Z){return D(B,{locale:Z.$L,utc:Z.$u,x:Z.$x,$offset:Z.$offset})};var te=function(){function B(C){this.$L=V(C.locale,null,!0),this.parse(C),this.$x=this.$x||C.x||{},this[R]=!0}var Z=B.prototype;return Z.parse=function(C){this.$d=function(q){var I=q.date,X=q.utc;if(I===null)return new Date(NaN);if(U.u(I))return new Date;if(I instanceof Date)return new Date(I);if(typeof I=="string"&&!/Z$/i.test(I)){var E=I.match(j);if(E){var K=E[2]-1||0,re=(E[7]||"0").substring(0,3);return X?new Date(Date.UTC(E[1],K,E[3]||1,E[4]||0,E[5]||0,E[6]||0,re)):new Date(E[1],K,E[3]||1,E[4]||0,E[5]||0,E[6]||0,re)}}return new Date(I)}(C),this.init()},Z.init=function(){var C=this.$d;this.$y=C.getFullYear(),this.$M=C.getMonth(),this.$D=C.getDate(),this.$W=C.getDay(),this.$H=C.getHours(),this.$m=C.getMinutes(),this.$s=C.getSeconds(),this.$ms=C.getMilliseconds()},Z.$utils=function(){return U},Z.isValid=function(){return this.$d.toString()!==b},Z.isSame=function(C,q){var I=D(C);return this.startOf(q)<=I&&I<=this.endOf(q)},Z.isAfter=function(C,q){return D(C)<this.startOf(q)},Z.isBefore=function(C,q){return this.endOf(q)<D(C)},Z.$g=function(C,q,I){return U.u(C)?this[q]:this.set(I,C)},Z.unix=function(){return Math.floor(this.valueOf()/1e3)},Z.valueOf=function(){return this.$d.getTime()},Z.startOf=function(C,q){var I=this,X=!!U.u(q)||q,E=U.p(C),K=function(W,oe){var he=U.w(I.$u?Date.UTC(I.$y,oe,W):new Date(I.$y,oe,W),I);return X?he:he.endOf(u)},re=function(W,oe){return U.w(I.toDate()[W].apply(I.toDate("s"),(X?[0,0,0,0]:[23,59,59,999]).slice(oe)),I)},Q=this.$W,se=this.$M,le=this.$D,ie="set"+(this.$u?"UTC":"");switch(E){case g:return X?K(1,0):K(31,11);case f:return X?K(1,se):K(0,se+1);case p:var ge=this.$locale().weekStart||0,ve=(Q<ge?Q+7:Q)-ge;return K(X?le-ve:le+(6-ve),se);case u:case v:return re(ie+"Hours",0);case d:return re(ie+"Minutes",1);case l:return re(ie+"Seconds",2);case o:return re(ie+"Milliseconds",3);default:return this.clone()}},Z.endOf=function(C){return this.startOf(C,!1)},Z.$set=function(C,q){var I,X=U.p(C),E="set"+(this.$u?"UTC":""),K=(I={},I[u]=E+"Date",I[v]=E+"Date",I[f]=E+"Month",I[g]=E+"FullYear",I[d]=E+"Hours",I[l]=E+"Minutes",I[o]=E+"Seconds",I[i]=E+"Milliseconds",I)[X],re=X===u?this.$D+(q-this.$W):q;if(X===f||X===g){var Q=this.clone().set(v,1);Q.$d[K](re),Q.init(),this.$d=Q.set(v,Math.min(this.$D,Q.daysInMonth())).$d}else K&&this.$d[K](re);return this.init(),this},Z.set=function(C,q){return this.clone().$set(C,q)},Z.get=function(C){return this[U.p(C)]()},Z.add=function(C,q){var I,X=this;C=Number(C);var E=U.p(q),K=function(se){var le=D(X);return U.w(le.date(le.date()+Math.round(se*C)),X)};if(E===f)return this.set(f,this.$M+C);if(E===g)return this.set(g,this.$y+C);if(E===u)return K(1);if(E===p)return K(7);var re=(I={},I[l]=r,I[d]=s,I[o]=n,I)[E]||1,Q=this.$d.getTime()+C*re;return U.w(Q,this)},Z.subtract=function(C,q){return this.add(-1*C,q)},Z.format=function(C){var q=this,I=this.$locale();if(!this.isValid())return I.invalidDate||b;var X=C||"YYYY-MM-DDTHH:mm:ssZ",E=U.z(this),K=this.$H,re=this.$m,Q=this.$M,se=I.weekdays,le=I.months,ie=I.meridiem,ge=function(oe,he,Se,ae){return oe&&(oe[he]||oe(q,X))||Se[he].slice(0,ae)},ve=function(oe){return U.s(K%12||12,oe,"0")},W=ie||function(oe,he,Se){var ae=oe<12?"AM":"PM";return Se?ae.toLowerCase():ae};return X.replace(_,function(oe,he){return he||function(Se){switch(Se){case"YY":return String(q.$y).slice(-2);case"YYYY":return U.s(q.$y,4,"0");case"M":return Q+1;case"MM":return U.s(Q+1,2,"0");case"MMM":return ge(I.monthsShort,Q,le,3);case"MMMM":return ge(le,Q);case"D":return q.$D;case"DD":return U.s(q.$D,2,"0");case"d":return String(q.$W);case"dd":return ge(I.weekdaysMin,q.$W,se,2);case"ddd":return ge(I.weekdaysShort,q.$W,se,3);case"dddd":return se[q.$W];case"H":return String(K);case"HH":return U.s(K,2,"0");case"h":return ve(1);case"hh":return ve(2);case"a":return W(K,re,!0);case"A":return W(K,re,!1);case"m":return String(re);case"mm":return U.s(re,2,"0");case"s":return String(q.$s);case"ss":return U.s(q.$s,2,"0");case"SSS":return U.s(q.$ms,3,"0");case"Z":return E}return null}(oe)||E.replace(":","")})},Z.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Z.diff=function(C,q,I){var X,E=this,K=U.p(q),re=D(C),Q=(re.utcOffset()-this.utcOffset())*r,se=this-re,le=function(){return U.m(E,re)};switch(K){case g:X=le()/12;break;case f:X=le();break;case x:X=le()/3;break;case p:X=(se-Q)/6048e5;break;case u:X=(se-Q)/864e5;break;case d:X=se/s;break;case l:X=se/r;break;case o:X=se/n;break;default:X=se}return I?X:U.a(X)},Z.daysInMonth=function(){return this.endOf(f).$D},Z.$locale=function(){return A[this.$L]},Z.locale=function(C,q){if(!C)return this.$L;var I=this.clone(),X=V(C,q,!0);return X&&(I.$L=X),I},Z.clone=function(){return U.w(this.$d,this)},Z.toDate=function(){return new Date(this.valueOf())},Z.toJSON=function(){return this.isValid()?this.toISOString():null},Z.toISOString=function(){return this.$d.toISOString()},Z.toString=function(){return this.$d.toUTCString()},B}(),G=te.prototype;return D.prototype=G,[["$ms",i],["$s",o],["$m",l],["$H",d],["$W",u],["$M",f],["$y",g],["$D",v]].forEach(function(B){G[B[1]]=function(Z){return this.$g(Z,B[0],B[1])}}),D.extend=function(B,Z){return B.$i||(B(Z,te,D),B.$i=!0),D},D.locale=V,D.isDayjs=T,D.unix=function(B){return D(1e3*B)},D.en=A[M],D.Ls=A,D.p={},D})})(yk);var bk=yk.exports;const _k=ys(bk);var GF={exports:{}};(function(t,e){(function(n,r){t.exports=r(bk)})(pn,function(n){function r(u){return u&&typeof u=="object"&&"default"in u?u:{default:u}}var s=r(n),i="يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),o={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},l={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},d={name:"ar",weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),months:i,monthsShort:i,weekStart:6,meridiem:function(u){return u>12?"م":"ص"},relativeTime:{future:"بعد %s",past:"منذ %s",s:"ثانية واحدة",m:"دقيقة واحدة",mm:"%d دقائق",h:"ساعة واحدة",hh:"%d ساعات",d:"يوم واحد",dd:"%d أيام",M:"شهر واحد",MM:"%d أشهر",y:"عام واحد",yy:"%d أعوام"},preparse:function(u){return u.replace(/[١٢٣٤٥٦٧٨٩٠]/g,function(p){return l[p]}).replace(/،/g,",")},postformat:function(u){return u.replace(/\d/g,function(p){return o[p]}).replace(/,/g,"،")},ordinal:function(u){return u},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"}};return s.default.locale(d,null,!0),d})})(GF);_k.locale("ar");const QF=t=>{if(!t||t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return`${parseFloat((t/Math.pow(e,r)).toFixed(2))} ${n[r]}`},XF=t=>t?_k(t).format("D MMMM YYYY"):"",S_=t=>{const e=["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الآخرة","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة"];return t>=1&&t<=12?e[t-1]:""};function JF({media:t,onClose:e,onDelete:n,onUpdate:r}){const[s,i]=w.useState(!1),[o,l]=w.useState({alt_text:t.alt_text||"",title:t.title||"",description:t.description||""}),d=u=>{u.preventDefault(),r(t.id,o),i(!1)};return t?a.jsxs("div",{className:"bg-white p-6 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"تفاصيل الملف"}),a.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden",children:t.type==="image"?a.jsx("img",{src:t.url,alt:t.alt_text||t.name,className:"w-full h-full object-contain",onError:u=>{u.target.onerror=null,u.target.src="data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22600%22%20height%3D%22400%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Crect%20width%3D%22600%22%20height%3D%22400%22%20fill%3D%22%23e2e8f0%22%3E%3C%2Frect%3E%3Ctext%20x%3D%22300%22%20y%3D%22200%22%20font-size%3D%2220%22%20text-anchor%3D%22middle%22%20alignment-baseline%3D%22middle%22%20font-family%3D%22Arial%2C%20sans-serif%22%20fill%3D%22%2364748b%22%3EImage%20Not%20Found%3C%2Ftext%3E%3C%2Fsvg%3E"}}):t.type==="video"?a.jsx("video",{src:t.url,controls:!0,className:"w-full h-full",onError:u=>{u.target.onerror=null;const p=u.target.parentNode;p&&(p.innerHTML='<div class="w-full h-full flex items-center justify-center bg-gray-200 text-gray-500">فشل تحميل الفيديو</div>')}}):t.type==="audio"?a.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gray-100 p-4",children:[a.jsx("svg",{className:"w-16 h-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})}),a.jsx("audio",{src:t.url,controls:!0,className:"w-full"})]}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:a.jsx("svg",{className:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),s?a.jsxs("form",{onSubmit:d,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"النص البديل"}),a.jsx("input",{type:"text",value:o.alt_text,onChange:u=>l({...o,alt_text:u.target.value}),className:"w-full border rounded-md px-3 py-2",placeholder:"وصف الصورة للقراء الشاشة"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"العنوان"}),a.jsx("input",{type:"text",value:o.title,onChange:u=>l({...o,title:u.target.value}),className:"w-full border rounded-md px-3 py-2",placeholder:"عنوان الملف"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الوصف"}),a.jsx("textarea",{value:o.description,onChange:u=>l({...o,description:u.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3",placeholder:"وصف الملف"})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"حفظ"})]})]}):a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"اسم الملف"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.original_filename||t.filename||t.name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"نوع الملف"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.type==="image"?"صورة":t.type==="video"?"فيديو":t.type==="audio"?"صوت":"مستند"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"حجم الملف"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:QF(t.file_size||t.size)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"المجلد"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.bucket||"عام"})]}),t.width&&t.height&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الأبعاد"}),a.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[t.width,"×",t.height]})]}),t.duration&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"المدة"}),a.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[t.duration," ثانية"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"تاريخ الرفع"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:XF(t.created_at||t.uploaded_at)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"عدد الاستخدامات"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.usage_count||0})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"النص البديل"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.alt_text||"لا يوجد نص بديل"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"العنوان"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.title||"لا يوجد عنوان"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الوصف"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.description||"لا يوجد وصف"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الرابط"}),a.jsx("p",{className:"mt-1 text-sm text-blue-600 truncate",children:a.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",children:t.url})})]})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[!s&&a.jsx("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-gray-100 text-gray-800 rounded hover:bg-gray-200",children:"تعديل"}),a.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إغلاق"}),a.jsx("button",{onClick:()=>n(t.id),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"حذف"})]})]})]}):null}function e8(){const[t,e]=w.useState([]),[n,r]=w.useState(!0),[s,i]=w.useState(null),[o,l]=w.useState("grid"),[d,u]=w.useState(!1),[p,f]=w.useState(!1),[x,g]=w.useState(null),[v,b]=w.useState(null),[j,_]=w.useState("general"),[N,S]=w.useState(""),[P,M]=w.useState(1),[A,R]=w.useState(0),[T,V]=w.useState(!1),D=20;w.useEffect(()=>{U()},[P,N]);const U=async()=>{try{r(!0);const Q=(P-1)*D,se=Q+D-1;let le=ee.from("media_files").select("*",{count:"exact"});N&&(le=le.or(`filename.ilike.%${N}%,original_filename.ilike.%${N}%,alt_text.ilike.%${N}%,title.ilike.%${N}%`));const{data:ie,error:ge,count:ve}=await le.order("created_at",{ascending:!1}).range(Q,se);if(ge)throw ge;const W=ie.map(oe=>{const{publicUrl:he}=ee.storage.from(oe.bucket).getPublicUrl(oe.file_path);return{...oe,url:he,type:oe.mime_type.startsWith("image/")?"image":oe.mime_type.startsWith("video/")?"video":oe.mime_type.startsWith("audio/")?"audio":"document"}});e(W),R(ve||0)}catch(Q){console.error("Error fetching media:",Q),i("فشل في تحميل ملفات الوسائط"),e([{id:1,name:"product-image-1.jpg",filename:"product-image-1.jpg",original_filename:"product-image-1.jpg",type:"image",file_size:1024*1024*2,url:"https://images.unsplash.com/photo-1514432324607-a09d9b4aefdd?q=80&w=200&auto=format&fit=crop",bucket:"products",created_at:"2025-04-15T10:30:00Z",width:1200,height:800,usage_count:3},{id:2,name:"banner-1.jpg",filename:"banner-1.jpg",original_filename:"banner-1.jpg",type:"image",file_size:1024*1024*3,url:"https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?q=80&w=200&auto=format&fit=crop",bucket:"vendors",created_at:"2025-04-10T14:20:00Z",width:1920,height:600,usage_count:1},{id:3,name:"product-video-1.mp4",filename:"product-video-1.mp4",original_filename:"product-video-1.mp4",type:"video",file_size:1024*1024*15,url:"https://example.com/video.mp4",bucket:"products",created_at:"2025-04-05T09:15:00Z",duration:"00:30",usage_count:2},{id:4,name:"logo.png",filename:"logo.png",original_filename:"logo.png",type:"image",file_size:1024*512,url:"https://images.unsplash.com/photo-1559925393-8be0ec4767c8?q=80&w=200&auto=format&fit=crop",bucket:"general",created_at:"2025-03-20T11:45:00Z",width:400,height:400,usage_count:5}])}finally{r(!1)}},te=Q=>{Q.target.files&&Q.target.files[0]&&b(Q.target.files[0])},G=async()=>{if(!v){$.error("الرجاء اختيار ملف");return}try{V(!0);const Q=v.name.split(".").pop(),se=`${Math.random().toString(36).substring(2,15)}_${Date.now()}.${Q}`,le=se,{data:ie,error:ge}=await ee.storage.from(j).upload(le,v,{cacheControl:"3600",upsert:!1});if(ge)throw ge;const{data:{publicUrl:ve}}=ee.storage.from(j).getPublicUrl(le),{data:W,error:oe}=await ee.from("media_files").insert([{filename:se,original_filename:v.name,file_path:le,file_size:v.size,mime_type:v.type,bucket:j,is_public:!0,width:v.type.startsWith("image/")?1200:null,height:v.type.startsWith("image/")?800:null}]).select();if(oe)throw oe;$.success("تم رفع الملف بنجاح");const he={id:W[0].id,name:v.name,filename:se,original_filename:v.name,file_path:le,mime_type:v.type,type:v.type.startsWith("image/")?"image":v.type.startsWith("video/")?"video":v.type.startsWith("audio/")?"audio":"document",file_size:v.size,url:ve,bucket:j,created_at:new Date().toISOString(),width:v.type.startsWith("image/")?1200:null,height:v.type.startsWith("image/")?800:null,duration:v.type.startsWith("video/")?"00:30":null,usage_count:0};e([he,...t]),u(!1),b(null)}catch(Q){console.error("Error uploading file:",Q),$.error("فشل في رفع الملف")}finally{V(!1)}},B=async Q=>{if(window.confirm("هل أنت متأكد من حذف هذا الملف؟"))try{r(!0);const{data:se,error:le}=await ee.from("media_files").select("*").eq("id",Q).single();if(le)throw le;const{error:ie}=await ee.storage.from(se.bucket).remove([se.file_path]);ie&&console.error("Error deleting from storage:",ie);const{error:ge}=await ee.from("media_files").delete().eq("id",Q);if(ge)throw ge;e(t.filter(ve=>ve.id!==Q)),x&&x.id===Q&&(f(!1),g(null)),$.success("تم حذف الملف بنجاح")}catch(se){console.error("Error deleting media:",se),$.error("فشل في حذف الملف")}finally{r(!1)}},Z=async(Q,se)=>{try{const{data:le,error:ie}=await ee.from("media_files").update({alt_text:se.alt_text,title:se.title,description:se.description,updated_at:new Date().toISOString()}).eq("id",Q).select();if(ie)throw ie;e(t.map(ge=>ge.id===Q?{...ge,...se}:ge)),x&&x.id===Q&&g({...x,...se}),$.success("تم تحديث الملف بنجاح")}catch(le){console.error("Error updating media:",le),$.error("فشل في تحديث الملف")}},C=Q=>{if(Q===0)return"0 Bytes";const se=1024,le=["Bytes","KB","MB","GB"],ie=Math.floor(Math.log(Q)/Math.log(se));return parseFloat((Q/Math.pow(se,ie)).toFixed(2))+" "+le[ie]},q=Q=>new Date(Q).toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric"}),I=Q=>{Q.preventDefault(),M(1),U()},X=Q=>{M(Q)},E=Math.ceil(A/D),K=()=>a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:t.map(Q=>a.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden group",children:[a.jsxs("div",{className:"relative aspect-square",children:[Q.type==="image"?a.jsx("img",{src:Q.url,alt:Q.name,className:"w-full h-full object-cover",onError:se=>{se.target.onerror=null,se.target.src="https://via.placeholder.com/300x300?text=Image+Not+Found"}}):Q.type==="video"?a.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:a.jsxs("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}):a.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:a.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),a.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center space-x-2",children:[a.jsx("button",{onClick:()=>{g(Q),f(!0)},className:"p-2 bg-white rounded-full hover:bg-gray-100",children:a.jsxs("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),a.jsx("button",{onClick:()=>B(Q.id),className:"p-2 bg-white rounded-full hover:bg-gray-100",children:a.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),Q.type==="image"&&a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(Q.url),$.success("تم نسخ رابط الصورة")},className:"p-2 bg-white rounded-full hover:bg-gray-100",children:a.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})]})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"font-medium text-gray-900 truncate",children:Q.original_filename||Q.filename}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[a.jsx("p",{className:"text-sm text-gray-500",children:C(Q.file_size||Q.size)}),a.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded-full",children:Q.bucket})]}),Q.usage_count>0&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["استخدم ",Q.usage_count," مرة"]})]})]},Q.id))}),re=()=>a.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الملف"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"النوع"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحجم"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المجلد"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الاستخدامات"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"تاريخ الرفع"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(Q=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:Q.type==="image"?a.jsx("img",{src:Q.url,alt:Q.name,className:"h-10 w-10 rounded object-cover",onError:se=>{se.target.onerror=null,se.target.src="https://via.placeholder.com/40?text=Error"}}):Q.type==="video"?a.jsx("div",{className:"h-10 w-10 rounded bg-gray-200 flex items-center justify-center text-gray-500",children:a.jsxs("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}):a.jsx("div",{className:"h-10 w-10 rounded bg-gray-200 flex items-center justify-center text-gray-500",children:a.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),a.jsxs("div",{className:"mr-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:Q.original_filename||Q.filename}),a.jsxs("div",{className:"text-sm text-gray-500",children:[Q.width&&Q.height&&`${Q.width}×${Q.height}`,Q.duration&&` • ${Q.duration}`]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Q.type==="image"?"bg-blue-100 text-blue-800":Q.type==="video"?"bg-purple-100 text-purple-800":Q.type==="audio"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:Q.type==="image"?"صورة":Q.type==="video"?"فيديو":Q.type==="audio"?"صوت":"مستند"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C(Q.file_size||Q.size)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Q.bucket}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Q.usage_count||0}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:q(Q.created_at||Q.uploaded_at)}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[a.jsx("button",{onClick:()=>{g(Q),f(!0)},className:"text-blue-600 hover:text-blue-900 ml-4",children:"عرض"}),a.jsx("button",{onClick:()=>B(Q.id),className:"text-red-600 hover:text-red-900",children:"حذف"})]})]},Q.id))})]})})});return n&&t.length===0?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?a.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"خطأ"}),a.jsx("p",{children:s}),a.jsx("button",{onClick:U,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"إدارة الوسائط"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>l("grid"),className:`px-3 py-1 rounded ${o==="grid"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض شبكي"}),a.jsx("button",{onClick:()=>l("table"),className:`px-3 py-1 rounded ${o==="table"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض جدول"})]}),a.jsx("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"رفع ملف جديد"})]})]}),a.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:a.jsxs("form",{onSubmit:I,className:"flex items-stretch gap-2",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx("input",{type:"text",value:N,onChange:Q=>S(Q.target.value),className:"w-full border rounded-lg px-3 py-2 pr-10",placeholder:"البحث عن الملفات..."}),a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:a.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})})]}),a.jsx("div",{children:a.jsxs("select",{value:j,onChange:Q=>_(Q.target.value),className:"border rounded-lg px-3 py-2",children:[a.jsx("option",{value:It.GENERAL,children:"عام"}),a.jsx("option",{value:It.PRODUCTS,children:"المنتجات"}),a.jsx("option",{value:It.VENDORS,children:"البائعين"}),a.jsx("option",{value:It.PROFILES,children:"الملفات الشخصية"}),a.jsx("option",{value:It.ADVERTISEMENTS,children:"الإعلانات"})]})}),a.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"بحث"})]})}),n?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?a.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"خطأ"}),a.jsx("p",{children:s}),a.jsx("button",{onClick:U,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):t.length===0?a.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md text-center",children:[a.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"لا توجد وسائط"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"لم يتم العثور على أي وسائط. بدء بالرفع للاستفادة من مكتبة الوسائط."}),a.jsx("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"رفع ملف جديد"})]}):a.jsxs(a.Fragment,{children:[o==="grid"?K():re(),E>1&&a.jsx("div",{className:"flex justify-center mt-6",children:a.jsxs("nav",{className:"inline-flex bg-white rounded-md shadow",children:[a.jsx("button",{onClick:()=>X(P-1),disabled:P===1,className:`px-3 py-2 rounded-l-md border border-gray-300 ${P===1?"opacity-50 cursor-not-allowed":"hover:bg-gray-50"}`,children:"السابق"}),[...Array(E).keys()].map(Q=>a.jsx("button",{onClick:()=>X(Q+1),className:`px-3 py-2 border-t border-b border-gray-300 ${P===Q+1?"bg-blue-50 text-blue-600 font-bold":"hover:bg-gray-50"}`,children:Q+1},Q+1)),a.jsx("button",{onClick:()=>X(P+1),disabled:P===E,className:`px-3 py-2 rounded-r-md border border-gray-300 ${P===E?"opacity-50 cursor-not-allowed":"hover:bg-gray-50"}`,children:"التالي"})]})})]}),d&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx("div",{className:"fixed inset-0 bg-black opacity-30",onClick:()=>u(!1)}),a.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[a.jsx("h2",{className:"text-2xl font-bold mb-6",children:"رفع ملف جديد"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المجلد"}),a.jsxs("select",{value:j,onChange:Q=>_(Q.target.value),className:"w-full border rounded-md px-3 py-2",children:[a.jsx("option",{value:It.GENERAL,children:"عام"}),a.jsx("option",{value:It.PRODUCTS,children:"المنتجات"}),a.jsx("option",{value:It.VENDORS,children:"البائعين"}),a.jsx("option",{value:It.PROFILES,children:"الملفات الشخصية"}),a.jsx("option",{value:It.ADVERTISEMENTS,children:"الإعلانات"})]})]}),a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-blue-500 transition-colors",children:[a.jsx("input",{type:"file",onChange:te,className:"hidden",id:"file-upload"}),a.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[a.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:a.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),a.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[a.jsx("p",{children:"اسحب وأفلت الملف هنا، أو"}),a.jsx("p",{className:"text-blue-600",children:"اضغط للاختيار"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, GIF, PDF, MP4 حتى 10 ميجابايت"})]})]}),v&&a.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("svg",{className:"h-5 w-5 text-gray-400 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:v.name}),a.jsx("p",{className:"text-xs text-gray-500",children:C(v.size)})]})]}),a.jsx("button",{onClick:()=>b(null),className:"text-red-600 hover:text-red-800",children:"حذف"})]})}),a.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[a.jsx("button",{onClick:()=>{u(!1),b(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800 ml-2",children:"إلغاء"}),a.jsx("button",{onClick:G,disabled:!v||T,className:`px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 ${!v||T?"opacity-50 cursor-not-allowed":""}`,children:T?"جاري الرفع...":"رفع"})]})]})]})}),p&&x&&a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx("div",{className:"fixed inset-0 bg-black opacity-30",onClick:()=>{f(!1),g(null)}}),a.jsx("div",{className:"relative bg-white rounded-lg p-8 max-w-4xl w-full mx-4",children:a.jsx(JF,{media:x,onClose:()=>{f(!1),g(null)},onDelete:B,onUpdate:Z})})]})})]})}const t8=async()=>{try{const{data:t,error:e}=await ee.from("vendor_wallets").select(`
        *,
        vendor:vendor_id (
          id,
          store_name,
          status,
          user_id
        )
      `);if(e)throw e;return t||[]}catch(t){throw console.error("Error fetching vendor wallets:",t),t}},n8=async(t,e,n="شحن رصيد")=>{try{const{data:r,error:s}=await ee.rpc("charge_vendor_wallet",{p_vendor_id:t,p_amount:e,p_description:n});if(s)throw s;return r}catch(r){throw console.error("Error charging vendor wallet:",r),r}},wk=async()=>{try{const{data:t,error:e}=await ee.from("app_settings").select("settings").single();if(e)throw e;return t.settings.payment||{}}catch(t){throw console.error("Error fetching payment settings:",t),t}},jk=async t=>{try{const{data:e,error:n}=await ee.from("app_settings").select("settings").single();if(n)throw n;const r={...e.settings,payment:t},{error:s}=await ee.from("app_settings").update({settings:r}).eq("id",e.id);if(s)throw s;return!0}catch(e){throw console.error("Error updating payment settings:",e),e}};function r8(){const[t,e]=w.useState({total:0,pending:0}),[n,r]=w.useState([]),[s,i]=w.useState([]),[o,l]=w.useState(!0),[d,u]=w.useState(null),[p,f]=w.useState(!1),[x,g]=w.useState(""),[v,b]=w.useState(null),[j,_]=w.useState(!1),N={name:{type:"text",label:"اسم المتجر",placeholder:"البحث باسم المتجر",value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"active",label:"نشط"},{value:"inactive",label:"غير نشط"}],value:""},wallet_enabled:{type:"select",label:"المحفظة",placeholder:"الكل",options:[{value:"true",label:"مفعلة"},{value:"false",label:"غير مفعلة"}],value:""}},{filters:S,filterData:P,handleFilterChange:M}=Bn(N),A=w.useCallback(async()=>{try{l(!0),u(null);const D=await t8(),U=D.reduce((B,Z)=>B+(Z.balance||0),0),te=D.reduce((B,Z)=>B+(Z.pending_balance||0),0);e({total:U,pending:te});const G=D.map(B=>{var Z,C;return{id:B.vendor_id,name:((Z=B.vendor)==null?void 0:Z.store_name)||"متجر بدون اسم",balance:B.balance||0,wallet_enabled:!0,auto_charge:B.auto_charge||!1,total_orders:B.total_orders||0,total_sales:B.total_earnings||0,status:((C=B.vendor)==null?void 0:C.status)||"inactive"}});i(G);try{const{data:B,error:Z}=await ee.from("wallet_transactions").select("*").order("created_at",{ascending:!1}).limit(10);if(Z)throw Z;r(B||[])}catch(B){console.error("Error fetching transactions:",B),r([])}}catch(D){console.error("Error fetching wallet data:",D),u("فشل في تحميل بيانات المحفظة. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل بيانات المحفظة")}finally{l(!1)}},[]);w.useEffect(()=>{A()},[A]);const R=async()=>{if(!v||!x||x<=0){$.error("الرجاء اختيار المتجر وإدخال المبلغ");return}try{_(!0),await n8(v.id,parseFloat(x),`شحن رصيد بواسطة المدير: ${x} شيكل`),$.success(`تم شحن ${x} شيكل بنجاح لحساب ${v.name}`),f(!1),g(""),b(null),A()}catch(D){console.error("Error charging wallet:",D),$.error("فشل في عملية الشحن")}finally{_(!1)}},T=D=>{switch(D.type){case"credit":return{color:"text-green-600",prefix:"+",text:D.payment_type==="cash"?"إيداع نقدي":D.payment_type==="admin_charge"?"شحن بواسطة المدير":"إيداع محفظة"};case"debit":return{color:"text-red-600",prefix:"-",text:D.payment_type==="withdrawal"?"سحب رصيد":D.payment_type==="commission"?"عمولة":"خصم"};default:return{color:"text-gray-600",prefix:"",text:"معاملة"}}},V=P(s);return o&&s.length===0?a.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):d?a.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),a.jsx("p",{children:d}),a.jsx("button",{onClick:A,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"الرصيد المتاح"}),a.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["₪",t.total-t.pending]}),a.jsxs("p",{className:"text-gray-500 mt-2",children:["الرصيد الكلي: ₪",t.total]}),a.jsx("button",{onClick:()=>f(!0),className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"شحن رصيد"})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"الرصيد المعلق"}),a.jsxs("div",{className:"text-3xl font-bold text-orange-600",children:["₪",t.pending]}),a.jsx("p",{className:"text-gray-500 mt-2",children:"سيتم تحويله خلال 24 ساعة"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"محافظ البائعين"}),a.jsx("button",{onClick:()=>f(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"شحن رصيد"})]}),a.jsx(zn,{filters:S,onFilterChange:M}),a.jsx("div",{className:"overflow-x-auto mt-4",children:a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-right py-3 px-4 bg-gray-50",children:"المتجر"}),a.jsx("th",{className:"text-right py-3 px-4 bg-gray-50",children:"الرصيد"}),a.jsx("th",{className:"text-right py-3 px-4 bg-gray-50",children:"المحفظة"}),a.jsx("th",{className:"text-right py-3 px-4 bg-gray-50",children:"الشحن التلقائي"}),a.jsx("th",{className:"text-right py-3 px-4 bg-gray-50",children:"عدد الطلبات"}),a.jsx("th",{className:"text-right py-3 px-4 bg-gray-50",children:"إجمالي المبيعات"}),a.jsx("th",{className:"text-right py-3 px-4 bg-gray-50",children:"الحالة"}),a.jsx("th",{className:"text-right py-3 px-4 bg-gray-50",children:"الإجراءات"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:V.map(D=>a.jsxs("tr",{children:[a.jsx("td",{className:"py-3 px-4",children:D.name}),a.jsxs("td",{className:"py-3 px-4 font-semibold",children:["₪",D.balance]}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${D.wallet_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:D.wallet_enabled?"مفعلة":"غير مفعلة"})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${D.auto_charge?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:D.auto_charge?"مفعل":"غير مفعل"})}),a.jsx("td",{className:"py-3 px-4",children:D.total_orders}),a.jsxs("td",{className:"py-3 px-4",children:["₪",D.total_sales]}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${D.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:D.status==="active"?"نشط":"غير نشط"})}),a.jsxs("td",{className:"py-3 px-4",children:[a.jsx("button",{onClick:()=>{b(D),f(!0)},className:"text-blue-600 hover:text-blue-800 ml-3",children:"شحن رصيد"}),a.jsx("button",{onClick:()=>{},className:"text-gray-600 hover:text-gray-800",children:"السجل"})]})]},D.id))})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"آخر المعاملات"}),a.jsxs("table",{className:"min-w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-right py-2",children:"التاريخ"}),a.jsx("th",{className:"text-right py-2",children:"النوع"}),a.jsx("th",{className:"text-right py-2",children:"المبلغ"}),a.jsx("th",{className:"text-right py-2",children:"الحالة"})]})}),a.jsx("tbody",{children:n.map(D=>{const U=T(D);return a.jsxs("tr",{children:[a.jsx("td",{className:"py-2",children:new Date(D.created_at).toLocaleDateString("ar-SA")}),a.jsx("td",{className:"py-2",children:U.text}),a.jsxs("td",{className:`py-2 ${U.color}`,children:[U.prefix,"₪",Math.abs(D.amount)]}),a.jsx("td",{className:"py-2",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${D.status==="completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:D.status==="completed"?"مكتمل":"معلق"})})]},D.id)})})]})]}),a.jsx(_e,{open:p,onClose:()=>{f(!1),b(null),g("")},className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),a.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[a.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:"شحن رصيد"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اختر المتجر"}),a.jsxs("select",{value:(v==null?void 0:v.id)||"",onChange:D=>{const U=s.find(te=>te.id===D.target.value);b(U)},className:"w-full border rounded-md px-3 py-2",children:[a.jsx("option",{value:"",children:"اختر المتجر"}),s.map(D=>a.jsxs("option",{value:D.id,children:[D.name," (رصيد: ₪",D.balance,")"]},D.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المبلغ (₪)"}),a.jsx("input",{type:"number",value:x,onChange:D=>g(D.target.value),className:"w-full border rounded-md px-3 py-2",min:"1",step:"0.01",placeholder:"أدخل المبلغ"})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{onClick:()=>{f(!1),b(null),g("")},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),a.jsx("button",{onClick:R,disabled:j,className:`px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 ${j?"opacity-70 cursor-not-allowed":""}`,children:j?"جاري الشحن...":"شحن الرصيد"})]})]})]})]})})]})}function s8(){const[t,e]=w.useState(!1),[n,r]=w.useState({deliveryCommission:15,autoDeductFromDriver:!0,autoChargeVendor:!0,wallet:{enabled:!0,name:"توصيل محفظة (الدفع المسبق)",description:"عند تفعيل هذا الخيار، يتم التعامل مع الطلبات المدفوعة مسبقًا (عبر المحفظة أو الدفع الإلكتروني)",steps:["يُعتبر التوصيل في هذه الحالة مدفوعًا مسبقًا","يتم شحن محفظة البائع بالكامل بقيمة الطلب + التوصيل","يتم خصم نفس القيمة من محفظة السائق تلقائيًا","السائق يستلم من الزبون فقط أجرة التوصيل يدًا بيد"],note:"✅ هذا النظام مناسب لتطبيقات الدفع المسبق والطلبات التي تُدفع أونلاين"},traditional:{enabled:!0,name:"المحفظة التقليدية (الدفع عند الاستلام)",description:"في هذا النظام، يتم تقسيم المبلغ مباشرة عند التسليم",steps:["الزبون يدفع كامل المبلغ (الطلب + التوصيل) للسائق","يتم تحويل قيمة الطلب إلى محفظة البائع","ويتم إضافة قيمة التوصيل إلى محفظة السائق"],note:"✅ هذا الخيار مناسب للطلبات التي يتم دفعها نقدًا عند التسليم"}});w.useEffect(()=>{(async()=>{try{e(!0);const l=await wk();l&&l.wallet&&r(l.wallet)}catch(l){console.error("Error loading wallet settings:",l),$.error("فشل في تحميل إعدادات المحفظة")}finally{e(!1)}})()},[]);const s=()=>{try{e(!0);const o={...n};jk(o),$.success("تم حفظ إعدادات المحفظة بنجاح")}catch(o){console.error("Error saving wallet settings:",o),$.error("فشل في حفظ إعدادات المحفظة")}finally{e(!1)}},i=({type:o,method:l})=>a.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-lg shadow-md p-6 border border-gray-100",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`p-2 rounded-full ${o==="wallet"?"bg-blue-100 text-blue-600":"bg-green-100 text-green-600"}`,children:o==="wallet"?"💳":"💰"}),a.jsx("h3",{className:"text-xl font-bold",children:l.name})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:l.enabled,onChange:d=>r({...n,[o]:{...l,enabled:d.target.checked}}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-100",children:a.jsx("p",{className:"text-gray-600",children:l.description})}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[a.jsx("span",{className:"text-blue-600",children:"📝"}),"خطوات العمل"]}),a.jsxs("div",{className:"space-y-2",children:[l.steps.map((d,u)=>a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:d,onChange:p=>{const f=[...l.steps];f[u]=p.target.value,r({...n,[o]:{...l,steps:f}})},className:"flex-1 border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"}),a.jsx("button",{onClick:()=>{const p=l.steps.filter((f,x)=>x!==u);r({...n,[o]:{...l,steps:p}})},className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:"✕"})]},u)),a.jsxs("button",{onClick:()=>{const d=[...l.steps,""];r({...n,[o]:{...l,steps:d}})},className:"text-blue-600 hover:text-blue-800 text-sm flex items-center gap-1 px-3 py-2 rounded-lg hover:bg-blue-50 transition-colors",children:[a.jsx("span",{children:"+"}),"إضافة خطوة"]})]})]}),a.jsx("div",{className:`p-4 rounded-lg ${o==="wallet"?"bg-blue-50 text-blue-800":"bg-green-50 text-green-800"}`,children:a.jsx("p",{children:l.note})})]})]});return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:"⚙️"}),a.jsx("h2",{className:"text-2xl font-bold",children:"إعدادات المحفظة"})]}),a.jsxs("button",{onClick:s,disabled:t,className:`bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 ${t?"opacity-70 cursor-not-allowed":""}`,children:[a.jsx("span",{children:"💾"}),t?"جاري الحفظ...":"حفظ التغييرات"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-lg shadow-md p-6 border border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-full",children:"💰"}),a.jsx("h3",{className:"text-xl font-bold",children:"إعدادات العمولة والخصومات"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-100",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نسبة عمولة التوصيل (في الدفع المسبق)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",value:n.deliveryCommission,onChange:o=>r({...n,deliveryCommission:Number(o.target.value)}),className:"w-32 border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",min:"0",max:"100"}),a.jsx("span",{className:"text-gray-600",children:"%"})]})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-100 space-y-3",children:[a.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg transition-colors cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:n.autoDeductFromDriver,onChange:o=>r({...n,autoDeductFromDriver:o.target.checked}),className:"rounded text-blue-600 focus:ring-blue-500 w-5 h-5"}),a.jsx("span",{children:"خصم تلقائي من السائق (الدفع المسبق)"})]}),a.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg transition-colors cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:n.autoChargeVendor,onChange:o=>r({...n,autoChargeVendor:o.target.checked}),className:"rounded text-blue-600 focus:ring-blue-500 w-5 h-5"}),a.jsx("span",{children:"شحن محفظة البائع تلقائيًا"})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-lg",children:[a.jsxs("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[a.jsx("span",{children:"🧪"}),"مثال توضيحي"]}),a.jsx("p",{className:"text-gray-600 mb-4",children:"الطلب: 70 شيكل (60 للمنتج + 10 توصيل)"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-blue-600 bg-white px-4 py-2 rounded-lg shadow-sm",children:"🔹 محفظة البائع = +70 شيكل"}),a.jsx("p",{className:"text-red-600 bg-white px-4 py-2 rounded-lg shadow-sm",children:"🔹 محفظة السائق = -70 شيكل"}),a.jsx("p",{className:"text-green-600 bg-white px-4 py-2 rounded-lg shadow-sm",children:"🔹 السائق يستلم فقط 10 شيكل من الزبون مباشرة"})]})]})]})]}),a.jsx(i,{type:"wallet",method:n.wallet}),a.jsx(i,{type:"traditional",method:n.traditional})]})}function i8(){const[t]=w.useState([{id:1,title:"طلب جديد",message:"تم استلام طلب جديد من متجر كوفي",time:"10:30",read:!1},{id:2,title:"اكتمال طلب",message:"تم اكتمال الطلب رقم #123",time:"09:45",read:!0},{id:3,title:"تسجيل سائق",message:"سائق جديد بحاجة للموافقة",time:"09:00",read:!1}]);return a.jsx("div",{className:"bg-white rounded-lg shadow",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"الإشعارات"}),a.jsx("div",{className:"space-y-4",children:t.map(e=>a.jsx("div",{className:`p-4 rounded-lg border ${e.read?"bg-gray-50":"bg-blue-50 border-blue-200"}`,children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:e.title}),a.jsx("p",{className:"text-gray-600 mt-1",children:e.message})]}),a.jsx("span",{className:"text-sm text-gray-500",children:e.time})]})},e.id))})]})})}const a8=Y.lazy(()=>sa(()=>import("./UserSettings-CpV7-IZG.js"),[]));function o8(){const{settings:t,saveSettings:e}=tp(),[n,r]=w.useState({store:{...t.store},social:{...t.social},notifications:{...t.notifications},login:{...t.login}}),[s,i]=w.useState("general"),o=async()=>{try{await e(n)&&(document.title=`لوحة تحكم ${n.store.name}`,$.success("تم حفظ الإعدادات بنجاح"))}catch{$.error("فشل في حفظ الإعدادات")}},l=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"معلومات المتجر"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم المتجر"}),a.jsx("input",{type:"text",value:n.store.name,onChange:f=>r({...n,store:{...n.store,name:f.target.value}}),className:"w-full border rounded-md px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),a.jsx("input",{type:"email",value:n.store.email,onChange:f=>r({...n,store:{...n.store,email:f.target.value}}),className:"w-full border rounded-md px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم الهاتف"}),a.jsx("input",{type:"tel",value:n.store.phone,onChange:f=>r({...n,store:{...n.store,phone:f.target.value}}),className:"w-full border rounded-md px-3 py-2"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"العملة"}),a.jsxs("select",{value:n.store.currency,onChange:f=>r({...n,store:{...n.store,currency:f.target.value}}),className:"w-full border rounded-md px-3 py-2",children:[a.jsx("option",{value:"ILS",children:"₪ شيكل"}),a.jsx("option",{value:"USD",children:"$ دولار"}),a.jsx("option",{value:"JOD",children:"د.أ دينار"})]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"العنوان"}),a.jsx("input",{type:"text",value:n.store.address,onChange:f=>r({...n,store:{...n.store,address:f.target.value}}),className:"w-full border rounded-md px-3 py-2"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"وصف المتجر"}),a.jsx("textarea",{value:n.store.description,onChange:f=>r({...n,store:{...n.store,description:f.target.value}}),rows:"3",className:"w-full border rounded-md px-3 py-2"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"روابط التواصل الاجتماعي"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"فيسبوك"}),a.jsx("input",{type:"url",value:n.social.facebook,onChange:f=>r({...n,social:{...n.social,facebook:f.target.value}}),className:"w-full border rounded-md px-3 py-2",placeholder:"https://facebook.com/..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تويتر"}),a.jsx("input",{type:"url",value:n.social.twitter,onChange:f=>r({...n,social:{...n.social,twitter:f.target.value}}),className:"w-full border rounded-md px-3 py-2",placeholder:"https://twitter.com/..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"انستغرام"}),a.jsx("input",{type:"url",value:n.social.instagram,onChange:f=>r({...n,social:{...n.social,instagram:f.target.value}}),className:"w-full border rounded-md px-3 py-2",placeholder:"https://instagram.com/..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"واتساب"}),a.jsx("input",{type:"tel",value:n.social.whatsapp,onChange:f=>r({...n,social:{...n.social,whatsapp:f.target.value}}),className:"w-full border rounded-md px-3 py-2",placeholder:"رقم الواتساب"})]})]})]})]}),d=()=>a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"إعدادات الإشعارات"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:n.notifications.email,onChange:f=>r({...n,notifications:{...n.notifications,email:f.target.checked}}),className:"rounded text-blue-600 focus:ring-blue-500"}),a.jsx("span",{children:"إشعارات البريد الإلكتروني"})]}),a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:n.notifications.sms,onChange:f=>r({...n,notifications:{...n.notifications,sms:f.target.checked}}),className:"rounded text-blue-600 focus:ring-blue-500"}),a.jsx("span",{children:"إشعارات الرسائل النصية"})]}),a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:n.notifications.push,onChange:f=>r({...n,notifications:{...n.notifications,push:f.target.checked}}),className:"rounded text-blue-600 focus:ring-blue-500"}),a.jsx("span",{children:"إشعارات التطبيق"})]})]})]}),u=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"إعدادات صفحة تسجيل الدخول"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رابط شعار صفحة تسجيل الدخول"}),a.jsx("input",{type:"url",value:n.login.logo,onChange:f=>r({...n,login:{...n.login,logo:f.target.value}}),className:"w-full border rounded-md px-3 py-2",placeholder:"https://example.com/logo.png"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رابط خلفية صفحة تسجيل الدخول"}),a.jsx("input",{type:"url",value:n.login.background,onChange:f=>r({...n,login:{...n.login,background:f.target.value}}),className:"w-full border rounded-md px-3 py-2",placeholder:"https://example.com/background.jpg"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"معاينة صفحة تسجيل الدخول"}),a.jsx("div",{className:"border rounded-lg overflow-hidden",children:a.jsx("div",{className:"relative",style:{background:n.login.background?`url(${n.login.background}) center/cover no-repeat`:"linear-gradient(135deg, #1e293b 0%, #0f172a 100%)",padding:"2rem",minHeight:"400px"},children:a.jsx("div",{className:"relative z-10 flex items-center justify-center",children:a.jsxs("div",{className:"bg-white bg-opacity-95 backdrop-blur-sm p-8 rounded-lg shadow-2xl w-full max-w-md border border-gray-200",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"flex justify-center mb-4",children:n.login.logo?a.jsx("img",{src:n.login.logo,alt:"Logo",className:"h-20 w-20 rounded-lg shadow-lg"}):a.jsx("div",{className:"h-20 w-20 rounded-lg shadow-lg bg-blue-600 text-white flex items-center justify-center text-3xl",children:"🛒"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"تسجيل الدخول"}),a.jsxs("p",{className:"text-gray-600 mt-2",children:["مرحباً بك في نظام ",n.store.name]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"البريد الإلكتروني"}),a.jsx("div",{className:"relative",children:a.jsx("input",{type:"email",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-yellow-500 focus:border-yellow-500 shadow-sm",placeholder:"أدخل البريد الإلكتروني",disabled:!0})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"كلمة المرور"}),a.jsx("div",{className:"relative",children:a.jsx("input",{type:"password",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-yellow-500 focus:border-yellow-500 shadow-sm",placeholder:"أدخل كلمة المرور",disabled:!0})})]}),a.jsx("div",{children:a.jsx("button",{className:"w-full bg-gradient-to-r from-yellow-500 to-yellow-600 text-slate-900 py-2 rounded-md hover:from-yellow-600 hover:to-yellow-700 transition-colors shadow-md font-bold opacity-70 cursor-not-allowed",disabled:!0,children:"تسجيل الدخول"})})]})]})})})})]})]}),p=()=>a.jsx("div",{id:"userSettings",children:a.jsx(w.Suspense,{fallback:a.jsx("div",{children:"جاري التحميل..."}),children:a.jsx(a8,{})})});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"الإعدادات"}),a.jsx("button",{onClick:o,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"حفظ التغييرات"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[a.jsx("div",{className:"border-b",children:a.jsxs("nav",{className:"flex gap-4 px-6","aria-label":"Tabs",children:[a.jsx("button",{onClick:()=>i("general"),className:`py-4 px-4 text-sm font-medium border-b-2 -mb-px ${s==="general"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"إعدادات عامة"}),a.jsx("button",{onClick:()=>i("notifications"),className:`py-4 px-4 text-sm font-medium border-b-2 -mb-px ${s==="notifications"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"إعدادات الإشعارات"}),a.jsx("button",{onClick:()=>i("login"),className:`py-4 px-4 text-sm font-medium border-b-2 -mb-px ${s==="login"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"إعدادات تسجيل الدخول"}),a.jsx("button",{onClick:()=>i("user"),className:`py-4 px-4 text-sm font-medium border-b-2 -mb-px ${s==="user"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"إعدادات المستخدم"})]})}),a.jsxs("div",{className:"p-6",children:[s==="general"&&l(),s==="notifications"&&d(),s==="login"&&u(),s==="user"&&p()]})]})]})}function l8(){const[t,e]=w.useState([]),[n,r]=w.useState([]),[s,i]=w.useState([]),[o,l]=w.useState(!0),[d,u]=w.useState(null),[p,f]=w.useState(!1),[x,g]=w.useState(null),[v,b]=w.useState({title:"",description:"",vendor_id:"",vendor_category_id:"",image_url:"",link:"",start_date:"",end_date:"",status:"draft",type:"banner",position:"home",priority:1});w.useEffect(()=>{j()},[]);const j=async()=>{try{l(!0),u(null);const{data:G,error:B}=await ee.from("vendors").select("id, store_name").order("store_name");if(B)throw B;r(G||[]);const{data:Z,error:C}=await ee.from("vendor_categories_table").select("id, name").order("name");if(C)throw C;i(Z||[]);const{data:q,error:I}=await ee.from("advertisements").select(`
          *,
          vendor:vendor_id(store_name),
          vendor_category:vendor_category_id(name)
        `).order("created_at",{ascending:!1});if(I)throw I;e(q||[])}catch(G){console.error("Error fetching data:",G),u("فشل في تحميل البيانات. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل البيانات")}finally{l(!1)}},_={title:{type:"text",label:"العنوان",placeholder:"البحث بالعنوان",value:""},type:{type:"select",label:"النوع",placeholder:"جميع الأنواع",options:[{value:"banner",label:"بانر"},{value:"popup",label:"نافذة منبثقة"},{value:"slider",label:"شريحة عرض"}],value:""},position:{type:"select",label:"الموقع",placeholder:"جميع المواقع",options:[{value:"home",label:"الرئيسية"},{value:"category",label:"التصنيفات"},{value:"product",label:"المنتجات"},{value:"checkout",label:"الدفع"},{value:"vendor_category",label:"قسم البائعين"}],value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"draft",label:"مسودة"},{value:"pending",label:"معلق"},{value:"active",label:"نشط"},{value:"expired",label:"منتهي"}],value:""}},{filters:N,filterData:S,handleFilterChange:P}=Bn(_),M=async G=>{if(G.preventDefault(),!v.title||!v.image_url){$.error("الرجاء تعبئة جميع الحقول المطلوبة");return}try{if(v.position==="vendor_category"&&!v.vendor_category_id){$.error("الرجاء اختيار قسم البائعين");return}if(x){const{data:B,error:Z}=await ee.from("advertisements").update({title:v.title,description:v.description,vendor_id:v.vendor_id||null,vendor_category_id:v.position==="vendor_category"?v.vendor_category_id:null,image_url:v.image_url,link:v.link,start_date:v.start_date,end_date:v.end_date,status:v.status,type:v.type,position:v.position,priority:parseInt(v.priority)}).eq("id",x.id).select();if(Z)throw Z;e(C=>C.map(q=>q.id===x.id?{...B[0],vendor:n.find(I=>I.id===B[0].vendor_id)||null,vendor_category:s.find(I=>I.id===B[0].vendor_category_id)||null}:q)),$.success("تم تحديث الإعلان بنجاح"),f(!1),g(null)}else{const{data:B,error:Z}=await ee.from("advertisements").insert([{title:v.title,description:v.description,vendor_id:v.vendor_id||null,vendor_category_id:v.position==="vendor_category"?v.vendor_category_id:null,image_url:v.image_url,link:v.link,start_date:v.start_date,end_date:v.end_date,status:v.status,type:v.type,position:v.position,priority:parseInt(v.priority)}]).select();if(Z)throw Z;e(C=>[{...B[0],vendor:n.find(q=>q.id===B[0].vendor_id)||null,vendor_category:s.find(q=>q.id===B[0].vendor_category_id)||null},...C]),$.success("تم إضافة الإعلان بنجاح"),f(!1)}b({title:"",description:"",vendor_id:"",vendor_category_id:"",image_url:"",link:"",start_date:"",end_date:"",status:"draft",type:"banner",position:"home",priority:1})}catch(B){console.error("Error saving advertisement:",B),$.error("فشل في حفظ الإعلان")}},A=async G=>{if(window.confirm("هل أنت متأكد من حذف هذا الإعلان؟"))try{const{error:B}=await ee.from("advertisements").delete().eq("id",G);if(B)throw B;e(t.filter(Z=>Z.id!==G)),$.success("تم حذف الإعلان بنجاح")}catch(B){console.error("Error deleting advertisement:",B),$.error("فشل في حذف الإعلان")}},R=G=>{switch(G){case"banner":return"بانر";case"popup":return"نافذة منبثقة";case"slider":return"شريحة عرض";default:return G}},T=G=>{switch(G){case"home":return"الرئيسية";case"category":return"التصنيفات";case"product":return"المنتجات";case"checkout":return"الدفع";case"vendor_category":return"قسم البائعين";default:return G}},V=G=>{switch(G){case"draft":return"مسودة";case"pending":return"معلق";case"active":return"نشط";case"expired":return"منتهي";default:return G}},D=G=>{switch(G){case"draft":return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800";case"active":return"bg-green-100 text-green-800";case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},U=({preview:G})=>{G&&b({...v,image_url:G})},te=S(t);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"الإعلانات"}),a.jsx("button",{onClick:()=>{g(null),b({title:"",description:"",vendor_id:"",vendor_category_id:"",image_url:"",link:"",start_date:"",end_date:"",status:"draft",type:"banner",position:"home",priority:1}),f(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة إعلان جديد"})]}),a.jsx(zn,{filters:N,onFilterChange:P}),o?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):d?a.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"خطأ"}),a.jsx("p",{children:d}),a.jsx("button",{onClick:j,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):te.length===0?a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-blue-100 text-blue-600 rounded-full mx-auto flex items-center justify-center mb-4",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"لا توجد إعلانات"}),a.jsx("p",{className:"text-gray-500 mb-6",children:"لم يتم العثور على أي إعلانات متطابقة مع معايير البحث المحددة."}),a.jsx("button",{onClick:()=>{g(null),b({title:"",description:"",vendor_id:"",vendor_category_id:"",image_url:"",link:"",start_date:"",end_date:"",status:"draft",type:"banner",position:"home",priority:1}),f(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة أول إعلان"})]}):a.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الصورة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العنوان"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المتجر"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"قسم البائعين"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"النوع"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الموقع"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الفترة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإحصائيات"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:te.map(G=>{var B,Z;return a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"h-16 w-24 bg-gray-200 rounded overflow-hidden",children:G.image_url?a.jsx("img",{src:G.image_url,alt:G.title,className:"h-full w-full object-cover",onError:C=>{C.target.onerror=null,C.target.src="data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22100%22%20height%3D%2280%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Crect%20width%3D%22100%22%20height%3D%2280%22%20fill%3D%22%23e2e8f0%22%3E%3C%2Frect%3E%3Ctext%20x%3D%2250%22%20y%3D%2240%22%20font-size%3D%2210%22%20text-anchor%3D%22middle%22%20alignment-baseline%3D%22middle%22%20font-family%3D%22Arial%2C%20sans-serif%22%20fill%3D%22%2364748b%22%3E%D8%A5%D8%B9%D9%84%D8%A7%D9%86%3C%2Ftext%3E%3C%2Fsvg%3E"}}):a.jsx("div",{className:"h-full w-full flex items-center justify-center text-gray-400",children:"لا توجد صورة"})})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:G.title}),G.description&&a.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:G.description})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:((B=G.vendor)==null?void 0:B.store_name)||"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:((Z=G.vendor_category)==null?void 0:Z.name)||"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:R(G.type)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm text-gray-900",children:T(G.position)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"text-sm text-gray-900",children:[new Date(G.start_date).toLocaleDateString("ar-SA"),a.jsx("br",{}),new Date(G.end_date).toLocaleDateString("ar-SA")]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${D(G.status)}`,children:V(G.status)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("span",{children:["المشاهدات: ",G.views||0]}),a.jsxs("span",{children:["النقرات: ",G.clicks||0]}),a.jsx("span",{className:"text-xs",children:G.views>0?`${(G.clicks/G.views*100).toFixed(1)}% معدل النقر`:"0% معدل النقر"})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[a.jsx("button",{onClick:()=>{g(G),b({title:G.title,description:G.description||"",vendor_id:G.vendor_id||"",vendor_category_id:G.vendor_category_id||"",image_url:G.image_url,link:G.link||"",start_date:G.start_date||"",end_date:G.end_date||"",status:G.status,type:G.type,position:G.position,priority:G.priority}),f(!0)},className:"text-blue-600 hover:text-blue-800 ml-4",children:"تعديل"}),a.jsx("button",{onClick:()=>A(G.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},G.id)})})]})})}),a.jsx(_e,{open:p,onClose:()=>f(!1),className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),a.jsxs("div",{className:"relative bg-white rounded-lg p-6 w-full max-w-2xl mx-4",children:[a.jsx(_e.Title,{className:"text-2xl font-bold mb-4",children:x?"تعديل الإعلان":"إضافة إعلان جديد"}),a.jsxs("form",{onSubmit:M,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["العنوان ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"text",value:v.title,onChange:G=>b({...v,title:G.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الوصف"}),a.jsx("textarea",{value:v.description,onChange:G=>b({...v,description:G.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المتجر"}),a.jsxs("select",{value:v.vendor_id,onChange:G=>b({...v,vendor_id:G.target.value}),className:"w-full border rounded-md px-3 py-2",children:[a.jsx("option",{value:"",children:"اختر المتجر"}),n.map(G=>a.jsx("option",{value:G.id,children:G.store_name},G.id))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["الموقع ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsxs("select",{value:v.position,onChange:G=>b({...v,position:G.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[a.jsx("option",{value:"home",children:"الرئيسية"}),a.jsx("option",{value:"category",children:"التصنيفات"}),a.jsx("option",{value:"product",children:"المنتجات"}),a.jsx("option",{value:"checkout",children:"الدفع"}),a.jsx("option",{value:"vendor_category",children:"قسم البائعين"})]})]}),v.position==="vendor_category"&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["قسم البائعين ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsxs("select",{value:v.vendor_category_id,onChange:G=>b({...v,vendor_category_id:G.target.value}),className:"w-full border rounded-md px-3 py-2",required:v.position==="vendor_category",children:[a.jsx("option",{value:"",children:"اختر قسم البائعين"}),s.map(G=>a.jsx("option",{value:G.id,children:G.name},G.id))]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["صورة الإعلان ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx(xs,{type:"image",preview:v.image_url,onUpload:U,storeInSupabase:!0,bucket:It.ADVERTISEMENTS})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رابط الإعلان"}),a.jsx("input",{type:"text",value:v.link,onChange:G=>b({...v,link:G.target.value}),className:"w-full border rounded-md px-3 py-2",placeholder:"https://example.com"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["تاريخ البداية ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"date",value:v.start_date,onChange:G=>b({...v,start_date:G.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["تاريخ النهاية ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"date",value:v.end_date,onChange:G=>b({...v,end_date:G.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["نوع الإعلان ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsxs("select",{value:v.type,onChange:G=>b({...v,type:G.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[a.jsx("option",{value:"banner",children:"بانر"}),a.jsx("option",{value:"popup",children:"نافذة منبثقة"}),a.jsx("option",{value:"slider",children:"شريحة عرض"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["الأولوية ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"number",value:v.priority,onChange:G=>b({...v,priority:parseInt(G.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"1",required:!0}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"الإعلانات ذات الأرقام الأقل تظهر أولاً"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["الحالة ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsxs("select",{value:v.status,onChange:G=>b({...v,status:G.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[a.jsx("option",{value:"draft",children:"مسودة"}),a.jsx("option",{value:"pending",children:"معلق"}),a.jsx("option",{value:"active",children:"نشط"}),a.jsx("option",{value:"expired",children:"منتهي"})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:x?"تحديث الإعلان":"إضافة الإعلان"})]})]})]})]})})]})}function c8(){var ve;const[t,e]=w.useState({points_value:.1,min_points_redeem:100,points_expiry_days:365,points_per_currency:1,min_order_points:10}),[n,r]=w.useState([{id:1,name:"برونزي",icon:"🥉",min_points:0,max_points:999,benefits:["كسب نقاط × 1","خصم 5% على التوصيل"],color:"bg-amber-100 text-amber-800"},{id:2,name:"فضي",icon:"🥈",min_points:1e3,max_points:4999,benefits:["كسب نقاط × 1.5","خصم 10% على التوصيل","أولوية في الدعم"],color:"bg-gray-100 text-gray-800"},{id:3,name:"ذهبي",icon:"🥇",min_points:5e3,max_points:9999,benefits:["كسب نقاط × 2","خصم 15% على التوصيل","أولوية في الدعم","عروض حصرية"],color:"bg-yellow-100 text-yellow-800"},{id:4,name:"بلاتيني",icon:"👑",min_points:1e4,max_points:null,benefits:["كسب نقاط × 3","خصم 20% على التوصيل","أولوية قصوى في الدعم","عروض حصرية","هدية عيد ميلاد"],color:"bg-purple-100 text-purple-800"}]),[s,i]=w.useState([]),[o,l]=w.useState([]),[d,u]=w.useState([]),[p,f]=w.useState([]),[x,g]=w.useState(!0),[v,b]=w.useState(null),[j,_]=w.useState(!1),[N,S]=w.useState(!1),[P,M]=w.useState(!1),[A,R]=w.useState(null),[T,V]=w.useState(null),[D,U]=w.useState({name:"",description:"",points_cost:"",reward_type:"free_delivery",discount_type:"",discount_value:"",min_order_amount:"",max_discount:"",usage_limit:"",start_date:"",end_date:"",status:"active"}),te=w.useCallback(async()=>{var W;try{g(!0),b(null);const{data:oe,error:he}=await ee.from("points_rewards").select("*").order("points_cost",{ascending:!0});if(he)throw he;i(oe||[]);try{const{data:Vt,error:Jt}=await ee.rpc("get_customers_with_points");if(Jt)throw Jt;l(Vt||[])}catch(Vt){console.error("Error fetching customers with points:",Vt);const{data:Jt,error:_t}=await ee.from("customers").select("id, name, phone, email");if(_t)throw _t;l(Jt||[])}const{data:Se,error:ae}=await ee.from("points_transactions").select(`
          *,
          account:account_id(
            customer:customer_id(name)
          )
        `).order("created_at",{ascending:!1}).limit(10);if(ae)throw ae;u(Se||[]);const{data:ke,error:We}=await ee.from("points_redemptions").select(`
          *,
          account:account_id(
            customer:customer_id(name)
          ),
          reward:reward_id(name)
        `).order("created_at",{ascending:!1}).limit(10);if(We)throw We;f(ke||[]);const{data:ht,error:Lt}=await ee.from("app_settings").select("settings").single();!Lt&&((W=ht==null?void 0:ht.settings)!=null&&W.points)&&e(ht.settings.points)}catch(oe){console.error("Error fetching data:",oe),b("فشل في تحميل البيانات. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل البيانات")}finally{g(!1)}},[]);w.useEffect(()=>{te()},[te]);const G={name:{type:"text",label:"اسم المكافأة",placeholder:"البحث باسم المكافأة",value:""},reward_type:{type:"select",label:"نوع المكافأة",placeholder:"جميع الأنواع",options:[{value:"free_delivery",label:"توصيل مجاني"},{value:"order_discount",label:"خصم على الطلب"},{value:"delivery_discount",label:"خصم على التوصيل"},{value:"product_discount",label:"خصم على منتج"},{value:"gift",label:"هدية"}],value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"active",label:"نشط"},{value:"inactive",label:"غير نشط"}],value:""}},{filters:B,filterData:Z,handleFilterChange:C}=Bn(G),q=async()=>{try{g(!0);const{data:W,error:oe}=await ee.from("app_settings").select("settings, id").single();if(oe&&oe.code!=="PGRST116")throw oe;let he,Se;if(W){he={...W.settings,points:t},Se=W.id;const{error:ae}=await ee.from("app_settings").update({settings:he}).eq("id",Se);if(ae)throw ae}else{he={points:t};const{data:ae,error:ke}=await ee.from("app_settings").insert([{settings:he}]).select();if(ke)throw ke}$.success("تم حفظ الإعدادات بنجاح"),_(!1)}catch(W){console.error("Error saving settings:",W),$.error("فشل في حفظ الإعدادات")}finally{g(!1)}},I=async()=>{try{if(g(!0),!D.name||!D.points_cost||!D.reward_type||!D.start_date||!D.end_date){$.error("الرجاء تعبئة جميع الحقول المطلوبة"),g(!1);return}const W={name:D.name,description:D.description,points_cost:parseInt(D.points_cost),reward_type:D.reward_type,discount_type:D.discount_type||null,discount_value:D.discount_value?parseFloat(D.discount_value):null,min_order_amount:D.min_order_amount?parseFloat(D.min_order_amount):null,max_discount:D.max_discount?parseFloat(D.max_discount):null,usage_limit:D.usage_limit?parseInt(D.usage_limit):null,start_date:D.start_date,end_date:D.end_date,status:D.status};if(A){const{error:oe}=await ee.from("points_rewards").update(W).eq("id",A.id);if(oe)throw oe;$.success("تم تحديث المكافأة بنجاح")}else{const{error:oe}=await ee.from("points_rewards").insert([W]);if(oe)throw oe;$.success("تم إضافة المكافأة بنجاح")}te(),S(!1),R(null),U({name:"",description:"",points_cost:"",reward_type:"free_delivery",discount_type:"",discount_value:"",min_order_amount:"",max_discount:"",usage_limit:"",start_date:"",end_date:"",status:"active"})}catch(W){console.error("Error saving reward:",W),$.error("فشل في حفظ المكافأة")}finally{g(!1)}},X=async()=>{try{if(T)r(n.map(W=>W.id===T.id?{...T}:W)),$.success("تم تحديث المستوى بنجاح");else{const W={id:Math.max(...n.map(oe=>oe.id))+1,...T};r([...n,W]),$.success("تم إضافة المستوى بنجاح")}M(!1),V(null)}catch(W){console.error("Error saving level:",W),$.error("فشل في حفظ المستوى")}},E=async W=>{if(window.confirm("هل أنت متأكد من حذف هذه المكافأة؟"))try{g(!0);const{error:oe}=await ee.from("points_rewards").delete().eq("id",W);if(oe)throw oe;$.success("تم حذف المكافأة بنجاح"),te()}catch(oe){console.error("Error deleting reward:",oe),$.error("فشل في حذف المكافأة")}finally{g(!1)}},K=W=>{switch(W){case"free_delivery":return"توصيل مجاني";case"order_discount":return"خصم على الطلب";case"delivery_discount":return"خصم على التوصيل";case"product_discount":return"خصم على منتج";case"gift":return"هدية";default:return W}},re=W=>W.reward_type==="free_delivery"?"توصيل مجاني":W.discount_type==="percentage"?`${W.discount_value}%`:`₪${W.discount_value}`,Q=W=>{switch(W){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"used":return"bg-blue-100 text-blue-800";case"expired":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},se=W=>{switch(W){case"active":return"نشط";case"inactive":return"غير نشط";case"used":return"مستخدم";case"expired":return"منتهي";default:return W}},le=W=>{switch(W){case"earn":return"كسب نقاط";case"spend":return"استخدام نقاط";case"expire":return"انتهاء صلاحية";case"adjust":return"تعديل";default:return W}},ie=W=>{switch(W){case"earn":return"text-green-600";case"spend":return"text-red-600";case"expire":return"text-gray-600";case"adjust":return"text-blue-600";default:return"text-gray-600"}},ge=Z(s);return x&&s.length===0?a.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):v?a.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),a.jsx("p",{children:v}),a.jsx("button",{onClick:te,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"إعدادات النقاط"}),a.jsx("button",{onClick:()=>_(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"تعديل الإعدادات"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"قيمة النقطة"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["₪",t.points_value]})]}),a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"الحد الأدنى للاستبدال"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t.min_points_redeem," نقطة"]})]}),a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"مدة صلاحية النقاط"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t.points_expiry_days," يوم"]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"مستويات العملاء"}),a.jsx("button",{onClick:()=>{V(null),M(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة مستوى جديد"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map(W=>a.jsxs("div",{className:`rounded-lg p-6 ${W.color}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-3xl",children:W.icon}),a.jsx("h3",{className:"text-xl font-semibold mt-2",children:W.name})]}),a.jsxs("div",{className:"text-sm",children:[W.min_points.toLocaleString()," - ",W.max_points?W.max_points.toLocaleString():"∞"," نقطة"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"font-medium",children:"المميزات:"}),a.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm",children:W.benefits.map((oe,he)=>a.jsx("li",{children:oe},he))})]}),a.jsx("div",{className:"flex justify-end mt-4",children:a.jsx("button",{onClick:()=>{V(W),M(!0)},className:"text-sm hover:underline",children:"تعديل"})})]},W.id))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsx("h2",{className:"text-xl font-semibold",children:"آخر معاملات النقاط"})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العميل"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العملية"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"النقاط"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الوصف"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التاريخ"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"لا توجد معاملات"})}):d.map(W=>{var oe,he;return a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:((he=(oe=W.account)==null?void 0:oe.customer)==null?void 0:he.name)||"غير معروف"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:ie(W.type),children:le(W.type)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:ie(W.type),children:[W.type==="earn"?"+":W.type==="spend"||W.type==="expire"?"-":"",W.amount]})}),a.jsx("td",{className:"px-6 py-4",children:W.description}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(W.created_at).toLocaleString("ar-SA")})]},W.id)})})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("div",{className:"flex justify-between items-center mb-6",children:a.jsx("h2",{className:"text-xl font-semibold",children:"آخر عمليات استبدال النقاط"})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العميل"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المكافأة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"النقاط"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الرمز"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"تاريخ الانتهاء"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"لا توجد عمليات استبدال"})}):p.map(W=>{var oe,he,Se;return a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:((he=(oe=W.account)==null?void 0:oe.customer)==null?void 0:he.name)||"غير معروف"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:((Se=W.reward)==null?void 0:Se.name)||"غير معروف"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:"text-red-600",children:["-",W.points_spent]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:W.code})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Q(W.status)}`,children:se(W.status)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(W.expires_at).toLocaleDateString("ar-SA")})]},W.id)})})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"المكافآت"}),a.jsx("button",{onClick:()=>{R(null),U({name:"",description:"",points_cost:"",reward_type:"free_delivery",discount_type:"",discount_value:"",min_order_amount:"",max_discount:"",usage_limit:"",start_date:"",end_date:"",status:"active"}),S(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة مكافأة جديدة"})]}),a.jsx(zn,{filters:B,onFilterChange:C}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6",children:ge.length===0?a.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:"لا توجد مكافآت متطابقة مع معايير البحث"}):ge.map(W=>a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-lg",children:W.name}),a.jsx("p",{className:"text-gray-600 text-sm",children:W.description})]}),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${W.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:W.status==="active"?"نشط":"غير نشط"})]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"النقاط المطلوبة:"})," ",W.points_cost]}),a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"نوع المكافأة:"})," ",K(W.reward_type)]}),W.discount_value&&a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"قيمة الخصم:"})," ",re(W)]}),W.min_order_amount&&a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"الحد الأدنى للطلب:"})," ₪",W.min_order_amount]}),W.max_discount&&a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"أقصى خصم:"})," ₪",W.max_discount]}),a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"الاستخدام:"})," ",W.used_count||0,"/",W.usage_limit||"∞"]}),a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"الصلاحية:"})," ",new Date(W.start_date).toLocaleDateString("ar-SA")," -"," ",new Date(W.end_date).toLocaleDateString("ar-SA")]})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{onClick:()=>{R(W),U({name:W.name,description:W.description||"",points_cost:W.points_cost.toString(),reward_type:W.reward_type,discount_type:W.discount_type||"",discount_value:W.discount_value?W.discount_value.toString():"",min_order_amount:W.min_order_amount?W.min_order_amount.toString():"",max_discount:W.max_discount?W.max_discount.toString():"",usage_limit:W.usage_limit?W.usage_limit.toString():"",start_date:W.start_date,end_date:W.end_date,status:W.status}),S(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),a.jsx("button",{onClick:()=>E(W.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},W.id))})]}),a.jsx(_e,{open:j,onClose:()=>_(!1),className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),a.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[a.jsx(_e.Title,{className:"text-2xl font-semibold mb-6",children:"إعدادات النقاط"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"قيمة النقطة (₪)"}),a.jsx("input",{type:"number",step:"0.01",value:t.points_value,onChange:W=>e({...t,points_value:parseFloat(W.target.value)}),className:"w-full p-2 border rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحد الأدنى للاستبدال (نقاط)"}),a.jsx("input",{type:"number",value:t.min_points_redeem,onChange:W=>e({...t,min_points_redeem:parseInt(W.target.value)}),className:"w-full p-2 border rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"مدة صلاحية النقاط (أيام)"}),a.jsx("input",{type:"number",value:t.points_expiry_days,onChange:W=>e({...t,points_expiry_days:parseInt(W.target.value)}),className:"w-full p-2 border rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"النقاط لكل ₪1"}),a.jsx("input",{type:"number",step:"0.01",value:t.points_per_currency,onChange:W=>e({...t,points_per_currency:parseFloat(W.target.value)}),className:"w-full p-2 border rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحد الأدنى للطلب لكسب النقاط (₪)"}),a.jsx("input",{type:"number",step:"0.01",value:t.min_order_points,onChange:W=>e({...t,min_order_points:parseFloat(W.target.value)}),className:"w-full p-2 border rounded-lg"})]})]}),a.jsxs("div",{className:"flex justify-end mt-6 space-x-2",children:[a.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),a.jsx("button",{onClick:q,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",disabled:x,children:x?"جارٍ الحفظ...":"حفظ"})]})]})]})}),a.jsx(_e,{open:N,onClose:()=>S(!1),className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),a.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[a.jsx(_e.Title,{className:"text-2xl font-semibold mb-6",children:A?"تعديل المكافأة":"إضافة مكافأة جديدة"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم المكافأة"}),a.jsx("input",{type:"text",value:D.name,onChange:W=>U({...D,name:W.target.value}),className:"w-full p-2 border rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الوصف"}),a.jsx("textarea",{value:D.description,onChange:W=>U({...D,description:W.target.value}),className:"w-full p-2 border rounded-lg",rows:3})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"النقاط المطلوبة"}),a.jsx("input",{type:"number",value:D.points_cost,onChange:W=>U({...D,points_cost:W.target.value}),className:"w-full p-2 border rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع المكافأة"}),a.jsxs("select",{value:D.reward_type,onChange:W=>U({...D,reward_type:W.target.value}),className:"w-full p-2 border rounded-lg",children:[a.jsx("option",{value:"free_delivery",children:"توصيل مجاني"}),a.jsx("option",{value:"order_discount",children:"خصم على الطلب"}),a.jsx("option",{value:"delivery_discount",children:"خصم على التوصيل"}),a.jsx("option",{value:"product_discount",children:"خصم على منتج"}),a.jsx("option",{value:"gift",children:"هدية"})]})]}),D.reward_type!=="free_delivery"&&D.reward_type!=="gift"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع الخصم"}),a.jsxs("select",{value:D.discount_type,onChange:W=>U({...D,discount_type:W.target.value}),className:"w-full p-2 border rounded-lg",children:[a.jsx("option",{value:"",children:"اختر نوع الخصم"}),a.jsx("option",{value:"percentage",children:"نسبة مئوية"}),a.jsx("option",{value:"fixed",children:"مبلغ ثابت"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"قيمة الخصم"}),a.jsx("input",{type:"number",step:D.discount_type==="percentage"?"1":"0.01",value:D.discount_value,onChange:W=>U({...D,discount_value:W.target.value}),className:"w-full p-2 border rounded-lg",min:"0",step:"0.01"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحد الأدنى للطلب"}),a.jsx("input",{type:"number",step:"0.01",value:D.min_order_amount,onChange:W=>U({...D,min_order_amount:W.target.value}),className:"w-full p-2 border rounded-lg"})]}),D.reward_type!=="free_delivery"&&D.reward_type!=="gift"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"أقصى خصم"}),a.jsx("input",{type:"number",step:"0.01",value:D.max_discount,onChange:W=>U({...D,max_discount:W.target.value}),className:"w-full p-2 border rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"حد الاستخدام"}),a.jsx("input",{type:"number",value:D.usage_limit,onChange:W=>U({...D,usage_limit:W.target.value}),className:"w-full p-2 border rounded-lg",placeholder:"اتركه فارغاً لعدم وجود حد"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ البداية"}),a.jsx("input",{type:"date",value:D.start_date,onChange:W=>U({...D,start_date:W.target.value}),className:"w-full p-2 border rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ الانتهاء"}),a.jsx("input",{type:"date",value:D.end_date,onChange:W=>U({...D,end_date:W.target.value}),className:"w-full p-2 border rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحالة"}),a.jsxs("select",{value:D.status,onChange:W=>U({...D,status:W.target.value}),className:"w-full p-2 border rounded-lg",children:[a.jsx("option",{value:"active",children:"نشط"}),a.jsx("option",{value:"inactive",children:"غير نشط"})]})]})]}),a.jsxs("div",{className:"flex justify-end mt-6 space-x-2",children:[a.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),a.jsx("button",{onClick:I,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",disabled:x,children:x?"جارٍ الحفظ...":"حفظ"})]})]})]})}),a.jsx(_e,{open:P,onClose:()=>M(!1),className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),a.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[a.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:T?"تعديل المستوى":"إضافة مستوى جديد"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم المستوى"}),a.jsx("input",{type:"text",value:(T==null?void 0:T.name)||"",onChange:W=>V({...T,name:W.target.value}),className:"w-full p-2 border rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الأيقونة"}),a.jsx("input",{type:"text",value:(T==null?void 0:T.icon)||"",onChange:W=>V({...T,icon:W.target.value}),className:"w-full p-2 border rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحد الأدنى للنقاط"}),a.jsx("input",{type:"number",value:(T==null?void 0:T.min_points)||"",onChange:W=>V({...T,min_points:parseInt(W.target.value)}),className:"w-full p-2 border rounded-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحد الأقصى للنقاط"}),a.jsx("input",{type:"number",value:(T==null?void 0:T.max_points)||"",onChange:W=>V({...T,max_points:parseInt(W.target.value)}),className:"w-full p-2 border rounded-lg",placeholder:"اتركه فارغاً لعدم وجود حد"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المميزات (كل سطر ميزة)"}),a.jsx("textarea",{value:((ve=T==null?void 0:T.benefits)==null?void 0:ve.join(`
`))||"",onChange:W=>V({...T,benefits:W.target.value.split(`
`)}),className:"w-full p-2 border rounded-lg",rows:5})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"لون الخلفية"}),a.jsxs("select",{value:(T==null?void 0:T.color)||"",onChange:W=>V({...T,color:W.target.value}),className:"w-full p-2 border rounded-lg",children:[a.jsx("option",{value:"bg-amber-100 text-amber-800",children:"برونزي"}),a.jsx("option",{value:"bg-gray-100 text-gray-800",children:"فضي"}),a.jsx("option",{value:"bg-yellow-100 text-yellow-800",children:"ذهبي"}),a.jsx("option",{value:"bg-purple-100 text-purple-800",children:"بلاتيني"})]})]})]}),a.jsxs("div",{className:"flex justify-end mt-6 space-x-2",children:[a.jsx("button",{onClick:()=>M(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),a.jsx("button",{onClick:X,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",disabled:x,children:x?"جارٍ الحفظ...":"حفظ"})]})]})]})})]})}function d8(){const[t,e]=w.useState([{id:1,name:"مكافأة إحالة المستخدم",description:"احصل على نقاط عند دعوة صديق",type:"user",points_reward:100,points_referrer:50,usage_limit:null,status:"active"},{id:2,name:"مكافأة إحالة المشاهير",description:"برنامج إحالة خاص للمشاهير",type:"influencer",points_reward:200,points_referrer:100,usage_limit:null,status:"active"}]),[n,r]=w.useState([{id:1,user_id:"123",code:"ABC123",type:"user",status:"active",usage_limit:10,used_count:5,points_reward:100,points_referrer:50,expires_at:"2025-12-31"},{id:2,user_id:"456",code:"INF789XYZ",type:"influencer",status:"active",usage_limit:100,used_count:45,points_reward:200,points_referrer:100,expires_at:"2025-12-31"}]),[s,i]=w.useState(!1),[o,l]=w.useState(!1),[d,u]=w.useState(null),[p,f]=w.useState(null),x={code:{type:"text",label:"كود الإحالة",placeholder:"البحث بكود الإحالة",value:""},type:{type:"select",label:"نوع الكود",placeholder:"جميع الأنواع",options:[{value:"user",label:"مستخدم"},{value:"influencer",label:"مشهور"}],value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"active",label:"نشط"},{value:"inactive",label:"غير نشط"}],value:""}},{filters:g,filterData:v,handleFilterChange:b}=Bn(x),j=async()=>{try{$.success(d?"تم تحديث المكافأة بنجاح":"تم إضافة المكافأة بنجاح"),i(!1),u(null)}catch{$.error("فشل في حفظ المكافأة")}},_=async()=>{try{$.success(p?"تم تحديث الكود بنجاح":"تم إضافة الكود بنجاح"),l(!1),f(null)}catch{$.error("فشل في حفظ الكود")}},N=async R=>{if(window.confirm("هل أنت متأكد من حذف هذا الكود؟"))try{$.success("تم حذف الكود بنجاح")}catch{$.error("فشل في حذف الكود")}},S=R=>{switch(R){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},P=R=>{switch(R){case"active":return"نشط";case"inactive":return"غير نشط";default:return R}},M=R=>{switch(R){case"user":return"مستخدم";case"influencer":return"مشهور";default:return R}},A=v(n);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"مكافآت الإحالة"}),a.jsx("button",{onClick:()=>{u(null),i(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة مكافأة جديدة"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(R=>a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-lg",children:R.name}),a.jsx("p",{className:"text-gray-600 text-sm",children:R.description})]}),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${S(R.status)}`,children:P(R.status)})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"نوع الإحالة:"})," ",M(R.type)]}),a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"نقاط المستخدم الجديد:"})," ",R.points_reward]}),a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"نقاط صاحب الإحالة:"})," ",R.points_referrer]}),R.usage_limit&&a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"الحد الأقصى للاستخدام:"})," ",R.usage_limit]})]}),a.jsx("div",{className:"flex justify-end mt-4",children:a.jsx("button",{onClick:()=>{u(R),i(!0)},className:"text-blue-600 hover:text-blue-800",children:"تعديل"})})]},R.id))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"أكواد الإحالة"}),a.jsx("button",{onClick:()=>{f(null),l(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إنشاء كود جديد"})]}),a.jsx(zn,{filters:g,onFilterChange:b}),a.jsx("div",{className:"mt-6 overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الكود"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"النوع"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الاستخدام"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"النقاط"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"تاريخ الانتهاء"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(R=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:R.code}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:M(R.type)}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[R.used_count,"/",R.usage_limit||"∞"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"text-sm",children:[a.jsxs("div",{children:["المستخدم: ",R.points_reward]}),a.jsxs("div",{children:["المُحيل: ",R.points_referrer]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.expires_at?new Date(R.expires_at).toLocaleDateString("ar-SA"):"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${S(R.status)}`,children:P(R.status)})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[a.jsx("button",{onClick:()=>{f(R),l(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),a.jsx("button",{onClick:()=>N(R.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},R.id))})]})})]}),a.jsx(_e,{open:s,onClose:()=>{i(!1),u(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),a.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[a.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:d?"تعديل مكافأة":"إضافة مكافأة جديدة"}),a.jsxs("form",{onSubmit:R=>{R.preventDefault(),j()},className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم المكافأة"}),a.jsx("input",{type:"text",className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),a.jsx("textarea",{className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع الإحالة"}),a.jsxs("select",{className:"w-full border rounded-md px-3 py-2",children:[a.jsx("option",{value:"user",children:"مستخدم"}),a.jsx("option",{value:"influencer",children:"مشهور"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نقاط المستخدم الجديد"}),a.jsx("input",{type:"number",className:"w-full border rounded-md px-3 py-2",min:"0",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نقاط صاحب الإحالة"}),a.jsx("input",{type:"number",className:"w-full border rounded-md px-3 py-2",min:"0",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأقصى للاستخدام"}),a.jsx("input",{type:"number",className:"w-full border rounded-md px-3 py-2",min:"0",placeholder:"اتركه فارغاً لعدم وجود حد"})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>{i(!1),u(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:d?"تحديث":"إضافة"})]})]})]})]})}),a.jsx(_e,{open:o,onClose:()=>{l(!1),f(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),a.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[a.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:p?"تعديل كود":"إنشاء كود جديد"}),a.jsxs("form",{onSubmit:R=>{R.preventDefault(),_()},className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع الكود"}),a.jsxs("select",{className:"w-full border rounded-md px-3 py-2",children:[a.jsx("option",{value:"user",children:"مستخدم"}),a.jsx("option",{value:"influencer",children:"مشهور"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأقصى للاستخدام"}),a.jsx("input",{type:"number",className:"w-full border rounded-md px-3 py-2",min:"0",placeholder:"اتركه فارغاً لعدم وجود حد"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ الانتهاء"}),a.jsx("input",{type:"date",className:"w-full border rounded-md px-3 py-2"})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>{l(!1),f(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:p?"تحديث":"إنشاء"})]})]})]})]})})]})}function u8(){const[t,e]=w.useState([{id:1,code:"WELCOME10",type:"percentage",value:10,min_order:50,max_discount:20,usage_limit:100,used_count:45,start_date:"2025-01-01",end_date:"2025-12-31",status:"active",description:"خصم 10% للطلب الأول"},{id:2,code:"FREEDEL",type:"fixed",value:15,min_order:100,usage_limit:50,used_count:20,start_date:"2025-01-01",end_date:"2025-06-30",status:"active",description:"توصيل مجاني"}]),[n,r]=w.useState(!1),[s,i]=w.useState(null),[o,l]=w.useState({code:"",type:"percentage",value:"",min_order:"",max_discount:"",usage_limit:"",start_date:"",end_date:"",description:""}),d={code:{type:"text",label:"كود الخصم",placeholder:"البحث بكود الخصم",value:""},type:{type:"select",label:"نوع الخصم",placeholder:"جميع الأنواع",options:[{value:"percentage",label:"نسبة مئوية"},{value:"fixed",label:"مبلغ ثابت"}],value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"active",label:"نشط"},{value:"inactive",label:"غير نشط"},{value:"expired",label:"منتهي"}],value:""}},{filters:u,filterData:p,handleFilterChange:f}=Bn(d),x=async _=>{_.preventDefault();try{$.success(s?"تم تحديث الكوبون بنجاح":"تم إضافة الكوبون بنجاح"),r(!1),i(null),l({code:"",type:"percentage",value:"",min_order:"",max_discount:"",usage_limit:"",start_date:"",end_date:"",description:""})}catch{$.error("فشل في حفظ الكوبون")}},g=async _=>{if(window.confirm("هل أنت متأكد من حذف هذا الكوبون؟"))try{$.success("تم حذف الكوبون بنجاح")}catch{$.error("فشل في حذف الكوبون")}},v=_=>{switch(_){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},b=_=>{switch(_){case"active":return"نشط";case"inactive":return"غير نشط";case"expired":return"منتهي";default:return _}},j=p(t);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"كوبونات الخصم"}),a.jsx("button",{onClick:()=>{i(null),r(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة كوبون جديد"})]}),a.jsx(zn,{filters:u,onFilterChange:f}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(_=>a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold",children:_.code}),a.jsx("p",{className:"text-gray-600 text-sm",children:_.description})]}),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${v(_.status)}`,children:b(_.status)})]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"نوع الخصم:"})," ",_.type==="percentage"?`${_.value}%`:`₪${_.value}`]}),a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"الحد الأدنى للطلب:"})," ₪",_.min_order]}),_.max_discount&&a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"أقصى خصم:"})," ₪",_.max_discount]}),a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"الاستخدام:"})," ",_.used_count,"/",_.usage_limit]}),a.jsxs("p",{className:"text-sm",children:[a.jsx("span",{className:"font-medium",children:"الصلاحية:"})," ",new Date(_.start_date).toLocaleDateString("ar-SA")," -"," ",new Date(_.end_date).toLocaleDateString("ar-SA")]})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{onClick:()=>{i(_),l(_),r(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),a.jsx("button",{onClick:()=>g(_.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},_.id))}),a.jsx(_e,{open:n,onClose:()=>{r(!1),i(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),a.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[a.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:s?"تعديل كوبون":"إضافة كوبون جديد"}),a.jsxs("form",{onSubmit:x,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"كود الخصم"}),a.jsx("input",{type:"text",value:o.code,onChange:_=>l({...o,code:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع الخصم"}),a.jsxs("select",{value:o.type,onChange:_=>l({...o,type:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[a.jsx("option",{value:"percentage",children:"نسبة مئوية"}),a.jsx("option",{value:"fixed",children:"مبلغ ثابت"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:o.type==="percentage"?"نسبة الخصم (%)":"قيمة الخصم (₪)"}),a.jsx("input",{type:"number",value:o.value,onChange:_=>l({...o,value:_.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:o.type==="percentage"?"1":"0.01",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأدنى للطلب (₪)"}),a.jsx("input",{type:"number",value:o.min_order,onChange:_=>l({...o,min_order:_.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01",required:!0})]}),o.type==="percentage"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"أقصى خصم (₪)"}),a.jsx("input",{type:"number",value:o.max_discount,onChange:_=>l({...o,max_discount:_.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأقصى للاستخدام"}),a.jsx("input",{type:"number",value:o.usage_limit,onChange:_=>l({...o,usage_limit:_.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ البداية"}),a.jsx("input",{type:"date",value:o.start_date,onChange:_=>l({...o,start_date:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ النهاية"}),a.jsx("input",{type:"date",value:o.end_date,onChange:_=>l({...o,end_date:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),a.jsx("textarea",{value:o.description,onChange:_=>l({...o,description:_.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>{r(!1),i(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:s?"تحديث":"إضافة"})]})]})]})]})})]})}function h8(){const[t,e]=w.useState([{id:1,name:"برونزي",description:"المستوى الأساسي للتجار",min_purchase_amount:5e3,discount_percentage:5,min_order_amount:500,benefits:["خصم 5% على جميع المنتجات","دعم أولوية للتجار","تقارير شهرية"],status:"active"},{id:2,name:"فضي",description:"المستوى المتوسط للتجار",min_purchase_amount:1e4,discount_percentage:10,min_order_amount:1e3,benefits:["خصم 10% على جميع المنتجات","دعم أولوية للتجار","تقارير أسبوعية","شحن مجاني للطلبات فوق 2000₪"],status:"active"},{id:3,name:"ذهبي",description:"المستوى المتقدم للتجار",min_purchase_amount:25e3,discount_percentage:15,min_order_amount:2e3,benefits:["خصم 15% على جميع المنتجات","دعم أولوية قصوى","تقارير يومية","شحن مجاني لجميع الطلبات","مدير حساب مخصص"],status:"active"},{id:4,name:"بلاتيني",description:"المستوى الأعلى للتجار",min_purchase_amount:5e4,discount_percentage:20,min_order_amount:5e3,benefits:["خصم 20% على جميع المنتجات","دعم على مدار الساعة","تقارير مخصصة","شحن مجاني وسريع لجميع الطلبات","مدير حساب مخصص","أسعار خاصة للمنتجات الجديدة"],status:"active"}]),[n,r]=w.useState([]),[s,i]=w.useState(!0),[o,l]=w.useState(null),[d,u]=w.useState(!1),[p,f]=w.useState(!1),[x,g]=w.useState(null),[v,b]=w.useState(null),[j,_]=w.useState({company_name:"",tier_id:"",tax_number:"",contact_name:"",contact_phone:"",contact_email:"",billing_address:"",shipping_address:"",status:"pending",notes:""}),[N,S]=w.useState({name:"",description:"",min_purchase_amount:"",discount_percentage:"",min_order_amount:"",benefits:[],status:"active"});w.useEffect(()=>{P()},[]);const P=async()=>{try{i(!0),l(null);const{data:C,error:q}=await ee.from("customer_wholesale_tiers").select(`
          customer_id,
          tier_id,
          status,
          approved_at,
          created_at,
          customer:customer_id(*),
          tier:tier_id(*)
        `);if(q)throw q;const I=C.map(K=>{var re,Q,se,le,ie,ge,ve,W,oe,he,Se,ae,ke,We,ht,Lt,Vt,Jt,_t,Tn;return{id:K.customer_id,company_name:((Q=(re=K.customer)==null?void 0:re.wholesale_info)==null?void 0:Q.company_name)||"شركة بدون اسم",tier_id:K.tier_id,tax_number:((le=(se=K.customer)==null?void 0:se.wholesale_info)==null?void 0:le.tax_number)||"",contact_name:(ie=K.customer)==null?void 0:ie.name,contact_phone:(ge=K.customer)==null?void 0:ge.phone,contact_email:((ve=K.customer)==null?void 0:ve.email)||"",total_purchases:((oe=(W=K.customer)==null?void 0:W.wholesale_info)==null?void 0:oe.total_purchases)||0,status:K.status,approval_date:K.approved_at,last_purchase_date:(Se=(he=K.customer)==null?void 0:he.wholesale_info)==null?void 0:Se.last_purchase_date,billing_address:((ke=(ae=K.customer)==null?void 0:ae.wholesale_info)==null?void 0:ke.billing_address)||((We=K.customer)==null?void 0:We.address)||"",shipping_address:((Lt=(ht=K.customer)==null?void 0:ht.wholesale_info)==null?void 0:Lt.shipping_address)||((Vt=K.customer)==null?void 0:Vt.address)||"",notes:((_t=(Jt=K.customer)==null?void 0:Jt.wholesale_info)==null?void 0:_t.notes)||((Tn=K.customer)==null?void 0:Tn.notes)||"",tier:K.tier}});r(I);const{data:X,error:E}=await ee.from("wholesale_tiers").select("*").order("min_purchase_amount",{ascending:!0});E?console.error("Error fetching tiers:",E):X&&X.length>0&&e(X)}catch(C){console.error("Error fetching data:",C),l("فشل في تحميل البيانات. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل البيانات")}finally{i(!1)}},M={company_name:{type:"text",label:"اسم الشركة",placeholder:"البحث باسم الشركة",value:""},tier_id:{type:"select",label:"المستوى",placeholder:"جميع المستويات",options:t.map(C=>({value:C.id,label:C.name})),value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"pending",label:"قيد المراجعة"},{value:"approved",label:"معتمد"},{value:"rejected",label:"مرفوض"}],value:""}},{filters:A,filterData:R,handleFilterChange:T}=Bn(M),V=async C=>{C.preventDefault();try{if(!j.company_name||!j.tier_id||!j.tax_number){$.error("الرجاء تعبئة جميع الحقول المطلوبة");return}if(x){const{error:q}=await ee.from("customers").update({name:j.contact_name,phone:j.contact_phone,email:j.contact_email,address:j.shipping_address,notes:j.notes,wholesale_info:{company_name:j.company_name,tax_number:j.tax_number,billing_address:j.billing_address,shipping_address:j.shipping_address},updated_at:new Date().toISOString()}).eq("id",x.id);if(q)throw q;const{error:I}=await ee.rpc("convert_to_wholesale_customer",{p_customer_id:x.id,p_tier_id:j.tier_id,p_status:j.status});if(I)throw I;$.success("تم تحديث العميل بنجاح")}else{const{data:q,error:I}=await ee.from("customers").insert([{name:j.contact_name,phone:j.contact_phone,email:j.contact_email,address:j.shipping_address,notes:j.notes,wholesale_info:{company_name:j.company_name,tax_number:j.tax_number,billing_address:j.billing_address,shipping_address:j.shipping_address}}]).select();if(I)throw I;const{error:X}=await ee.rpc("convert_to_wholesale_customer",{p_customer_id:q[0].id,p_tier_id:j.tier_id,p_status:j.status});if(X)throw X;$.success("تم إضافة العميل بنجاح")}P(),u(!1),g(null),_({company_name:"",tier_id:"",tax_number:"",contact_name:"",contact_phone:"",contact_email:"",billing_address:"",shipping_address:"",status:"pending",notes:""})}catch(q){console.error("Error saving customer:",q),$.error(x?"فشل تحديث العميل":"فشل إضافة العميل")}},D=async C=>{C.preventDefault();try{if(!N.name||!N.min_purchase_amount||!N.discount_percentage){$.error("الرجاء تعبئة جميع الحقول المطلوبة");return}const q={name:N.name,description:N.description,min_purchase_amount:parseFloat(N.min_purchase_amount),discount_percentage:parseFloat(N.discount_percentage),min_order_amount:parseFloat(N.min_order_amount)||0,benefits:N.benefits,status:N.status};if(v){const{error:I}=await ee.from("wholesale_tiers").update(q).eq("id",v.id);if(I)throw I;$.success("تم تحديث المستوى بنجاح")}else{const{error:I}=await ee.from("wholesale_tiers").insert([q]);if(I)throw I;$.success("تم إضافة المستوى بنجاح")}P(),f(!1),b(null),S({name:"",description:"",min_purchase_amount:"",discount_percentage:"",min_order_amount:"",benefits:[],status:"active"})}catch(q){console.error("Error saving tier:",q),$.error(v?"فشل تحديث المستوى":"فشل إضافة المستوى")}},U=async(C,q)=>{try{const{error:I}=await ee.rpc("update_wholesale_customer_status",{p_customer_id:C,p_status:q});if(I)throw I;r(n.map(X=>X.id===C?{...X,status:q,approval_date:q==="approved"?new Date().toISOString():X.approval_date}:X)),$.success("تم تحديث حالة العميل بنجاح")}catch(I){console.error("Error updating customer status:",I),$.error("فشل في تحديث حالة العميل")}},te=async C=>{if(window.confirm("هل أنت متأكد من حذف هذا العميل؟"))try{const{error:q}=await ee.from("customer_wholesale_tiers").delete().eq("customer_id",C);if(q)throw q;const{error:I}=await ee.from("customers").update({wholesale_info:null,updated_at:new Date().toISOString()}).eq("id",C);if(I)throw I;r(n.filter(X=>X.id!==C)),$.success("تم حذف العميل بنجاح")}catch(q){console.error("Error deleting customer:",q),$.error("فشل في حذف العميل")}},G=C=>{switch(C){case"approved":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},B=C=>{const q=t.find(I=>I.id===C);switch(q==null?void 0:q.name){case"برونزي":return"bg-amber-100 text-amber-800";case"فضي":return"bg-gray-100 text-gray-800";case"ذهبي":return"bg-yellow-100 text-yellow-800";case"بلاتيني":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},Z=R(n);return s?a.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o?a.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),a.jsx("p",{children:o}),a.jsx("button",{onClick:P,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"عملاء الجملة"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{b(null),S({name:"",description:"",min_purchase_amount:"",discount_percentage:"",min_order_amount:"",benefits:[],status:"active"}),f(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة مستوى"}),a.jsx("button",{onClick:()=>{g(null),_({company_name:"",tier_id:"",tax_number:"",contact_name:"",contact_phone:"",contact_email:"",billing_address:"",shipping_address:"",status:"pending",notes:""}),u(!0)},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"إضافة عميل"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"مستويات العملاء"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:t.map(C=>a.jsxs("div",{className:`rounded-lg p-6 ${B(C.id)}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold",children:C.name}),a.jsx("p",{className:"text-sm mt-1",children:C.description})]}),C.status==="active"?a.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"نشط"}):a.jsx("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded-full",children:"غير نشط"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"الحد الأدنى للمشتريات السنوية"}),a.jsxs("p",{className:"text-lg font-bold",children:["₪",C.min_purchase_amount.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"نسبة الخصم"}),a.jsxs("p",{className:"text-lg font-bold",children:[C.discount_percentage,"%"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"الحد الأدنى للطلب"}),a.jsxs("p",{className:"text-lg font-bold",children:["₪",C.min_order_amount.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"المميزات"}),a.jsx("ul",{className:"mt-1 space-y-1",children:C.benefits.map((q,I)=>a.jsxs("li",{className:"text-sm",children:["• ",q]},I))})]})]}),a.jsx("div",{className:"mt-4 flex justify-end",children:a.jsx("button",{onClick:()=>{b(C),S({name:C.name,description:C.description,min_purchase_amount:C.min_purchase_amount,discount_percentage:C.discount_percentage,min_order_amount:C.min_order_amount,benefits:C.benefits,status:C.status}),f(!0)},className:"text-blue-600 hover:text-blue-800",children:"تعديل"})})]},C.id))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"قائمة العملاء"}),a.jsx(zn,{filters:A,onFilterChange:T}),a.jsx("div",{className:"mt-6 overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الشركة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المستوى"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"معلومات الاتصال"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"إجمالي المشتريات"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"آخر طلب"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Z.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"لا يوجد عملاء جملة متطابقين مع معايير البحث"})}):Z.map(C=>{var q;return a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:C.company_name}),a.jsxs("div",{className:"text-sm text-gray-500",children:["رقم ضريبي: ",C.tax_number]})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`px-2 py-1 text-sm rounded-full ${B(C.tier_id)}`,children:((q=C.tier)==null?void 0:q.name)||"غير محدد"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{children:C.contact_name}),a.jsx("div",{className:"text-gray-500",children:C.contact_phone}),a.jsx("div",{className:"text-gray-500",children:C.contact_email})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm",children:a.jsxs("div",{className:"font-medium",children:["₪",C.total_purchases.toLocaleString()]})})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:C.last_purchase_date?new Date(C.last_purchase_date).toLocaleDateString("ar-SA"):"-"}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("select",{value:C.status,onChange:I=>U(C.id,I.target.value),className:`px-2 py-1 text-sm rounded-full ${G(C.status)}`,children:[a.jsx("option",{value:"pending",children:"قيد المراجعة"}),a.jsx("option",{value:"approved",children:"معتمد"}),a.jsx("option",{value:"rejected",children:"مرفوض"})]})}),a.jsxs("td",{className:"px-6 py-4 text-sm font-medium",children:[a.jsx("button",{onClick:()=>{g(C),_({company_name:C.company_name,tier_id:C.tier_id,tax_number:C.tax_number,contact_name:C.contact_name,contact_phone:C.contact_phone,contact_email:C.contact_email,billing_address:C.billing_address,shipping_address:C.shipping_address,status:C.status,notes:C.notes}),u(!0)},className:"text-blue-600 hover:text-blue-800 ml-4",children:"تعديل"}),a.jsx("button",{onClick:()=>te(C.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},C.id)})})]})})]}),a.jsx(_e,{open:d,onClose:()=>{u(!1),g(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),a.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-2xl w-full mx-4",children:[a.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:x?"تعديل عميل":"إضافة عميل جديد"}),a.jsxs("form",{onSubmit:V,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم الشركة ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"text",value:j.company_name,onChange:C=>_({...j,company_name:C.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الرقم الضريبي ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"text",value:j.tax_number,onChange:C=>_({...j,tax_number:C.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["المستوى ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsxs("select",{value:j.tier_id,onChange:C=>_({...j,tier_id:C.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[a.jsx("option",{value:"",children:"اختر المستوى"}),t.map(C=>a.jsx("option",{value:C.id,children:C.name},C.id))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم جهة الاتصال ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"text",value:j.contact_name,onChange:C=>_({...j,contact_name:C.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["رقم الهاتف ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"tel",value:j.contact_phone,onChange:C=>_({...j,contact_phone:C.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),a.jsx("input",{type:"email",value:j.contact_email,onChange:C=>_({...j,contact_email:C.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"عنوان الفواتير"}),a.jsx("textarea",{value:j.billing_address,onChange:C=>_({...j,billing_address:C.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"2"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"عنوان الشحن"}),a.jsx("textarea",{value:j.shipping_address,onChange:C=>_({...j,shipping_address:C.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"2"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ملاحظات"}),a.jsx("textarea",{value:j.notes,onChange:C=>_({...j,notes:C.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحالة"}),a.jsxs("select",{value:j.status,onChange:C=>_({...j,status:C.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[a.jsx("option",{value:"pending",children:"قيد المراجعة"}),a.jsx("option",{value:"approved",children:"معتمد"}),a.jsx("option",{value:"rejected",children:"مرفوض"})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{u(!1),g(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:x?"تحديث":"إضافة"})]})]})]})]})}),a.jsx(_e,{open:p,onClose:()=>{f(!1),b(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),a.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-2xl w-full mx-4",children:[a.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:v?"تعديل مستوى":"إضافة مستوى جديد"}),a.jsxs("form",{onSubmit:D,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم المستوى ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"text",value:N.name,onChange:C=>S({...N,name:C.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),a.jsx("textarea",{value:N.description,onChange:C=>S({...N,description:C.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"2"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الحد الأدنى للمشتريات السنوية (₪) ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"number",value:N.min_purchase_amount,onChange:C=>S({...N,min_purchase_amount:C.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نسبة الخصم (%) ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"number",value:N.discount_percentage,onChange:C=>S({...N,discount_percentage:C.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",max:"100",step:"0.01",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الحد الأدنى للطلب (₪) ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"number",value:N.min_order_amount,onChange:C=>S({...N,min_order_amount:C.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحالة"}),a.jsxs("select",{value:N.status,onChange:C=>S({...N,status:C.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[a.jsx("option",{value:"active",children:"نشط"}),a.jsx("option",{value:"inactive",children:"غير نشط"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المميزات"}),a.jsxs("div",{className:"space-y-2",children:[N.benefits.map((C,q)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:C,onChange:I=>{const X=[...N.benefits];X[q]=I.target.value,S({...N,benefits:X})},className:"flex-1 border rounded-md px-3 py-2"}),a.jsx("button",{type:"button",onClick:()=>{const I=N.benefits.filter((X,E)=>E!==q);S({...N,benefits:I})},className:"text-red-600 hover:text-red-800",children:"حذف"})]},q)),a.jsx("button",{type:"button",onClick:()=>S({...N,benefits:[...N.benefits,""]}),className:"text-blue-600 hover:text-blue-800 text-sm",children:"إضافة ميزة"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{f(!1),b(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:v?"تحديث":"إضافة"})]})]})]})]})})]})}function p8(){const[t,e]=w.useState(!1),[n,r]=w.useState([]),[s,i]=w.useState({deliveryCommission:15,autoDeductFromDriver:!0,autoChargeVendor:!0,wallet:{enabled:!0,name:"توصيل محفظة (الدفع المسبق)",description:"عند تفعيل هذا الخيار، يتم التعامل مع الطلبات المدفوعة مسبقًا (عبر المحفظة أو الدفع الإلكتروني)",steps:["يُعتبر التوصيل في هذه الحالة مدفوعًا مسبقًا","يتم شحن محفظة البائع بالكامل بقيمة الطلب + التوصيل","يتم خصم نفس القيمة من محفظة السائق تلقائيًا","السائق يستلم من الزبون فقط أجرة التوصيل يدًا بيد"],note:"✅ هذا النظام مناسب لتطبيقات الدفع المسبق والطلبات التي تُدفع أونلاين"},traditional:{enabled:!0,name:"المحفظة التقليدية (الدفع عند الاستلام)",description:"في هذا النظام، يتم تقسيم المبلغ مباشرة عند التسليم",steps:["الزبون يدفع كامل المبلغ (الطلب + التوصيل) للسائق","يتم تحويل قيمة الطلب إلى محفظة البائع","ويتم إضافة قيمة التوصيل إلى محفظة السائق"],note:"✅ هذا الخيار مناسب للطلبات التي يتم دفعها نقدًا عند التسليم"},cash:{enabled:!0,name:"الدفع عند الاستلام",description:"الدفع نقداً عند استلام الطلب",steps:["الزبون يطلب من المتجر","السائق يستلم الطلب من المتجر","السائق يوصل الطلب للزبون","الزبون يدفع المبلغ كاملاً (قيمة الطلب + التوصيل) للسائق"],balanceNotes:["رصيد البائع = 0 (حتى يتم التحصيل)","رصيد السائق = 0 (حتى يتم التحصيل)"],icon:"💰",color:"green"},electronic:{enabled:!0,name:"الدفع الإلكتروني",description:"الدفع المسبق عبر بطاقة الائتمان أو المحفظة الإلكترونية",steps:["الزبون يدفع كامل المبلغ إلكترونياً (قيمة الطلب + التوصيل)","البائع يستلم قيمة الطلب مباشرة","السائق يستلم قيمة التوصيل مباشرة","السائق يوصل الطلب للزبون"],balanceNotes:["رصيد البائع = قيمة الطلب (فوراً)","رصيد السائق = قيمة التوصيل (فوراً)"],icon:"💳",color:"blue"}});w.useEffect(()=>{(async()=>{try{const{data:p,error:f}=await ee.from("payment_methods").select("*").eq("status","active").order("id");if(f)throw f;r(p||[])}catch(p){console.error("Error fetching payment methods:",p),$.error("فشل في تحميل طرق الدفع")}})()},[]),w.useEffect(()=>{(async()=>{try{e(!0);const p=await wk();p&&p.wallet&&i(p)}catch(p){console.error("Error loading wallet settings:",p),$.error("فشل في تحميل إعدادات المحفظة")}finally{e(!1)}})()},[]);const o=async()=>{try{e(!0);const u={...s};await jk(u),$.success("تم حفظ إعدادات المحفظة بنجاح")}catch(u){console.error("Error saving wallet settings:",u),$.error("فشل في حفظ إعدادات المحفظة")}finally{e(!1)}},l=async(u,p)=>{try{e(!0);const{error:f}=await ee.from("payment_methods").update(p).eq("id",u);if(f)throw f;$.success("تم تحديث طريقة الدفع بنجاح"),r(x=>x.map(g=>g.id===u?{...g,...p}:g))}catch(f){console.error("Error updating payment method:",f),$.error("فشل في تحديث طريقة الدفع")}finally{e(!1)}},d=({method:u})=>{var p,f;return a.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-lg shadow-md p-6 border border-gray-100",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`p-2 rounded-full ${u.type==="wallet"?"bg-purple-100 text-purple-600":u.type==="electronic"?"bg-blue-100 text-blue-600":"bg-green-100 text-green-600"}`,children:u.icon||(u.type==="wallet"?"👛":u.type==="electronic"?"💳":"💰")}),a.jsx("h3",{className:"text-xl font-bold",children:u.name||"طريقة دفع"})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:u.status==="active",onChange:x=>l(u.id,{status:x.target.checked?"active":"inactive"}),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-100",children:a.jsx("p",{className:"text-gray-600",children:u.description||"لا يوجد وصف"})}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[a.jsx("span",{className:"text-blue-600",children:"📝"}),"خطوات العمل"]}),a.jsxs("div",{className:"space-y-2",children:[(((p=u.settings)==null?void 0:p.steps)||[]).map((x,g)=>a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:x,onChange:v=>{var j;const b=[...((j=u.settings)==null?void 0:j.steps)||[]];b[g]=v.target.value,l(u.id,{settings:{...u.settings,steps:b}})},className:"flex-1 border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"}),a.jsx("button",{onClick:()=>{var b;const v=(((b=u.settings)==null?void 0:b.steps)||[]).filter((j,_)=>_!==g);l(u.id,{settings:{...u.settings,steps:v}})},className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:"✕"})]},g)),a.jsxs("button",{onClick:()=>{var g;const x=[...((g=u.settings)==null?void 0:g.steps)||[],""];l(u.id,{settings:{...u.settings,steps:x}})},className:"text-blue-600 hover:text-blue-800 text-sm flex items-center gap-1 px-3 py-2 rounded-lg hover:bg-blue-50 transition-colors",children:[a.jsx("span",{children:"+"}),"إضافة خطوة"]})]})]}),((f=u.settings)==null?void 0:f.note)&&a.jsx("div",{className:`p-4 rounded-lg ${u.type==="wallet"?"bg-purple-50 text-purple-800":u.type==="electronic"?"bg-blue-50 text-blue-800":"bg-green-50 text-green-800"}`,children:a.jsx("p",{children:u.settings.note})})]})]})};return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:"⚙️"}),a.jsx("h2",{className:"text-2xl font-bold",children:"إعدادات طرق الدفع"})]}),a.jsxs("button",{onClick:o,disabled:t,className:`bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 ${t?"opacity-70 cursor-not-allowed":""}`,children:[a.jsx("span",{children:"💾"}),t?"جاري الحفظ...":"حفظ التغييرات"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-lg shadow-md p-6 border border-gray-100",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-full",children:"💰"}),a.jsx("h3",{className:"text-xl font-bold",children:"إعدادات العمولة والخصومات"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-100",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نسبة عمولة البائع (%)"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",value:s.deliveryCommission,onChange:u=>i({...s,deliveryCommission:Number(u.target.value)}),className:"w-32 border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",min:"0",max:"100"}),a.jsx("span",{className:"text-gray-600",children:"%"})]})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-100 space-y-3",children:[a.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg transition-colors cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:s.autoDeductFromDriver,onChange:u=>i({...s,autoDeductFromDriver:u.target.checked}),className:"rounded text-blue-600 focus:ring-blue-500 w-5 h-5"}),a.jsx("span",{children:"خصم تلقائي من السائق (الدفع المسبق)"})]}),a.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg transition-colors cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:s.autoChargeVendor,onChange:u=>i({...s,autoChargeVendor:u.target.checked}),className:"rounded text-blue-600 focus:ring-blue-500 w-5 h-5"}),a.jsx("span",{children:"شحن محفظة البائع تلقائيًا"})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-lg",children:[a.jsxs("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[a.jsx("span",{children:"🧪"}),"مثال توضيحي"]}),a.jsx("p",{className:"text-gray-600 mb-4",children:"الطلب: 70 شيكل (60 للمنتج + 10 توصيل)"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("p",{className:"text-blue-600 bg-white px-4 py-2 rounded-lg shadow-sm",children:["🔹 عمولة البائع = ",s.deliveryCommission,"% من 60 شيكل = ",(60*s.deliveryCommission/100).toFixed(2)," شيكل"]}),a.jsxs("p",{className:"text-red-600 bg-white px-4 py-2 rounded-lg shadow-sm",children:["🔹 عمولة السائق = ",s.deliveryCommission,"% من 10 شيكل = ",(10*s.deliveryCommission/100).toFixed(2)," شيكل"]}),a.jsxs("p",{className:"text-green-600 bg-white px-4 py-2 rounded-lg shadow-sm",children:["🔹 إجمالي العمولة للنظام = ",(60*s.deliveryCommission/100+10*s.deliveryCommission/100).toFixed(2)," شيكل"]})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-8 mt-8",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"طرق الدفع المتاحة"}),n.length===0?a.jsx("div",{className:"bg-white p-8 rounded-lg shadow-md text-center",children:a.jsx("p",{className:"text-gray-500",children:"لا توجد طرق دفع متاحة"})}):n.map(u=>a.jsx(d,{method:u},u.id))]})]})}function f8(){const[t,e]=w.useState("settings"),[n,r]=w.useState([]),[s,i]=w.useState(!1),[o,l]=w.useState(null);w.useEffect(()=>{t==="transactions"&&d()},[t]);const d=async()=>{try{i(!0),l(null);const{data:g,error:v}=await ee.from("wallets").select("id");if(v)throw v;if(g&&g.length>0){const b=g.map(N=>N.id),{data:j,error:_}=await ee.from("wallet_transactions").select(`
            *,
            wallet:wallet_id(user_id),
            order:order_id(*)
          `).in("wallet_id",b).order("created_at",{ascending:!1}).limit(100);if(_)throw _;r(j||[])}else r([{id:1,amount:150,type:"credit",payment_type:"electronic",status:"completed",description:"دفع إلكتروني للطلب #123",created_at:new Date().toISOString(),order:{id:123,total:150}},{id:2,amount:200,type:"credit",payment_type:"cash",status:"completed",description:"دفع نقدي للطلب #124",created_at:new Date(Date.now()-864e5).toISOString(),order:{id:124,total:200}},{id:3,amount:500,type:"debit",payment_type:"withdrawal",status:"pending",description:"طلب سحب رصيد",created_at:new Date(Date.now()-1728e5).toISOString()}])}catch(g){console.error("Error fetching transactions:",g),l("فشل في تحميل المعاملات. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل المعاملات")}finally{i(!1)}},u=(g,v)=>g==="credit"?v==="electronic"?"دفع إلكتروني":v==="cash"?"دفع نقدي":v==="wallet"?"دفع من المحفظة":"إيداع":v==="withdrawal"?"سحب رصيد":v==="commission"?"عمولة":"خصم",p=g=>g==="credit"?"text-green-600":"text-red-600",f=g=>{switch(g){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},x=g=>{switch(g){case"completed":return"مكتمل";case"pending":return"معلق";case"failed":return"فشل";default:return g}};return a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[a.jsx("div",{className:"border-b",children:a.jsxs("nav",{className:"flex space-x-4 px-6","aria-label":"Tabs",children:[a.jsx("button",{onClick:()=>e("settings"),className:`py-4 px-4 text-sm font-medium border-b-2 -mb-px ${t==="settings"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"إعدادات طرق الدفع"}),a.jsx("button",{onClick:()=>e("transactions"),className:`py-4 px-4 text-sm font-medium border-b-2 -mb-px ${t==="transactions"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"سجل المعاملات"})]})}),a.jsxs("div",{className:"p-6",children:[t==="settings"&&a.jsx(p8,{}),t==="transactions"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold mb-6",children:"سجل المعاملات"}),s?a.jsx("div",{className:"flex justify-center items-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o?a.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"خطأ"}),a.jsx("p",{children:o}),a.jsx("button",{onClick:d,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):n.length===0?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-gray-500",children:"لا توجد معاملات"})}):a.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التاريخ"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الوصف"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"رقم الطلب"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"النوع"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المبلغ"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(g=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(g.created_at).toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.description}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g.order?`#${g.order.id}`:"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsx("span",{className:p(g.type),children:u(g.type,g.payment_type)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("span",{className:p(g.type),children:[g.type==="credit"?"+":"-","₪",Math.abs(g.amount)]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${f(g.status)}`,children:x(g.status)})})]},g.id))})]})})})]})]})]})})}const m8=async(t,e=null)=>{try{const{data:n,error:r}=await ee.rpc("get_ratings_by_type",{p_type:t,p_id:e});if(r)throw r;return n||[]}catch(n){throw console.error("Error fetching ratings:",n),n}},g8=async(t,e=null)=>{try{const{data:n,error:r}=await ee.rpc("get_ratings_stats",{p_type:t,p_id:e});if(r)throw r;return n||{average:0,total:0,distribution:{}}}catch(n){throw console.error("Error fetching ratings stats:",n),n}},x8=async t=>{try{if(!t.order_id||!t.from_type||!t.from_id||!t.to_type||!t.to_id||!t.rating)throw new Error("جميع الحقول المطلوبة غير متوفرة");if(!["customer","vendor","driver"].includes(t.from_type)||!["customer","vendor","driver"].includes(t.to_type))throw new Error("نوع المرسل أو المستقبل غير صالح");if(t.rating<1||t.rating>5)throw new Error("التقييم يجب أن يكون بين 1 و 5");const{data:e,error:n}=await ee.from("ratings").insert([{order_id:t.order_id,from_type:t.from_type,from_id:t.from_id,to_type:t.to_type,to_id:t.to_id,rating:t.rating,comment:t.comment}]).select();if(n)throw n;return e[0]}catch(e){throw console.error("Error adding rating:",e),e}},v8=async(t,e)=>{try{const{data:n,error:r}=await ee.rpc("get_ratings_report",{p_type:t,p_year:e});if(r)throw r;return n||[]}catch(n){throw console.error("Error fetching ratings report:",n),n}};function Qa({rating:t,size:e="md",interactive:n=!1,onChange:r}){const s=(i,o)=>{const l={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};return a.jsx("button",{onClick:()=>n&&(r==null?void 0:r(o+1)),className:`${n?"cursor-pointer":"cursor-default"}`,disabled:!n,type:"button",children:a.jsx("svg",{className:`${l[e]} ${i?"text-yellow-400 fill-yellow-400":"text-gray-300"} transition-colors`,fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},o)};return a.jsx("div",{className:"flex items-center space-x-1",children:[...Array(5)].map((i,o)=>s(o<t,o))})}function y8({orderId:t,driverId:e,customerId:n,onComplete:r}){const[s,i]=w.useState(5),[o,l]=w.useState(""),[d,u]=w.useState(!1),[p,f]=w.useState(!1),x=async g=>{g.preventDefault(),u(!0);try{await x8({order_id:t,from_type:"driver",from_id:e,to_type:"customer",to_id:n,rating:s,comment:o}),$.success("تم إرسال تقييم الزبون بنجاح"),f(!0),r==null||r()}catch(v){console.error("خطأ في إرسال التقييم:",v),$.error("فشل في إرسال تقييم الزبون")}finally{u(!1)}};return p?a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[a.jsx("div",{className:"text-green-600 text-xl mb-2",children:"✓"}),a.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"تم إرسال التقييم بنجاح"}),a.jsx("p",{className:"text-green-700",children:"شكراً لك على تقييم الزبون"})]}):a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"تقييم الزبون"}),a.jsxs("form",{onSubmit:x,children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-gray-700 mb-2",children:"التقييم"}),a.jsx("div",{className:"flex justify-center",children:a.jsx(Qa,{rating:s,size:"lg",interactive:!0,onChange:i})})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-gray-700 mb-2",children:"ملاحظات (اختياري)"}),a.jsx("textarea",{value:o,onChange:g=>l(g.target.value),className:"w-full border rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"أضف ملاحظاتك حول الزبون هنا..."})]}),a.jsx("button",{type:"submit",disabled:d,className:`w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors ${d?"opacity-50 cursor-not-allowed":""}`,children:d?"جاري الإرسال...":"إرسال التقييم"})]})]})}function tm({type:t="vendor"}){const[e,n]=w.useState([]),[r,s]=w.useState({average:0,total:0,distribution:{}}),[i,o]=w.useState(!0),[l,d]=w.useState(null),[u,p]=w.useState("grid");w.useEffect(()=>{f()},[t]);const f=async()=>{try{o(!0),d(null);const _=await m8(t);n(_||[]);const N=await g8(t);s(N||{average:0,total:0,distribution:{}})}catch(_){console.error("Error fetching ratings data:",_),d("فشل في تحميل بيانات التقييمات. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل بيانات التقييمات")}finally{o(!1)}},x=async _=>{if(window.confirm("هل أنت متأكد من حذف هذا التقييم؟"))try{const{error:N}=await supabase.from("ratings").delete().eq("id",_);if(N)throw N;$.success("تم حذف التقييم بنجاح"),f()}catch(N){console.error("Error deleting rating:",N),$.error("فشل في حذف التقييم")}},g=_=>r.total>0?_/r.total*100:0,v=_=>new Date(_).toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"col-span-1 flex flex-col items-center justify-center",children:[a.jsx("div",{className:"text-5xl font-bold text-yellow-500",children:r.average.toFixed(1)}),a.jsx("div",{className:"mt-2",children:a.jsx(Qa,{rating:r.average})}),a.jsxs("div",{className:"text-gray-500 mt-2",children:["من ",r.total," تقييم"]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"توزيع التقييمات"}),a.jsx("div",{className:"space-y-3",children:[5,4,3,2,1].map(_=>a.jsxs("div",{className:"flex items-center",children:[a.jsxs("div",{className:"w-12 text-sm text-gray-600",children:[_," نجوم"]}),a.jsx("div",{className:"flex-1 mx-4",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:a.jsx("div",{className:"bg-yellow-500 h-2.5 rounded-full",style:{width:`${g(r.distribution[_]||0)}%`}})})}),a.jsxs("div",{className:"w-12 text-sm text-gray-600",children:[r.distribution[_]||0," (",g(r.distribution[_]||0).toFixed(0),"%)"]})]},_))})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(_=>a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold",children:[t==="vendor"?"متجر":t==="driver"?"سائق":"زبون",_.to_name&&`: ${_.to_name}`]}),a.jsxs("p",{className:"text-gray-500 text-sm",children:["تقييم من ",_.from_name||"مستخدم"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Qa,{rating:_.rating}),a.jsx("span",{className:"text-lg font-semibold",children:_.rating})]})]}),_.comment&&a.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:a.jsx("p",{className:"text-gray-700",children:_.comment})}),a.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-500",children:v(_.created_at)}),a.jsx("button",{onClick:()=>x(_.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},_.id))})]}),j=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"col-span-1 flex flex-col items-center justify-center",children:[a.jsx("div",{className:"text-5xl font-bold text-yellow-500",children:r.average.toFixed(1)}),a.jsx("div",{className:"mt-2",children:a.jsx(Qa,{rating:r.average})}),a.jsxs("div",{className:"text-gray-500 mt-2",children:["من ",r.total," تقييم"]})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"توزيع التقييمات"}),a.jsx("div",{className:"space-y-3",children:[5,4,3,2,1].map(_=>a.jsxs("div",{className:"flex items-center",children:[a.jsxs("div",{className:"w-12 text-sm text-gray-600",children:[_," نجوم"]}),a.jsx("div",{className:"flex-1 mx-4",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:a.jsx("div",{className:"bg-yellow-500 h-2.5 rounded-full",style:{width:`${g(r.distribution[_]||0)}%`}})})}),a.jsxs("div",{className:"w-12 text-sm text-gray-600",children:[r.distribution[_]||0," (",g(r.distribution[_]||0).toFixed(0),"%)"]})]},_))})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:t==="vendor"?"المتجر":t==="driver"?"السائق":"الزبون"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المقيم"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التقييم"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التعليق"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التاريخ"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(_=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.to_name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.from_name}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Qa,{rating:_.rating}),a.jsx("span",{className:"ml-2",children:_.rating})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"max-w-xs truncate",children:_.comment||"-"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:v(_.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsx("button",{onClick:()=>x(_.id),className:"text-red-600 hover:text-red-800",children:"حذف"})})]},_.id))})]})})})]});return i?a.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):l?a.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),a.jsx("p",{children:l}),a.jsx("button",{onClick:f,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:t==="vendor"?"تقييمات البائعين":t==="driver"?"تقييمات السائقين":"تقييمات الزبائن"}),a.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>p("grid"),className:`px-4 py-2 rounded-lg transition-colors ${u==="grid"?"bg-white shadow text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"عرض شبكي"}),a.jsx("button",{onClick:()=>p("table"),className:`px-4 py-2 rounded-lg transition-colors ${u==="table"?"bg-white shadow text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"عرض جدول"})]})]}),u==="grid"?b():j()]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Xc(t){return t+.5|0}const Vs=(t,e,n)=>Math.max(Math.min(t,n),e);function Ol(t){return Vs(Xc(t*2.55),0,255)}function ri(t){return Vs(Xc(t*255),0,255)}function os(t){return Vs(Xc(t/2.55)/100,0,1)}function C_(t){return Vs(Xc(t*100),0,100)}const Yn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Yg=[..."0123456789ABCDEF"],b8=t=>Yg[t&15],_8=t=>Yg[(t&240)>>4]+Yg[t&15],Kd=t=>(t&240)>>4===(t&15),w8=t=>Kd(t.r)&&Kd(t.g)&&Kd(t.b)&&Kd(t.a);function j8(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Yn[t[1]]*17,g:255&Yn[t[2]]*17,b:255&Yn[t[3]]*17,a:e===5?Yn[t[4]]*17:255}:(e===7||e===9)&&(n={r:Yn[t[1]]<<4|Yn[t[2]],g:Yn[t[3]]<<4|Yn[t[4]],b:Yn[t[5]]<<4|Yn[t[6]],a:e===9?Yn[t[7]]<<4|Yn[t[8]]:255})),n}const N8=(t,e)=>t<255?e(t):"";function k8(t){var e=w8(t)?b8:_8;return t?"#"+e(t.r)+e(t.g)+e(t.b)+N8(t.a,e):void 0}const S8=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Nk(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function C8(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function E8(t,e,n){const r=Nk(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function T8(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function kv(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),l=(i+o)/2;let d,u,p;return i!==o&&(p=i-o,u=l>.5?p/(2-i-o):p/(i+o),d=T8(n,r,s,p,i),d=d*60+.5),[d|0,u||0,l]}function Sv(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(ri)}function Cv(t,e,n){return Sv(Nk,t,e,n)}function P8(t,e,n){return Sv(E8,t,e,n)}function D8(t,e,n){return Sv(C8,t,e,n)}function kk(t){return(t%360+360)%360}function O8(t){const e=S8.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Ol(+e[5]):ri(+e[5]));const s=kk(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=P8(s,i,o):e[1]==="hsv"?r=D8(s,i,o):r=Cv(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function M8(t,e){var n=kv(t);n[0]=kk(n[0]+e),n=Cv(n),t.r=n[0],t.g=n[1],t.b=n[2]}function L8(t){if(!t)return;const e=kv(t),n=e[0],r=C_(e[1]),s=C_(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${os(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const E_={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},T_={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function R8(){const t={},e=Object.keys(T_),n=Object.keys(E_);let r,s,i,o,l;for(r=0;r<e.length;r++){for(o=l=e[r],s=0;s<n.length;s++)i=n[s],l=l.replace(i,E_[i]);i=parseInt(T_[o],16),t[l]=[i>>16&255,i>>8&255,i&255]}return t}let Gd;function A8(t){Gd||(Gd=R8(),Gd.transparent=[0,0,0,0]);const e=Gd[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const I8=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function F8(t){const e=I8.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Ol(o):Vs(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?Ol(r):Vs(r,0,255)),s=255&(e[4]?Ol(s):Vs(s,0,255)),i=255&(e[6]?Ol(i):Vs(i,0,255)),{r,g:s,b:i,a:n}}}function $8(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${os(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const nm=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ra=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function z8(t,e,n){const r=Ra(os(t.r)),s=Ra(os(t.g)),i=Ra(os(t.b));return{r:ri(nm(r+n*(Ra(os(e.r))-r))),g:ri(nm(s+n*(Ra(os(e.g))-s))),b:ri(nm(i+n*(Ra(os(e.b))-i))),a:t.a+n*(e.a-t.a)}}function Qd(t,e,n){if(t){let r=kv(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Cv(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function Sk(t,e){return t&&Object.assign(e||{},t)}function P_(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ri(t[3]))):(e=Sk(t,{r:0,g:0,b:0,a:1}),e.a=ri(e.a)),e}function B8(t){return t.charAt(0)==="r"?F8(t):O8(t)}class Mc{constructor(e){if(e instanceof Mc)return e;const n=typeof e;let r;n==="object"?r=P_(e):n==="string"&&(r=j8(e)||A8(e)||B8(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=Sk(this._rgb);return e&&(e.a=os(e.a)),e}set rgb(e){this._rgb=P_(e)}rgbString(){return this._valid?$8(this._rgb):void 0}hexString(){return this._valid?k8(this._rgb):void 0}hslString(){return this._valid?L8(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,l=2*o-1,d=r.a-s.a,u=((l*d===-1?l:(l+d)/(1+l*d))+1)/2;i=1-u,r.r=255&u*r.r+i*s.r+.5,r.g=255&u*r.g+i*s.g+.5,r.b=255&u*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=z8(this._rgb,e._rgb,n)),this}clone(){return new Mc(this.rgb)}alpha(e){return this._rgb.a=ri(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Xc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Qd(this._rgb,2,e),this}darken(e){return Qd(this._rgb,2,-e),this}saturate(e){return Qd(this._rgb,1,e),this}desaturate(e){return Qd(this._rgb,1,-e),this}rotate(e){return M8(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function es(){}const U8=(()=>{let t=0;return()=>t++})();function st(t){return t==null}function $t(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ve(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ar(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Pr(t,e){return ar(t)?t:e}function ze(t,e){return typeof t>"u"?e:t}const H8=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function at(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ke(t,e,n,r){let s,i,o;if($t(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(Ve(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function Sh(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function Ch(t){if($t(t))return t.map(Ch);if(Ve(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=Ch(t[n[s]]);return e}return t}function Ck(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function W8(t,e,n,r){if(!Ck(t))return;const s=e[t],i=n[t];Ve(s)&&Ve(i)?Lc(s,i,r):e[t]=Ch(i)}function Lc(t,e,n){const r=$t(e)?e:[e],s=r.length;if(!Ve(t))return t;n=n||{};const i=n.merger||W8;let o;for(let l=0;l<s;++l){if(o=r[l],!Ve(o))continue;const d=Object.keys(o);for(let u=0,p=d.length;u<p;++u)i(d[u],t,o,n)}return t}function Jl(t,e){return Lc(t,e,{merger:Y8})}function Y8(t,e,n){if(!Ck(t))return;const r=e[t],s=n[t];Ve(r)&&Ve(s)?Jl(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ch(s))}const D_={"":t=>t,x:t=>t.x,y:t=>t.y};function V8(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function q8(t){const e=V8(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Eh(t,e){return(D_[e]||(D_[e]=q8(e)))(t)}function Ev(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Th=t=>typeof t<"u",oi=t=>typeof t=="function",O_=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Z8(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Bt=Math.PI,Yr=2*Bt,K8=Yr+Bt,Ph=Number.POSITIVE_INFINITY,G8=Bt/180,xr=Bt/2,ki=Bt/4,M_=Bt*2/3,Ek=Math.log10,Co=Math.sign;function ec(t,e,n){return Math.abs(t-e)<n}function L_(t){const e=Math.round(t);t=ec(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Ek(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function Q8(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function X8(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Rc(t){return!X8(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function J8(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function e$(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Hi(t){return t*(Bt/180)}function t$(t){return t*(180/Bt)}function R_(t){if(!ar(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function n$(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*Bt&&(i+=Yr),{angle:i,distance:s}}function Vg(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function r$(t,e){return(t-e+K8)%Yr-Bt}function Ps(t){return(t%Yr+Yr)%Yr}function Tk(t,e,n,r){const s=Ps(t),i=Ps(e),o=Ps(n),l=Ps(i-s),d=Ps(o-s),u=Ps(s-i),p=Ps(s-o);return s===i||s===o||r&&i===o||l>d&&u<p}function Gn(t,e,n){return Math.max(e,Math.min(n,t))}function s$(t){return Gn(t,-32768,32767)}function Ml(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Tv(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const Wi=(t,e,n,r)=>Tv(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),i$=(t,e,n)=>Tv(t,n,r=>t[r][e]>=n);function a$(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const Pk=["push","pop","shift","splice","unshift"];function o$(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Pk.forEach(n=>{const r="_onData"+Ev(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(l=>{typeof l[r]=="function"&&l[r](...i)}),o}})})}function A_(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(Pk.forEach(i=>{delete t[i]}),delete t._chartjs)}function l$(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Dk=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function Ok(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,Dk.call(window,()=>{r=!1,t.apply(e,n)}))}}function c$(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const Pv=t=>t==="start"?"left":t==="end"?"right":"center",nn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,d$=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function u$(t,e,n){const r=e.length;let s=0,i=r;if(t._sorted){const{iScale:o,vScale:l,_parsed:d}=t,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,p=o.axis,{min:f,max:x,minDefined:g,maxDefined:v}=o.getUserBounds();if(g){if(s=Math.min(Wi(d,p,f).lo,n?r:Wi(e,p,o.getPixelForValue(f)).lo),u){const b=d.slice(0,s+1).reverse().findIndex(j=>!st(j[l.axis]));s-=Math.max(0,b)}s=Gn(s,0,r-1)}if(v){let b=Math.max(Wi(d,o.axis,x,!0).hi+1,n?0:Wi(e,p,o.getPixelForValue(x),!0).hi+1);if(u){const j=d.slice(b-1).findIndex(_=>!st(_[l.axis]));b+=Math.max(0,j)}i=Gn(b,s,r)-s}else i=r-s}return{start:s,count:i}}function h$(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const Xd=t=>t===0||t===1,I_=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Yr/n)),F_=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Yr/n)+1,tc={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*xr)+1,easeOutSine:t=>Math.sin(t*xr),easeInOutSine:t=>-.5*(Math.cos(Bt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Xd(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Xd(t)?t:I_(t,.075,.3),easeOutElastic:t=>Xd(t)?t:F_(t,.075,.3),easeInOutElastic(t){return Xd(t)?t:t<.5?.5*I_(t*2,.1125,.45):.5+.5*F_(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-tc.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?tc.easeInBounce(t*2)*.5:tc.easeOutBounce(t*2-1)*.5+.5};function Dv(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function $_(t){return Dv(t)?t:new Mc(t)}function rm(t){return Dv(t)?t:new Mc(t).saturate(.5).darken(.1).hexString()}const p$=["x","y","borderWidth","radius","tension"],f$=["color","borderColor","backgroundColor"];function m$(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:f$},numbers:{type:"number",properties:p$}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function g$(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const z_=new Map;function x$(t,e){e=e||{};const n=t+JSON.stringify(e);let r=z_.get(n);return r||(r=new Intl.NumberFormat(t,e),z_.set(n,r)),r}function Mk(t,e,n){return x$(e,n).format(t)}const v$={values(t){return $t(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),i=y$(t,n)}const o=Ek(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),d={notation:s,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(d,this.options.ticks.format),Mk(t,r,d)}};function y$(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Lk={formatters:v$};function b$(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Lk.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const oa=Object.create(null),qg=Object.create(null);function nc(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function sm(t,e,n){return typeof e=="string"?Lc(nc(t,e),n):Lc(nc(t,""),e)}class _${constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>rm(s.backgroundColor),this.hoverBorderColor=(r,s)=>rm(s.borderColor),this.hoverColor=(r,s)=>rm(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return sm(this,e,n)}get(e){return nc(this,e)}describe(e,n){return sm(qg,e,n)}override(e,n){return sm(oa,e,n)}route(e,n,r,s){const i=nc(this,e),o=nc(this,r),l="_"+n;Object.defineProperties(i,{[l]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const d=this[l],u=o[s];return Ve(d)?Object.assign({},u,d):ze(d,u)},set(d){this[l]=d}}})}apply(e){e.forEach(n=>n(this))}}var St=new _$({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[m$,g$,b$]);function w$(t){return!t||st(t.size)||st(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function B_(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function Si(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function U_(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Zg(t,e,n,r){Rk(t,e,n,r,null)}function Rk(t,e,n,r,s){let i,o,l,d,u,p,f,x;const g=e.pointStyle,v=e.rotation,b=e.radius;let j=(v||0)*G8;if(g&&typeof g=="object"&&(i=g.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(j),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(b)||b<=0)){switch(t.beginPath(),g){default:s?t.ellipse(n,r,s/2,b,0,0,Yr):t.arc(n,r,b,0,Yr),t.closePath();break;case"triangle":p=s?s/2:b,t.moveTo(n+Math.sin(j)*p,r-Math.cos(j)*b),j+=M_,t.lineTo(n+Math.sin(j)*p,r-Math.cos(j)*b),j+=M_,t.lineTo(n+Math.sin(j)*p,r-Math.cos(j)*b),t.closePath();break;case"rectRounded":u=b*.516,d=b-u,o=Math.cos(j+ki)*d,f=Math.cos(j+ki)*(s?s/2-u:d),l=Math.sin(j+ki)*d,x=Math.sin(j+ki)*(s?s/2-u:d),t.arc(n-f,r-l,u,j-Bt,j-xr),t.arc(n+x,r-o,u,j-xr,j),t.arc(n+f,r+l,u,j,j+xr),t.arc(n-x,r+o,u,j+xr,j+Bt),t.closePath();break;case"rect":if(!v){d=Math.SQRT1_2*b,p=s?s/2:d,t.rect(n-p,r-d,2*p,2*d);break}j+=ki;case"rectRot":f=Math.cos(j)*(s?s/2:b),o=Math.cos(j)*b,l=Math.sin(j)*b,x=Math.sin(j)*(s?s/2:b),t.moveTo(n-f,r-l),t.lineTo(n+x,r-o),t.lineTo(n+f,r+l),t.lineTo(n-x,r+o),t.closePath();break;case"crossRot":j+=ki;case"cross":f=Math.cos(j)*(s?s/2:b),o=Math.cos(j)*b,l=Math.sin(j)*b,x=Math.sin(j)*(s?s/2:b),t.moveTo(n-f,r-l),t.lineTo(n+f,r+l),t.moveTo(n+x,r-o),t.lineTo(n-x,r+o);break;case"star":f=Math.cos(j)*(s?s/2:b),o=Math.cos(j)*b,l=Math.sin(j)*b,x=Math.sin(j)*(s?s/2:b),t.moveTo(n-f,r-l),t.lineTo(n+f,r+l),t.moveTo(n+x,r-o),t.lineTo(n-x,r+o),j+=ki,f=Math.cos(j)*(s?s/2:b),o=Math.cos(j)*b,l=Math.sin(j)*b,x=Math.sin(j)*(s?s/2:b),t.moveTo(n-f,r-l),t.lineTo(n+f,r+l),t.moveTo(n+x,r-o),t.lineTo(n-x,r+o);break;case"line":o=s?s/2:Math.cos(j)*b,l=Math.sin(j)*b,t.moveTo(n-o,r-l),t.lineTo(n+o,r+l);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(j)*(s?s/2:b),r+Math.sin(j)*b);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Ac(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Ov(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Mv(t){t.restore()}function j$(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function N$(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function k$(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),st(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function S$(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,l=e+i.actualBoundingBoxRight,d=n-i.actualBoundingBoxAscent,u=n+i.actualBoundingBoxDescent,p=s.strikethrough?(d+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,p),t.lineTo(l,p),t.stroke()}}function C$(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Ic(t,e,n,r,s,i={}){const o=$t(e)?e:[e],l=i.strokeWidth>0&&i.strokeColor!=="";let d,u;for(t.save(),t.font=s.string,k$(t,i),d=0;d<o.length;++d)u=o[d],i.backdrop&&C$(t,i.backdrop),l&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),st(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(u,n,r,i.maxWidth)),t.fillText(u,n,r,i.maxWidth),S$(t,n,r,u,i),r+=Number(s.lineHeight);t.restore()}function Kg(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Bt,Bt,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,Bt,xr,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,xr,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-xr,!0),t.lineTo(n+o.topLeft,r)}const E$=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,T$=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function P$(t,e){const n=(""+t).match(E$);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const D$=t=>+t||0;function Ak(t,e){const n={},r=Ve(e),s=r?Object.keys(e):e,i=Ve(t)?r?o=>ze(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=D$(i(o));return n}function O$(t){return Ak(t,{top:"y",right:"x",bottom:"y",left:"x"})}function rc(t){return Ak(t,["topLeft","topRight","bottomLeft","bottomRight"])}function or(t){const e=O$(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function on(t,e){t=t||{},e=e||St.font;let n=ze(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=ze(t.style,e.style);r&&!(""+r).match(T$)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:ze(t.family,e.family),lineHeight:P$(ze(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:ze(t.weight,e.weight),string:""};return s.string=w$(s),s}function Jd(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function M$(t,e,n){const{min:r,max:s}=t,i=H8(e,(s-r)/2),o=(l,d)=>n&&l===0?0:l+d;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function ma(t,e){return Object.assign(Object.create(t),e)}function Lv(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=zk("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:l=>Lv([l,...t],e,i,r)};return new Proxy(o,{deleteProperty(l,d){return delete l[d],delete l._keys,delete t[0][d],!0},get(l,d){return Fk(l,d,()=>B$(d,e,t,l))},getOwnPropertyDescriptor(l,d){return Reflect.getOwnPropertyDescriptor(l._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,d){return W_(l).includes(d)},ownKeys(l){return W_(l)},set(l,d,u){const p=l._storage||(l._storage=s());return l[d]=p[d]=u,delete l._keys,!0}})}function Eo(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Ik(t,r),setContext:i=>Eo(t,i,n,r),override:i=>Eo(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,l){return Fk(i,o,()=>R$(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,l){return t[o]=l,delete i[o],!0}})}function Ik(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:oi(n)?n:()=>n,isIndexable:oi(r)?r:()=>r}}const L$=(t,e)=>t?t+Ev(e):e,Rv=(t,e)=>Ve(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Fk(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function R$(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let l=r[e];return oi(l)&&o.isScriptable(e)&&(l=A$(e,l,t,n)),$t(l)&&l.length&&(l=I$(e,l,t,o.isIndexable)),Rv(e,l)&&(l=Eo(l,s,i&&i[e],o)),l}function A$(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:l}=n;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let d=e(i,o||r);return l.delete(t),Rv(t,d)&&(d=Av(s._scopes,s,t,d)),d}function I$(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:l}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(Ve(e[0])){const d=e,u=s._scopes.filter(p=>p!==d);e=[];for(const p of d){const f=Av(u,s,t,p);e.push(Eo(f,i,o&&o[t],l))}}return e}function $k(t,e,n){return oi(t)?t(e,n):t}const F$=(t,e)=>t===!0?e:typeof t=="string"?Eh(e,t):void 0;function $$(t,e,n,r,s){for(const i of e){const o=F$(n,i);if(o){t.add(o);const l=$k(o._fallback,n,s);if(typeof l<"u"&&l!==n&&l!==r)return l}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function Av(t,e,n,r){const s=e._rootScopes,i=$k(e._fallback,n,r),o=[...t,...s],l=new Set;l.add(r);let d=H_(l,o,n,i||n,r);return d===null||typeof i<"u"&&i!==n&&(d=H_(l,o,i,d,r),d===null)?!1:Lv(Array.from(l),[""],s,i,()=>z$(e,n,r))}function H_(t,e,n,r,s){for(;n;)n=$$(t,e,n,r,s);return n}function z$(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return $t(s)&&Ve(n)?n:s||{}}function B$(t,e,n,r){let s;for(const i of e)if(s=zk(L$(i,t),n),typeof s<"u")return Rv(t,s)?Av(n,r,t,s):s}function zk(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function W_(t){let e=t._keys;return e||(e=t._keys=U$(t._scopes)),e}function U$(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const H$=Number.EPSILON||1e-14,To=(t,e)=>e<t.length&&!t[e].skip&&t[e],Bk=t=>t==="x"?"y":"x";function W$(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,l=Vg(i,s),d=Vg(o,i);let u=l/(l+d),p=d/(l+d);u=isNaN(u)?0:u,p=isNaN(p)?0:p;const f=r*u,x=r*p;return{previous:{x:i.x-f*(o.x-s.x),y:i.y-f*(o.y-s.y)},next:{x:i.x+x*(o.x-s.x),y:i.y+x*(o.y-s.y)}}}function Y$(t,e,n){const r=t.length;let s,i,o,l,d,u=To(t,0);for(let p=0;p<r-1;++p)if(d=u,u=To(t,p+1),!(!d||!u)){if(ec(e[p],0,H$)){n[p]=n[p+1]=0;continue}s=n[p]/e[p],i=n[p+1]/e[p],l=Math.pow(s,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),n[p]=s*o*e[p],n[p+1]=i*o*e[p])}}function V$(t,e,n="x"){const r=Bk(n),s=t.length;let i,o,l,d=To(t,0);for(let u=0;u<s;++u){if(o=l,l=d,d=To(t,u+1),!l)continue;const p=l[n],f=l[r];o&&(i=(p-o[n])/3,l[`cp1${n}`]=p-i,l[`cp1${r}`]=f-i*e[u]),d&&(i=(d[n]-p)/3,l[`cp2${n}`]=p+i,l[`cp2${r}`]=f+i*e[u])}}function q$(t,e="x"){const n=Bk(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,l,d,u=To(t,0);for(o=0;o<r;++o)if(l=d,d=u,u=To(t,o+1),!!d){if(u){const p=u[e]-d[e];s[o]=p!==0?(u[n]-d[n])/p:0}i[o]=l?u?Co(s[o-1])!==Co(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}Y$(t,s,i),V$(t,i,e)}function eu(t,e,n){return Math.max(Math.min(t,n),e)}function Z$(t,e){let n,r,s,i,o,l=Ac(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=l,l=n<r-1&&Ac(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=eu(s.cp1x,e.left,e.right),s.cp1y=eu(s.cp1y,e.top,e.bottom)),l&&(s.cp2x=eu(s.cp2x,e.left,e.right),s.cp2y=eu(s.cp2y,e.top,e.bottom)))}function K$(t,e,n,r,s){let i,o,l,d;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")q$(t,s);else{let u=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)l=t[i],d=W$(u,l,t[Math.min(i+1,o-(r?0:1))%o],e.tension),l.cp1x=d.previous.x,l.cp1y=d.previous.y,l.cp2x=d.next.x,l.cp2y=d.next.y,u=l}e.capBezierPoints&&Z$(t,n)}function Iv(){return typeof window<"u"&&typeof document<"u"}function Fv(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Dh(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const yp=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function G$(t,e){return yp(t).getPropertyValue(e)}const Q$=["top","right","bottom","left"];function Qi(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=Q$[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const X$=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function J$(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,l,d;if(X$(s,i,t.target))l=s,d=i;else{const u=e.getBoundingClientRect();l=r.clientX-u.left,d=r.clientY-u.top,o=!0}return{x:l,y:d,box:o}}function Mi(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=yp(n),i=s.boxSizing==="border-box",o=Qi(s,"padding"),l=Qi(s,"border","width"),{x:d,y:u,box:p}=J$(t,n),f=o.left+(p&&l.left),x=o.top+(p&&l.top);let{width:g,height:v}=e;return i&&(g-=o.width+l.width,v-=o.height+l.height),{x:Math.round((d-f)/g*n.width/r),y:Math.round((u-x)/v*n.height/r)}}function ez(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&Fv(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),l=yp(i),d=Qi(l,"border","width"),u=Qi(l,"padding");e=o.width-u.width-d.width,n=o.height-u.height-d.height,r=Dh(l.maxWidth,i,"clientWidth"),s=Dh(l.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||Ph,maxHeight:s||Ph}}const tu=t=>Math.round(t*10)/10;function tz(t,e,n,r){const s=yp(t),i=Qi(s,"margin"),o=Dh(s.maxWidth,t,"clientWidth")||Ph,l=Dh(s.maxHeight,t,"clientHeight")||Ph,d=ez(t,e,n);let{width:u,height:p}=d;if(s.boxSizing==="content-box"){const x=Qi(s,"border","width"),g=Qi(s,"padding");u-=g.width+x.width,p-=g.height+x.height}return u=Math.max(0,u-i.width),p=Math.max(0,r?u/r:p-i.height),u=tu(Math.min(u,o,d.maxWidth)),p=tu(Math.min(p,l,d.maxHeight)),u&&!p&&(p=tu(u/2)),(e!==void 0||n!==void 0)&&r&&d.height&&p>d.height&&(p=d.height,u=tu(Math.floor(p*r))),{width:u,height:p}}function Y_(t,e,n){const r=e||1,s=Math.floor(t.height*r),i=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const nz=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Iv()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function V_(t,e){const n=G$(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Li(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function rz(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function sz(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=Li(t,s,n),l=Li(s,i,n),d=Li(i,e,n),u=Li(o,l,n),p=Li(l,d,n);return Li(u,p,n)}const iz=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},az=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function oo(t,e,n){return t?iz(e,n):az()}function Uk(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function Hk(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Wk(t){return t==="angle"?{between:Tk,compare:r$,normalize:Ps}:{between:Ml,compare:(e,n)=>e-n,normalize:e=>e}}function q_({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function oz(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:l}=Wk(r),d=e.length;let{start:u,end:p,loop:f}=t,x,g;if(f){for(u+=d,p+=d,x=0,g=d;x<g&&o(l(e[u%d][r]),s,i);++x)u--,p--;u%=d,p%=d}return p<u&&(p+=d),{start:u,end:p,loop:f,style:t.style}}function lz(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:l,between:d,normalize:u}=Wk(r),{start:p,end:f,loop:x,style:g}=oz(t,e,n),v=[];let b=!1,j=null,_,N,S;const P=()=>d(s,S,_)&&l(s,S)!==0,M=()=>l(i,_)===0||d(i,S,_),A=()=>b||P(),R=()=>!b||M();for(let T=p,V=p;T<=f;++T)N=e[T%o],!N.skip&&(_=u(N[r]),_!==S&&(b=d(_,s,i),j===null&&A()&&(j=l(_,s)===0?T:V),j!==null&&R()&&(v.push(q_({start:j,end:T,loop:x,count:o,style:g})),j=null),V=T,S=_));return j!==null&&v.push(q_({start:j,end:f,loop:x,count:o,style:g})),v}function cz(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=lz(r[s],t.points,e);i.length&&n.push(...i)}return n}function dz(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function uz(t,e,n,r){const s=t.length,i=[];let o=e,l=t[e],d;for(d=e+1;d<=n;++d){const u=t[d%s];u.skip||u.stop?l.skip||(r=!1,i.push({start:e%s,end:(d-1)%s,loop:r}),e=o=u.stop?d:null):(o=d,l.skip&&(e=d)),l=u}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function hz(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:l}=dz(n,s,i,r);if(r===!0)return Z_(t,[{start:o,end:l,loop:i}],n,e);const d=l<o?l+s:l,u=!!t._fullLoop&&o===0&&l===s-1;return Z_(t,uz(n,o,d,u),n,e)}function Z_(t,e,n,r){return!r||!r.setContext||!n?e:pz(t,e,n,r)}function pz(t,e,n,r){const s=t._chart.getContext(),i=K_(t.options),{_datasetIndex:o,options:{spanGaps:l}}=t,d=n.length,u=[];let p=i,f=e[0].start,x=f;function g(v,b,j,_){const N=l?-1:1;if(v!==b){for(v+=d;n[v%d].skip;)v-=N;for(;n[b%d].skip;)b+=N;v%d!==b%d&&(u.push({start:v%d,end:b%d,loop:j,style:_}),p=_,f=b%d)}}for(const v of e){f=l?f:v.start;let b=n[f%d],j;for(x=f+1;x<=v.end;x++){const _=n[x%d];j=K_(r.setContext(ma(s,{type:"segment",p0:b,p1:_,p0DataIndex:(x-1)%d,p1DataIndex:x%d,datasetIndex:o}))),fz(j,p)&&g(f,x-1,v.loop,p),b=_,p=j}f<x-1&&g(f,x-1,v.loop,p)}return u}function K_(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function fz(t,e){if(!e)return!1;const n=[],r=function(s,i){return Dv(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function nu(t,e,n){return t.options.clip?t[n]:e[n]}function mz(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:nu(n,e,"left"),right:nu(n,e,"right"),top:nu(r,e,"top"),bottom:nu(r,e,"bottom")}:e}function gz(t,e){const n=e._clip;if(n.disabled)return!1;const r=mz(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class xz{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(l=>l({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Dk.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,l=!1,d;for(;o>=0;--o)d=i[o],d._active?(d._total>r.duration&&(r.duration=d._total),d.tick(e),l=!0):(i[o]=i[i.length-1],i.pop());l&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ts=new xz;const G_="transparent",vz={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=$_(t||G_),s=r.valid&&$_(e||G_);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class yz{constructor(e,n,r,s){const i=n[r];s=Jd([e.to,s,i,e.from]);const o=Jd([e.from,i,s]);this._active=!0,this._fn=e.fn||vz[e.type||typeof o],this._easing=tc[e.easing]||tc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Jd([e.to,n,s,e.from]),this._from=Jd([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,l=this._to;let d;if(this._active=i!==l&&(o||n<r),!this._active){this._target[s]=l,this._notify(!0);return}if(n<0){this._target[s]=i;return}d=n/r%2,d=o&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[s]=this._fn(i,l,d)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class Yk{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Ve(e))return;const n=Object.keys(St.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!Ve(i))return;const o={};for(const l of n)o[l]=i[l];($t(i.properties)&&i.properties||[s]).forEach(l=>{(l===s||!r.has(l))&&r.set(l,o)})})}_animateOptions(e,n){const r=n.options,s=_z(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&bz(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),l=Date.now();let d;for(d=o.length-1;d>=0;--d){const u=o[d];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(e,n));continue}const p=n[u];let f=i[u];const x=r.get(u);if(f)if(x&&f.active()){f.update(x,p,l);continue}else f.cancel();if(!x||!x.duration){e[u]=p;continue}i[u]=f=new yz(x,e,u,p),s.push(f)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return ts.add(this._chart,r),!0}}function bz(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function _z(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Q_(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function wz(t,e,n){if(n===!1)return!1;const r=Q_(t,n),s=Q_(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function jz(t){let e,n,r,s;return Ve(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function Vk(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function X_(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,l,d,u;if(e===null)return;let p=!1;for(o=0,l=s.length;o<l;++o){if(d=+s[o],d===n){if(p=!0,r.all)continue;break}u=t.values[d],ar(u)&&(i||e===0||Co(e)===Co(u))&&(e+=u)}return!p&&!r.all?0:e}function Nz(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),l=new Array(o.length);let d,u,p;for(d=0,u=o.length;d<u;++d)p=o[d],l[d]={[s]:p,[i]:t[p]};return l}function im(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function kz(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function Sz(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function Cz(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function J_(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function ew(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:l}=r,d=i.axis,u=o.axis,p=kz(i,o,r),f=e.length;let x;for(let g=0;g<f;++g){const v=e[g],{[d]:b,[u]:j}=v,_=v._stacks||(v._stacks={});x=_[u]=Cz(s,p,b),x[l]=j,x._top=J_(x,o,!0,r.type),x._bottom=J_(x,o,!1,r.type);const N=x._visualValues||(x._visualValues={});N[l]=j}}function am(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function Ez(t,e){return ma(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Tz(t,e,n){return ma(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function yl(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const om=t=>t==="reset"||t==="none",tw=(t,e)=>e?t:Object.assign({},t),Pz=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Vk(n,!0),values:null};class sc{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=im(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&yl(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(f,x,g,v)=>f==="x"?x:f==="r"?v:g,i=n.xAxisID=ze(r.xAxisID,am(e,"x")),o=n.yAxisID=ze(r.yAxisID,am(e,"y")),l=n.rAxisID=ze(r.rAxisID,am(e,"r")),d=n.indexAxis,u=n.iAxisID=s(d,i,o,l),p=n.vAxisID=s(d,o,i,l);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&A_(this._data,this),e._stacked&&yl(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Ve(n)){const s=this._cachedMeta;this._data=Nz(n,s)}else if(r!==n){if(r){A_(r,this);const s=this._cachedMeta;yl(s),s._parsed=[]}n&&Object.isExtensible(n)&&o$(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=im(n.vScale,n),n.stack!==r.stack&&(s=!0,yl(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(ew(this,n._parsed),n._stacked=im(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,l=i.axis;let d=e===0&&n===s.length?!0:r._sorted,u=e>0&&r._parsed[e-1],p,f,x;if(this._parsing===!1)r._parsed=s,r._sorted=!0,x=s;else{$t(s[e])?x=this.parseArrayData(r,s,e,n):Ve(s[e])?x=this.parseObjectData(r,s,e,n):x=this.parsePrimitiveData(r,s,e,n);const g=()=>f[l]===null||u&&f[l]<u[l];for(p=0;p<n;++p)r._parsed[p+e]=f=x[p],d&&(g()&&(d=!1),u=f);r._sorted=d}o&&ew(this,x)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,l=i.axis,d=o.axis,u=i.getLabels(),p=i===o,f=new Array(s);let x,g,v;for(x=0,g=s;x<g;++x)v=x+r,f[x]={[l]:p||i.parse(u[v],v),[d]:o.parse(n[v],v)};return f}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,l=new Array(s);let d,u,p,f;for(d=0,u=s;d<u;++d)p=d+r,f=n[p],l[d]={x:i.parse(f[0],p),y:o.parse(f[1],p)};return l}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:l="x",yAxisKey:d="y"}=this._parsing,u=new Array(s);let p,f,x,g;for(p=0,f=s;p<f;++p)x=p+r,g=n[x],u[p]={x:i.parse(Eh(g,l),x),y:o.parse(Eh(g,d),x)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],l={keys:Vk(s,!0),values:n._stacks[e.axis]._visualValues};return X_(l,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const l=s&&r._stacks[n.axis];s&&l&&(s.values=l,o=X_(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,l=this._getOtherScale(e),d=Pz(n,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:f}=Sz(l);let x,g;function v(){g=s[x];const b=g[l.axis];return!ar(g[e.axis])||p>b||f<b}for(x=0;x<o&&!(!v()&&(this.updateRangeFromParsed(u,e,g,d),i));++x);if(i){for(x=o-1;x>=0;--x)if(!v()){this.updateRangeFromParsed(u,e,g,d);break}}return u}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],ar(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=jz(ze(this.options.clip,wz(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],l=this._drawStart||0,d=this._drawCount||s.length-l,u=this.options.drawActiveElementsOnTop;let p;for(r.dataset&&r.dataset.draw(e,i,l,d),p=l;p<l+d;++p){const f=s[p];f.hidden||(f.active&&u?o.push(f):f.draw(e,i))}for(p=0;p<o.length;++p)o[p].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=Tz(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=Ez(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,l=i[o],d=this.enableOptionSharing&&Th(r);if(l)return tw(l,d);const u=this.chart.config,p=u.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],x=u.getOptionScopes(this.getDataset(),p),g=Object.keys(St.elements[e]),v=()=>this.getContext(r,s,n),b=u.resolveNamedOptions(x,g,v,f);return b.$shared&&(b.$shared=d,i[o]=Object.freeze(tw(b,d))),b}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,l=i[o];if(l)return l;let d;if(s.options.animation!==!1){const p=this.chart.config,f=p.datasetAnimationScopeKeys(this._type,n),x=p.getOptionScopes(this.getDataset(),f);d=p.createResolver(x,this.getContext(e,r,n))}const u=new Yk(s,d&&d.animations);return d&&d._cacheable&&(i[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||om(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){om(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!om(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[l,d,u]of this._syncList)this[l](d,u);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let l;const d=u=>{for(u.length+=n,l=u.length-1;l>=o;l--)u[l]=u[l-n]};for(d(i),l=e;l<o;++l)i[l]=new this.dataElementType;this._parsing&&d(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&yl(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Pe(sc,"defaults",{}),Pe(sc,"datasetElementType",null),Pe(sc,"dataElementType",null);class Tu extends sc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:l,count:d}=u$(n,s,o);this._drawStart=l,this._drawCount=d,h$(n)&&(l=0,d=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:u},e),this.updateElements(s,l,d,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:o,vScale:l,_stacked:d,_dataset:u}=this._cachedMeta,{sharedOptions:p,includeOptions:f}=this._getSharedOptions(n,s),x=o.axis,g=l.axis,{spanGaps:v,segment:b}=this.options,j=Rc(v)?v:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||i||s==="none",N=n+r,S=e.length;let P=n>0&&this.getParsed(n-1);for(let M=0;M<S;++M){const A=e[M],R=_?A:{};if(M<n||M>=N){R.skip=!0;continue}const T=this.getParsed(M),V=st(T[g]),D=R[x]=o.getPixelForValue(T[x],M),U=R[g]=i||V?l.getBasePixel():l.getPixelForValue(d?this.applyStack(l,T,d):T[g],M);R.skip=isNaN(D)||isNaN(U)||V,R.stop=M>0&&Math.abs(T[x]-P[x])>j,b&&(R.parsed=T,R.raw=u.data[M]),f&&(R.options=p||this.resolveDataElementOptions(M,A.active?"active":s)),_||this.updateElement(A,M,R,s),P=T}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Pe(Tu,"id","line"),Pe(Tu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Pe(Tu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Ci(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class $v{constructor(e){Pe(this,"options");this.options=e||{}}static override(e){Object.assign($v.prototype,e)}init(){}formats(){return Ci()}parse(){return Ci()}format(){return Ci()}add(){return Ci()}diff(){return Ci()}startOf(){return Ci()}endOf(){return Ci()}}var Dz={_date:$v};function Oz(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,l=s._cachedMeta.iScale,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&i.length){const u=l._reversePixels?i$:Wi;if(r){if(s._sharedOptions){const p=i[0],f=typeof p.getRange=="function"&&p.getRange(e);if(f){const x=u(i,e,n-f),g=u(i,e,n+f);return{lo:x.lo,hi:g.hi}}}}else{const p=u(i,e,n);if(d){const{vScale:f}=s._cachedMeta,{_parsed:x}=t,g=x.slice(0,p.lo+1).reverse().findIndex(b=>!st(b[f.axis]));p.lo-=Math.max(0,g);const v=x.slice(p.hi).findIndex(b=>!st(b[f.axis]));p.hi+=Math.max(0,v)}return p}}return{lo:0,hi:i.length-1}}function bp(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let l=0,d=i.length;l<d;++l){const{index:u,data:p}=i[l],{lo:f,hi:x}=Oz(i[l],e,o,s);for(let g=f;g<=x;++g){const v=p[g];v.skip||r(v,u,g)}}}function Mz(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function lm(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||bp(t,n,e,function(l,d,u){!s&&!Ac(l,t.chartArea,0)||l.inRange(e.x,e.y,r)&&i.push({element:l,datasetIndex:d,index:u})},!0),i}function Lz(t,e,n,r){let s=[];function i(o,l,d){const{startAngle:u,endAngle:p}=o.getProps(["startAngle","endAngle"],r),{angle:f}=n$(o,{x:e.x,y:e.y});Tk(f,u,p)&&s.push({element:o,datasetIndex:l,index:d})}return bp(t,n,e,i),s}function Rz(t,e,n,r,s,i){let o=[];const l=Mz(n);let d=Number.POSITIVE_INFINITY;function u(p,f,x){const g=p.inRange(e.x,e.y,s);if(r&&!g)return;const v=p.getCenterPoint(s);if(!(!!i||t.isPointInArea(v))&&!g)return;const j=l(e,v);j<d?(o=[{element:p,datasetIndex:f,index:x}],d=j):j===d&&o.push({element:p,datasetIndex:f,index:x})}return bp(t,n,e,u),o}function cm(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?Lz(t,e,n,s):Rz(t,e,n,r,s,i)}function nw(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let l=!1;return bp(t,n,e,(d,u,p)=>{d[o]&&d[o](e[n],s)&&(i.push({element:d,datasetIndex:u,index:p}),l=l||d.inRange(e.x,e.y,s))}),r&&!l?[]:i}var Az={modes:{index(t,e,n,r){const s=Mi(e,t),i=n.axis||"x",o=n.includeInvisible||!1,l=n.intersect?lm(t,s,i,r,o):cm(t,s,i,!1,r,o),d=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const p=l[0].index,f=u.data[p];f&&!f.skip&&d.push({element:f,datasetIndex:u.index,index:p})}),d):[]},dataset(t,e,n,r){const s=Mi(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let l=n.intersect?lm(t,s,i,r,o):cm(t,s,i,!1,r,o);if(l.length>0){const d=l[0].datasetIndex,u=t.getDatasetMeta(d).data;l=[];for(let p=0;p<u.length;++p)l.push({element:u[p],datasetIndex:d,index:p})}return l},point(t,e,n,r){const s=Mi(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return lm(t,s,i,r,o)},nearest(t,e,n,r){const s=Mi(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return cm(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=Mi(e,t);return nw(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=Mi(e,t);return nw(t,s,"y",n.intersect,r)}}};const qk=["left","top","right","bottom"];function bl(t,e){return t.filter(n=>n.pos===e)}function rw(t,e){return t.filter(n=>qk.indexOf(n.pos)===-1&&n.box.axis===e)}function _l(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function Iz(t){const e=[];let n,r,s,i,o,l;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:l=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:l});return e}function Fz(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!qk.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function $z(t,e){const n=Fz(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,l;for(i=0,o=t.length;i<o;++i){l=t[i];const{fullSize:d}=l.box,u=n[l.stack],p=u&&l.stackWeight/u.weight;l.horizontal?(l.width=p?p*r:d&&e.availableWidth,l.height=s):(l.width=r,l.height=p?p*s:d&&e.availableHeight)}return n}function zz(t){const e=Iz(t),n=_l(e.filter(u=>u.box.fullSize),!0),r=_l(bl(e,"left"),!0),s=_l(bl(e,"right")),i=_l(bl(e,"top"),!0),o=_l(bl(e,"bottom")),l=rw(e,"x"),d=rw(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(d).concat(o).concat(l),chartArea:bl(e,"chartArea"),vertical:r.concat(s).concat(d),horizontal:i.concat(o).concat(l)}}function sw(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function Zk(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Bz(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!Ve(s)){n.size&&(t[s]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?i.height:i.width),n.size=f.size/f.count,t[s]+=n.size}i.getPadding&&Zk(o,i.getPadding());const l=Math.max(0,e.outerWidth-sw(o,t,"left","right")),d=Math.max(0,e.outerHeight-sw(o,t,"top","bottom")),u=l!==t.w,p=d!==t.h;return t.w=l,t.h=d,n.horizontal?{same:u,other:p}:{same:p,other:u}}function Uz(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Hz(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function Ll(t,e,n,r){const s=[];let i,o,l,d,u,p;for(i=0,o=t.length,u=0;i<o;++i){l=t[i],d=l.box,d.update(l.width||e.w,l.height||e.h,Hz(l.horizontal,e));const{same:f,other:x}=Bz(e,n,l,r);u|=f&&s.length,p=p||x,d.fullSize||s.push(l)}return u&&Ll(s,e,n,r)||p}function ru(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function iw(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const l of t){const d=l.box,u=r[l.stack]||{placed:0,weight:1},p=l.stackWeight/u.weight||1;if(l.horizontal){const f=e.w*p,x=u.size||d.height;Th(u.start)&&(o=u.start),d.fullSize?ru(d,s.left,o,n.outerWidth-s.right-s.left,x):ru(d,e.left+u.placed,o,f,x),u.start=o,u.placed+=f,o=d.bottom}else{const f=e.h*p,x=u.size||d.width;Th(u.start)&&(i=u.start),d.fullSize?ru(d,i,s.top,x,n.outerHeight-s.bottom-s.top):ru(d,i,e.top+u.placed,x,f),u.start=i,u.placed+=f,i=d.right}}e.x=i,e.y=o}var Qn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=or(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),l=zz(t.boxes),d=l.vertical,u=l.horizontal;Ke(t.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const p=d.reduce((b,j)=>j.box.options&&j.box.options.display===!1?b:b+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/p,hBoxMaxHeight:o/2}),x=Object.assign({},s);Zk(x,or(r));const g=Object.assign({maxPadding:x,w:i,h:o,x:s.left,y:s.top},s),v=$z(d.concat(u),f);Ll(l.fullSize,g,f,v),Ll(d,g,f,v),Ll(u,g,f,v)&&Ll(d,g,f,v),Uz(g),iw(l.leftAndTop,g,f,v),g.x+=g.w,g.y+=g.h,iw(l.rightAndBottom,g,f,v),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},Ke(l.chartArea,b=>{const j=b.box;Object.assign(j,t.chartArea),j.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class Kk{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class Wz extends Kk{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Pu="$chartjs",Yz={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},aw=t=>t===null||t==="";function Vz(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[Pu]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",aw(s)){const i=V_(t,"width");i!==void 0&&(t.width=i)}if(aw(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=V_(t,"height");i!==void 0&&(t.height=i)}return t}const Gk=nz?{passive:!0}:!1;function qz(t,e,n){t&&t.addEventListener(e,n,Gk)}function Zz(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Gk)}function Kz(t,e){const n=Yz[t.type]||t.type,{x:r,y:s}=Mi(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function Oh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Gz(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||Oh(l.addedNodes,r),o=o&&!Oh(l.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function Qz(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||Oh(l.removedNodes,r),o=o&&!Oh(l.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Fc=new Map;let ow=0;function Qk(){const t=window.devicePixelRatio;t!==ow&&(ow=t,Fc.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Xz(t,e){Fc.size||window.addEventListener("resize",Qk),Fc.set(t,e)}function Jz(t){Fc.delete(t),Fc.size||window.removeEventListener("resize",Qk)}function e7(t,e,n){const r=t.canvas,s=r&&Fv(r);if(!s)return;const i=Ok((l,d)=>{const u=s.clientWidth;n(l,d),u<s.clientWidth&&n()},window),o=new ResizeObserver(l=>{const d=l[0],u=d.contentRect.width,p=d.contentRect.height;u===0&&p===0||i(u,p)});return o.observe(s),Xz(t,i),o}function dm(t,e,n){n&&n.disconnect(),e==="resize"&&Jz(t)}function t7(t,e,n){const r=t.canvas,s=Ok(i=>{t.ctx!==null&&n(Kz(i,t))},t);return qz(r,e,s),s}class n7 extends Kk{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(Vz(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Pu])return!1;const r=n[Pu].initial;["height","width"].forEach(i=>{const o=r[i];st(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[Pu],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:Gz,detach:Qz,resize:e7}[n]||t7;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:dm,detach:dm,resize:dm}[n]||Zz)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return tz(e,n,r,s)}isAttached(e){const n=e&&Fv(e);return!!(n&&n.isConnected)}}function r7(t){return!Iv()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Wz:n7}var cu;let ga=(cu=class{constructor(){Pe(this,"x");Pe(this,"y");Pe(this,"active",!1);Pe(this,"options");Pe(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Rc(this.x)&&Rc(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}},Pe(cu,"defaults",{}),Pe(cu,"defaultRoutes"),cu);function s7(t,e){const n=t.options.ticks,r=i7(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?o7(e):[],o=i.length,l=i[0],d=i[o-1],u=[];if(o>s)return l7(e,u,i,o/s),u;const p=a7(i,e,s);if(o>0){let f,x;const g=o>1?Math.round((d-l)/(o-1)):null;for(su(e,u,p,st(g)?0:l-g,l),f=0,x=o-1;f<x;f++)su(e,u,p,i[f],i[f+1]);return su(e,u,p,d,st(g)?e.length:d+g),u}return su(e,u,p),u}function i7(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function a7(t,e,n){const r=c7(t),s=e.length/n;if(!r)return Math.max(s,1);const i=Q8(r);for(let o=0,l=i.length-1;o<l;o++){const d=i[o];if(d>s)return d}return Math.max(s,1)}function o7(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function l7(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function su(t,e,n,r,s){const i=ze(r,0),o=Math.min(ze(s,t.length),t.length);let l=0,d,u,p;for(n=Math.ceil(n),s&&(d=s-r,n=d/Math.floor(d/n)),p=i;p<0;)l++,p=Math.round(i+l*n);for(u=Math.max(i,0);u<o;u++)u===p&&(e.push(t[u]),l++,p=Math.round(i+l*n))}function c7(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const d7=t=>t==="left"?"right":t==="right"?"left":t,lw=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,cw=(t,e)=>Math.min(e||t,t);function dw(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function u7(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,l=1e-6;let d=t.getPixelForTick(s),u;if(!(n&&(r===1?u=Math.max(d-i,o-d):e===0?u=(t.getPixelForTick(1)-d)/2:u=(d-t.getPixelForTick(s-1))/2,d+=s<e?u:-u,d<i-l||d>o+l)))return d}function h7(t,e){Ke(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function wl(t){return t.drawTicks?t.tickLength:0}function uw(t,e){if(!t.display)return 0;const n=on(t.font,e),r=or(t.padding);return($t(t.text)?t.text.length:1)*n.lineHeight+r.height}function p7(t,e){return ma(t,{scale:e,type:"scale"})}function f7(t,e,n){return ma(t,{tick:n,index:e,type:"tick"})}function m7(t,e,n){let r=Pv(t);return(n&&e!=="right"||!n&&e==="right")&&(r=d7(r)),r}function g7(t,e,n,r){const{top:s,left:i,bottom:o,right:l,chart:d}=t,{chartArea:u,scales:p}=d;let f=0,x,g,v;const b=o-s,j=l-i;if(t.isHorizontal()){if(g=nn(r,i,l),Ve(n)){const _=Object.keys(n)[0],N=n[_];v=p[_].getPixelForValue(N)+b-e}else n==="center"?v=(u.bottom+u.top)/2+b-e:v=lw(t,n,e);x=l-i}else{if(Ve(n)){const _=Object.keys(n)[0],N=n[_];g=p[_].getPixelForValue(N)-j+e}else n==="center"?g=(u.left+u.right)/2-j+e:g=lw(t,n,e);v=nn(r,o,s),f=n==="left"?-xr:xr}return{titleX:g,titleY:v,maxWidth:x,rotation:f}}class Uo extends ga{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=Pr(e,Number.POSITIVE_INFINITY),n=Pr(n,Number.NEGATIVE_INFINITY),r=Pr(r,Number.POSITIVE_INFINITY),s=Pr(s,Number.NEGATIVE_INFINITY),{min:Pr(e,r),max:Pr(n,s),minDefined:ar(e),maxDefined:ar(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const l=this.getMatchingVisibleMetas();for(let d=0,u=l.length;d<u;++d)o=l[d].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:Pr(n,Pr(r,n)),max:Pr(r,Pr(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){at(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=M$(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=l<this.ticks.length;this._convertTicksToLabels(d?dw(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=s7(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){at(this.options.afterUpdate,[this])}beforeSetDimensions(){at(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){at(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),at(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){at(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=at(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){at(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){at(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=cw(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,l,d,u;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const p=this._getLabelSizes(),f=p.widest.width,x=p.highest.height,g=Gn(this.chart.width-f,0,this.maxWidth);l=e.offset?this.maxWidth/r:g/(r-1),f+6>l&&(l=g/(r-(e.offset?.5:1)),d=this.maxHeight-wl(e.grid)-n.padding-uw(e.title,this.chart.options.font),u=Math.sqrt(f*f+x*x),o=t$(Math.min(Math.asin(Gn((p.highest.height+6)/l,-1,1)),Math.asin(Gn(d/u,-1,1))-Math.asin(Gn(x/u,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){at(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){at(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const d=uw(s,n.options.font);if(l?(e.width=this.maxWidth,e.height=wl(i)+d):(e.height=this.maxHeight,e.width=wl(i)+d),r.display&&this.ticks.length){const{first:u,last:p,widest:f,highest:x}=this._getLabelSizes(),g=r.padding*2,v=Hi(this.labelRotation),b=Math.cos(v),j=Math.sin(v);if(l){const _=r.mirror?0:j*f.width+b*x.height;e.height=Math.min(this.maxHeight,e.height+_+g)}else{const _=r.mirror?0:b*f.width+j*x.height;e.width=Math.min(this.maxWidth,e.width+_+g)}this._calculatePadding(u,p,j,b)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:l}=this.options,d=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const p=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let x=0,g=0;d?u?(x=s*e.width,g=r*n.height):(x=r*e.height,g=s*n.width):i==="start"?g=n.width:i==="end"?x=e.width:i!=="inner"&&(x=e.width/2,g=n.width/2),this.paddingLeft=Math.max((x-p+o)*this.width/(this.width-p),0),this.paddingRight=Math.max((g-f+o)*this.width/(this.width-f),0)}else{let p=n.height/2,f=e.height/2;i==="start"?(p=0,f=e.height):i==="end"&&(p=n.height,f=0),this.paddingTop=p+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){at(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)st(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=dw(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],l=[],d=Math.floor(n/cw(n,r));let u=0,p=0,f,x,g,v,b,j,_,N,S,P,M;for(f=0;f<n;f+=d){if(v=e[f].label,b=this._resolveTickFontOptions(f),s.font=j=b.string,_=i[j]=i[j]||{data:{},gc:[]},N=b.lineHeight,S=P=0,!st(v)&&!$t(v))S=B_(s,_.data,_.gc,S,v),P=N;else if($t(v))for(x=0,g=v.length;x<g;++x)M=v[x],!st(M)&&!$t(M)&&(S=B_(s,_.data,_.gc,S,M),P+=N);o.push(S),l.push(P),u=Math.max(S,u),p=Math.max(P,p)}h7(i,n);const A=o.indexOf(u),R=l.indexOf(p),T=V=>({width:o[V]||0,height:l[V]||0});return{first:T(0),last:T(n-1),widest:T(A),highest:T(R),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return s$(this._alignToPixels?Si(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=f7(this.getContext(),e,r))}return this.$context||(this.$context=p7(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Hi(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,l=i?i.widest.width+o:0,d=i?i.highest.height+o:0;return this.isHorizontal()?d*r>l*s?l/r:d/s:d*s<l*r?d/r:l/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:l}=s,d=i.offset,u=this.isHorizontal(),f=this.ticks.length+(d?1:0),x=wl(i),g=[],v=l.setContext(this.getContext()),b=v.display?v.width:0,j=b/2,_=function(C){return Si(r,C,b)};let N,S,P,M,A,R,T,V,D,U,te,G;if(o==="top")N=_(this.bottom),R=this.bottom-x,V=N-j,U=_(e.top)+j,G=e.bottom;else if(o==="bottom")N=_(this.top),U=e.top,G=_(e.bottom)-j,R=N+j,V=this.top+x;else if(o==="left")N=_(this.right),A=this.right-x,T=N-j,D=_(e.left)+j,te=e.right;else if(o==="right")N=_(this.left),D=e.left,te=_(e.right)-j,A=N+j,T=this.left+x;else if(n==="x"){if(o==="center")N=_((e.top+e.bottom)/2+.5);else if(Ve(o)){const C=Object.keys(o)[0],q=o[C];N=_(this.chart.scales[C].getPixelForValue(q))}U=e.top,G=e.bottom,R=N+j,V=R+x}else if(n==="y"){if(o==="center")N=_((e.left+e.right)/2);else if(Ve(o)){const C=Object.keys(o)[0],q=o[C];N=_(this.chart.scales[C].getPixelForValue(q))}A=N-j,T=A-x,D=e.left,te=e.right}const B=ze(s.ticks.maxTicksLimit,f),Z=Math.max(1,Math.ceil(f/B));for(S=0;S<f;S+=Z){const C=this.getContext(S),q=i.setContext(C),I=l.setContext(C),X=q.lineWidth,E=q.color,K=I.dash||[],re=I.dashOffset,Q=q.tickWidth,se=q.tickColor,le=q.tickBorderDash||[],ie=q.tickBorderDashOffset;P=u7(this,S,d),P!==void 0&&(M=Si(r,P,X),u?A=T=D=te=M:R=V=U=G=M,g.push({tx1:A,ty1:R,tx2:T,ty2:V,x1:D,y1:U,x2:te,y2:G,width:X,color:E,borderDash:K,borderDashOffset:re,tickWidth:Q,tickColor:se,tickBorderDash:le,tickBorderDashOffset:ie}))}return this._ticksLength=f,this._borderValue=N,g}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),l=this.ticks,{align:d,crossAlign:u,padding:p,mirror:f}=i,x=wl(r.grid),g=x+p,v=f?-p:g,b=-Hi(this.labelRotation),j=[];let _,N,S,P,M,A,R,T,V,D,U,te,G="middle";if(s==="top")A=this.bottom-v,R=this._getXAxisLabelAlignment();else if(s==="bottom")A=this.top+v,R=this._getXAxisLabelAlignment();else if(s==="left"){const Z=this._getYAxisLabelAlignment(x);R=Z.textAlign,M=Z.x}else if(s==="right"){const Z=this._getYAxisLabelAlignment(x);R=Z.textAlign,M=Z.x}else if(n==="x"){if(s==="center")A=(e.top+e.bottom)/2+g;else if(Ve(s)){const Z=Object.keys(s)[0],C=s[Z];A=this.chart.scales[Z].getPixelForValue(C)+g}R=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")M=(e.left+e.right)/2-g;else if(Ve(s)){const Z=Object.keys(s)[0],C=s[Z];M=this.chart.scales[Z].getPixelForValue(C)}R=this._getYAxisLabelAlignment(x).textAlign}n==="y"&&(d==="start"?G="top":d==="end"&&(G="bottom"));const B=this._getLabelSizes();for(_=0,N=l.length;_<N;++_){S=l[_],P=S.label;const Z=i.setContext(this.getContext(_));T=this.getPixelForTick(_)+i.labelOffset,V=this._resolveTickFontOptions(_),D=V.lineHeight,U=$t(P)?P.length:1;const C=U/2,q=Z.color,I=Z.textStrokeColor,X=Z.textStrokeWidth;let E=R;o?(M=T,R==="inner"&&(_===N-1?E=this.options.reverse?"left":"right":_===0?E=this.options.reverse?"right":"left":E="center"),s==="top"?u==="near"||b!==0?te=-U*D+D/2:u==="center"?te=-B.highest.height/2-C*D+D:te=-B.highest.height+D/2:u==="near"||b!==0?te=D/2:u==="center"?te=B.highest.height/2-C*D:te=B.highest.height-U*D,f&&(te*=-1),b!==0&&!Z.showLabelBackdrop&&(M+=D/2*Math.sin(b))):(A=T,te=(1-U)*D/2);let K;if(Z.showLabelBackdrop){const re=or(Z.backdropPadding),Q=B.heights[_],se=B.widths[_];let le=te-re.top,ie=0-re.left;switch(G){case"middle":le-=Q/2;break;case"bottom":le-=Q;break}switch(R){case"center":ie-=se/2;break;case"right":ie-=se;break;case"inner":_===N-1?ie-=se:_>0&&(ie-=se/2);break}K={left:ie,top:le,width:se+re.width,height:Q+re.height,color:Z.backdropColor}}j.push({label:P,font:V,textOffset:te,options:{rotation:b,color:q,strokeColor:I,strokeWidth:X,textAlign:E,textBaseline:G,translation:[M,A],backdrop:K}})}return j}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Hi(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),l=e+i,d=o.widest.width;let u,p;return n==="left"?s?(p=this.right+i,r==="near"?u="left":r==="center"?(u="center",p+=d/2):(u="right",p+=d)):(p=this.right-l,r==="near"?u="right":r==="center"?(u="center",p-=d/2):(u="left",p=this.left)):n==="right"?s?(p=this.left+i,r==="near"?u="right":r==="center"?(u="center",p-=d/2):(u="left",p-=d)):(p=this.left+l,r==="near"?u="left":r==="center"?(u="center",p+=d/2):(u="right",p=this.right)):u="right",{textAlign:u,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const l=(d,u,p)=>{!p.width||!p.color||(r.save(),r.lineWidth=p.width,r.strokeStyle=p.color,r.setLineDash(p.borderDash||[]),r.lineDashOffset=p.borderDashOffset,r.beginPath(),r.moveTo(d.x,d.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const d=s[i];n.drawOnChartArea&&l({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),n.drawTicks&&l({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const l=s.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let u,p,f,x;this.isHorizontal()?(u=Si(e,this.left,o)-o/2,p=Si(e,this.right,l)+l/2,f=x=d):(f=Si(e,this.top,o)-o/2,x=Si(e,this.bottom,l)+l/2,u=p=d),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(u,f),n.lineTo(p,x),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&Ov(r,s);const i=this.getLabelItems(e);for(const o of i){const l=o.options,d=o.font,u=o.label,p=o.textOffset;Ic(r,u,0,p,d,l)}s&&Mv(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=on(r.font),o=or(r.padding),l=r.align;let d=i.lineHeight/2;n==="bottom"||n==="center"||Ve(n)?(d+=o.bottom,$t(r.text)&&(d+=i.lineHeight*(r.text.length-1))):d+=o.top;const{titleX:u,titleY:p,maxWidth:f,rotation:x}=g7(this,d,n,l);Ic(e,r.text,0,0,i,{color:r.color,maxWidth:f,rotation:x,textAlign:m7(l,n,s),textBaseline:"middle",translation:[u,p]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=ze(e.grid&&e.grid.z,-1),s=ze(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Uo.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const l=n[i];l[r]===this.id&&(!e||l.type===e)&&s.push(l)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return on(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class iu{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;y7(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,x7(e,o,r),this.override&&St.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in St[s]&&(delete St[s][r],this.override&&delete oa[r])}}function x7(t,e,n){const r=Lc(Object.create(null),[n?St.get(n):{},St.get(e),t.defaults]);St.set(e,r),t.defaultRoutes&&v7(e,t.defaultRoutes),t.descriptors&&St.describe(e,t.descriptors)}function v7(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),l=o.pop(),d=o.join(".");St.route(i,s,d,l)})}function y7(t){return"id"in t&&"defaults"in t}class b7{constructor(){this.controllers=new iu(sc,"datasets",!0),this.elements=new iu(ga,"elements"),this.plugins=new iu(Object,"plugins"),this.scales=new iu(Uo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):Ke(s,o=>{const l=r||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,n,r){const s=Ev(e);at(r["before"+s],[],r),n[e](r),at(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var Lr=new b7;class _7{constructor(){this._init=[]}notify(e,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,l=o[r],d=[n,s,i.options];if(at(l,d,o)===!1&&s.cancelable)return!1}return!0}invalidate(){st(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=ze(r.options&&r.options.plugins,{}),i=w7(r);return s===!1&&!n?[]:N7(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(l=>!o.some(d=>l.plugin.id===d.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function w7(t){const e={},n=[],r=Object.keys(Lr.plugins.items);for(let i=0;i<r.length;i++)n.push(Lr.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function j7(t,e){return!e&&t===!1?null:t===!0?{}:t}function N7(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const l of e){const d=l.id,u=j7(r[d],s);u!==null&&i.push({plugin:l,options:k7(t.config,{plugin:l,local:n[d]},u,o)})}return i}function k7(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Gg(t,e){const n=St.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function S7(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function C7(t,e){return t===e?"_index_":"_value_"}function hw(t){if(t==="x"||t==="y"||t==="r")return t}function E7(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Qg(t,...e){if(hw(t))return t;for(const n of e){const r=n.axis||E7(n.position)||t.length>1&&hw(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function pw(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function T7(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return pw(t,"x",n[0])||pw(t,"y",n[0])}return{}}function P7(t,e){const n=oa[t.type]||{scales:{}},r=e.scales||{},s=Gg(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const l=r[o];if(!Ve(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const d=Qg(o,l,T7(o,t),St.scales[l.type]),u=C7(d,s),p=n.scales||{};i[o]=Jl(Object.create(null),[{axis:d},l,p[d],p[u]])}),t.data.datasets.forEach(o=>{const l=o.type||t.type,d=o.indexAxis||Gg(l,e),p=(oa[l]||{}).scales||{};Object.keys(p).forEach(f=>{const x=S7(f,d),g=o[x+"AxisID"]||x;i[g]=i[g]||Object.create(null),Jl(i[g],[{axis:x},r[g],p[f]])})}),Object.keys(i).forEach(o=>{const l=i[o];Jl(l,[St.scales[l.type],St.scale])}),i}function Xk(t){const e=t.options||(t.options={});e.plugins=ze(e.plugins,{}),e.scales=P7(t,e)}function Jk(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function D7(t){return t=t||{},t.data=Jk(t.data),Xk(t),t}const fw=new Map,eS=new Set;function au(t,e){let n=fw.get(t);return n||(n=e(),fw.set(t,n),eS.add(n)),n}const jl=(t,e,n)=>{const r=Eh(e,n);r!==void 0&&t.add(r)};class O7{constructor(e){this._config=D7(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Jk(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Xk(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return au(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return au(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return au(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return au(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),l=o.get(n);if(l)return l;const d=new Set;n.forEach(p=>{e&&(d.add(e),p.forEach(f=>jl(d,e,f))),p.forEach(f=>jl(d,s,f)),p.forEach(f=>jl(d,oa[i]||{},f)),p.forEach(f=>jl(d,St,f)),p.forEach(f=>jl(d,qg,f))});const u=Array.from(d);return u.length===0&&u.push(Object.create(null)),eS.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:e,type:n}=this;return[e,oa[n]||{},St.datasets[n]||{},{type:n},St,qg]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=mw(this._resolverCache,e,s);let d=o;if(L7(o,n)){i.$shared=!1,r=oi(r)?r():r;const u=this.createResolver(e,r,l);d=Eo(o,r,u)}for(const u of n)i[u]=d[u];return i}createResolver(e,n,r=[""],s){const{resolver:i}=mw(this._resolverCache,e,r);return Ve(n)?Eo(i,n,void 0,s):i}}function mw(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:Lv(e,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},r.set(s,i)),i}const M7=t=>Ve(t)&&Object.getOwnPropertyNames(t).some(e=>oi(t[e]));function L7(t,e){const{isScriptable:n,isIndexable:r}=Ik(t);for(const s of e){const i=n(s),o=r(s),l=(o||i)&&t[s];if(i&&(oi(l)||M7(l))||o&&$t(l))return!0}return!1}var R7="4.4.9";const A7=["top","bottom","left","right","chartArea"];function gw(t,e){return t==="top"||t==="bottom"||A7.indexOf(t)===-1&&e==="x"}function xw(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function vw(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),at(n&&n.onComplete,[t],e)}function I7(t){const e=t.chart,n=e.options.animation;at(n&&n.onProgress,[t],e)}function tS(t){return Iv()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Du={},yw=t=>{const e=tS(t);return Object.values(Du).filter(n=>n.canvas===e).pop()};function F7(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function $7(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var Cs;let Jc=(Cs=class{static register(...e){Lr.add(...e),bw()}static unregister(...e){Lr.remove(...e),bw()}constructor(e,n){const r=this.config=new O7(n),s=tS(e),i=yw(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||r7(s)),this.platform.updateConfig(r);const l=this.platform.acquireContext(s,o.aspectRatio),d=l&&l.canvas,u=d&&d.height,p=d&&d.width;if(this.id=U8(),this.ctx=l,this.canvas=d,this.width=p,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new _7,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=c$(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],Du[this.id]=this,!l||!d){console.error("Failed to create chart: can't acquire context from the given item");return}ts.listen(this,"complete",vw),ts.listen(this,"progress",I7),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return st(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Lr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Y_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return U_(this.canvas,this.ctx),this}stop(){return ts.stop(this),this}resize(e,n){ts.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Y_(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),at(r.onResize,[this,o],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ke(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,l)=>(o[l]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const l=n[o],d=Qg(o,l),u=d==="r",p=d==="x";return{options:l,dposition:u?"chartArea":p?"bottom":"left",dtype:u?"radialLinear":p?"category":"linear"}}))),Ke(i,o=>{const l=o.options,d=l.id,u=Qg(d,l),p=ze(l.type,o.dtype);(l.position===void 0||gw(l.position,u)!==gw(o.dposition))&&(l.position=o.dposition),s[d]=!0;let f=null;if(d in r&&r[d].type===p)f=r[d];else{const x=Lr.getScale(p);f=new x({id:d,type:p,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(l,e)}),Ke(s,(o,l)=>{o||delete r[l]}),Ke(r,o=>{Qn.configure(this,o,o.options),Qn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(xw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=l,o.indexAxis=i.indexAxis||Gg(l,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const d=Lr.getController(l),{datasetElementType:u,dataElementType:p}=St.datasets[l];Object.assign(d,{dataElementType:Lr.getElement(p),datasetElementType:u&&Lr.getElement(u)}),o.controller=new d(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ke(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,p=this.data.datasets.length;u<p;u++){const{controller:f}=this.getDatasetMeta(u),x=!s&&i.indexOf(f)===-1;f.buildOrUpdateElements(x),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||Ke(i,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(xw("z","_idx"));const{_active:l,_lastEvent:d}=this;d?this._eventHandler(d,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Ke(this.scales,e=>{Qn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!O_(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;F7(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!O_(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Qn.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Ke(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,oi(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ts.has(this)?this.attached&&!ts.running(this)&&ts.start(this):(this.draw(),vw({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=gz(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&Ov(n,s),e.controller.draw(),s&&Mv(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Ac(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=Az.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=ma(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);Th(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(l=>l.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),ts.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),U_(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Du[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};Ke(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(d,u)=>{n.addEventListener(this,d,u),e[d]=u},s=(d,u)=>{e[d]&&(n.removeEventListener(this,d,u),delete e[d])},i=(d,u)=>{this.canvas&&this.resize(d,u)};let o;const l=()=>{s("attach",l),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",l)},n.isAttached(this.canvas)?l():o()}unbindEvents(){Ke(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ke(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,l,d;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),l=0,d=e.length;l<d;++l){o=e[l];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!Sh(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(d,u)=>d.filter(p=>!u.some(f=>p.datasetIndex===f.datasetIndex&&p.index===f.index)),o=i(n,e),l=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,l=this._getActiveElements(e,s,r,o),d=Z8(e),u=$7(e,this._lastEvent,r,d);r&&(this._lastEvent=null,at(i.onHover,[e,l,this],this),d&&at(i.onClick,[e,l,this],this));const p=!Sh(l,s);return(p||n)&&(this._active=l,this._updateHoverStyles(l,s,n)),this._lastEvent=u,p}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}},Pe(Cs,"defaults",St),Pe(Cs,"instances",Du),Pe(Cs,"overrides",oa),Pe(Cs,"registry",Lr),Pe(Cs,"version",R7),Pe(Cs,"getChart",yw),Cs);function bw(){return Ke(Jc.instances,t=>t._plugins.invalidate())}function nS(t,e,n=e){t.lineCap=ze(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ze(n.borderDash,e.borderDash)),t.lineDashOffset=ze(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ze(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ze(n.borderWidth,e.borderWidth),t.strokeStyle=ze(n.borderColor,e.borderColor)}function z7(t,e,n){t.lineTo(n.x,n.y)}function B7(t){return t.stepped?j$:t.tension||t.cubicInterpolationMode==="monotone"?N$:z7}function rS(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:l}=e,d=Math.max(s,o),u=Math.min(i,l),p=s<o&&i<o||s>l&&i>l;return{count:r,start:d,loop:e.loop,ilen:u<d&&!p?r+u-d:u-d}}function U7(t,e,n,r){const{points:s,options:i}=e,{count:o,start:l,loop:d,ilen:u}=rS(s,n,r),p=B7(i);let{move:f=!0,reverse:x}=r||{},g,v,b;for(g=0;g<=u;++g)v=s[(l+(x?u-g:g))%o],!v.skip&&(f?(t.moveTo(v.x,v.y),f=!1):p(t,b,v,x,i.stepped),b=v);return d&&(v=s[(l+(x?u:0))%o],p(t,b,v,x,i.stepped)),!!d}function H7(t,e,n,r){const s=e.points,{count:i,start:o,ilen:l}=rS(s,n,r),{move:d=!0,reverse:u}=r||{};let p=0,f=0,x,g,v,b,j,_;const N=P=>(o+(u?l-P:P))%i,S=()=>{b!==j&&(t.lineTo(p,j),t.lineTo(p,b),t.lineTo(p,_))};for(d&&(g=s[N(0)],t.moveTo(g.x,g.y)),x=0;x<=l;++x){if(g=s[N(x)],g.skip)continue;const P=g.x,M=g.y,A=P|0;A===v?(M<b?b=M:M>j&&(j=M),p=(f*p+P)/++f):(S(),t.lineTo(P,M),v=A,f=0,b=j=M),_=M}S()}function Xg(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?H7:U7}function W7(t){return t.stepped?rz:t.tension||t.cubicInterpolationMode==="monotone"?sz:Li}function Y7(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),nS(t,e.options),t.stroke(s)}function V7(t,e,n,r){const{segments:s,options:i}=e,o=Xg(e);for(const l of s)nS(t,i,l.style),t.beginPath(),o(t,e,l,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const q7=typeof Path2D=="function";function Z7(t,e,n,r){q7&&!e.options.segment?Y7(t,e,n,r):V7(t,e,n,r)}class Xa extends ga{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;K$(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=hz(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=cz(this,{property:n,start:s,end:s});if(!o.length)return;const l=[],d=W7(r);let u,p;for(u=0,p=o.length;u<p;++u){const{start:f,end:x}=o[u],g=i[f],v=i[x];if(g===v){l.push(g);continue}const b=Math.abs((s-g[n])/(v[n]-g[n])),j=d(g,v,b,r.stepped);j[n]=e[n],l.push(j)}return l.length===1?l[0]:l}pathSegment(e,n,r){return Xg(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=Xg(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const l of s)o&=i(e,this,l,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),Z7(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Pe(Xa,"id","line"),Pe(Xa,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Pe(Xa,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Pe(Xa,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function _w(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class ic extends ga{constructor(n){super();Pe(this,"parsed");Pe(this,"skip");Pe(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const i=this.options,{x:o,y:l}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(r-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,r){return _w(this,n,"x",r)}inYRange(n,r){return _w(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!Ac(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,Zg(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Pe(ic,"id","point"),Pe(ic,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Pe(ic,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const ww=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},K7=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class jw extends ga{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=at(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=on(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:d}=ww(r,i);let u,p;n.font=s.string,this.isHorizontal()?(u=this.maxWidth,p=this._fitRows(o,i,l,d)+10):(p=this.maxHeight,u=this._fitCols(o,s,l,d)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(p,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,d=this.legendHitBoxes=[],u=this.lineWidths=[0],p=s+l;let f=e;i.textAlign="left",i.textBaseline="middle";let x=-1,g=-p;return this.legendItems.forEach((v,b)=>{const j=r+n/2+i.measureText(v.text).width;(b===0||u[u.length-1]+j+2*l>o)&&(f+=p,u[u.length-(b>0?0:1)]=0,g+=p,x++),d[b]={left:0,top:g,row:x,width:j,height:s},u[u.length-1]+=j+l}),f}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,d=this.legendHitBoxes=[],u=this.columnSizes=[],p=o-e;let f=l,x=0,g=0,v=0,b=0;return this.legendItems.forEach((j,_)=>{const{itemWidth:N,itemHeight:S}=G7(r,n,i,j,s);_>0&&g+S+2*l>p&&(f+=x+l,u.push({width:x,height:g}),v+=x+l,b++,x=g=0),d[_]={left:v,top:g,col:b,width:N,height:S},x=Math.max(x,N),g+=S+l}),f+=x,u.push({width:x,height:g}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=oo(i,this.left,this.width);if(this.isHorizontal()){let l=0,d=nn(r,this.left+s,this.right-this.lineWidths[l]);for(const u of n)l!==u.row&&(l=u.row,d=nn(r,this.left+s,this.right-this.lineWidths[l])),u.top+=this.top+e+s,u.left=o.leftForLtr(o.x(d),u.width),d+=u.width+s}else{let l=0,d=nn(r,this.top+e+s,this.bottom-this.columnSizes[l].height);for(const u of n)u.col!==l&&(l=u.col,d=nn(r,this.top+e+s,this.bottom-this.columnSizes[l].height)),u.top=d,u.left+=this.left+s,u.left=o.leftForLtr(o.x(u.left),u.width),d+=u.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Ov(e,this),this._draw(),Mv(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,l=St.color,d=oo(e.rtl,this.left,this.width),u=on(o.font),{padding:p}=o,f=u.size,x=f/2;let g;this.drawTitle(),s.textAlign=d.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=u.string;const{boxWidth:v,boxHeight:b,itemHeight:j}=ww(o,f),_=function(A,R,T){if(isNaN(v)||v<=0||isNaN(b)||b<0)return;s.save();const V=ze(T.lineWidth,1);if(s.fillStyle=ze(T.fillStyle,l),s.lineCap=ze(T.lineCap,"butt"),s.lineDashOffset=ze(T.lineDashOffset,0),s.lineJoin=ze(T.lineJoin,"miter"),s.lineWidth=V,s.strokeStyle=ze(T.strokeStyle,l),s.setLineDash(ze(T.lineDash,[])),o.usePointStyle){const D={radius:b*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:V},U=d.xPlus(A,v/2),te=R+x;Rk(s,D,U,te,o.pointStyleWidth&&v)}else{const D=R+Math.max((f-b)/2,0),U=d.leftForLtr(A,v),te=rc(T.borderRadius);s.beginPath(),Object.values(te).some(G=>G!==0)?Kg(s,{x:U,y:D,w:v,h:b,radius:te}):s.rect(U,D,v,b),s.fill(),V!==0&&s.stroke()}s.restore()},N=function(A,R,T){Ic(s,T.text,A,R+j/2,u,{strikethrough:T.hidden,textAlign:d.textAlign(T.textAlign)})},S=this.isHorizontal(),P=this._computeTitleHeight();S?g={x:nn(i,this.left+p,this.right-r[0]),y:this.top+p+P,line:0}:g={x:this.left+p,y:nn(i,this.top+P+p,this.bottom-n[0].height),line:0},Uk(this.ctx,e.textDirection);const M=j+p;this.legendItems.forEach((A,R)=>{s.strokeStyle=A.fontColor,s.fillStyle=A.fontColor;const T=s.measureText(A.text).width,V=d.textAlign(A.textAlign||(A.textAlign=o.textAlign)),D=v+x+T;let U=g.x,te=g.y;d.setWidth(this.width),S?R>0&&U+D+p>this.right&&(te=g.y+=M,g.line++,U=g.x=nn(i,this.left+p,this.right-r[g.line])):R>0&&te+M>this.bottom&&(U=g.x=U+n[g.line].width+p,g.line++,te=g.y=nn(i,this.top+P+p,this.bottom-n[g.line].height));const G=d.x(U);if(_(G,te,A),U=d$(V,U+v+x,S?U+D:this.right,e.rtl),N(d.x(U),te,A),S)g.x+=D+p;else if(typeof A.text!="string"){const B=u.lineHeight;g.y+=sS(A,B)+p}else g.y+=M}),Hk(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=on(n.font),s=or(n.padding);if(!n.display)return;const i=oo(e.rtl,this.left,this.width),o=this.ctx,l=n.position,d=r.size/2,u=s.top+d;let p,f=this.left,x=this.width;if(this.isHorizontal())x=Math.max(...this.lineWidths),p=this.top+u,f=nn(e.align,f,this.right-x);else{const v=this.columnSizes.reduce((b,j)=>Math.max(b,j.height),0);p=u+nn(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const g=nn(l,f,f+x);o.textAlign=i.textAlign(Pv(l)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Ic(o,n.text,g,p,r)}_computeTitleHeight(){const e=this.options.title,n=on(e.font),r=or(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(Ml(e,this.left,this.right)&&Ml(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],Ml(e,s.left,s.left+s.width)&&Ml(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!J7(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=K7(s,r);s&&!i&&at(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&at(n.onHover,[e,r,this],this)}else r&&at(n.onClick,[e,r,this],this)}}function G7(t,e,n,r,s){const i=Q7(r,t,e,n),o=X7(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function Q7(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function X7(t,e,n){let r=t;return typeof e.text!="string"&&(r=sS(e,n)),r}function sS(t,e){const n=t.text?t.text.length:0;return e*n}function J7(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var iS={id:"legend",_element:jw,start(t,e,n){const r=t.legend=new jw({ctx:t.ctx,options:n,chart:t});Qn.configure(t,r,n),Qn.addBox(t,r)},stop(t){Qn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Qn.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(d=>{const u=d.controller.getStyle(n?0:void 0),p=or(u.borderWidth);return{text:e[d.index].label,fillStyle:u.backgroundColor,fontColor:i,hidden:!d.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:s||u.textAlign,borderRadius:o&&(l||u.borderRadius),datasetIndex:d.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class aS extends ga{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=$t(r.text)?r.text.length:1;this._padding=or(r.padding);const i=s*on(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:i,options:o}=this,l=o.align;let d=0,u,p,f;return this.isHorizontal()?(p=nn(l,r,i),f=n+e,u=i-r):(o.position==="left"?(p=r+e,f=nn(l,s,n),d=Bt*-.5):(p=i-e,f=nn(l,n,s),d=Bt*.5),u=s-n),{titleX:p,titleY:f,maxWidth:u,rotation:d}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=on(n.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:d,rotation:u}=this._drawArgs(i);Ic(e,n.text,0,0,r,{color:n.color,maxWidth:d,rotation:u,textAlign:Pv(n.align),textBaseline:"middle",translation:[o,l]})}}function eB(t,e){const n=new aS({ctx:t.ctx,options:e,chart:t});Qn.configure(t,n,e),Qn.addBox(t,n),t.titleBlock=n}var oS={id:"title",_element:aS,start(t,e,n){eB(t,n)},stop(t){const e=t.titleBlock;Qn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Qn.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Rl={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const l=t[e].element;if(l&&l.hasValue()){const d=l.tooltipPosition();r.add(d.x),s+=d.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((l,d)=>l+d)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=t.length;i<o;++i){const d=t[i].element;if(d&&d.hasValue()){const u=d.getCenterPoint(),p=Vg(e,u);p<s&&(s=p,l=d)}}if(l){const d=l.tooltipPosition();n=d.x,r=d.y}return{x:n,y:r}}};function Or(t,e){return e&&($t(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ns(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function tB(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:l}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:l,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function Nw(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:l}=e,d=on(e.bodyFont),u=on(e.titleFont),p=on(e.footerFont),f=i.length,x=s.length,g=r.length,v=or(e.padding);let b=v.height,j=0,_=r.reduce((P,M)=>P+M.before.length+M.lines.length+M.after.length,0);if(_+=t.beforeBody.length+t.afterBody.length,f&&(b+=f*u.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),_){const P=e.displayColors?Math.max(l,d.lineHeight):d.lineHeight;b+=g*P+(_-g)*d.lineHeight+(_-1)*e.bodySpacing}x&&(b+=e.footerMarginTop+x*p.lineHeight+(x-1)*e.footerSpacing);let N=0;const S=function(P){j=Math.max(j,n.measureText(P).width+N)};return n.save(),n.font=u.string,Ke(t.title,S),n.font=d.string,Ke(t.beforeBody.concat(t.afterBody),S),N=e.displayColors?o+2+e.boxPadding:0,Ke(r,P=>{Ke(P.before,S),Ke(P.lines,S),Ke(P.after,S)}),N=0,n.font=p.string,Ke(t.footer,S),n.restore(),j+=v.width,{width:j,height:b}}function nB(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function rB(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function sB(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:l,right:d}}=t;let u="center";return r==="center"?u=s<=(l+d)/2?"left":"right":s<=i/2?u="left":s>=o-i/2&&(u="right"),rB(u,t,e,n)&&(u="center"),u}function kw(t,e,n){const r=n.yAlign||e.yAlign||nB(t,n);return{xAlign:n.xAlign||e.xAlign||sB(t,e,n,r),yAlign:r}}function iB(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function aB(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function Sw(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:l,yAlign:d}=n,u=s+i,{topLeft:p,topRight:f,bottomLeft:x,bottomRight:g}=rc(o);let v=iB(e,l);const b=aB(e,d,u);return d==="center"?l==="left"?v+=u:l==="right"&&(v-=u):l==="left"?v-=Math.max(p,x)+s:l==="right"&&(v+=Math.max(f,g)+s),{x:Gn(v,0,r.width-e.width),y:Gn(b,0,r.height-e.height)}}function ou(t,e,n){const r=or(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function Cw(t){return Or([],ns(t))}function oB(t,e,n){return ma(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Ew(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const lS={beforeTitle:es,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:es,beforeBody:es,beforeLabel:es,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return st(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:es,afterBody:es,beforeFooter:es,footer:es,afterFooter:es};function vn(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?lS[e].call(n,r):s}class Jg extends ga{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new Yk(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=oB(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=vn(r,"beforeTitle",this,e),i=vn(r,"title",this,e),o=vn(r,"afterTitle",this,e);let l=[];return l=Or(l,ns(s)),l=Or(l,ns(i)),l=Or(l,ns(o)),l}getBeforeBody(e,n){return Cw(vn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return Ke(e,i=>{const o={before:[],lines:[],after:[]},l=Ew(r,i);Or(o.before,ns(vn(l,"beforeLabel",this,i))),Or(o.lines,vn(l,"label",this,i)),Or(o.after,ns(vn(l,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return Cw(vn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=vn(r,"beforeFooter",this,e),i=vn(r,"footer",this,e),o=vn(r,"afterFooter",this,e);let l=[];return l=Or(l,ns(s)),l=Or(l,ns(i)),l=Or(l,ns(o)),l}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let l=[],d,u;for(d=0,u=n.length;d<u;++d)l.push(tB(this.chart,n[d]));return e.filter&&(l=l.filter((p,f,x)=>e.filter(p,f,x,r))),e.itemSort&&(l=l.sort((p,f)=>e.itemSort(p,f,r))),Ke(l,p=>{const f=Ew(e.callbacks,p);s.push(vn(f,"labelColor",this,p)),i.push(vn(f,"labelPointStyle",this,p)),o.push(vn(f,"labelTextColor",this,p))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const l=Rl[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const d=this._size=Nw(this,r),u=Object.assign({},l,d),p=kw(this.chart,r,u),f=Sw(r,u,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,i={opacity:1,x:f.x,y:f.y,width:d.width,height:d.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:l}=r,{topLeft:d,topRight:u,bottomLeft:p,bottomRight:f}=rc(l),{x,y:g}=e,{width:v,height:b}=n;let j,_,N,S,P,M;return i==="center"?(P=g+b/2,s==="left"?(j=x,_=j-o,S=P+o,M=P-o):(j=x+v,_=j+o,S=P-o,M=P+o),N=j):(s==="left"?_=x+Math.max(d,p)+o:s==="right"?_=x+v-Math.max(u,f)-o:_=this.caretX,i==="top"?(S=g,P=S-o,j=_-o,N=_+o):(S=g+b,P=S+o,j=_+o,N=_-o),M=S),{x1:j,x2:_,x3:N,y1:S,y2:P,y3:M}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,l,d;if(i){const u=oo(r.rtl,this.x,this.width);for(e.x=ou(this,r.titleAlign,r),n.textAlign=u.textAlign(r.titleAlign),n.textBaseline="middle",o=on(r.titleFont),l=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,d=0;d<i;++d)n.fillText(s[d],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,d+1===i&&(e.y+=r.titleMarginBottom-l)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:d,boxWidth:u}=i,p=on(i.bodyFont),f=ou(this,"left",i),x=s.x(f),g=d<p.lineHeight?(p.lineHeight-d)/2:0,v=n.y+g;if(i.usePointStyle){const b={radius:Math.min(u,d)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},j=s.leftForLtr(x,u)+u/2,_=v+d/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Zg(e,b,j,_),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Zg(e,b,j,_)}else{e.lineWidth=Ve(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const b=s.leftForLtr(x,u),j=s.leftForLtr(s.xPlus(x,1),u-2),_=rc(o.borderRadius);Object.values(_).some(N=>N!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Kg(e,{x:b,y:v,w:u,h:d,radius:_}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Kg(e,{x:j,y:v+1,w:u-2,h:d-2,radius:_}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(b,v,u,d),e.strokeRect(b,v,u,d),e.fillStyle=o.backgroundColor,e.fillRect(j,v+1,u-2,d-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:d,boxWidth:u,boxPadding:p}=r,f=on(r.bodyFont);let x=f.lineHeight,g=0;const v=oo(r.rtl,this.x,this.width),b=function(T){n.fillText(T,v.x(e.x+g),e.y+x/2),e.y+=x+i},j=v.textAlign(o);let _,N,S,P,M,A,R;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=ou(this,j,r),n.fillStyle=r.bodyColor,Ke(this.beforeBody,b),g=l&&j!=="right"?o==="center"?u/2+p:u+2+p:0,P=0,A=s.length;P<A;++P){for(_=s[P],N=this.labelTextColors[P],n.fillStyle=N,Ke(_.before,b),S=_.lines,l&&S.length&&(this._drawColorBox(n,e,P,v,r),x=Math.max(f.lineHeight,d)),M=0,R=S.length;M<R;++M)b(S[M]),x=f.lineHeight;Ke(_.after,b)}g=0,x=f.lineHeight,Ke(this.afterBody,b),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,l;if(i){const d=oo(r.rtl,this.x,this.width);for(e.x=ou(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=d.textAlign(r.footerAlign),n.textBaseline="middle",o=on(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:l,y:d}=e,{width:u,height:p}=r,{topLeft:f,topRight:x,bottomLeft:g,bottomRight:v}=rc(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(l+f,d),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(l+u-x,d),n.quadraticCurveTo(l+u,d,l+u,d+x),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(l+u,d+p-v),n.quadraticCurveTo(l+u,d+p,l+u-v,d+p),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(l+g,d+p),n.quadraticCurveTo(l,d+p,l,d+p-g),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(l,d+f),n.quadraticCurveTo(l,d,l+f,d),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=Rl[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=Nw(this,e),d=Object.assign({},o,this._size),u=kw(n,e,d),p=Sw(e,d,u,n);(s._to!==p.x||i._to!==p.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=or(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),Uk(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),Hk(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:l,index:d})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[d],index:d}}),i=!Sh(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),l=this._positionChanged(o,e),d=n||!Sh(o,i)||l;return d&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),d}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=Rl[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}Pe(Jg,"positioners",Rl);var cS={id:"tooltip",_element:Jg,positioners:Rl,afterInit(t,e,n){n&&(t.tooltip=new Jg({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:lS},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const lB=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function cB(t,e,n,r){const s=t.indexOf(e);if(s===-1)return lB(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const dB=(t,e)=>t===null?null:Gn(Math.round(t),0,e);function Tw(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Mh extends Uo{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(st(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:cB(r,e,ze(n,e),this._addedLabels),dB(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return Tw.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Pe(Mh,"id","category"),Pe(Mh,"defaults",{ticks:{callback:Tw}});function uB(t,e){const n=[],{bounds:s,step:i,min:o,max:l,precision:d,count:u,maxTicks:p,maxDigits:f,includeBounds:x}=t,g=i||1,v=p-1,{min:b,max:j}=e,_=!st(o),N=!st(l),S=!st(u),P=(j-b)/(f+1);let M=L_((j-b)/v/g)*g,A,R,T,V;if(M<1e-14&&!_&&!N)return[{value:b},{value:j}];V=Math.ceil(j/M)-Math.floor(b/M),V>v&&(M=L_(V*M/v/g)*g),st(d)||(A=Math.pow(10,d),M=Math.ceil(M*A)/A),s==="ticks"?(R=Math.floor(b/M)*M,T=Math.ceil(j/M)*M):(R=b,T=j),_&&N&&i&&J8((l-o)/i,M/1e3)?(V=Math.round(Math.min((l-o)/M,p)),M=(l-o)/V,R=o,T=l):S?(R=_?o:R,T=N?l:T,V=u-1,M=(T-R)/V):(V=(T-R)/M,ec(V,Math.round(V),M/1e3)?V=Math.round(V):V=Math.ceil(V));const D=Math.max(R_(M),R_(R));A=Math.pow(10,st(d)?D:d),R=Math.round(R*A)/A,T=Math.round(T*A)/A;let U=0;for(_&&(x&&R!==o?(n.push({value:o}),R<o&&U++,ec(Math.round((R+U*M)*A)/A,o,Pw(o,P,t))&&U++):R<o&&U++);U<V;++U){const te=Math.round((R+U*M)*A)/A;if(N&&te>l)break;n.push({value:te})}return N&&x&&T!==l?n.length&&ec(n[n.length-1].value,l,Pw(l,P,t))?n[n.length-1].value=l:n.push({value:l}):(!N||T===l)&&n.push({value:T}),n}function Pw(t,e,{horizontal:n,minRotation:r}){const s=Hi(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class hB extends Uo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return st(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=d=>s=n?s:d,l=d=>i=r?i:d;if(e){const d=Co(s),u=Co(i);d<0&&u<0?l(0):d>0&&u>0&&o(0)}if(s===i){let d=i===0?1:Math.abs(i*.05);l(i+d),e||o(s-d)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=uB(s,i);return e.bounds==="ticks"&&e$(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Mk(e,this.chart.options.locale,this.options.ticks.format)}}class Lh extends hB{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ar(e)?e:0,this.max=ar(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Hi(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Pe(Lh,"id","linear"),Pe(Lh,"defaults",{ticks:{callback:Lk.formatters.numeric}});const _p={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},_n=Object.keys(_p);function Dw(t,e){return t-e}function Ow(t,e){if(st(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),ar(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(Rc(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function Mw(t,e,n,r){const s=_n.length;for(let i=_n.indexOf(t);i<s-1;++i){const o=_p[_n[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(l*o.size))<=r)return _n[i]}return _n[s-1]}function pB(t,e,n,r,s){for(let i=_n.length-1;i>=_n.indexOf(n);i--){const o=_n[i];if(_p[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return _n[n?_n.indexOf(n):0]}function fB(t){for(let e=_n.indexOf(t)+1,n=_n.length;e<n;++e)if(_p[_n[e]].common)return _n[e]}function Lw(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=Tv(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function mB(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let l,d;for(l=i;l<=o;l=+s.add(l,1,r))d=n[l],d>=0&&(e[d].major=!0);return e}function Rw(t,e,n){const r=[],s={},i=e.length;let o,l;for(o=0;o<i;++o)l=e[o],s[l]=o,r.push({value:l,major:!1});return i===0||!n?r:mB(t,r,s,n)}class Rh extends Uo{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new Dz._date(e.adapters.date);s.init(n),Jl(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Ow(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function d(u){!o&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!l&&!isNaN(u.max)&&(i=Math.max(i,u.max))}(!o||!l)&&(d(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&d(this.getMinMax(!1))),s=ar(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=ar(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,l=a$(s,i,o);return this._unit=n.unit||(r.autoSkip?Mw(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):pB(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:fB(this._unit),this.initOffsets(s),e.reverse&&l.reverse(),Rw(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Gn(n,0,o),r=Gn(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||Mw(i.minUnit,n,r,this._getLabelCapacity(n)),l=ze(s.ticks.stepSize,1),d=o==="week"?i.isoWeekday:!1,u=Rc(d)||d===!0,p={};let f=n,x,g;if(u&&(f=+e.startOf(f,"isoWeek",d)),f=+e.startOf(f,u?"day":o),e.diff(r,n,o)>1e5*l)throw new Error(n+" and "+r+" are too far apart with stepSize of "+l+" "+o);const v=s.ticks.source==="data"&&this.getDataTimestamps();for(x=f,g=0;x<r;x=+e.add(x,l,o),g++)Lw(p,x,v);return(x===r||s.bounds==="ticks"||g===1)&&Lw(p,x,v),Object.keys(p).sort(Dw).map(b=>+b)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return at(o,[e,n,r],this);const l=i.time.displayFormats,d=this._unit,u=this._majorUnit,p=d&&l[d],f=u&&l[u],x=r[n],g=u&&f&&x&&x.major;return this._adapter.format(e,s||(g?f:p))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=Hi(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:r*i+l*o,h:r*o+l*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,Rw(this,[e],this._majorUnit),s),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(Ow(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return l$(e.sort(Dw))}}Pe(Rh,"id","time"),Pe(Rh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function lu(t,e,n){let r=0,s=t.length-1,i,o,l,d;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=Wi(t,"pos",e)),{pos:i,time:l}=t[r],{pos:o,time:d}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=Wi(t,"time",e)),{time:i,pos:l}=t[r],{time:o,pos:d}=t[s]);const u=o-i;return u?l+(d-l)*(e-i)/u:l}class Aw extends Rh{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=lu(n,this.min),this._tableRange=lu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,l,d,u,p;for(o=0,l=e.length;o<l;++o)u=e[o],u>=n&&u<=r&&s.push(u);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,l=s.length;o<l;++o)p=s[o+1],d=s[o-1],u=s[o],Math.round((p+d)/2)!==u&&i.push({time:u,pos:o/(l-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(lu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return lu(this._table,r*this._tableRange+this._minPos,!0)}}Pe(Aw,"id","timeseries"),Pe(Aw,"defaults",Rh.defaults);const dS="label";function Iw(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function gB(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function uS(t,e){t.labels=e}function hS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:dS;const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function xB(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:dS;const n={labels:[],datasets:[]};return uS(n,t.labels),hS(n,t.datasets,e),n}function vB(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:l,options:d,plugins:u=[],fallbackContent:p,updateMode:f,...x}=t,g=w.useRef(null),v=w.useRef(null),b=()=>{g.current&&(v.current=new Jc(g.current,{type:o,data:xB(l,i),options:d&&{...d},plugins:u}),Iw(e,v.current))},j=()=>{Iw(e,null),v.current&&(v.current.destroy(),v.current=null)};return w.useEffect(()=>{!s&&v.current&&d&&gB(v.current,d)},[s,d]),w.useEffect(()=>{!s&&v.current&&uS(v.current.config.data,l.labels)},[s,l.labels]),w.useEffect(()=>{!s&&v.current&&l.datasets&&hS(v.current.config.data,l.datasets,i)},[s,l.datasets]),w.useEffect(()=>{v.current&&(s?(j(),setTimeout(b)):v.current.update(f))},[s,d,l.labels,l.datasets,f]),w.useEffect(()=>{v.current&&(j(),setTimeout(b))},[o]),w.useEffect(()=>(b(),()=>j()),[]),Y.createElement("canvas",{ref:g,role:"img",height:n,width:r,...x},p)}const yB=w.forwardRef(vB);function bB(t,e){return Jc.register(e),w.forwardRef((n,r)=>Y.createElement(yB,{...n,ref:r,type:t}))}const ex=bB("line",Tu);Jc.register(Mh,Lh,ic,Xa,oS,cS,iS);function _B(){const[t,e]=w.useState(new Date().getFullYear()),[n,r]=w.useState("vendor"),[s,i]=w.useState([]),[o,l]=w.useState(!0),[d,u]=w.useState(null),p=[{id:"vendor",label:"البائعين"},{id:"driver",label:"السائقين"}],f=[t,t-1,t-2];w.useEffect(()=>{x()},[t,n]);const x=async()=>{try{l(!0),u(null);const b=await v8(n,t),j=[];for(let _=1;_<=12;_++){const N=b.find(S=>S.month===_);N?j.push(N):j.push({month:_,avg_rating:0,count:0})}i(j)}catch(b){console.error("Error fetching ratings report:",b),u("فشل في تحميل تقرير التقييمات. الرجاء المحاولة مرة أخرى.")}finally{l(!1)}},g={labels:s.map(b=>S_(b.month)),datasets:[{label:"متوسط التقييم",data:s.map(b=>b.count>0?b.avg_rating:null),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.5)",tension:.4,pointBackgroundColor:"rgb(59, 130, 246)",pointRadius:5,pointHoverRadius:7}]},v={responsive:!0,scales:{y:{min:0,max:5,ticks:{stepSize:1}}},plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(b){const j=s[b.dataIndex];return[`متوسط التقييم: ${b.parsed.y}`,`عدد التقييمات: ${j.count}`]}}}}};return o?a.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):d?a.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),a.jsx("p",{children:d}),a.jsx("button",{onClick:x,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"تقرير التقييمات الشهري"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex bg-gray-100 rounded-lg p-1",children:p.map(b=>a.jsx("button",{onClick:()=>r(b.id),className:`px-4 py-2 rounded-lg transition-colors ${n===b.id?"bg-white shadow text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:b.label},b.id))}),a.jsx("select",{value:t,onChange:b=>e(Number(b.target.value)),className:"border rounded-lg px-3 py-2",children:f.map(b=>a.jsx("option",{value:b,children:b},b))})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["متوسط التقييمات الشهرية لعام ",t]}),a.jsx("div",{className:"h-80",children:a.jsx(ex,{data:g,options:v})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b",children:a.jsx("h3",{className:"text-lg font-semibold",children:"تفاصيل التقييمات الشهرية"})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الشهر"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"متوسط التقييم"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"عدد التقييمات"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التقييم"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(b=>a.jsxs("tr",{className:b.count===0?"bg-gray-50 text-gray-400":"",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:S_(b.month)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.count>0?b.avg_rating.toFixed(1):"-"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.count}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.count>0?a.jsx("div",{className:"flex items-center",children:a.jsx(Qa,{rating:b.avg_rating})}):a.jsx("span",{children:"-"})})]},b.month))})]})})]})]})}const wB=async(t=new Date().getFullYear())=>{try{const{data:e,error:n}=await ee.from("orders").select("total, created_at");if(n)throw n;const r=Array(12).fill(0),s=Array(12).fill(0);return e.forEach(i=>{const o=new Date(i.created_at);if(o.getFullYear()===t){const l=o.getMonth();r[l]+=parseFloat(i.total||0),s[l]+=1}}),{monthlySales:r,monthlyOrders:s}}catch(e){throw console.error("Error fetching monthly sales stats:",e),e}},jB=async()=>{try{const{data:t,error:e}=await ee.rpc("get_financial_summary");if(e)throw e;return t||{total_sales:0,electronic_payments:0,cash_payments:0,admin_commissions:0,vendor_balances:0,driver_balances:0}}catch(t){throw console.error("Error fetching financial stats:",t),t}};Jc.register(Mh,Lh,ic,Xa,oS,cS,iS);function NB(){const[t,e]=w.useState({adminCommissions:{total:0,fromVendors:0,fromDrivers:0,pendingFromVendors:0,pendingFromDrivers:0,byPaymentType:{electronic:0,cash:0},monthly:[0,0,0,0,0,0,0,0,0,0,0,0]},vendorBalances:{total:0,available:0,pending:0,byPaymentType:{electronic:0,cash:0},monthly:[0,0,0,0,0,0,0,0,0,0,0,0]},driverBalances:{total:0,available:0,pending:0,byPaymentType:{electronic:0,cash:0},monthly:[0,0,0,0,0,0,0,0,0,0,0,0]},totalSales:{amount:0,electronic:0,cash:0,monthly:[0,0,0,0,0,0,0,0,0,0,0,0]}}),[n,r]=w.useState(!0),[s,i]=w.useState(null);w.useEffect(()=>{o()},[]);const o=async()=>{try{r(!0),i(null);const p=await jB(),{monthlySales:f}=await wB(),x=f.map(g=>Math.round(g*.15));e({adminCommissions:{total:p.admin_commissions||0,fromVendors:p.admin_commissions_vendors||0,fromDrivers:p.admin_commissions_drivers||0,pendingFromVendors:p.pending_commissions_vendors||0,pendingFromDrivers:p.pending_commissions_drivers||0,byPaymentType:{electronic:p.admin_commissions_electronic||0,cash:p.admin_commissions_cash||0},monthly:x},vendorBalances:{total:p.vendor_balances||0,available:p.vendor_available_balances||0,pending:p.vendor_pending_balances||0,byPaymentType:{electronic:p.vendor_balances_electronic||0,cash:p.vendor_balances_cash||0},monthly:f.map(g=>Math.round(g*.7))},driverBalances:{total:p.driver_balances||0,available:p.driver_available_balances||0,pending:p.driver_pending_balances||0,byPaymentType:{electronic:p.driver_balances_electronic||0,cash:p.driver_balances_cash||0},monthly:f.map(g=>Math.round(g*.3))},totalSales:{amount:p.total_sales||0,electronic:p.electronic_payments||0,cash:p.cash_payments||0,monthly:f}})}catch(p){console.error("Error fetching financial data:",p),i("فشل في تحميل البيانات المالية. الرجاء المحاولة مرة أخرى.")}finally{r(!1)}},l=["يناير","فبراير","مارس","إبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],d={labels:l,datasets:[{label:"المبيعات الكلية",data:t.totalSales.monthly,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.5)",tension:.4},{label:"عمولات الإدارة",data:t.adminCommissions.monthly,borderColor:"rgb(16, 185, 129)",backgroundColor:"rgba(16, 185, 129, 0.5)",tension:.4}]},u={labels:l,datasets:[{label:"أرصدة البائعين",data:t.vendorBalances.monthly,borderColor:"rgb(245, 158, 11)",backgroundColor:"rgba(245, 158, 11, 0.5)",tension:.4},{label:"أرصدة السائقين",data:t.driverBalances.monthly,borderColor:"rgb(139, 92, 246)",backgroundColor:"rgba(139, 92, 246, 0.5)",tension:.4}]};return n?a.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?a.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),a.jsx("p",{children:s}),a.jsx("button",{onClick:()=>o(),className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"لوحة المعلومات المالية"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"عمولات الإدارة"}),a.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["₪",t.adminCommissions.total.toLocaleString()]}),a.jsxs("p",{className:"text-gray-500 mt-2",children:["الرصيد الكلي: ₪",t.adminCommissions.total.toLocaleString()]}),a.jsxs("div",{className:"mt-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"من البائعين:"}),a.jsxs("span",{className:"font-medium",children:["₪",t.adminCommissions.fromVendors.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"من السائقين:"}),a.jsxs("span",{className:"font-medium",children:["₪",t.adminCommissions.fromDrivers.toLocaleString()]})]})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"العمولات حسب طريقة الدفع"}),a.jsxs("div",{className:"mt-2",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{children:"الدفع الإلكتروني:"}),a.jsxs("span",{className:"font-bold",children:["₪",t.adminCommissions.byPaymentType.electronic.toLocaleString()]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:a.jsx("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:`${t.adminCommissions.byPaymentType.electronic/t.adminCommissions.total*100}%`}})})]}),a.jsxs("div",{className:"mt-3",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{children:"الدفع النقدي:"}),a.jsxs("span",{className:"font-bold",children:["₪",t.adminCommissions.byPaymentType.cash.toLocaleString()]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:a.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${t.adminCommissions.byPaymentType.cash/t.adminCommissions.total*100}%`}})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"العمولات المعلقة"}),a.jsxs("div",{className:"text-3xl font-bold text-yellow-600",children:["₪",(t.adminCommissions.pendingFromVendors+t.adminCommissions.pendingFromDrivers).toLocaleString()]}),a.jsxs("div",{className:"mt-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"من البائعين:"}),a.jsxs("span",{className:"font-medium",children:["₪",t.adminCommissions.pendingFromVendors.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"من السائقين:"}),a.jsxs("span",{className:"font-medium",children:["₪",t.adminCommissions.pendingFromDrivers.toLocaleString()]})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"أرصدة البائعين"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600",children:"الرصيد الكلي:"}),a.jsxs("span",{className:"text-xl font-bold",children:["₪",t.vendorBalances.total.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600",children:"الرصيد المتاح:"}),a.jsxs("span",{className:"text-lg font-semibold text-green-600",children:["₪",t.vendorBalances.available.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600",children:"الرصيد المعلق:"}),a.jsxs("span",{className:"text-lg font-semibold text-yellow-600",children:["₪",t.vendorBalances.pending.toLocaleString()]})]}),a.jsxs("div",{className:"pt-4 border-t",children:[a.jsx("p",{className:"text-sm font-medium mb-2",children:"حسب طريقة الدفع:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"الدفع الإلكتروني"}),a.jsxs("p",{className:"text-lg font-semibold",children:["₪",t.vendorBalances.byPaymentType.electronic.toLocaleString()]})]}),a.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"الدفع النقدي"}),a.jsxs("p",{className:"text-lg font-semibold",children:["₪",t.vendorBalances.byPaymentType.cash.toLocaleString()]})]})]})]})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"أرصدة السائقين"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600",children:"الرصيد الكلي:"}),a.jsxs("span",{className:"text-xl font-bold",children:["₪",t.driverBalances.total.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600",children:"الرصيد المتاح:"}),a.jsxs("span",{className:"text-lg font-semibold text-green-600",children:["₪",t.driverBalances.available.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600",children:"الرصيد المعلق:"}),a.jsxs("span",{className:"text-lg font-semibold text-yellow-600",children:["₪",t.driverBalances.pending.toLocaleString()]})]}),a.jsxs("div",{className:"pt-4 border-t",children:[a.jsx("p",{className:"text-sm font-medium mb-2",children:"حسب طريقة الدفع:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"الدفع الإلكتروني"}),a.jsxs("p",{className:"text-lg font-semibold",children:["₪",t.driverBalances.byPaymentType.electronic.toLocaleString()]})]}),a.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"الدفع النقدي"}),a.jsxs("p",{className:"text-lg font-semibold",children:["₪",t.driverBalances.byPaymentType.cash.toLocaleString()]})]})]})]})]})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"إجمالي المبيعات"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"إجمالي المبيعات"}),a.jsxs("p",{className:"text-2xl font-bold",children:["₪",t.totalSales.amount.toLocaleString()]})]}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"الدفع الإلكتروني"}),a.jsxs("p",{className:"text-2xl font-bold",children:["₪",t.totalSales.electronic.toLocaleString()]}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[(t.totalSales.electronic/t.totalSales.amount*100).toFixed(1),"% من المبيعات"]})]}),a.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[a.jsx("p",{className:"text-sm text-green-600 font-medium",children:"الدفع النقدي"}),a.jsxs("p",{className:"text-2xl font-bold",children:["₪",t.totalSales.cash.toLocaleString()]}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[(t.totalSales.cash/t.totalSales.amount*100).toFixed(1),"% من المبيعات"]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"المبيعات والعمولات الشهرية"}),a.jsx("div",{className:"h-80",children:a.jsx(ex,{data:d})})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"أرصدة البائعين والسائقين"}),a.jsx("div",{className:"h-80",children:a.jsx(ex,{data:u})})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"تفاصيل المدفوعات حسب طريقة الدفع"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"طريقة الدفع"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"إجمالي المبيعات"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"عمولات الإدارة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"أرصدة البائعين"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"أرصدة السائقين"})]})}),a.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:"الدفع الإلكتروني"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.totalSales.electronic.toLocaleString()]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.adminCommissions.byPaymentType.electronic.toLocaleString()]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.vendorBalances.byPaymentType.electronic.toLocaleString()]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.driverBalances.byPaymentType.electronic.toLocaleString()]})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:"الدفع النقدي"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.totalSales.cash.toLocaleString()]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.adminCommissions.byPaymentType.cash.toLocaleString()]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.vendorBalances.byPaymentType.cash.toLocaleString()]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.driverBalances.byPaymentType.cash.toLocaleString()]})]}),a.jsxs("tr",{className:"bg-gray-50 font-semibold",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:"الإجمالي"}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.totalSales.amount.toLocaleString()]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.adminCommissions.total.toLocaleString()]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.vendorBalances.total.toLocaleString()]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.driverBalances.total.toLocaleString()]})]})]})]})})]})]})}function kB(){const[t,e]=w.useState([{id:1,consumer_key:"ck_1234567890abcdef1234567890abcdef",description:"مفتاح API للتطبيق",permissions:["read","write"],created_at:"2025-01-15T10:30:00Z",last_used:"2025-04-17T14:20:00Z",status:"active"},{id:2,consumer_key:"ck_abcdef1234567890abcdef1234567890",description:"مفتاح API للموقع",permissions:["read"],created_at:"2025-02-10T09:15:00Z",last_used:"2025-04-15T11:45:00Z",status:"active"},{id:3,consumer_key:"ck_0987654321fedcba0987654321fedcba",description:"مفتاح API للتطبيق الجوال",permissions:["read","write","delete"],created_at:"2025-03-05T14:30:00Z",last_used:null,status:"revoked"}]),[n,r]=w.useState(!1),[s,i]=w.useState(!1),[o,l]=w.useState(null),[d,u]=w.useState({description:"",permissions:["read"]}),p=()=>{if(!d.description){$.error("الرجاء إدخال وصف للمفتاح");return}const b="ck_"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),j="cs_"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),_={id:Math.max(...t.map(N=>N.id))+1,consumer_key:b,description:d.description,permissions:d.permissions,created_at:new Date().toISOString(),last_used:null,status:"active"};e([...t,_]),l({consumer_key:b,consumer_secret:j}),i(!0),r(!1),u({description:"",permissions:["read"]}),$.success("تم إنشاء مفتاح API بنجاح")},f=b=>{e(t.map(j=>j.id===b?{...j,status:"revoked"}:j)),$.success("تم تعطيل المفتاح بنجاح")},x=b=>{e(t.map(j=>j.id===b?{...j,status:"active"}:j)),$.success("تم تفعيل المفتاح بنجاح")},g=b=>{u(j=>{const _=j.permissions.includes(b)?j.permissions.filter(N=>N!==b):[...j.permissions,b];return{...j,permissions:_}})},v=b=>b?new Date(b).toLocaleString("ar-SA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"لم يستخدم بعد";return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"مفاتيح API"}),a.jsx("button",{onClick:()=>r(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إنشاء مفتاح جديد"})]}),s&&a.jsxs("div",{className:"bg-green-50 border border-green-200 p-6 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"تم إنشاء مفتاح API جديد"}),a.jsx("button",{onClick:()=>i(!1),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"مفتاح المستهلك (Consumer Key):"}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("code",{className:"bg-white p-2 rounded border flex-1 text-sm font-mono overflow-x-auto",children:o.consumer_key}),a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(o.consumer_key),$.success("تم نسخ مفتاح المستهلك")},className:"mr-2 p-2 text-blue-600 hover:text-blue-800",children:"نسخ"})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"سر المستهلك (Consumer Secret):"}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("code",{className:"bg-white p-2 rounded border flex-1 text-sm font-mono overflow-x-auto",children:o.consumer_secret}),a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(o.consumer_secret),$.success("تم نسخ سر المستهلك")},className:"mr-2 p-2 text-blue-600 hover:text-blue-800",children:"نسخ"})]})]}),a.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[a.jsx("p",{className:"text-yellow-800 font-medium",children:"تنبيه هام!"}),a.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:"هذه هي المرة الوحيدة التي سيتم فيها عرض سر المستهلك. يرجى حفظه في مكان آمن."})]})]})]}),n?a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"إنشاء مفتاح API جديد"}),a.jsxs("form",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),a.jsx("input",{type:"text",value:d.description,onChange:b=>u({...d,description:b.target.value}),className:"w-full border rounded-md px-3 py-2",placeholder:"مثال: تطبيق الجوال، موقع الويب، إلخ",required:!0}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"أدخل وصفًا يساعدك على تذكر الغرض من هذا المفتاح"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الصلاحيات"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:d.permissions.includes("read"),onChange:()=>g("read"),className:"rounded text-blue-600 focus:ring-blue-500 ml-2"}),a.jsx("span",{children:"قراءة (Read)"}),a.jsx("span",{className:"mr-2 text-sm text-gray-500",children:"- الوصول للقراءة فقط"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:d.permissions.includes("write"),onChange:()=>g("write"),className:"rounded text-blue-600 focus:ring-blue-500 ml-2"}),a.jsx("span",{children:"كتابة (Write)"}),a.jsx("span",{className:"mr-2 text-sm text-gray-500",children:"- إنشاء وتحديث البيانات"})]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:d.permissions.includes("delete"),onChange:()=>g("delete"),className:"rounded text-blue-600 focus:ring-blue-500 ml-2"}),a.jsx("span",{children:"حذف (Delete)"}),a.jsx("span",{className:"mr-2 text-sm text-gray-500",children:"- حذف البيانات"})]})]}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"حدد الصلاحيات التي تريد منحها لهذا المفتاح"})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>r(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),a.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"إنشاء مفتاح"})]})]})]}):a.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الوصف"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المفتاح"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الصلاحيات"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"تاريخ الإنشاء"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"آخر استخدام"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(b=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.description})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("code",{className:"text-sm font-mono bg-gray-100 px-2 py-1 rounded",children:b.consumer_key}),a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(b.consumer_key),$.success("تم نسخ المفتاح")},className:"mr-2 text-blue-600 hover:text-blue-800",children:"نسخ"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex flex-wrap gap-1",children:[b.permissions.includes("read")&&a.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800",children:"قراءة"}),b.permissions.includes("write")&&a.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800",children:"كتابة"}),b.permissions.includes("delete")&&a.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-red-100 text-red-800",children:"حذف"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:v(b.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:v(b.last_used)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${b.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:b.status==="active"?"نشط":"معطل"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:b.status==="active"?a.jsx("button",{onClick:()=>f(b.id),className:"text-red-600 hover:text-red-800",children:"تعطيل"}):a.jsx("button",{onClick:()=>x(b.id),className:"text-green-600 hover:text-green-800",children:"تفعيل"})})]},b.id))})]})})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"كيفية استخدام مفاتيح API"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"المصادقة الأساسية"}),a.jsx("p",{className:"text-gray-600 mb-2",children:"يمكنك استخدام المصادقة الأساسية (Basic Authentication) مع مفتاح المستهلك وسر المستهلك:"}),a.jsx("pre",{className:"bg-gray-100 p-3 rounded-lg overflow-x-auto text-sm",children:a.jsx("code",{children:"const credentials = btoa(`${consumerKey}:${consumerSecret}`);\n\nfetch('https://api.example.com/endpoint', {\n  headers: {\n    'Authorization': `Basic ${credentials}`,\n    'Content-Type': 'application/json'\n  }\n})"})})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"معلمات URL"}),a.jsx("p",{className:"text-gray-600 mb-2",children:"يمكنك أيضًا تمرير المفاتيح كمعلمات URL:"}),a.jsx("pre",{className:"bg-gray-100 p-3 rounded-lg overflow-x-auto text-sm",children:a.jsx("code",{children:"fetch('https://api.example.com/endpoint?consumer_key=ck_xxxx&consumer_secret=cs_xxxx')"})})]}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"ملاحظة أمنية"}),a.jsx("p",{className:"text-blue-700 text-sm",children:"يفضل استخدام المصادقة الأساسية عبر HTTPS لضمان أمان المفاتيح. تجنب استخدام معلمات URL في بيئة الإنتاج."})]})]})]})]})}const SB={},Fw=t=>{let e;const n=new Set,r=(p,f)=>{const x=typeof p=="function"?p(e):p;if(!Object.is(x,e)){const g=e;e=f??(typeof x!="object"||x===null)?x:Object.assign({},e,x),n.forEach(v=>v(e,g))}},s=()=>e,d={setState:r,getState:s,getInitialState:()=>u,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(SB?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(r,s,d);return d},CB=t=>t?Fw(t):Fw;var pS={exports:{}},fS={},mS={exports:{}},gS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Po=w;function EB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var TB=typeof Object.is=="function"?Object.is:EB,PB=Po.useState,DB=Po.useEffect,OB=Po.useLayoutEffect,MB=Po.useDebugValue;function LB(t,e){var n=e(),r=PB({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return OB(function(){s.value=n,s.getSnapshot=e,um(s)&&i({inst:s})},[t,n,e]),DB(function(){return um(s)&&i({inst:s}),t(function(){um(s)&&i({inst:s})})},[t]),MB(n),n}function um(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!TB(t,n)}catch{return!0}}function RB(t,e){return e()}var AB=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?RB:LB;gS.useSyncExternalStore=Po.useSyncExternalStore!==void 0?Po.useSyncExternalStore:AB;mS.exports=gS;var IB=mS.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wp=w,FB=IB;function $B(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zB=typeof Object.is=="function"?Object.is:$B,BB=FB.useSyncExternalStore,UB=wp.useRef,HB=wp.useEffect,WB=wp.useMemo,YB=wp.useDebugValue;fS.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=UB(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=WB(function(){function d(g){if(!u){if(u=!0,p=g,g=r(g),s!==void 0&&o.hasValue){var v=o.value;if(s(v,g))return f=v}return f=g}if(v=f,zB(p,g))return v;var b=r(g);return s!==void 0&&s(v,b)?(p=g,v):(p=g,f=b)}var u=!1,p,f,x=n===void 0?null:n;return[function(){return d(e())},x===null?void 0:function(){return d(x())}]},[e,n,r,s]);var l=BB(t,i[0],i[1]);return HB(function(){o.hasValue=!0,o.value=l},[l]),YB(l),l};pS.exports=fS;var VB=pS.exports;const qB=ys(VB),xS={},{useDebugValue:ZB}=Y,{useSyncExternalStoreWithSelector:KB}=qB;let $w=!1;const GB=t=>t;function QB(t,e=GB,n){(xS?"production":void 0)!=="production"&&n&&!$w&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),$w=!0);const r=KB(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return ZB(r),r}const zw=t=>{(xS?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?CB(t):t,n=(r,s)=>QB(e,r,s);return Object.assign(n,e),n},XB=t=>t?zw(t):zw,JB=XB(t=>({user:null,loading:!0,error:null,init:async()=>{try{t({loading:!0});const{data:{session:e},error:n}=await ee.auth.getSession();if(n)throw n;if(e!=null&&e.user){const{data:r,error:s}=await ee.from("profiles").select("*").eq("id",e.user.id).single();s&&s.code!=="PGRST116"&&console.error("Error fetching profile:",s),t({user:{...e.user,...r},loading:!1})}else t({user:null,loading:!1})}catch(e){console.error("Auth initialization error:",e),t({error:e,loading:!1})}},signIn:async(e,n)=>{try{t({loading:!0});const{data:r,error:s}=await ee.auth.signInWithPassword({email:e,password:n});if(s)throw s;const{data:i,error:o}=await ee.from("profiles").select("*").eq("id",r.user.id).single();return o&&o.code!=="PGRST116"&&console.error("Error fetching profile:",o),t({user:{...r.user,...i},loading:!1}),r.user}catch(r){throw console.error("Sign in error:",r),t({error:r,loading:!1}),r}},signOut:async()=>{try{t({loading:!0});const{error:e}=await ee.auth.signOut();if(e)throw e;t({user:null,loading:!1})}catch(e){throw console.error("Sign out error:",e),t({error:e,loading:!1}),e}},updateUser:e=>{t({user:{...e}})}})),e9=async t=>{try{const{data:e,error:n}=await ee.rpc("get_order_status_history_with_users",{p_order_id:t});if(n){console.error("Error using RPC function:",n);const{data:r,error:s}=await ee.from("order_status_history").select(`
          *,
          user:created_by(*)
        `).eq("order_id",t).order("created_at",{ascending:!0});if(s)throw s;return r||[]}return e}catch(e){throw console.error("Error fetching order status history:",e),e}};function t9({order:t,onClose:e,onStatusUpdate:n,isModal:r=!1}){var oe,he,Se;const{user:s}=JB(),[i,o]=w.useState([]),[l,d]=w.useState(null),[u,p]=w.useState("15"),[f,x]=w.useState(t.status),[g,v]=w.useState([]),[b,j]=w.useState("specific"),[_,N]=w.useState(!1),[S,P]=w.useState(!0),[M,A]=w.useState(!0),[R,T]=w.useState(!1),[V,D]=w.useState(""),[U,te]=w.useState(t.status),[G,B]=w.useState(null),[Z,C]=w.useState(!1),q=[{value:"pending",label:"معلق"},{value:"accepted",label:"مقبول"},{value:"processing",label:"قيد التحضير"},{value:"waiting-for-driver",label:"في قائمة الانتظار"},{value:"delivering",label:"مع السائق"},{value:"completed",label:"مكتمل"},{value:"cancelled",label:"ملغي"}];w.useEffect(()=>{I(),X()},[s]);const I=async()=>{try{P(!0);const{data:ae,error:ke}=await ee.from("drivers").select("id, name, status, rating, phone").order("name");if(ke)throw ke;o(ae||[])}catch(ae){console.error("Error loading drivers:",ae),$.error("حدث خطأ أثناء تحميل قائمة السائقين")}finally{P(!1)}},X=async()=>{try{A(!0);const ae=await e9(t.id);ae&&ae.length>0?v(ae.map(ke=>({id:ke.id,status:ke.status,note:ke.note||re(ke.status),created_at:ke.created_at}))):v([{id:"initial",status:t.status,note:"تم إنشاء الطلب",created_at:t.created_at}])}catch(ae){console.error("Error loading status history:",ae),v([{id:"initial",status:t.status,note:"تم إنشاء الطلب",created_at:t.created_at}])}finally{A(!1)}},E=async()=>{var ae;if(!s){$.error("يرجى تسجيل الدخول للمتابعة");return}try{T(!0),B(null);const{data:ke,error:We}=await ee.from("vendors").select("id").eq("store_name",(ae=t.vendor)==null?void 0:ae.store_name).single();if(We)throw console.error("Error fetching vendor:",We),B("فشل في العثور على البائع"),We;const{error:ht}=await ee.from("driver_waiting_list").insert([{order_id:t.id,vendor_id:ke.id,status:"pending"}]);if(ht)throw console.error("Error adding to waiting list:",ht),B("فشل في إضافة الطلب لقائمة الانتظار"),ht;await Q("waiting-for-driver","تم إضافة الطلب لقائمة انتظار السائقين"),$.success("تم إضافة الطلب لقائمة انتظار السائقين")}catch(ke){console.error("Error adding to waiting list:",ke),$.error("حدث خطأ أثناء إضافة الطلب لقائمة الانتظار"),B("حدث خطأ أثناء إضافة الطلب لقائمة الانتظار")}finally{T(!1)}},K=async()=>{if(!s){$.error("يرجى تسجيل الدخول للمتابعة");return}if(b==="waiting-list"){await E();return}if(!l){$.error("الرجاء اختيار سائق");return}try{const{error:ae}=await ee.from("orders").update({driver_id:l.id,status:"delivering"}).eq("id",t.id);if(ae)throw ae;const{error:ke}=await ee.from("order_status_history").insert([{order_id:t.id,status:"delivering",note:`تم تعيين السائق ${l.name}`,created_by:s.id}]);ke&&console.error("Error adding status history:",ke),x("delivering"),typeof n=="function"&&n(t.id,"delivering"),await X(),$.success(`تم تعيين السائق ${l.name} للطلب`)}catch(ae){console.error("Error assigning driver:",ae),$.error("فشل في تعيين السائق")}},re=ae=>{switch(ae){case"processing":return"تم بدء تحضير الطلب";case"delivering":return"تم تحويل الطلب للتوصيل";case"waiting-for-driver":return"تم إضافة الطلب لقائمة انتظار السائقين";case"completed":return"تم إكمال الطلب";case"accepted":return"تم قبول الطلب";case"rejected":return"تم رفض الطلب";default:return`تم تغيير الحالة إلى ${le(ae)}`}},Q=async(ae,ke="")=>{if(!s){$.error("يرجى تسجيل الدخول للمتابعة");return}try{C(!0);const{error:We}=await ee.from("order_status_history").insert([{order_id:t.id,status:ae,note:ke||V||re(ae),created_by:s.id}]);if(We)throw We;const{error:ht}=await ee.from("orders").update({status:ae}).eq("id",t.id);if(ht)throw ht;x(ae),typeof n=="function"&&n(t.id,ae),await X(),D(""),$.success("تم تحديث حالة الطلب"),ae==="completed"&&N(!0)}catch(We){console.error("Error updating status:",We),$.error("حدث خطأ أثناء تحديث الحالة")}finally{C(!1)}},se=async()=>{if(!s){$.error("يرجى تسجيل الدخول للمتابعة");return}try{C(!0),await Q(U)}catch(ae){console.error("Error updating status:",ae),$.error("حدث خطأ أثناء تحديث الحالة")}},le=ae=>{const ke=q.find(We=>We.value===ae);return ke?ke.label:ae},ie=ae=>{switch(ae){case"pending":return"bg-yellow-100 text-yellow-800";case"accepted":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";case"processing":return"bg-yellow-100 text-yellow-800";case"waiting-for-driver":return"bg-orange-100 text-orange-800";case"delivering":return"bg-purple-100 text-purple-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ge=()=>{Q("accepted","تم قبول الطلب"),$.success("تم قبول الطلب بنجاح")},ve=()=>{Q("rejected","تم رفض الطلب"),$.error("تم رفض الطلب")},W=()=>{$.success("تم تقييم الزبون بنجاح"),N(!1)};return a.jsxs("div",{className:"bg-white rounded-lg p-6 relative z-50 max-w-3xl max-h-[90vh] overflow-y-auto shadow-2xl",onClick:ae=>ae.stopPropagation(),children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("h2",{className:"text-xl font-semibold",children:["إجراءات الطلب #",t.id.substring(0,8)]}),a.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 z-50",children:"✕"})]}),!s&&a.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:[a.jsx("strong",{className:"font-bold",children:"تنبيه!"}),a.jsx("span",{className:"block sm:inline",children:" يرجى تسجيل الدخول للمتابعة."})]}),_?a.jsx(y8,{orderId:t.id,driverId:(l==null?void 0:l.id)||t.driver_id,customerId:t.customer_id,onComplete:W}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"border rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"معلومات الطلب"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("p",{children:["المتجر: ",((oe=t.vendor)==null?void 0:oe.store_name)||"غير محدد"]}),a.jsxs("p",{children:["الزبون: ",((he=t.customer)==null?void 0:he.name)||"غير محدد"]}),a.jsxs("p",{children:["المبلغ: ₪",parseFloat(t.total).toFixed(2)]}),a.jsxs("div",{className:"mt-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:"المنتجات:"}),a.jsx("ul",{className:"list-disc list-inside",children:(Se=t.items)==null?void 0:Se.map((ae,ke)=>{var We;return a.jsxs("li",{children:[((We=ae.product)==null?void 0:We.name)||"منتج"," × ",ae.quantity," (₪",parseFloat(ae.price).toFixed(2),")"]},ke)})})]})]})]}),t.status==="pending"&&a.jsxs("div",{className:"border rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"font-semibold mb-4",children:"قبول/رفض الطلب"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:ge,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition-colors",disabled:!s,children:"قبول الطلب"}),a.jsx("button",{onClick:ve,className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 transition-colors",disabled:!s,children:"رفض الطلب"})]})]}),a.jsxs("div",{className:"border rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"وقت التحضير"}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("input",{type:"number",min:"5",max:"120",value:u,onChange:ae=>p(ae.target.value),className:"border rounded-md p-2 w-24"}),a.jsx("span",{children:"دقيقة"})]})]}),a.jsxs("div",{className:"border rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"تعيين سائق"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex space-x-4 mb-4",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",value:"specific",checked:b==="specific",onChange:ae=>j(ae.target.value),className:"ml-2"}),"تعيين سائق محدد"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",value:"waiting-list",checked:b==="waiting-list",onChange:ae=>j(ae.target.value),className:"ml-2"}),"إضافة لقائمة الانتظار"]})]}),b==="specific"&&a.jsxs("select",{className:"w-full border rounded-md p-2",value:(l==null?void 0:l.id)||"",onChange:ae=>{const ke=i.find(We=>We.id===ae.target.value);d(ke||null)},children:[a.jsx("option",{value:"",children:"اختر سائق"}),S?a.jsx("option",{disabled:!0,children:"جاري تحميل السائقين..."}):i.map(ae=>a.jsxs("option",{value:ae.id,disabled:ae.status==="busy",children:[ae.name," (",ae.rating," ★) - ",ae.status==="available"?"متاح":"مشغول"]},ae.id))]}),a.jsx("button",{onClick:K,disabled:!s||R||b==="specific"&&!l||f==="delivering",className:`w-full text-white py-2 rounded-md transition-colors ${!s||R||b==="specific"&&!l||f==="delivering"?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:R?"جاري الإضافة...":f==="delivering"?"تم تعيين السائق":b==="waiting-list"?"إضافة للقائمة":"تعيين السائق"}),G&&a.jsx("p",{className:"mt-2 text-sm text-red-600",children:G})]})]}),a.jsxs("div",{className:"border rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"تحديث الحالة"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{children:a.jsx("select",{value:U,onChange:ae=>te(ae.target.value),className:"w-full border rounded-md p-2",children:q.map(ae=>a.jsx("option",{value:ae.value,children:ae.label},ae.value))})}),a.jsx("div",{children:a.jsx("input",{type:"text",value:V,onChange:ae=>D(ae.target.value),placeholder:"ملاحظات (اختياري)",className:"w-full border rounded-md p-2"})}),a.jsx("button",{onClick:se,disabled:!s||Z,className:`w-full bg-blue-500 text-white py-2 rounded-md hover:bg-blue-600 transition-colors ${!s||Z?"opacity-70 cursor-not-allowed":""}`,children:Z?"جاري التحديث...":"تحديث الحالة"})]})]}),a.jsxs("div",{className:"border rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold mb-3",children:"سجل الحالات"}),M?a.jsx("div",{className:"flex justify-center py-4",children:a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):a.jsx("div",{className:"space-y-3",children:g.map(ae=>a.jsxs("div",{className:"flex items-center space-x-4 border-b pb-2",children:[a.jsx("div",{className:`px-3 py-1 rounded-full ${ie(ae.status)}`,children:le(ae.status)}),a.jsx("div",{className:"text-gray-600",children:ae.note}),a.jsx("div",{className:"text-gray-500 text-sm",children:new Date(ae.created_at).toLocaleTimeString("ar-SA")})]},ae.id))})]})]})]})}const n9={customer_name:"اسم العميل",customer_phone:"هاتف العميل",address:"العنوان",vendor_name:"اسم التاجر",total:"المبلغ",status:"الحالة",created_at:"تاريخ الطلب"},hm=["customer_name","customer_phone","address","vendor_name","total","status","created_at"];function r9(){const[t,e]=w.useState([]),[n,r]=w.useState(!0),[s,i]=w.useState(null),[o,l]=w.useState(null),[d,u]=w.useState(!1),p=v=>v?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(v)}`:null,f=w.useCallback(async()=>{r(!0),i(null);try{if(!ee)throw new Error("Supabase client is not initialized");const{data:v}=await ee.from("orders").select("count").limit(1).single();if(!v)throw new Error("Could not connect to the database");const b=new Promise((P,M)=>setTimeout(()=>M(new Error("Request timeout")),1e4)),j=ee.from("orders").select(`
          id,
          total,
          status,
          created_at,
          address,
          customer_name,
          customer_phone,
          vendor_name
        `).order("created_at",{ascending:!1}),{data:_,error:N}=await Promise.race([j,b]);if(N)throw console.error("Supabase error:",N),new Error(`Database error: ${N.message}`);if(!_)throw new Error("No data received from the server");const S=_.map(P=>({id:P.id,customer_name:P.customer_name||"غير معروف",customer_phone:P.customer_phone||"غير متوفر",address:P.address||"غير متوفر",vendor_name:P.vendor_name||"غير معروف",total:P.total,status:P.status,created_at:P.created_at}));e(S)}catch(v){console.error("Error fetching orders:",v);let b="فشل في جلب الطلبات. ";v.message.includes("timeout")?b+="انتهت مهلة الاتصال بالخادم.":v.message.includes("network")?b+="يرجى التحقق من اتصال الإنترنت.":v.message.includes("Database error")?b+=v.message:b+="حدث خطأ غير متوقع.",i(b),$.error(b)}finally{r(!1)}},[]);w.useEffect(()=>{f()},[f]);const x=(v,b)=>v==null?"غير متوفر":b==="created_at"?new Date(v).toLocaleString("ar-EG"):b==="total"?`${Number(v).toFixed(2)} شيكل`:String(v),g=v=>{l(v),u(!0)};return a.jsxs("div",{className:"p-4 relative",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"قائمة الطلبات"}),n&&a.jsx("p",{className:"text-center py-4",children:"جاري التحميل..."}),s&&a.jsxs("div",{className:"text-red-500 text-center py-4 mb-4",children:[a.jsx("p",{children:s}),a.jsx("button",{onClick:f,className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"إعادة المحاولة"})]}),!n&&!s&&a.jsx("div",{className:"overflow-x-auto shadow-md rounded-lg",children:a.jsxs("table",{className:"min-w-full bg-white",children:[a.jsx("thead",{className:"bg-gray-100",children:a.jsxs("tr",{children:[hm.map(v=>a.jsx("th",{className:"p-3 text-right border-b",children:n9[v]},v)),a.jsx("th",{className:"p-3 text-right border-b",children:"الإجراءات"})]})}),a.jsx("tbody",{children:t.length>0?t.map(v=>a.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[hm.map(b=>a.jsx("td",{className:"p-3 border-b text-right",children:b==="address"&&v.address?a.jsxs("a",{href:p(v.address),target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline hover:text-blue-700",title:"فتح في خرائط Google",children:[v.address,a.jsx("svg",{className:"w-4 h-4 inline-block mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}):x(v[b],b)},`${v.id}-${b}`)),a.jsx("td",{className:"p-3 border-b",children:a.jsx("button",{onClick:()=>g(v),className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"إجراءات"})})]},v.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:hm.length+1,className:"p-4 text-center text-gray-500",children:"لا توجد طلبات متاحة"})})})]})}),d&&o&&a.jsx(Bf,{appear:!0,show:d,as:w.Fragment,children:a.jsx(_e,{as:"div",className:"fixed inset-0 z-50 overflow-y-auto",onClose:()=>{u(!1),f()},children:a.jsxs("div",{className:"min-h-screen px-4 text-center",children:[a.jsx(Bf.Child,{as:w.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx(_e.Overlay,{className:"fixed inset-0 bg-black bg-opacity-50"})}),a.jsx("span",{className:"inline-block h-screen align-middle","aria-hidden":"true",children:"​"}),a.jsx(Bf.Child,{as:w.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:a.jsx("div",{className:"inline-block w-full max-w-3xl my-8 text-right align-middle transition-all transform",children:a.jsx(t9,{order:o,onClose:()=>{u(!1),f()},isModal:!0})})})]})})})]})}function s9(){const[t,e]=w.useState([]),[n,r]=w.useState(!0),[s,i]=w.useState("grid");w.useEffect(()=>{o()},[]);const o=async()=>{try{r(!0);const g=await $F();e(g)}catch(g){console.error("Error fetching vendors:",g),$.error("فشل في تحميل البائعين"),e([{id:1,store_name:"متجر كوفي",phone:"0599123456",address:"غزة - الرمال",description:"متجر متخصص في القهوة والمشروبات الساخنة",rating:4.8,rating_count:156,status:"active",logo_url:"https://images.unsplash.com/photo-1559925393-8be0ec4767c8?q=80&w=100&auto=format&fit=crop",banner_url:"https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?q=80&w=400&auto=format&fit=crop",delivery_type:"distance",delivery_radius:5,price_per_km:2},{id:2,store_name:"متجر الشاي",phone:"0599234567",address:"غزة - النصر",description:"متجر متخصص في الشاي والأعشاب",rating:4.5,rating_count:98,status:"active",logo_url:"https://images.unsplash.com/photo-1576092768241-dec231879fc3?q=80&w=100&auto=format&fit=crop",banner_url:"https://images.unsplash.com/photo-1564890369478-c89ca6d9cde9?q=80&w=400&auto=format&fit=crop",delivery_type:"fixed",delivery_radius:null,price_per_km:null},{id:3,store_name:"متجر العصائر",phone:"0599345678",address:"غزة - التفاح",description:"متجر متخصص في العصائر الطازجة",rating:4.7,rating_count:120,status:"active",logo_url:"https://images.unsplash.com/photo-1589733955941-5eeaf752f6dd?q=80&w=100&auto=format&fit=crop",banner_url:"https://images.unsplash.com/photo-1600271886742-f049cd451bba?q=80&w=400&auto=format&fit=crop",delivery_type:"distance",delivery_radius:3,price_per_km:3}])}finally{r(!1)}},l=async(g,v)=>{try{const{error:b}=await ee.rpc("update_vendor_status",{p_vendor_id:g,p_status:v});if(b)throw b;e(t.map(j=>j.id===g?{...j,status:v}:j)),$.success(`تم تغيير حالة البائع إلى ${u(v)}`)}catch(b){console.error("Error updating vendor status:",b),$.error("فشل في تحديث حالة البائع")}},d=g=>{switch(g){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"busy":return"bg-yellow-100 text-yellow-800";case"pending":return"bg-blue-100 text-blue-800";case"suspended":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},u=g=>{switch(g){case"active":return"مفتوح";case"inactive":return"مغلق";case"busy":return"مشغول";case"pending":return"معلق";case"suspended":return"موقوف";default:return g}},p=g=>{switch(g){case"distance":return"حسب المسافة";case"fixed":return"سعر ثابت";case"zones":return"مناطق";default:return g}},f=()=>a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map(g=>a.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[g.banner_url&&a.jsx("img",{src:g.banner_url,alt:`${g.store_name} banner`,className:"w-full h-48 object-cover",onError:v=>{v.target.onerror=null,v.target.src="https://via.placeholder.com/300x200?text=No+Image"}}),a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex items-center",children:[g.logo_url&&a.jsx("img",{src:g.logo_url,alt:g.store_name,className:"w-10 h-10 rounded-full object-cover ml-3",onError:v=>{v.target.onerror=null,v.target.src="https://via.placeholder.com/40?text=Logo"}}),a.jsx("h3",{className:"text-lg font-semibold",children:g.store_name})]}),a.jsxs("div",{className:"relative inline-block",children:[a.jsxs("select",{value:g.status,onChange:v=>l(g.id,v.target.value),className:`px-2 py-1 text-xs rounded-full ${d(g.status)} appearance-none pr-8 cursor-pointer`,children:[a.jsx("option",{value:"active",children:"مفتوح"}),a.jsx("option",{value:"inactive",children:"مغلق"}),a.jsx("option",{value:"busy",children:"مشغول"}),a.jsx("option",{value:"pending",children:"معلق"}),a.jsx("option",{value:"suspended",children:"موقوف"})]}),a.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-2",children:a.jsx("svg",{className:"h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),a.jsxs("div",{className:"flex items-center mt-1",children:[a.jsx("span",{className:"text-yellow-500",children:"★"}),a.jsx("span",{className:"ml-1",children:g.rating}),a.jsxs("span",{className:"text-gray-500 ml-1",children:["(",g.rating_count,")"]})]}),a.jsx("p",{className:"text-gray-600 text-sm mt-2",children:g.description}),a.jsxs("div",{className:"mt-4 space-y-1 text-sm",children:[a.jsx("p",{className:"text-gray-500",children:g.address}),a.jsx("p",{className:"text-gray-500",children:g.phone})]}),a.jsx("div",{className:"mt-4 pt-4 border-t",children:a.jsxs("div",{className:"text-sm",children:[a.jsx("div",{className:"font-medium text-gray-900",children:p(g.delivery_type)}),g.delivery_type==="distance"&&a.jsxs("div",{className:"text-sm text-gray-500",children:[g.delivery_radius," كم - ₪",g.price_per_km,"/كم"]})]})})]})]},g.id))}),x=()=>a.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المتجر"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التقييم"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العنوان"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التوصيل"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(g=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[g.logo_url&&a.jsx("img",{src:g.logo_url,alt:g.store_name,className:"w-10 h-10 rounded-full object-cover ml-3",onError:v=>{v.target.onerror=null,v.target.src="https://via.placeholder.com/40?text=Logo"}}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:g.store_name}),a.jsx("div",{className:"text-gray-500",children:g.phone})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-yellow-500",children:"★"}),a.jsx("span",{className:"ml-1",children:g.rating}),a.jsxs("span",{className:"text-gray-500 ml-1",children:["(",g.rating_count,")"]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:g.address}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:p(g.delivery_type)}),g.delivery_type==="distance"&&a.jsxs("div",{className:"text-sm text-gray-500",children:[g.delivery_radius," كم - ₪",g.price_per_km,"/كم"]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"relative inline-block",children:[a.jsxs("select",{value:g.status,onChange:v=>l(g.id,v.target.value),className:`px-2 py-1 text-xs rounded-full ${d(g.status)} appearance-none pr-8 cursor-pointer`,children:[a.jsx("option",{value:"active",children:"مفتوح"}),a.jsx("option",{value:"inactive",children:"مغلق"}),a.jsx("option",{value:"busy",children:"مشغول"}),a.jsx("option",{value:"pending",children:"معلق"}),a.jsx("option",{value:"suspended",children:"موقوف"})]}),a.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-2",children:a.jsx("svg",{className:"h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})})]},g.id))})]})})});return n?a.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"البائعين"}),a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>i("grid"),className:`px-3 py-1 rounded ${s==="grid"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض شبكي"}),a.jsx("button",{onClick:()=>i("table"),className:`px-3 py-1 rounded ${s==="table"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض جدول"})]})})]}),s==="grid"?f():x()]})}function i9({categoryId:t,className:e=""}){var x;const[n,r]=w.useState(null),[s,i]=w.useState(!0),[o,l]=w.useState(null);w.useEffect(()=>{t&&d()},[t]);const d=async()=>{try{i(!0);const g=new Date().toISOString().split("T")[0],{data:v,error:b}=await ee.from("advertisements").select(`
          *,
          vendor:vendor_id(store_name)
        `).eq("vendor_category_id",t).eq("position","vendor_category").eq("status","active").lte("start_date",g).gte("end_date",g).order("priority",{ascending:!0}).limit(1);if(b)throw b;v&&v.length>0?(r(v[0]),u(v[0].id)):r(null),l(null)}catch(g){console.error("Error fetching vendor category advertisement:",g),l("فشل في تحميل الإعلان"),r(null)}finally{i(!1)}},u=async g=>{try{await ee.rpc("increment_advertisement_views",{p_ad_id:g})}catch(v){console.error("Error recording advertisement view:",v)}},p=async()=>{if(n!=null&&n.id)try{await ee.rpc("increment_advertisement_clicks",{p_ad_id:n.id})}catch(g){console.error("Error recording advertisement click:",g)}};if(s)return a.jsx("div",{className:`animate-pulse bg-gray-200 rounded-lg ${e}`,style:{aspectRatio:"16/5"}});if(o||!n)return null;const f=a.jsxs("div",{className:`relative overflow-hidden rounded-lg ${e}`,style:{aspectRatio:"16/5"},children:[a.jsx("img",{src:n.image_url,alt:n.title,className:"w-full h-full object-cover",onError:g=>{g.target.onerror=null,g.target.src="data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22800%22%20height%3D%22250%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Crect%20width%3D%22800%22%20height%3D%22250%22%20fill%3D%22%23e2e8f0%22%3E%3C%2Frect%3E%3Ctext%20x%3D%22400%22%20y%3D%22125%22%20font-size%3D%2230%22%20text-anchor%3D%22middle%22%20alignment-baseline%3D%22middle%22%20font-family%3D%22Arial%2C%20sans-serif%22%20fill%3D%22%2364748b%22%3E%D8%A5%D8%B9%D9%84%D8%A7%D9%86%3C%2Ftext%3E%3C%2Fsvg%3E"}}),a.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent flex flex-col justify-end p-4",children:[a.jsx("h3",{className:"text-white text-xl font-bold",children:n.title}),n.description&&a.jsx("p",{className:"text-white/90 text-sm mt-1",children:n.description})]}),((x=n.vendor)==null?void 0:x.store_name)&&a.jsx("div",{className:"absolute top-2 left-2 bg-white/80 px-2 py-1 rounded text-xs",children:n.vendor.store_name})]});return n.link?a.jsx(rh,{to:n.link,onClick:p,children:f}):f}function a9(){const[t,e]=w.useState([]),[n,r]=w.useState([]),[s,i]=w.useState(!0),[o,l]=w.useState(null),[d,u]=w.useState(!1),[p,f]=w.useState(!1),[x,g]=w.useState(!1),[v,b]=w.useState(null),[j,_]=w.useState(null),[N,S]=w.useState({name:"",description:"",image_url:"",slug:""}),[P,M]=w.useState(""),[A,R]=w.useState([]),[T,V]=w.useState({title:"",description:"",vendor_id:"",image_url:"",link:"",start_date:"",end_date:"",status:"draft",type:"banner",position:"vendor_category",priority:1});w.useEffect(()=>{D()},[]);const D=async()=>{try{i(!0),l(null);const{data:E,error:K}=await ee.from("vendor_categories_table").select("*").order("name");if(K)throw K;e(E||[]);const{data:re,error:Q}=await ee.from("vendors").select("id, store_name").order("store_name");if(Q)throw Q;r(re||[])}catch(E){console.error("Error fetching data:",E),l("فشل في تحميل البيانات. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل البيانات")}finally{i(!1)}},U=async E=>{E.preventDefault();try{i(!0);const K=N.slug||N.name.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"");if(v){const{data:re,error:Q}=await ee.from("vendor_categories_table").update({name:N.name,description:N.description,image_url:N.image_url,slug:K,updated_at:new Date().toISOString()}).eq("id",v.id).select();if(Q)throw Q;$.success("تم تحديث القسم بنجاح")}else{const{data:re,error:Q}=await ee.from("vendor_categories_table").insert([{name:N.name,description:N.description,image_url:N.image_url,slug:K}]).select();if(Q)throw Q;$.success("تم إضافة القسم بنجاح")}D(),u(!1),b(null),S({name:"",description:"",image_url:"",slug:""})}catch(K){console.error("Error saving category:",K),$.error(v?"فشل في تحديث القسم":"فشل في إضافة القسم")}finally{i(!1)}},te=async E=>{E.preventDefault();try{if(i(!0),!T.title||!T.image_url||!T.start_date||!T.end_date){$.error("الرجاء تعبئة جميع الحقول المطلوبة"),i(!1);return}const{data:K,error:re}=await ee.from("advertisements").insert([{title:T.title,description:T.description,vendor_id:T.vendor_id||null,vendor_category_id:j.id,image_url:T.image_url,link:T.link,start_date:T.start_date,end_date:T.end_date,status:T.status,type:T.type,position:"vendor_category",priority:parseInt(T.priority)}]).select();if(re)throw re;$.success("تم إضافة الإعلان بنجاح"),g(!1),V({title:"",description:"",vendor_id:"",image_url:"",link:"",start_date:"",end_date:"",status:"draft",type:"banner",position:"vendor_category",priority:1})}catch(K){console.error("Error saving advertisement:",K),$.error("فشل في حفظ الإعلان")}finally{i(!1)}},G=async E=>{if(window.confirm("هل أنت متأكد من حذف هذا القسم؟"))try{const{error:K}=await ee.from("vendor_categories_table").delete().eq("id",E);if(K)throw K;$.success("تم حذف القسم بنجاح"),D()}catch(K){console.error("Error deleting category:",K),$.error("فشل في حذف القسم")}},B=({preview:E})=>{E&&S({...N,image_url:E})},Z=({preview:E})=>{E&&V({...T,image_url:E})},C=async E=>{try{i(!0),_(E);const{data:K,error:re}=await ee.from("vendor_to_category").select(`
          vendor:vendor_id(id, store_name)
        `).eq("category_id",E.id);if(re)console.error("Error fetching category vendors:",re),R([]);else{const Q=K.filter(se=>se.vendor).map(se=>se.vendor);R(Q)}f(!0)}catch(K){console.error("Error fetching category vendors:",K),$.error("فشل في تحميل البائعين")}finally{i(!1)}},q=async()=>{if(!j||!P){$.error("الرجاء اختيار البائع");return}try{i(!0);const{data:E,error:K}=await ee.from("vendor_to_category").select("*").eq("vendor_id",P).eq("category_id",j.id);if(K&&K.code!=="PGRST116")throw K;if(E&&E.length>0){$.info("هذا البائع مرتبط بالفعل بهذا القسم"),M("");return}const{error:re}=await ee.from("vendor_to_category").insert([{vendor_id:P,category_id:j.id}]);if(re)throw re;$.success("تم ربط البائع بالقسم بنجاح");const{data:Q,error:se}=await ee.from("vendor_to_category").select(`
          vendor:vendor_id(id, store_name)
        `).eq("category_id",j.id);if(se)throw se;const le=Q.filter(ie=>ie.vendor).map(ie=>ie.vendor);R(le),M("")}catch(E){console.error("Error linking vendor to category:",E),$.error("فشل في ربط البائع بالقسم: "+E.message)}finally{i(!1)}},I=async E=>{if(!(!j||!E))try{i(!0);const{error:K}=await ee.from("vendor_to_category").delete().eq("vendor_id",E).eq("category_id",j.id);if(K)throw K;$.success("تم إلغاء ربط البائع بالقسم بنجاح"),R(A.filter(re=>re.id!==E))}catch(K){console.error("Error unlinking vendor from category:",K),$.error("فشل في إلغاء ربط البائع بالقسم")}finally{i(!1)}},X=E=>{_(E),V({title:"",description:"",vendor_id:"",image_url:"",link:"",start_date:"",end_date:"",status:"draft",type:"banner",position:"vendor_category",priority:1}),g(!0)};return s&&t.length===0?a.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o?a.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),a.jsx("p",{children:o}),a.jsx("button",{onClick:D,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"أقسام المتاجر"}),a.jsx("button",{onClick:()=>{b(null),S({name:"",description:"",image_url:"",slug:""}),u(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة قسم جديد"})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الصورة"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الاسم"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الوصف"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"عدد البائعين"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإعلان"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"لا توجد أقسام بعد. قم بإضافة قسم جديد."})}):t.map(E=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:E.image_url?a.jsx("img",{src:E.image_url,alt:E.name,className:"w-10 h-10 rounded-full object-cover",onError:K=>{K.target.onerror=null,K.target.src="https://via.placeholder.com/40?text=No+Image"}}):a.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:a.jsx("span",{className:"text-gray-500",children:"لا توجد صورة"})})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"font-medium text-gray-900",children:E.name}),a.jsx("div",{className:"text-sm text-gray-500",children:E.slug})]}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm text-gray-900",children:E.description||"لا يوجد وصف"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("button",{onClick:()=>C(E),className:"text-blue-600 hover:text-blue-800",children:"عرض البائعين"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"flex space-x-2",children:a.jsx("button",{onClick:()=>X(E),className:"text-green-600 hover:text-green-800",children:"إضافة إعلان"})})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[a.jsx("button",{onClick:()=>{b(E),S({name:E.name,description:E.description||"",image_url:E.image_url||"",slug:E.slug||""}),u(!0)},className:"text-blue-600 hover:text-blue-800 ml-4",children:"تعديل"}),a.jsx("button",{onClick:()=>G(E.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},E.id))})]})})}),t.length>0&&a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"معاينة إعلانات الأقسام"}),a.jsx("div",{className:"space-y-6",children:t.map(E=>a.jsxs("div",{className:"border-b pb-6 last:border-b-0 last:pb-0",children:[a.jsx("h4",{className:"text-md font-semibold mb-2",children:E.name}),a.jsx(i9,{categoryId:E.id,className:"w-full"})]},E.id))})]}),a.jsx(_e,{open:d,onClose:()=>{u(!1),b(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),a.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[a.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:v?"تعديل قسم":"إضافة قسم جديد"}),a.jsxs("form",{onSubmit:U,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم القسم ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"text",value:N.name,onChange:E=>S({...N,name:E.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),a.jsx("textarea",{value:N.description,onChange:E=>S({...N,description:E.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الرابط المختصر (Slug)"}),a.jsx("input",{type:"text",value:N.slug,onChange:E=>S({...N,slug:E.target.value}),className:"w-full border rounded-md px-3 py-2",placeholder:"سيتم إنشاؤه تلقائيًا إذا تُرك فارغًا"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"صورة القسم"}),a.jsx(xs,{type:"image",preview:N.image_url,onUpload:B,storeInSupabase:!0,bucket:It.GENERAL,folder:"vendor-categories"})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{u(!1),b(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:s,children:s?"جارٍ الحفظ...":v?"تحديث":"إضافة"})]})]})]})]})}),a.jsx(_e,{open:p,onClose:()=>{f(!1),_(null),R([]),M("")},className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),a.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[a.jsxs(_e.Title,{className:"text-2xl font-bold mb-6",children:["البائعين في قسم: ",j==null?void 0:j.name]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"إضافة بائع للقسم"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("select",{value:P,onChange:E=>M(E.target.value),className:"flex-1 border rounded-md px-3 py-2",children:[a.jsx("option",{value:"",children:"اختر بائع"}),n.map(E=>a.jsx("option",{value:E.id,children:E.store_name},E.id))]}),a.jsx("button",{type:"button",onClick:q,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:!P||s,children:"إضافة"})]})]}),a.jsx("div",{className:"max-h-60 overflow-y-auto",children:A.length===0?a.jsx("p",{className:"text-center text-gray-500 py-4",children:"لا يوجد بائعين في هذا القسم"}):a.jsx("ul",{className:"divide-y divide-gray-200",children:A.map(E=>a.jsxs("li",{className:"py-3 flex justify-between items-center",children:[a.jsx("span",{children:E.store_name}),a.jsx("button",{onClick:()=>I(E.id),className:"text-red-600 hover:text-red-800",children:"إلغاء الربط"})]},E.id))})}),a.jsx("div",{className:"mt-6 flex justify-end",children:a.jsx("button",{type:"button",onClick:()=>{f(!1),_(null),R([]),M("")},className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300",children:"إغلاق"})})]})]})}),a.jsx(_e,{open:x,onClose:()=>{g(!1),_(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[a.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),a.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[a.jsxs(_e.Title,{className:"text-2xl font-bold mb-6",children:["إضافة إعلان لقسم: ",j==null?void 0:j.name]}),a.jsxs("form",{onSubmit:te,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["عنوان الإعلان ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"text",value:T.title,onChange:E=>V({...T,title:E.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),a.jsx("textarea",{value:T.description,onChange:E=>V({...T,description:E.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المتجر"}),a.jsxs("select",{value:T.vendor_id,onChange:E=>V({...T,vendor_id:E.target.value}),className:"w-full border rounded-md px-3 py-2",children:[a.jsx("option",{value:"",children:"اختر المتجر"}),n.map(E=>a.jsx("option",{value:E.id,children:E.store_name},E.id))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["صورة الإعلان ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx(xs,{type:"image",preview:T.image_url,onUpload:Z,storeInSupabase:!0,bucket:It.ADVERTISEMENTS})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رابط الإعلان"}),a.jsx("input",{type:"text",value:T.link,onChange:E=>V({...T,link:E.target.value}),className:"w-full border rounded-md px-3 py-2",placeholder:"https://example.com"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["تاريخ البداية ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"date",value:T.start_date,onChange:E=>V({...T,start_date:E.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["تاريخ النهاية ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"date",value:T.end_date,onChange:E=>V({...T,end_date:E.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نوع الإعلان ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsxs("select",{value:T.type,onChange:E=>V({...T,type:E.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[a.jsx("option",{value:"banner",children:"بانر"}),a.jsx("option",{value:"popup",children:"نافذة منبثقة"}),a.jsx("option",{value:"slider",children:"شريحة عرض"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الحالة ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsxs("select",{value:T.status,onChange:E=>V({...T,status:E.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[a.jsx("option",{value:"draft",children:"مسودة"}),a.jsx("option",{value:"pending",children:"معلق"}),a.jsx("option",{value:"active",children:"نشط"}),a.jsx("option",{value:"expired",children:"منتهي"})]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الأولوية ",a.jsx("span",{className:"text-red-600",children:"*"})]}),a.jsx("input",{type:"number",value:T.priority,onChange:E=>V({...T,priority:parseInt(E.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"1",required:!0}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"الإعلانات ذات الأرقام الأقل تظهر أولاً"})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{g(!1),_(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:s,children:s?"جارٍ الحفظ...":"إضافة الإعلان"})]})]})]})]})})]})}function o9(){const t=da(),e=pi(),{settings:n}=tp(),[r,s]=w.useState("overview");w.useEffect(()=>{document.title=`لوحة تحكم ${n.store.name}`},[n.store.name]),w.useEffect(()=>{const o=e.pathname.split("/").pop();s(o&&o!=="admin-dashboard"?o:"overview")},[e]);const i=o=>{s(o),t(`/admin-dashboard/${o}`)};return a.jsxs("div",{className:"min-h-screen bg-gray-100 flex font-sans overflow-x-hidden w-full",children:[a.jsx(o5,{activeTab:r,onTabChange:i}),a.jsxs("div",{className:"flex-1 mr-64 max-w-[calc(100vw-16rem)]",children:[a.jsx(l5,{}),a.jsx("main",{className:"p-6 space-y-6 overflow-x-hidden",children:a.jsxs(c2,{children:[a.jsx(De,{path:"/",element:a.jsx(Lf,{})}),a.jsx(De,{path:"/overview",element:a.jsx(Lf,{})}),a.jsx(De,{path:"/products",element:a.jsx(C3,{})}),a.jsx(De,{path:"/products-management",element:a.jsx(xF,{})}),a.jsx(De,{path:"/categories",element:a.jsx(vF,{})}),a.jsx(De,{path:"/vendors",element:a.jsx(UF,{})}),a.jsx(De,{path:"/vendors-list",element:a.jsx(s9,{})}),a.jsx(De,{path:"/add-vendor",element:a.jsx(HF,{})}),a.jsx(De,{path:"/vendor-categories-table",element:a.jsx(a9,{})}),a.jsx(De,{path:"/drivers",element:a.jsx(WF,{})}),a.jsx(De,{path:"/add-driver",element:a.jsx(YF,{})}),a.jsx(De,{path:"/shipping-methods",element:a.jsx(VF,{})}),a.jsx(De,{path:"/customers",element:a.jsx(qF,{})}),a.jsx(De,{path:"/add-customer",element:a.jsx(ZF,{})}),a.jsx(De,{path:"/users",element:a.jsx(KF,{})}),a.jsx(De,{path:"/media",element:a.jsx(e8,{})}),a.jsx(De,{path:"/points-rewards",element:a.jsx(c8,{})}),a.jsx(De,{path:"/referral",element:a.jsx(d8,{})}),a.jsx(De,{path:"/coupons",element:a.jsx(u8,{})}),a.jsx(De,{path:"/wallet",element:a.jsx(r8,{})}),a.jsx(De,{path:"/wallet-settings",element:a.jsx(s8,{})}),a.jsx(De,{path:"/notifications",element:a.jsx(i8,{})}),a.jsx(De,{path:"/settings",element:a.jsx(o8,{})}),a.jsx(De,{path:"/advertisements",element:a.jsx(l8,{})}),a.jsx(De,{path:"/wholesale",element:a.jsx(h8,{})}),a.jsx(De,{path:"/payments",element:a.jsx(f8,{})}),a.jsx(De,{path:"/vendor-ratings",element:a.jsx(tm,{type:"vendor"})}),a.jsx(De,{path:"/driver-ratings",element:a.jsx(tm,{type:"driver"})}),a.jsx(De,{path:"/customer-ratings",element:a.jsx(tm,{type:"customer"})}),a.jsx(De,{path:"/ratings-report",element:a.jsx(_B,{})}),a.jsx(De,{path:"/financial-dashboard",element:a.jsx(NB,{})}),a.jsx(De,{path:"/api-keys",element:a.jsx(kB,{})}),a.jsx(De,{path:"/orders",element:a.jsx(r9,{})}),a.jsx(De,{path:"*",element:a.jsx(Lf,{})})]})})]})]})}function l9(){const{isAuthenticated:t,user:e}=Ao(),n=da(),r=()=>{if(!t())return"/login";if(e)switch(e.role){case"admin":return"/admin-dashboard";default:return"/login"}return"/login"};return a.jsx("div",{className:"min-h-screen bg-gray-100 flex flex-col items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md max-w-md w-full text-center",children:[a.jsx("h1",{className:"text-6xl font-bold text-red-500 mb-4",children:"404"}),a.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"الصفحة غير موجودة"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"عذراً، الصفحة التي تبحث عنها غير موجودة أو تم نقلها."}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(rh,{to:r(),className:"block w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"العودة إلى لوحة التحكم"}),a.jsx("button",{onClick:()=>n(-1),className:"block w-full bg-gray-200 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors",children:"العودة للصفحة السابقة"})]})]})})}function c9(){return pi().pathname!=="/"?null:a.jsx(io,{to:"/login",replace:!0})}function d9(){return a.jsx(xD,{children:a.jsx(vD,{children:a.jsx(iD,{children:a.jsxs("div",{className:"w-full overflow-x-hidden",children:[a.jsxs(c2,{children:[a.jsx(De,{path:"/login",element:a.jsx(bD,{})}),a.jsx(De,{path:"/admin-dashboard/*",element:a.jsx(yD,{allowedRoles:["admin"],children:a.jsx(o9,{})})}),a.jsx(De,{path:"/",element:a.jsx(c9,{})}),a.jsx(De,{path:"*",element:a.jsx(l9,{})})]}),a.jsx(cg,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})})})})}pm.createRoot(document.getElementById("root")).render(a.jsx(Y.StrictMode,{children:a.jsx(d9,{})}));export{It as B,xs as M,$ as Q,ys as g,a as j,w as r};
