var wC=Object.defineProperty;var jC=(t,e,n)=>e in t?wC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var De=(t,e,n)=>jC(t,typeof e!="symbol"?e+"":e,n);function NC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var pn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function kC(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Rw={exports:{}},Rh={},Aw={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fc=Symbol.for("react.element"),SC=Symbol.for("react.portal"),CC=Symbol.for("react.fragment"),EC=Symbol.for("react.strict_mode"),TC=Symbol.for("react.profiler"),PC=Symbol.for("react.provider"),DC=Symbol.for("react.context"),MC=Symbol.for("react.forward_ref"),OC=Symbol.for("react.suspense"),LC=Symbol.for("react.memo"),RC=Symbol.for("react.lazy"),R0=Symbol.iterator;function AC(t){return t===null||typeof t!="object"?null:(t=R0&&t[R0]||t["@@iterator"],typeof t=="function"?t:null)}var Iw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fw=Object.assign,$w={};function Po(t,e,n){this.props=t,this.context=e,this.refs=$w,this.updater=n||Iw}Po.prototype.isReactComponent={};Po.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Po.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zw(){}zw.prototype=Po.prototype;function Xg(t,e,n){this.props=t,this.context=e,this.refs=$w,this.updater=n||Iw}var Jg=Xg.prototype=new zw;Jg.constructor=Xg;Fw(Jg,Po.prototype);Jg.isPureReactComponent=!0;var A0=Array.isArray,Bw=Object.prototype.hasOwnProperty,ex={current:null},Uw={key:!0,ref:!0,__self:!0,__source:!0};function Hw(t,e,n){var r,s={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)Bw.call(e,r)&&!Uw.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var d=Array(l),u=0;u<l;u++)d[u]=arguments[u+2];s.children=d}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Fc,type:t,key:a,ref:o,props:s,_owner:ex.current}}function IC(t,e){return{$$typeof:Fc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function tx(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fc}function FC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var I0=/\/+/g;function Kp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?FC(""+t.key):e.toString(36)}function cu(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Fc:case SC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Kp(o,0):r,A0(s)?(n="",t!=null&&(n=t.replace(I0,"$&/")+"/"),cu(s,e,n,"",function(u){return u})):s!=null&&(tx(s)&&(s=IC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(I0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",A0(t))for(var l=0;l<t.length;l++){a=t[l];var d=r+Kp(a,l);o+=cu(a,e,n,d,s)}else if(d=AC(t),typeof d=="function")for(t=d.call(t),l=0;!(a=t.next()).done;)a=a.value,d=r+Kp(a,l++),o+=cu(a,e,n,d,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function xd(t,e,n){if(t==null)return t;var r=[],s=0;return cu(t,r,"","",function(a){return e.call(n,a,s++)}),r}function $C(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var fn={current:null},du={transition:null},zC={ReactCurrentDispatcher:fn,ReactCurrentBatchConfig:du,ReactCurrentOwner:ex};function Ww(){throw Error("act(...) is not supported in production builds of React.")}Ae.Children={map:xd,forEach:function(t,e,n){xd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return xd(t,function(){e++}),e},toArray:function(t){return xd(t,function(e){return e})||[]},only:function(t){if(!tx(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ae.Component=Po;Ae.Fragment=CC;Ae.Profiler=TC;Ae.PureComponent=Xg;Ae.StrictMode=EC;Ae.Suspense=OC;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zC;Ae.act=Ww;Ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Fw({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=ex.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(d in e)Bw.call(e,d)&&!Uw.hasOwnProperty(d)&&(r[d]=e[d]===void 0&&l!==void 0?l[d]:e[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){l=Array(d);for(var u=0;u<d;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Fc,type:t.type,key:s,ref:a,props:r,_owner:o}};Ae.createContext=function(t){return t={$$typeof:DC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:PC,_context:t},t.Consumer=t};Ae.createElement=Hw;Ae.createFactory=function(t){var e=Hw.bind(null,t);return e.type=t,e};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(t){return{$$typeof:MC,render:t}};Ae.isValidElement=tx;Ae.lazy=function(t){return{$$typeof:RC,_payload:{_status:-1,_result:t},_init:$C}};Ae.memo=function(t,e){return{$$typeof:LC,type:t,compare:e===void 0?null:e}};Ae.startTransition=function(t){var e=du.transition;du.transition={};try{t()}finally{du.transition=e}};Ae.unstable_act=Ww;Ae.useCallback=function(t,e){return fn.current.useCallback(t,e)};Ae.useContext=function(t){return fn.current.useContext(t)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(t){return fn.current.useDeferredValue(t)};Ae.useEffect=function(t,e){return fn.current.useEffect(t,e)};Ae.useId=function(){return fn.current.useId()};Ae.useImperativeHandle=function(t,e,n){return fn.current.useImperativeHandle(t,e,n)};Ae.useInsertionEffect=function(t,e){return fn.current.useInsertionEffect(t,e)};Ae.useLayoutEffect=function(t,e){return fn.current.useLayoutEffect(t,e)};Ae.useMemo=function(t,e){return fn.current.useMemo(t,e)};Ae.useReducer=function(t,e,n){return fn.current.useReducer(t,e,n)};Ae.useRef=function(t){return fn.current.useRef(t)};Ae.useState=function(t){return fn.current.useState(t)};Ae.useSyncExternalStore=function(t,e,n){return fn.current.useSyncExternalStore(t,e,n)};Ae.useTransition=function(){return fn.current.useTransition()};Ae.version="18.3.1";Aw.exports=Ae;var j=Aw.exports;const Z=oi(j),lo=NC({__proto__:null,default:Z},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BC=j,UC=Symbol.for("react.element"),HC=Symbol.for("react.fragment"),WC=Object.prototype.hasOwnProperty,YC=BC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VC={key:!0,ref:!0,__self:!0,__source:!0};function Yw(t,e,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)WC.call(e,r)&&!VC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:UC,type:t,key:a,ref:o,props:s,_owner:YC.current}}Rh.Fragment=HC;Rh.jsx=Yw;Rh.jsxs=Yw;Rw.exports=Rh;var i=Rw.exports,dm={},Vw={exports:{}},In={},qw={exports:{}},Zw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,X){var E=I.length;I.push(X);e:for(;0<E;){var K=E-1>>>1,re=I[K];if(0<s(re,X))I[K]=X,I[E]=re,E=K;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var X=I[0],E=I.pop();if(E!==X){I[0]=E;e:for(var K=0,re=I.length,Q=re>>>1;K<Q;){var se=2*(K+1)-1,oe=I[se],ie=se+1,ge=I[ie];if(0>s(oe,E))ie<re&&0>s(ge,oe)?(I[K]=ge,I[ie]=E,K=ie):(I[K]=oe,I[se]=E,K=se);else if(ie<re&&0>s(ge,E))I[K]=ge,I[ie]=E,K=ie;else break e}}return X}function s(I,X){var E=I.sortIndex-X.sortIndex;return E!==0?E:I.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var d=[],u=[],p=1,f=null,x=3,g=!1,v=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(I){for(var X=n(u);X!==null;){if(X.callback===null)r(u);else if(X.startTime<=I)r(u),X.sortIndex=X.expirationTime,e(d,X);else break;X=n(u)}}function P(I){if(b=!1,S(I),!v)if(n(d)!==null)v=!0,C(O);else{var X=n(u);X!==null&&q(P,X.startTime-I)}}function O(I,X){v=!1,b&&(b=!1,_(T),T=-1),g=!0;var E=x;try{for(S(X),f=n(d);f!==null&&(!(f.expirationTime>X)||I&&!U());){var K=f.callback;if(typeof K=="function"){f.callback=null,x=f.priorityLevel;var re=K(f.expirationTime<=X);X=t.unstable_now(),typeof re=="function"?f.callback=re:f===n(d)&&r(d),S(X)}else r(d);f=n(d)}if(f!==null)var Q=!0;else{var se=n(u);se!==null&&q(P,se.startTime-X),Q=!1}return Q}finally{f=null,x=E,g=!1}}var A=!1,R=null,T=-1,Y=5,D=-1;function U(){return!(t.unstable_now()-D<Y)}function ee(){if(R!==null){var I=t.unstable_now();D=I;var X=!0;try{X=R(!0,I)}finally{X?G():(A=!1,R=null)}}else A=!1}var G;if(typeof N=="function")G=function(){N(ee)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,V=z.port2;z.port1.onmessage=ee,G=function(){V.postMessage(null)}}else G=function(){w(ee,0)};function C(I){R=I,A||(A=!0,G())}function q(I,X){T=w(function(){I(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,C(O))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(I){switch(x){case 1:case 2:case 3:var X=3;break;default:X=x}var E=x;x=X;try{return I()}finally{x=E}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,X){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var E=x;x=I;try{return X()}finally{x=E}},t.unstable_scheduleCallback=function(I,X,E){var K=t.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?K+E:K):E=K,I){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=E+re,I={id:p++,callback:X,priorityLevel:I,startTime:E,expirationTime:re,sortIndex:-1},E>K?(I.sortIndex=E,e(u,I),n(d)===null&&I===n(u)&&(b?(_(T),T=-1):b=!0,q(P,E-K))):(I.sortIndex=re,e(d,I),v||g||(v=!0,C(O))),I},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(I){var X=x;return function(){var E=x;x=X;try{return I.apply(this,arguments)}finally{x=E}}}})(Zw);qw.exports=Zw;var qC=qw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZC=j,Rn=qC;function de(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Kw=new Set,ic={};function la(t,e){co(t,e),co(t+"Capture",e)}function co(t,e){for(ic[t]=e,t=0;t<e.length;t++)Kw.add(e[t])}var ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),um=Object.prototype.hasOwnProperty,KC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,F0={},$0={};function GC(t){return um.call($0,t)?!0:um.call(F0,t)?!1:KC.test(t)?$0[t]=!0:(F0[t]=!0,!1)}function QC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function XC(t,e,n,r){if(e===null||typeof e>"u"||QC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mn(t,e,n,r,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xt[t]=new mn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xt[e]=new mn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xt[t]=new mn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xt[t]=new mn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xt[t]=new mn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xt[t]=new mn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xt[t]=new mn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xt[t]=new mn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xt[t]=new mn(t,5,!1,t.toLowerCase(),null,!1,!1)});var nx=/[\-:]([a-z])/g;function rx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(nx,rx);Xt[e]=new mn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(nx,rx);Xt[e]=new mn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(nx,rx);Xt[e]=new mn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xt[t]=new mn(t,1,!1,t.toLowerCase(),null,!1,!1)});Xt.xlinkHref=new mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xt[t]=new mn(t,1,!1,t.toLowerCase(),null,!0,!0)});function sx(t,e,n,r){var s=Xt.hasOwnProperty(e)?Xt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(XC(e,n,s,r)&&(n=null),r||s===null?GC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ys=ZC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vd=Symbol.for("react.element"),Ia=Symbol.for("react.portal"),Fa=Symbol.for("react.fragment"),ix=Symbol.for("react.strict_mode"),hm=Symbol.for("react.profiler"),Gw=Symbol.for("react.provider"),Qw=Symbol.for("react.context"),ax=Symbol.for("react.forward_ref"),pm=Symbol.for("react.suspense"),fm=Symbol.for("react.suspense_list"),ox=Symbol.for("react.memo"),Ps=Symbol.for("react.lazy"),Xw=Symbol.for("react.offscreen"),z0=Symbol.iterator;function rl(t){return t===null||typeof t!="object"?null:(t=z0&&t[z0]||t["@@iterator"],typeof t=="function"?t:null)}var yt=Object.assign,Gp;function jl(t){if(Gp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gp=e&&e[1]||""}return`
`+Gp+t}var Qp=!1;function Xp(t,e){if(!t||Qp)return"";Qp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=r.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var d=`
`+s[o].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=o&&0<=l);break}}}finally{Qp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?jl(t):""}function JC(t){switch(t.tag){case 5:return jl(t.type);case 16:return jl("Lazy");case 13:return jl("Suspense");case 19:return jl("SuspenseList");case 0:case 2:case 15:return t=Xp(t.type,!1),t;case 11:return t=Xp(t.type.render,!1),t;case 1:return t=Xp(t.type,!0),t;default:return""}}function mm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fa:return"Fragment";case Ia:return"Portal";case hm:return"Profiler";case ix:return"StrictMode";case pm:return"Suspense";case fm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Qw:return(t.displayName||"Context")+".Consumer";case Gw:return(t._context.displayName||"Context")+".Provider";case ax:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ox:return e=t.displayName||null,e!==null?e:mm(t.type)||"Memo";case Ps:e=t._payload,t=t._init;try{return mm(t(e))}catch{}}return null}function eE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mm(e);case 8:return e===ix?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ri(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Jw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tE(t){var e=Jw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function yd(t){t._valueTracker||(t._valueTracker=tE(t))}function e1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Jw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Du(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function gm(t,e){var n=e.checked;return yt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function B0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ri(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function t1(t,e){e=e.checked,e!=null&&sx(t,"checked",e,!1)}function xm(t,e){t1(t,e);var n=ri(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vm(t,e.type,n):e.hasOwnProperty("defaultValue")&&vm(t,e.type,ri(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function U0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function vm(t,e,n){(e!=="number"||Du(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Nl=Array.isArray;function Ja(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ri(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ym(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(de(91));return yt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function H0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(de(92));if(Nl(n)){if(1<n.length)throw Error(de(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ri(n)}}function n1(t,e){var n=ri(e.value),r=ri(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function W0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function r1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?r1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bd,s1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bd=bd||document.createElement("div"),bd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ac(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Rl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nE=["Webkit","ms","Moz","O"];Object.keys(Rl).forEach(function(t){nE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Rl[e]=Rl[t]})});function i1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Rl.hasOwnProperty(t)&&Rl[t]?(""+e).trim():e+"px"}function a1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=i1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var rE=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _m(t,e){if(e){if(rE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(de(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(de(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(de(61))}if(e.style!=null&&typeof e.style!="object")throw Error(de(62))}}function wm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jm=null;function lx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Nm=null,eo=null,to=null;function Y0(t){if(t=Bc(t)){if(typeof Nm!="function")throw Error(de(280));var e=t.stateNode;e&&(e=zh(e),Nm(t.stateNode,t.type,e))}}function o1(t){eo?to?to.push(t):to=[t]:eo=t}function l1(){if(eo){var t=eo,e=to;if(to=eo=null,Y0(t),e)for(t=0;t<e.length;t++)Y0(e[t])}}function c1(t,e){return t(e)}function d1(){}var Jp=!1;function u1(t,e,n){if(Jp)return t(e,n);Jp=!0;try{return c1(t,e,n)}finally{Jp=!1,(eo!==null||to!==null)&&(d1(),l1())}}function oc(t,e){var n=t.stateNode;if(n===null)return null;var r=zh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(de(231,e,typeof n));return n}var km=!1;if(ps)try{var sl={};Object.defineProperty(sl,"passive",{get:function(){km=!0}}),window.addEventListener("test",sl,sl),window.removeEventListener("test",sl,sl)}catch{km=!1}function sE(t,e,n,r,s,a,o,l,d){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(p){this.onError(p)}}var Al=!1,Mu=null,Ou=!1,Sm=null,iE={onError:function(t){Al=!0,Mu=t}};function aE(t,e,n,r,s,a,o,l,d){Al=!1,Mu=null,sE.apply(iE,arguments)}function oE(t,e,n,r,s,a,o,l,d){if(aE.apply(this,arguments),Al){if(Al){var u=Mu;Al=!1,Mu=null}else throw Error(de(198));Ou||(Ou=!0,Sm=u)}}function ca(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function h1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function V0(t){if(ca(t)!==t)throw Error(de(188))}function lE(t){var e=t.alternate;if(!e){if(e=ca(t),e===null)throw Error(de(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return V0(s),t;if(a===r)return V0(s),e;a=a.sibling}throw Error(de(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(de(189))}}if(n.alternate!==r)throw Error(de(190))}if(n.tag!==3)throw Error(de(188));return n.stateNode.current===n?t:e}function p1(t){return t=lE(t),t!==null?f1(t):null}function f1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=f1(t);if(e!==null)return e;t=t.sibling}return null}var m1=Rn.unstable_scheduleCallback,q0=Rn.unstable_cancelCallback,cE=Rn.unstable_shouldYield,dE=Rn.unstable_requestPaint,Nt=Rn.unstable_now,uE=Rn.unstable_getCurrentPriorityLevel,cx=Rn.unstable_ImmediatePriority,g1=Rn.unstable_UserBlockingPriority,Lu=Rn.unstable_NormalPriority,hE=Rn.unstable_LowPriority,x1=Rn.unstable_IdlePriority,Ah=null,Fr=null;function pE(t){if(Fr&&typeof Fr.onCommitFiberRoot=="function")try{Fr.onCommitFiberRoot(Ah,t,void 0,(t.current.flags&128)===128)}catch{}}var vr=Math.clz32?Math.clz32:gE,fE=Math.log,mE=Math.LN2;function gE(t){return t>>>=0,t===0?32:31-(fE(t)/mE|0)|0}var _d=64,wd=4194304;function kl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ru(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=kl(l):(a&=o,a!==0&&(r=kl(a)))}else o=n&~s,o!==0?r=kl(o):a!==0&&(r=kl(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vr(e),s=1<<n,r|=t[n],e&=~s;return r}function xE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-vr(a),l=1<<o,d=s[o];d===-1?(!(l&n)||l&r)&&(s[o]=xE(l,e)):d<=e&&(t.expiredLanes|=l),a&=~l}}function Cm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function v1(){var t=_d;return _d<<=1,!(_d&4194240)&&(_d=64),t}function ef(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function $c(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vr(e),t[e]=n}function yE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vr(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function dx(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Qe=0;function y1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var b1,ux,_1,w1,j1,Em=!1,jd=[],Vs=null,qs=null,Zs=null,lc=new Map,cc=new Map,Ls=[],bE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Z0(t,e){switch(t){case"focusin":case"focusout":Vs=null;break;case"dragenter":case"dragleave":qs=null;break;case"mouseover":case"mouseout":Zs=null;break;case"pointerover":case"pointerout":lc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":cc.delete(e.pointerId)}}function il(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=Bc(e),e!==null&&ux(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function _E(t,e,n,r,s){switch(e){case"focusin":return Vs=il(Vs,t,e,n,r,s),!0;case"dragenter":return qs=il(qs,t,e,n,r,s),!0;case"mouseover":return Zs=il(Zs,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return lc.set(a,il(lc.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,cc.set(a,il(cc.get(a)||null,t,e,n,r,s)),!0}return!1}function N1(t){var e=Fi(t.target);if(e!==null){var n=ca(e);if(n!==null){if(e=n.tag,e===13){if(e=h1(n),e!==null){t.blockedOn=e,j1(t.priority,function(){_1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function uu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Tm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);jm=r,n.target.dispatchEvent(r),jm=null}else return e=Bc(n),e!==null&&ux(e),t.blockedOn=n,!1;e.shift()}return!0}function K0(t,e,n){uu(t)&&n.delete(e)}function wE(){Em=!1,Vs!==null&&uu(Vs)&&(Vs=null),qs!==null&&uu(qs)&&(qs=null),Zs!==null&&uu(Zs)&&(Zs=null),lc.forEach(K0),cc.forEach(K0)}function al(t,e){t.blockedOn===e&&(t.blockedOn=null,Em||(Em=!0,Rn.unstable_scheduleCallback(Rn.unstable_NormalPriority,wE)))}function dc(t){function e(s){return al(s,t)}if(0<jd.length){al(jd[0],t);for(var n=1;n<jd.length;n++){var r=jd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Vs!==null&&al(Vs,t),qs!==null&&al(qs,t),Zs!==null&&al(Zs,t),lc.forEach(e),cc.forEach(e),n=0;n<Ls.length;n++)r=Ls[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ls.length&&(n=Ls[0],n.blockedOn===null);)N1(n),n.blockedOn===null&&Ls.shift()}var no=ys.ReactCurrentBatchConfig,Au=!0;function jE(t,e,n,r){var s=Qe,a=no.transition;no.transition=null;try{Qe=1,hx(t,e,n,r)}finally{Qe=s,no.transition=a}}function NE(t,e,n,r){var s=Qe,a=no.transition;no.transition=null;try{Qe=4,hx(t,e,n,r)}finally{Qe=s,no.transition=a}}function hx(t,e,n,r){if(Au){var s=Tm(t,e,n,r);if(s===null)uf(t,e,r,Iu,n),Z0(t,r);else if(_E(s,t,e,n,r))r.stopPropagation();else if(Z0(t,r),e&4&&-1<bE.indexOf(t)){for(;s!==null;){var a=Bc(s);if(a!==null&&b1(a),a=Tm(t,e,n,r),a===null&&uf(t,e,r,Iu,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else uf(t,e,r,null,n)}}var Iu=null;function Tm(t,e,n,r){if(Iu=null,t=lx(r),t=Fi(t),t!==null)if(e=ca(t),e===null)t=null;else if(n=e.tag,n===13){if(t=h1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Iu=t,null}function k1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uE()){case cx:return 1;case g1:return 4;case Lu:case hE:return 16;case x1:return 536870912;default:return 16}default:return 16}}var Fs=null,px=null,hu=null;function S1(){if(hu)return hu;var t,e=px,n=e.length,r,s="value"in Fs?Fs.value:Fs.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[a-r];r++);return hu=s.slice(t,1<r?1-r:void 0)}function pu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Nd(){return!0}function G0(){return!1}function Fn(t){function e(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Nd:G0,this.isPropagationStopped=G0,this}return yt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nd)},persist:function(){},isPersistent:Nd}),e}var Do={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fx=Fn(Do),zc=yt({},Do,{view:0,detail:0}),kE=Fn(zc),tf,nf,ol,Ih=yt({},zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ol&&(ol&&t.type==="mousemove"?(tf=t.screenX-ol.screenX,nf=t.screenY-ol.screenY):nf=tf=0,ol=t),tf)},movementY:function(t){return"movementY"in t?t.movementY:nf}}),Q0=Fn(Ih),SE=yt({},Ih,{dataTransfer:0}),CE=Fn(SE),EE=yt({},zc,{relatedTarget:0}),rf=Fn(EE),TE=yt({},Do,{animationName:0,elapsedTime:0,pseudoElement:0}),PE=Fn(TE),DE=yt({},Do,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ME=Fn(DE),OE=yt({},Do,{data:0}),X0=Fn(OE),LE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=AE[t])?!!e[t]:!1}function mx(){return IE}var FE=yt({},zc,{key:function(t){if(t.key){var e=LE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=pu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?RE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mx,charCode:function(t){return t.type==="keypress"?pu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$E=Fn(FE),zE=yt({},Ih,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),J0=Fn(zE),BE=yt({},zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mx}),UE=Fn(BE),HE=yt({},Do,{propertyName:0,elapsedTime:0,pseudoElement:0}),WE=Fn(HE),YE=yt({},Ih,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),VE=Fn(YE),qE=[9,13,27,32],gx=ps&&"CompositionEvent"in window,Il=null;ps&&"documentMode"in document&&(Il=document.documentMode);var ZE=ps&&"TextEvent"in window&&!Il,C1=ps&&(!gx||Il&&8<Il&&11>=Il),ey=" ",ty=!1;function E1(t,e){switch(t){case"keyup":return qE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function T1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $a=!1;function KE(t,e){switch(t){case"compositionend":return T1(e);case"keypress":return e.which!==32?null:(ty=!0,ey);case"textInput":return t=e.data,t===ey&&ty?null:t;default:return null}}function GE(t,e){if($a)return t==="compositionend"||!gx&&E1(t,e)?(t=S1(),hu=px=Fs=null,$a=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return C1&&e.locale!=="ko"?null:e.data;default:return null}}var QE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ny(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!QE[t.type]:e==="textarea"}function P1(t,e,n,r){o1(r),e=Fu(e,"onChange"),0<e.length&&(n=new fx("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Fl=null,uc=null;function XE(t){B1(t,0)}function Fh(t){var e=Ua(t);if(e1(e))return t}function JE(t,e){if(t==="change")return e}var D1=!1;if(ps){var sf;if(ps){var af="oninput"in document;if(!af){var ry=document.createElement("div");ry.setAttribute("oninput","return;"),af=typeof ry.oninput=="function"}sf=af}else sf=!1;D1=sf&&(!document.documentMode||9<document.documentMode)}function sy(){Fl&&(Fl.detachEvent("onpropertychange",M1),uc=Fl=null)}function M1(t){if(t.propertyName==="value"&&Fh(uc)){var e=[];P1(e,uc,t,lx(t)),u1(XE,e)}}function eT(t,e,n){t==="focusin"?(sy(),Fl=e,uc=n,Fl.attachEvent("onpropertychange",M1)):t==="focusout"&&sy()}function tT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fh(uc)}function nT(t,e){if(t==="click")return Fh(e)}function rT(t,e){if(t==="input"||t==="change")return Fh(e)}function sT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var br=typeof Object.is=="function"?Object.is:sT;function hc(t,e){if(br(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!um.call(e,s)||!br(t[s],e[s]))return!1}return!0}function iy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ay(t,e){var n=iy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=iy(n)}}function O1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?O1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function L1(){for(var t=window,e=Du();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Du(t.document)}return e}function xx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function iT(t){var e=L1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&O1(n.ownerDocument.documentElement,n)){if(r!==null&&xx(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=ay(n,a);var o=ay(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var aT=ps&&"documentMode"in document&&11>=document.documentMode,za=null,Pm=null,$l=null,Dm=!1;function oy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Dm||za==null||za!==Du(r)||(r=za,"selectionStart"in r&&xx(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$l&&hc($l,r)||($l=r,r=Fu(Pm,"onSelect"),0<r.length&&(e=new fx("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=za)))}function kd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ba={animationend:kd("Animation","AnimationEnd"),animationiteration:kd("Animation","AnimationIteration"),animationstart:kd("Animation","AnimationStart"),transitionend:kd("Transition","TransitionEnd")},of={},R1={};ps&&(R1=document.createElement("div").style,"AnimationEvent"in window||(delete Ba.animationend.animation,delete Ba.animationiteration.animation,delete Ba.animationstart.animation),"TransitionEvent"in window||delete Ba.transitionend.transition);function $h(t){if(of[t])return of[t];if(!Ba[t])return t;var e=Ba[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in R1)return of[t]=e[n];return t}var A1=$h("animationend"),I1=$h("animationiteration"),F1=$h("animationstart"),$1=$h("transitionend"),z1=new Map,ly="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function li(t,e){z1.set(t,e),la(e,[t])}for(var lf=0;lf<ly.length;lf++){var cf=ly[lf],oT=cf.toLowerCase(),lT=cf[0].toUpperCase()+cf.slice(1);li(oT,"on"+lT)}li(A1,"onAnimationEnd");li(I1,"onAnimationIteration");li(F1,"onAnimationStart");li("dblclick","onDoubleClick");li("focusin","onFocus");li("focusout","onBlur");li($1,"onTransitionEnd");co("onMouseEnter",["mouseout","mouseover"]);co("onMouseLeave",["mouseout","mouseover"]);co("onPointerEnter",["pointerout","pointerover"]);co("onPointerLeave",["pointerout","pointerover"]);la("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));la("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));la("onBeforeInput",["compositionend","keypress","textInput","paste"]);la("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));la("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));la("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sl));function cy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,oE(r,e,void 0,t),t.currentTarget=null}function B1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],d=l.instance,u=l.currentTarget;if(l=l.listener,d!==a&&s.isPropagationStopped())break e;cy(s,l,u),a=d}else for(o=0;o<r.length;o++){if(l=r[o],d=l.instance,u=l.currentTarget,l=l.listener,d!==a&&s.isPropagationStopped())break e;cy(s,l,u),a=d}}}if(Ou)throw t=Sm,Ou=!1,Sm=null,t}function ot(t,e){var n=e[Am];n===void 0&&(n=e[Am]=new Set);var r=t+"__bubble";n.has(r)||(U1(e,t,2,!1),n.add(r))}function df(t,e,n){var r=0;e&&(r|=4),U1(n,t,r,e)}var Sd="_reactListening"+Math.random().toString(36).slice(2);function pc(t){if(!t[Sd]){t[Sd]=!0,Kw.forEach(function(n){n!=="selectionchange"&&(cT.has(n)||df(n,!1,t),df(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Sd]||(e[Sd]=!0,df("selectionchange",!1,e))}}function U1(t,e,n,r){switch(k1(e)){case 1:var s=jE;break;case 4:s=NE;break;default:s=hx}n=s.bind(null,e,n,t),s=void 0,!km||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function uf(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Fi(l),o===null)return;if(d=o.tag,d===5||d===6){r=a=o;continue e}l=l.parentNode}}r=r.return}u1(function(){var u=a,p=lx(n),f=[];e:{var x=z1.get(t);if(x!==void 0){var g=fx,v=t;switch(t){case"keypress":if(pu(n)===0)break e;case"keydown":case"keyup":g=$E;break;case"focusin":v="focus",g=rf;break;case"focusout":v="blur",g=rf;break;case"beforeblur":case"afterblur":g=rf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Q0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=CE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=UE;break;case A1:case I1:case F1:g=PE;break;case $1:g=WE;break;case"scroll":g=kE;break;case"wheel":g=VE;break;case"copy":case"cut":case"paste":g=ME;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=J0}var b=(e&4)!==0,w=!b&&t==="scroll",_=b?x!==null?x+"Capture":null:x;b=[];for(var N=u,S;N!==null;){S=N;var P=S.stateNode;if(S.tag===5&&P!==null&&(S=P,_!==null&&(P=oc(N,_),P!=null&&b.push(fc(N,P,S)))),w)break;N=N.return}0<b.length&&(x=new g(x,v,null,n,p),f.push({event:x,listeners:b}))}}if(!(e&7)){e:{if(x=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",x&&n!==jm&&(v=n.relatedTarget||n.fromElement)&&(Fi(v)||v[fs]))break e;if((g||x)&&(x=p.window===p?p:(x=p.ownerDocument)?x.defaultView||x.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?Fi(v):null,v!==null&&(w=ca(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(b=Q0,P="onMouseLeave",_="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(b=J0,P="onPointerLeave",_="onPointerEnter",N="pointer"),w=g==null?x:Ua(g),S=v==null?x:Ua(v),x=new b(P,N+"leave",g,n,p),x.target=w,x.relatedTarget=S,P=null,Fi(p)===u&&(b=new b(_,N+"enter",v,n,p),b.target=S,b.relatedTarget=w,P=b),w=P,g&&v)t:{for(b=g,_=v,N=0,S=b;S;S=Ta(S))N++;for(S=0,P=_;P;P=Ta(P))S++;for(;0<N-S;)b=Ta(b),N--;for(;0<S-N;)_=Ta(_),S--;for(;N--;){if(b===_||_!==null&&b===_.alternate)break t;b=Ta(b),_=Ta(_)}b=null}else b=null;g!==null&&dy(f,x,g,b,!1),v!==null&&w!==null&&dy(f,w,v,b,!0)}}e:{if(x=u?Ua(u):window,g=x.nodeName&&x.nodeName.toLowerCase(),g==="select"||g==="input"&&x.type==="file")var O=JE;else if(ny(x))if(D1)O=rT;else{O=tT;var A=eT}else(g=x.nodeName)&&g.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(O=nT);if(O&&(O=O(t,u))){P1(f,O,n,p);break e}A&&A(t,x,u),t==="focusout"&&(A=x._wrapperState)&&A.controlled&&x.type==="number"&&vm(x,"number",x.value)}switch(A=u?Ua(u):window,t){case"focusin":(ny(A)||A.contentEditable==="true")&&(za=A,Pm=u,$l=null);break;case"focusout":$l=Pm=za=null;break;case"mousedown":Dm=!0;break;case"contextmenu":case"mouseup":case"dragend":Dm=!1,oy(f,n,p);break;case"selectionchange":if(aT)break;case"keydown":case"keyup":oy(f,n,p)}var R;if(gx)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else $a?E1(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(C1&&n.locale!=="ko"&&($a||T!=="onCompositionStart"?T==="onCompositionEnd"&&$a&&(R=S1()):(Fs=p,px="value"in Fs?Fs.value:Fs.textContent,$a=!0)),A=Fu(u,T),0<A.length&&(T=new X0(T,t,null,n,p),f.push({event:T,listeners:A}),R?T.data=R:(R=T1(n),R!==null&&(T.data=R)))),(R=ZE?KE(t,n):GE(t,n))&&(u=Fu(u,"onBeforeInput"),0<u.length&&(p=new X0("onBeforeInput","beforeinput",null,n,p),f.push({event:p,listeners:u}),p.data=R))}B1(f,e)})}function fc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=oc(t,n),a!=null&&r.unshift(fc(t,a,s)),a=oc(t,e),a!=null&&r.push(fc(t,a,s))),t=t.return}return r}function Ta(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function dy(t,e,n,r,s){for(var a=e._reactName,o=[];n!==null&&n!==r;){var l=n,d=l.alternate,u=l.stateNode;if(d!==null&&d===r)break;l.tag===5&&u!==null&&(l=u,s?(d=oc(n,a),d!=null&&o.unshift(fc(n,d,l))):s||(d=oc(n,a),d!=null&&o.push(fc(n,d,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var dT=/\r\n?/g,uT=/\u0000|\uFFFD/g;function uy(t){return(typeof t=="string"?t:""+t).replace(dT,`
`).replace(uT,"")}function Cd(t,e,n){if(e=uy(e),uy(t)!==e&&n)throw Error(de(425))}function $u(){}var Mm=null,Om=null;function Lm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rm=typeof setTimeout=="function"?setTimeout:void 0,hT=typeof clearTimeout=="function"?clearTimeout:void 0,hy=typeof Promise=="function"?Promise:void 0,pT=typeof queueMicrotask=="function"?queueMicrotask:typeof hy<"u"?function(t){return hy.resolve(null).then(t).catch(fT)}:Rm;function fT(t){setTimeout(function(){throw t})}function hf(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),dc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);dc(e)}function Ks(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function py(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Mo=Math.random().toString(36).slice(2),Rr="__reactFiber$"+Mo,mc="__reactProps$"+Mo,fs="__reactContainer$"+Mo,Am="__reactEvents$"+Mo,mT="__reactListeners$"+Mo,gT="__reactHandles$"+Mo;function Fi(t){var e=t[Rr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fs]||n[Rr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=py(t);t!==null;){if(n=t[Rr])return n;t=py(t)}return e}t=n,n=t.parentNode}return null}function Bc(t){return t=t[Rr]||t[fs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ua(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(de(33))}function zh(t){return t[mc]||null}var Im=[],Ha=-1;function ci(t){return{current:t}}function ct(t){0>Ha||(t.current=Im[Ha],Im[Ha]=null,Ha--)}function it(t,e){Ha++,Im[Ha]=t.current,t.current=e}var si={},ln=ci(si),Nn=ci(!1),Xi=si;function uo(t,e){var n=t.type.contextTypes;if(!n)return si;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function kn(t){return t=t.childContextTypes,t!=null}function zu(){ct(Nn),ct(ln)}function fy(t,e,n){if(ln.current!==si)throw Error(de(168));it(ln,e),it(Nn,n)}function H1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(de(108,eE(t)||"Unknown",s));return yt({},n,r)}function Bu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||si,Xi=ln.current,it(ln,t),it(Nn,Nn.current),!0}function my(t,e,n){var r=t.stateNode;if(!r)throw Error(de(169));n?(t=H1(t,e,Xi),r.__reactInternalMemoizedMergedChildContext=t,ct(Nn),ct(ln),it(ln,t)):ct(Nn),it(Nn,n)}var is=null,Bh=!1,pf=!1;function W1(t){is===null?is=[t]:is.push(t)}function xT(t){Bh=!0,W1(t)}function di(){if(!pf&&is!==null){pf=!0;var t=0,e=Qe;try{var n=is;for(Qe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}is=null,Bh=!1}catch(s){throw is!==null&&(is=is.slice(t+1)),m1(cx,di),s}finally{Qe=e,pf=!1}}return null}var Wa=[],Ya=0,Uu=null,Hu=0,qn=[],Zn=0,Ji=null,ls=1,cs="";function Ei(t,e){Wa[Ya++]=Hu,Wa[Ya++]=Uu,Uu=t,Hu=e}function Y1(t,e,n){qn[Zn++]=ls,qn[Zn++]=cs,qn[Zn++]=Ji,Ji=t;var r=ls;t=cs;var s=32-vr(r)-1;r&=~(1<<s),n+=1;var a=32-vr(e)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ls=1<<32-vr(e)+s|n<<s|r,cs=a+t}else ls=1<<a|n<<s|r,cs=t}function vx(t){t.return!==null&&(Ei(t,1),Y1(t,1,0))}function yx(t){for(;t===Uu;)Uu=Wa[--Ya],Wa[Ya]=null,Hu=Wa[--Ya],Wa[Ya]=null;for(;t===Ji;)Ji=qn[--Zn],qn[Zn]=null,cs=qn[--Zn],qn[Zn]=null,ls=qn[--Zn],qn[Zn]=null}var Ln=null,On=null,ut=!1,mr=null;function V1(t,e){var n=Kn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function gy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ln=t,On=Ks(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ln=t,On=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ji!==null?{id:ls,overflow:cs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ln=t,On=null,!0):!1;default:return!1}}function Fm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $m(t){if(ut){var e=On;if(e){var n=e;if(!gy(t,e)){if(Fm(t))throw Error(de(418));e=Ks(n.nextSibling);var r=Ln;e&&gy(t,e)?V1(r,n):(t.flags=t.flags&-4097|2,ut=!1,Ln=t)}}else{if(Fm(t))throw Error(de(418));t.flags=t.flags&-4097|2,ut=!1,Ln=t}}}function xy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ln=t}function Ed(t){if(t!==Ln)return!1;if(!ut)return xy(t),ut=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lm(t.type,t.memoizedProps)),e&&(e=On)){if(Fm(t))throw q1(),Error(de(418));for(;e;)V1(t,e),e=Ks(e.nextSibling)}if(xy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(de(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){On=Ks(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}On=null}}else On=Ln?Ks(t.stateNode.nextSibling):null;return!0}function q1(){for(var t=On;t;)t=Ks(t.nextSibling)}function ho(){On=Ln=null,ut=!1}function bx(t){mr===null?mr=[t]:mr.push(t)}var vT=ys.ReactCurrentBatchConfig;function ll(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(de(309));var r=n.stateNode}if(!r)throw Error(de(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(de(284));if(!n._owner)throw Error(de(290,t))}return t}function Td(t,e){throw t=Object.prototype.toString.call(e),Error(de(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vy(t){var e=t._init;return e(t._payload)}function Z1(t){function e(_,N){if(t){var S=_.deletions;S===null?(_.deletions=[N],_.flags|=16):S.push(N)}}function n(_,N){if(!t)return null;for(;N!==null;)e(_,N),N=N.sibling;return null}function r(_,N){for(_=new Map;N!==null;)N.key!==null?_.set(N.key,N):_.set(N.index,N),N=N.sibling;return _}function s(_,N){return _=Js(_,N),_.index=0,_.sibling=null,_}function a(_,N,S){return _.index=S,t?(S=_.alternate,S!==null?(S=S.index,S<N?(_.flags|=2,N):S):(_.flags|=2,N)):(_.flags|=1048576,N)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,N,S,P){return N===null||N.tag!==6?(N=bf(S,_.mode,P),N.return=_,N):(N=s(N,S),N.return=_,N)}function d(_,N,S,P){var O=S.type;return O===Fa?p(_,N,S.props.children,P,S.key):N!==null&&(N.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ps&&vy(O)===N.type)?(P=s(N,S.props),P.ref=ll(_,N,S),P.return=_,P):(P=bu(S.type,S.key,S.props,null,_.mode,P),P.ref=ll(_,N,S),P.return=_,P)}function u(_,N,S,P){return N===null||N.tag!==4||N.stateNode.containerInfo!==S.containerInfo||N.stateNode.implementation!==S.implementation?(N=_f(S,_.mode,P),N.return=_,N):(N=s(N,S.children||[]),N.return=_,N)}function p(_,N,S,P,O){return N===null||N.tag!==7?(N=Vi(S,_.mode,P,O),N.return=_,N):(N=s(N,S),N.return=_,N)}function f(_,N,S){if(typeof N=="string"&&N!==""||typeof N=="number")return N=bf(""+N,_.mode,S),N.return=_,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case vd:return S=bu(N.type,N.key,N.props,null,_.mode,S),S.ref=ll(_,null,N),S.return=_,S;case Ia:return N=_f(N,_.mode,S),N.return=_,N;case Ps:var P=N._init;return f(_,P(N._payload),S)}if(Nl(N)||rl(N))return N=Vi(N,_.mode,S,null),N.return=_,N;Td(_,N)}return null}function x(_,N,S,P){var O=N!==null?N.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return O!==null?null:l(_,N,""+S,P);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case vd:return S.key===O?d(_,N,S,P):null;case Ia:return S.key===O?u(_,N,S,P):null;case Ps:return O=S._init,x(_,N,O(S._payload),P)}if(Nl(S)||rl(S))return O!==null?null:p(_,N,S,P,null);Td(_,S)}return null}function g(_,N,S,P,O){if(typeof P=="string"&&P!==""||typeof P=="number")return _=_.get(S)||null,l(N,_,""+P,O);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case vd:return _=_.get(P.key===null?S:P.key)||null,d(N,_,P,O);case Ia:return _=_.get(P.key===null?S:P.key)||null,u(N,_,P,O);case Ps:var A=P._init;return g(_,N,S,A(P._payload),O)}if(Nl(P)||rl(P))return _=_.get(S)||null,p(N,_,P,O,null);Td(N,P)}return null}function v(_,N,S,P){for(var O=null,A=null,R=N,T=N=0,Y=null;R!==null&&T<S.length;T++){R.index>T?(Y=R,R=null):Y=R.sibling;var D=x(_,R,S[T],P);if(D===null){R===null&&(R=Y);break}t&&R&&D.alternate===null&&e(_,R),N=a(D,N,T),A===null?O=D:A.sibling=D,A=D,R=Y}if(T===S.length)return n(_,R),ut&&Ei(_,T),O;if(R===null){for(;T<S.length;T++)R=f(_,S[T],P),R!==null&&(N=a(R,N,T),A===null?O=R:A.sibling=R,A=R);return ut&&Ei(_,T),O}for(R=r(_,R);T<S.length;T++)Y=g(R,_,T,S[T],P),Y!==null&&(t&&Y.alternate!==null&&R.delete(Y.key===null?T:Y.key),N=a(Y,N,T),A===null?O=Y:A.sibling=Y,A=Y);return t&&R.forEach(function(U){return e(_,U)}),ut&&Ei(_,T),O}function b(_,N,S,P){var O=rl(S);if(typeof O!="function")throw Error(de(150));if(S=O.call(S),S==null)throw Error(de(151));for(var A=O=null,R=N,T=N=0,Y=null,D=S.next();R!==null&&!D.done;T++,D=S.next()){R.index>T?(Y=R,R=null):Y=R.sibling;var U=x(_,R,D.value,P);if(U===null){R===null&&(R=Y);break}t&&R&&U.alternate===null&&e(_,R),N=a(U,N,T),A===null?O=U:A.sibling=U,A=U,R=Y}if(D.done)return n(_,R),ut&&Ei(_,T),O;if(R===null){for(;!D.done;T++,D=S.next())D=f(_,D.value,P),D!==null&&(N=a(D,N,T),A===null?O=D:A.sibling=D,A=D);return ut&&Ei(_,T),O}for(R=r(_,R);!D.done;T++,D=S.next())D=g(R,_,T,D.value,P),D!==null&&(t&&D.alternate!==null&&R.delete(D.key===null?T:D.key),N=a(D,N,T),A===null?O=D:A.sibling=D,A=D);return t&&R.forEach(function(ee){return e(_,ee)}),ut&&Ei(_,T),O}function w(_,N,S,P){if(typeof S=="object"&&S!==null&&S.type===Fa&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case vd:e:{for(var O=S.key,A=N;A!==null;){if(A.key===O){if(O=S.type,O===Fa){if(A.tag===7){n(_,A.sibling),N=s(A,S.props.children),N.return=_,_=N;break e}}else if(A.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ps&&vy(O)===A.type){n(_,A.sibling),N=s(A,S.props),N.ref=ll(_,A,S),N.return=_,_=N;break e}n(_,A);break}else e(_,A);A=A.sibling}S.type===Fa?(N=Vi(S.props.children,_.mode,P,S.key),N.return=_,_=N):(P=bu(S.type,S.key,S.props,null,_.mode,P),P.ref=ll(_,N,S),P.return=_,_=P)}return o(_);case Ia:e:{for(A=S.key;N!==null;){if(N.key===A)if(N.tag===4&&N.stateNode.containerInfo===S.containerInfo&&N.stateNode.implementation===S.implementation){n(_,N.sibling),N=s(N,S.children||[]),N.return=_,_=N;break e}else{n(_,N);break}else e(_,N);N=N.sibling}N=_f(S,_.mode,P),N.return=_,_=N}return o(_);case Ps:return A=S._init,w(_,N,A(S._payload),P)}if(Nl(S))return v(_,N,S,P);if(rl(S))return b(_,N,S,P);Td(_,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,N!==null&&N.tag===6?(n(_,N.sibling),N=s(N,S),N.return=_,_=N):(n(_,N),N=bf(S,_.mode,P),N.return=_,_=N),o(_)):n(_,N)}return w}var po=Z1(!0),K1=Z1(!1),Wu=ci(null),Yu=null,Va=null,_x=null;function wx(){_x=Va=Yu=null}function jx(t){var e=Wu.current;ct(Wu),t._currentValue=e}function zm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ro(t,e){Yu=t,_x=Va=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wn=!0),t.firstContext=null)}function er(t){var e=t._currentValue;if(_x!==t)if(t={context:t,memoizedValue:e,next:null},Va===null){if(Yu===null)throw Error(de(308));Va=t,Yu.dependencies={lanes:0,firstContext:t}}else Va=Va.next=t;return e}var $i=null;function Nx(t){$i===null?$i=[t]:$i.push(t)}function G1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Nx(e)):(n.next=s.next,s.next=n),e.interleaved=n,ms(t,r)}function ms(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ds=!1;function kx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Q1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ds(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ue&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ms(t,n)}return s=r.interleaved,s===null?(e.next=e,Nx(r)):(e.next=s.next,s.next=e),r.interleaved=e,ms(t,n)}function fu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,dx(t,n)}}function yy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Vu(t,e,n,r){var s=t.updateQueue;Ds=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var d=l,u=d.next;d.next=null,o===null?a=u:o.next=u,o=d;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=u:l.next=u,p.lastBaseUpdate=d))}if(a!==null){var f=s.baseState;o=0,p=u=d=null,l=a;do{var x=l.lane,g=l.eventTime;if((r&x)===x){p!==null&&(p=p.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,b=l;switch(x=e,g=n,b.tag){case 1:if(v=b.payload,typeof v=="function"){f=v.call(g,f,x);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,x=typeof v=="function"?v.call(g,f,x):v,x==null)break e;f=yt({},f,x);break e;case 2:Ds=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,x=s.effects,x===null?s.effects=[l]:x.push(l))}else g={eventTime:g,lane:x,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(u=p=g,d=f):p=p.next=g,o|=x;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;x=l,l=x.next,x.next=null,s.lastBaseUpdate=x,s.shared.pending=null}}while(!0);if(p===null&&(d=f),s.baseState=d,s.firstBaseUpdate=u,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);ta|=o,t.lanes=o,t.memoizedState=f}}function by(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(de(191,s));s.call(r)}}}var Uc={},$r=ci(Uc),gc=ci(Uc),xc=ci(Uc);function zi(t){if(t===Uc)throw Error(de(174));return t}function Sx(t,e){switch(it(xc,e),it(gc,t),it($r,Uc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:bm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=bm(e,t)}ct($r),it($r,e)}function fo(){ct($r),ct(gc),ct(xc)}function X1(t){zi(xc.current);var e=zi($r.current),n=bm(e,t.type);e!==n&&(it(gc,t),it($r,n))}function Cx(t){gc.current===t&&(ct($r),ct(gc))}var gt=ci(0);function qu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ff=[];function Ex(){for(var t=0;t<ff.length;t++)ff[t]._workInProgressVersionPrimary=null;ff.length=0}var mu=ys.ReactCurrentDispatcher,mf=ys.ReactCurrentBatchConfig,ea=0,vt=null,Ot=null,Ft=null,Zu=!1,zl=!1,vc=0,yT=0;function en(){throw Error(de(321))}function Tx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!br(t[n],e[n]))return!1;return!0}function Px(t,e,n,r,s,a){if(ea=a,vt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,mu.current=t===null||t.memoizedState===null?jT:NT,t=n(r,s),zl){a=0;do{if(zl=!1,vc=0,25<=a)throw Error(de(301));a+=1,Ft=Ot=null,e.updateQueue=null,mu.current=kT,t=n(r,s)}while(zl)}if(mu.current=Ku,e=Ot!==null&&Ot.next!==null,ea=0,Ft=Ot=vt=null,Zu=!1,e)throw Error(de(300));return t}function Dx(){var t=vc!==0;return vc=0,t}function Or(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?vt.memoizedState=Ft=t:Ft=Ft.next=t,Ft}function tr(){if(Ot===null){var t=vt.alternate;t=t!==null?t.memoizedState:null}else t=Ot.next;var e=Ft===null?vt.memoizedState:Ft.next;if(e!==null)Ft=e,Ot=t;else{if(t===null)throw Error(de(310));Ot=t,t={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Ft===null?vt.memoizedState=Ft=t:Ft=Ft.next=t}return Ft}function yc(t,e){return typeof e=="function"?e(t):e}function gf(t){var e=tr(),n=e.queue;if(n===null)throw Error(de(311));n.lastRenderedReducer=t;var r=Ot,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var l=o=null,d=null,u=a;do{var p=u.lane;if((ea&p)===p)d!==null&&(d=d.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:p,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};d===null?(l=d=f,o=r):d=d.next=f,vt.lanes|=p,ta|=p}u=u.next}while(u!==null&&u!==a);d===null?o=r:d.next=l,br(r,e.memoizedState)||(wn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=d,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,vt.lanes|=a,ta|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xf(t){var e=tr(),n=e.queue;if(n===null)throw Error(de(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);br(a,e.memoizedState)||(wn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function J1(){}function ej(t,e){var n=vt,r=tr(),s=e(),a=!br(r.memoizedState,s);if(a&&(r.memoizedState=s,wn=!0),r=r.queue,Mx(rj.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Ft!==null&&Ft.memoizedState.tag&1){if(n.flags|=2048,bc(9,nj.bind(null,n,r,s,e),void 0,null),zt===null)throw Error(de(349));ea&30||tj(n,e,s)}return s}function tj(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function nj(t,e,n,r){e.value=n,e.getSnapshot=r,sj(e)&&ij(t)}function rj(t,e,n){return n(function(){sj(e)&&ij(t)})}function sj(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!br(t,n)}catch{return!0}}function ij(t){var e=ms(t,1);e!==null&&yr(e,t,1,-1)}function _y(t){var e=Or();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yc,lastRenderedState:t},e.queue=t,t=t.dispatch=wT.bind(null,vt,t),[e.memoizedState,t]}function bc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function aj(){return tr().memoizedState}function gu(t,e,n,r){var s=Or();vt.flags|=t,s.memoizedState=bc(1|e,n,void 0,r===void 0?null:r)}function Uh(t,e,n,r){var s=tr();r=r===void 0?null:r;var a=void 0;if(Ot!==null){var o=Ot.memoizedState;if(a=o.destroy,r!==null&&Tx(r,o.deps)){s.memoizedState=bc(e,n,a,r);return}}vt.flags|=t,s.memoizedState=bc(1|e,n,a,r)}function wy(t,e){return gu(8390656,8,t,e)}function Mx(t,e){return Uh(2048,8,t,e)}function oj(t,e){return Uh(4,2,t,e)}function lj(t,e){return Uh(4,4,t,e)}function cj(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function dj(t,e,n){return n=n!=null?n.concat([t]):null,Uh(4,4,cj.bind(null,e,t),n)}function Ox(){}function uj(t,e){var n=tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tx(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function hj(t,e){var n=tr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tx(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function pj(t,e,n){return ea&21?(br(n,e)||(n=v1(),vt.lanes|=n,ta|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wn=!0),t.memoizedState=n)}function bT(t,e){var n=Qe;Qe=n!==0&&4>n?n:4,t(!0);var r=mf.transition;mf.transition={};try{t(!1),e()}finally{Qe=n,mf.transition=r}}function fj(){return tr().memoizedState}function _T(t,e,n){var r=Xs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},mj(t))gj(e,n);else if(n=G1(t,e,n,r),n!==null){var s=hn();yr(n,t,r,s),xj(n,e,r)}}function wT(t,e,n){var r=Xs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(mj(t))gj(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,n);if(s.hasEagerState=!0,s.eagerState=l,br(l,o)){var d=e.interleaved;d===null?(s.next=s,Nx(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=G1(t,e,s,r),n!==null&&(s=hn(),yr(n,t,r,s),xj(n,e,r))}}function mj(t){var e=t.alternate;return t===vt||e!==null&&e===vt}function gj(t,e){zl=Zu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function xj(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,dx(t,n)}}var Ku={readContext:er,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},jT={readContext:er,useCallback:function(t,e){return Or().memoizedState=[t,e===void 0?null:e],t},useContext:er,useEffect:wy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,gu(4194308,4,cj.bind(null,e,t),n)},useLayoutEffect:function(t,e){return gu(4194308,4,t,e)},useInsertionEffect:function(t,e){return gu(4,2,t,e)},useMemo:function(t,e){var n=Or();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Or();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=_T.bind(null,vt,t),[r.memoizedState,t]},useRef:function(t){var e=Or();return t={current:t},e.memoizedState=t},useState:_y,useDebugValue:Ox,useDeferredValue:function(t){return Or().memoizedState=t},useTransition:function(){var t=_y(!1),e=t[0];return t=bT.bind(null,t[1]),Or().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=vt,s=Or();if(ut){if(n===void 0)throw Error(de(407));n=n()}else{if(n=e(),zt===null)throw Error(de(349));ea&30||tj(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,wy(rj.bind(null,r,a,t),[t]),r.flags|=2048,bc(9,nj.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Or(),e=zt.identifierPrefix;if(ut){var n=cs,r=ls;n=(r&~(1<<32-vr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=vc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=yT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},NT={readContext:er,useCallback:uj,useContext:er,useEffect:Mx,useImperativeHandle:dj,useInsertionEffect:oj,useLayoutEffect:lj,useMemo:hj,useReducer:gf,useRef:aj,useState:function(){return gf(yc)},useDebugValue:Ox,useDeferredValue:function(t){var e=tr();return pj(e,Ot.memoizedState,t)},useTransition:function(){var t=gf(yc)[0],e=tr().memoizedState;return[t,e]},useMutableSource:J1,useSyncExternalStore:ej,useId:fj,unstable_isNewReconciler:!1},kT={readContext:er,useCallback:uj,useContext:er,useEffect:Mx,useImperativeHandle:dj,useInsertionEffect:oj,useLayoutEffect:lj,useMemo:hj,useReducer:xf,useRef:aj,useState:function(){return xf(yc)},useDebugValue:Ox,useDeferredValue:function(t){var e=tr();return Ot===null?e.memoizedState=t:pj(e,Ot.memoizedState,t)},useTransition:function(){var t=xf(yc)[0],e=tr().memoizedState;return[t,e]},useMutableSource:J1,useSyncExternalStore:ej,useId:fj,unstable_isNewReconciler:!1};function hr(t,e){if(t&&t.defaultProps){e=yt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Bm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:yt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Hh={isMounted:function(t){return(t=t._reactInternals)?ca(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=hn(),s=Xs(t),a=ds(r,s);a.payload=e,n!=null&&(a.callback=n),e=Gs(t,a,s),e!==null&&(yr(e,t,s,r),fu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=hn(),s=Xs(t),a=ds(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Gs(t,a,s),e!==null&&(yr(e,t,s,r),fu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=hn(),r=Xs(t),s=ds(n,r);s.tag=2,e!=null&&(s.callback=e),e=Gs(t,s,r),e!==null&&(yr(e,t,r,n),fu(e,t,r))}};function jy(t,e,n,r,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!hc(n,r)||!hc(s,a):!0}function vj(t,e,n){var r=!1,s=si,a=e.contextType;return typeof a=="object"&&a!==null?a=er(a):(s=kn(e)?Xi:ln.current,r=e.contextTypes,a=(r=r!=null)?uo(t,s):si),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function Ny(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Hh.enqueueReplaceState(e,e.state,null)}function Um(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},kx(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=er(a):(a=kn(e)?Xi:ln.current,s.context=uo(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Bm(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Hh.enqueueReplaceState(s,s.state,null),Vu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function mo(t,e){try{var n="",r=e;do n+=JC(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function vf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Hm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ST=typeof WeakMap=="function"?WeakMap:Map;function yj(t,e,n){n=ds(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Qu||(Qu=!0,Jm=r),Hm(t,e)},n}function bj(t,e,n){n=ds(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Hm(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Hm(t,e),typeof r!="function"&&(Qs===null?Qs=new Set([this]):Qs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ky(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ST;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=zT.bind(null,t,e,n),e.then(t,t))}function Sy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Cy(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ds(-1,1),e.tag=2,Gs(n,e,1))),n.lanes|=1),t)}var CT=ys.ReactCurrentOwner,wn=!1;function dn(t,e,n,r){e.child=t===null?K1(e,null,n,r):po(e,t.child,n,r)}function Ey(t,e,n,r,s){n=n.render;var a=e.ref;return ro(e,s),r=Px(t,e,n,r,a,s),n=Dx(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,gs(t,e,s)):(ut&&n&&vx(e),e.flags|=1,dn(t,e,r,s),e.child)}function Ty(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!Bx(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,_j(t,e,a,r,s)):(t=bu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:hc,n(o,r)&&t.ref===e.ref)return gs(t,e,s)}return e.flags|=1,t=Js(a,r),t.ref=e.ref,t.return=e,e.child=t}function _j(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(hc(a,r)&&t.ref===e.ref)if(wn=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(wn=!0);else return e.lanes=t.lanes,gs(t,e,s)}return Wm(t,e,n,r,s)}function wj(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(Za,Dn),Dn|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,it(Za,Dn),Dn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,it(Za,Dn),Dn|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,it(Za,Dn),Dn|=r;return dn(t,e,s,n),e.child}function jj(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wm(t,e,n,r,s){var a=kn(n)?Xi:ln.current;return a=uo(e,a),ro(e,s),n=Px(t,e,n,r,a,s),r=Dx(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,gs(t,e,s)):(ut&&r&&vx(e),e.flags|=1,dn(t,e,n,s),e.child)}function Py(t,e,n,r,s){if(kn(n)){var a=!0;Bu(e)}else a=!1;if(ro(e,s),e.stateNode===null)xu(t,e),vj(e,n,r),Um(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var d=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=er(u):(u=kn(n)?Xi:ln.current,u=uo(e,u));var p=n.getDerivedStateFromProps,f=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||d!==u)&&Ny(e,o,r,u),Ds=!1;var x=e.memoizedState;o.state=x,Vu(e,r,o,s),d=e.memoizedState,l!==r||x!==d||Nn.current||Ds?(typeof p=="function"&&(Bm(e,n,p,r),d=e.memoizedState),(l=Ds||jy(e,n,l,r,x,d,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=d),o.props=r,o.state=d,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Q1(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:hr(e.type,l),o.props=u,f=e.pendingProps,x=o.context,d=n.contextType,typeof d=="object"&&d!==null?d=er(d):(d=kn(n)?Xi:ln.current,d=uo(e,d));var g=n.getDerivedStateFromProps;(p=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||x!==d)&&Ny(e,o,r,d),Ds=!1,x=e.memoizedState,o.state=x,Vu(e,r,o,s);var v=e.memoizedState;l!==f||x!==v||Nn.current||Ds?(typeof g=="function"&&(Bm(e,n,g,r),v=e.memoizedState),(u=Ds||jy(e,n,u,r,x,v,d)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,d)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=d,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),r=!1)}return Ym(t,e,n,r,a,s)}function Ym(t,e,n,r,s,a){jj(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&my(e,n,!1),gs(t,e,a);r=e.stateNode,CT.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=po(e,t.child,null,a),e.child=po(e,null,l,a)):dn(t,e,l,a),e.memoizedState=r.state,s&&my(e,n,!0),e.child}function Nj(t){var e=t.stateNode;e.pendingContext?fy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fy(t,e.context,!1),Sx(t,e.containerInfo)}function Dy(t,e,n,r,s){return ho(),bx(s),e.flags|=256,dn(t,e,n,r),e.child}var Vm={dehydrated:null,treeContext:null,retryLane:0};function qm(t){return{baseLanes:t,cachePool:null,transitions:null}}function kj(t,e,n){var r=e.pendingProps,s=gt.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),it(gt,s&1),t===null)return $m(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Vh(o,r,0,null),t=Vi(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=qm(n),e.memoizedState=Vm,t):Lx(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return ET(t,e,o,r,l,s,n);if(a){a=r.fallback,o=e.mode,s=t.child,l=s.sibling;var d={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=d,e.deletions=null):(r=Js(s,d),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Js(l,a):(a=Vi(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?qm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=Vm,r}return a=t.child,t=a.sibling,r=Js(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Lx(t,e){return e=Vh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pd(t,e,n,r){return r!==null&&bx(r),po(e,t.child,null,n),t=Lx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ET(t,e,n,r,s,a,o){if(n)return e.flags&256?(e.flags&=-257,r=vf(Error(de(422))),Pd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=Vh({mode:"visible",children:r.children},s,0,null),a=Vi(a,s,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&po(e,t.child,null,o),e.child.memoizedState=qm(o),e.memoizedState=Vm,a);if(!(e.mode&1))return Pd(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(de(419)),r=vf(a,r,void 0),Pd(t,e,o,r)}if(l=(o&t.childLanes)!==0,wn||l){if(r=zt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,ms(t,s),yr(r,t,s,-1))}return zx(),r=vf(Error(de(421))),Pd(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=BT.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,On=Ks(s.nextSibling),Ln=e,ut=!0,mr=null,t!==null&&(qn[Zn++]=ls,qn[Zn++]=cs,qn[Zn++]=Ji,ls=t.id,cs=t.overflow,Ji=e),e=Lx(e,r.children),e.flags|=4096,e)}function My(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),zm(t.return,e,n)}function yf(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function Sj(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(dn(t,e,r.children,n),r=gt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&My(t,n,e);else if(t.tag===19)My(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(it(gt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&qu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),yf(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&qu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}yf(e,!0,n,null,a);break;case"together":yf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ta|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(de(153));if(e.child!==null){for(t=e.child,n=Js(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Js(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function TT(t,e,n){switch(e.tag){case 3:Nj(e),ho();break;case 5:X1(e);break;case 1:kn(e.type)&&Bu(e);break;case 4:Sx(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;it(Wu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(it(gt,gt.current&1),e.flags|=128,null):n&e.child.childLanes?kj(t,e,n):(it(gt,gt.current&1),t=gs(t,e,n),t!==null?t.sibling:null);it(gt,gt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Sj(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),it(gt,gt.current),r)break;return null;case 22:case 23:return e.lanes=0,wj(t,e,n)}return gs(t,e,n)}var Cj,Zm,Ej,Tj;Cj=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zm=function(){};Ej=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,zi($r.current);var a=null;switch(n){case"input":s=gm(t,s),r=gm(t,r),a=[];break;case"select":s=yt({},s,{value:void 0}),r=yt({},r,{value:void 0}),a=[];break;case"textarea":s=ym(t,s),r=ym(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=$u)}_m(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ic.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var d=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&d!==l&&(d!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in d)d.hasOwnProperty(o)&&l[o]!==d[o]&&(n||(n={}),n[o]=d[o])}else n||(a||(a=[]),a.push(u,n)),n=d;else u==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,l=l?l.__html:void 0,d!=null&&l!==d&&(a=a||[]).push(u,d)):u==="children"?typeof d!="string"&&typeof d!="number"||(a=a||[]).push(u,""+d):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ic.hasOwnProperty(u)?(d!=null&&u==="onScroll"&&ot("scroll",t),a||l===d||(a=[])):(a=a||[]).push(u,d))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};Tj=function(t,e,n,r){n!==r&&(e.flags|=4)};function cl(t,e){if(!ut)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function tn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function PT(t,e,n){var r=e.pendingProps;switch(yx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(e),null;case 1:return kn(e.type)&&zu(),tn(e),null;case 3:return r=e.stateNode,fo(),ct(Nn),ct(ln),Ex(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ed(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mr!==null&&(ng(mr),mr=null))),Zm(t,e),tn(e),null;case 5:Cx(e);var s=zi(xc.current);if(n=e.type,t!==null&&e.stateNode!=null)Ej(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(de(166));return tn(e),null}if(t=zi($r.current),Ed(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Rr]=e,r[mc]=a,t=(e.mode&1)!==0,n){case"dialog":ot("cancel",r),ot("close",r);break;case"iframe":case"object":case"embed":ot("load",r);break;case"video":case"audio":for(s=0;s<Sl.length;s++)ot(Sl[s],r);break;case"source":ot("error",r);break;case"img":case"image":case"link":ot("error",r),ot("load",r);break;case"details":ot("toggle",r);break;case"input":B0(r,a),ot("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},ot("invalid",r);break;case"textarea":H0(r,a),ot("invalid",r)}_m(n,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&Cd(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Cd(r.textContent,l,t),s=["children",""+l]):ic.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ot("scroll",r)}switch(n){case"input":yd(r),U0(r,a,!0);break;case"textarea":yd(r),W0(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=$u)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=r1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Rr]=e,t[mc]=r,Cj(t,e,!1,!1),e.stateNode=t;e:{switch(o=wm(n,r),n){case"dialog":ot("cancel",t),ot("close",t),s=r;break;case"iframe":case"object":case"embed":ot("load",t),s=r;break;case"video":case"audio":for(s=0;s<Sl.length;s++)ot(Sl[s],t);s=r;break;case"source":ot("error",t),s=r;break;case"img":case"image":case"link":ot("error",t),ot("load",t),s=r;break;case"details":ot("toggle",t),s=r;break;case"input":B0(t,r),s=gm(t,r),ot("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=yt({},r,{value:void 0}),ot("invalid",t);break;case"textarea":H0(t,r),s=ym(t,r),ot("invalid",t);break;default:s=r}_m(n,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var d=l[a];a==="style"?a1(t,d):a==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&s1(t,d)):a==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&ac(t,d):typeof d=="number"&&ac(t,""+d):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ic.hasOwnProperty(a)?d!=null&&a==="onScroll"&&ot("scroll",t):d!=null&&sx(t,a,d,o))}switch(n){case"input":yd(t),U0(t,r,!1);break;case"textarea":yd(t),W0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ri(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Ja(t,!!r.multiple,a,!1):r.defaultValue!=null&&Ja(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=$u)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tn(e),null;case 6:if(t&&e.stateNode!=null)Tj(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(de(166));if(n=zi(xc.current),zi($r.current),Ed(e)){if(r=e.stateNode,n=e.memoizedProps,r[Rr]=e,(a=r.nodeValue!==n)&&(t=Ln,t!==null))switch(t.tag){case 3:Cd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cd(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Rr]=e,e.stateNode=r}return tn(e),null;case 13:if(ct(gt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ut&&On!==null&&e.mode&1&&!(e.flags&128))q1(),ho(),e.flags|=98560,a=!1;else if(a=Ed(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(de(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(de(317));a[Rr]=e}else ho(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tn(e),a=!1}else mr!==null&&(ng(mr),mr=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||gt.current&1?Lt===0&&(Lt=3):zx())),e.updateQueue!==null&&(e.flags|=4),tn(e),null);case 4:return fo(),Zm(t,e),t===null&&pc(e.stateNode.containerInfo),tn(e),null;case 10:return jx(e.type._context),tn(e),null;case 17:return kn(e.type)&&zu(),tn(e),null;case 19:if(ct(gt),a=e.memoizedState,a===null)return tn(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)cl(a,!1);else{if(Lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=qu(t),o!==null){for(e.flags|=128,cl(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return it(gt,gt.current&1|2),e.child}t=t.sibling}a.tail!==null&&Nt()>go&&(e.flags|=128,r=!0,cl(a,!1),e.lanes=4194304)}else{if(!r)if(t=qu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),cl(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!ut)return tn(e),null}else 2*Nt()-a.renderingStartTime>go&&n!==1073741824&&(e.flags|=128,r=!0,cl(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Nt(),e.sibling=null,n=gt.current,it(gt,r?n&1|2:n&1),e):(tn(e),null);case 22:case 23:return $x(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Dn&1073741824&&(tn(e),e.subtreeFlags&6&&(e.flags|=8192)):tn(e),null;case 24:return null;case 25:return null}throw Error(de(156,e.tag))}function DT(t,e){switch(yx(e),e.tag){case 1:return kn(e.type)&&zu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return fo(),ct(Nn),ct(ln),Ex(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cx(e),null;case 13:if(ct(gt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(de(340));ho()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ct(gt),null;case 4:return fo(),null;case 10:return jx(e.type._context),null;case 22:case 23:return $x(),null;case 24:return null;default:return null}}var Dd=!1,rn=!1,MT=typeof WeakSet=="function"?WeakSet:Set,ye=null;function qa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){bt(t,e,r)}else n.current=null}function Km(t,e,n){try{n()}catch(r){bt(t,e,r)}}var Oy=!1;function OT(t,e){if(Mm=Au,t=L1(),xx(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,d=-1,u=0,p=0,f=t,x=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==a||r!==0&&f.nodeType!==3||(d=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)x=f,f=g;for(;;){if(f===t)break t;if(x===n&&++u===s&&(l=o),x===a&&++p===r&&(d=o),(g=f.nextSibling)!==null)break;f=x,x=f.parentNode}f=g}n=l===-1||d===-1?null:{start:l,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(Om={focusedElem:t,selectionRange:n},Au=!1,ye=e;ye!==null;)if(e=ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ye=t;else for(;ye!==null;){e=ye;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,w=v.memoizedState,_=e.stateNode,N=_.getSnapshotBeforeUpdate(e.elementType===e.type?b:hr(e.type,b),w);_.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(de(163))}}catch(P){bt(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,ye=t;break}ye=e.return}return v=Oy,Oy=!1,v}function Bl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&Km(e,n,a)}s=s.next}while(s!==r)}}function Wh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Gm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Pj(t){var e=t.alternate;e!==null&&(t.alternate=null,Pj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Rr],delete e[mc],delete e[Am],delete e[mT],delete e[gT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Dj(t){return t.tag===5||t.tag===3||t.tag===4}function Ly(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Dj(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$u));else if(r!==4&&(t=t.child,t!==null))for(Qm(t,e,n),t=t.sibling;t!==null;)Qm(t,e,n),t=t.sibling}function Xm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Xm(t,e,n),t=t.sibling;t!==null;)Xm(t,e,n),t=t.sibling}var Kt=null,pr=!1;function js(t,e,n){for(n=n.child;n!==null;)Mj(t,e,n),n=n.sibling}function Mj(t,e,n){if(Fr&&typeof Fr.onCommitFiberUnmount=="function")try{Fr.onCommitFiberUnmount(Ah,n)}catch{}switch(n.tag){case 5:rn||qa(n,e);case 6:var r=Kt,s=pr;Kt=null,js(t,e,n),Kt=r,pr=s,Kt!==null&&(pr?(t=Kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Kt.removeChild(n.stateNode));break;case 18:Kt!==null&&(pr?(t=Kt,n=n.stateNode,t.nodeType===8?hf(t.parentNode,n):t.nodeType===1&&hf(t,n),dc(t)):hf(Kt,n.stateNode));break;case 4:r=Kt,s=pr,Kt=n.stateNode.containerInfo,pr=!0,js(t,e,n),Kt=r,pr=s;break;case 0:case 11:case 14:case 15:if(!rn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Km(n,e,o),s=s.next}while(s!==r)}js(t,e,n);break;case 1:if(!rn&&(qa(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){bt(n,e,l)}js(t,e,n);break;case 21:js(t,e,n);break;case 22:n.mode&1?(rn=(r=rn)||n.memoizedState!==null,js(t,e,n),rn=r):js(t,e,n);break;default:js(t,e,n)}}function Ry(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new MT),e.forEach(function(r){var s=UT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ur(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Kt=l.stateNode,pr=!1;break e;case 3:Kt=l.stateNode.containerInfo,pr=!0;break e;case 4:Kt=l.stateNode.containerInfo,pr=!0;break e}l=l.return}if(Kt===null)throw Error(de(160));Mj(a,o,s),Kt=null,pr=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(u){bt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Oj(e,t),e=e.sibling}function Oj(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ur(e,t),Cr(t),r&4){try{Bl(3,t,t.return),Wh(3,t)}catch(b){bt(t,t.return,b)}try{Bl(5,t,t.return)}catch(b){bt(t,t.return,b)}}break;case 1:ur(e,t),Cr(t),r&512&&n!==null&&qa(n,n.return);break;case 5:if(ur(e,t),Cr(t),r&512&&n!==null&&qa(n,n.return),t.flags&32){var s=t.stateNode;try{ac(s,"")}catch(b){bt(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,l=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&t1(s,a),wm(l,o);var u=wm(l,a);for(o=0;o<d.length;o+=2){var p=d[o],f=d[o+1];p==="style"?a1(s,f):p==="dangerouslySetInnerHTML"?s1(s,f):p==="children"?ac(s,f):sx(s,p,f,u)}switch(l){case"input":xm(s,a);break;case"textarea":n1(s,a);break;case"select":var x=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var g=a.value;g!=null?Ja(s,!!a.multiple,g,!1):x!==!!a.multiple&&(a.defaultValue!=null?Ja(s,!!a.multiple,a.defaultValue,!0):Ja(s,!!a.multiple,a.multiple?[]:"",!1))}s[mc]=a}catch(b){bt(t,t.return,b)}}break;case 6:if(ur(e,t),Cr(t),r&4){if(t.stateNode===null)throw Error(de(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(b){bt(t,t.return,b)}}break;case 3:if(ur(e,t),Cr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{dc(e.containerInfo)}catch(b){bt(t,t.return,b)}break;case 4:ur(e,t),Cr(t);break;case 13:ur(e,t),Cr(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Ix=Nt())),r&4&&Ry(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(rn=(u=rn)||p,ur(e,t),rn=u):ur(e,t),Cr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!p&&t.mode&1)for(ye=t,p=t.child;p!==null;){for(f=ye=p;ye!==null;){switch(x=ye,g=x.child,x.tag){case 0:case 11:case 14:case 15:Bl(4,x,x.return);break;case 1:qa(x,x.return);var v=x.stateNode;if(typeof v.componentWillUnmount=="function"){r=x,n=x.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(b){bt(r,n,b)}}break;case 5:qa(x,x.return);break;case 22:if(x.memoizedState!==null){Iy(f);continue}}g!==null?(g.return=x,ye=g):Iy(f)}p=p.sibling}e:for(p=null,f=t;;){if(f.tag===5){if(p===null){p=f;try{s=f.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,d=f.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,l.style.display=i1("display",o))}catch(b){bt(t,t.return,b)}}}else if(f.tag===6){if(p===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(b){bt(t,t.return,b)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ur(e,t),Cr(t),r&4&&Ry(t);break;case 21:break;default:ur(e,t),Cr(t)}}function Cr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Dj(n)){var r=n;break e}n=n.return}throw Error(de(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ac(s,""),r.flags&=-33);var a=Ly(t);Xm(t,a,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Ly(t);Qm(t,l,o);break;default:throw Error(de(161))}}catch(d){bt(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function LT(t,e,n){ye=t,Lj(t)}function Lj(t,e,n){for(var r=(t.mode&1)!==0;ye!==null;){var s=ye,a=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Dd;if(!o){var l=s.alternate,d=l!==null&&l.memoizedState!==null||rn;l=Dd;var u=rn;if(Dd=o,(rn=d)&&!u)for(ye=s;ye!==null;)o=ye,d=o.child,o.tag===22&&o.memoizedState!==null?Fy(s):d!==null?(d.return=o,ye=d):Fy(s);for(;a!==null;)ye=a,Lj(a),a=a.sibling;ye=s,Dd=l,rn=u}Ay(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,ye=a):Ay(t)}}function Ay(t){for(;ye!==null;){var e=ye;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:rn||Wh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!rn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:hr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&by(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}by(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var p=u.memoizedState;if(p!==null){var f=p.dehydrated;f!==null&&dc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(de(163))}rn||e.flags&512&&Gm(e)}catch(x){bt(e,e.return,x)}}if(e===t){ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,ye=n;break}ye=e.return}}function Iy(t){for(;ye!==null;){var e=ye;if(e===t){ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ye=n;break}ye=e.return}}function Fy(t){for(;ye!==null;){var e=ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Wh(4,e)}catch(d){bt(e,n,d)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(d){bt(e,s,d)}}var a=e.return;try{Gm(e)}catch(d){bt(e,a,d)}break;case 5:var o=e.return;try{Gm(e)}catch(d){bt(e,o,d)}}}catch(d){bt(e,e.return,d)}if(e===t){ye=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ye=l;break}ye=e.return}}var RT=Math.ceil,Gu=ys.ReactCurrentDispatcher,Rx=ys.ReactCurrentOwner,Xn=ys.ReactCurrentBatchConfig,Ue=0,zt=null,Dt=null,Gt=0,Dn=0,Za=ci(0),Lt=0,_c=null,ta=0,Yh=0,Ax=0,Ul=null,yn=null,Ix=0,go=1/0,rs=null,Qu=!1,Jm=null,Qs=null,Md=!1,$s=null,Xu=0,Hl=0,eg=null,vu=-1,yu=0;function hn(){return Ue&6?Nt():vu!==-1?vu:vu=Nt()}function Xs(t){return t.mode&1?Ue&2&&Gt!==0?Gt&-Gt:vT.transition!==null?(yu===0&&(yu=v1()),yu):(t=Qe,t!==0||(t=window.event,t=t===void 0?16:k1(t.type)),t):1}function yr(t,e,n,r){if(50<Hl)throw Hl=0,eg=null,Error(de(185));$c(t,n,r),(!(Ue&2)||t!==zt)&&(t===zt&&(!(Ue&2)&&(Yh|=n),Lt===4&&Rs(t,Gt)),Sn(t,r),n===1&&Ue===0&&!(e.mode&1)&&(go=Nt()+500,Bh&&di()))}function Sn(t,e){var n=t.callbackNode;vE(t,e);var r=Ru(t,t===zt?Gt:0);if(r===0)n!==null&&q0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&q0(n),e===1)t.tag===0?xT($y.bind(null,t)):W1($y.bind(null,t)),pT(function(){!(Ue&6)&&di()}),n=null;else{switch(y1(r)){case 1:n=cx;break;case 4:n=g1;break;case 16:n=Lu;break;case 536870912:n=x1;break;default:n=Lu}n=Uj(n,Rj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Rj(t,e){if(vu=-1,yu=0,Ue&6)throw Error(de(327));var n=t.callbackNode;if(so()&&t.callbackNode!==n)return null;var r=Ru(t,t===zt?Gt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ju(t,r);else{e=r;var s=Ue;Ue|=2;var a=Ij();(zt!==t||Gt!==e)&&(rs=null,go=Nt()+500,Yi(t,e));do try{FT();break}catch(l){Aj(t,l)}while(!0);wx(),Gu.current=a,Ue=s,Dt!==null?e=0:(zt=null,Gt=0,e=Lt)}if(e!==0){if(e===2&&(s=Cm(t),s!==0&&(r=s,e=tg(t,s))),e===1)throw n=_c,Yi(t,0),Rs(t,r),Sn(t,Nt()),n;if(e===6)Rs(t,r);else{if(s=t.current.alternate,!(r&30)&&!AT(s)&&(e=Ju(t,r),e===2&&(a=Cm(t),a!==0&&(r=a,e=tg(t,a))),e===1))throw n=_c,Yi(t,0),Rs(t,r),Sn(t,Nt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(de(345));case 2:Ti(t,yn,rs);break;case 3:if(Rs(t,r),(r&130023424)===r&&(e=Ix+500-Nt(),10<e)){if(Ru(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){hn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Rm(Ti.bind(null,t,yn,rs),e);break}Ti(t,yn,rs);break;case 4:if(Rs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-vr(r);a=1<<o,o=e[o],o>s&&(s=o),r&=~a}if(r=s,r=Nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*RT(r/1960))-r,10<r){t.timeoutHandle=Rm(Ti.bind(null,t,yn,rs),r);break}Ti(t,yn,rs);break;case 5:Ti(t,yn,rs);break;default:throw Error(de(329))}}}return Sn(t,Nt()),t.callbackNode===n?Rj.bind(null,t):null}function tg(t,e){var n=Ul;return t.current.memoizedState.isDehydrated&&(Yi(t,e).flags|=256),t=Ju(t,e),t!==2&&(e=yn,yn=n,e!==null&&ng(e)),t}function ng(t){yn===null?yn=t:yn.push.apply(yn,t)}function AT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!br(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rs(t,e){for(e&=~Ax,e&=~Yh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vr(e),r=1<<n;t[n]=-1,e&=~r}}function $y(t){if(Ue&6)throw Error(de(327));so();var e=Ru(t,0);if(!(e&1))return Sn(t,Nt()),null;var n=Ju(t,e);if(t.tag!==0&&n===2){var r=Cm(t);r!==0&&(e=r,n=tg(t,r))}if(n===1)throw n=_c,Yi(t,0),Rs(t,e),Sn(t,Nt()),n;if(n===6)throw Error(de(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ti(t,yn,rs),Sn(t,Nt()),null}function Fx(t,e){var n=Ue;Ue|=1;try{return t(e)}finally{Ue=n,Ue===0&&(go=Nt()+500,Bh&&di())}}function na(t){$s!==null&&$s.tag===0&&!(Ue&6)&&so();var e=Ue;Ue|=1;var n=Xn.transition,r=Qe;try{if(Xn.transition=null,Qe=1,t)return t()}finally{Qe=r,Xn.transition=n,Ue=e,!(Ue&6)&&di()}}function $x(){Dn=Za.current,ct(Za)}function Yi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,hT(n)),Dt!==null)for(n=Dt.return;n!==null;){var r=n;switch(yx(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zu();break;case 3:fo(),ct(Nn),ct(ln),Ex();break;case 5:Cx(r);break;case 4:fo();break;case 13:ct(gt);break;case 19:ct(gt);break;case 10:jx(r.type._context);break;case 22:case 23:$x()}n=n.return}if(zt=t,Dt=t=Js(t.current,null),Gt=Dn=e,Lt=0,_c=null,Ax=Yh=ta=0,yn=Ul=null,$i!==null){for(e=0;e<$i.length;e++)if(n=$i[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=s,r.next=o}n.pending=r}$i=null}return t}function Aj(t,e){do{var n=Dt;try{if(wx(),mu.current=Ku,Zu){for(var r=vt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Zu=!1}if(ea=0,Ft=Ot=vt=null,zl=!1,vc=0,Rx.current=null,n===null||n.return===null){Lt=1,_c=e,Dt=null;break}e:{var a=t,o=n.return,l=n,d=e;if(e=Gt,l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var u=d,p=l,f=p.tag;if(!(p.mode&1)&&(f===0||f===11||f===15)){var x=p.alternate;x?(p.updateQueue=x.updateQueue,p.memoizedState=x.memoizedState,p.lanes=x.lanes):(p.updateQueue=null,p.memoizedState=null)}var g=Sy(o);if(g!==null){g.flags&=-257,Cy(g,o,l,a,e),g.mode&1&&ky(a,u,e),e=g,d=u;var v=e.updateQueue;if(v===null){var b=new Set;b.add(d),e.updateQueue=b}else v.add(d);break e}else{if(!(e&1)){ky(a,u,e),zx();break e}d=Error(de(426))}}else if(ut&&l.mode&1){var w=Sy(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Cy(w,o,l,a,e),bx(mo(d,l));break e}}a=d=mo(d,l),Lt!==4&&(Lt=2),Ul===null?Ul=[a]:Ul.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var _=yj(a,d,e);yy(a,_);break e;case 1:l=d;var N=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof N.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Qs===null||!Qs.has(S)))){a.flags|=65536,e&=-e,a.lanes|=e;var P=bj(a,l,e);yy(a,P);break e}}a=a.return}while(a!==null)}$j(n)}catch(O){e=O,Dt===n&&n!==null&&(Dt=n=n.return);continue}break}while(!0)}function Ij(){var t=Gu.current;return Gu.current=Ku,t===null?Ku:t}function zx(){(Lt===0||Lt===3||Lt===2)&&(Lt=4),zt===null||!(ta&268435455)&&!(Yh&268435455)||Rs(zt,Gt)}function Ju(t,e){var n=Ue;Ue|=2;var r=Ij();(zt!==t||Gt!==e)&&(rs=null,Yi(t,e));do try{IT();break}catch(s){Aj(t,s)}while(!0);if(wx(),Ue=n,Gu.current=r,Dt!==null)throw Error(de(261));return zt=null,Gt=0,Lt}function IT(){for(;Dt!==null;)Fj(Dt)}function FT(){for(;Dt!==null&&!cE();)Fj(Dt)}function Fj(t){var e=Bj(t.alternate,t,Dn);t.memoizedProps=t.pendingProps,e===null?$j(t):Dt=e,Rx.current=null}function $j(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=DT(n,e),n!==null){n.flags&=32767,Dt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Lt=6,Dt=null;return}}else if(n=PT(n,e,Dn),n!==null){Dt=n;return}if(e=e.sibling,e!==null){Dt=e;return}Dt=e=t}while(e!==null);Lt===0&&(Lt=5)}function Ti(t,e,n){var r=Qe,s=Xn.transition;try{Xn.transition=null,Qe=1,$T(t,e,n,r)}finally{Xn.transition=s,Qe=r}return null}function $T(t,e,n,r){do so();while($s!==null);if(Ue&6)throw Error(de(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(de(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(yE(t,a),t===zt&&(Dt=zt=null,Gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Md||(Md=!0,Uj(Lu,function(){return so(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Xn.transition,Xn.transition=null;var o=Qe;Qe=1;var l=Ue;Ue|=4,Rx.current=null,OT(t,n),Oj(n,t),iT(Om),Au=!!Mm,Om=Mm=null,t.current=n,LT(n),dE(),Ue=l,Qe=o,Xn.transition=a}else t.current=n;if(Md&&(Md=!1,$s=t,Xu=s),a=t.pendingLanes,a===0&&(Qs=null),pE(n.stateNode),Sn(t,Nt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Qu)throw Qu=!1,t=Jm,Jm=null,t;return Xu&1&&t.tag!==0&&so(),a=t.pendingLanes,a&1?t===eg?Hl++:(Hl=0,eg=t):Hl=0,di(),null}function so(){if($s!==null){var t=y1(Xu),e=Xn.transition,n=Qe;try{if(Xn.transition=null,Qe=16>t?16:t,$s===null)var r=!1;else{if(t=$s,$s=null,Xu=0,Ue&6)throw Error(de(331));var s=Ue;for(Ue|=4,ye=t.current;ye!==null;){var a=ye,o=a.child;if(ye.flags&16){var l=a.deletions;if(l!==null){for(var d=0;d<l.length;d++){var u=l[d];for(ye=u;ye!==null;){var p=ye;switch(p.tag){case 0:case 11:case 15:Bl(8,p,a)}var f=p.child;if(f!==null)f.return=p,ye=f;else for(;ye!==null;){p=ye;var x=p.sibling,g=p.return;if(Pj(p),p===u){ye=null;break}if(x!==null){x.return=g,ye=x;break}ye=g}}}var v=a.alternate;if(v!==null){var b=v.child;if(b!==null){v.child=null;do{var w=b.sibling;b.sibling=null,b=w}while(b!==null)}}ye=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ye=o;else e:for(;ye!==null;){if(a=ye,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Bl(9,a,a.return)}var _=a.sibling;if(_!==null){_.return=a.return,ye=_;break e}ye=a.return}}var N=t.current;for(ye=N;ye!==null;){o=ye;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,ye=S;else e:for(o=N;ye!==null;){if(l=ye,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Wh(9,l)}}catch(O){bt(l,l.return,O)}if(l===o){ye=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,ye=P;break e}ye=l.return}}if(Ue=s,di(),Fr&&typeof Fr.onPostCommitFiberRoot=="function")try{Fr.onPostCommitFiberRoot(Ah,t)}catch{}r=!0}return r}finally{Qe=n,Xn.transition=e}}return!1}function zy(t,e,n){e=mo(n,e),e=yj(t,e,1),t=Gs(t,e,1),e=hn(),t!==null&&($c(t,1,e),Sn(t,e))}function bt(t,e,n){if(t.tag===3)zy(t,t,n);else for(;e!==null;){if(e.tag===3){zy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qs===null||!Qs.has(r))){t=mo(n,t),t=bj(e,t,1),e=Gs(e,t,1),t=hn(),e!==null&&($c(e,1,t),Sn(e,t));break}}e=e.return}}function zT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=hn(),t.pingedLanes|=t.suspendedLanes&n,zt===t&&(Gt&n)===n&&(Lt===4||Lt===3&&(Gt&130023424)===Gt&&500>Nt()-Ix?Yi(t,0):Ax|=n),Sn(t,e)}function zj(t,e){e===0&&(t.mode&1?(e=wd,wd<<=1,!(wd&130023424)&&(wd=4194304)):e=1);var n=hn();t=ms(t,e),t!==null&&($c(t,e,n),Sn(t,n))}function BT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),zj(t,n)}function UT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(de(314))}r!==null&&r.delete(e),zj(t,n)}var Bj;Bj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nn.current)wn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wn=!1,TT(t,e,n);wn=!!(t.flags&131072)}else wn=!1,ut&&e.flags&1048576&&Y1(e,Hu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xu(t,e),t=e.pendingProps;var s=uo(e,ln.current);ro(e,n),s=Px(null,e,r,t,s,n);var a=Dx();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kn(r)?(a=!0,Bu(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,kx(e),s.updater=Hh,e.stateNode=s,s._reactInternals=e,Um(e,r,t,n),e=Ym(null,e,r,!0,a,n)):(e.tag=0,ut&&a&&vx(e),dn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=WT(r),t=hr(r,t),s){case 0:e=Wm(null,e,r,t,n);break e;case 1:e=Py(null,e,r,t,n);break e;case 11:e=Ey(null,e,r,t,n);break e;case 14:e=Ty(null,e,r,hr(r.type,t),n);break e}throw Error(de(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hr(r,s),Wm(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hr(r,s),Py(t,e,r,s,n);case 3:e:{if(Nj(e),t===null)throw Error(de(387));r=e.pendingProps,a=e.memoizedState,s=a.element,Q1(t,e),Vu(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=mo(Error(de(423)),e),e=Dy(t,e,r,n,s);break e}else if(r!==s){s=mo(Error(de(424)),e),e=Dy(t,e,r,n,s);break e}else for(On=Ks(e.stateNode.containerInfo.firstChild),Ln=e,ut=!0,mr=null,n=K1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ho(),r===s){e=gs(t,e,n);break e}dn(t,e,r,n)}e=e.child}return e;case 5:return X1(e),t===null&&$m(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,Lm(r,s)?o=null:a!==null&&Lm(r,a)&&(e.flags|=32),jj(t,e),dn(t,e,o,n),e.child;case 6:return t===null&&$m(e),null;case 13:return kj(t,e,n);case 4:return Sx(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=po(e,null,r,n):dn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hr(r,s),Ey(t,e,r,s,n);case 7:return dn(t,e,e.pendingProps,n),e.child;case 8:return dn(t,e,e.pendingProps.children,n),e.child;case 12:return dn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,it(Wu,r._currentValue),r._currentValue=o,a!==null)if(br(a.value,o)){if(a.children===s.children&&!Nn.current){e=gs(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var d=l.firstContext;d!==null;){if(d.context===r){if(a.tag===1){d=ds(-1,n&-n),d.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var p=u.pending;p===null?d.next=d:(d.next=p.next,p.next=d),u.pending=d}}a.lanes|=n,d=a.alternate,d!==null&&(d.lanes|=n),zm(a.return,n,e),l.lanes|=n;break}d=d.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(de(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),zm(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}dn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ro(e,n),s=er(s),r=r(s),e.flags|=1,dn(t,e,r,n),e.child;case 14:return r=e.type,s=hr(r,e.pendingProps),s=hr(r.type,s),Ty(t,e,r,s,n);case 15:return _j(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hr(r,s),xu(t,e),e.tag=1,kn(r)?(t=!0,Bu(e)):t=!1,ro(e,n),vj(e,r,s),Um(e,r,s,n),Ym(null,e,r,!0,t,n);case 19:return Sj(t,e,n);case 22:return wj(t,e,n)}throw Error(de(156,e.tag))};function Uj(t,e){return m1(t,e)}function HT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(t,e,n,r){return new HT(t,e,n,r)}function Bx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function WT(t){if(typeof t=="function")return Bx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ax)return 11;if(t===ox)return 14}return 2}function Js(t,e){var n=t.alternate;return n===null?(n=Kn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function bu(t,e,n,r,s,a){var o=2;if(r=t,typeof t=="function")Bx(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Fa:return Vi(n.children,s,a,e);case ix:o=8,s|=8;break;case hm:return t=Kn(12,n,e,s|2),t.elementType=hm,t.lanes=a,t;case pm:return t=Kn(13,n,e,s),t.elementType=pm,t.lanes=a,t;case fm:return t=Kn(19,n,e,s),t.elementType=fm,t.lanes=a,t;case Xw:return Vh(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Gw:o=10;break e;case Qw:o=9;break e;case ax:o=11;break e;case ox:o=14;break e;case Ps:o=16,r=null;break e}throw Error(de(130,t==null?t:typeof t,""))}return e=Kn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function Vi(t,e,n,r){return t=Kn(7,t,r,e),t.lanes=n,t}function Vh(t,e,n,r){return t=Kn(22,t,r,e),t.elementType=Xw,t.lanes=n,t.stateNode={isHidden:!1},t}function bf(t,e,n){return t=Kn(6,t,null,e),t.lanes=n,t}function _f(t,e,n){return e=Kn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function YT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ef(0),this.expirationTimes=ef(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ef(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ux(t,e,n,r,s,a,o,l,d){return t=new YT(t,e,n,l,d),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Kn(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},kx(a),t}function VT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ia,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Hj(t){if(!t)return si;t=t._reactInternals;e:{if(ca(t)!==t||t.tag!==1)throw Error(de(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(de(171))}if(t.tag===1){var n=t.type;if(kn(n))return H1(t,n,e)}return e}function Wj(t,e,n,r,s,a,o,l,d){return t=Ux(n,r,!0,t,s,a,o,l,d),t.context=Hj(null),n=t.current,r=hn(),s=Xs(n),a=ds(r,s),a.callback=e??null,Gs(n,a,s),t.current.lanes=s,$c(t,s,r),Sn(t,r),t}function qh(t,e,n,r){var s=e.current,a=hn(),o=Xs(s);return n=Hj(n),e.context===null?e.context=n:e.pendingContext=n,e=ds(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Gs(s,e,o),t!==null&&(yr(t,s,o,a),fu(t,s,o)),o}function eh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function By(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hx(t,e){By(t,e),(t=t.alternate)&&By(t,e)}function qT(){return null}var Yj=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wx(t){this._internalRoot=t}Zh.prototype.render=Wx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(de(409));qh(t,e,null,null)};Zh.prototype.unmount=Wx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;na(function(){qh(null,t,null,null)}),e[fs]=null}};function Zh(t){this._internalRoot=t}Zh.prototype.unstable_scheduleHydration=function(t){if(t){var e=w1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ls.length&&e!==0&&e<Ls[n].priority;n++);Ls.splice(n,0,t),n===0&&N1(t)}};function Yx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Kh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Uy(){}function ZT(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var u=eh(o);a.call(u)}}var o=Wj(e,r,t,0,null,!1,!1,"",Uy);return t._reactRootContainer=o,t[fs]=o.current,pc(t.nodeType===8?t.parentNode:t),na(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=eh(d);l.call(u)}}var d=Ux(t,0,!1,null,null,!1,!1,"",Uy);return t._reactRootContainer=d,t[fs]=d.current,pc(t.nodeType===8?t.parentNode:t),na(function(){qh(e,d,n,r)}),d}function Gh(t,e,n,r,s){var a=n._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var d=eh(o);l.call(d)}}qh(e,o,t,s)}else o=ZT(n,e,t,s,r);return eh(o)}b1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=kl(e.pendingLanes);n!==0&&(dx(e,n|1),Sn(e,Nt()),!(Ue&6)&&(go=Nt()+500,di()))}break;case 13:na(function(){var r=ms(t,1);if(r!==null){var s=hn();yr(r,t,1,s)}}),Hx(t,1)}};ux=function(t){if(t.tag===13){var e=ms(t,134217728);if(e!==null){var n=hn();yr(e,t,134217728,n)}Hx(t,134217728)}};_1=function(t){if(t.tag===13){var e=Xs(t),n=ms(t,e);if(n!==null){var r=hn();yr(n,t,e,r)}Hx(t,e)}};w1=function(){return Qe};j1=function(t,e){var n=Qe;try{return Qe=t,e()}finally{Qe=n}};Nm=function(t,e,n){switch(e){case"input":if(xm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=zh(r);if(!s)throw Error(de(90));e1(r),xm(r,s)}}}break;case"textarea":n1(t,n);break;case"select":e=n.value,e!=null&&Ja(t,!!n.multiple,e,!1)}};c1=Fx;d1=na;var KT={usingClientEntryPoint:!1,Events:[Bc,Ua,zh,o1,l1,Fx]},dl={findFiberByHostInstance:Fi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},GT={bundleType:dl.bundleType,version:dl.version,rendererPackageName:dl.rendererPackageName,rendererConfig:dl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ys.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=p1(t),t===null?null:t.stateNode},findFiberByHostInstance:dl.findFiberByHostInstance||qT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Od.isDisabled&&Od.supportsFiber)try{Ah=Od.inject(GT),Fr=Od}catch{}}In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KT;In.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yx(e))throw Error(de(200));return VT(t,e,null,n)};In.createRoot=function(t,e){if(!Yx(t))throw Error(de(299));var n=!1,r="",s=Yj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ux(t,1,!1,null,null,n,!1,r,s),t[fs]=e.current,pc(t.nodeType===8?t.parentNode:t),new Wx(e)};In.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(de(188)):(t=Object.keys(t).join(","),Error(de(268,t)));return t=p1(e),t=t===null?null:t.stateNode,t};In.flushSync=function(t){return na(t)};In.hydrate=function(t,e,n){if(!Kh(e))throw Error(de(200));return Gh(null,t,e,!0,n)};In.hydrateRoot=function(t,e,n){if(!Yx(t))throw Error(de(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",o=Yj;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Wj(e,null,t,1,n??null,s,!1,a,o),t[fs]=e.current,pc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Zh(e)};In.render=function(t,e,n){if(!Kh(e))throw Error(de(200));return Gh(null,t,e,!1,n)};In.unmountComponentAtNode=function(t){if(!Kh(t))throw Error(de(40));return t._reactRootContainer?(na(function(){Gh(null,null,t,!1,function(){t._reactRootContainer=null,t[fs]=null})}),!0):!1};In.unstable_batchedUpdates=Fx;In.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Kh(n))throw Error(de(200));if(t==null||t._reactInternals===void 0)throw Error(de(38));return Gh(t,e,n,!1,r)};In.version="18.3.1-next-f1338f8080-20240426";function Vj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vj)}catch(t){console.error(t)}}Vj(),Vw.exports=In;var Hc=Vw.exports;const QT=oi(Hc);var Hy=Hc;dm.createRoot=Hy.createRoot,dm.hydrateRoot=Hy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wc(){return wc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wc.apply(this,arguments)}var zs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(zs||(zs={}));const Wy="popstate";function XT(t){t===void 0&&(t={});function e(r,s){let{pathname:a,search:o,hash:l}=r.location;return rg("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:th(s)}return eP(e,n,null,t)}function Et(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function qj(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function JT(){return Math.random().toString(36).substr(2,8)}function Yy(t,e){return{usr:t.state,key:t.key,idx:e}}function rg(t,e,n,r){return n===void 0&&(n=null),wc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Oo(e):e,{state:n,key:e&&e.key||r||JT()})}function th(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Oo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function eP(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,o=s.history,l=zs.Pop,d=null,u=p();u==null&&(u=0,o.replaceState(wc({},o.state,{idx:u}),""));function p(){return(o.state||{idx:null}).idx}function f(){l=zs.Pop;let w=p(),_=w==null?null:w-u;u=w,d&&d({action:l,location:b.location,delta:_})}function x(w,_){l=zs.Push;let N=rg(b.location,w,_);u=p()+1;let S=Yy(N,u),P=b.createHref(N);try{o.pushState(S,"",P)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(P)}a&&d&&d({action:l,location:b.location,delta:1})}function g(w,_){l=zs.Replace;let N=rg(b.location,w,_);u=p();let S=Yy(N,u),P=b.createHref(N);o.replaceState(S,"",P),a&&d&&d({action:l,location:b.location,delta:0})}function v(w){let _=s.location.origin!=="null"?s.location.origin:s.location.href,N=typeof w=="string"?w:th(w);return N=N.replace(/ $/,"%20"),Et(_,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,_)}let b={get action(){return l},get location(){return t(s,o)},listen(w){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Wy,f),d=w,()=>{s.removeEventListener(Wy,f),d=null}},createHref(w){return e(s,w)},createURL:v,encodeLocation(w){let _=v(w);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:x,replace:g,go(w){return o.go(w)}};return b}var Vy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Vy||(Vy={}));function tP(t,e,n){return n===void 0&&(n="/"),nP(t,e,n)}function nP(t,e,n,r){let s=typeof e=="string"?Oo(e):e,a=Vx(s.pathname||"/",n);if(a==null)return null;let o=Zj(t);rP(o);let l=null;for(let d=0;l==null&&d<o.length;++d){let u=mP(a);l=hP(o[d],u)}return l}function Zj(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,o,l)=>{let d={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};d.relativePath.startsWith("/")&&(Et(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let u=ei([r,d.relativePath]),p=n.concat(d);a.children&&a.children.length>0&&(Et(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Zj(a.children,e,p,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:dP(u,a.index),routesMeta:p})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let d of Kj(a.path))s(a,o,d)}),e}function Kj(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let o=Kj(r.join("/")),l=[];return l.push(...o.map(d=>d===""?a:[a,d].join("/"))),s&&l.push(...o),l.map(d=>t.startsWith("/")&&d===""?"/":d)}function rP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:uP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const sP=/^:[\w-]+$/,iP=3,aP=2,oP=1,lP=10,cP=-2,qy=t=>t==="*";function dP(t,e){let n=t.split("/"),r=n.length;return n.some(qy)&&(r+=cP),e&&(r+=aP),n.filter(s=>!qy(s)).reduce((s,a)=>s+(sP.test(a)?iP:a===""?oP:lP),r)}function uP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function hP(t,e,n){let{routesMeta:r}=t,s={},a="/",o=[];for(let l=0;l<r.length;++l){let d=r[l],u=l===r.length-1,p=a==="/"?e:e.slice(a.length)||"/",f=pP({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},p),x=d.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:ei([a,f.pathname]),pathnameBase:yP(ei([a,f.pathnameBase])),route:x}),f.pathnameBase!=="/"&&(a=ei([a,f.pathnameBase]))}return o}function pP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=fP(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,p,f)=>{let{paramName:x,isOptional:g}=p;if(x==="*"){let b=l[f]||"";o=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const v=l[f];return g&&!v?u[x]=void 0:u[x]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function fP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),qj(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,d)=>(r.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function mP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return qj(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Vx(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function gP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Oo(t):t;return{pathname:n?n.startsWith("/")?n:xP(n,e):e,search:bP(r),hash:_P(s)}}function xP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function wf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function qx(t,e){let n=vP(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Zx(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Oo(t):(s=wc({},t),Et(!s.pathname||!s.pathname.includes("?"),wf("?","pathname","search",s)),Et(!s.pathname||!s.pathname.includes("#"),wf("#","pathname","hash",s)),Et(!s.search||!s.search.includes("#"),wf("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),f-=1;s.pathname=x.join("/")}l=f>=0?e[f]:"/"}let d=gP(s,l),u=o&&o!=="/"&&o.endsWith("/"),p=(a||o===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(u||p)&&(d.pathname+="/"),d}const ei=t=>t.join("/").replace(/\/\/+/g,"/"),yP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,_P=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function wP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Gj=["post","put","patch","delete"];new Set(Gj);const jP=["get",...Gj];new Set(jP);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jc(){return jc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jc.apply(this,arguments)}const Kx=j.createContext(null),NP=j.createContext(null),ui=j.createContext(null),Qh=j.createContext(null),hi=j.createContext({outlet:null,matches:[],isDataRoute:!1}),Qj=j.createContext(null);function kP(t,e){let{relative:n}=e===void 0?{}:e;Lo()||Et(!1);let{basename:r,navigator:s}=j.useContext(ui),{hash:a,pathname:o,search:l}=Jj(t,{relative:n}),d=o;return r!=="/"&&(d=o==="/"?r:ei([r,o])),s.createHref({pathname:d,search:l,hash:a})}function Lo(){return j.useContext(Qh)!=null}function pi(){return Lo()||Et(!1),j.useContext(Qh).location}function Xj(t){j.useContext(ui).static||j.useLayoutEffect(t)}function da(){let{isDataRoute:t}=j.useContext(hi);return t?FP():SP()}function SP(){Lo()||Et(!1);let t=j.useContext(Kx),{basename:e,future:n,navigator:r}=j.useContext(ui),{matches:s}=j.useContext(hi),{pathname:a}=pi(),o=JSON.stringify(qx(s,n.v7_relativeSplatPath)),l=j.useRef(!1);return Xj(()=>{l.current=!0}),j.useCallback(function(u,p){if(p===void 0&&(p={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let f=Zx(u,JSON.parse(o),a,p.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ei([e,f.pathname])),(p.replace?r.replace:r.push)(f,p.state,p)},[e,r,o,a,t])}function Jj(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=j.useContext(ui),{matches:s}=j.useContext(hi),{pathname:a}=pi(),o=JSON.stringify(qx(s,r.v7_relativeSplatPath));return j.useMemo(()=>Zx(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function CP(t,e){return EP(t,e)}function EP(t,e,n,r){Lo()||Et(!1);let{navigator:s,static:a}=j.useContext(ui),{matches:o}=j.useContext(hi),l=o[o.length-1],d=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let p=pi(),f;if(e){var x;let _=typeof e=="string"?Oo(e):e;u==="/"||(x=_.pathname)!=null&&x.startsWith(u)||Et(!1),f=_}else f=p;let g=f.pathname||"/",v=g;if(u!=="/"){let _=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(_.length).join("/")}let b=tP(t,{pathname:v}),w=OP(b&&b.map(_=>Object.assign({},_,{params:Object.assign({},d,_.params),pathname:ei([u,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?u:ei([u,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,n,r);return e&&w?j.createElement(Qh.Provider,{value:{location:jc({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:zs.Pop}},w):w}function TP(){let t=IP(),e=wP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:s},n):null,null)}const PP=j.createElement(TP,null);class DP extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(hi.Provider,{value:this.props.routeContext},j.createElement(Qj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function MP(t){let{routeContext:e,match:n,children:r}=t,s=j.useContext(Kx);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(hi.Provider,{value:e},r)}function OP(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let p=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);p>=0||Et(!1),o=o.slice(0,Math.min(o.length,p+1))}let d=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<o.length;p++){let f=o[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=p),f.route.id){let{loaderData:x,errors:g}=n,v=f.route.loader&&x[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||v){d=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((p,f,x)=>{let g,v=!1,b=null,w=null;n&&(g=l&&f.route.id?l[f.route.id]:void 0,b=f.route.errorElement||PP,d&&(u<0&&x===0?($P("route-fallback"),v=!0,w=null):u===x&&(v=!0,w=f.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,x+1)),N=()=>{let S;return g?S=b:v?S=w:f.route.Component?S=j.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=p,j.createElement(MP,{match:f,routeContext:{outlet:p,matches:_,isDataRoute:n!=null},children:S})};return n&&(f.route.ErrorBoundary||f.route.errorElement||x===0)?j.createElement(DP,{location:n.location,revalidation:n.revalidation,component:b,error:g,children:N(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):N()},null)}var e2=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(e2||{}),t2=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(t2||{});function LP(t){let e=j.useContext(Kx);return e||Et(!1),e}function RP(t){let e=j.useContext(NP);return e||Et(!1),e}function AP(t){let e=j.useContext(hi);return e||Et(!1),e}function n2(t){let e=AP(),n=e.matches[e.matches.length-1];return n.route.id||Et(!1),n.route.id}function IP(){var t;let e=j.useContext(Qj),n=RP(),r=n2();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function FP(){let{router:t}=LP(e2.UseNavigateStable),e=n2(t2.UseNavigateStable),n=j.useRef(!1);return Xj(()=>{n.current=!0}),j.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,jc({fromRouteId:e},a)))},[t,e])}const Zy={};function $P(t,e,n){Zy[t]||(Zy[t]=!0)}function zP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function io(t){let{to:e,replace:n,state:r,relative:s}=t;Lo()||Et(!1);let{future:a,static:o}=j.useContext(ui),{matches:l}=j.useContext(hi),{pathname:d}=pi(),u=da(),p=Zx(e,qx(l,a.v7_relativeSplatPath),d,s==="path"),f=JSON.stringify(p);return j.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:s}),[u,f,s,n,r]),null}function Me(t){Et(!1)}function BP(t){let{basename:e="/",children:n=null,location:r,navigationType:s=zs.Pop,navigator:a,static:o=!1,future:l}=t;Lo()&&Et(!1);let d=e.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:d,navigator:a,static:o,future:jc({v7_relativeSplatPath:!1},l)}),[d,l,a,o]);typeof r=="string"&&(r=Oo(r));let{pathname:p="/",search:f="",hash:x="",state:g=null,key:v="default"}=r,b=j.useMemo(()=>{let w=Vx(p,d);return w==null?null:{location:{pathname:w,search:f,hash:x,state:g,key:v},navigationType:s}},[d,p,f,x,g,v,s]);return b==null?null:j.createElement(ui.Provider,{value:u},j.createElement(Qh.Provider,{children:n,value:b}))}function r2(t){let{children:e,location:n}=t;return CP(sg(e),n)}new Promise(()=>{});function sg(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(r,s)=>{if(!j.isValidElement(r))return;let a=[...e,s];if(r.type===j.Fragment){n.push.apply(n,sg(r.props.children,a));return}r.type!==Me&&Et(!1),!r.props.index||!r.props.children||Et(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=sg(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ig(){return ig=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ig.apply(this,arguments)}function UP(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function HP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function WP(t,e){return t.button===0&&(!e||e==="_self")&&!HP(t)}const YP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],VP="6";try{window.__reactRouterVersion=VP}catch{}const qP="startTransition",Ky=lo[qP];function ZP(t){let{basename:e,children:n,future:r,window:s}=t,a=j.useRef();a.current==null&&(a.current=XT({window:s,v5Compat:!0}));let o=a.current,[l,d]=j.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},p=j.useCallback(f=>{u&&Ky?Ky(()=>d(f)):d(f)},[d,u]);return j.useLayoutEffect(()=>o.listen(p),[o,p]),j.useEffect(()=>zP(r),[r]),j.createElement(BP,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const KP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",GP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nh=j.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:a,replace:o,state:l,target:d,to:u,preventScrollReset:p,viewTransition:f}=e,x=UP(e,YP),{basename:g}=j.useContext(ui),v,b=!1;if(typeof u=="string"&&GP.test(u)&&(v=u,KP))try{let S=new URL(window.location.href),P=u.startsWith("//")?new URL(S.protocol+u):new URL(u),O=Vx(P.pathname,g);P.origin===S.origin&&O!=null?u=O+P.search+P.hash:b=!0}catch{}let w=kP(u,{relative:s}),_=QP(u,{replace:o,state:l,target:d,preventScrollReset:p,relative:s,viewTransition:f});function N(S){r&&r(S),S.defaultPrevented||_(S)}return j.createElement("a",ig({},x,{href:v||w,onClick:b||a?r:N,ref:n,target:d}))});var Gy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Gy||(Gy={}));var Qy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Qy||(Qy={}));function QP(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,d=da(),u=pi(),p=Jj(t,{relative:o});return j.useCallback(f=>{if(WP(f,n)){f.preventDefault();let x=r!==void 0?r:th(u)===th(p);d(t,{replace:x,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[u,d,p,r,s,n,t,a,o,l])}function s2(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=s2(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function Bs(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=s2(t))&&(r&&(r+=" "),r+=e);return r}const Wl=t=>typeof t=="number"&&!isNaN(t),ra=t=>typeof t=="string",jn=t=>typeof t=="function",_u=t=>ra(t)||jn(t)?t:null,jf=t=>j.isValidElement(t)||ra(t)||jn(t)||Wl(t);function XP(t,e,n){n===void 0&&(n=300);const{scrollHeight:r,style:s}=t;requestAnimationFrame(()=>{s.minHeight="initial",s.height=r+"px",s.transition=`all ${n}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(e,n)})})}function Xh(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:s=!0,collapseDuration:a=300}=t;return function(o){let{children:l,position:d,preventExitTransition:u,done:p,nodeRef:f,isIn:x}=o;const g=r?`${e}--${d}`:e,v=r?`${n}--${d}`:n,b=j.useRef(0);return j.useLayoutEffect(()=>{const w=f.current,_=g.split(" "),N=S=>{S.target===f.current&&(w.dispatchEvent(new Event("d")),w.removeEventListener("animationend",N),w.removeEventListener("animationcancel",N),b.current===0&&S.type!=="animationcancel"&&w.classList.remove(..._))};w.classList.add(..._),w.addEventListener("animationend",N),w.addEventListener("animationcancel",N)},[]),j.useEffect(()=>{const w=f.current,_=()=>{w.removeEventListener("animationend",_),s?XP(w,p,a):p()};x||(u?_():(b.current=1,w.className+=` ${v}`,w.addEventListener("animationend",_)))},[x]),Z.createElement(Z.Fragment,null,l)}}function Xy(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const Vn={list:new Map,emitQueue:new Map,on(t,e){return this.list.has(t)||this.list.set(t,[]),this.list.get(t).push(e),this},off(t,e){if(e){const n=this.list.get(t).filter(r=>r!==e);return this.list.set(t,n),this}return this.list.delete(t),this},cancelEmit(t){const e=this.emitQueue.get(t);return e&&(e.forEach(clearTimeout),this.emitQueue.delete(t)),this},emit(t){this.list.has(t)&&this.list.get(t).forEach(e=>{const n=setTimeout(()=>{e(...[].slice.call(arguments,1))},0);this.emitQueue.has(t)||this.emitQueue.set(t,[]),this.emitQueue.get(t).push(n)})}},Ld=t=>{let{theme:e,type:n,...r}=t;return Z.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...r})},Nf={info:function(t){return Z.createElement(Ld,{...t},Z.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return Z.createElement(Ld,{...t},Z.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return Z.createElement(Ld,{...t},Z.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return Z.createElement(Ld,{...t},Z.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return Z.createElement("div",{className:"Toastify__spinner"})}};function JP(t){const[,e]=j.useReducer(g=>g+1,0),[n,r]=j.useState([]),s=j.useRef(null),a=j.useRef(new Map).current,o=g=>n.indexOf(g)!==-1,l=j.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:t,containerId:null,isToastActive:o,getToast:g=>a.get(g)}).current;function d(g){let{containerId:v}=g;const{limit:b}=l.props;!b||v&&l.containerId!==v||(l.count-=l.queue.length,l.queue=[])}function u(g){r(v=>g==null?[]:v.filter(b=>b!==g))}function p(){const{toastContent:g,toastProps:v,staleId:b}=l.queue.shift();x(g,v,b)}function f(g,v){let{delay:b,staleId:w,..._}=v;if(!jf(g)||function(ee){return!s.current||l.props.enableMultiContainer&&ee.containerId!==l.props.containerId||a.has(ee.toastId)&&ee.updateId==null}(_))return;const{toastId:N,updateId:S,data:P}=_,{props:O}=l,A=()=>u(N),R=S==null;R&&l.count++;const T={...O,style:O.toastStyle,key:l.toastKey++,...Object.fromEntries(Object.entries(_).filter(ee=>{let[G,z]=ee;return z!=null})),toastId:N,updateId:S,data:P,closeToast:A,isIn:!1,className:_u(_.className||O.toastClassName),bodyClassName:_u(_.bodyClassName||O.bodyClassName),progressClassName:_u(_.progressClassName||O.progressClassName),autoClose:!_.isLoading&&(Y=_.autoClose,D=O.autoClose,Y===!1||Wl(Y)&&Y>0?Y:D),deleteToast(){const ee=Xy(a.get(N),"removed");a.delete(N),Vn.emit(4,ee);const G=l.queue.length;if(l.count=N==null?l.count-l.displayedToast:l.count-1,l.count<0&&(l.count=0),G>0){const z=N==null?l.props.limit:1;if(G===1||z===1)l.displayedToast++,p();else{const V=z>G?G:z;l.displayedToast=V;for(let C=0;C<V;C++)p()}}else e()}};var Y,D;T.iconOut=function(ee){let{theme:G,type:z,isLoading:V,icon:C}=ee,q=null;const I={theme:G,type:z};return C===!1||(jn(C)?q=C(I):j.isValidElement(C)?q=j.cloneElement(C,I):ra(C)||Wl(C)?q=C:V?q=Nf.spinner():(X=>X in Nf)(z)&&(q=Nf[z](I))),q}(T),jn(_.onOpen)&&(T.onOpen=_.onOpen),jn(_.onClose)&&(T.onClose=_.onClose),T.closeButton=O.closeButton,_.closeButton===!1||jf(_.closeButton)?T.closeButton=_.closeButton:_.closeButton===!0&&(T.closeButton=!jf(O.closeButton)||O.closeButton);let U=g;j.isValidElement(g)&&!ra(g.type)?U=j.cloneElement(g,{closeToast:A,toastProps:T,data:P}):jn(g)&&(U=g({closeToast:A,toastProps:T,data:P})),O.limit&&O.limit>0&&l.count>O.limit&&R?l.queue.push({toastContent:U,toastProps:T,staleId:w}):Wl(b)?setTimeout(()=>{x(U,T,w)},b):x(U,T,w)}function x(g,v,b){const{toastId:w}=v;b&&a.delete(b);const _={content:g,props:v};a.set(w,_),r(N=>[...N,w].filter(S=>S!==b)),Vn.emit(4,Xy(_,_.props.updateId==null?"added":"updated"))}return j.useEffect(()=>(l.containerId=t.containerId,Vn.cancelEmit(3).on(0,f).on(1,g=>s.current&&u(g)).on(5,d).emit(2,l),()=>{a.clear(),Vn.emit(3,l)}),[]),j.useEffect(()=>{l.props=t,l.isToastActive=o,l.displayedToast=n.length}),{getToastToRender:function(g){const v=new Map,b=Array.from(a.values());return t.newestOnTop&&b.reverse(),b.forEach(w=>{const{position:_}=w.props;v.has(_)||v.set(_,[]),v.get(_).push(w)}),Array.from(v,w=>g(w[0],w[1]))},containerRef:s,isToastActive:o}}function Jy(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientX:t.clientX}function eb(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientY:t.clientY}function eD(t){const[e,n]=j.useState(!1),[r,s]=j.useState(!1),a=j.useRef(null),o=j.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,l=j.useRef(t),{autoClose:d,pauseOnHover:u,closeToast:p,onClick:f,closeOnClick:x}=t;function g(P){if(t.draggable){P.nativeEvent.type==="touchstart"&&P.nativeEvent.preventDefault(),o.didMove=!1,document.addEventListener("mousemove",_),document.addEventListener("mouseup",N),document.addEventListener("touchmove",_),document.addEventListener("touchend",N);const O=a.current;o.canCloseOnClick=!0,o.canDrag=!0,o.boundingRect=O.getBoundingClientRect(),O.style.transition="",o.x=Jy(P.nativeEvent),o.y=eb(P.nativeEvent),t.draggableDirection==="x"?(o.start=o.x,o.removalDistance=O.offsetWidth*(t.draggablePercent/100)):(o.start=o.y,o.removalDistance=O.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent/100))}}function v(P){if(o.boundingRect){const{top:O,bottom:A,left:R,right:T}=o.boundingRect;P.nativeEvent.type!=="touchend"&&t.pauseOnHover&&o.x>=R&&o.x<=T&&o.y>=O&&o.y<=A?w():b()}}function b(){n(!0)}function w(){n(!1)}function _(P){const O=a.current;o.canDrag&&O&&(o.didMove=!0,e&&w(),o.x=Jy(P),o.y=eb(P),o.delta=t.draggableDirection==="x"?o.x-o.start:o.y-o.start,o.start!==o.x&&(o.canCloseOnClick=!1),O.style.transform=`translate${t.draggableDirection}(${o.delta}px)`,O.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function N(){document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",N),document.removeEventListener("touchmove",_),document.removeEventListener("touchend",N);const P=a.current;if(o.canDrag&&o.didMove&&P){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return s(!0),void t.closeToast();P.style.transition="transform 0.2s, opacity 0.2s",P.style.transform=`translate${t.draggableDirection}(0)`,P.style.opacity="1"}}j.useEffect(()=>{l.current=t}),j.useEffect(()=>(a.current&&a.current.addEventListener("d",b,{once:!0}),jn(t.onOpen)&&t.onOpen(j.isValidElement(t.children)&&t.children.props),()=>{const P=l.current;jn(P.onClose)&&P.onClose(j.isValidElement(P.children)&&P.children.props)}),[]),j.useEffect(()=>(t.pauseOnFocusLoss&&(document.hasFocus()||w(),window.addEventListener("focus",b),window.addEventListener("blur",w)),()=>{t.pauseOnFocusLoss&&(window.removeEventListener("focus",b),window.removeEventListener("blur",w))}),[t.pauseOnFocusLoss]);const S={onMouseDown:g,onTouchStart:g,onMouseUp:v,onTouchEnd:v};return d&&u&&(S.onMouseEnter=w,S.onMouseLeave=b),x&&(S.onClick=P=>{f&&f(P),o.canCloseOnClick&&p()}),{playToast:b,pauseToast:w,isRunning:e,preventExitTransition:r,toastRef:a,eventHandlers:S}}function i2(t){let{closeToast:e,theme:n,ariaLabel:r="close"}=t;return Z.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:s=>{s.stopPropagation(),e(s)},"aria-label":r},Z.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Z.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function tD(t){let{delay:e,isRunning:n,closeToast:r,type:s="default",hide:a,className:o,style:l,controlledProgress:d,progress:u,rtl:p,isIn:f,theme:x}=t;const g=a||d&&u===0,v={...l,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused",opacity:g?0:1};d&&(v.transform=`scaleX(${u})`);const b=Bs("Toastify__progress-bar",d?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${x}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":p}),w=jn(o)?o({rtl:p,type:s,defaultClassName:b}):Bs(b,o);return Z.createElement("div",{role:"progressbar","aria-hidden":g?"true":"false","aria-label":"notification timer",className:w,style:v,[d&&u>=1?"onTransitionEnd":"onAnimationEnd"]:d&&u<1?null:()=>{f&&r()}})}const nD=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:s}=eD(t),{closeButton:a,children:o,autoClose:l,onClick:d,type:u,hideProgressBar:p,closeToast:f,transition:x,position:g,className:v,style:b,bodyClassName:w,bodyStyle:_,progressClassName:N,progressStyle:S,updateId:P,role:O,progress:A,rtl:R,toastId:T,deleteToast:Y,isIn:D,isLoading:U,iconOut:ee,closeOnClick:G,theme:z}=t,V=Bs("Toastify__toast",`Toastify__toast-theme--${z}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":R},{"Toastify__toast--close-on-click":G}),C=jn(v)?v({rtl:R,position:g,type:u,defaultClassName:V}):Bs(V,v),q=!!A||!l,I={closeToast:f,type:u,theme:z};let X=null;return a===!1||(X=jn(a)?a(I):j.isValidElement(a)?j.cloneElement(a,I):i2(I)),Z.createElement(x,{isIn:D,done:Y,position:g,preventExitTransition:n,nodeRef:r},Z.createElement("div",{id:T,onClick:d,className:C,...s,style:b,ref:r},Z.createElement("div",{...D&&{role:O},className:jn(w)?w({type:u}):Bs("Toastify__toast-body",w),style:_},ee!=null&&Z.createElement("div",{className:Bs("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!U})},ee),Z.createElement("div",null,o)),X,Z.createElement(tD,{...P&&!q?{key:`pb-${P}`}:{},rtl:R,theme:z,delay:l,isRunning:e,isIn:D,closeToast:f,hide:p,type:u,style:S,className:N,controlledProgress:q,progress:A||0})))},Jh=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},rD=Xh(Jh("bounce",!0));Xh(Jh("slide",!0));Xh(Jh("zoom"));Xh(Jh("flip"));const ag=j.forwardRef((t,e)=>{const{getToastToRender:n,containerRef:r,isToastActive:s}=JP(t),{className:a,style:o,rtl:l,containerId:d}=t;function u(p){const f=Bs("Toastify__toast-container",`Toastify__toast-container--${p}`,{"Toastify__toast-container--rtl":l});return jn(a)?a({position:p,rtl:l,defaultClassName:f}):Bs(f,_u(a))}return j.useEffect(()=>{e&&(e.current=r.current)},[]),Z.createElement("div",{ref:r,className:"Toastify",id:d},n((p,f)=>{const x=f.length?{...o}:{...o,pointerEvents:"none"};return Z.createElement("div",{className:u(p),style:x,key:`container-${p}`},f.map((g,v)=>{let{content:b,props:w}=g;return Z.createElement(nD,{...w,isIn:s(w.toastId),style:{...w.style,"--nth":v+1,"--len":f.length},key:`toast-${w.key}`},b)}))}))});ag.displayName="ToastContainer",ag.defaultProps={position:"top-right",transition:rD,autoClose:5e3,closeButton:i2,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let kf,Pi=new Map,Cl=[],sD=1;function a2(){return""+sD++}function iD(t){return t&&(ra(t.toastId)||Wl(t.toastId))?t.toastId:a2()}function Yl(t,e){return Pi.size>0?Vn.emit(0,t,e):Cl.push({content:t,options:e}),e.toastId}function rh(t,e){return{...e,type:e&&e.type||t,toastId:iD(e)}}function Rd(t){return(e,n)=>Yl(e,rh(t,n))}function $(t,e){return Yl(t,rh("default",e))}$.loading=(t,e)=>Yl(t,rh("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),$.promise=function(t,e,n){let r,{pending:s,error:a,success:o}=e;s&&(r=ra(s)?$.loading(s,n):$.loading(s.render,{...n,...s}));const l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},d=(p,f,x)=>{if(f==null)return void $.dismiss(r);const g={type:p,...l,...n,data:x},v=ra(f)?{render:f}:f;return r?$.update(r,{...g,...v}):$(v.render,{...g,...v}),x},u=jn(t)?t():t;return u.then(p=>d("success",o,p)).catch(p=>d("error",a,p)),u},$.success=Rd("success"),$.info=Rd("info"),$.error=Rd("error"),$.warning=Rd("warning"),$.warn=$.warning,$.dark=(t,e)=>Yl(t,rh("default",{theme:"dark",...e})),$.dismiss=t=>{Pi.size>0?Vn.emit(1,t):Cl=Cl.filter(e=>t!=null&&e.options.toastId!==t)},$.clearWaitingQueue=function(t){return t===void 0&&(t={}),Vn.emit(5,t)},$.isActive=t=>{let e=!1;return Pi.forEach(n=>{n.isToastActive&&n.isToastActive(t)&&(e=!0)}),e},$.update=function(t,e){e===void 0&&(e={}),setTimeout(()=>{const n=function(r,s){let{containerId:a}=s;const o=Pi.get(a||kf);return o&&o.getToast(r)}(t,e);if(n){const{props:r,content:s}=n,a={delay:100,...r,...e,toastId:e.toastId||t,updateId:a2()};a.toastId!==t&&(a.staleId=t);const o=a.render||s;delete a.render,Yl(o,a)}},0)},$.done=t=>{$.update(t,{progress:1})},$.onChange=t=>(Vn.on(4,t),()=>{Vn.off(4,t)}),$.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},$.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},Vn.on(2,t=>{kf=t.containerId||t,Pi.set(kf,t),Cl.forEach(e=>{Vn.emit(0,e.content,e.options)}),Cl=[]}).on(3,t=>{Pi.delete(t.containerId||t),Pi.size===0&&Vn.off(0).off(1).off(5)});const o2=j.createContext(null),aD=({children:t})=>{const[e,n]=j.useState(null),[r,s]=j.useState(!0);j.useEffect(()=>{(async()=>{try{s(!0);const u=localStorage.getItem("userData");if(u)try{const p=JSON.parse(u);n(p)}catch{localStorage.removeItem("userData")}}catch(u){console.error("Error checking user:",u)}finally{s(!1)}})()},[]);const a=async(d,u)=>{try{if(s(!0),d==="admin@example.com"||d==="admin"){const p={id:"00000000-0000-0000-0000-000000000001",name:"مدير النظام",email:"admin@example.com",role:"admin"};return n(p),localStorage.setItem("userData",JSON.stringify(p)),localStorage.getItem("rememberMe")==="true"&&localStorage.setItem("rememberedEmail",d),$.success("تم تسجيل الدخول بنجاح"),p}else throw new Error("بيانات الدخول غير صحيحة")}catch(p){throw console.error("Login error:",p),$.error(p.message||"فشل تسجيل الدخول"),p}finally{s(!1)}},o=async()=>{try{s(!0),n(null),localStorage.removeItem("userData"),$.info("تم تسجيل الخروج بنجاح")}catch(d){console.error("Logout error:",d),$.error("فشل تسجيل الخروج")}finally{s(!1)}},l=()=>{if(e)return!0;const d=localStorage.getItem("userData");if(d)try{const u=JSON.parse(d);return e||n(u),!0}catch{return localStorage.removeItem("userData"),!1}return!1};return i.jsx(o2.Provider,{value:{user:e,login:a,logout:o,loading:r,isAuthenticated:l},children:t})},Ro=()=>{const t=j.useContext(o2);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},l2=j.createContext(null),tb={store:{name:"متجر خدماتكم",description:"نظام متكامل لإدارة المتجر",email:"info@example.com",phone:"0599123456",address:"غزة، فلسطين",logo:"/logo.svg",currency:"ILS",language:"ar"},social:{facebook:"",twitter:"",instagram:"",whatsapp:""},notifications:{email:!0,sms:!1,push:!0},login:{logo:"/logo.svg",background:"/login-bg.jpg"}},oD=({children:t})=>{const[e,n]=j.useState(tb),[r,s]=j.useState(!0);j.useEffect(()=>{const l=localStorage.getItem("appSettings");if(l)try{n(JSON.parse(l))}catch(d){console.error("Error parsing saved settings:",d),n(tb)}s(!1)},[]);const a=async l=>{try{return s(!0),localStorage.setItem("appSettings",JSON.stringify(l)),n(l),$.success("تم حفظ الإعدادات بنجاح"),!0}catch(d){return console.error("Error saving settings:",d),$.error("فشل في حفظ الإعدادات"),!1}finally{s(!1)}},o=async l=>{try{const d={...e,store:{...e.store,name:l}};return await a(d)}catch(d){return console.error("Error updating store name:",d),!1}};return i.jsx(l2.Provider,{value:{settings:e,loading:r,saveSettings:a,updateStoreName:o},children:t})},ep=()=>{const t=j.useContext(l2);if(!t)throw new Error("useSettings must be used within a SettingsProvider");return t};function lD({children:t,allowedRoles:e=[]}){const{isAuthenticated:n,user:r,loading:s}=Ro();return s?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n()?e.length>0&&r&&!e.includes(r.role)?r.role==="admin"?i.jsx(io,{to:"/admin-dashboard"}):i.jsx(io,{to:"/login",replace:!0,state:{from:window.location.pathname}}):t:i.jsx(io,{to:"/login",replace:!0,state:{from:window.location.pathname}})}function cD(){var P,O,A;const[t,e]=j.useState(""),[n,r]=j.useState(""),[s,a]=j.useState(!1),[o,l]=j.useState(""),[d,u]=j.useState(!1),{login:p,isAuthenticated:f,user:x}=Ro(),{settings:g}=ep(),v=da(),w=((P=pi().state)==null?void 0:P.from)||"/admin-dashboard";if(j.useEffect(()=>{const R=localStorage.getItem("rememberedEmail"),T=localStorage.getItem("rememberMe")==="true";R&&T&&(e(R),u(!0))},[]),j.useEffect(()=>{document.title=`تسجيل الدخول - ${g.store.name}`},[g.store.name]),f())return x&&x.role==="admin"?i.jsx(io,{to:w}):i.jsx(io,{to:w});const _=async R=>{R.preventDefault(),l(""),a(!0);try{localStorage.setItem("rememberMe",d?"true":"false"),(await p(t,n)).role,v(w)}catch(T){console.error("Error logging in:",T),l(T.message||"فشل في تسجيل الدخول")}finally{a(!1)}},N=((O=g.login)==null?void 0:O.background)||"/login-bg.jpg",S=((A=g.login)==null?void 0:A.logo)||"/logo.svg";return i.jsxs("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundImage:`url(${N})`,backgroundSize:"cover",backgroundPosition:"center",position:"relative"},children:[i.jsx("div",{className:"absolute inset-0 z-0",style:{background:"radial-gradient(circle at top right, rgba(250, 204, 21, 0.1) 0%, rgba(15, 23, 42, 0.9) 70%)",boxShadow:"inset 0 0 100px rgba(250, 204, 21, 0.2)"}}),i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-yellow-400 rounded-full filter blur-3xl opacity-10 -mr-32 -mt-32"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-yellow-400 rounded-full filter blur-3xl opacity-10 -ml-32 -mb-32"}),i.jsxs("div",{className:"relative z-10 bg-white bg-opacity-95 backdrop-blur-sm p-8 rounded-lg shadow-2xl w-full max-w-md border border-gray-200",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx("img",{src:S,alt:"Logo",className:"h-20 w-20 rounded-lg shadow-lg",onError:R=>{R.target.onerror=null,R.target.src="/logo.svg"}})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"تسجيل الدخول"}),i.jsxs("p",{className:"text-gray-600 mt-2",children:["مرحباً بك في نظام ",g.store.name]})]}),o&&i.jsx("div",{className:"bg-red-50 text-red-800 p-4 rounded-lg mb-6 border-r-4 border-red-500",children:o}),i.jsxs("form",{onSubmit:_,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم المستخدم"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{id:"email",type:"text",value:t,onChange:R=>e(R.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-yellow-500 focus:border-yellow-500 shadow-sm",placeholder:"أدخل اسم المستخدم",required:!0}),i.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:i.jsxs("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[i.jsx("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),i.jsx("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]})})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"كلمة المرور"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{id:"password",type:"password",value:n,onChange:R=>r(R.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-yellow-500 focus:border-yellow-500 shadow-sm",placeholder:"أدخل كلمة المرور",required:!0}),i.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:i.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{id:"remember-me",type:"checkbox",checked:d,onChange:R=>u(R.target.checked),className:"h-4 w-4 text-yellow-600 focus:ring-yellow-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"remember-me",className:"mr-2 block text-sm text-gray-700",children:"تذكرني"})]}),i.jsx("div",{className:"text-sm",children:i.jsx("a",{href:"#",className:"text-yellow-600 hover:text-yellow-500 font-medium",children:"نسيت كلمة المرور؟"})})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:s,className:`w-full bg-gradient-to-r from-yellow-500 to-yellow-600 text-slate-900 py-2 rounded-md hover:from-yellow-600 hover:to-yellow-700 transition-colors shadow-md font-bold ${s?"opacity-50 cursor-not-allowed":""}`,children:s?"جاري تسجيل الدخول...":"تسجيل الدخول"})})]})]})]})}function dD({title:t,titleId:e,...n},r){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const uD=j.forwardRef(dD);function hD({title:t,titleId:e,...n},r){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"}))}const pD=j.forwardRef(hD);function fD({title:t,titleId:e,...n},r){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const mD=j.forwardRef(fD);function gD({title:t,titleId:e,...n},r){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 21v-7.5a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 .75.75V21m-4.5 0H2.36m11.14 0H18m0 0h3.64m-1.39 0V9.349M3.75 21V9.349m0 0a3.001 3.001 0 0 0 3.75-.615A2.993 2.993 0 0 0 9.75 9.75c.896 0 1.7-.393 2.25-1.016a2.993 2.993 0 0 0 2.25 1.016c.896 0 1.7-.393 2.25-1.015a3.001 3.001 0 0 0 3.75.614m-16.5 0a3.004 3.004 0 0 1-.621-4.72l1.189-1.19A1.5 1.5 0 0 1 5.378 3h13.243a1.5 1.5 0 0 1 1.06.44l1.19 1.189a3 3 0 0 1-.621 4.72M6.75 18h3.75a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75H6.75a.75.75 0 0 0-.75.75v3.75c0 .414.336.75.75.75Z"}))}const xD=j.forwardRef(gD);function vD({title:t,titleId:e,...n},r){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const yD=j.forwardRef(vD);function bD({title:t,titleId:e,...n},r){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const _D=j.forwardRef(bD);function wD({title:t,titleId:e,...n},r){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const jD=j.forwardRef(wD);function ND({title:t,titleId:e,...n},r){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}const kD=j.forwardRef(ND);function SD({title:t,titleId:e,...n},r){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 11.25v8.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5v-8.25M12 4.875A2.625 2.625 0 1 0 9.375 7.5H12m0-2.625V7.5m0-2.625A2.625 2.625 0 1 1 14.625 7.5H12m0 0V21m-8.625-9.75h18c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125h-18c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}))}const CD=j.forwardRef(SD);function ED({title:t,titleId:e,...n},r){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const TD=j.forwardRef(ED);function PD({title:t,titleId:e,...n},r){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 1 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 0 1-1.44-4.282m3.102.069a18.03 18.03 0 0 1-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 0 1 8.835 2.535M10.34 6.66a23.847 23.847 0 0 0 8.835-2.535m0 0A23.74 23.74 0 0 0 18.795 3m.38 1.125a23.91 23.91 0 0 1 1.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 0 0 1.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 0 1 0 3.46"}))}const DD=j.forwardRef(PD);function MD({title:t,titleId:e,...n},r){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const OD=j.forwardRef(MD);function LD({title:t,titleId:e,...n},r){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v17.25m0 0c-1.472 0-2.882.265-4.185.75M12 20.25c1.472 0 2.882.265 4.185.75M18.75 4.97A48.416 48.416 0 0 0 12 4.5c-2.291 0-4.545.16-6.75.47m13.5 0c1.01.143 2.01.317 3 .52m-3-.52 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.988 5.988 0 0 1-2.031.352 5.988 5.988 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L18.75 4.971Zm-16.5.52c.99-.203 1.99-.377 3-.52m0 0 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.989 5.989 0 0 1-2.031.352 5.989 5.989 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L5.25 4.971Z"}))}const RD=j.forwardRef(LD);function AD({title:t,titleId:e,...n},r){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const ID=j.forwardRef(AD);function FD({title:t,titleId:e,...n},r){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const $D=j.forwardRef(FD);function zD({title:t,titleId:e,...n},r){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const BD=j.forwardRef(zD);function UD({title:t,titleId:e,...n},r){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 0 1 0 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 0 1 0-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375Z"}))}const HD=j.forwardRef(UD);function WD({title:t,titleId:e,...n},r){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}))}const nb=j.forwardRef(WD);function YD({title:t,titleId:e,...n},r){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const VD=j.forwardRef(YD);function qD({title:t,titleId:e,...n},r){return j.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?j.createElement("title",{id:e},t):null,j.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const ZD=j.forwardRef(qD),KD=[{id:"overview",label:"الإحصائيات",icon:yD},{id:"financial-dashboard",label:"لوحة المعلومات المالية",icon:pD},{id:"orders",label:"الطلبات",icon:$D},{id:"products-management",label:"إدارة المنتجات",icon:kD,subItems:[{id:"products",label:"المنتجات"},{id:"products-management",label:"إدارة المنتجات"},{id:"categories",label:"التصنيفات"}]},{id:"vendors-management",label:"إدارة البائعين",icon:xD,subItems:[{id:"vendors",label:"قائمة البائعين"},{id:"vendors-list",label:"عرض البائعين"},{id:"add-vendor",label:"إضافة بائع"},{id:"vendor-categories-table",label:"أقسام المتاجر"}]},{id:"drivers-management",label:"إدارة السائقين",icon:nb,subItems:[{id:"drivers",label:"قائمة السائقين"},{id:"add-driver",label:"إضافة سائق"}]},{id:"shipping-methods",label:"طرق التوصيل",icon:nb},{id:"payments-management",label:"إدارة المدفوعات",icon:jD,subItems:[{id:"payments",label:"طرق الدفع"},{id:"wallet",label:"المحفظة"},{id:"wallet-settings",label:"إعدادات المحفظة"},{id:"wallet-charging",label:"شحن المحافظ"}]},{id:"customers-management",label:"إدارة الزبائن",icon:VD,subItems:[{id:"customers",label:"قائمة الزبائن"},{id:"add-customer",label:"إضافة زبون"}]},{id:"wholesale",label:"عملاء الجملة",icon:RD},{id:"users-management",label:"إدارة المستخدمين",icon:ZD,subItems:[{id:"users",label:"مستخدمي النظام"}]},{id:"media",label:"الوسائط",icon:OD},{id:"api-keys",label:"مفاتيح API",icon:TD},{id:"ratings",label:"التقييمات",icon:BD,subItems:[{id:"vendor-ratings",label:"تقييمات المتاجر"},{id:"driver-ratings",label:"تقييمات السائقين"},{id:"customer-ratings",label:"تقييمات الزبائن"},{id:"ratings-report",label:"تقرير التقييمات الشهري"}]},{id:"advertisements",label:"الإعلانات",icon:DD},{id:"coupons",label:"كوبونات الخصم",icon:HD},{id:"points-rewards",label:"النقاط والمكافآت",icon:CD},{id:"referral",label:"نظام الإحالة",icon:ID},{id:"notifications",label:"الإشعارات",icon:mD},{id:"settings",label:"الإعدادات",icon:_D}];function GD({activeTab:t,onTabChange:e}){const n=da(),{logout:r}=Ro(),[s,a]=j.useState({"products-management":!1,"vendors-management":!1,"drivers-management":!1,"customers-management":!1,"users-management":!1,ratings:!1,"payments-management":!0}),o=u=>{e(u),n(`/admin-dashboard/${u}`)},l=u=>{a(p=>({...p,[u]:!p[u]}))},d=()=>{r(),n("/login")};return i.jsxs("aside",{className:"fixed right-0 top-0 w-64 h-full flex flex-col bg-slate-900 text-white shadow-xl z-50",children:[i.jsx("div",{className:"p-4 border-b border-slate-700/50 bg-gradient-to-r from-slate-900 to-slate-800",children:i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center text-white shadow-lg",children:"🛒"}),i.jsx("h2",{className:"mr-2 text-lg font-bold bg-gradient-to-r from-blue-400 to-blue-600 bg-clip-text text-transparent",children:"لوحة التحكم"})]})}),i.jsx("div",{className:"p-4 border-b border-slate-700/50",children:i.jsxs("div",{className:"flex items-center gap-3 bg-slate-800/50 p-3 rounded-lg",children:[i.jsx("div",{className:"w-10 h-10 bg-slate-700 rounded-full flex items-center justify-center border-2 border-yellow-500",children:"👤"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-yellow-100",children:"مدير النظام"}),i.jsx("p",{className:"text-xs text-slate-400",children:"admin@example.com"})]})]})}),i.jsx("nav",{className:"flex-1 overflow-y-auto p-4 space-y-1.5",children:KD.map(u=>{const p=u.icon,f=t===u.id||u.subItems&&u.subItems.some(g=>t===g.id),x=s[u.id];return i.jsxs("div",{children:[i.jsxs(nh,{to:u.subItems?"#":`/admin-dashboard/${u.id}`,onClick:g=>{g.preventDefault(),u.subItems?l(u.id):o(u.id)},className:`flex items-center w-full px-4 py-3 rounded-lg transition-all duration-200 group ${f?"bg-gradient-to-r from-yellow-600 to-yellow-700 text-white shadow-lg":"text-slate-300 hover:bg-slate-800/70 hover:text-white"}`,children:[i.jsx(p,{className:`w-5 h-5 ml-3 ${f?"text-white":"text-slate-400"} group-hover:scale-110`}),i.jsx("span",{className:"font-medium",children:u.label}),u.subItems&&i.jsx("svg",{className:`w-4 h-4 mr-auto transition-transform ${x?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u.subItems&&x&&i.jsx("div",{className:"mt-1 mr-4 space-y-1",children:u.subItems.map(g=>i.jsx(nh,{to:`/admin-dashboard/${g.id}`,onClick:v=>{v.preventDefault(),o(g.id)},className:`flex items-center w-full px-4 py-2 rounded-lg transition-all duration-200 ${t===g.id?"bg-yellow-600/50 text-white":"text-slate-400 hover:bg-slate-800/30 hover:text-white"}`,children:i.jsx("span",{className:"text-sm",children:g.label})},g.id))})]},u.id)})}),i.jsx("div",{className:"p-4 border-t border-slate-700/50 bg-slate-900/50 backdrop-blur-sm",children:i.jsxs("button",{onClick:d,className:"flex items-center w-full px-4 py-2 text-slate-300 hover:text-white hover:bg-red-500/10 rounded-lg transition-colors group",children:[i.jsx(uD,{className:"w-5 h-5 ml-3 group-hover:text-red-400"}),i.jsx("span",{className:"group-hover:text-red-400",children:"تسجيل الخروج"})]})})]})}function QD(){const{settings:t}=ep(),{user:e,logout:n}=Ro(),r=da(),[s]=j.useState([{id:1,text:"طلب جديد #123",time:"قبل 5 دقائق"},{id:2,text:"اكتمال الطلب #120",time:"قبل 10 دقائق"},{id:3,text:"تقييم جديد من العميل أحمد",time:"قبل 15 دقيقة"}]),[a,o]=j.useState(!1),[l,d]=j.useState(!1),u=()=>{n(),r("/login")};return i.jsx("div",{className:"bg-gradient-to-r from-slate-900 to-slate-800 shadow-sm",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center h-16",children:[i.jsx("div",{className:"flex-1 max-w-lg",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:i.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),i.jsx("input",{type:"text",placeholder:"بحث...",className:"block w-full bg-slate-800 text-white rounded-lg border-gray-700 pr-10 focus:border-yellow-500 focus:ring-yellow-500 placeholder-gray-400"})]})}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>o(!a),className:"relative p-2 text-gray-300 hover:text-white rounded-full hover:bg-slate-800",children:[i.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),i.jsx("span",{className:"absolute top-0 right-0 block h-2 w-2 rounded-full bg-yellow-500 ring-2 ring-slate-900"})]}),a&&i.jsxs("div",{className:"absolute left-0 mt-2 w-80 bg-slate-800 rounded-lg shadow-lg py-1 z-50 border border-slate-700",children:[i.jsx("div",{className:"px-4 py-2 border-b border-slate-700",children:i.jsx("h3",{className:"text-sm font-semibold text-white",children:"الإشعارات"})}),i.jsx("div",{className:"max-h-64 overflow-y-auto",children:s.map(p=>i.jsxs("div",{className:"px-4 py-2 hover:bg-slate-700 cursor-pointer",children:[i.jsx("p",{className:"text-sm text-gray-200",children:p.text}),i.jsx("p",{className:"text-xs text-gray-400",children:p.time})]},p.id))}),i.jsx("div",{className:"px-4 py-2 border-t border-slate-700",children:i.jsx("button",{className:"text-sm text-yellow-400 hover:text-yellow-300",children:"عرض كل الإشعارات"})})]})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>d(!l),className:"flex items-center",children:[i.jsx("div",{className:"h-8 w-8 rounded-full border-2 border-yellow-500 overflow-hidden bg-slate-700 flex items-center justify-center",children:i.jsx("span",{className:"text-lg text-slate-300",children:"👤"})}),i.jsx("span",{className:"mr-2 text-sm font-medium text-gray-200",children:(e==null?void 0:e.name)||t.store.name})]}),l&&i.jsxs("div",{className:"absolute left-0 mt-2 w-48 bg-slate-800 rounded-lg shadow-lg py-1 z-50 border border-slate-700",children:[i.jsxs("div",{className:"px-4 py-2 border-b border-slate-700",children:[i.jsx("p",{className:"text-sm font-semibold text-white",children:(e==null?void 0:e.email)||"admin@example.com"}),i.jsx("p",{className:"text-xs text-gray-400",children:(e==null?void 0:e.role)==="admin"?"مدير النظام":"مستخدم"})]}),i.jsx("button",{onClick:()=>r("/admin-dashboard/settings"),className:"block w-full text-right px-4 py-2 text-sm text-gray-200 hover:bg-slate-700",children:"الإعدادات"}),i.jsx("button",{onClick:u,className:"block w-full text-right px-4 py-2 text-sm text-red-400 hover:bg-slate-700",children:"تسجيل الخروج"})]})]})]})]})})})}const XD="modulepreload",JD=function(t){return"/"+t},rb={},sa=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(d=>{if(d=JD(d),d in rb)return;rb[d]=!0;const u=d.endsWith(".css"),p=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":XD,u||(f.as="script"),f.crossOrigin="",f.href=d,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((x,g)=>{f.addEventListener("load",x),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},e5=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>sa(async()=>{const{default:r}=await Promise.resolve().then(()=>Ao);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Gx extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class t5 extends Gx{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class n5 extends Gx{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class r5 extends Gx{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var og;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(og||(og={}));var s5=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?a(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})};class i5{constructor(e,{headers:n={},customFetch:r,region:s=og.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=e5(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return s5(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:o}=n;let l={},{region:d}=n;d||(d=this.region),d&&d!=="any"&&(l["x-region"]=d);let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const p=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:u}).catch(v=>{throw new t5(v)}),f=p.headers.get("x-relay-error");if(f&&f==="true")throw new n5(p);if(!p.ok)throw new r5(p);let x=((r=p.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return x==="application/json"?g=yield p.json():x==="application/octet-stream"?g=yield p.blob():x==="text/event-stream"?g=p:x==="multipart/form-data"?g=yield p.formData():g=yield p.text(),{data:g,error:null}}catch(s){return{data:null,error:s}}})}}var bn={},Qx={},tp={},Wc={},np={},rp={},a5=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},xo=a5();const o5=xo.fetch,c2=xo.fetch.bind(xo),d2=xo.Headers,l5=xo.Request,c5=xo.Response,Ao=Object.freeze(Object.defineProperty({__proto__:null,Headers:d2,Request:l5,Response:c5,default:c2,fetch:o5},Symbol.toStringTag,{value:"Module"})),d5=kC(Ao);var sp={};Object.defineProperty(sp,"__esModule",{value:!0});let u5=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};sp.default=u5;var u2=pn&&pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rp,"__esModule",{value:!0});const h5=u2(d5),p5=u2(sp);let f5=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=h5.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,d;let u=null,p=null,f=null,x=a.status,g=a.statusText;if(a.ok){if(this.method!=="HEAD"){const _=await a.text();_===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?p=_:p=JSON.parse(_))}const b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),w=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&w&&w.length>1&&(f=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(u={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,f=null,x=406,g="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const b=await a.text();try{u=JSON.parse(b),Array.isArray(u)&&a.status===404&&(p=[],u=null,x=200,g="OK")}catch{a.status===404&&b===""?(x=204,g="No Content"):u={message:b}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,x=200,g="OK"),u&&this.shouldThrowOnError)throw new p5.default(u)}return{error:u,data:p,count:f,status:x,statusText:g}});return this.shouldThrowOnError||(s=s.catch(a=>{var o,l,d;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(d=a==null?void 0:a.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};rp.default=f5;var m5=pn&&pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(np,"__esModule",{value:!0});const g5=m5(rp);let x5=class extends g5.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:a=s}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:a=!1,format:o="text"}={}){var l;const d=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${d};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};np.default=x5;var v5=pn&&pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wc,"__esModule",{value:!0});const y5=v5(np);let b5=class extends y5.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Wc.default=b5;var _5=pn&&pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tp,"__esModule",{value:!0});const ul=_5(Wc);let w5=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let a=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new ul.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),r||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const o=e.reduce((l,d)=>l.concat(Object.keys(d)),[]);if(o.length>0){const l=[...new Set(o)].map(d=>`"${d}"`);this.url.searchParams.set("columns",l.join(","))}}return new ul.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const d=e.reduce((u,p)=>u.concat(Object.keys(p)),[]);if(d.length>0){const u=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",u.join(","))}}return new ul.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new ul.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new ul.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};tp.default=w5;var ip={},ap={};Object.defineProperty(ap,"__esModule",{value:!0});ap.version=void 0;ap.version="0.0.0-automated";Object.defineProperty(ip,"__esModule",{value:!0});ip.DEFAULT_HEADERS=void 0;const j5=ap;ip.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${j5.version}`};var h2=pn&&pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qx,"__esModule",{value:!0});const N5=h2(tp),k5=h2(Wc),S5=ip;let C5=class p2{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},S5.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new N5.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new p2(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:a}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let d;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([p,f])=>f!==void 0).map(([p,f])=>[p,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([p,f])=>{l.searchParams.append(p,f)})):(o="POST",d=n);const u=Object.assign({},this.headers);return a&&(u.Prefer=`count=${a}`),new k5.default({method:o,url:l,headers:u,schema:this.schemaName,body:d,fetch:this.fetch,allowEmpty:!1})}};Qx.default=C5;var Io=pn&&pn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bn,"__esModule",{value:!0});bn.PostgrestError=bn.PostgrestBuilder=bn.PostgrestTransformBuilder=bn.PostgrestFilterBuilder=bn.PostgrestQueryBuilder=bn.PostgrestClient=void 0;const f2=Io(Qx);bn.PostgrestClient=f2.default;const m2=Io(tp);bn.PostgrestQueryBuilder=m2.default;const g2=Io(Wc);bn.PostgrestFilterBuilder=g2.default;const x2=Io(np);bn.PostgrestTransformBuilder=x2.default;const v2=Io(rp);bn.PostgrestBuilder=v2.default;const y2=Io(sp);bn.PostgrestError=y2.default;var E5=bn.default={PostgrestClient:f2.default,PostgrestQueryBuilder:m2.default,PostgrestFilterBuilder:g2.default,PostgrestTransformBuilder:x2.default,PostgrestBuilder:v2.default,PostgrestError:y2.default};const{PostgrestClient:T5,PostgrestQueryBuilder:MB,PostgrestFilterBuilder:OB,PostgrestTransformBuilder:LB,PostgrestBuilder:RB,PostgrestError:AB}=E5,P5="2.11.2",D5={"X-Client-Info":`realtime-js/${P5}`},M5="1.0.0",b2=1e4,O5=1e3;var ao;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ao||(ao={}));var Pn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Pn||(Pn={}));var fr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(fr||(fr={}));var lg;(function(t){t.websocket="websocket"})(lg||(lg={}));var Ri;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ri||(Ri={}));class L5{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),a=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+s));o=o+s;const d=r.decode(e.slice(o,o+a));o=o+a;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:d,payload:u}}}class _2{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var rt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(rt||(rt={}));const sb=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((a,o)=>(a[o]=R5(o,t,e,s),a),{})},R5=(t,e,n,r)=>{const s=e.find(l=>l.name===t),a=s==null?void 0:s.type,o=n[t];return a&&!r.includes(a)?w2(a,o):cg(o)},w2=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return $5(e,n)}switch(t){case rt.bool:return A5(e);case rt.float4:case rt.float8:case rt.int2:case rt.int4:case rt.int8:case rt.numeric:case rt.oid:return I5(e);case rt.json:case rt.jsonb:return F5(e);case rt.timestamp:return z5(e);case rt.abstime:case rt.date:case rt.daterange:case rt.int4range:case rt.int8range:case rt.money:case rt.reltime:case rt.text:case rt.time:case rt.timestamptz:case rt.timetz:case rt.tsrange:case rt.tstzrange:return cg(e);default:return cg(e)}},cg=t=>t,A5=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},I5=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},F5=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},$5=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const o=t.slice(1,n);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>w2(e,l))}return t},z5=t=>typeof t=="string"?t.replace(" ","T"):t,j2=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Sf{constructor(e,n,r={},s=b2){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ib;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ib||(ib={}));class Vl{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Vl.syncState(this.state,s,a,o),this.pendingDiffs.forEach(d=>{this.state=Vl.syncDiff(this.state,d,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Vl.syncDiff(this.state,s,a,o),l())}),this.onJoin((s,a,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:o})}),this.onLeave((s,a,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const a=this.cloneDeep(e),o=this.transformState(n),l={},d={};return this.map(a,(u,p)=>{o[u]||(d[u]=p)}),this.map(o,(u,p)=>{const f=a[u];if(f){const x=p.map(w=>w.presence_ref),g=f.map(w=>w.presence_ref),v=p.filter(w=>g.indexOf(w.presence_ref)<0),b=f.filter(w=>x.indexOf(w.presence_ref)<0);v.length>0&&(l[u]=v),b.length>0&&(d[u]=b)}else l[u]=p}),this.syncDiff(a,{joins:l,leaves:d},r,s)}static syncDiff(e,n,r,s){const{joins:a,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(l,d)=>{var u;const p=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(d),p.length>0){const f=e[l].map(g=>g.presence_ref),x=p.filter(g=>f.indexOf(g.presence_ref)<0);e[l].unshift(...x)}r(l,p,d)}),this.map(o,(l,d)=>{let u=e[l];if(!u)return;const p=d.map(f=>f.presence_ref);u=u.filter(f=>p.indexOf(f.presence_ref)<0),e[l]=u,s(l,u,d),u.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ab;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ab||(ab={}));var ob;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ob||(ob={}));var ss;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ss||(ss={}));class Xx{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Pn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Sf(this,fr.join,this.params,this.timeout),this.rejoinTimer=new _2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Pn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fr.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Vl(this),this.broadcastEndpointURL=j2(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:o,private:l}}=this.params;this._onError(p=>e==null?void 0:e(ss.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(ss.CLOSED));const d={},u={broadcast:a,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var f;if(this.socket.setAuth(),p===void 0){e==null||e(ss.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,g=(f=x==null?void 0:x.length)!==null&&f!==void 0?f:0,v=[];for(let b=0;b<g;b++){const w=x[b],{filter:{event:_,schema:N,table:S,filter:P}}=w,O=p&&p[b];if(O&&O.event===_&&O.schema===N&&O.table===S&&O.filter===P)v.push(Object.assign(Object.assign({},w),{id:O.id}));else{this.unsubscribe(),e==null||e(ss.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(ss.SUBSCRIBED);return}}).receive("error",p=>{e==null||e(ss.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ss.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,d;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Pn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new Sf(this,fr.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Sf(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,a;const o=e.toLocaleLowerCase(),{close:l,error:d,leave:u,join:p}=fr;if(r&&[l,d,u,p].indexOf(o)>=0&&r!==this._joinRef())return;let x=this._onMessage(o,n,r);if(n&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var v,b,w;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(b=g.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(g=>g.callback(x,r)):(a=this.bindings[o])===null||a===void 0||a.filter(g=>{var v,b,w,_,N,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const P=g.id,O=(v=g.filter)===null||v===void 0?void 0:v.event;return P&&((b=n.ids)===null||b===void 0?void 0:b.includes(P))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((w=n.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const P=(N=(_=g==null?void 0:g.filter)===null||_===void 0?void 0:_.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return P==="*"||P===((S=n==null?void 0:n.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof x=="object"&&"ids"in x){const v=x.data,{schema:b,table:w,commit_timestamp:_,type:N,errors:S}=v;x=Object.assign(Object.assign({},{schema:b,table:w,commit_timestamp:_,eventType:N,new:{},old:{},errors:S}),this._getPayloadRecords(v))}g.callback(x,r)})}_isClosed(){return this.state===Pn.closed}_isJoined(){return this.state===Pn.joined}_isJoining(){return this.state===Pn.joining}_isLeaving(){return this.state===Pn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),a={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&Xx.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(fr.close,{},e)}_onError(e){this._on(fr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=sb(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=sb(e.columns,e.old_record)),n}}const B5=()=>{},U5=typeof WebSocket<"u",H5=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class W5{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=D5,this.params={},this.timeout=b2,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=B5,this.conn=null,this.sendBuffer=[],this.serializer=new L5,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...l)=>sa(async()=>{const{default:d}=await Promise.resolve().then(()=>Ao);return{default:d}},void 0).then(({default:d})=>d(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${lg.websocket}`,this.httpEndpoint=j2(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(a,o)=>o(JSON.stringify(a)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new _2(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(U5){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Y5(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),sa(async()=>{const{default:e}=await import("./browser-CdytwksV.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:M5}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ao.connecting:return Ri.Connecting;case ao.open:return Ri.Open;case ao.closing:return Ri.Closing;default:return Ri.Closed}}isConnected(){return this.connectionState()===Ri.Open}channel(e,n={config:{}}){const r=new Xx(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:s,ref:a}=e,o=()=>{this.encode(e,l=>{var d;(d=this.conn)===null||d===void 0||d.send(l)})};this.log("push",`${n} ${r} (${a})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(s=>{n&&s.updateJoinPayload({access_token:n}),s.joinedOnce&&s._isJoined()&&s._push(fr.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(O5,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:a,ref:o}=n;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,a),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(s,a,o)),this.stateChangeCallbacks.message.forEach(l=>l(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(fr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([H5],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class Y5{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=ao.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Jx extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function At(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class V5 extends Jx{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class dg extends Jx{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var q5=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?a(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})};const N2=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>sa(async()=>{const{default:r}=await Promise.resolve().then(()=>Ao);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Z5=()=>q5(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield sa(()=>Promise.resolve().then(()=>Ao),void 0)).Response:Response}),ug=t=>{if(Array.isArray(t))return t.map(n=>ug(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=ug(r)}),e};var ua=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?a(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})};const Cf=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),K5=(t,e,n)=>ua(void 0,void 0,void 0,function*(){const r=yield Z5();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new V5(Cf(s),t.status||500))}).catch(s=>{e(new dg(Cf(s),s))}):e(new dg(Cf(t),t))}),G5=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function Yc(t,e,n,r,s,a){return ua(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(n,G5(e,r,s,a)).then(d=>{if(!d.ok)throw d;return r!=null&&r.noResolveJson?d:d.json()}).then(d=>o(d)).catch(d=>K5(d,l,r))})})}function sh(t,e,n,r){return ua(this,void 0,void 0,function*(){return Yc(t,"GET",e,n,r)})}function Ms(t,e,n,r,s){return ua(this,void 0,void 0,function*(){return Yc(t,"POST",e,r,s,n)})}function Q5(t,e,n,r,s){return ua(this,void 0,void 0,function*(){return Yc(t,"PUT",e,r,s,n)})}function X5(t,e,n,r){return ua(this,void 0,void 0,function*(){return Yc(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function k2(t,e,n,r,s){return ua(this,void 0,void 0,function*(){return Yc(t,"DELETE",e,r,s,n)})}var xn=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?a(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})};const J5={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},lb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class e4{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=N2(s)}uploadOrUpdate(e,n,r,s){return xn(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},lb),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const d=o.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),d&&a.append("metadata",this.encodeMetadata(d)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",o.cacheControl),d&&a.append("metadata",this.encodeMetadata(d))):(a=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,d&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),p=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:e,body:a,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),x=yield f.json();return f.ok?{data:{path:u,id:x.Id,fullPath:x.Key},error:null}:{data:null,error:x}}catch(a){if(At(a))return{data:null,error:a};throw a}})}upload(e,n,r){return xn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return xn(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let d;const u=Object.assign({upsert:lb.upsert},s),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",u.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",u.cacheControl)):(d=r,p["cache-control"]=`max-age=${u.cacheControl}`,p["content-type"]=u.contentType);const f=yield this.fetch(l.toString(),{method:"PUT",body:d,headers:p}),x=yield f.json();return f.ok?{data:{path:a,fullPath:x.Key},error:null}:{data:null,error:x}}catch(d){if(At(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,n){return xn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const a=yield Ms(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new Jx("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(At(r))return{data:null,error:r};throw r}})}update(e,n,r){return xn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return xn(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(At(s))return{data:null,error:s};throw s}})}copy(e,n,r){return xn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ms(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(At(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return xn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield Ms(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(s){if(At(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return xn(this,void 0,void 0,function*(){try{const s=yield Ms(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(s){if(At(s))return{data:null,error:s};throw s}})}download(e,n){return xn(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield sh(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(At(l))return{data:null,error:l};throw l}})}info(e){return xn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield sh(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:ug(r),error:null}}catch(r){if(At(r))return{data:null,error:r};throw r}})}exists(e){return xn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield X5(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(At(r)&&r instanceof dg){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&s.push(a);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});d!==""&&s.push(d);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(e){return xn(this,void 0,void 0,function*(){try{return{data:yield k2(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(At(n))return{data:null,error:n};throw n}})}list(e,n,r){return xn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},J5),n),{prefix:e||""});return{data:yield Ms(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(At(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const t4="2.7.1",n4={"X-Client-Info":`storage-js/${t4}`};var Pa=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?a(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})};class r4{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},n4),n),this.fetch=N2(r)}listBuckets(){return Pa(this,void 0,void 0,function*(){try{return{data:yield sh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(At(e))return{data:null,error:e};throw e}})}getBucket(e){return Pa(this,void 0,void 0,function*(){try{return{data:yield sh(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(At(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Pa(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(At(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Pa(this,void 0,void 0,function*(){try{return{data:yield Q5(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(At(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Pa(this,void 0,void 0,function*(){try{return{data:yield Ms(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(At(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Pa(this,void 0,void 0,function*(){try{return{data:yield k2(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(At(n))return{data:null,error:n};throw n}})}}class s4 extends r4{constructor(e,n={},r){super(e,n,r)}from(e){return new e4(this.url,this.headers,e,this.fetch)}}const i4="2.49.4";let El="";typeof Deno<"u"?El="deno":typeof document<"u"?El="web":typeof navigator<"u"&&navigator.product==="ReactNative"?El="react-native":El="node";const a4={"X-Client-Info":`supabase-js-${El}/${i4}`},o4={headers:a4},l4={schema:"public"},c4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},d4={};var u4=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?a(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})};const h4=t=>{let e;return t?e=t:typeof fetch>"u"?e=c2:e=fetch,(...n)=>e(...n)},p4=()=>typeof Headers>"u"?d2:Headers,f4=(t,e,n)=>{const r=h4(n),s=p4();return(a,o)=>u4(void 0,void 0,void 0,function*(){var l;const d=(l=yield e())!==null&&l!==void 0?l:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${d}`),r(a,Object.assign(Object.assign({},o),{headers:u}))})};var m4=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?a(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})};function g4(t){return t.replace(/\/$/,"")}function x4(t,e){const{db:n,auth:r,realtime:s,global:a}=t,{db:o,auth:l,realtime:d,global:u}=e,p={db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},d),s),global:Object.assign(Object.assign({},u),a),accessToken:()=>m4(this,void 0,void 0,function*(){return""})};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}const S2="2.69.1",Aa=30*1e3,hg=3,Ef=hg*Aa,v4="http://localhost:9999",y4="supabase.auth.token",b4={"X-Client-Info":`gotrue-js/${S2}`},pg="X-Supabase-Api-Version",C2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},_4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,w4=6e5;class ev extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Te(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class j4 extends ev{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function N4(t){return Te(t)&&t.name==="AuthApiError"}class E2 extends ev{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class fi extends ev{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Cs extends fi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function k4(t){return Te(t)&&t.name==="AuthSessionMissingError"}class Tf extends fi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ad extends fi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Id extends fi{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function S4(t){return Te(t)&&t.name==="AuthImplicitGrantRedirectError"}class cb extends fi{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class fg extends fi{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Pf(t){return Te(t)&&t.name==="AuthRetryableFetchError"}class db extends fi{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class ql extends fi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ub="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),hb=` 	
\r=`.split(""),C4=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<hb.length;e+=1)t[hb[e].charCodeAt(0)]=-2;for(let e=0;e<ub.length;e+=1)t[ub[e].charCodeAt(0)]=e;return t})();function T2(t,e,n){const r=C4[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function pb(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=o=>{P4(o,r,n)};for(let o=0;o<t.length;o+=1)T2(t.charCodeAt(o),s,a);return e.join("")}function E4(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function T4(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}E4(r,e)}}function P4(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function D4(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)T2(t.charCodeAt(s),n,r);return new Uint8Array(e)}function M4(t){const e=[];return T4(t,n=>e.push(n)),new Uint8Array(e)}function O4(t){return Math.round(Date.now()/1e3)+t}function L4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Dr=()=>typeof window<"u"&&typeof document<"u",Ni={tested:!1,writable:!1},Zl=()=>{if(!Dr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ni.tested)return Ni.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ni.tested=!0,Ni.writable=!0}catch{Ni.tested=!0,Ni.writable=!1}return Ni.writable};function R4(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const P2=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>sa(async()=>{const{default:r}=await Promise.resolve().then(()=>Ao);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},A4=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",D2=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Fd=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},$d=async(t,e)=>{await t.removeItem(e)};class op{constructor(){this.promise=new op.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}op.promiseConstructor=Promise;function Df(t){const e=t.split(".");if(e.length!==3)throw new ql("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!_4.test(e[r]))throw new ql("JWT not in base64url format");return{header:JSON.parse(pb(e[0])),payload:JSON.parse(pb(e[1])),signature:D4(e[2]),raw:{header:e[0],payload:e[1]}}}async function I4(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function F4(t,e){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){r(o);return}}catch(o){if(!e(a,o)){s(o);return}}})()})}function $4(t){return("0"+t.toString(16)).substr(-2)}function z4(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,$4).join("")}async function B4(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function U4(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await B4(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Da(t,e,n=!1){const r=z4();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await D2(t,`${e}-code-verifier`,s);const a=await U4(r);return[a,r===a?"plain":"s256"]}const H4=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function W4(t){const e=t.headers.get(pg);if(!e||!e.match(H4))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Y4(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function V4(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var q4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Di=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Z4=[502,503,504];async function fb(t){var e;if(!A4(t))throw new fg(Di(t),0);if(Z4.includes(t.status))throw new fg(Di(t),t.status);let n;try{n=await t.json()}catch(a){throw new E2(Di(a),a)}let r;const s=W4(t);if(s&&s.getTime()>=C2["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new db(Di(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Cs}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new db(Di(n),t.status,n.weak_password.reasons);throw new j4(Di(n),t.status||500,r)}const K4=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ie(t,e,n,r){var s;const a=Object.assign({},r==null?void 0:r.headers);a[pg]||(a[pg]=C2["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",d=await G4(t,e,n+l,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(d):{data:Object.assign({},d),error:null}}async function G4(t,e,n,r,s,a){const o=K4(e,r,s,a);let l;try{l=await t(n,Object.assign({},o))}catch(d){throw console.error(d),new fg(Di(d),0)}if(l.ok||await fb(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(d){await fb(d)}}function Es(t){var e;let n=null;e3(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=O4(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function mb(t){const e=Es(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function As(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Q4(t){return{data:t,error:null}}function X4(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=t,o=q4(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},d=Object.assign({},o);return{data:{properties:l,user:d},error:null}}function J4(t){return t}function e3(t){return t.access_token&&t.refresh_token&&t.expires_in}var t3=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class n3{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=P2(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await Ie(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ie(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:As})}catch(r){if(Te(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=t3(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ie(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:X4,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Te(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ie(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:As})}catch(n){if(Te(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,a,o,l,d;try{const u={nextPage:null,lastPage:0,total:0},p=await Ie(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:J4});if(p.error)throw p.error;const f=await p.json(),x=(o=p.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(d=(l=p.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return g.length>0&&(g.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=b}),u.total=parseInt(x)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Te(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await Ie(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:As})}catch(n){if(Te(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await Ie(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:As})}catch(r){if(Te(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await Ie(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:As})}catch(r){if(Te(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await Ie(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Te(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await Ie(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Te(n))return{data:null,error:n};throw n}}}const r3={getItem:t=>Zl()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Zl()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Zl()&&globalThis.localStorage.removeItem(t)}};function gb(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function s3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ma={debug:!!(globalThis&&Zl()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class M2 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class i3 extends M2{}async function a3(t,e,n){Ma.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ma.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Ma.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Ma.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Ma.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new i3(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ma.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}s3();const o3={url:v4,storageKey:y4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:b4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function xb(t,e,n){return await n()}class Nc{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Nc.nextInstanceID,Nc.nextInstanceID+=1,this.instanceID>0&&Dr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},o3),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new n3({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=P2(s.fetch),this.lock=s.lock||xb,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Dr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=a3:this.lock=xb,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Zl()?this.storage=r3:(this.memoryStorage={},this.storage=gb(this.memoryStorage)):(this.memoryStorage={},this.storage=gb(this.memoryStorage)),Dr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${S2}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=R4(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Dr()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),S4(a)){const d=(e=a.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Te(n)?{error:n}:{error:new E2("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const a=await Ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Es}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const d=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:u,session:d},error:null}}catch(a){if(Te(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,r,s;try{let a;if("email"in e){const{email:p,password:f,options:x}=e;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await Da(this.storage,this.storageKey)),a=await Ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:p,password:f,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:g,code_challenge_method:v},xform:Es})}else if("phone"in e){const{phone:p,password:f,options:x}=e;a=await Ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:f,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},channel:(s=x==null?void 0:x.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:Es})}else throw new Ad("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const d=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:u,session:d},error:null}}catch(a){if(Te(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:o,options:l}=e;n=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:mb})}else if("phone"in e){const{phone:a,password:o,options:l}=e;n=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:mb})}else throw new Ad("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Tf}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Te(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await Fd(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:a,error:o}=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Es});if(await $d(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Tf}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:o})}catch(a){if(Te(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:a,nonce:o}=e,l=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Es}),{data:d,error:u}=l;return u?{data:{user:null,session:null},error:u}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Tf}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:u})}catch(n){if(Te(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,a,o;try{if("email"in e){const{email:l,options:d}=e;let u=null,p=null;this.flowType==="pkce"&&([u,p]=await Da(this.storage,this.storageKey));const{error:f}=await Ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:u,code_challenge_method:p},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:d}=e,{data:u,error:p}=await Ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(a=d==null?void 0:d.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(o=d==null?void 0:d.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:p}}throw new Ad("You must provide either an email or phone number.")}catch(l){if(Te(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let s,a;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await Ie(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Es});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const d=o.session,u=o.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:u,session:d},error:null}}catch(s){if(Te(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await Da(this.storage,this.storageKey)),await Ie(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:Q4})}catch(a){if(Te(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Cs;const{error:s}=await Ie(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Te(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:a}=e,{error:o}=await Ie(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:a}=e,{data:o,error:l}=await Ie(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Ad("You must provide either an email or phone number and a type")}catch(n){if(Te(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Fd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Ef:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,u,p)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,u,p))})}return{data:{session:e},error:null}}const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:As}):await this._useSession(async n=>{var r,s,a;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Cs}:await Ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:As})})}catch(n){if(Te(n))return k4(n)&&(await this._removeSession(),await $d(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new Cs;const o=s.session;let l=null,d=null;this.flowType==="pkce"&&e.email!=null&&([l,d]=await Da(this.storage,this.storageKey));const{data:u,error:p}=await Ie(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:d}),jwt:o.access_token,xform:As});if(p)throw p;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Te(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Cs;const n=Date.now()/1e3;let r=n,s=!0,a=null;const{payload:o}=Df(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:l,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:d}=await this._getUser(e.access_token);if(d)throw d;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(Te(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:l}=n;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Cs;const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Te(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Dr())throw new Id("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Id(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new cb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Id("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new cb("No code detected.");const{data:N,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:o,expires_in:l,expires_at:d,token_type:u}=e;if(!a||!l||!o||!u)throw new Id("No session defined in URL");const p=Math.round(Date.now()/1e3),f=parseInt(l);let x=p+f;d&&(x=parseInt(d));const g=x-p;g*1e3<=Aa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const v=x-f;p-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,x,p):p-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,x,p);const{data:b,error:w}=await this._getUser(a);if(w)throw w;const _={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:f,expires_at:x,refresh_token:o,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:e.type},error:null}}catch(r){if(Te(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Fd(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{error:a};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(N4(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await $d(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=L4(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:a},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Da(this.storage,this.storageKey,!0));try{return await Ie(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(Te(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Te(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async a=>{var o,l,d,u,p;const{data:f,error:x}=a;if(x)throw x;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Ie(this.fetch,"GET",g,{headers:this.headers,jwt:(p=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&p!==void 0?p:void 0})});if(s)throw s;return Dr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Te(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:o}=n;if(o)throw o;return await Ie(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Te(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await F4(async s=>(s>0&&await I4(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ie(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Es})),(s,a)=>{const o=200*Math.pow(2,s);return a&&Pf(a)&&Date.now()+o-r<Aa})}catch(r){if(this._debug(n,"error",r),Te(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Dr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Fd(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Ef;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Ef}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),Pf(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Cs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new op;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new Cs;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),Te(a)){const o={session:null,error:a};return Pf(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(d){a.push(d)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await D2(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await $d(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Dr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Aa);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Aa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Aa}ms, refresh threshold is ${hg} ticks`),s<=hg&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof M2)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Dr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,o]=await Da(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?{data:null,error:a}:await Ie(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Te(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:d,error:u}=await Ie(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(n){if(Te(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{data:null,error:a};const{data:o,error:l}=await Ie(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(Te(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?{data:null,error:a}:await Ie(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Te(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:a}=e;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Df(s.access_token);let l=null;o.aal&&(l=o.aal);let d=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const p=o.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+w4>Date.now()))return r;const{data:s,error:a}=await Ie(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!s.keys||s.keys.length===0)throw new ql("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new ql("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:g,error:v}=await this.getSession();if(v||!g.session)return{data:null,error:v};r=g.session.access_token}const{header:s,payload:a,signature:o,raw:{header:l,payload:d}}=Df(r);if(Y4(a.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:a,header:s,signature:o},error:null}}const u=V4(s.alg),p=await this.fetchJwk(s.kid,n),f=await crypto.subtle.importKey("jwk",p,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,o,M4(`${l}.${d}`)))throw new ql("Invalid JWT signature");return{data:{claims:a,header:s,signature:o},error:null}}catch(r){if(Te(r))return{data:null,error:r};throw r}}}Nc.nextInstanceID=0;const l3=Nc;class c3 extends l3{constructor(e){super(e)}}var d3=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?a(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})};class u3{constructor(e,n,r){var s,a,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=g4(e);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const d=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:l4,realtime:d4,auth:Object.assign(Object.assign({},c4),{storageKey:d}),global:o4},p=x4(r??{},u);this.storageKey=(s=p.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=p.global.headers)!==null&&a!==void 0?a:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(f,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=p.auth)!==null&&o!==void 0?o:{},this.headers,p.global.fetch),this.fetch=f4(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new T5(`${l}/rest/v1`,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new i5(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new s4(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return d3(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:a,flowType:o,lock:l,debug:d},u,p){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new c3({url:this.authUrl,headers:Object.assign(Object.assign({},f),u),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:l,debug:d,fetch:p,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new W5(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const h3=(t,e,n)=>new u3(t,e,n),p3="https://lrszjkghzvndusfysriq.supabase.co",f3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxyc3pqa2doenZuZHVzZnlzcmlxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU1Mjg4NjEsImV4cCI6MjA2MTEwNDg2MX0.k-veSylkcZ57meRaMry1WtzjytqRTuHvP2B09ZduJiw",te=h3(p3,f3,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storageKey:"supabase.auth.token"}});function Mf(){const[t,e]=j.useState(!0),[n,r]=j.useState(null),[s,a]=j.useState({totalOrders:0,totalRevenue:0,totalCustomers:0,totalVendors:0,totalDrivers:0,totalProducts:0,averageOrderValue:0,completionRate:0}),[o,l]=j.useState([]),[d,u]=j.useState([]);j.useEffect(()=>{p(),f(),x()},[]);const p=async()=>{try{const{data:g,error:v}=await te.from("orders").select("total, status");if(v)throw v;const b=g.length,w=g.reduce((ee,G)=>ee+(parseFloat(G.total)||0),0),_=g.filter(ee=>ee.status==="completed").length,N=b>0?_/b*100:0,S=b>0?w/b:0,{count:P,error:O}=await te.from("customers").select("id",{count:"exact"});if(O)throw O;const{count:A,error:R}=await te.from("vendors").select("id",{count:"exact"});if(R)throw R;const{count:T,error:Y}=await te.from("drivers").select("id",{count:"exact"});if(Y)throw Y;const{count:D,error:U}=await te.from("products").select("id",{count:"exact"});if(U)throw U;a({totalOrders:b,totalRevenue:w,totalCustomers:P,totalVendors:A,totalDrivers:T,totalProducts:D,averageOrderValue:S,completionRate:N})}catch(g){console.error("Error fetching stats:",g),r(g.message),$.error("فشل في تحميل الإحصائيات")}},f=async()=>{try{const{data:g,error:v}=await te.from("orders").select(`
          vendor_id,
          total,
          vendor:vendors(store_name)
        `).not("vendor_id","is",null);if(v)throw v;const b=g.reduce((_,N)=>{var P;const S=N.vendor_id;return _[S]||(_[S]={id:S,store_name:(P=N.vendor)==null?void 0:P.store_name,total_orders:0,total_revenue:0}),_[S].total_orders++,_[S].total_revenue+=parseFloat(N.total)||0,_},{}),w=Object.values(b).sort((_,N)=>N.total_revenue-_.total_revenue).slice(0,5);l(w)}catch(g){console.error("Error fetching vendor orders:",g),$.error("فشل في تحميل بيانات البائعين")}},x=async()=>{try{const{data:g,error:v}=await te.from("orders").select(`
          *,
          customer:customers(name),
          vendor:vendors(store_name),
          driver:drivers(name)
        `).order("created_at",{ascending:!1}).limit(5);if(v)throw v;u(g)}catch(g){console.error("Error fetching recent orders:",g),$.error("فشل في تحميل الطلبات الأخيرة")}finally{e(!1)}};return t?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:n}),i.jsx("button",{onClick:()=>{e(!0),r(null),p(),f(),x()},className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"إجمالي الطلبات"}),i.jsx("p",{className:"text-3xl font-bold text-blue-600",children:s.totalOrders})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"إجمالي الإيرادات"}),i.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["₪",s.totalRevenue.toFixed(2)]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"متوسط قيمة الطلب"}),i.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:["₪",s.averageOrderValue.toFixed(2)]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"معدل إكمال الطلبات"}),i.jsxs("p",{className:"text-3xl font-bold text-orange-600",children:[s.completionRate.toFixed(1),"%"]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"عدد العملاء"}),i.jsx("p",{className:"text-3xl font-bold text-red-600",children:s.totalCustomers})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"عدد البائعين"}),i.jsx("p",{className:"text-3xl font-bold text-indigo-600",children:s.totalVendors})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"عدد السائقين"}),i.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:s.totalDrivers})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"عدد المنتجات"}),i.jsx("p",{className:"text-3xl font-bold text-pink-600",children:s.totalProducts})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"أفضل البائعين"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المتجر"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"عدد الطلبات"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"إجمالي الإيرادات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(g=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.store_name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.total_orders}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",g.total_revenue.toFixed(2)]})]},g.id))})]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"آخر الطلبات"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"رقم الطلب"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العميل"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المتجر"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"السائق"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المبلغ"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التاريخ"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(g=>{var v,b,w;return i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.order_number}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(v=g.customer)==null?void 0:v.name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(b=g.vendor)==null?void 0:b.store_name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:((w=g.driver)==null?void 0:w.name)||"-"}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",parseFloat(g.total).toFixed(2)]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${g.status==="completed"?"bg-green-100 text-green-800":g.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:g.status==="completed"?"مكتمل":g.status==="cancelled"?"ملغي":g.status==="pending"?"معلق":g.status==="processing"?"قيد المعالجة":g.status==="delivering"?"قيد التوصيل":g.status})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(g.created_at).toLocaleDateString("ar-SA")})]},g.id)})})]})})]})]})}const m3=async(t={})=>{try{let e=te.from("products").select(`
        *,
        vendor:vendor_id(store_name),
        category:category_id(name)
      `);t.status&&(e=e.eq("status",t.status)),t.vendorId&&(e=e.eq("vendor_id",t.vendorId)),t.categoryId&&(e=e.eq("category_id",t.categoryId)),t.search&&(e=e.ilike("name",`%${t.search}%`)),e=e.order("created_at",{ascending:!1});const{data:n,error:r}=await e;if(r)throw r;return n||[]}catch(e){throw console.error("Error fetching products:",e),e}};function g3(){const[t,e]=j.useState([]),[n,r]=j.useState(!0),[s,a]=j.useState("grid");j.useEffect(()=>{o()},[]);const o=async()=>{try{r(!0);const f=await m3();e(f)}catch(f){console.error("Error fetching products:",f),$.error("فشل في تحميل المنتجات"),e([{id:1,name:"قهوة تركية",description:"قهوة تركية أصلية مطحونة ناعمة",price:15,image_url:"https://images.unsplash.com/photo-1514432324607-a09d9b4aefdd?q=80&w=200&auto=format&fit=crop",category:{name:"مشروبات ساخنة"},vendor:{store_name:"متجر كوفي"},status:"active",stock:100},{id:2,name:"شاي أخضر",description:"شاي أخضر صيني عالي الجودة",price:12,image_url:"https://images.unsplash.com/photo-1627435601361-ec25f5b1d0e5?q=80&w=200&auto=format&fit=crop",category:{name:"مشروبات ساخنة"},vendor:{store_name:"متجر الشاي"},status:"active",stock:75},{id:3,name:"عصير برتقال",description:"عصير برتقال طازج 100%",price:10,image_url:"https://images.unsplash.com/photo-1600271886742-f049cd451bba?q=80&w=200&auto=format&fit=crop",category:{name:"عصائر"},vendor:{store_name:"متجر العصائر"},status:"active",stock:50},{id:4,name:"كيك شوكولاتة",description:"كيك شوكولاتة بلجيكية فاخرة",price:25,image_url:"https://images.unsplash.com/photo-1606313564200-e75d5e30476c?q=80&w=200&auto=format&fit=crop",category:{name:"حلويات"},vendor:{store_name:"متجر الحلويات"},status:"active",stock:30}])}finally{r(!1)}},l=f=>{switch(f){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"draft":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},d=f=>{switch(f){case"active":return"نشط";case"inactive":return"غير نشط";case"draft":return"مسودة";default:return f}},u=()=>i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map(f=>{var x,g;return i.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[f.image_url&&i.jsx("img",{src:f.image_url,alt:f.name,className:"w-full h-48 object-cover",onError:v=>{v.target.onerror=null,v.target.src="https://via.placeholder.com/300x200?text=No+Image"}}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold",children:f.name}),i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${l(f.status)}`,children:d(f.status)})]}),i.jsx("p",{className:"text-gray-600 text-sm mb-2",children:f.description}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"text-xl font-bold text-green-600",children:["₪",f.price.toFixed(2)]}),i.jsxs("p",{className:"text-sm text-gray-500",children:["المخزون: ",f.stock," قطعة"]}),i.jsxs("p",{className:"text-sm text-gray-500",children:["المتجر: ",(x=f.vendor)==null?void 0:x.store_name]}),i.jsxs("p",{className:"text-sm text-gray-500",children:["التصنيف: ",(g=f.category)==null?void 0:g.name]})]})]})]},f.id)})}),p=()=>i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المنتج"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"السعر"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المخزون"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المتجر"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التصنيف"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(f=>{var x,g;return i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[f.image_url&&i.jsx("img",{src:f.image_url,alt:f.name,className:"w-10 h-10 rounded-full object-cover ml-3",onError:v=>{v.target.onerror=null,v.target.src="https://via.placeholder.com/40?text=No+Image"}}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:f.name}),i.jsx("div",{className:"text-gray-500",children:f.description})]})]})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-lg font-semibold text-green-600",children:["₪",f.price.toFixed(2)]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:[f.stock," قطعة"]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:(x=f.vendor)==null?void 0:x.store_name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:(g=f.category)==null?void 0:g.name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${l(f.status)}`,children:d(f.status)})})]},f.id)})})]})})});return n?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"المنتجات"}),i.jsx("div",{className:"flex items-center space-x-4",children:i.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>a("grid"),className:`px-3 py-1 rounded ${s==="grid"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض شبكي"}),i.jsx("button",{onClick:()=>a("table"),className:`px-3 py-1 rounded ${s==="table"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض جدول"})]})})]}),s==="grid"?u():p()]})}var x3=Object.defineProperty,v3=(t,e,n)=>e in t?x3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Of=(t,e,n)=>(v3(t,typeof e!="symbol"?e+"":e,n),n);let y3=class{constructor(){Of(this,"current",this.detect()),Of(this,"handoffState","pending"),Of(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},us=new y3,nr=(t,e)=>{us.isServer?j.useEffect(t,e):j.useLayoutEffect(t,e)};function hs(t){let e=j.useRef(t);return nr(()=>{e.current=t},[t]),e}let pt=function(t){let e=hs(t);return Z.useCallback((...n)=>e.current(...n),[e])};function lp(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function ha(){let t=[],e={addEventListener(n,r,s,a){return n.addEventListener(r,s,a),e.add(()=>n.removeEventListener(r,s,a))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return lp(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,s){let a=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:s}),this.add(()=>{Object.assign(n.style,{[r]:a})})},group(n){let r=ha();return n(r),this.add(()=>r.dispose())},add(n){return t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let s of t.splice(r,1))s()}},dispose(){for(let n of t.splice(0))n()}};return e}function tv(){let[t]=j.useState(ha);return j.useEffect(()=>()=>t.dispose(),[t]),t}function b3(){let t=typeof document>"u";return"useSyncExternalStore"in lo?(e=>e.useSyncExternalStore)(lo)(()=>()=>{},()=>!1,()=>!t):!1}function Fo(){let t=b3(),[e,n]=j.useState(us.isHandoffComplete);return e&&us.isHandoffComplete===!1&&n(!1),j.useEffect(()=>{e!==!0&&n(!0)},[e]),j.useEffect(()=>us.handoff(),[]),t?!1:e}var vb;let $o=(vb=Z.useId)!=null?vb:function(){let t=Fo(),[e,n]=Z.useState(t?()=>us.nextId():null);return nr(()=>{e===null&&n(us.nextId())},[e]),e!=null?""+e:void 0};function an(t,e,...n){if(t in e){let s=e[t];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,an),r}function O2(t){return us.isServer?null:t instanceof Node?t.ownerDocument:t!=null&&t.hasOwnProperty("current")&&t.current instanceof Node?t.current.ownerDocument:document}let mg=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Ai=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(Ai||{}),L2=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(L2||{}),_3=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(_3||{});function w3(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(mg)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var R2=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(R2||{});function j3(t,e=0){var n;return t===((n=O2(t))==null?void 0:n.body)?!1:an(e,{0(){return t.matches(mg)},1(){let r=t;for(;r!==null;){if(r.matches(mg))return!0;r=r.parentElement}return!1}})}var N3=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(N3||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function qi(t){t==null||t.focus({preventScroll:!0})}let k3=["textarea","input"].join(",");function S3(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,k3))!=null?n:!1}function C3(t,e=n=>n){return t.slice().sort((n,r)=>{let s=e(n),a=e(r);if(s===null||a===null)return 0;let o=s.compareDocumentPosition(a);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function wu(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){let a=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,o=Array.isArray(t)?n?C3(t):t:w3(t);s.length>0&&o.length>1&&(o=o.filter(g=>!s.includes(g))),r=r??a.activeElement;let l=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,o.indexOf(r))-1;if(e&4)return Math.max(0,o.indexOf(r))+1;if(e&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=e&32?{preventScroll:!0}:{},p=0,f=o.length,x;do{if(p>=f||p+f<=0)return 0;let g=d+p;if(e&16)g=(g+f)%f;else{if(g<0)return 3;if(g>=f)return 1}x=o[g],x==null||x.focus(u),p+=l}while(x!==a.activeElement);return e&6&&S3(x)&&x.select(),2}function A2(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function E3(){return/Android/gi.test(window.navigator.userAgent)}function T3(){return A2()||E3()}function zd(t,e,n){let r=hs(e);j.useEffect(()=>{function s(a){r.current(a)}return document.addEventListener(t,s,n),()=>document.removeEventListener(t,s,n)},[t,n])}function I2(t,e,n){let r=hs(e);j.useEffect(()=>{function s(a){r.current(a)}return window.addEventListener(t,s,n),()=>window.removeEventListener(t,s,n)},[t,n])}function P3(t,e,n=!0){let r=j.useRef(!1);j.useEffect(()=>{requestAnimationFrame(()=>{r.current=n})},[n]);function s(o,l){if(!r.current||o.defaultPrevented)return;let d=l(o);if(d===null||!d.getRootNode().contains(d)||!d.isConnected)return;let u=function p(f){return typeof f=="function"?p(f()):Array.isArray(f)||f instanceof Set?f:[f]}(t);for(let p of u){if(p===null)continue;let f=p instanceof HTMLElement?p:p.current;if(f!=null&&f.contains(d)||o.composed&&o.composedPath().includes(f))return}return!j3(d,R2.Loose)&&d.tabIndex!==-1&&o.preventDefault(),e(o,d)}let a=j.useRef(null);zd("pointerdown",o=>{var l,d;r.current&&(a.current=((d=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:d[0])||o.target)},!0),zd("mousedown",o=>{var l,d;r.current&&(a.current=((d=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:d[0])||o.target)},!0),zd("click",o=>{T3()||a.current&&(s(o,()=>a.current),a.current=null)},!0),zd("touchend",o=>s(o,()=>o.target instanceof HTMLElement?o.target:null),!0),I2("blur",o=>s(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Vc(...t){return j.useMemo(()=>O2(...t),[...t])}let F2=Symbol();function D3(t,e=!0){return Object.assign(t,{[F2]:e})}function wr(...t){let e=j.useRef(t);j.useEffect(()=>{e.current=t},[t]);let n=pt(r=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(r):s.current=r)});return t.every(r=>r==null||(r==null?void 0:r[F2]))?void 0:n}function nv(t,e){let n=j.useRef([]),r=pt(t);j.useEffect(()=>{let s=[...n.current];for(let[a,o]of e.entries())if(n.current[a]!==o){let l=r(e,s);return n.current=e,l}},[r,...e])}function ih(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}var ah=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(ah||{}),Us=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(Us||{});function lr({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:s,visible:a=!0,name:o,mergeRefs:l}){l=l??M3;let d=$2(e,t);if(a)return Bd(d,n,r,o,l);let u=s??0;if(u&2){let{static:p=!1,...f}=d;if(p)return Bd(f,n,r,o,l)}if(u&1){let{unmount:p=!0,...f}=d;return an(p?0:1,{0(){return null},1(){return Bd({...f,hidden:!0,style:{display:"none"}},n,r,o,l)}})}return Bd(d,n,r,o,l)}function Bd(t,e={},n,r,s){let{as:a=n,children:o,refName:l="ref",...d}=Lf(t,["unmount","static"]),u=t.ref!==void 0?{[l]:t.ref}:{},p=typeof o=="function"?o(e):o;"className"in d&&d.className&&typeof d.className=="function"&&(d.className=d.className(e));let f={};if(e){let x=!1,g=[];for(let[v,b]of Object.entries(e))typeof b=="boolean"&&(x=!0),b===!0&&g.push(v);x&&(f["data-headlessui-state"]=g.join(" "))}if(a===j.Fragment&&Object.keys(yb(d)).length>0){if(!j.isValidElement(p)||Array.isArray(p)&&p.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(d).map(b=>`  - ${b}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(b=>`  - ${b}`).join(`
`)].join(`
`));let x=p.props,g=typeof(x==null?void 0:x.className)=="function"?(...b)=>ih(x==null?void 0:x.className(...b),d.className):ih(x==null?void 0:x.className,d.className),v=g?{className:g}:{};return j.cloneElement(p,Object.assign({},$2(p.props,yb(Lf(d,["ref"]))),f,u,{ref:s(p.ref,u.ref)},v))}return j.createElement(a,Object.assign({},Lf(d,["ref"]),a!==j.Fragment&&u,a!==j.Fragment&&f),p)}function M3(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function $2(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):e[s]=r[s];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(e,{[r](s,...a){let o=n[r];for(let l of o){if((s instanceof Event||(s==null?void 0:s.nativeEvent)instanceof Event)&&s.defaultPrevented)return;l(s,...a)}}});return e}function $n(t){var e;return Object.assign(j.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function yb(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function Lf(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}let O3="div";var oh=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(oh||{});function L3(t,e){var n;let{features:r=1,...s}=t,a={ref:e,"aria-hidden":(r&2)===2?!0:(n=s["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return lr({ourProps:a,theirProps:s,slot:{},defaultTag:O3,name:"Hidden"})}let gg=$n(L3),rv=j.createContext(null);rv.displayName="OpenClosedContext";var Mn=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(Mn||{});function sv(){return j.useContext(rv)}function R3({value:t,children:e}){return Z.createElement(rv.Provider,{value:t},e)}function A3(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let Is=[];A3(()=>{function t(e){e.target instanceof HTMLElement&&e.target!==document.body&&Is[0]!==e.target&&(Is.unshift(e.target),Is=Is.filter(n=>n!=null&&n.isConnected),Is.splice(10))}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function I3(t){let e=t.parentElement,n=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(n=e),e=e.parentElement;let r=(e==null?void 0:e.getAttribute("disabled"))==="";return r&&F3(n)?!1:r}function F3(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}var z2=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(z2||{});function B2(t,e,n,r){let s=hs(n);j.useEffect(()=>{t=t??window;function a(o){s.current(o)}return t.addEventListener(e,a,r),()=>t.removeEventListener(e,a,r)},[t,e,r])}function qc(){let t=j.useRef(!1);return nr(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function U2(t){let e=pt(t),n=j.useRef(!1);j.useEffect(()=>(n.current=!1,()=>{n.current=!0,lp(()=>{n.current&&e()})}),[e])}var Tl=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Tl||{});function $3(){let t=j.useRef(0);return I2("keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function H2(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let e=new Set;for(let n of t.current)n.current instanceof HTMLElement&&e.add(n.current);return e}let z3="div";var W2=(t=>(t[t.None=1]="None",t[t.InitialFocus=2]="InitialFocus",t[t.TabLock=4]="TabLock",t[t.FocusLock=8]="FocusLock",t[t.RestoreFocus=16]="RestoreFocus",t[t.All=30]="All",t))(W2||{});function B3(t,e){let n=j.useRef(null),r=wr(n,e),{initialFocus:s,containers:a,features:o=30,...l}=t;Fo()||(o=1);let d=Vc(n);W3({ownerDocument:d},!!(o&16));let u=Y3({ownerDocument:d,container:n,initialFocus:s},!!(o&2));V3({ownerDocument:d,container:n,containers:a,previousActiveElement:u},!!(o&8));let p=$3(),f=pt(b=>{let w=n.current;w&&(_=>_())(()=>{an(p.current,{[Tl.Forwards]:()=>{wu(w,Ai.First,{skipElements:[b.relatedTarget]})},[Tl.Backwards]:()=>{wu(w,Ai.Last,{skipElements:[b.relatedTarget]})}})})}),x=tv(),g=j.useRef(!1),v={ref:r,onKeyDown(b){b.key=="Tab"&&(g.current=!0,x.requestAnimationFrame(()=>{g.current=!1}))},onBlur(b){let w=H2(a);n.current instanceof HTMLElement&&w.add(n.current);let _=b.relatedTarget;_ instanceof HTMLElement&&_.dataset.headlessuiFocusGuard!=="true"&&(Y2(w,_)||(g.current?wu(n.current,an(p.current,{[Tl.Forwards]:()=>Ai.Next,[Tl.Backwards]:()=>Ai.Previous})|Ai.WrapAround,{relativeTo:b.target}):b.target instanceof HTMLElement&&qi(b.target)))}};return Z.createElement(Z.Fragment,null,!!(o&4)&&Z.createElement(gg,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:oh.Focusable}),lr({ourProps:v,theirProps:l,defaultTag:z3,name:"FocusTrap"}),!!(o&4)&&Z.createElement(gg,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:oh.Focusable}))}let U3=$n(B3),hl=Object.assign(U3,{features:W2});function H3(t=!0){let e=j.useRef(Is.slice());return nv(([n],[r])=>{r===!0&&n===!1&&lp(()=>{e.current.splice(0)}),r===!1&&n===!0&&(e.current=Is.slice())},[t,Is,e]),pt(()=>{var n;return(n=e.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function W3({ownerDocument:t},e){let n=H3(e);nv(()=>{e||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&qi(n())},[e]),U2(()=>{e&&qi(n())})}function Y3({ownerDocument:t,container:e,initialFocus:n},r){let s=j.useRef(null),a=qc();return nv(()=>{if(!r)return;let o=e.current;o&&lp(()=>{if(!a.current)return;let l=t==null?void 0:t.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===l){s.current=l;return}}else if(o.contains(l)){s.current=l;return}n!=null&&n.current?qi(n.current):wu(o,Ai.First)===L2.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),s.current=t==null?void 0:t.activeElement})},[r]),s}function V3({ownerDocument:t,container:e,containers:n,previousActiveElement:r},s){let a=qc();B2(t==null?void 0:t.defaultView,"focus",o=>{if(!s||!a.current)return;let l=H2(n);e.current instanceof HTMLElement&&l.add(e.current);let d=r.current;if(!d)return;let u=o.target;u&&u instanceof HTMLElement?Y2(l,u)?(r.current=u,qi(u)):(o.preventDefault(),o.stopPropagation(),qi(d)):qi(r.current)},!0)}function Y2(t,e){for(let n of t)if(n.contains(e))return!0;return!1}let V2=j.createContext(!1);function q3(){return j.useContext(V2)}function xg(t){return Z.createElement(V2.Provider,{value:t.force},t.children)}function Z3(t){let e=q3(),n=j.useContext(q2),r=Vc(t),[s,a]=j.useState(()=>{if(!e&&n!==null||us.isServer)return null;let o=r==null?void 0:r.getElementById("headlessui-portal-root");if(o)return o;if(r===null)return null;let l=r.createElement("div");return l.setAttribute("id","headlessui-portal-root"),r.body.appendChild(l)});return j.useEffect(()=>{s!==null&&(r!=null&&r.body.contains(s)||r==null||r.body.appendChild(s))},[s,r]),j.useEffect(()=>{e||n!==null&&a(n.current)},[n,a,e]),s}let K3=j.Fragment;function G3(t,e){let n=t,r=j.useRef(null),s=wr(D3(p=>{r.current=p}),e),a=Vc(r),o=Z3(r),[l]=j.useState(()=>{var p;return us.isServer?null:(p=a==null?void 0:a.createElement("div"))!=null?p:null}),d=j.useContext(vg),u=Fo();return nr(()=>{!o||!l||o.contains(l)||(l.setAttribute("data-headlessui-portal",""),o.appendChild(l))},[o,l]),nr(()=>{if(l&&d)return d.register(l)},[d,l]),U2(()=>{var p;!o||!l||(l instanceof Node&&o.contains(l)&&o.removeChild(l),o.childNodes.length<=0&&((p=o.parentElement)==null||p.removeChild(o)))}),u?!o||!l?null:Hc.createPortal(lr({ourProps:{ref:s},theirProps:n,defaultTag:K3,name:"Portal"}),l):null}let Q3=j.Fragment,q2=j.createContext(null);function X3(t,e){let{target:n,...r}=t,s={ref:wr(e)};return Z.createElement(q2.Provider,{value:n},lr({ourProps:s,theirProps:r,defaultTag:Q3,name:"Popover.Group"}))}let vg=j.createContext(null);function J3(){let t=j.useContext(vg),e=j.useRef([]),n=pt(a=>(e.current.push(a),t&&t.register(a),()=>r(a))),r=pt(a=>{let o=e.current.indexOf(a);o!==-1&&e.current.splice(o,1),t&&t.unregister(a)}),s=j.useMemo(()=>({register:n,unregister:r,portals:e}),[n,r,e]);return[e,j.useMemo(()=>function({children:a}){return Z.createElement(vg.Provider,{value:s},a)},[s])]}let eM=$n(G3),tM=$n(X3),yg=Object.assign(eM,{Group:tM});function nM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}const rM=typeof Object.is=="function"?Object.is:nM,{useState:sM,useEffect:iM,useLayoutEffect:aM,useDebugValue:oM}=lo;function lM(t,e,n){const r=e(),[{inst:s},a]=sM({inst:{value:r,getSnapshot:e}});return aM(()=>{s.value=r,s.getSnapshot=e,Rf(s)&&a({inst:s})},[t,r,e]),iM(()=>(Rf(s)&&a({inst:s}),t(()=>{Rf(s)&&a({inst:s})})),[t]),oM(r),r}function Rf(t){const e=t.getSnapshot,n=t.value;try{const r=e();return!rM(n,r)}catch{return!0}}function cM(t,e,n){return e()}const dM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uM=!dM,hM=uM?cM:lM,pM="useSyncExternalStore"in lo?(t=>t.useSyncExternalStore)(lo):hM;function fM(t){return pM(t.subscribe,t.getSnapshot,t.getSnapshot)}function mM(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...a){let o=e[s].call(n,...a);o&&(n=o,r.forEach(l=>l()))}}}function gM(){let t;return{before({doc:e}){var n;let r=e.documentElement;t=((n=e.defaultView)!=null?n:window).innerWidth-r.clientWidth},after({doc:e,d:n}){let r=e.documentElement,s=r.clientWidth-r.offsetWidth,a=t-s;n.style(r,"paddingRight",`${a}px`)}}}function xM(){return A2()?{before({doc:t,d:e,meta:n}){function r(s){return n.containers.flatMap(a=>a()).some(a=>a.contains(s))}e.microTask(()=>{var s;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let l=ha();l.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>l.dispose()))}let a=(s=window.scrollY)!=null?s:window.pageYOffset,o=null;e.addEventListener(t,"click",l=>{if(l.target instanceof HTMLElement)try{let d=l.target.closest("a");if(!d)return;let{hash:u}=new URL(d.href),p=t.querySelector(u);p&&!r(p)&&(o=p)}catch{}},!0),e.addEventListener(t,"touchstart",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let d=l.target;for(;d.parentElement&&r(d.parentElement);)d=d.parentElement;e.style(d,"overscrollBehavior","contain")}else e.style(l.target,"touchAction","none")}),e.addEventListener(t,"touchmove",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let d=l.target;for(;d.parentElement&&d.dataset.headlessuiPortal!==""&&!(d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth);)d=d.parentElement;d.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()},{passive:!1}),e.add(()=>{var l;let d=(l=window.scrollY)!=null?l:window.pageYOffset;a!==d&&window.scrollTo(0,a),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function vM(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function yM(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let Bi=mM(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:ha(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:yM(n)},s=[xM(),gM(),vM()];s.forEach(({before:a})=>a==null?void 0:a(r)),s.forEach(({after:a})=>a==null?void 0:a(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});Bi.subscribe(()=>{let t=Bi.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",s=n.count!==0;(s&&!r||!s&&r)&&Bi.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Bi.dispatch("TEARDOWN",n)}});function bM(t,e,n){let r=fM(Bi),s=t?r.get(t):void 0,a=s?s.count>0:!1;return nr(()=>{if(!(!t||!e))return Bi.dispatch("PUSH",t,n),()=>Bi.dispatch("POP",t,n)},[e,t]),a}let Af=new Map,pl=new Map;function bb(t,e=!0){nr(()=>{var n;if(!e)return;let r=typeof t=="function"?t():t.current;if(!r)return;function s(){var o;if(!r)return;let l=(o=pl.get(r))!=null?o:1;if(l===1?pl.delete(r):pl.set(r,l-1),l!==1)return;let d=Af.get(r);d&&(d["aria-hidden"]===null?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden",d["aria-hidden"]),r.inert=d.inert,Af.delete(r))}let a=(n=pl.get(r))!=null?n:0;return pl.set(r,a+1),a!==0||(Af.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),r.setAttribute("aria-hidden","true"),r.inert=!0),s},[t,e])}function _M({defaultContainers:t=[],portals:e,mainTreeNodeRef:n}={}){var r;let s=j.useRef((r=n==null?void 0:n.current)!=null?r:null),a=Vc(s),o=pt(()=>{var l,d,u;let p=[];for(let f of t)f!==null&&(f instanceof HTMLElement?p.push(f):"current"in f&&f.current instanceof HTMLElement&&p.push(f.current));if(e!=null&&e.current)for(let f of e.current)p.push(f);for(let f of(l=a==null?void 0:a.querySelectorAll("html > *, body > *"))!=null?l:[])f!==document.body&&f!==document.head&&f instanceof HTMLElement&&f.id!=="headlessui-portal-root"&&(f.contains(s.current)||f.contains((u=(d=s.current)==null?void 0:d.getRootNode())==null?void 0:u.host)||p.some(x=>f.contains(x))||p.push(f));return p});return{resolveContainers:o,contains:pt(l=>o().some(d=>d.contains(l))),mainTreeNodeRef:s,MainTreeNode:j.useMemo(()=>function(){return n!=null?null:Z.createElement(gg,{features:oh.Hidden,ref:s})},[s,n])}}let iv=j.createContext(()=>{});iv.displayName="StackContext";var bg=(t=>(t[t.Add=0]="Add",t[t.Remove=1]="Remove",t))(bg||{});function wM(){return j.useContext(iv)}function jM({children:t,onUpdate:e,type:n,element:r,enabled:s}){let a=wM(),o=pt((...l)=>{e==null||e(...l),a(...l)});return nr(()=>{let l=s===void 0||s===!0;return l&&o(0,n,r),()=>{l&&o(1,n,r)}},[o,n,r,s]),Z.createElement(iv.Provider,{value:o},t)}let Z2=j.createContext(null);function K2(){let t=j.useContext(Z2);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,K2),e}return t}function NM(){let[t,e]=j.useState([]);return[t.length>0?t.join(" "):void 0,j.useMemo(()=>function(n){let r=pt(a=>(e(o=>[...o,a]),()=>e(o=>{let l=o.slice(),d=l.indexOf(a);return d!==-1&&l.splice(d,1),l}))),s=j.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props}),[r,n.slot,n.name,n.props]);return Z.createElement(Z2.Provider,{value:s},n.children)},[e])]}let kM="p";function SM(t,e){let n=$o(),{id:r=`headlessui-description-${n}`,...s}=t,a=K2(),o=wr(e);nr(()=>a.register(r),[r,a.register]);let l={ref:o,...a.props,id:r};return lr({ourProps:l,theirProps:s,slot:a.slot||{},defaultTag:kM,name:a.name||"Description"})}let CM=$n(SM),EM=Object.assign(CM,{});var TM=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(TM||{}),PM=(t=>(t[t.SetTitleId=0]="SetTitleId",t))(PM||{});let DM={0(t,e){return t.titleId===e.id?t:{...t,titleId:e.id}}},lh=j.createContext(null);lh.displayName="DialogContext";function Zc(t){let e=j.useContext(lh);if(e===null){let n=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Zc),n}return e}function MM(t,e,n=()=>[document.body]){bM(t,e,r=>{var s;return{containers:[...(s=r.containers)!=null?s:[],n]}})}function OM(t,e){return an(e.type,DM,t,e)}let LM="div",RM=ah.RenderStrategy|ah.Static;function AM(t,e){let n=$o(),{id:r=`headlessui-dialog-${n}`,open:s,onClose:a,initialFocus:o,role:l="dialog",__demoMode:d=!1,...u}=t,[p,f]=j.useState(0),x=j.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(x.current||(x.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let g=sv();s===void 0&&g!==null&&(s=(g&Mn.Open)===Mn.Open);let v=j.useRef(null),b=wr(v,e),w=Vc(v),_=t.hasOwnProperty("open")||g!==null,N=t.hasOwnProperty("onClose");if(!_&&!N)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!_)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!N)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof s!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${s}`);if(typeof a!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${a}`);let S=s?0:1,[P,O]=j.useReducer(OM,{titleId:null,descriptionId:null,panelRef:j.createRef()}),A=pt(()=>a(!1)),R=pt(he=>O({type:0,id:he})),T=Fo()?d?!1:S===0:!1,Y=p>1,D=j.useContext(lh)!==null,[U,ee]=J3(),G={get current(){var he;return(he=P.panelRef.current)!=null?he:v.current}},{resolveContainers:z,mainTreeNodeRef:V,MainTreeNode:C}=_M({portals:U,defaultContainers:[G]}),q=Y?"parent":"leaf",I=g!==null?(g&Mn.Closing)===Mn.Closing:!1,X=D||I?!1:T,E=j.useCallback(()=>{var he,ke;return(ke=Array.from((he=w==null?void 0:w.querySelectorAll("body > *"))!=null?he:[]).find(Ce=>Ce.id==="headlessui-portal-root"?!1:Ce.contains(V.current)&&Ce instanceof HTMLElement))!=null?ke:null},[V]);bb(E,X);let K=Y?!0:T,re=j.useCallback(()=>{var he,ke;return(ke=Array.from((he=w==null?void 0:w.querySelectorAll("[data-headlessui-portal]"))!=null?he:[]).find(Ce=>Ce.contains(V.current)&&Ce instanceof HTMLElement))!=null?ke:null},[V]);bb(re,K),P3(z,he=>{he.preventDefault(),A()},!(!T||Y));let se=!(Y||S!==0);B2(w==null?void 0:w.defaultView,"keydown",he=>{se&&(he.defaultPrevented||he.key===z2.Escape&&(he.preventDefault(),he.stopPropagation(),A()))}),MM(w,!(I||S!==0||D),z),j.useEffect(()=>{if(S!==0||!v.current)return;let he=new ResizeObserver(ke=>{for(let Ce of ke){let ce=Ce.target.getBoundingClientRect();ce.x===0&&ce.y===0&&ce.width===0&&ce.height===0&&A()}});return he.observe(v.current),()=>he.disconnect()},[S,v,A]);let[ie,ge]=NM(),ve=j.useMemo(()=>[{dialogState:S,close:A,setTitleId:R},P],[S,P,A,R]),W=j.useMemo(()=>({open:S===0}),[S]),ae={ref:b,id:r,role:l,"aria-modal":S===0?!0:void 0,"aria-labelledby":P.titleId,"aria-describedby":ie};return Z.createElement(jM,{type:"Dialog",enabled:S===0,element:v,onUpdate:pt((he,ke)=>{ke==="Dialog"&&an(he,{[bg.Add]:()=>f(Ce=>Ce+1),[bg.Remove]:()=>f(Ce=>Ce-1)})})},Z.createElement(xg,{force:!0},Z.createElement(yg,null,Z.createElement(lh.Provider,{value:ve},Z.createElement(yg.Group,{target:v},Z.createElement(xg,{force:!1},Z.createElement(ge,{slot:W,name:"Dialog.Description"},Z.createElement(hl,{initialFocus:o,containers:z,features:T?an(q,{parent:hl.features.RestoreFocus,leaf:hl.features.All&~hl.features.FocusLock}):hl.features.None},Z.createElement(ee,null,lr({ourProps:ae,theirProps:u,slot:W,defaultTag:LM,features:RM,visible:S===0,name:"Dialog"}))))))))),Z.createElement(C,null))}let IM="div";function FM(t,e){let n=$o(),{id:r=`headlessui-dialog-overlay-${n}`,...s}=t,[{dialogState:a,close:o}]=Zc("Dialog.Overlay"),l=wr(e),d=pt(p=>{if(p.target===p.currentTarget){if(I3(p.currentTarget))return p.preventDefault();p.preventDefault(),p.stopPropagation(),o()}}),u=j.useMemo(()=>({open:a===0}),[a]);return lr({ourProps:{ref:l,id:r,"aria-hidden":!0,onClick:d},theirProps:s,slot:u,defaultTag:IM,name:"Dialog.Overlay"})}let $M="div";function zM(t,e){let n=$o(),{id:r=`headlessui-dialog-backdrop-${n}`,...s}=t,[{dialogState:a},o]=Zc("Dialog.Backdrop"),l=wr(e);j.useEffect(()=>{if(o.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[o.panelRef]);let d=j.useMemo(()=>({open:a===0}),[a]);return Z.createElement(xg,{force:!0},Z.createElement(yg,null,lr({ourProps:{ref:l,id:r,"aria-hidden":!0},theirProps:s,slot:d,defaultTag:$M,name:"Dialog.Backdrop"})))}let BM="div";function UM(t,e){let n=$o(),{id:r=`headlessui-dialog-panel-${n}`,...s}=t,[{dialogState:a},o]=Zc("Dialog.Panel"),l=wr(e,o.panelRef),d=j.useMemo(()=>({open:a===0}),[a]),u=pt(p=>{p.stopPropagation()});return lr({ourProps:{ref:l,id:r,onClick:u},theirProps:s,slot:d,defaultTag:BM,name:"Dialog.Panel"})}let HM="h2";function WM(t,e){let n=$o(),{id:r=`headlessui-dialog-title-${n}`,...s}=t,[{dialogState:a,setTitleId:o}]=Zc("Dialog.Title"),l=wr(e);j.useEffect(()=>(o(r),()=>o(null)),[r,o]);let d=j.useMemo(()=>({open:a===0}),[a]);return lr({ourProps:{ref:l,id:r},theirProps:s,slot:d,defaultTag:HM,name:"Dialog.Title"})}let YM=$n(AM),VM=$n(zM),qM=$n(UM),ZM=$n(FM),KM=$n(WM),_e=Object.assign(YM,{Backdrop:VM,Panel:qM,Overlay:ZM,Title:KM,Description:EM});function GM(t=0){let[e,n]=j.useState(t),r=qc(),s=j.useCallback(d=>{r.current&&n(u=>u|d)},[e,r]),a=j.useCallback(d=>!!(e&d),[e]),o=j.useCallback(d=>{r.current&&n(u=>u&~d)},[n,r]),l=j.useCallback(d=>{r.current&&n(u=>u^d)},[n]);return{flags:e,addFlag:s,hasFlag:a,removeFlag:o,toggleFlag:l}}function QM(t){let e={called:!1};return(...n)=>{if(!e.called)return e.called=!0,t(...n)}}function If(t,...e){t&&e.length>0&&t.classList.add(...e)}function Ff(t,...e){t&&e.length>0&&t.classList.remove(...e)}function XM(t,e){let n=ha();if(!t)return n.dispose;let{transitionDuration:r,transitionDelay:s}=getComputedStyle(t),[a,o]=[r,s].map(d=>{let[u=0]=d.split(",").filter(Boolean).map(p=>p.includes("ms")?parseFloat(p):parseFloat(p)*1e3).sort((p,f)=>f-p);return u}),l=a+o;if(l!==0){n.group(u=>{u.setTimeout(()=>{e(),u.dispose()},l),u.addEventListener(t,"transitionrun",p=>{p.target===p.currentTarget&&u.dispose()})});let d=n.addEventListener(t,"transitionend",u=>{u.target===u.currentTarget&&(e(),d())})}else e();return n.add(()=>e()),n.dispose}function JM(t,e,n,r){let s=n?"enter":"leave",a=ha(),o=r!==void 0?QM(r):()=>{};s==="enter"&&(t.removeAttribute("hidden"),t.style.display="");let l=an(s,{enter:()=>e.enter,leave:()=>e.leave}),d=an(s,{enter:()=>e.enterTo,leave:()=>e.leaveTo}),u=an(s,{enter:()=>e.enterFrom,leave:()=>e.leaveFrom});return Ff(t,...e.base,...e.enter,...e.enterTo,...e.enterFrom,...e.leave,...e.leaveFrom,...e.leaveTo,...e.entered),If(t,...e.base,...l,...u),a.nextFrame(()=>{Ff(t,...e.base,...l,...u),If(t,...e.base,...l,...d),XM(t,()=>(Ff(t,...e.base,...l),If(t,...e.base,...e.entered),o()))}),a.dispose}function eO({immediate:t,container:e,direction:n,classes:r,onStart:s,onStop:a}){let o=qc(),l=tv(),d=hs(n);nr(()=>{t&&(d.current="enter")},[t]),nr(()=>{let u=ha();l.add(u.dispose);let p=e.current;if(p&&d.current!=="idle"&&o.current)return u.dispose(),s.current(d.current),u.add(JM(p,r.current,d.current==="enter",()=>{u.dispose(),a.current(d.current)})),u.dispose},[n])}function Ns(t=""){return t.split(/\s+/).filter(e=>e.length>1)}let cp=j.createContext(null);cp.displayName="TransitionContext";var tO=(t=>(t.Visible="visible",t.Hidden="hidden",t))(tO||{});function nO(){let t=j.useContext(cp);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function rO(){let t=j.useContext(dp);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let dp=j.createContext(null);dp.displayName="NestingContext";function up(t){return"children"in t?up(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function G2(t,e){let n=hs(t),r=j.useRef([]),s=qc(),a=tv(),o=pt((g,v=Us.Hidden)=>{let b=r.current.findIndex(({el:w})=>w===g);b!==-1&&(an(v,{[Us.Unmount](){r.current.splice(b,1)},[Us.Hidden](){r.current[b].state="hidden"}}),a.microTask(()=>{var w;!up(r)&&s.current&&((w=n.current)==null||w.call(n))}))}),l=pt(g=>{let v=r.current.find(({el:b})=>b===g);return v?v.state!=="visible"&&(v.state="visible"):r.current.push({el:g,state:"visible"}),()=>o(g,Us.Unmount)}),d=j.useRef([]),u=j.useRef(Promise.resolve()),p=j.useRef({enter:[],leave:[],idle:[]}),f=pt((g,v,b)=>{d.current.splice(0),e&&(e.chains.current[v]=e.chains.current[v].filter(([w])=>w!==g)),e==null||e.chains.current[v].push([g,new Promise(w=>{d.current.push(w)})]),e==null||e.chains.current[v].push([g,new Promise(w=>{Promise.all(p.current[v].map(([_,N])=>N)).then(()=>w())})]),v==="enter"?u.current=u.current.then(()=>e==null?void 0:e.wait.current).then(()=>b(v)):b(v)}),x=pt((g,v,b)=>{Promise.all(p.current[v].splice(0).map(([w,_])=>_)).then(()=>{var w;(w=d.current.shift())==null||w()}).then(()=>b(v))});return j.useMemo(()=>({children:r,register:l,unregister:o,onStart:f,onStop:x,wait:u,chains:p}),[l,o,r,f,x,p,u])}function sO(){}let iO=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function _b(t){var e;let n={};for(let r of iO)n[r]=(e=t[r])!=null?e:sO;return n}function aO(t){let e=j.useRef(_b(t));return j.useEffect(()=>{e.current=_b(t)},[t]),e}let oO="div",Q2=ah.RenderStrategy;function lO(t,e){var n,r;let{beforeEnter:s,afterEnter:a,beforeLeave:o,afterLeave:l,enter:d,enterFrom:u,enterTo:p,entered:f,leave:x,leaveFrom:g,leaveTo:v,...b}=t,w=j.useRef(null),_=wr(w,e),N=(n=b.unmount)==null||n?Us.Unmount:Us.Hidden,{show:S,appear:P,initial:O}=nO(),[A,R]=j.useState(S?"visible":"hidden"),T=rO(),{register:Y,unregister:D}=T;j.useEffect(()=>Y(w),[Y,w]),j.useEffect(()=>{if(N===Us.Hidden&&w.current){if(S&&A!=="visible"){R("visible");return}return an(A,{hidden:()=>D(w),visible:()=>Y(w)})}},[A,w,Y,D,S,N]);let U=hs({base:Ns(b.className),enter:Ns(d),enterFrom:Ns(u),enterTo:Ns(p),entered:Ns(f),leave:Ns(x),leaveFrom:Ns(g),leaveTo:Ns(v)}),ee=aO({beforeEnter:s,afterEnter:a,beforeLeave:o,afterLeave:l}),G=Fo();j.useEffect(()=>{if(G&&A==="visible"&&w.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[w,A,G]);let z=O&&!P,V=P&&S&&O,C=!G||z?"idle":S?"enter":"leave",q=GM(0),I=pt(se=>an(se,{enter:()=>{q.addFlag(Mn.Opening),ee.current.beforeEnter()},leave:()=>{q.addFlag(Mn.Closing),ee.current.beforeLeave()},idle:()=>{}})),X=pt(se=>an(se,{enter:()=>{q.removeFlag(Mn.Opening),ee.current.afterEnter()},leave:()=>{q.removeFlag(Mn.Closing),ee.current.afterLeave()},idle:()=>{}})),E=G2(()=>{R("hidden"),D(w)},T),K=j.useRef(!1);eO({immediate:V,container:w,classes:U,direction:C,onStart:hs(se=>{K.current=!0,E.onStart(w,se,I)}),onStop:hs(se=>{K.current=!1,E.onStop(w,se,X),se==="leave"&&!up(E)&&(R("hidden"),D(w))})});let re=b,Q={ref:_};return V?re={...re,className:ih(b.className,...U.current.enter,...U.current.enterFrom)}:K.current&&(re.className=ih(b.className,(r=w.current)==null?void 0:r.className),re.className===""&&delete re.className),Z.createElement(dp.Provider,{value:E},Z.createElement(R3,{value:an(A,{visible:Mn.Open,hidden:Mn.Closed})|q.flags},lr({ourProps:Q,theirProps:re,defaultTag:oO,features:Q2,visible:A==="visible",name:"Transition.Child"})))}function cO(t,e){let{show:n,appear:r=!1,unmount:s=!0,...a}=t,o=j.useRef(null),l=wr(o,e);Fo();let d=sv();if(n===void 0&&d!==null&&(n=(d&Mn.Open)===Mn.Open),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,p]=j.useState(n?"visible":"hidden"),f=G2(()=>{p("hidden")}),[x,g]=j.useState(!0),v=j.useRef([n]);nr(()=>{x!==!1&&v.current[v.current.length-1]!==n&&(v.current.push(n),g(!1))},[v,n]);let b=j.useMemo(()=>({show:n,appear:r,initial:x}),[n,r,x]);j.useEffect(()=>{if(n)p("visible");else if(!up(f))p("hidden");else{let S=o.current;if(!S)return;let P=S.getBoundingClientRect();P.x===0&&P.y===0&&P.width===0&&P.height===0&&p("hidden")}},[n,f]);let w={unmount:s},_=pt(()=>{var S;x&&g(!1),(S=t.beforeEnter)==null||S.call(t)}),N=pt(()=>{var S;x&&g(!1),(S=t.beforeLeave)==null||S.call(t)});return Z.createElement(dp.Provider,{value:f},Z.createElement(cp.Provider,{value:b},lr({ourProps:{...w,as:j.Fragment,children:Z.createElement(X2,{ref:l,...w,...a,beforeEnter:_,beforeLeave:N})},theirProps:{},defaultTag:j.Fragment,features:Q2,visible:u==="visible",name:"Transition"})))}function dO(t,e){let n=j.useContext(cp)!==null,r=sv()!==null;return Z.createElement(Z.Fragment,null,!n&&r?Z.createElement(_g,{ref:e,...t}):Z.createElement(X2,{ref:e,...t}))}let _g=$n(cO),X2=$n(lO),uO=$n(dO),$f=Object.assign(_g,{Child:uO,Root:_g});function zn({filters:t,onFilterChange:e}){const n=(s,a)=>{e({...t,[s]:a})},r=(s,a)=>{switch(a.type){case"text":return i.jsx("input",{type:"text",value:t[s]||"",onChange:o=>n(s,o.target.value),placeholder:a.placeholder,className:"w-full border rounded-md px-3 py-2"});case"select":return i.jsxs("select",{value:t[s]||"",onChange:o=>n(s,o.target.value),className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"",children:a.placeholder}),a.options.map(o=>i.jsx("option",{value:o.value,children:o.label},o.value))]});case"number":return i.jsx("input",{type:"number",value:t[s]||"",onChange:o=>n(s,o.target.value),placeholder:a.placeholder,min:a.min,max:a.max,step:a.step,className:"w-full border rounded-md px-3 py-2"});case"date":return i.jsx("input",{type:"date",value:t[s]||"",onChange:o=>n(s,o.target.value),className:"w-full border rounded-md px-3 py-2"});case"dateRange":return i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"date",value:t[`${s}Start`]||"",onChange:o=>n(`${s}Start`,o.target.value),className:"w-full border rounded-md px-3 py-2"}),i.jsx("input",{type:"date",value:t[`${s}End`]||"",onChange:o=>n(`${s}End`,o.target.value),className:"w-full border rounded-md px-3 py-2"})]});default:return null}};return i.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Object.entries(t).map(([s,a])=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a.label}),r(s,a)]},s))})})}function Bn(t={},e=[]){const[n,r]=j.useState(t),s=j.useCallback(l=>l.filter(d=>Object.entries(n).every(([u,p])=>{if(!p.value&&p.value!==0)return!0;switch(p.type){case"text":const f=String(d[u]||""),x=String(p.value||"");return f.toLowerCase().includes(x.toLowerCase());case"select":return p.value===""||d[u]===p.value;case"number":return d[u]===Number(p.value);case"date":return new Date(d[u]).toISOString().split("T")[0]===p.value;case"dateRange":const v=new Date(d[u]),b=p.value.start?new Date(p.value.start):null,w=p.value.end?new Date(p.value.end):null;return b&&w?v>=b&&v<=w:b?v>=b:w?v<=w:!0;default:return!0}})),[n]),a=j.useCallback(l=>{r(d=>({...d,...Object.fromEntries(Object.entries(l).map(([u,p])=>[u,{...d[u],value:p}]))}))},[]),o=j.useCallback(()=>{r(t)},[t]);return{filters:n,filterData:s,handleFilterChange:a,resetFilters:o}}var J2={exports:{}},hO="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",pO=hO,fO=pO;function eN(){}function tN(){}tN.resetWarningCache=eN;var mO=function(){function t(r,s,a,o,l,d){if(d!==fO){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:tN,resetWarningCache:eN};return n.PropTypes=n,n};J2.exports=mO();var gO=J2.exports;const et=oi(gO);function pa(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?a(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})}const xO=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function vo(t,e,n){const r=vO(t),{webkitRelativePath:s}=t,a=typeof e=="string"?e:typeof s=="string"&&s.length>0?s:`./${t.name}`;return typeof r.path!="string"&&wb(r,"path",a),wb(r,"relativePath",a),r}function vO(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const r=e.split(".").pop().toLowerCase(),s=xO.get(r);s&&Object.defineProperty(t,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return t}function wb(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1,configurable:!1,enumerable:!0})}const yO=[".DS_Store","Thumbs.db"];function bO(t){return pa(this,void 0,void 0,function*(){return ch(t)&&_O(t.dataTransfer)?kO(t.dataTransfer,t.type):wO(t)?jO(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?NO(t):[]})}function _O(t){return ch(t)}function wO(t){return ch(t)&&ch(t.target)}function ch(t){return typeof t=="object"&&t!==null}function jO(t){return wg(t.target.files).map(e=>vo(e))}function NO(t){return pa(this,void 0,void 0,function*(){return(yield Promise.all(t.map(n=>n.getFile()))).map(n=>vo(n))})}function kO(t,e){return pa(this,void 0,void 0,function*(){if(t.items){const n=wg(t.items).filter(s=>s.kind==="file");if(e!=="drop")return n;const r=yield Promise.all(n.map(SO));return jb(nN(r))}return jb(wg(t.files).map(n=>vo(n)))})}function jb(t){return t.filter(e=>yO.indexOf(e.name)===-1)}function wg(t){if(t===null)return[];const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(r)}return e}function SO(t){if(typeof t.webkitGetAsEntry!="function")return Nb(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?rN(e):Nb(t,e)}function nN(t){return t.reduce((e,n)=>[...e,...Array.isArray(n)?nN(n):[n]],[])}function Nb(t,e){return pa(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const a=yield t.getAsFileSystemHandle();if(a===null)throw new Error(`${t} is not a File`);if(a!==void 0){const o=yield a.getFile();return o.handle=a,vo(o)}}const r=t.getAsFile();if(!r)throw new Error(`${t} is not a File`);return vo(r,(n=e==null?void 0:e.fullPath)!==null&&n!==void 0?n:void 0)})}function CO(t){return pa(this,void 0,void 0,function*(){return t.isDirectory?rN(t):EO(t)})}function rN(t){const e=t.createReader();return new Promise((n,r)=>{const s=[];function a(){e.readEntries(o=>pa(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(CO));s.push(l),a()}else try{const l=yield Promise.all(s);n(l)}catch(l){r(l)}}),o=>{r(o)})}a()})}function EO(t){return pa(this,void 0,void 0,function*(){return new Promise((e,n)=>{t.file(r=>{const s=vo(r,t.fullPath);e(s)},r=>{n(r)})})})}var zf=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var r=t.name||"",s=(t.type||"").toLowerCase(),a=s.replace(/\/.*$/,"");return n.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?r.toLowerCase().endsWith(l):l.endsWith("/*")?a===l.replace(/\/.*$/,""):s===l})}return!0};function kb(t){return DO(t)||PO(t)||iN(t)||TO()}function TO(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PO(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function DO(t){if(Array.isArray(t))return jg(t)}function Sb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Cb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sb(Object(n),!0).forEach(function(r){sN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sN(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kc(t,e){return LO(t)||OO(t,e)||iN(t,e)||MO()}function MO(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iN(t,e){if(t){if(typeof t=="string")return jg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jg(t,e)}}function jg(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function OO(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],s=!0,a=!1,o,l;try{for(n=n.call(t);!(s=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));s=!0);}catch(d){a=!0,l=d}finally{try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}return r}}function LO(t){if(Array.isArray(t))return t}var RO=typeof zf=="function"?zf:zf.default,AO="file-invalid-type",IO="file-too-large",FO="file-too-small",$O="too-many-files",zO=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:AO,message:"File type must be ".concat(r)}},Eb=function(e){return{code:IO,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},Tb=function(e){return{code:FO,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},BO={code:$O,message:"Too many files"};function aN(t,e){var n=t.type==="application/x-moz-file"||RO(t,e);return[n,n?null:zO(e)]}function oN(t,e,n){if(Ii(t.size))if(Ii(e)&&Ii(n)){if(t.size>n)return[!1,Eb(n)];if(t.size<e)return[!1,Tb(e)]}else{if(Ii(e)&&t.size<e)return[!1,Tb(e)];if(Ii(n)&&t.size>n)return[!1,Eb(n)]}return[!0,null]}function Ii(t){return t!=null}function UO(t){var e=t.files,n=t.accept,r=t.minSize,s=t.maxSize,a=t.multiple,o=t.maxFiles,l=t.validator;return!a&&e.length>1||a&&o>=1&&e.length>o?!1:e.every(function(d){var u=aN(d,n),p=kc(u,1),f=p[0],x=oN(d,r,s),g=kc(x,1),v=g[0],b=l?l(d):null;return f&&v&&!b})}function dh(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Ud(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function Pb(t){t.preventDefault()}function HO(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function WO(t){return t.indexOf("Edge/")!==-1}function YO(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return HO(t)||WO(t)}function Er(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];return e.some(function(l){return!dh(r)&&l&&l.apply(void 0,[r].concat(a)),dh(r)})}}function VO(){return"showOpenFilePicker"in window}function qO(t){if(Ii(t)){var e=Object.entries(t).filter(function(n){var r=kc(n,2),s=r[0],a=r[1],o=!0;return lN(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(a)||!a.every(cN))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(n,r){var s=kc(r,2),a=s[0],o=s[1];return Cb(Cb({},n),{},sN({},a,o))},{});return[{description:"Files",accept:e}]}return t}function ZO(t){if(Ii(t))return Object.entries(t).reduce(function(e,n){var r=kc(n,2),s=r[0],a=r[1];return[].concat(kb(e),[s],kb(a))},[]).filter(function(e){return lN(e)||cN(e)}).join(",")}function KO(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function GO(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function lN(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function cN(t){return/^.*\.[\w]+$/.test(t)}var QO=["children"],XO=["open"],JO=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],eL=["refKey","onChange","onClick"];function tL(t){return sL(t)||rL(t)||dN(t)||nL()}function nL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rL(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sL(t){if(Array.isArray(t))return Ng(t)}function Bf(t,e){return oL(t)||aL(t,e)||dN(t,e)||iL()}function iL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dN(t,e){if(t){if(typeof t=="string")return Ng(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ng(t,e)}}function Ng(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function aL(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],s=!0,a=!1,o,l;try{for(n=n.call(t);!(s=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));s=!0);}catch(d){a=!0,l=d}finally{try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}return r}}function oL(t){if(Array.isArray(t))return t}function Db(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function mt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Db(Object(n),!0).forEach(function(r){kg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Db(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uh(t,e){if(t==null)return{};var n=lL(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function lL(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var av=j.forwardRef(function(t,e){var n=t.children,r=uh(t,QO),s=hN(r),a=s.open,o=uh(s,XO);return j.useImperativeHandle(e,function(){return{open:a}},[a]),Z.createElement(j.Fragment,null,n(mt(mt({},o),{},{open:a})))});av.displayName="Dropzone";var uN={disabled:!1,getFilesFromEvent:bO,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};av.defaultProps=uN;av.propTypes={children:et.func,accept:et.objectOf(et.arrayOf(et.string)),multiple:et.bool,preventDropOnDocument:et.bool,noClick:et.bool,noKeyboard:et.bool,noDrag:et.bool,noDragEventsBubbling:et.bool,minSize:et.number,maxSize:et.number,maxFiles:et.number,disabled:et.bool,getFilesFromEvent:et.func,onFileDialogCancel:et.func,onFileDialogOpen:et.func,useFsAccessApi:et.bool,autoFocus:et.bool,onDragEnter:et.func,onDragLeave:et.func,onDragOver:et.func,onDrop:et.func,onDropAccepted:et.func,onDropRejected:et.func,onError:et.func,validator:et.func};var Sg={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function hN(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=mt(mt({},uN),t),n=e.accept,r=e.disabled,s=e.getFilesFromEvent,a=e.maxSize,o=e.minSize,l=e.multiple,d=e.maxFiles,u=e.onDragEnter,p=e.onDragLeave,f=e.onDragOver,x=e.onDrop,g=e.onDropAccepted,v=e.onDropRejected,b=e.onFileDialogCancel,w=e.onFileDialogOpen,_=e.useFsAccessApi,N=e.autoFocus,S=e.preventDropOnDocument,P=e.noClick,O=e.noKeyboard,A=e.noDrag,R=e.noDragEventsBubbling,T=e.onError,Y=e.validator,D=j.useMemo(function(){return ZO(n)},[n]),U=j.useMemo(function(){return qO(n)},[n]),ee=j.useMemo(function(){return typeof w=="function"?w:Mb},[w]),G=j.useMemo(function(){return typeof b=="function"?b:Mb},[b]),z=j.useRef(null),V=j.useRef(null),C=j.useReducer(cL,Sg),q=Bf(C,2),I=q[0],X=q[1],E=I.isFocused,K=I.isFileDialogActive,re=j.useRef(typeof window<"u"&&window.isSecureContext&&_&&VO()),Q=function(){!re.current&&K&&setTimeout(function(){if(V.current){var je=V.current.files;je.length||(X({type:"closeDialog"}),G())}},300)};j.useEffect(function(){return window.addEventListener("focus",Q,!1),function(){window.removeEventListener("focus",Q,!1)}},[V,K,G,re]);var se=j.useRef([]),oe=function(je){z.current&&z.current.contains(je.target)||(je.preventDefault(),se.current=[])};j.useEffect(function(){return S&&(document.addEventListener("dragover",Pb,!1),document.addEventListener("drop",oe,!1)),function(){S&&(document.removeEventListener("dragover",Pb),document.removeEventListener("drop",oe))}},[z,S]),j.useEffect(function(){return!r&&N&&z.current&&z.current.focus(),function(){}},[z,N,r]);var ie=j.useCallback(function(ue){T?T(ue):console.error(ue)},[T]),ge=j.useCallback(function(ue){ue.preventDefault(),ue.persist(),wt(ue),se.current=[].concat(tL(se.current),[ue.target]),Ud(ue)&&Promise.resolve(s(ue)).then(function(je){if(!(dh(ue)&&!R)){var Je=je.length,dt=Je>0&&UO({files:je,accept:D,minSize:o,maxSize:a,multiple:l,maxFiles:d,validator:Y}),Mt=Je>0&&!dt;X({isDragAccept:dt,isDragReject:Mt,isDragActive:!0,type:"setDraggedFiles"}),u&&u(ue)}}).catch(function(je){return ie(je)})},[s,u,ie,R,D,o,a,l,d,Y]),ve=j.useCallback(function(ue){ue.preventDefault(),ue.persist(),wt(ue);var je=Ud(ue);if(je&&ue.dataTransfer)try{ue.dataTransfer.dropEffect="copy"}catch{}return je&&f&&f(ue),!1},[f,R]),W=j.useCallback(function(ue){ue.preventDefault(),ue.persist(),wt(ue);var je=se.current.filter(function(dt){return z.current&&z.current.contains(dt)}),Je=je.indexOf(ue.target);Je!==-1&&je.splice(Je,1),se.current=je,!(je.length>0)&&(X({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Ud(ue)&&p&&p(ue))},[z,p,R]),ae=j.useCallback(function(ue,je){var Je=[],dt=[];ue.forEach(function(Mt){var vi=aN(Mt,D),Zr=Bf(vi,2),xa=Zr[0],Uo=Zr[1],va=oN(Mt,o,a),bs=Bf(va,2),ya=bs[0],Ho=bs[1],Kr=Y?Y(Mt):null;if(xa&&ya&&!Kr)Je.push(Mt);else{var Wo=[Uo,Ho];Kr&&(Wo=Wo.concat(Kr)),dt.push({file:Mt,errors:Wo.filter(function(_p){return _p})})}}),(!l&&Je.length>1||l&&d>=1&&Je.length>d)&&(Je.forEach(function(Mt){dt.push({file:Mt,errors:[BO]})}),Je.splice(0)),X({acceptedFiles:Je,fileRejections:dt,isDragReject:dt.length>0,type:"setFiles"}),x&&x(Je,dt,je),dt.length>0&&v&&v(dt,je),Je.length>0&&g&&g(Je,je)},[X,l,D,o,a,d,x,g,v,Y]),he=j.useCallback(function(ue){ue.preventDefault(),ue.persist(),wt(ue),se.current=[],Ud(ue)&&Promise.resolve(s(ue)).then(function(je){dh(ue)&&!R||ae(je,ue)}).catch(function(je){return ie(je)}),X({type:"reset"})},[s,ae,ie,R]),ke=j.useCallback(function(){if(re.current){X({type:"openDialog"}),ee();var ue={multiple:l,types:U};window.showOpenFilePicker(ue).then(function(je){return s(je)}).then(function(je){ae(je,null),X({type:"closeDialog"})}).catch(function(je){KO(je)?(G(je),X({type:"closeDialog"})):GO(je)?(re.current=!1,V.current?(V.current.value=null,V.current.click()):ie(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):ie(je)});return}V.current&&(X({type:"openDialog"}),ee(),V.current.value=null,V.current.click())},[X,ee,G,_,ae,ie,U,l]),Ce=j.useCallback(function(ue){!z.current||!z.current.isEqualNode(ue.target)||(ue.key===" "||ue.key==="Enter"||ue.keyCode===32||ue.keyCode===13)&&(ue.preventDefault(),ke())},[z,ke]),ce=j.useCallback(function(){X({type:"focus"})},[]),Se=j.useCallback(function(){X({type:"blur"})},[]),Ve=j.useCallback(function(){P||(YO()?setTimeout(ke,0):ke())},[P,ke]),Xe=function(je){return r?null:je},Vt=function(je){return O?null:Xe(je)},Jt=function(je){return A?null:Xe(je)},wt=function(je){R&&je.stopPropagation()},Tn=j.useMemo(function(){return function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},je=ue.refKey,Je=je===void 0?"ref":je,dt=ue.role,Mt=ue.onKeyDown,vi=ue.onFocus,Zr=ue.onBlur,xa=ue.onClick,Uo=ue.onDragEnter,va=ue.onDragOver,bs=ue.onDragLeave,ya=ue.onDrop,Ho=uh(ue,JO);return mt(mt(kg({onKeyDown:Vt(Er(Mt,Ce)),onFocus:Vt(Er(vi,ce)),onBlur:Vt(Er(Zr,Se)),onClick:Xe(Er(xa,Ve)),onDragEnter:Jt(Er(Uo,ge)),onDragOver:Jt(Er(va,ve)),onDragLeave:Jt(Er(bs,W)),onDrop:Jt(Er(ya,he)),role:typeof dt=="string"&&dt!==""?dt:"presentation"},Je,z),!r&&!O?{tabIndex:0}:{}),Ho)}},[z,Ce,ce,Se,Ve,ge,ve,W,he,O,A,r]),gi=j.useCallback(function(ue){ue.stopPropagation()},[]),xi=j.useMemo(function(){return function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},je=ue.refKey,Je=je===void 0?"ref":je,dt=ue.onChange,Mt=ue.onClick,vi=uh(ue,eL),Zr=kg({accept:D,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Xe(Er(dt,he)),onClick:Xe(Er(Mt,gi)),tabIndex:-1},Je,V);return mt(mt({},Zr),vi)}},[V,n,l,he,r]);return mt(mt({},I),{},{isFocused:E&&!r,getRootProps:Tn,getInputProps:xi,rootRef:z,inputRef:V,open:Xe(ke)})}function cL(t,e){switch(e.type){case"focus":return mt(mt({},t),{},{isFocused:!0});case"blur":return mt(mt({},t),{},{isFocused:!1});case"openDialog":return mt(mt({},Sg),{},{isFileDialogActive:!0});case"closeDialog":return mt(mt({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return mt(mt({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return mt(mt({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return mt({},Sg);default:return t}}function Mb(){}const It={PRODUCTS:"products",VENDORS:"vendors",PROFILES:"profiles",ADVERTISEMENTS:"advertisements",GENERAL:"general"},dL=async(t,e=It.GENERAL,n="")=>{try{const r=t.name.split(".").pop(),s=`${Math.random().toString(36).substring(2,15)}_${Date.now()}.${r}`,a=n?`${n}/${s}`:s,{data:o,error:l}=await te.storage.from(e).upload(a,t,{cacheControl:"3600",upsert:!1});if(l)throw l;const{data:{publicUrl:d}}=te.storage.from(e).getPublicUrl(a);return{path:o.path,url:d}}catch(r){throw console.error("Error uploading file:",r),r}};function xs({onUpload:t,type:e="image",accept:n,maxSize:r=5242880,preview:s=null,bucket:a=It.GENERAL,folder:o="",storeInSupabase:l=!0}){const[d,u]=j.useState(s),[p,f]=j.useState(null),[x,g]=j.useState(!1);j.useEffect(()=>{u(s)},[s]);const v={image:{"image/*":[".jpg",".jpeg",".png",".gif",".webp"]},video:{"video/*":[".mp4",".webm"]}},b=j.useCallback(async A=>{f(null);const R=A[0];if(R){g(!0);try{if(l){const{url:T,path:Y}=await dL(R,a,o);u(T),t({file:R,preview:T,path:Y,bucket:a,isSupabaseFile:!0})}else $.error("يجب تفعيل storeInSupabase لتخزين الصورة")}catch(T){console.error("Error uploading to Supabase:",T),$.error("فشل رفع الملف إلى Supabase"),f("فشل رفع الملف"),t({file:null,preview:null,isSupabaseFile:!1})}g(!1)}},[t,a,o,l]),{getRootProps:w,getInputProps:_,isDragActive:N}=hN({onDrop:b,accept:n||v[e],maxSize:r,multiple:!1,onDropRejected:A=>{var T,Y;const R=(Y=(T=A[0])==null?void 0:T.errors[0])==null?void 0:Y.code;f(R==="file-too-large"?`حجم الملف كبير جدًا. الحد الأقصى هو ${Math.round(r/1024/1024)} ميجابايت`:R==="file-invalid-type"?"نوع الملف غير مدعوم":"الملف غير صالح")}}),S=()=>{u(null),t({file:null,preview:null})},P=A=>{f("فشل في تحميل الصورة"),A.target.onerror=null,A.target.src="https://placehold.co/200x200/e2e8f0/64748b?text=Image+Not+Found"},O=A=>{f("فشل في تحميل الفيديو"),A.target.onerror=null;const R=A.target.parentNode;R&&(R.innerHTML='<div class="h-48 flex items-center justify-center bg-gray-200 text-gray-500">فشل تحميل الفيديو</div>')};return i.jsxs("div",{className:"space-y-2",children:[p&&i.jsx("div",{className:"text-red-500 text-sm",children:p}),i.jsxs("div",{...w(),className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors ${N?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-blue-500"} ${x?"opacity-70 pointer-events-none":""}`,children:[i.jsx("input",{..._(),disabled:x}),d?i.jsxs("div",{className:"relative",children:[e==="image"?i.jsx("img",{src:d,alt:"Preview",className:"max-h-48 mx-auto rounded",onError:P}):i.jsx("video",{src:d,className:"max-h-48 mx-auto rounded",controls:!0,onError:O}),i.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:i.jsxs("p",{className:"text-white",children:["تغيير ",e==="image"?"الصورة":"الفيديو"]})})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),i.jsx("div",{className:"text-sm text-gray-600",children:x?i.jsx("p",{children:"جاري رفع الملف..."}):N?i.jsx("p",{children:"أفلت الملف هنا ..."}):i.jsxs(i.Fragment,{children:[i.jsxs("p",{children:["اسحب وأفلت ",e==="image"?"الصورة":"الفيديو"," هنا، أو"]}),i.jsx("p",{className:"text-blue-600",children:"اضغط للاختيار"})]})}),i.jsxs("p",{className:"text-xs text-gray-500",children:[e==="image"?"PNG, JPG, GIF, WEBP":"MP4, WebM"," حتى ",Math.round(r/1024/1024)," ميجابايت"]})]})]}),d&&i.jsx("div",{className:"flex justify-center",children:i.jsxs("button",{onClick:S,className:"text-red-600 hover:text-red-800 text-sm",children:["إزالة ",e==="image"?"الصورة":"الفيديو"]})}),l&&i.jsx("p",{className:"text-xs text-gray-500 text-center",children:"سيتم تخزين الملف في Supabase Storage"})]})}let Hd;const uL=new Uint8Array(16);function hL(){if(!Hd&&(Hd=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Hd))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Hd(uL)}const Zt=[];for(let t=0;t<256;++t)Zt.push((t+256).toString(16).slice(1));function pL(t,e=0){return Zt[t[e+0]]+Zt[t[e+1]]+Zt[t[e+2]]+Zt[t[e+3]]+"-"+Zt[t[e+4]]+Zt[t[e+5]]+"-"+Zt[t[e+6]]+Zt[t[e+7]]+"-"+Zt[t[e+8]]+Zt[t[e+9]]+"-"+Zt[t[e+10]]+Zt[t[e+11]]+Zt[t[e+12]]+Zt[t[e+13]]+Zt[t[e+14]]+Zt[t[e+15]]}const fL=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ob={randomUUID:fL};function Vr(t,e,n){if(Ob.randomUUID&&!t)return Ob.randomUUID();t=t||{};const r=t.random||(t.rng||hL)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,pL(r)}function mL({images:t=[],onUpdate:e}){const[n,r]=j.useState(null),s=({base64:o,preview:l,file:d})=>{r(null);try{e([...t,{id:Vr(),file:o,preview:l,name:d.name,size:d.size,type:d.type,isNew:!0}])}catch(u){r("فشل في إضافة الصورة"),console.error("Error adding image:",u)}},a=o=>{e(t.filter(l=>l.id!==o))};return i.jsxs("div",{className:"space-y-4",children:[n&&i.jsx("div",{className:"text-red-500 text-sm",children:n}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:t.map(o=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:o.preview||o.url,alt:o.name||"Gallery image",className:"w-full h-32 object-cover rounded-lg",onError:l=>{l.target.onerror=null,l.target.src="https://via.placeholder.com/150?text=Image+Error"}}),i.jsx("button",{onClick:()=>a(o.id),className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]},o.id))}),i.jsx(xs,{onUpload:s,type:"image",accept:{"image/*":[".jpg",".jpeg",".png",".gif",".webp"]},maxSize:2*1024*1024}),i.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"يمكنك إضافة حتى 10 صور للمنتج. الحد الأقصى لحجم الصورة 2 ميجابايت."})]})}function gL({prices:t=[],onChange:e}){const[n]=j.useState([{id:1,name:"برونزي"},{id:2,name:"فضي"},{id:3,name:"ذهبي"},{id:4,name:"بلاتيني"}]),[r,s]=j.useState({tier_id:"",price:"",min_quantity:1}),a=()=>{if(!r.tier_id||!r.price){$.error("الرجاء إدخال المستوى والسعر");return}const u={id:Vr(),...r};e([...t,u]),s({tier_id:"",price:"",min_quantity:1})},o=u=>{e(t.filter(p=>p.id!==u))},l=(u,p,f)=>{e(t.map(x=>x.id===u?{...x,[p]:f}:x))},d=u=>{const p=n.find(f=>f.id===Number(u));switch(p==null?void 0:p.name){case"برونزي":return"bg-amber-100 text-amber-800";case"فضي":return"bg-gray-100 text-gray-800";case"ذهبي":return"bg-yellow-100 text-yellow-800";case"بلاتيني":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"أسعار الجملة"}),t.length>0?i.jsx("div",{className:"space-y-4",children:t.map(u=>i.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المستوى"}),i.jsxs("select",{value:u.tier_id,onChange:p=>l(u.id,"tier_id",Number(p.target.value)),className:`w-full border rounded-md px-3 py-1.5 ${d(u.tier_id)}`,children:[i.jsx("option",{value:"",children:"اختر المستوى"}),n.map(p=>i.jsx("option",{value:p.id,children:p.name},p.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعر (₪)"}),i.jsx("input",{type:"number",value:u.price,onChange:p=>l(u.id,"price",parseFloat(p.target.value)),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحد الأدنى للكمية"}),i.jsx("input",{type:"number",value:u.min_quantity,onChange:p=>l(u.id,"min_quantity",parseInt(p.target.value)),className:"w-full border rounded-md px-3 py-1.5",min:"1"})]})]}),i.jsx("button",{type:"button",onClick:()=>o(u.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]},u.id))}):i.jsx("p",{className:"text-gray-500 text-center py-4",children:"لا توجد أسعار جملة"})]}),i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"إضافة سعر جديد"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المستوى"}),i.jsxs("select",{value:r.tier_id,onChange:u=>s({...r,tier_id:Number(u.target.value)}),className:`w-full border rounded-md px-3 py-1.5 ${d(r.tier_id)}`,children:[i.jsx("option",{value:"",children:"اختر المستوى"}),n.map(u=>i.jsx("option",{value:u.id,children:u.name},u.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعر (₪)"}),i.jsx("input",{type:"number",value:r.price,onChange:u=>s({...r,price:parseFloat(u.target.value)}),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحد الأدنى للكمية"}),i.jsx("input",{type:"number",value:r.min_quantity,onChange:u=>s({...r,min_quantity:parseInt(u.target.value)}),className:"w-full border rounded-md px-3 py-1.5",min:"1"})]})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{type:"button",onClick:a,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"إضافة السعر"})})]})]})}function xL({variants:t=[],onChange:e}){const[n,r]=j.useState({name:"",price:0,wholesale_price:0,discount_price:0,stock:0,image:"",sku:""}),s=()=>{if(!n.name){$.error("الرجاء إدخال اسم النوع");return}const l={id:Vr(),...n};e([...t,l]),r({name:"",price:0,wholesale_price:0,discount_price:0,stock:0,image:"",sku:""})},a=l=>{e(t.filter(d=>d.id!==l))},o=(l,d,u)=>{e(t.map(p=>p.id===l?{...p,[d]:u}:p))};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"الأنواع المتوفرة"}),t.length>0?i.jsx("div",{className:"space-y-4",children:t.map(l=>i.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم النوع"}),i.jsx("input",{type:"text",value:l.name,onChange:d=>o(l.id,"name",d.target.value),className:"w-full border rounded-md px-3 py-1.5"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعر (₪)"}),i.jsx("input",{type:"number",value:l.price,onChange:d=>o(l.id,"price",parseFloat(d.target.value)),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"سعر الجملة (₪)"}),i.jsx("input",{type:"number",value:l.wholesale_price,onChange:d=>o(l.id,"wholesale_price",parseFloat(d.target.value)),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"سعر التخفيض (₪)"}),i.jsx("input",{type:"number",value:l.discount_price,onChange:d=>o(l.id,"discount_price",parseFloat(d.target.value)),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المخزون"}),i.jsx("input",{type:"number",value:l.stock,onChange:d=>o(l.id,"stock",parseInt(d.target.value)),className:"w-full border rounded-md px-3 py-1.5",min:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم المنتج (SKU)"}),i.jsx("input",{type:"text",value:l.sku,onChange:d=>o(l.id,"sku",d.target.value),className:"w-full border rounded-md px-3 py-1.5"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رابط الصورة"}),i.jsx("input",{type:"url",value:l.image,onChange:d=>o(l.id,"image",d.target.value),className:"w-full border rounded-md px-3 py-1.5",placeholder:"https://example.com/image.jpg"})]})]}),i.jsx("button",{type:"button",onClick:()=>a(l.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]},l.id))}):i.jsx("p",{className:"text-gray-500 text-center py-4",children:"لا توجد أنواع بعد"})]}),i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"إضافة نوع جديد"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم النوع"}),i.jsx("input",{type:"text",value:n.name,onChange:l=>r({...n,name:l.target.value}),className:"w-full border rounded-md px-3 py-1.5",placeholder:"مثال: أحمر كبير"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعر (₪)"}),i.jsx("input",{type:"number",value:n.price,onChange:l=>r({...n,price:parseFloat(l.target.value)}),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"سعر الجملة (₪)"}),i.jsx("input",{type:"number",value:n.wholesale_price,onChange:l=>r({...n,wholesale_price:parseFloat(l.target.value)}),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"سعر التخفيض (₪)"}),i.jsx("input",{type:"number",value:n.discount_price,onChange:l=>r({...n,discount_price:parseFloat(l.target.value)}),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المخزون"}),i.jsx("input",{type:"number",value:n.stock,onChange:l=>r({...n,stock:parseInt(l.target.value)}),className:"w-full border rounded-md px-3 py-1.5",min:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم المنتج (SKU)"}),i.jsx("input",{type:"text",value:n.sku,onChange:l=>r({...n,sku:l.target.value}),className:"w-full border rounded-md px-3 py-1.5",placeholder:"ABC123"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رابط الصورة"}),i.jsx("input",{type:"url",value:n.image,onChange:l=>r({...n,image:l.target.value}),className:"w-full border rounded-md px-3 py-1.5",placeholder:"https://example.com/image.jpg"})]})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{type:"button",onClick:s,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"إضافة النوع"})})]})]})}var pN={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var a="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(a=s(a,r(l)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var o="";for(var l in a)e.call(a,l)&&a[l]&&(o=s(o,l));return o}function s(a,o){return o?a?a+" "+o:a+o:a}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(pN);var vL=pN.exports;const Qt=oi(vL);function rr(t){"@babel/helpers - typeof";return rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rr(t)}function pe(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function hp(t){return pe(1,arguments),t instanceof Date||rr(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function be(t){pe(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||rr(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Sc(t){if(pe(1,arguments),!hp(t)&&typeof t!="number")return!1;var e=be(t);return!isNaN(Number(e))}function Oe(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function ov(t,e){pe(2,arguments);var n=be(t).getTime(),r=Oe(e);return new Date(n+r)}function fN(t,e){pe(2,arguments);var n=Oe(e);return ov(t,-n)}var yL=864e5;function bL(t){pe(1,arguments);var e=be(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),s=n-r;return Math.floor(s/yL)+1}function yo(t){pe(1,arguments);var e=1,n=be(t),r=n.getUTCDay(),s=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function mN(t){pe(1,arguments);var e=be(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=yo(r),a=new Date(0);a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0);var o=yo(a);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function _L(t){pe(1,arguments);var e=mN(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=yo(n);return r}var wL=6048e5;function gN(t){pe(1,arguments);var e=be(t),n=yo(e).getTime()-_L(e).getTime();return Math.round(n/wL)+1}var jL={};function fa(){return jL}function ia(t,e){var n,r,s,a,o,l,d,u;pe(1,arguments);var p=fa(),f=Oe((n=(r=(s=(a=e==null?void 0:e.weekStartsOn)!==null&&a!==void 0?a:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:p.weekStartsOn)!==null&&r!==void 0?r:(d=p.locale)===null||d===void 0||(u=d.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var x=be(t),g=x.getUTCDay(),v=(g<f?7:0)+g-f;return x.setUTCDate(x.getUTCDate()-v),x.setUTCHours(0,0,0,0),x}function lv(t,e){var n,r,s,a,o,l,d,u;pe(1,arguments);var p=be(t),f=p.getUTCFullYear(),x=fa(),g=Oe((n=(r=(s=(a=e==null?void 0:e.firstWeekContainsDate)!==null&&a!==void 0?a:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:x.firstWeekContainsDate)!==null&&r!==void 0?r:(d=x.locale)===null||d===void 0||(u=d.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(g>=1&&g<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var v=new Date(0);v.setUTCFullYear(f+1,0,g),v.setUTCHours(0,0,0,0);var b=ia(v,e),w=new Date(0);w.setUTCFullYear(f,0,g),w.setUTCHours(0,0,0,0);var _=ia(w,e);return p.getTime()>=b.getTime()?f+1:p.getTime()>=_.getTime()?f:f-1}function NL(t,e){var n,r,s,a,o,l,d,u;pe(1,arguments);var p=fa(),f=Oe((n=(r=(s=(a=e==null?void 0:e.firstWeekContainsDate)!==null&&a!==void 0?a:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:p.firstWeekContainsDate)!==null&&r!==void 0?r:(d=p.locale)===null||d===void 0||(u=d.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),x=lv(t,e),g=new Date(0);g.setUTCFullYear(x,0,f),g.setUTCHours(0,0,0,0);var v=ia(g,e);return v}var kL=6048e5;function xN(t,e){pe(1,arguments);var n=be(t),r=ia(n,e).getTime()-NL(n,e).getTime();return Math.round(r/kL)+1}function Ke(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var ks={y:function(e,n){var r=e.getUTCFullYear(),s=r>0?r:1-r;return Ke(n==="yy"?s%100:s,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):Ke(r+1,2)},d:function(e,n){return Ke(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return Ke(e.getUTCHours()%12||12,n.length)},H:function(e,n){return Ke(e.getUTCHours(),n.length)},m:function(e,n){return Ke(e.getUTCMinutes(),n.length)},s:function(e,n){return Ke(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,s=e.getUTCMilliseconds(),a=Math.floor(s*Math.pow(10,r-3));return Ke(a,n.length)}},Oa={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},SL={G:function(e,n,r){var s=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var s=e.getUTCFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return ks.y(e,n)},Y:function(e,n,r,s){var a=lv(e,s),o=a>0?a:1-a;if(n==="YY"){var l=o%100;return Ke(l,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):Ke(o,n.length)},R:function(e,n){var r=mN(e);return Ke(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return Ke(r,n.length)},Q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return Ke(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return Ke(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,n,r){var s=e.getUTCMonth();switch(n){case"M":case"MM":return ks.M(e,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,n,r){var s=e.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return Ke(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,n,r,s){var a=xN(e,s);return n==="wo"?r.ordinalNumber(a,{unit:"week"}):Ke(a,n.length)},I:function(e,n,r){var s=gN(e);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):Ke(s,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):ks.d(e,n)},D:function(e,n,r){var s=bL(e);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):Ke(s,n.length)},E:function(e,n,r){var s=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,n,r,s){var a=e.getUTCDay(),o=(a-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return Ke(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,n,r,s){var a=e.getUTCDay(),o=(a-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return Ke(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,n,r){var s=e.getUTCDay(),a=s===0?7:s;switch(n){case"i":return String(a);case"ii":return Ke(a,n.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,n,r){var s=e.getUTCHours(),a=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,n,r){var s=e.getUTCHours(),a;switch(s===12?a=Oa.noon:s===0?a=Oa.midnight:a=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,n,r){var s=e.getUTCHours(),a;switch(s>=17?a=Oa.evening:s>=12?a=Oa.afternoon:s>=4?a=Oa.morning:a=Oa.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var s=e.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return ks.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):ks.H(e,n)},K:function(e,n,r){var s=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):Ke(s,n.length)},k:function(e,n,r){var s=e.getUTCHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):Ke(s,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):ks.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):ks.s(e,n)},S:function(e,n){return ks.S(e,n)},X:function(e,n,r,s){var a=s._originalDate||e,o=a.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return Rb(o);case"XXXX":case"XX":return Mi(o);case"XXXXX":case"XXX":default:return Mi(o,":")}},x:function(e,n,r,s){var a=s._originalDate||e,o=a.getTimezoneOffset();switch(n){case"x":return Rb(o);case"xxxx":case"xx":return Mi(o);case"xxxxx":case"xxx":default:return Mi(o,":")}},O:function(e,n,r,s){var a=s._originalDate||e,o=a.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Lb(o,":");case"OOOO":default:return"GMT"+Mi(o,":")}},z:function(e,n,r,s){var a=s._originalDate||e,o=a.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Lb(o,":");case"zzzz":default:return"GMT"+Mi(o,":")}},t:function(e,n,r,s){var a=s._originalDate||e,o=Math.floor(a.getTime()/1e3);return Ke(o,n.length)},T:function(e,n,r,s){var a=s._originalDate||e,o=a.getTime();return Ke(o,n.length)}};function Lb(t,e){var n=t>0?"-":"+",r=Math.abs(t),s=Math.floor(r/60),a=r%60;if(a===0)return n+String(s);var o=e;return n+String(s)+o+Ke(a,2)}function Rb(t,e){if(t%60===0){var n=t>0?"-":"+";return n+Ke(Math.abs(t)/60,2)}return Mi(t,e)}function Mi(t,e){var n=e||"",r=t>0?"-":"+",s=Math.abs(t),a=Ke(Math.floor(s/60),2),o=Ke(s%60,2);return r+a+n+o}var Ab=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},vN=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},CL=function(e,n){var r=e.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return Ab(e,n);var o;switch(s){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",Ab(s,n)).replace("{{time}}",vN(a,n))},Cg={p:vN,P:CL};function hh(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}var EL=["D","DD"],TL=["YY","YYYY"];function yN(t){return EL.indexOf(t)!==-1}function bN(t){return TL.indexOf(t)!==-1}function ph(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var PL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},DL=function(e,n,r){var s,a=PL[e];return typeof a=="string"?s=a:n===1?s=a.one:s=a.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function Uf(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var ML={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},OL={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},LL={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},RL={date:Uf({formats:ML,defaultWidth:"full"}),time:Uf({formats:OL,defaultWidth:"full"}),dateTime:Uf({formats:LL,defaultWidth:"full"})},AL={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},IL=function(e,n,r,s){return AL[e]};function fl(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&t.formattingValues){var a=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):a;s=t.formattingValues[o]||t.formattingValues[a]}else{var l=t.defaultWidth,d=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[d]||t.values[l]}var u=t.argumentCallback?t.argumentCallback(e):e;return s[u]}}var FL={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},$L={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},zL={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},BL={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},UL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},HL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},WL=function(e,n){var r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},YL={ordinalNumber:WL,era:fl({values:FL,defaultWidth:"wide"}),quarter:fl({values:$L,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:fl({values:zL,defaultWidth:"wide"}),day:fl({values:BL,defaultWidth:"wide"}),dayPeriod:fl({values:UL,defaultWidth:"wide",formattingValues:HL,defaultFormattingWidth:"wide"})};function ml(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;var o=a[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(l)?qL(l,function(f){return f.test(o)}):VL(l,function(f){return f.test(o)}),u;u=t.valueCallback?t.valueCallback(d):d,u=n.valueCallback?n.valueCallback(u):u;var p=e.slice(o.length);return{value:u,rest:p}}}function VL(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function qL(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function ZL(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var s=r[0],a=e.match(t.parsePattern);if(!a)return null;var o=t.valueCallback?t.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;var l=e.slice(s.length);return{value:o,rest:l}}}var KL=/^(\d+)(th|st|nd|rd)?/i,GL=/\d+/i,QL={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},XL={any:[/^b/i,/^(a|c)/i]},JL={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},e6={any:[/1/i,/2/i,/3/i,/4/i]},t6={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},n6={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},r6={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},s6={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},i6={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},a6={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},o6={ordinalNumber:ZL({matchPattern:KL,parsePattern:GL,valueCallback:function(e){return parseInt(e,10)}}),era:ml({matchPatterns:QL,defaultMatchWidth:"wide",parsePatterns:XL,defaultParseWidth:"any"}),quarter:ml({matchPatterns:JL,defaultMatchWidth:"wide",parsePatterns:e6,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:ml({matchPatterns:t6,defaultMatchWidth:"wide",parsePatterns:n6,defaultParseWidth:"any"}),day:ml({matchPatterns:r6,defaultMatchWidth:"wide",parsePatterns:s6,defaultParseWidth:"any"}),dayPeriod:ml({matchPatterns:i6,defaultMatchWidth:"any",parsePatterns:a6,defaultParseWidth:"any"})},_N={code:"en-US",formatDistance:DL,formatLong:RL,formatRelative:IL,localize:YL,match:o6,options:{weekStartsOn:0,firstWeekContainsDate:1}},l6=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,c6=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,d6=/^'([^]*?)'?$/,u6=/''/g,h6=/[a-zA-Z]/;function Ib(t,e,n){var r,s,a,o,l,d,u,p,f,x,g,v,b,w,_,N,S,P;pe(2,arguments);var O=String(e),A=fa(),R=(r=(s=n==null?void 0:n.locale)!==null&&s!==void 0?s:A.locale)!==null&&r!==void 0?r:_N,T=Oe((a=(o=(l=(d=n==null?void 0:n.firstWeekContainsDate)!==null&&d!==void 0?d:n==null||(u=n.locale)===null||u===void 0||(p=u.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&l!==void 0?l:A.firstWeekContainsDate)!==null&&o!==void 0?o:(f=A.locale)===null||f===void 0||(x=f.options)===null||x===void 0?void 0:x.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(T>=1&&T<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var Y=Oe((g=(v=(b=(w=n==null?void 0:n.weekStartsOn)!==null&&w!==void 0?w:n==null||(_=n.locale)===null||_===void 0||(N=_.options)===null||N===void 0?void 0:N.weekStartsOn)!==null&&b!==void 0?b:A.weekStartsOn)!==null&&v!==void 0?v:(S=A.locale)===null||S===void 0||(P=S.options)===null||P===void 0?void 0:P.weekStartsOn)!==null&&g!==void 0?g:0);if(!(Y>=0&&Y<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!R.localize)throw new RangeError("locale must contain localize property");if(!R.formatLong)throw new RangeError("locale must contain formatLong property");var D=be(t);if(!Sc(D))throw new RangeError("Invalid time value");var U=hh(D),ee=fN(D,U),G={firstWeekContainsDate:T,weekStartsOn:Y,locale:R,_originalDate:D},z=O.match(c6).map(function(V){var C=V[0];if(C==="p"||C==="P"){var q=Cg[C];return q(V,R.formatLong)}return V}).join("").match(l6).map(function(V){if(V==="''")return"'";var C=V[0];if(C==="'")return p6(V);var q=SL[C];if(q)return!(n!=null&&n.useAdditionalWeekYearTokens)&&bN(V)&&ph(V,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&yN(V)&&ph(V,e,String(t)),q(ee,V,R.localize,G);if(C.match(h6))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return V}).join("");return z}function p6(t){var e=t.match(d6);return e?e[1].replace(u6,"'"):t}var f6=6e4;function Eg(t,e){pe(2,arguments);var n=Oe(e);return ov(t,n*f6)}var m6=36e5;function g6(t,e){pe(2,arguments);var n=Oe(e);return ov(t,n*m6)}function zo(t,e){pe(2,arguments);var n=be(t),r=Oe(e);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function fh(t,e){pe(2,arguments);var n=Oe(e),r=n*7;return zo(t,r)}function _r(t,e){pe(2,arguments);var n=be(t),r=Oe(e);if(isNaN(r))return new Date(NaN);if(!r)return n;var s=n.getDate(),a=new Date(n.getTime());a.setMonth(n.getMonth()+r+1,0);var o=a.getDate();return s>=o?a:(n.setFullYear(a.getFullYear(),a.getMonth(),s),n)}function wN(t,e){pe(2,arguments);var n=Oe(e),r=n*3;return _r(t,r)}function bo(t,e){pe(2,arguments);var n=Oe(e);return _r(t,n*12)}function x6(t,e){pe(2,arguments);var n=Oe(e);return zo(t,-n)}function Fb(t,e){pe(2,arguments);var n=Oe(e);return fh(t,-n)}function _o(t,e){pe(2,arguments);var n=Oe(e);return _r(t,-n)}function v6(t,e){pe(2,arguments);var n=Oe(e);return wN(t,-n)}function Cc(t,e){pe(2,arguments);var n=Oe(e);return bo(t,-n)}function $b(t){pe(1,arguments);var e=be(t),n=e.getSeconds();return n}function zr(t){pe(1,arguments);var e=be(t),n=e.getMinutes();return n}function Br(t){pe(1,arguments);var e=be(t),n=e.getHours();return n}function y6(t){pe(1,arguments);var e=be(t),n=e.getDay();return n}function zb(t){pe(1,arguments);var e=be(t),n=e.getDate();return n}function jN(t,e){var n,r,s,a,o,l,d,u;pe(1,arguments);var p=fa(),f=Oe((n=(r=(s=(a=e==null?void 0:e.weekStartsOn)!==null&&a!==void 0?a:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:p.weekStartsOn)!==null&&r!==void 0?r:(d=p.locale)===null||d===void 0||(u=d.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var x=be(t),g=x.getDay(),v=(g<f?7:0)+g-f;return x.setDate(x.getDate()-v),x.setHours(0,0,0,0),x}function mh(t){return pe(1,arguments),jN(t,{weekStartsOn:1})}function b6(t){pe(1,arguments);var e=be(t),n=e.getFullYear(),r=new Date(0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);var s=mh(r),a=new Date(0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);var o=mh(a);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function _6(t){pe(1,arguments);var e=b6(t),n=new Date(0);n.setFullYear(e,0,4),n.setHours(0,0,0,0);var r=mh(n);return r}var w6=6048e5;function j6(t){pe(1,arguments);var e=be(t),n=mh(e).getTime()-_6(e).getTime();return Math.round(n/w6)+1}function sn(t){pe(1,arguments);var e=be(t),n=e.getMonth();return n}function Ka(t){pe(1,arguments);var e=be(t),n=Math.floor(e.getMonth()/3)+1;return n}function Re(t){return pe(1,arguments),be(t).getFullYear()}function Tg(t){pe(1,arguments);var e=be(t),n=e.getTime();return n}function N6(t,e){pe(2,arguments);var n=be(t),r=Oe(e);return n.setSeconds(r),n}function ju(t,e){pe(2,arguments);var n=be(t),r=Oe(e);return n.setMinutes(r),n}function Nu(t,e){pe(2,arguments);var n=be(t),r=Oe(e);return n.setHours(r),n}function k6(t){pe(1,arguments);var e=be(t),n=e.getFullYear(),r=e.getMonth(),s=new Date(0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function un(t,e){pe(2,arguments);var n=be(t),r=Oe(e),s=n.getFullYear(),a=n.getDate(),o=new Date(0);o.setFullYear(s,r,15),o.setHours(0,0,0,0);var l=k6(o);return n.setMonth(r,Math.min(a,l)),n}function La(t,e){pe(2,arguments);var n=be(t),r=Oe(e),s=Math.floor(n.getMonth()/3)+1,a=r-s;return un(n,n.getMonth()+a*3)}function as(t,e){pe(2,arguments);var n=be(t),r=Oe(e);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(r),n)}function Bb(t){pe(1,arguments);var e;if(t&&typeof t.forEach=="function")e=t;else if(rr(t)==="object"&&t!==null)e=Array.prototype.slice.call(t);else return new Date(NaN);var n;return e.forEach(function(r){var s=be(r);(n===void 0||n>s||isNaN(s.getDate()))&&(n=s)}),n||new Date(NaN)}function Ub(t){pe(1,arguments);var e;if(t&&typeof t.forEach=="function")e=t;else if(rr(t)==="object"&&t!==null)e=Array.prototype.slice.call(t);else return new Date(NaN);var n;return e.forEach(function(r){var s=be(r);(n===void 0||n<s||isNaN(Number(s)))&&(n=s)}),n||new Date(NaN)}function Ur(t){pe(1,arguments);var e=be(t);return e.setHours(0,0,0,0),e}var S6=864e5;function gh(t,e){pe(2,arguments);var n=Ur(t),r=Ur(e),s=n.getTime()-hh(n),a=r.getTime()-hh(r);return Math.round((s-a)/S6)}function xh(t,e){pe(2,arguments);var n=be(t),r=be(e),s=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return s*12+a}function vh(t,e){pe(2,arguments);var n=be(t),r=be(e);return n.getFullYear()-r.getFullYear()}function NN(t){pe(1,arguments);var e=be(t);return e.setDate(1),e.setHours(0,0,0,0),e}function Pg(t){pe(1,arguments);var e=be(t),n=e.getMonth(),r=n-n%3;return e.setMonth(r,1),e.setHours(0,0,0,0),e}function kN(t){pe(1,arguments);var e=be(t),n=new Date(0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Dg(t){pe(1,arguments);var e=be(t);return e.setHours(23,59,59,999),e}function C6(t){pe(1,arguments);var e=be(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function E6(t){pe(1,arguments);var e=be(t),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}function T6(t,e){pe(2,arguments);var n=be(t),r=be(e);return n.getTime()===r.getTime()}function P6(t,e){pe(2,arguments);var n=Ur(t),r=Ur(e);return n.getTime()===r.getTime()}function D6(t,e){pe(2,arguments);var n=be(t),r=be(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function M6(t,e){pe(2,arguments);var n=be(t),r=be(e);return n.getFullYear()===r.getFullYear()}function O6(t,e){pe(2,arguments);var n=Pg(t),r=Pg(e);return n.getTime()===r.getTime()}function ii(t,e){pe(2,arguments);var n=be(t),r=be(e);return n.getTime()>r.getTime()}function Hs(t,e){pe(2,arguments);var n=be(t),r=be(e);return n.getTime()<r.getTime()}function Ec(t,e){pe(2,arguments);var n=be(t).getTime(),r=be(e.start).getTime(),s=be(e.end).getTime();if(!(r<=s))throw new RangeError("Invalid interval");return n>=r&&n<=s}function Hb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function L6(t,e){if(t){if(typeof t=="string")return Hb(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hb(t,e):void 0}}function Wb(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=L6(t))||e){n&&(t=n);var r=0,s=function(){};return{s,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return o=u.done,u},e:function(u){l=!0,a=u},f:function(){try{o||n.return==null||n.return()}finally{if(l)throw a}}}}function R6(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function xe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mg(t,e){return Mg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Mg(t,e)}function He(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mg(t,e)}function yh(t){return yh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yh(t)}function SN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SN=function(){return!!t})()}function A6(t,e){if(e&&(rr(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xe(t)}function We(t){var e=SN();return function(){var n,r=yh(t);if(e){var s=yh(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return A6(this,n)}}function Fe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I6(t,e){if(rr(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CN(t){var e=I6(t,"string");return rr(e)=="symbol"?e:e+""}function F6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,CN(r.key),r)}}function $e(t,e,n){return e&&F6(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function fe(t,e,n){return(e=CN(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var $6=10,EN=function(){function t(){Fe(this,t),fe(this,"priority",void 0),fe(this,"subPriority",0)}return $e(t,[{key:"validate",value:function(n,r){return!0}}]),t}(),z6=function(t){He(n,t);var e=We(n);function n(r,s,a,o,l){var d;return Fe(this,n),d=e.call(this),d.value=r,d.validateValue=s,d.setValue=a,d.priority=o,l&&(d.subPriority=l),d}return $e(n,[{key:"validate",value:function(s,a){return this.validateValue(s,this.value,a)}},{key:"set",value:function(s,a,o){return this.setValue(s,a,this.value,o)}}]),n}(EN),B6=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",$6),fe(xe(r),"subPriority",-1),r}return $e(n,[{key:"set",value:function(s,a){if(a.timestampIsSet)return s;var o=new Date(0);return o.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),o.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),o}}]),n}(EN),Ze=function(){function t(){Fe(this,t),fe(this,"incompatibleTokens",void 0),fe(this,"priority",void 0),fe(this,"subPriority",void 0)}return $e(t,[{key:"run",value:function(n,r,s,a){var o=this.parse(n,r,s,a);return o?{setter:new z6(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}},{key:"validate",value:function(n,r,s){return!0}}]),t}(),U6=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",140),fe(xe(r),"incompatibleTokens",["R","u","t","T"]),r}return $e(n,[{key:"parse",value:function(s,a,o){switch(a){case"G":case"GG":case"GGG":return o.era(s,{width:"abbreviated"})||o.era(s,{width:"narrow"});case"GGGGG":return o.era(s,{width:"narrow"});case"GGGG":default:return o.era(s,{width:"wide"})||o.era(s,{width:"abbreviated"})||o.era(s,{width:"narrow"})}}},{key:"set",value:function(s,a,o){return a.era=o,s.setUTCFullYear(o,0,1),s.setUTCHours(0,0,0,0),s}}]),n}(Ze),cv=6e4,dv=36e5,H6=1e3,kt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Ar={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function St(t,e){return t&&{value:e(t.value),rest:t.rest}}function xt(t,e){var n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function Ir(t,e){var n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};var r=n[1]==="+"?1:-1,s=n[2]?parseInt(n[2],10):0,a=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(s*dv+a*cv+o*H6),rest:e.slice(n[0].length)}}function TN(t){return xt(kt.anyDigitsSigned,t)}function _t(t,e){switch(t){case 1:return xt(kt.singleDigit,e);case 2:return xt(kt.twoDigits,e);case 3:return xt(kt.threeDigits,e);case 4:return xt(kt.fourDigits,e);default:return xt(new RegExp("^\\d{1,"+t+"}"),e)}}function bh(t,e){switch(t){case 1:return xt(kt.singleDigitSigned,e);case 2:return xt(kt.twoDigitsSigned,e);case 3:return xt(kt.threeDigitsSigned,e);case 4:return xt(kt.fourDigitsSigned,e);default:return xt(new RegExp("^-?\\d{1,"+t+"}"),e)}}function uv(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function PN(t,e){var n=e>0,r=n?e:1-e,s;if(r<=50)s=t||100;else{var a=r+50,o=Math.floor(a/100)*100,l=t>=a%100;s=t+o-(l?100:0)}return n?s:1-s}function DN(t){return t%400===0||t%4===0&&t%100!==0}var W6=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",130),fe(xe(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return $e(n,[{key:"parse",value:function(s,a,o){var l=function(u){return{year:u,isTwoDigitYear:a==="yy"}};switch(a){case"y":return St(_t(4,s),l);case"yo":return St(o.ordinalNumber(s,{unit:"year"}),l);default:return St(_t(a.length,s),l)}}},{key:"validate",value:function(s,a){return a.isTwoDigitYear||a.year>0}},{key:"set",value:function(s,a,o){var l=s.getUTCFullYear();if(o.isTwoDigitYear){var d=PN(o.year,l);return s.setUTCFullYear(d,0,1),s.setUTCHours(0,0,0,0),s}var u=!("era"in a)||a.era===1?o.year:1-o.year;return s.setUTCFullYear(u,0,1),s.setUTCHours(0,0,0,0),s}}]),n}(Ze),Y6=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",130),fe(xe(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return $e(n,[{key:"parse",value:function(s,a,o){var l=function(u){return{year:u,isTwoDigitYear:a==="YY"}};switch(a){case"Y":return St(_t(4,s),l);case"Yo":return St(o.ordinalNumber(s,{unit:"year"}),l);default:return St(_t(a.length,s),l)}}},{key:"validate",value:function(s,a){return a.isTwoDigitYear||a.year>0}},{key:"set",value:function(s,a,o,l){var d=lv(s,l);if(o.isTwoDigitYear){var u=PN(o.year,d);return s.setUTCFullYear(u,0,l.firstWeekContainsDate),s.setUTCHours(0,0,0,0),ia(s,l)}var p=!("era"in a)||a.era===1?o.year:1-o.year;return s.setUTCFullYear(p,0,l.firstWeekContainsDate),s.setUTCHours(0,0,0,0),ia(s,l)}}]),n}(Ze),V6=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",130),fe(xe(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return $e(n,[{key:"parse",value:function(s,a){return bh(a==="R"?4:a.length,s)}},{key:"set",value:function(s,a,o){var l=new Date(0);return l.setUTCFullYear(o,0,4),l.setUTCHours(0,0,0,0),yo(l)}}]),n}(Ze),q6=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",130),fe(xe(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return $e(n,[{key:"parse",value:function(s,a){return bh(a==="u"?4:a.length,s)}},{key:"set",value:function(s,a,o){return s.setUTCFullYear(o,0,1),s.setUTCHours(0,0,0,0),s}}]),n}(Ze),Z6=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",120),fe(xe(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return $e(n,[{key:"parse",value:function(s,a,o){switch(a){case"Q":case"QQ":return _t(a.length,s);case"Qo":return o.ordinalNumber(s,{unit:"quarter"});case"QQQ":return o.quarter(s,{width:"abbreviated",context:"formatting"})||o.quarter(s,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(s,{width:"wide",context:"formatting"})||o.quarter(s,{width:"abbreviated",context:"formatting"})||o.quarter(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,a){return a>=1&&a<=4}},{key:"set",value:function(s,a,o){return s.setUTCMonth((o-1)*3,1),s.setUTCHours(0,0,0,0),s}}]),n}(Ze),K6=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",120),fe(xe(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return $e(n,[{key:"parse",value:function(s,a,o){switch(a){case"q":case"qq":return _t(a.length,s);case"qo":return o.ordinalNumber(s,{unit:"quarter"});case"qqq":return o.quarter(s,{width:"abbreviated",context:"standalone"})||o.quarter(s,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(s,{width:"wide",context:"standalone"})||o.quarter(s,{width:"abbreviated",context:"standalone"})||o.quarter(s,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(s,a){return a>=1&&a<=4}},{key:"set",value:function(s,a,o){return s.setUTCMonth((o-1)*3,1),s.setUTCHours(0,0,0,0),s}}]),n}(Ze),G6=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),fe(xe(r),"priority",110),r}return $e(n,[{key:"parse",value:function(s,a,o){var l=function(u){return u-1};switch(a){case"M":return St(xt(kt.month,s),l);case"MM":return St(_t(2,s),l);case"Mo":return St(o.ordinalNumber(s,{unit:"month"}),l);case"MMM":return o.month(s,{width:"abbreviated",context:"formatting"})||o.month(s,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(s,{width:"wide",context:"formatting"})||o.month(s,{width:"abbreviated",context:"formatting"})||o.month(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,a){return a>=0&&a<=11}},{key:"set",value:function(s,a,o){return s.setUTCMonth(o,1),s.setUTCHours(0,0,0,0),s}}]),n}(Ze),Q6=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",110),fe(xe(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return $e(n,[{key:"parse",value:function(s,a,o){var l=function(u){return u-1};switch(a){case"L":return St(xt(kt.month,s),l);case"LL":return St(_t(2,s),l);case"Lo":return St(o.ordinalNumber(s,{unit:"month"}),l);case"LLL":return o.month(s,{width:"abbreviated",context:"standalone"})||o.month(s,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(s,{width:"wide",context:"standalone"})||o.month(s,{width:"abbreviated",context:"standalone"})||o.month(s,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(s,a){return a>=0&&a<=11}},{key:"set",value:function(s,a,o){return s.setUTCMonth(o,1),s.setUTCHours(0,0,0,0),s}}]),n}(Ze);function X6(t,e,n){pe(2,arguments);var r=be(t),s=Oe(e),a=xN(r,n)-s;return r.setUTCDate(r.getUTCDate()-a*7),r}var J6=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",100),fe(xe(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return $e(n,[{key:"parse",value:function(s,a,o){switch(a){case"w":return xt(kt.week,s);case"wo":return o.ordinalNumber(s,{unit:"week"});default:return _t(a.length,s)}}},{key:"validate",value:function(s,a){return a>=1&&a<=53}},{key:"set",value:function(s,a,o,l){return ia(X6(s,o,l),l)}}]),n}(Ze);function eR(t,e){pe(2,arguments);var n=be(t),r=Oe(e),s=gN(n)-r;return n.setUTCDate(n.getUTCDate()-s*7),n}var tR=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",100),fe(xe(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return $e(n,[{key:"parse",value:function(s,a,o){switch(a){case"I":return xt(kt.week,s);case"Io":return o.ordinalNumber(s,{unit:"week"});default:return _t(a.length,s)}}},{key:"validate",value:function(s,a){return a>=1&&a<=53}},{key:"set",value:function(s,a,o){return yo(eR(s,o))}}]),n}(Ze),nR=[31,28,31,30,31,30,31,31,30,31,30,31],rR=[31,29,31,30,31,30,31,31,30,31,30,31],sR=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",90),fe(xe(r),"subPriority",1),fe(xe(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return $e(n,[{key:"parse",value:function(s,a,o){switch(a){case"d":return xt(kt.date,s);case"do":return o.ordinalNumber(s,{unit:"date"});default:return _t(a.length,s)}}},{key:"validate",value:function(s,a){var o=s.getUTCFullYear(),l=DN(o),d=s.getUTCMonth();return l?a>=1&&a<=rR[d]:a>=1&&a<=nR[d]}},{key:"set",value:function(s,a,o){return s.setUTCDate(o),s.setUTCHours(0,0,0,0),s}}]),n}(Ze),iR=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",90),fe(xe(r),"subpriority",1),fe(xe(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return $e(n,[{key:"parse",value:function(s,a,o){switch(a){case"D":case"DD":return xt(kt.dayOfYear,s);case"Do":return o.ordinalNumber(s,{unit:"date"});default:return _t(a.length,s)}}},{key:"validate",value:function(s,a){var o=s.getUTCFullYear(),l=DN(o);return l?a>=1&&a<=366:a>=1&&a<=365}},{key:"set",value:function(s,a,o){return s.setUTCMonth(0,o),s.setUTCHours(0,0,0,0),s}}]),n}(Ze);function hv(t,e,n){var r,s,a,o,l,d,u,p;pe(2,arguments);var f=fa(),x=Oe((r=(s=(a=(o=n==null?void 0:n.weekStartsOn)!==null&&o!==void 0?o:n==null||(l=n.locale)===null||l===void 0||(d=l.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&a!==void 0?a:f.weekStartsOn)!==null&&s!==void 0?s:(u=f.locale)===null||u===void 0||(p=u.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&r!==void 0?r:0);if(!(x>=0&&x<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=be(t),v=Oe(e),b=g.getUTCDay(),w=v%7,_=(w+7)%7,N=(_<x?7:0)+v-b;return g.setUTCDate(g.getUTCDate()+N),g}var aR=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",90),fe(xe(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return $e(n,[{key:"parse",value:function(s,a,o){switch(a){case"E":case"EE":case"EEE":return o.day(s,{width:"abbreviated",context:"formatting"})||o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(s,{width:"wide",context:"formatting"})||o.day(s,{width:"abbreviated",context:"formatting"})||o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,a){return a>=0&&a<=6}},{key:"set",value:function(s,a,o,l){return s=hv(s,o,l),s.setUTCHours(0,0,0,0),s}}]),n}(Ze),oR=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",90),fe(xe(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return $e(n,[{key:"parse",value:function(s,a,o,l){var d=function(p){var f=Math.floor((p-1)/7)*7;return(p+l.weekStartsOn+6)%7+f};switch(a){case"e":case"ee":return St(_t(a.length,s),d);case"eo":return St(o.ordinalNumber(s,{unit:"day"}),d);case"eee":return o.day(s,{width:"abbreviated",context:"formatting"})||o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"});case"eeeee":return o.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(s,{width:"wide",context:"formatting"})||o.day(s,{width:"abbreviated",context:"formatting"})||o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,a){return a>=0&&a<=6}},{key:"set",value:function(s,a,o,l){return s=hv(s,o,l),s.setUTCHours(0,0,0,0),s}}]),n}(Ze),lR=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",90),fe(xe(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return $e(n,[{key:"parse",value:function(s,a,o,l){var d=function(p){var f=Math.floor((p-1)/7)*7;return(p+l.weekStartsOn+6)%7+f};switch(a){case"c":case"cc":return St(_t(a.length,s),d);case"co":return St(o.ordinalNumber(s,{unit:"day"}),d);case"ccc":return o.day(s,{width:"abbreviated",context:"standalone"})||o.day(s,{width:"short",context:"standalone"})||o.day(s,{width:"narrow",context:"standalone"});case"ccccc":return o.day(s,{width:"narrow",context:"standalone"});case"cccccc":return o.day(s,{width:"short",context:"standalone"})||o.day(s,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(s,{width:"wide",context:"standalone"})||o.day(s,{width:"abbreviated",context:"standalone"})||o.day(s,{width:"short",context:"standalone"})||o.day(s,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(s,a){return a>=0&&a<=6}},{key:"set",value:function(s,a,o,l){return s=hv(s,o,l),s.setUTCHours(0,0,0,0),s}}]),n}(Ze);function cR(t,e){pe(2,arguments);var n=Oe(e);n%7===0&&(n=n-7);var r=1,s=be(t),a=s.getUTCDay(),o=n%7,l=(o+7)%7,d=(l<r?7:0)+n-a;return s.setUTCDate(s.getUTCDate()+d),s}var dR=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",90),fe(xe(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return $e(n,[{key:"parse",value:function(s,a,o){var l=function(u){return u===0?7:u};switch(a){case"i":case"ii":return _t(a.length,s);case"io":return o.ordinalNumber(s,{unit:"day"});case"iii":return St(o.day(s,{width:"abbreviated",context:"formatting"})||o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"}),l);case"iiiii":return St(o.day(s,{width:"narrow",context:"formatting"}),l);case"iiiiii":return St(o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"}),l);case"iiii":default:return St(o.day(s,{width:"wide",context:"formatting"})||o.day(s,{width:"abbreviated",context:"formatting"})||o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"}),l)}}},{key:"validate",value:function(s,a){return a>=1&&a<=7}},{key:"set",value:function(s,a,o){return s=cR(s,o),s.setUTCHours(0,0,0,0),s}}]),n}(Ze),uR=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",80),fe(xe(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return $e(n,[{key:"parse",value:function(s,a,o){switch(a){case"a":case"aa":case"aaa":return o.dayPeriod(s,{width:"abbreviated",context:"formatting"})||o.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(s,{width:"wide",context:"formatting"})||o.dayPeriod(s,{width:"abbreviated",context:"formatting"})||o.dayPeriod(s,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(s,a,o){return s.setUTCHours(uv(o),0,0,0),s}}]),n}(Ze),hR=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",80),fe(xe(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return $e(n,[{key:"parse",value:function(s,a,o){switch(a){case"b":case"bb":case"bbb":return o.dayPeriod(s,{width:"abbreviated",context:"formatting"})||o.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(s,{width:"wide",context:"formatting"})||o.dayPeriod(s,{width:"abbreviated",context:"formatting"})||o.dayPeriod(s,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(s,a,o){return s.setUTCHours(uv(o),0,0,0),s}}]),n}(Ze),pR=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",80),fe(xe(r),"incompatibleTokens",["a","b","t","T"]),r}return $e(n,[{key:"parse",value:function(s,a,o){switch(a){case"B":case"BB":case"BBB":return o.dayPeriod(s,{width:"abbreviated",context:"formatting"})||o.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(s,{width:"wide",context:"formatting"})||o.dayPeriod(s,{width:"abbreviated",context:"formatting"})||o.dayPeriod(s,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(s,a,o){return s.setUTCHours(uv(o),0,0,0),s}}]),n}(Ze),fR=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",70),fe(xe(r),"incompatibleTokens",["H","K","k","t","T"]),r}return $e(n,[{key:"parse",value:function(s,a,o){switch(a){case"h":return xt(kt.hour12h,s);case"ho":return o.ordinalNumber(s,{unit:"hour"});default:return _t(a.length,s)}}},{key:"validate",value:function(s,a){return a>=1&&a<=12}},{key:"set",value:function(s,a,o){var l=s.getUTCHours()>=12;return l&&o<12?s.setUTCHours(o+12,0,0,0):!l&&o===12?s.setUTCHours(0,0,0,0):s.setUTCHours(o,0,0,0),s}}]),n}(Ze),mR=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",70),fe(xe(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return $e(n,[{key:"parse",value:function(s,a,o){switch(a){case"H":return xt(kt.hour23h,s);case"Ho":return o.ordinalNumber(s,{unit:"hour"});default:return _t(a.length,s)}}},{key:"validate",value:function(s,a){return a>=0&&a<=23}},{key:"set",value:function(s,a,o){return s.setUTCHours(o,0,0,0),s}}]),n}(Ze),gR=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",70),fe(xe(r),"incompatibleTokens",["h","H","k","t","T"]),r}return $e(n,[{key:"parse",value:function(s,a,o){switch(a){case"K":return xt(kt.hour11h,s);case"Ko":return o.ordinalNumber(s,{unit:"hour"});default:return _t(a.length,s)}}},{key:"validate",value:function(s,a){return a>=0&&a<=11}},{key:"set",value:function(s,a,o){var l=s.getUTCHours()>=12;return l&&o<12?s.setUTCHours(o+12,0,0,0):s.setUTCHours(o,0,0,0),s}}]),n}(Ze),xR=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",70),fe(xe(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return $e(n,[{key:"parse",value:function(s,a,o){switch(a){case"k":return xt(kt.hour24h,s);case"ko":return o.ordinalNumber(s,{unit:"hour"});default:return _t(a.length,s)}}},{key:"validate",value:function(s,a){return a>=1&&a<=24}},{key:"set",value:function(s,a,o){var l=o<=24?o%24:o;return s.setUTCHours(l,0,0,0),s}}]),n}(Ze),vR=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",60),fe(xe(r),"incompatibleTokens",["t","T"]),r}return $e(n,[{key:"parse",value:function(s,a,o){switch(a){case"m":return xt(kt.minute,s);case"mo":return o.ordinalNumber(s,{unit:"minute"});default:return _t(a.length,s)}}},{key:"validate",value:function(s,a){return a>=0&&a<=59}},{key:"set",value:function(s,a,o){return s.setUTCMinutes(o,0,0),s}}]),n}(Ze),yR=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",50),fe(xe(r),"incompatibleTokens",["t","T"]),r}return $e(n,[{key:"parse",value:function(s,a,o){switch(a){case"s":return xt(kt.second,s);case"so":return o.ordinalNumber(s,{unit:"second"});default:return _t(a.length,s)}}},{key:"validate",value:function(s,a){return a>=0&&a<=59}},{key:"set",value:function(s,a,o){return s.setUTCSeconds(o,0),s}}]),n}(Ze),bR=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",30),fe(xe(r),"incompatibleTokens",["t","T"]),r}return $e(n,[{key:"parse",value:function(s,a){var o=function(d){return Math.floor(d*Math.pow(10,-a.length+3))};return St(_t(a.length,s),o)}},{key:"set",value:function(s,a,o){return s.setUTCMilliseconds(o),s}}]),n}(Ze),_R=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",10),fe(xe(r),"incompatibleTokens",["t","T","x"]),r}return $e(n,[{key:"parse",value:function(s,a){switch(a){case"X":return Ir(Ar.basicOptionalMinutes,s);case"XX":return Ir(Ar.basic,s);case"XXXX":return Ir(Ar.basicOptionalSeconds,s);case"XXXXX":return Ir(Ar.extendedOptionalSeconds,s);case"XXX":default:return Ir(Ar.extended,s)}}},{key:"set",value:function(s,a,o){return a.timestampIsSet?s:new Date(s.getTime()-o)}}]),n}(Ze),wR=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",10),fe(xe(r),"incompatibleTokens",["t","T","X"]),r}return $e(n,[{key:"parse",value:function(s,a){switch(a){case"x":return Ir(Ar.basicOptionalMinutes,s);case"xx":return Ir(Ar.basic,s);case"xxxx":return Ir(Ar.basicOptionalSeconds,s);case"xxxxx":return Ir(Ar.extendedOptionalSeconds,s);case"xxx":default:return Ir(Ar.extended,s)}}},{key:"set",value:function(s,a,o){return a.timestampIsSet?s:new Date(s.getTime()-o)}}]),n}(Ze),jR=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",40),fe(xe(r),"incompatibleTokens","*"),r}return $e(n,[{key:"parse",value:function(s){return TN(s)}},{key:"set",value:function(s,a,o){return[new Date(o*1e3),{timestampIsSet:!0}]}}]),n}(Ze),NR=function(t){He(n,t);var e=We(n);function n(){var r;Fe(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),fe(xe(r),"priority",20),fe(xe(r),"incompatibleTokens","*"),r}return $e(n,[{key:"parse",value:function(s){return TN(s)}},{key:"set",value:function(s,a,o){return[new Date(o),{timestampIsSet:!0}]}}]),n}(Ze),kR={G:new U6,y:new W6,Y:new Y6,R:new V6,u:new q6,Q:new Z6,q:new K6,M:new G6,L:new Q6,w:new J6,I:new tR,d:new sR,D:new iR,E:new aR,e:new oR,c:new lR,i:new dR,a:new uR,b:new hR,B:new pR,h:new fR,H:new mR,K:new gR,k:new xR,m:new vR,s:new yR,S:new bR,X:new _R,x:new wR,t:new jR,T:new NR},SR=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,CR=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ER=/^'([^]*?)'?$/,TR=/''/g,PR=/\S/,DR=/[a-zA-Z]/;function Hf(t,e,n,r){var s,a,o,l,d,u,p,f,x,g,v,b,w,_,N,S,P,O;pe(3,arguments);var A=String(t),R=String(e),T=fa(),Y=(s=(a=r==null?void 0:r.locale)!==null&&a!==void 0?a:T.locale)!==null&&s!==void 0?s:_N;if(!Y.match)throw new RangeError("locale must contain match property");var D=Oe((o=(l=(d=(u=r==null?void 0:r.firstWeekContainsDate)!==null&&u!==void 0?u:r==null||(p=r.locale)===null||p===void 0||(f=p.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&d!==void 0?d:T.firstWeekContainsDate)!==null&&l!==void 0?l:(x=T.locale)===null||x===void 0||(g=x.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(D>=1&&D<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var U=Oe((v=(b=(w=(_=r==null?void 0:r.weekStartsOn)!==null&&_!==void 0?_:r==null||(N=r.locale)===null||N===void 0||(S=N.options)===null||S===void 0?void 0:S.weekStartsOn)!==null&&w!==void 0?w:T.weekStartsOn)!==null&&b!==void 0?b:(P=T.locale)===null||P===void 0||(O=P.options)===null||O===void 0?void 0:O.weekStartsOn)!==null&&v!==void 0?v:0);if(!(U>=0&&U<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(R==="")return A===""?be(n):new Date(NaN);var ee={firstWeekContainsDate:D,weekStartsOn:U,locale:Y},G=[new B6],z=R.match(CR).map(function(ve){var W=ve[0];if(W in Cg){var ae=Cg[W];return ae(ve,Y.formatLong)}return ve}).join("").match(SR),V=[],C=Wb(z),q;try{var I=function(){var W=q.value;!(r!=null&&r.useAdditionalWeekYearTokens)&&bN(W)&&ph(W,R,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&yN(W)&&ph(W,R,t);var ae=W[0],he=kR[ae];if(he){var ke=he.incompatibleTokens;if(Array.isArray(ke)){var Ce=V.find(function(Se){return ke.includes(Se.token)||Se.token===ae});if(Ce)throw new RangeError("The format string mustn't contain `".concat(Ce.fullToken,"` and `").concat(W,"` at the same time"))}else if(he.incompatibleTokens==="*"&&V.length>0)throw new RangeError("The format string mustn't contain `".concat(W,"` and any other token at the same time"));V.push({token:ae,fullToken:W});var ce=he.run(A,W,Y.match,ee);if(!ce)return{v:new Date(NaN)};G.push(ce.setter),A=ce.rest}else{if(ae.match(DR))throw new RangeError("Format string contains an unescaped latin alphabet character `"+ae+"`");if(W==="''"?W="'":ae==="'"&&(W=MR(W)),A.indexOf(W)===0)A=A.slice(W.length);else return{v:new Date(NaN)}}};for(C.s();!(q=C.n()).done;){var X=I();if(rr(X)==="object")return X.v}}catch(ve){C.e(ve)}finally{C.f()}if(A.length>0&&PR.test(A))return new Date(NaN);var E=G.map(function(ve){return ve.priority}).sort(function(ve,W){return W-ve}).filter(function(ve,W,ae){return ae.indexOf(ve)===W}).map(function(ve){return G.filter(function(W){return W.priority===ve}).sort(function(W,ae){return ae.subPriority-W.subPriority})}).map(function(ve){return ve[0]}),K=be(n);if(isNaN(K.getTime()))return new Date(NaN);var re=fN(K,hh(K)),Q={},se=Wb(E),oe;try{for(se.s();!(oe=se.n()).done;){var ie=oe.value;if(!ie.validate(re,ee))return new Date(NaN);var ge=ie.set(re,Q,ee);Array.isArray(ge)?(re=ge[0],R6(Q,ge[1])):re=ge}}catch(ve){se.e(ve)}finally{se.f()}return re}function MR(t){return t.match(ER)[1].replace(TR,"'")}function OR(t,e){var n;pe(1,arguments);var r=Oe((n=void 0)!==null&&n!==void 0?n:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var s=IR(t),a;if(s.date){var o=FR(s.date,r);a=$R(o.restDateString,o.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);var l=a.getTime(),d=0,u;if(s.time&&(d=zR(s.time),isNaN(d)))return new Date(NaN);if(s.timezone){if(u=BR(s.timezone),isNaN(u))return new Date(NaN)}else{var p=new Date(l+d),f=new Date(0);return f.setFullYear(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate()),f.setHours(p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds(),p.getUTCMilliseconds()),f}return new Date(l+d+u)}var Wd={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},LR=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,RR=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,AR=/^([+-])(\d{2})(?::?(\d{2}))?$/;function IR(t){var e={},n=t.split(Wd.dateTimeDelimiter),r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],Wd.timeZoneDelimiter.test(e.date)&&(e.date=t.split(Wd.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){var s=Wd.timezone.exec(r);s?(e.time=r.replace(s[1],""),e.timezone=s[1]):e.time=r}return e}function FR(t,e){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};var s=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:a===null?s:a*100,restDateString:t.slice((r[1]||r[2]).length)}}function $R(t,e){if(e===null)return new Date(NaN);var n=t.match(LR);if(!n)return new Date(NaN);var r=!!n[4],s=gl(n[1]),a=gl(n[2])-1,o=gl(n[3]),l=gl(n[4]),d=gl(n[5])-1;if(r)return VR(e,l,d)?UR(e,l,d):new Date(NaN);var u=new Date(0);return!WR(e,a,o)||!YR(e,s)?new Date(NaN):(u.setUTCFullYear(e,a,Math.max(s,o)),u)}function gl(t){return t?parseInt(t):1}function zR(t){var e=t.match(RR);if(!e)return NaN;var n=Wf(e[1]),r=Wf(e[2]),s=Wf(e[3]);return qR(n,r,s)?n*dv+r*cv+s*1e3:NaN}function Wf(t){return t&&parseFloat(t.replace(",","."))||0}function BR(t){if(t==="Z")return 0;var e=t.match(AR);if(!e)return 0;var n=e[1]==="+"?-1:1,r=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return ZR(r,s)?n*(r*dv+s*cv):NaN}function UR(t,e,n){var r=new Date(0);r.setUTCFullYear(t,0,4);var s=r.getUTCDay()||7,a=(e-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+a),r}var HR=[31,null,31,30,31,30,31,31,30,31,30,31];function MN(t){return t%400===0||t%4===0&&t%100!==0}function WR(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(HR[e]||(MN(t)?29:28))}function YR(t,e){return e>=1&&e<=(MN(t)?366:365)}function VR(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function qR(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function ZR(t,e){return e>=0&&e<=59}function KR(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Og(t,e)}function Og(t,e){return Og=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},Og(t,e)}function GR(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Yb(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function QR(t,e,n){return t===e?!0:t.correspondingElement?t.correspondingElement.classList.contains(n):t.classList.contains(n)}function XR(t,e,n){if(t===e)return!0;for(;t.parentNode||t.host;){if(t.parentNode&&QR(t,e,n))return!0;t=t.parentNode||t.host}return t}function JR(t){return document.documentElement.clientWidth<=t.clientX||document.documentElement.clientHeight<=t.clientY}var eA=function(){if(!(typeof window>"u"||typeof window.addEventListener!="function")){var e=!1,n=Object.defineProperty({},"passive",{get:function(){e=!0}}),r=function(){};return window.addEventListener("testPassiveEventSupport",r,n),window.removeEventListener("testPassiveEventSupport",r,n),e}};function tA(t){return t===void 0&&(t=0),function(){return++t}}var nA=tA(),Lg,Yd={},Yf={},rA=["touchstart","touchmove"],sA="ignore-react-onclickoutside";function Vb(t,e){var n={},r=rA.indexOf(e)!==-1;return r&&Lg&&(n.passive=!t.props.preventDefault),n}function pp(t,e){var n,r,s=t.displayName||t.name||"Component";return r=n=function(a){KR(o,a);function o(d){var u;return u=a.call(this,d)||this,u.__outsideClickHandler=function(p){if(typeof u.__clickOutsideHandlerProp=="function"){u.__clickOutsideHandlerProp(p);return}var f=u.getInstance();if(typeof f.props.handleClickOutside=="function"){f.props.handleClickOutside(p);return}if(typeof f.handleClickOutside=="function"){f.handleClickOutside(p);return}throw new Error("WrappedComponent: "+s+" lacks a handleClickOutside(event) function for processing outside click events.")},u.__getComponentNode=function(){var p=u.getInstance();return typeof p.setClickOutsideRef=="function"?p.setClickOutsideRef():Hc.findDOMNode(p)},u.enableOnClickOutside=function(){if(!(typeof document>"u"||Yf[u._uid])){typeof Lg>"u"&&(Lg=eA()),Yf[u._uid]=!0;var p=u.props.eventTypes;p.forEach||(p=[p]),Yd[u._uid]=function(f){if(u.componentNode!==null&&!(u.initTimeStamp>f.timeStamp)&&(u.props.preventDefault&&f.preventDefault(),u.props.stopPropagation&&f.stopPropagation(),!(u.props.excludeScrollbar&&JR(f)))){var x=f.composed&&f.composedPath&&f.composedPath().shift()||f.target;XR(x,u.componentNode,u.props.outsideClickIgnoreClass)===document&&u.__outsideClickHandler(f)}},p.forEach(function(f){document.addEventListener(f,Yd[u._uid],Vb(Yb(u),f))})}},u.disableOnClickOutside=function(){delete Yf[u._uid];var p=Yd[u._uid];if(p&&typeof document<"u"){var f=u.props.eventTypes;f.forEach||(f=[f]),f.forEach(function(x){return document.removeEventListener(x,p,Vb(Yb(u),x))}),delete Yd[u._uid]}},u.getRef=function(p){return u.instanceRef=p},u._uid=nA(),u.initTimeStamp=performance.now(),u}var l=o.prototype;return l.getInstance=function(){if(t.prototype&&!t.prototype.isReactComponent)return this;var u=this.instanceRef;return u.getInstance?u.getInstance():u},l.componentDidMount=function(){typeof document>"u"||!document.createElement||(this.getInstance(),this.componentNode=this.__getComponentNode(),!this.props.disableOnClickOutside&&this.enableOnClickOutside())},l.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},l.componentWillUnmount=function(){this.disableOnClickOutside()},l.render=function(){var u=this.props;u.excludeScrollbar;var p=GR(u,["excludeScrollbar"]);return t.prototype&&t.prototype.isReactComponent?p.ref=this.getRef:p.wrappedRef=this.getRef,p.disableOnClickOutside=this.disableOnClickOutside,p.enableOnClickOutside=this.enableOnClickOutside,j.createElement(t,p)},o}(j.Component),n.displayName="OnClickOutside("+s+")",n.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:!1,outsideClickIgnoreClass:sA,preventDefault:!1,stopPropagation:!1},n.getClass=function(){return t.getClass?t.getClass():t},r}var ON=j.createContext(),LN=j.createContext();function iA(t){var e=t.children,n=j.useState(null),r=n[0],s=n[1],a=j.useRef(!1);j.useEffect(function(){return function(){a.current=!0}},[]);var o=j.useCallback(function(l){a.current||s(l)},[]);return j.createElement(ON.Provider,{value:r},j.createElement(LN.Provider,{value:o},e))}var RN=function(e){return Array.isArray(e)?e[0]:e},AN=function(e){if(typeof e=="function"){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return e.apply(void 0,r)}},Rg=function(e,n){if(typeof e=="function")return AN(e,n);e!=null&&(e.current=n)},qb=function(e){return e.reduce(function(n,r){var s=r[0],a=r[1];return n[s]=a,n},{})},Zb=typeof window<"u"&&window.document&&window.document.createElement?j.useLayoutEffect:j.useEffect,Cn="top",sr="bottom",ir="right",En="left",pv="auto",Kc=[Cn,sr,ir,En],wo="start",Tc="end",aA="clippingParents",IN="viewport",xl="popper",oA="reference",Kb=Kc.reduce(function(t,e){return t.concat([e+"-"+wo,e+"-"+Tc])},[]),FN=[].concat(Kc,[pv]).reduce(function(t,e){return t.concat([e,e+"-"+wo,e+"-"+Tc])},[]),lA="beforeRead",cA="read",dA="afterRead",uA="beforeMain",hA="main",pA="afterMain",fA="beforeWrite",mA="write",gA="afterWrite",xA=[lA,cA,dA,uA,hA,pA,fA,mA,gA];function qr(t){return t?(t.nodeName||"").toLowerCase():null}function An(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function aa(t){var e=An(t).Element;return t instanceof e||t instanceof Element}function Jn(t){var e=An(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function fv(t){if(typeof ShadowRoot>"u")return!1;var e=An(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function vA(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},s=e.attributes[n]||{},a=e.elements[n];!Jn(a)||!qr(a)||(Object.assign(a.style,r),Object.keys(s).forEach(function(o){var l=s[o];l===!1?a.removeAttribute(o):a.setAttribute(o,l===!0?"":l)}))})}function yA(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],a=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),l=o.reduce(function(d,u){return d[u]="",d},{});!Jn(s)||!qr(s)||(Object.assign(s.style,l),Object.keys(a).forEach(function(d){s.removeAttribute(d)}))})}}const bA={name:"applyStyles",enabled:!0,phase:"write",fn:vA,effect:yA,requires:["computeStyles"]};function Hr(t){return t.split("-")[0]}var Zi=Math.max,_h=Math.min,jo=Math.round;function Ag(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function $N(){return!/^((?!chrome|android).)*safari/i.test(Ag())}function No(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),s=1,a=1;e&&Jn(t)&&(s=t.offsetWidth>0&&jo(r.width)/t.offsetWidth||1,a=t.offsetHeight>0&&jo(r.height)/t.offsetHeight||1);var o=aa(t)?An(t):window,l=o.visualViewport,d=!$N()&&n,u=(r.left+(d&&l?l.offsetLeft:0))/s,p=(r.top+(d&&l?l.offsetTop:0))/a,f=r.width/s,x=r.height/a;return{width:f,height:x,top:p,right:u+f,bottom:p+x,left:u,x:u,y:p}}function mv(t){var e=No(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function zN(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&fv(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function vs(t){return An(t).getComputedStyle(t)}function _A(t){return["table","td","th"].indexOf(qr(t))>=0}function mi(t){return((aa(t)?t.ownerDocument:t.document)||window.document).documentElement}function fp(t){return qr(t)==="html"?t:t.assignedSlot||t.parentNode||(fv(t)?t.host:null)||mi(t)}function Gb(t){return!Jn(t)||vs(t).position==="fixed"?null:t.offsetParent}function wA(t){var e=/firefox/i.test(Ag()),n=/Trident/i.test(Ag());if(n&&Jn(t)){var r=vs(t);if(r.position==="fixed")return null}var s=fp(t);for(fv(s)&&(s=s.host);Jn(s)&&["html","body"].indexOf(qr(s))<0;){var a=vs(s);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return s;s=s.parentNode}return null}function Gc(t){for(var e=An(t),n=Gb(t);n&&_A(n)&&vs(n).position==="static";)n=Gb(n);return n&&(qr(n)==="html"||qr(n)==="body"&&vs(n).position==="static")?e:n||wA(t)||e}function gv(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Kl(t,e,n){return Zi(t,_h(e,n))}function jA(t,e,n){var r=Kl(t,e,n);return r>n?n:r}function BN(){return{top:0,right:0,bottom:0,left:0}}function UN(t){return Object.assign({},BN(),t)}function HN(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var NA=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,UN(typeof e!="number"?e:HN(e,Kc))};function kA(t){var e,n=t.state,r=t.name,s=t.options,a=n.elements.arrow,o=n.modifiersData.popperOffsets,l=Hr(n.placement),d=gv(l),u=[En,ir].indexOf(l)>=0,p=u?"height":"width";if(!(!a||!o)){var f=NA(s.padding,n),x=mv(a),g=d==="y"?Cn:En,v=d==="y"?sr:ir,b=n.rects.reference[p]+n.rects.reference[d]-o[d]-n.rects.popper[p],w=o[d]-n.rects.reference[d],_=Gc(a),N=_?d==="y"?_.clientHeight||0:_.clientWidth||0:0,S=b/2-w/2,P=f[g],O=N-x[p]-f[v],A=N/2-x[p]/2+S,R=Kl(P,A,O),T=d;n.modifiersData[r]=(e={},e[T]=R,e.centerOffset=R-A,e)}}function SA(t){var e=t.state,n=t.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||zN(e.elements.popper,s)&&(e.elements.arrow=s))}const CA={name:"arrow",enabled:!0,phase:"main",fn:kA,effect:SA,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ko(t){return t.split("-")[1]}var EA={top:"auto",right:"auto",bottom:"auto",left:"auto"};function TA(t,e){var n=t.x,r=t.y,s=e.devicePixelRatio||1;return{x:jo(n*s)/s||0,y:jo(r*s)/s||0}}function Qb(t){var e,n=t.popper,r=t.popperRect,s=t.placement,a=t.variation,o=t.offsets,l=t.position,d=t.gpuAcceleration,u=t.adaptive,p=t.roundOffsets,f=t.isFixed,x=o.x,g=x===void 0?0:x,v=o.y,b=v===void 0?0:v,w=typeof p=="function"?p({x:g,y:b}):{x:g,y:b};g=w.x,b=w.y;var _=o.hasOwnProperty("x"),N=o.hasOwnProperty("y"),S=En,P=Cn,O=window;if(u){var A=Gc(n),R="clientHeight",T="clientWidth";if(A===An(n)&&(A=mi(n),vs(A).position!=="static"&&l==="absolute"&&(R="scrollHeight",T="scrollWidth")),A=A,s===Cn||(s===En||s===ir)&&a===Tc){P=sr;var Y=f&&A===O&&O.visualViewport?O.visualViewport.height:A[R];b-=Y-r.height,b*=d?1:-1}if(s===En||(s===Cn||s===sr)&&a===Tc){S=ir;var D=f&&A===O&&O.visualViewport?O.visualViewport.width:A[T];g-=D-r.width,g*=d?1:-1}}var U=Object.assign({position:l},u&&EA),ee=p===!0?TA({x:g,y:b},An(n)):{x:g,y:b};if(g=ee.x,b=ee.y,d){var G;return Object.assign({},U,(G={},G[P]=N?"0":"",G[S]=_?"0":"",G.transform=(O.devicePixelRatio||1)<=1?"translate("+g+"px, "+b+"px)":"translate3d("+g+"px, "+b+"px, 0)",G))}return Object.assign({},U,(e={},e[P]=N?b+"px":"",e[S]=_?g+"px":"",e.transform="",e))}function PA(t){var e=t.state,n=t.options,r=n.gpuAcceleration,s=r===void 0?!0:r,a=n.adaptive,o=a===void 0?!0:a,l=n.roundOffsets,d=l===void 0?!0:l,u={placement:Hr(e.placement),variation:ko(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Qb(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:d})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Qb(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const DA={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:PA,data:{}};var Vd={passive:!0};function MA(t){var e=t.state,n=t.instance,r=t.options,s=r.scroll,a=s===void 0?!0:s,o=r.resize,l=o===void 0?!0:o,d=An(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&u.forEach(function(p){p.addEventListener("scroll",n.update,Vd)}),l&&d.addEventListener("resize",n.update,Vd),function(){a&&u.forEach(function(p){p.removeEventListener("scroll",n.update,Vd)}),l&&d.removeEventListener("resize",n.update,Vd)}}const OA={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:MA,data:{}};var LA={left:"right",right:"left",bottom:"top",top:"bottom"};function ku(t){return t.replace(/left|right|bottom|top/g,function(e){return LA[e]})}var RA={start:"end",end:"start"};function Xb(t){return t.replace(/start|end/g,function(e){return RA[e]})}function xv(t){var e=An(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function vv(t){return No(mi(t)).left+xv(t).scrollLeft}function AA(t,e){var n=An(t),r=mi(t),s=n.visualViewport,a=r.clientWidth,o=r.clientHeight,l=0,d=0;if(s){a=s.width,o=s.height;var u=$N();(u||!u&&e==="fixed")&&(l=s.offsetLeft,d=s.offsetTop)}return{width:a,height:o,x:l+vv(t),y:d}}function IA(t){var e,n=mi(t),r=xv(t),s=(e=t.ownerDocument)==null?void 0:e.body,a=Zi(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=Zi(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),l=-r.scrollLeft+vv(t),d=-r.scrollTop;return vs(s||n).direction==="rtl"&&(l+=Zi(n.clientWidth,s?s.clientWidth:0)-a),{width:a,height:o,x:l,y:d}}function yv(t){var e=vs(t),n=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function WN(t){return["html","body","#document"].indexOf(qr(t))>=0?t.ownerDocument.body:Jn(t)&&yv(t)?t:WN(fp(t))}function Gl(t,e){var n;e===void 0&&(e=[]);var r=WN(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),a=An(r),o=s?[a].concat(a.visualViewport||[],yv(r)?r:[]):r,l=e.concat(o);return s?l:l.concat(Gl(fp(o)))}function Ig(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function FA(t,e){var n=No(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Jb(t,e,n){return e===IN?Ig(AA(t,n)):aa(e)?FA(e,n):Ig(IA(mi(t)))}function $A(t){var e=Gl(fp(t)),n=["absolute","fixed"].indexOf(vs(t).position)>=0,r=n&&Jn(t)?Gc(t):t;return aa(r)?e.filter(function(s){return aa(s)&&zN(s,r)&&qr(s)!=="body"}):[]}function zA(t,e,n,r){var s=e==="clippingParents"?$A(t):[].concat(e),a=[].concat(s,[n]),o=a[0],l=a.reduce(function(d,u){var p=Jb(t,u,r);return d.top=Zi(p.top,d.top),d.right=_h(p.right,d.right),d.bottom=_h(p.bottom,d.bottom),d.left=Zi(p.left,d.left),d},Jb(t,o,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function YN(t){var e=t.reference,n=t.element,r=t.placement,s=r?Hr(r):null,a=r?ko(r):null,o=e.x+e.width/2-n.width/2,l=e.y+e.height/2-n.height/2,d;switch(s){case Cn:d={x:o,y:e.y-n.height};break;case sr:d={x:o,y:e.y+e.height};break;case ir:d={x:e.x+e.width,y:l};break;case En:d={x:e.x-n.width,y:l};break;default:d={x:e.x,y:e.y}}var u=s?gv(s):null;if(u!=null){var p=u==="y"?"height":"width";switch(a){case wo:d[u]=d[u]-(e[p]/2-n[p]/2);break;case Tc:d[u]=d[u]+(e[p]/2-n[p]/2);break}}return d}function Pc(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=r===void 0?t.placement:r,a=n.strategy,o=a===void 0?t.strategy:a,l=n.boundary,d=l===void 0?aA:l,u=n.rootBoundary,p=u===void 0?IN:u,f=n.elementContext,x=f===void 0?xl:f,g=n.altBoundary,v=g===void 0?!1:g,b=n.padding,w=b===void 0?0:b,_=UN(typeof w!="number"?w:HN(w,Kc)),N=x===xl?oA:xl,S=t.rects.popper,P=t.elements[v?N:x],O=zA(aa(P)?P:P.contextElement||mi(t.elements.popper),d,p,o),A=No(t.elements.reference),R=YN({reference:A,element:S,placement:s}),T=Ig(Object.assign({},S,R)),Y=x===xl?T:A,D={top:O.top-Y.top+_.top,bottom:Y.bottom-O.bottom+_.bottom,left:O.left-Y.left+_.left,right:Y.right-O.right+_.right},U=t.modifiersData.offset;if(x===xl&&U){var ee=U[s];Object.keys(D).forEach(function(G){var z=[ir,sr].indexOf(G)>=0?1:-1,V=[Cn,sr].indexOf(G)>=0?"y":"x";D[G]+=ee[V]*z})}return D}function BA(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=n.boundary,a=n.rootBoundary,o=n.padding,l=n.flipVariations,d=n.allowedAutoPlacements,u=d===void 0?FN:d,p=ko(r),f=p?l?Kb:Kb.filter(function(v){return ko(v)===p}):Kc,x=f.filter(function(v){return u.indexOf(v)>=0});x.length===0&&(x=f);var g=x.reduce(function(v,b){return v[b]=Pc(t,{placement:b,boundary:s,rootBoundary:a,padding:o})[Hr(b)],v},{});return Object.keys(g).sort(function(v,b){return g[v]-g[b]})}function UA(t){if(Hr(t)===pv)return[];var e=ku(t);return[Xb(t),e,Xb(e)]}function HA(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var s=n.mainAxis,a=s===void 0?!0:s,o=n.altAxis,l=o===void 0?!0:o,d=n.fallbackPlacements,u=n.padding,p=n.boundary,f=n.rootBoundary,x=n.altBoundary,g=n.flipVariations,v=g===void 0?!0:g,b=n.allowedAutoPlacements,w=e.options.placement,_=Hr(w),N=_===w,S=d||(N||!v?[ku(w)]:UA(w)),P=[w].concat(S).reduce(function(se,oe){return se.concat(Hr(oe)===pv?BA(e,{placement:oe,boundary:p,rootBoundary:f,padding:u,flipVariations:v,allowedAutoPlacements:b}):oe)},[]),O=e.rects.reference,A=e.rects.popper,R=new Map,T=!0,Y=P[0],D=0;D<P.length;D++){var U=P[D],ee=Hr(U),G=ko(U)===wo,z=[Cn,sr].indexOf(ee)>=0,V=z?"width":"height",C=Pc(e,{placement:U,boundary:p,rootBoundary:f,altBoundary:x,padding:u}),q=z?G?ir:En:G?sr:Cn;O[V]>A[V]&&(q=ku(q));var I=ku(q),X=[];if(a&&X.push(C[ee]<=0),l&&X.push(C[q]<=0,C[I]<=0),X.every(function(se){return se})){Y=U,T=!1;break}R.set(U,X)}if(T)for(var E=v?3:1,K=function(oe){var ie=P.find(function(ge){var ve=R.get(ge);if(ve)return ve.slice(0,oe).every(function(W){return W})});if(ie)return Y=ie,"break"},re=E;re>0;re--){var Q=K(re);if(Q==="break")break}e.placement!==Y&&(e.modifiersData[r]._skip=!0,e.placement=Y,e.reset=!0)}}const WA={name:"flip",enabled:!0,phase:"main",fn:HA,requiresIfExists:["offset"],data:{_skip:!1}};function e_(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function t_(t){return[Cn,ir,sr,En].some(function(e){return t[e]>=0})}function YA(t){var e=t.state,n=t.name,r=e.rects.reference,s=e.rects.popper,a=e.modifiersData.preventOverflow,o=Pc(e,{elementContext:"reference"}),l=Pc(e,{altBoundary:!0}),d=e_(o,r),u=e_(l,s,a),p=t_(d),f=t_(u);e.modifiersData[n]={referenceClippingOffsets:d,popperEscapeOffsets:u,isReferenceHidden:p,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":f})}const VA={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:YA};function qA(t,e,n){var r=Hr(t),s=[En,Cn].indexOf(r)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=a[0],l=a[1];return o=o||0,l=(l||0)*s,[En,ir].indexOf(r)>=0?{x:l,y:o}:{x:o,y:l}}function ZA(t){var e=t.state,n=t.options,r=t.name,s=n.offset,a=s===void 0?[0,0]:s,o=FN.reduce(function(p,f){return p[f]=qA(f,e.rects,a),p},{}),l=o[e.placement],d=l.x,u=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=d,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=o}const KA={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:ZA};function GA(t){var e=t.state,n=t.name;e.modifiersData[n]=YN({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const QA={name:"popperOffsets",enabled:!0,phase:"read",fn:GA,data:{}};function XA(t){return t==="x"?"y":"x"}function JA(t){var e=t.state,n=t.options,r=t.name,s=n.mainAxis,a=s===void 0?!0:s,o=n.altAxis,l=o===void 0?!1:o,d=n.boundary,u=n.rootBoundary,p=n.altBoundary,f=n.padding,x=n.tether,g=x===void 0?!0:x,v=n.tetherOffset,b=v===void 0?0:v,w=Pc(e,{boundary:d,rootBoundary:u,padding:f,altBoundary:p}),_=Hr(e.placement),N=ko(e.placement),S=!N,P=gv(_),O=XA(P),A=e.modifiersData.popperOffsets,R=e.rects.reference,T=e.rects.popper,Y=typeof b=="function"?b(Object.assign({},e.rects,{placement:e.placement})):b,D=typeof Y=="number"?{mainAxis:Y,altAxis:Y}:Object.assign({mainAxis:0,altAxis:0},Y),U=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,ee={x:0,y:0};if(A){if(a){var G,z=P==="y"?Cn:En,V=P==="y"?sr:ir,C=P==="y"?"height":"width",q=A[P],I=q+w[z],X=q-w[V],E=g?-T[C]/2:0,K=N===wo?R[C]:T[C],re=N===wo?-T[C]:-R[C],Q=e.elements.arrow,se=g&&Q?mv(Q):{width:0,height:0},oe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:BN(),ie=oe[z],ge=oe[V],ve=Kl(0,R[C],se[C]),W=S?R[C]/2-E-ve-ie-D.mainAxis:K-ve-ie-D.mainAxis,ae=S?-R[C]/2+E+ve+ge+D.mainAxis:re+ve+ge+D.mainAxis,he=e.elements.arrow&&Gc(e.elements.arrow),ke=he?P==="y"?he.clientTop||0:he.clientLeft||0:0,Ce=(G=U==null?void 0:U[P])!=null?G:0,ce=q+W-Ce-ke,Se=q+ae-Ce,Ve=Kl(g?_h(I,ce):I,q,g?Zi(X,Se):X);A[P]=Ve,ee[P]=Ve-q}if(l){var Xe,Vt=P==="x"?Cn:En,Jt=P==="x"?sr:ir,wt=A[O],Tn=O==="y"?"height":"width",gi=wt+w[Vt],xi=wt-w[Jt],ue=[Cn,En].indexOf(_)!==-1,je=(Xe=U==null?void 0:U[O])!=null?Xe:0,Je=ue?gi:wt-R[Tn]-T[Tn]-je+D.altAxis,dt=ue?wt+R[Tn]+T[Tn]-je-D.altAxis:xi,Mt=g&&ue?jA(Je,wt,dt):Kl(g?Je:gi,wt,g?dt:xi);A[O]=Mt,ee[O]=Mt-wt}e.modifiersData[r]=ee}}const eI={name:"preventOverflow",enabled:!0,phase:"main",fn:JA,requiresIfExists:["offset"]};function tI(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function nI(t){return t===An(t)||!Jn(t)?xv(t):tI(t)}function rI(t){var e=t.getBoundingClientRect(),n=jo(e.width)/t.offsetWidth||1,r=jo(e.height)/t.offsetHeight||1;return n!==1||r!==1}function sI(t,e,n){n===void 0&&(n=!1);var r=Jn(e),s=Jn(e)&&rI(e),a=mi(e),o=No(t,s,n),l={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(r||!r&&!n)&&((qr(e)!=="body"||yv(a))&&(l=nI(e)),Jn(e)?(d=No(e,!0),d.x+=e.clientLeft,d.y+=e.clientTop):a&&(d.x=vv(a))),{x:o.left+l.scrollLeft-d.x,y:o.top+l.scrollTop-d.y,width:o.width,height:o.height}}function iI(t){var e=new Map,n=new Set,r=[];t.forEach(function(a){e.set(a.name,a)});function s(a){n.add(a.name);var o=[].concat(a.requires||[],a.requiresIfExists||[]);o.forEach(function(l){if(!n.has(l)){var d=e.get(l);d&&s(d)}}),r.push(a)}return t.forEach(function(a){n.has(a.name)||s(a)}),r}function aI(t){var e=iI(t);return xA.reduce(function(n,r){return n.concat(e.filter(function(s){return s.phase===r}))},[])}function oI(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function lI(t){var e=t.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var n_={placement:"bottom",modifiers:[],strategy:"absolute"};function r_(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function cI(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,s=e.defaultOptions,a=s===void 0?n_:s;return function(l,d,u){u===void 0&&(u=a);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},n_,a),modifiersData:{},elements:{reference:l,popper:d},attributes:{},styles:{}},f=[],x=!1,g={state:p,setOptions:function(_){var N=typeof _=="function"?_(p.options):_;b(),p.options=Object.assign({},a,p.options,N),p.scrollParents={reference:aa(l)?Gl(l):l.contextElement?Gl(l.contextElement):[],popper:Gl(d)};var S=aI(lI([].concat(r,p.options.modifiers)));return p.orderedModifiers=S.filter(function(P){return P.enabled}),v(),g.update()},forceUpdate:function(){if(!x){var _=p.elements,N=_.reference,S=_.popper;if(r_(N,S)){p.rects={reference:sI(N,Gc(S),p.options.strategy==="fixed"),popper:mv(S)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(D){return p.modifiersData[D.name]=Object.assign({},D.data)});for(var P=0;P<p.orderedModifiers.length;P++){if(p.reset===!0){p.reset=!1,P=-1;continue}var O=p.orderedModifiers[P],A=O.fn,R=O.options,T=R===void 0?{}:R,Y=O.name;typeof A=="function"&&(p=A({state:p,options:T,name:Y,instance:g})||p)}}}},update:oI(function(){return new Promise(function(w){g.forceUpdate(),w(p)})}),destroy:function(){b(),x=!0}};if(!r_(l,d))return g;g.setOptions(u).then(function(w){!x&&u.onFirstUpdate&&u.onFirstUpdate(w)});function v(){p.orderedModifiers.forEach(function(w){var _=w.name,N=w.options,S=N===void 0?{}:N,P=w.effect;if(typeof P=="function"){var O=P({state:p,name:_,instance:g,options:S}),A=function(){};f.push(O||A)}})}function b(){f.forEach(function(w){return w()}),f=[]}return g}}var dI=[OA,QA,DA,bA,KA,WA,eI,CA,VA],uI=cI({defaultModifiers:dI}),hI=typeof Element<"u",pI=typeof Map=="function",fI=typeof Set=="function",mI=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Su(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Su(t[r],e[r]))return!1;return!0}var a;if(pI&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(a=t.entries();!(r=a.next()).done;)if(!e.has(r.value[0]))return!1;for(a=t.entries();!(r=a.next()).done;)if(!Su(r.value[1],e.get(r.value[0])))return!1;return!0}if(fI&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(a=t.entries();!(r=a.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(mI&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;if(hI&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((s[r]==="_owner"||s[r]==="__v"||s[r]==="__o")&&t.$$typeof)&&!Su(t[s[r]],e[s[r]]))return!1;return!0}return t!==t&&e!==e}var gI=function(e,n){try{return Su(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const xI=oi(gI);var vI=[],yI=function(e,n,r){r===void 0&&(r={});var s=j.useRef(null),a={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||vI},o=j.useState({styles:{popper:{position:a.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),l=o[0],d=o[1],u=j.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(g){var v=g.state,b=Object.keys(v.elements);Hc.flushSync(function(){d({styles:qb(b.map(function(w){return[w,v.styles[w]||{}]})),attributes:qb(b.map(function(w){return[w,v.attributes[w]]}))})})},requires:["computeStyles"]}},[]),p=j.useMemo(function(){var x={onFirstUpdate:a.onFirstUpdate,placement:a.placement,strategy:a.strategy,modifiers:[].concat(a.modifiers,[u,{name:"applyStyles",enabled:!1}])};return xI(s.current,x)?s.current||x:(s.current=x,x)},[a.onFirstUpdate,a.placement,a.strategy,a.modifiers,u]),f=j.useRef();return Zb(function(){f.current&&f.current.setOptions(p)},[p]),Zb(function(){if(!(e==null||n==null)){var x=r.createPopper||uI,g=x(e,n,p);return f.current=g,function(){g.destroy(),f.current=null}}},[e,n,r.createPopper]),{state:f.current?f.current.state:null,styles:l.styles,attributes:l.attributes,update:f.current?f.current.update:null,forceUpdate:f.current?f.current.forceUpdate:null}},bI=function(){},_I=function(){return Promise.resolve(null)},wI=[];function jI(t){var e=t.placement,n=e===void 0?"bottom":e,r=t.strategy,s=r===void 0?"absolute":r,a=t.modifiers,o=a===void 0?wI:a,l=t.referenceElement,d=t.onFirstUpdate,u=t.innerRef,p=t.children,f=j.useContext(ON),x=j.useState(null),g=x[0],v=x[1],b=j.useState(null),w=b[0],_=b[1];j.useEffect(function(){Rg(u,g)},[u,g]);var N=j.useMemo(function(){return{placement:n,strategy:s,onFirstUpdate:d,modifiers:[].concat(o,[{name:"arrow",enabled:w!=null,options:{element:w}}])}},[n,s,d,o,w]),S=yI(l||f,g,N),P=S.state,O=S.styles,A=S.forceUpdate,R=S.update,T=j.useMemo(function(){return{ref:v,style:O.popper,placement:P?P.placement:n,hasPopperEscaped:P&&P.modifiersData.hide?P.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:P&&P.modifiersData.hide?P.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:O.arrow,ref:_},forceUpdate:A||bI,update:R||_I}},[v,_,n,P,O,R,A]);return RN(p)(T)}var NI=function(){},kI=NI;const SI=oi(kI);function CI(t){var e=t.children,n=t.innerRef,r=j.useContext(LN),s=j.useCallback(function(a){Rg(n,a),AN(r,a)},[n,r]);return j.useEffect(function(){return function(){return Rg(n,null)}},[]),j.useEffect(function(){SI(!!r,"`Reference` should not be used outside of a `Manager` component.")},[r]),RN(e)({ref:s})}function EI(t,e){if(pe(2,arguments),rr(e)!=="object"||e===null)throw new RangeError("values parameter must be an object");var n=be(t);return isNaN(n.getTime())?new Date(NaN):(e.year!=null&&n.setFullYear(e.year),e.month!=null&&(n=un(n,e.month)),e.date!=null&&n.setDate(Oe(e.date)),e.hours!=null&&n.setHours(Oe(e.hours)),e.minutes!=null&&n.setMinutes(Oe(e.minutes)),e.seconds!=null&&n.setSeconds(Oe(e.seconds)),e.milliseconds!=null&&n.setMilliseconds(Oe(e.milliseconds)),n)}function s_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function wh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s_(Object(n),!0).forEach(function(r){F(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fg(t){return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fg(t)}function Ut(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,VN(r.key),r)}}function Ht(t,e,n){return e&&i_(t.prototype,e),n&&i_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function F(t,e,n){return(e=VN(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function So(){return So=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},So.apply(this,arguments)}function Wt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$g(t,e)}function jh(t){return jh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},jh(t)}function $g(t,e){return $g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},$g(t,e)}function B(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yt(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=jh(t);if(e){var s=jh(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return function(a,o){if(o&&(typeof o=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B(a)}(this,n)}}function Dc(t){return function(e){if(Array.isArray(e))return Vf(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(e){if(typeof e=="string")return Vf(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vf(e,n)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Vf(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function VN(t){var e=function(n,r){if(typeof n!="object"||n===null)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var a=s.call(n,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}(t,"string");return typeof e=="symbol"?e:String(e)}var a_=function(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},o_=function(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},TI={p:o_,P:function(t,e){var n,r=t.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return a_(t,e);switch(s){case"P":n=e.dateTime({width:"short"});break;case"PP":n=e.dateTime({width:"medium"});break;case"PPP":n=e.dateTime({width:"long"});break;default:n=e.dateTime({width:"full"})}return n.replace("{{date}}",a_(s,e)).replace("{{time}}",o_(a,e))}},Ql=12,PI=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function tt(t){var e=t?typeof t=="string"||t instanceof String?OR(t):be(t):new Date;return Os(e)?e:null}function Os(t,e){return e=e||new Date("1/1/1000"),Sc(t)&&!Hs(t,e)}function ht(t,e,n){if(n==="en")return Ib(t,e,{awareOfUnicodeTokens:!0});var r=Gi(n);return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),!r&&Ki()&&Gi(Ki())&&(r=Gi(Ki())),Ib(t,e,{locale:r||null,awareOfUnicodeTokens:!0})}function Tr(t,e){var n=e.dateFormat,r=e.locale;return t&&ht(t,Array.isArray(n)?n[0]:n,r)||""}function l_(t,e){var n=e.hour,r=n===void 0?0:n,s=e.minute,a=s===void 0?0:s,o=e.second;return Nu(ju(N6(t,o===void 0?0:o),a),r)}function Wr(t,e,n){var r=Gi(e||Ki());return jN(t,{locale:r,weekStartsOn:n})}function ti(t){return NN(t)}function Pl(t){return kN(t)}function c_(t){return Pg(t)}function d_(){return Ur(tt())}function Ws(t,e){return t&&e?M6(t,e):!t&&!e}function gr(t,e){return t&&e?D6(t,e):!t&&!e}function Nh(t,e){return t&&e?O6(t,e):!t&&!e}function st(t,e){return t&&e?P6(t,e):!t&&!e}function Ui(t,e){return t&&e?T6(t,e):!t&&!e}function Cu(t,e,n){var r,s=Ur(e),a=Dg(n);try{r=Ec(t,{start:s,end:a})}catch{r=!1}return r}function Ki(){return(typeof window<"u"?window:globalThis).__localeId__}function Gi(t){if(typeof t=="string"){var e=typeof window<"u"?window:globalThis;return e.__localeData__?e.__localeData__[t]:null}return t}function bv(t,e){return ht(un(tt(),t),"LLLL",e)}function qN(t,e){return ht(un(tt(),t),"LLL",e)}function mp(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.maxDate,s=e.excludeDates,a=e.excludeDateIntervals,o=e.includeDates,l=e.includeDateIntervals,d=e.filterDate;return gp(t,{minDate:n,maxDate:r})||s&&s.some(function(u){return st(t,u)})||a&&a.some(function(u){var p=u.start,f=u.end;return Ec(t,{start:p,end:f})})||o&&!o.some(function(u){return st(t,u)})||l&&!l.some(function(u){var p=u.start,f=u.end;return Ec(t,{start:p,end:f})})||d&&!d(tt(t))||!1}function _v(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.excludeDates,r=e.excludeDateIntervals;return r&&r.length>0?r.some(function(s){var a=s.start,o=s.end;return Ec(t,{start:a,end:o})}):n&&n.some(function(s){return st(t,s)})||!1}function ZN(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.maxDate,s=e.excludeDates,a=e.includeDates,o=e.filterDate;return gp(t,{minDate:NN(n),maxDate:C6(r)})||s&&s.some(function(l){return gr(t,l)})||a&&!a.some(function(l){return gr(t,l)})||o&&!o(tt(t))||!1}function qf(t,e,n,r){var s=Re(t),a=sn(t),o=Re(e),l=sn(e),d=Re(r);return s===o&&s===d?a<=n&&n<=l:s<o?d===s&&a<=n||d===o&&l>=n||d<o&&d>s:void 0}function DI(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.maxDate,s=e.excludeDates,a=e.includeDates,o=e.filterDate;return gp(t,{minDate:n,maxDate:r})||s&&s.some(function(l){return Nh(t,l)})||a&&!a.some(function(l){return Nh(t,l)})||o&&!o(tt(t))||!1}function Zf(t,e,n){if(!Sc(e)||!Sc(n))return!1;var r=Re(e),s=Re(n);return r<=t&&s>=t}function KN(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.maxDate,s=e.excludeDates,a=e.includeDates,o=e.filterDate,l=new Date(t,0,1);return gp(l,{minDate:kN(n),maxDate:E6(r)})||s&&s.some(function(d){return Ws(l,d)})||a&&!a.some(function(d){return Ws(l,d)})||o&&!o(tt(l))||!1}function Kf(t,e,n,r){var s=Re(t),a=Ka(t),o=Re(e),l=Ka(e),d=Re(r);return s===o&&s===d?a<=n&&n<=l:s<o?d===s&&a<=n||d===o&&l>=n||d<o&&d>s:void 0}function gp(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.maxDate;return n&&gh(t,n)<0||r&&gh(t,r)>0}function u_(t,e){return e.some(function(n){return Br(n)===Br(t)&&zr(n)===zr(t)})}function h_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.excludeTimes,r=e.includeTimes,s=e.filterTime;return n&&u_(t,n)||r&&!u_(t,r)||s&&!s(t)||!1}function p_(t,e){var n=e.minTime,r=e.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var s,a=tt(),o=Nu(ju(a,zr(t)),Br(t)),l=Nu(ju(a,zr(n)),Br(n)),d=Nu(ju(a,zr(r)),Br(r));try{s=!Ec(o,{start:l,end:d})}catch{s=!1}return s}function f_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.includeDates,s=_o(t,1);return n&&xh(n,s)>0||r&&r.every(function(a){return xh(a,s)>0})||!1}function m_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.maxDate,r=e.includeDates,s=_r(t,1);return n&&xh(s,n)>0||r&&r.every(function(a){return xh(s,a)>0})||!1}function g_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.includeDates,s=Cc(t,1);return n&&vh(n,s)>0||r&&r.every(function(a){return vh(a,s)>0})||!1}function x_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.maxDate,r=e.includeDates,s=bo(t,1);return n&&vh(s,n)>0||r&&r.every(function(a){return vh(s,a)>0})||!1}function GN(t){var e=t.minDate,n=t.includeDates;if(n&&e){var r=n.filter(function(s){return gh(s,e)>=0});return Bb(r)}return n?Bb(n):e}function QN(t){var e=t.maxDate,n=t.includeDates;if(n&&e){var r=n.filter(function(s){return gh(s,e)<=0});return Ub(r)}return n?Ub(n):e}function v_(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"react-datepicker__day--highlighted",n=new Map,r=0,s=t.length;r<s;r++){var a=t[r];if(hp(a)){var o=ht(a,"MM.dd.yyyy"),l=n.get(o)||[];l.includes(e)||(l.push(e),n.set(o,l))}else if(Fg(a)==="object"){var d=Object.keys(a),u=d[0],p=a[d[0]];if(typeof u=="string"&&p.constructor===Array)for(var f=0,x=p.length;f<x;f++){var g=ht(p[f],"MM.dd.yyyy"),v=n.get(g)||[];v.includes(u)||(v.push(u),n.set(g,v))}}}return n}function MI(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"react-datepicker__day--holidays",n=new Map;return t.forEach(function(r){var s=r.date,a=r.holidayName;if(hp(s)){var o=ht(s,"MM.dd.yyyy"),l=n.get(o)||{};if(!("className"in l)||l.className!==e||(d=l.holidayNames,u=[a],d.length!==u.length||!d.every(function(f,x){return f===u[x]}))){var d,u;l.className=e;var p=l.holidayNames;l.holidayNames=p?[].concat(Dc(p),[a]):[a],n.set(o,l)}}}),n}function OI(t,e,n,r,s){for(var a=s.length,o=[],l=0;l<a;l++){var d=Eg(g6(t,Br(s[l])),zr(s[l])),u=Eg(t,(n+1)*r);ii(d,e)&&Hs(d,u)&&o.push(s[l])}return o}function y_(t){return t<10?"0".concat(t):"".concat(t)}function Ga(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ql,n=Math.ceil(Re(t)/e)*e;return{startPeriod:n-(e-1),endPeriod:n}}function b_(t){var e=t.getSeconds(),n=t.getMilliseconds();return be(t.getTime()-1e3*e-n)}function LI(t,e,n,r){for(var s=[],a=0;a<2*e+1;a++){var o=t+e-a,l=!0;n&&(l=Re(n)<=o),r&&l&&(l=Re(r)>=o),l&&s.push(o)}return s}var RI=pp(function(t){Wt(n,Z.Component);var e=Yt(n);function n(r){var s;Ut(this,n),F(B(s=e.call(this,r)),"renderOptions",function(){var d=s.props.year,u=s.state.yearsList.map(function(x){return Z.createElement("div",{className:d===x?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:x,onClick:s.onChange.bind(B(s),x),"aria-selected":d===x?"true":void 0},d===x?Z.createElement("span",{className:"react-datepicker__year-option--selected"},"✓"):"",x)}),p=s.props.minDate?Re(s.props.minDate):null,f=s.props.maxDate?Re(s.props.maxDate):null;return f&&s.state.yearsList.find(function(x){return x===f})||u.unshift(Z.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:s.incrementYears},Z.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),p&&s.state.yearsList.find(function(x){return x===p})||u.push(Z.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:s.decrementYears},Z.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),u}),F(B(s),"onChange",function(d){s.props.onChange(d)}),F(B(s),"handleClickOutside",function(){s.props.onCancel()}),F(B(s),"shiftYears",function(d){var u=s.state.yearsList.map(function(p){return p+d});s.setState({yearsList:u})}),F(B(s),"incrementYears",function(){return s.shiftYears(1)}),F(B(s),"decrementYears",function(){return s.shiftYears(-1)});var a=r.yearDropdownItemNumber,o=r.scrollableYearDropdown,l=a||(o?10:5);return s.state={yearsList:LI(s.props.year,l,s.props.minDate,s.props.maxDate)},s.dropdownRef=j.createRef(),s}return Ht(n,[{key:"componentDidMount",value:function(){var r=this.dropdownRef.current;if(r){var s=r.children?Array.from(r.children):null,a=s?s.find(function(o){return o.ariaSelected}):null;r.scrollTop=a?a.offsetTop+(a.clientHeight-r.clientHeight)/2:(r.scrollHeight-r.clientHeight)/2}}},{key:"render",value:function(){var r=Qt({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return Z.createElement("div",{className:r,ref:this.dropdownRef},this.renderOptions())}}]),n}()),AI=function(t){Wt(n,Z.Component);var e=Yt(n);function n(){var r;Ut(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return F(B(r=e.call.apply(e,[this].concat(a))),"state",{dropdownVisible:!1}),F(B(r),"renderSelectOptions",function(){for(var l=r.props.minDate?Re(r.props.minDate):1900,d=r.props.maxDate?Re(r.props.maxDate):2100,u=[],p=l;p<=d;p++)u.push(Z.createElement("option",{key:p,value:p},p));return u}),F(B(r),"onSelectChange",function(l){r.onChange(l.target.value)}),F(B(r),"renderSelectMode",function(){return Z.createElement("select",{value:r.props.year,className:"react-datepicker__year-select",onChange:r.onSelectChange},r.renderSelectOptions())}),F(B(r),"renderReadView",function(l){return Z.createElement("div",{key:"read",style:{visibility:l?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(d){return r.toggleDropdown(d)}},Z.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),Z.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},r.props.year))}),F(B(r),"renderDropdown",function(){return Z.createElement(RI,{key:"dropdown",year:r.props.year,onChange:r.onChange,onCancel:r.toggleDropdown,minDate:r.props.minDate,maxDate:r.props.maxDate,scrollableYearDropdown:r.props.scrollableYearDropdown,yearDropdownItemNumber:r.props.yearDropdownItemNumber})}),F(B(r),"renderScrollMode",function(){var l=r.state.dropdownVisible,d=[r.renderReadView(!l)];return l&&d.unshift(r.renderDropdown()),d}),F(B(r),"onChange",function(l){r.toggleDropdown(),l!==r.props.year&&r.props.onChange(l)}),F(B(r),"toggleDropdown",function(l){r.setState({dropdownVisible:!r.state.dropdownVisible},function(){r.props.adjustDateOnChange&&r.handleYearChange(r.props.date,l)})}),F(B(r),"handleYearChange",function(l,d){r.onSelect(l,d),r.setOpen()}),F(B(r),"onSelect",function(l,d){r.props.onSelect&&r.props.onSelect(l,d)}),F(B(r),"setOpen",function(){r.props.setOpen&&r.props.setOpen(!0)}),r}return Ht(n,[{key:"render",value:function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode()}return Z.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},r)}}]),n}(),II=pp(function(t){Wt(n,Z.Component);var e=Yt(n);function n(){var r;Ut(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return F(B(r=e.call.apply(e,[this].concat(a))),"isSelectedMonth",function(l){return r.props.month===l}),F(B(r),"renderOptions",function(){return r.props.monthNames.map(function(l,d){return Z.createElement("div",{className:r.isSelectedMonth(d)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:l,onClick:r.onChange.bind(B(r),d),"aria-selected":r.isSelectedMonth(d)?"true":void 0},r.isSelectedMonth(d)?Z.createElement("span",{className:"react-datepicker__month-option--selected"},"✓"):"",l)})}),F(B(r),"onChange",function(l){return r.props.onChange(l)}),F(B(r),"handleClickOutside",function(){return r.props.onCancel()}),r}return Ht(n,[{key:"render",value:function(){return Z.createElement("div",{className:"react-datepicker__month-dropdown"},this.renderOptions())}}]),n}()),FI=function(t){Wt(n,Z.Component);var e=Yt(n);function n(){var r;Ut(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return F(B(r=e.call.apply(e,[this].concat(a))),"state",{dropdownVisible:!1}),F(B(r),"renderSelectOptions",function(l){return l.map(function(d,u){return Z.createElement("option",{key:u,value:u},d)})}),F(B(r),"renderSelectMode",function(l){return Z.createElement("select",{value:r.props.month,className:"react-datepicker__month-select",onChange:function(d){return r.onChange(d.target.value)}},r.renderSelectOptions(l))}),F(B(r),"renderReadView",function(l,d){return Z.createElement("div",{key:"read",style:{visibility:l?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:r.toggleDropdown},Z.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),Z.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},d[r.props.month]))}),F(B(r),"renderDropdown",function(l){return Z.createElement(II,{key:"dropdown",month:r.props.month,monthNames:l,onChange:r.onChange,onCancel:r.toggleDropdown})}),F(B(r),"renderScrollMode",function(l){var d=r.state.dropdownVisible,u=[r.renderReadView(!d,l)];return d&&u.unshift(r.renderDropdown(l)),u}),F(B(r),"onChange",function(l){r.toggleDropdown(),l!==r.props.month&&r.props.onChange(l)}),F(B(r),"toggleDropdown",function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})}),r}return Ht(n,[{key:"render",value:function(){var r,s=this,a=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(o){return qN(o,s.props.locale)}:function(o){return bv(o,s.props.locale)});switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode(a);break;case"select":r=this.renderSelectMode(a)}return Z.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},r)}}]),n}();function $I(t,e){for(var n=[],r=ti(t),s=ti(e);!ii(r,s);)n.push(tt(r)),r=_r(r,1);return n}var zI=pp(function(t){Wt(n,Z.Component);var e=Yt(n);function n(r){var s;return Ut(this,n),F(B(s=e.call(this,r)),"renderOptions",function(){return s.state.monthYearsList.map(function(a){var o=Tg(a),l=Ws(s.props.date,a)&&gr(s.props.date,a);return Z.createElement("div",{className:l?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:o,onClick:s.onChange.bind(B(s),o),"aria-selected":l?"true":void 0},l?Z.createElement("span",{className:"react-datepicker__month-year-option--selected"},"✓"):"",ht(a,s.props.dateFormat,s.props.locale))})}),F(B(s),"onChange",function(a){return s.props.onChange(a)}),F(B(s),"handleClickOutside",function(){s.props.onCancel()}),s.state={monthYearsList:$I(s.props.minDate,s.props.maxDate)},s}return Ht(n,[{key:"render",value:function(){var r=Qt({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return Z.createElement("div",{className:r},this.renderOptions())}}]),n}()),BI=function(t){Wt(n,Z.Component);var e=Yt(n);function n(){var r;Ut(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return F(B(r=e.call.apply(e,[this].concat(a))),"state",{dropdownVisible:!1}),F(B(r),"renderSelectOptions",function(){for(var l=ti(r.props.minDate),d=ti(r.props.maxDate),u=[];!ii(l,d);){var p=Tg(l);u.push(Z.createElement("option",{key:p,value:p},ht(l,r.props.dateFormat,r.props.locale))),l=_r(l,1)}return u}),F(B(r),"onSelectChange",function(l){r.onChange(l.target.value)}),F(B(r),"renderSelectMode",function(){return Z.createElement("select",{value:Tg(ti(r.props.date)),className:"react-datepicker__month-year-select",onChange:r.onSelectChange},r.renderSelectOptions())}),F(B(r),"renderReadView",function(l){var d=ht(r.props.date,r.props.dateFormat,r.props.locale);return Z.createElement("div",{key:"read",style:{visibility:l?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:function(u){return r.toggleDropdown(u)}},Z.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),Z.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},d))}),F(B(r),"renderDropdown",function(){return Z.createElement(zI,{key:"dropdown",date:r.props.date,dateFormat:r.props.dateFormat,onChange:r.onChange,onCancel:r.toggleDropdown,minDate:r.props.minDate,maxDate:r.props.maxDate,scrollableMonthYearDropdown:r.props.scrollableMonthYearDropdown,locale:r.props.locale})}),F(B(r),"renderScrollMode",function(){var l=r.state.dropdownVisible,d=[r.renderReadView(!l)];return l&&d.unshift(r.renderDropdown()),d}),F(B(r),"onChange",function(l){r.toggleDropdown();var d=tt(parseInt(l));Ws(r.props.date,d)&&gr(r.props.date,d)||r.props.onChange(d)}),F(B(r),"toggleDropdown",function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})}),r}return Ht(n,[{key:"render",value:function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode()}return Z.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},r)}}]),n}(),UI=function(t){Wt(n,Z.Component);var e=Yt(n);function n(){var r;Ut(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return F(B(r=e.call.apply(e,[this].concat(a))),"dayEl",Z.createRef()),F(B(r),"handleClick",function(l){!r.isDisabled()&&r.props.onClick&&r.props.onClick(l)}),F(B(r),"handleMouseEnter",function(l){!r.isDisabled()&&r.props.onMouseEnter&&r.props.onMouseEnter(l)}),F(B(r),"handleOnKeyDown",function(l){l.key===" "&&(l.preventDefault(),l.key="Enter"),r.props.handleOnKeyDown(l)}),F(B(r),"isSameDay",function(l){return st(r.props.day,l)}),F(B(r),"isKeyboardSelected",function(){return!r.props.disabledKeyboardNavigation&&!(r.isSameDay(r.props.selected)||r.isSameWeek(r.props.selected))&&(r.isSameDay(r.props.preSelection)||r.isSameWeek(r.props.preSelection))}),F(B(r),"isDisabled",function(){return mp(r.props.day,r.props)}),F(B(r),"isExcluded",function(){return _v(r.props.day,r.props)}),F(B(r),"isStartOfWeek",function(){return st(r.props.day,Wr(r.props.day,r.props.locale,r.props.calendarStartDay))}),F(B(r),"isSameWeek",function(l){return r.props.showWeekPicker&&st(l,Wr(r.props.day,r.props.locale,r.props.calendarStartDay))}),F(B(r),"getHighLightedClass",function(){var l=r.props,d=l.day,u=l.highlightDates;if(!u)return!1;var p=ht(d,"MM.dd.yyyy");return u.get(p)}),F(B(r),"getHolidaysClass",function(){var l=r.props,d=l.day,u=l.holidays;if(!u)return!1;var p=ht(d,"MM.dd.yyyy");return u.has(p)?[u.get(p).className]:void 0}),F(B(r),"isInRange",function(){var l=r.props,d=l.day,u=l.startDate,p=l.endDate;return!(!u||!p)&&Cu(d,u,p)}),F(B(r),"isInSelectingRange",function(){var l,d=r.props,u=d.day,p=d.selectsStart,f=d.selectsEnd,x=d.selectsRange,g=d.selectsDisabledDaysInRange,v=d.startDate,b=d.endDate,w=(l=r.props.selectingDate)!==null&&l!==void 0?l:r.props.preSelection;return!(!(p||f||x)||!w||!g&&r.isDisabled())&&(p&&b&&(Hs(w,b)||Ui(w,b))?Cu(u,w,b):(f&&v&&(ii(w,v)||Ui(w,v))||!(!x||!v||b||!ii(w,v)&&!Ui(w,v)))&&Cu(u,v,w))}),F(B(r),"isSelectingRangeStart",function(){var l;if(!r.isInSelectingRange())return!1;var d=r.props,u=d.day,p=d.startDate,f=d.selectsStart,x=(l=r.props.selectingDate)!==null&&l!==void 0?l:r.props.preSelection;return st(u,f?x:p)}),F(B(r),"isSelectingRangeEnd",function(){var l;if(!r.isInSelectingRange())return!1;var d=r.props,u=d.day,p=d.endDate,f=d.selectsEnd,x=d.selectsRange,g=(l=r.props.selectingDate)!==null&&l!==void 0?l:r.props.preSelection;return st(u,f||x?g:p)}),F(B(r),"isRangeStart",function(){var l=r.props,d=l.day,u=l.startDate,p=l.endDate;return!(!u||!p)&&st(u,d)}),F(B(r),"isRangeEnd",function(){var l=r.props,d=l.day,u=l.startDate,p=l.endDate;return!(!u||!p)&&st(p,d)}),F(B(r),"isWeekend",function(){var l=y6(r.props.day);return l===0||l===6}),F(B(r),"isAfterMonth",function(){return r.props.month!==void 0&&(r.props.month+1)%12===sn(r.props.day)}),F(B(r),"isBeforeMonth",function(){return r.props.month!==void 0&&(sn(r.props.day)+1)%12===r.props.month}),F(B(r),"isCurrentDay",function(){return r.isSameDay(tt())}),F(B(r),"isSelected",function(){return r.isSameDay(r.props.selected)||r.isSameWeek(r.props.selected)}),F(B(r),"getClassNames",function(l){var d,u=r.props.dayClassName?r.props.dayClassName(l):void 0;return Qt("react-datepicker__day",u,"react-datepicker__day--"+ht(r.props.day,"ddd",d),{"react-datepicker__day--disabled":r.isDisabled(),"react-datepicker__day--excluded":r.isExcluded(),"react-datepicker__day--selected":r.isSelected(),"react-datepicker__day--keyboard-selected":r.isKeyboardSelected(),"react-datepicker__day--range-start":r.isRangeStart(),"react-datepicker__day--range-end":r.isRangeEnd(),"react-datepicker__day--in-range":r.isInRange(),"react-datepicker__day--in-selecting-range":r.isInSelectingRange(),"react-datepicker__day--selecting-range-start":r.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":r.isSelectingRangeEnd(),"react-datepicker__day--today":r.isCurrentDay(),"react-datepicker__day--weekend":r.isWeekend(),"react-datepicker__day--outside-month":r.isAfterMonth()||r.isBeforeMonth()},r.getHighLightedClass("react-datepicker__day--highlighted"),r.getHolidaysClass())}),F(B(r),"getAriaLabel",function(){var l=r.props,d=l.day,u=l.ariaLabelPrefixWhenEnabled,p=u===void 0?"Choose":u,f=l.ariaLabelPrefixWhenDisabled,x=f===void 0?"Not available":f,g=r.isDisabled()||r.isExcluded()?x:p;return"".concat(g," ").concat(ht(d,"PPPP",r.props.locale))}),F(B(r),"getTitle",function(){var l=r.props,d=l.day,u=l.holidays,p=u===void 0?new Map:u,f=ht(d,"MM.dd.yyyy");return p.has(f)&&p.get(f).holidayNames.length>0?p.get(f).holidayNames.join(", "):""}),F(B(r),"getTabIndex",function(l,d){var u=l||r.props.selected,p=d||r.props.preSelection;return(!r.props.showWeekPicker||!r.props.showWeekNumber&&r.isStartOfWeek())&&(r.isKeyboardSelected()||r.isSameDay(u)&&st(p,u))?0:-1}),F(B(r),"handleFocusDay",function(){var l,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=!1;r.getTabIndex()===0&&!d.isInputFocused&&r.isSameDay(r.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(u=!0),r.props.inline&&!r.props.shouldFocusDayInline&&(u=!1),r.props.containerRef&&r.props.containerRef.current&&r.props.containerRef.current.contains(document.activeElement)&&document.activeElement.classList.contains("react-datepicker__day")&&(u=!0),r.props.monthShowsDuplicateDaysEnd&&r.isAfterMonth()&&(u=!1),r.props.monthShowsDuplicateDaysStart&&r.isBeforeMonth()&&(u=!1)),u&&((l=r.dayEl.current)===null||l===void 0||l.focus({preventScroll:!0}))}),F(B(r),"renderDayContents",function(){return r.props.monthShowsDuplicateDaysEnd&&r.isAfterMonth()||r.props.monthShowsDuplicateDaysStart&&r.isBeforeMonth()?null:r.props.renderDayContents?r.props.renderDayContents(zb(r.props.day),r.props.day):zb(r.props.day)}),F(B(r),"render",function(){return Z.createElement("div",{ref:r.dayEl,className:r.getClassNames(r.props.day),onKeyDown:r.handleOnKeyDown,onClick:r.handleClick,onMouseEnter:r.handleMouseEnter,tabIndex:r.getTabIndex(),"aria-label":r.getAriaLabel(),role:"option",title:r.getTitle(),"aria-disabled":r.isDisabled(),"aria-current":r.isCurrentDay()?"date":void 0,"aria-selected":r.isSelected()||r.isInRange()},r.renderDayContents(),r.getTitle()!==""&&Z.createElement("span",{className:"holiday-overlay"},r.getTitle()))}),r}return Ht(n,[{key:"componentDidMount",value:function(){this.handleFocusDay()}},{key:"componentDidUpdate",value:function(r){this.handleFocusDay(r)}}]),n}(),HI=function(t){Wt(n,Z.Component);var e=Yt(n);function n(){var r;Ut(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return F(B(r=e.call.apply(e,[this].concat(a))),"weekNumberEl",Z.createRef()),F(B(r),"handleClick",function(l){r.props.onClick&&r.props.onClick(l)}),F(B(r),"handleOnKeyDown",function(l){l.key===" "&&(l.preventDefault(),l.key="Enter"),r.props.handleOnKeyDown(l)}),F(B(r),"isKeyboardSelected",function(){return!r.props.disabledKeyboardNavigation&&!st(r.props.date,r.props.selected)&&st(r.props.date,r.props.preSelection)}),F(B(r),"getTabIndex",function(){return r.props.showWeekPicker&&r.props.showWeekNumber&&(r.isKeyboardSelected()||st(r.props.date,r.props.selected)&&st(r.props.preSelection,r.props.selected))?0:-1}),F(B(r),"handleFocusWeekNumber",function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=!1;r.getTabIndex()===0&&!l.isInputFocused&&st(r.props.date,r.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(d=!0),r.props.inline&&!r.props.shouldFocusDayInline&&(d=!1),r.props.containerRef&&r.props.containerRef.current&&r.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(d=!0)),d&&r.weekNumberEl.current&&r.weekNumberEl.current.focus({preventScroll:!0})}),r}return Ht(n,[{key:"componentDidMount",value:function(){this.handleFocusWeekNumber()}},{key:"componentDidUpdate",value:function(r){this.handleFocusWeekNumber(r)}},{key:"render",value:function(){var r=this.props,s=r.weekNumber,a=r.ariaLabelPrefix,o=a===void 0?"week ":a,l={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!r.onClick,"react-datepicker__week-number--selected":st(this.props.date,this.props.selected),"react-datepicker__week-number--keyboard-selected":this.isKeyboardSelected()};return Z.createElement("div",{ref:this.weekNumberEl,className:Qt(l),"aria-label":"".concat(o," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},s)}}],[{key:"defaultProps",get:function(){return{ariaLabelPrefix:"week "}}}]),n}(),WI=function(t){Wt(n,Z.Component);var e=Yt(n);function n(){var r;Ut(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return F(B(r=e.call.apply(e,[this].concat(a))),"handleDayClick",function(l,d){r.props.onDayClick&&r.props.onDayClick(l,d)}),F(B(r),"handleDayMouseEnter",function(l){r.props.onDayMouseEnter&&r.props.onDayMouseEnter(l)}),F(B(r),"handleWeekClick",function(l,d,u){if(typeof r.props.onWeekSelect=="function"&&r.props.onWeekSelect(l,d,u),r.props.showWeekPicker){var p=Wr(l,r.props.locale,r.props.calendarStartDay);r.handleDayClick(p,u)}r.props.shouldCloseOnSelect&&r.props.setOpen(!1)}),F(B(r),"formatWeekNumber",function(l){return r.props.formatWeekNumber?r.props.formatWeekNumber(l):function(d,u){var p=Ki()&&Gi(Ki());return j6(d,p?{locale:p}:null)}(l)}),F(B(r),"renderDays",function(){var l=Wr(r.props.day,r.props.locale,r.props.calendarStartDay),d=[],u=r.formatWeekNumber(l);if(r.props.showWeekNumber){var p=r.props.onWeekSelect||r.props.showWeekPicker?r.handleWeekClick.bind(B(r),l,u):void 0;d.push(Z.createElement(HI,{key:"W",weekNumber:u,date:l,onClick:p,selected:r.props.selected,preSelection:r.props.preSelection,ariaLabelPrefix:r.props.ariaLabelPrefix,showWeekPicker:r.props.showWeekPicker,showWeekNumber:r.props.showWeekNumber,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,handleOnKeyDown:r.props.handleOnKeyDown,isInputFocused:r.props.isInputFocused,containerRef:r.props.containerRef}))}return d.concat([0,1,2,3,4,5,6].map(function(f){var x=zo(l,f);return Z.createElement(UI,{ariaLabelPrefixWhenEnabled:r.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:r.props.disabledDayAriaLabelPrefix,key:x.valueOf(),day:x,month:r.props.month,onClick:r.handleDayClick.bind(B(r),x),onMouseEnter:r.handleDayMouseEnter.bind(B(r),x),minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,highlightDates:r.props.highlightDates,holidays:r.props.holidays,selectingDate:r.props.selectingDate,filterDate:r.props.filterDate,preSelection:r.props.preSelection,selected:r.props.selected,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,showWeekPicker:r.props.showWeekPicker,showWeekNumber:r.props.showWeekNumber,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,startDate:r.props.startDate,endDate:r.props.endDate,dayClassName:r.props.dayClassName,renderDayContents:r.props.renderDayContents,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,handleOnKeyDown:r.props.handleOnKeyDown,isInputFocused:r.props.isInputFocused,containerRef:r.props.containerRef,inline:r.props.inline,shouldFocusDayInline:r.props.shouldFocusDayInline,monthShowsDuplicateDaysEnd:r.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:r.props.monthShowsDuplicateDaysStart,locale:r.props.locale})}))}),F(B(r),"startOfWeek",function(){return Wr(r.props.day,r.props.locale,r.props.calendarStartDay)}),F(B(r),"isKeyboardSelected",function(){return!r.props.disabledKeyboardNavigation&&!st(r.startOfWeek(),r.props.selected)&&st(r.startOfWeek(),r.props.preSelection)}),r}return Ht(n,[{key:"render",value:function(){var r={"react-datepicker__week":!0,"react-datepicker__week--selected":st(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return Z.createElement("div",{className:Qt(r)},this.renderDays())}}],[{key:"defaultProps",get:function(){return{shouldCloseOnSelect:!0}}}]),n}(),XN="two_columns",JN="three_columns",ek="four_columns",Gf=F(F(F({},XN,{grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2}),JN,{grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3}),ek,{grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4});function __(t,e){return t?ek:e?XN:JN}var YI=function(t){Wt(n,Z.Component);var e=Yt(n);function n(){var r;Ut(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return F(B(r=e.call.apply(e,[this].concat(a))),"MONTH_REFS",Dc(Array(12)).map(function(){return Z.createRef()})),F(B(r),"QUARTER_REFS",Dc(Array(4)).map(function(){return Z.createRef()})),F(B(r),"isDisabled",function(l){return mp(l,r.props)}),F(B(r),"isExcluded",function(l){return _v(l,r.props)}),F(B(r),"handleDayClick",function(l,d){r.props.onDayClick&&r.props.onDayClick(l,d,r.props.orderInDisplay)}),F(B(r),"handleDayMouseEnter",function(l){r.props.onDayMouseEnter&&r.props.onDayMouseEnter(l)}),F(B(r),"handleMouseLeave",function(){r.props.onMouseLeave&&r.props.onMouseLeave()}),F(B(r),"isRangeStartMonth",function(l){var d=r.props,u=d.day,p=d.startDate,f=d.endDate;return!(!p||!f)&&gr(un(u,l),p)}),F(B(r),"isRangeStartQuarter",function(l){var d=r.props,u=d.day,p=d.startDate,f=d.endDate;return!(!p||!f)&&Nh(La(u,l),p)}),F(B(r),"isRangeEndMonth",function(l){var d=r.props,u=d.day,p=d.startDate,f=d.endDate;return!(!p||!f)&&gr(un(u,l),f)}),F(B(r),"isRangeEndQuarter",function(l){var d=r.props,u=d.day,p=d.startDate,f=d.endDate;return!(!p||!f)&&Nh(La(u,l),f)}),F(B(r),"isInSelectingRangeMonth",function(l){var d,u=r.props,p=u.day,f=u.selectsStart,x=u.selectsEnd,g=u.selectsRange,v=u.startDate,b=u.endDate,w=(d=r.props.selectingDate)!==null&&d!==void 0?d:r.props.preSelection;return!(!(f||x||g)||!w)&&(f&&b?qf(w,b,l,p):(x&&v||!(!g||!v||b))&&qf(v,w,l,p))}),F(B(r),"isSelectingMonthRangeStart",function(l){var d;if(!r.isInSelectingRangeMonth(l))return!1;var u=r.props,p=u.day,f=u.startDate,x=u.selectsStart,g=un(p,l),v=(d=r.props.selectingDate)!==null&&d!==void 0?d:r.props.preSelection;return gr(g,x?v:f)}),F(B(r),"isSelectingMonthRangeEnd",function(l){var d;if(!r.isInSelectingRangeMonth(l))return!1;var u=r.props,p=u.day,f=u.endDate,x=u.selectsEnd,g=u.selectsRange,v=un(p,l),b=(d=r.props.selectingDate)!==null&&d!==void 0?d:r.props.preSelection;return gr(v,x||g?b:f)}),F(B(r),"isInSelectingRangeQuarter",function(l){var d,u=r.props,p=u.day,f=u.selectsStart,x=u.selectsEnd,g=u.selectsRange,v=u.startDate,b=u.endDate,w=(d=r.props.selectingDate)!==null&&d!==void 0?d:r.props.preSelection;return!(!(f||x||g)||!w)&&(f&&b?Kf(w,b,l,p):(x&&v||!(!g||!v||b))&&Kf(v,w,l,p))}),F(B(r),"isWeekInMonth",function(l){var d=r.props.day,u=zo(l,6);return gr(l,d)||gr(u,d)}),F(B(r),"isCurrentMonth",function(l,d){return Re(l)===Re(tt())&&d===sn(tt())}),F(B(r),"isCurrentQuarter",function(l,d){return Re(l)===Re(tt())&&d===Ka(tt())}),F(B(r),"isSelectedMonth",function(l,d,u){return sn(u)===d&&Re(l)===Re(u)}),F(B(r),"isSelectedQuarter",function(l,d,u){return Ka(l)===d&&Re(l)===Re(u)}),F(B(r),"renderWeeks",function(){for(var l=[],d=r.props.fixedHeight,u=0,p=!1,f=Wr(ti(r.props.day),r.props.locale,r.props.calendarStartDay);l.push(Z.createElement(WI,{ariaLabelPrefix:r.props.weekAriaLabelPrefix,chooseDayAriaLabelPrefix:r.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:r.props.disabledDayAriaLabelPrefix,key:u,day:f,month:sn(r.props.day),onDayClick:r.handleDayClick,onDayMouseEnter:r.handleDayMouseEnter,onWeekSelect:r.props.onWeekSelect,formatWeekNumber:r.props.formatWeekNumber,locale:r.props.locale,minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,inline:r.props.inline,shouldFocusDayInline:r.props.shouldFocusDayInline,highlightDates:r.props.highlightDates,holidays:r.props.holidays,selectingDate:r.props.selectingDate,filterDate:r.props.filterDate,preSelection:r.props.preSelection,selected:r.props.selected,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,showWeekNumber:r.props.showWeekNumbers,showWeekPicker:r.props.showWeekPicker,startDate:r.props.startDate,endDate:r.props.endDate,dayClassName:r.props.dayClassName,setOpen:r.props.setOpen,shouldCloseOnSelect:r.props.shouldCloseOnSelect,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,renderDayContents:r.props.renderDayContents,handleOnKeyDown:r.props.handleOnKeyDown,isInputFocused:r.props.isInputFocused,containerRef:r.props.containerRef,calendarStartDay:r.props.calendarStartDay,monthShowsDuplicateDaysEnd:r.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:r.props.monthShowsDuplicateDaysStart})),!p;){u++,f=fh(f,1);var x=d&&u>=6,g=!d&&!r.isWeekInMonth(f);if(x||g){if(!r.props.peekNextMonth)break;p=!0}}return l}),F(B(r),"onMonthClick",function(l,d){r.handleDayClick(ti(un(r.props.day,d)),l)}),F(B(r),"onMonthMouseEnter",function(l){r.handleDayMouseEnter(ti(un(r.props.day,l)))}),F(B(r),"handleMonthNavigation",function(l,d){r.isDisabled(d)||r.isExcluded(d)||(r.props.setPreSelection(d),r.MONTH_REFS[l].current&&r.MONTH_REFS[l].current.focus())}),F(B(r),"onMonthKeyDown",function(l,d){var u=r.props,p=u.selected,f=u.preSelection,x=u.disabledKeyboardNavigation,g=u.showTwoColumnMonthYearPicker,v=u.showFourColumnMonthYearPicker,b=u.setPreSelection,w=l.key;if(w!=="Tab"&&l.preventDefault(),!x){var _=__(v,g),N=Gf[_].verticalNavigationOffset,S=Gf[_].grid;switch(w){case"Enter":r.onMonthClick(l,d),b(p);break;case"ArrowRight":r.handleMonthNavigation(d===11?0:d+1,_r(f,1));break;case"ArrowLeft":r.handleMonthNavigation(d===0?11:d-1,_o(f,1));break;case"ArrowUp":r.handleMonthNavigation(S[0].includes(d)?d+12-N:d-N,_o(f,N));break;case"ArrowDown":r.handleMonthNavigation(S[S.length-1].includes(d)?d-12+N:d+N,_r(f,N))}}}),F(B(r),"onQuarterClick",function(l,d){r.handleDayClick(c_(La(r.props.day,d)),l)}),F(B(r),"onQuarterMouseEnter",function(l){r.handleDayMouseEnter(c_(La(r.props.day,l)))}),F(B(r),"handleQuarterNavigation",function(l,d){r.isDisabled(d)||r.isExcluded(d)||(r.props.setPreSelection(d),r.QUARTER_REFS[l-1].current&&r.QUARTER_REFS[l-1].current.focus())}),F(B(r),"onQuarterKeyDown",function(l,d){var u=l.key;if(!r.props.disabledKeyboardNavigation)switch(u){case"Enter":r.onQuarterClick(l,d),r.props.setPreSelection(r.props.selected);break;case"ArrowRight":r.handleQuarterNavigation(d===4?1:d+1,wN(r.props.preSelection,1));break;case"ArrowLeft":r.handleQuarterNavigation(d===1?4:d-1,v6(r.props.preSelection,1))}}),F(B(r),"getMonthClassNames",function(l){var d=r.props,u=d.day,p=d.startDate,f=d.endDate,x=d.selected,g=d.minDate,v=d.maxDate,b=d.preSelection,w=d.monthClassName,_=d.excludeDates,N=d.includeDates,S=w?w(un(u,l)):void 0,P=un(u,l);return Qt("react-datepicker__month-text","react-datepicker__month-".concat(l),S,{"react-datepicker__month-text--disabled":(g||v||_||N)&&ZN(P,r.props),"react-datepicker__month-text--selected":r.isSelectedMonth(u,l,x),"react-datepicker__month-text--keyboard-selected":!r.props.disabledKeyboardNavigation&&sn(b)===l,"react-datepicker__month-text--in-selecting-range":r.isInSelectingRangeMonth(l),"react-datepicker__month-text--in-range":qf(p,f,l,u),"react-datepicker__month-text--range-start":r.isRangeStartMonth(l),"react-datepicker__month-text--range-end":r.isRangeEndMonth(l),"react-datepicker__month-text--selecting-range-start":r.isSelectingMonthRangeStart(l),"react-datepicker__month-text--selecting-range-end":r.isSelectingMonthRangeEnd(l),"react-datepicker__month-text--today":r.isCurrentMonth(u,l)})}),F(B(r),"getTabIndex",function(l){var d=sn(r.props.preSelection);return r.props.disabledKeyboardNavigation||l!==d?"-1":"0"}),F(B(r),"getQuarterTabIndex",function(l){var d=Ka(r.props.preSelection);return r.props.disabledKeyboardNavigation||l!==d?"-1":"0"}),F(B(r),"getAriaLabel",function(l){var d=r.props,u=d.chooseDayAriaLabelPrefix,p=u===void 0?"Choose":u,f=d.disabledDayAriaLabelPrefix,x=f===void 0?"Not available":f,g=d.day,v=un(g,l),b=r.isDisabled(v)||r.isExcluded(v)?x:p;return"".concat(b," ").concat(ht(v,"MMMM yyyy"))}),F(B(r),"getQuarterClassNames",function(l){var d=r.props,u=d.day,p=d.startDate,f=d.endDate,x=d.selected,g=d.minDate,v=d.maxDate,b=d.preSelection,w=d.disabledKeyboardNavigation;return Qt("react-datepicker__quarter-text","react-datepicker__quarter-".concat(l),{"react-datepicker__quarter-text--disabled":(g||v)&&DI(La(u,l),r.props),"react-datepicker__quarter-text--selected":r.isSelectedQuarter(u,l,x),"react-datepicker__quarter-text--keyboard-selected":!w&&Ka(b)===l,"react-datepicker__quarter-text--in-selecting-range":r.isInSelectingRangeQuarter(l),"react-datepicker__quarter-text--in-range":Kf(p,f,l,u),"react-datepicker__quarter-text--range-start":r.isRangeStartQuarter(l),"react-datepicker__quarter-text--range-end":r.isRangeEndQuarter(l)})}),F(B(r),"getMonthContent",function(l){var d=r.props,u=d.showFullMonthYearPicker,p=d.renderMonthContent,f=d.locale,x=d.day,g=qN(l,f),v=bv(l,f);return p?p(l,g,v,x):u?v:g}),F(B(r),"getQuarterContent",function(l){var d=r.props,u=d.renderQuarterContent,p=function(f,x){return ht(La(tt(),f),"QQQ",x)}(l,d.locale);return u?u(l,p):p}),F(B(r),"renderMonths",function(){var l=r.props,d=l.showTwoColumnMonthYearPicker,u=l.showFourColumnMonthYearPicker,p=l.day,f=l.selected;return Gf[__(u,d)].grid.map(function(x,g){return Z.createElement("div",{className:"react-datepicker__month-wrapper",key:g},x.map(function(v,b){return Z.createElement("div",{ref:r.MONTH_REFS[v],key:b,onClick:function(w){r.onMonthClick(w,v)},onKeyDown:function(w){r.onMonthKeyDown(w,v)},onMouseEnter:function(){return r.onMonthMouseEnter(v)},tabIndex:r.getTabIndex(v),className:r.getMonthClassNames(v),role:"option","aria-label":r.getAriaLabel(v),"aria-current":r.isCurrentMonth(p,v)?"date":void 0,"aria-selected":r.isSelectedMonth(p,v,f)},r.getMonthContent(v))}))})}),F(B(r),"renderQuarters",function(){var l=r.props,d=l.day,u=l.selected;return Z.createElement("div",{className:"react-datepicker__quarter-wrapper"},[1,2,3,4].map(function(p,f){return Z.createElement("div",{key:f,ref:r.QUARTER_REFS[f],role:"option",onClick:function(x){r.onQuarterClick(x,p)},onKeyDown:function(x){r.onQuarterKeyDown(x,p)},onMouseEnter:function(){return r.onQuarterMouseEnter(p)},className:r.getQuarterClassNames(p),"aria-selected":r.isSelectedQuarter(d,p,u),tabIndex:r.getQuarterTabIndex(p),"aria-current":r.isCurrentQuarter(d,p)?"date":void 0},r.getQuarterContent(p))}))}),F(B(r),"getClassNames",function(){var l=r.props,d=l.selectingDate,u=l.selectsStart,p=l.selectsEnd,f=l.showMonthYearPicker,x=l.showQuarterYearPicker,g=l.showWeekPicker;return Qt("react-datepicker__month",{"react-datepicker__month--selecting-range":d&&(u||p)},{"react-datepicker__monthPicker":f},{"react-datepicker__quarterPicker":x},{"react-datepicker__weekPicker":g})}),r}return Ht(n,[{key:"render",value:function(){var r=this.props,s=r.showMonthYearPicker,a=r.showQuarterYearPicker,o=r.day,l=r.ariaLabelPrefix,d=l===void 0?"month ":l;return Z.createElement("div",{className:this.getClassNames(),onMouseLeave:this.handleMouseLeave,"aria-label":"".concat(d," ").concat(ht(o,"yyyy-MM")),role:"listbox"},s?this.renderMonths():a?this.renderQuarters():this.renderWeeks())}}]),n}(),tk=function(t){Wt(n,Z.Component);var e=Yt(n);function n(){var r;Ut(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return F(B(r=e.call.apply(e,[this].concat(a))),"state",{height:null}),F(B(r),"scrollToTheSelectedTime",function(){requestAnimationFrame(function(){r.list&&(r.list.scrollTop=r.centerLi&&n.calcCenterPosition(r.props.monthRef?r.props.monthRef.clientHeight-r.header.clientHeight:r.list.clientHeight,r.centerLi))})}),F(B(r),"handleClick",function(l){(r.props.minTime||r.props.maxTime)&&p_(l,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&h_(l,r.props)||r.props.onChange(l)}),F(B(r),"isSelectedTime",function(l){return r.props.selected&&(d=r.props.selected,u=l,b_(d).getTime()===b_(u).getTime());var d,u}),F(B(r),"isDisabledTime",function(l){return(r.props.minTime||r.props.maxTime)&&p_(l,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&h_(l,r.props)}),F(B(r),"liClasses",function(l){var d=["react-datepicker__time-list-item",r.props.timeClassName?r.props.timeClassName(l):void 0];return r.isSelectedTime(l)&&d.push("react-datepicker__time-list-item--selected"),r.isDisabledTime(l)&&d.push("react-datepicker__time-list-item--disabled"),r.props.injectTimes&&(60*Br(l)+zr(l))%r.props.intervals!=0&&d.push("react-datepicker__time-list-item--injected"),d.join(" ")}),F(B(r),"handleOnKeyDown",function(l,d){l.key===" "&&(l.preventDefault(),l.key="Enter"),l.key!=="ArrowUp"&&l.key!=="ArrowLeft"||!l.target.previousSibling||(l.preventDefault(),l.target.previousSibling.focus()),l.key!=="ArrowDown"&&l.key!=="ArrowRight"||!l.target.nextSibling||(l.preventDefault(),l.target.nextSibling.focus()),l.key==="Enter"&&r.handleClick(d),r.props.handleOnKeyDown(l)}),F(B(r),"renderTimes",function(){for(var l=[],d=r.props.format?r.props.format:"p",u=r.props.intervals,p=r.props.selected||r.props.openToDate||tt(),f=Ur(p),x=r.props.injectTimes&&r.props.injectTimes.sort(function(S,P){return S-P}),g=60*function(S){var P=new Date(S.getFullYear(),S.getMonth(),S.getDate()),O=new Date(S.getFullYear(),S.getMonth(),S.getDate(),24);return Math.round((+O-+P)/36e5)}(p),v=g/u,b=0;b<v;b++){var w=Eg(f,b*u);if(l.push(w),x){var _=OI(f,w,b,u,x);l=l.concat(_)}}var N=l.reduce(function(S,P){return P.getTime()<=p.getTime()?P:S},l[0]);return l.map(function(S,P){return Z.createElement("li",{key:P,onClick:r.handleClick.bind(B(r),S),className:r.liClasses(S),ref:function(O){S===N&&(r.centerLi=O)},onKeyDown:function(O){r.handleOnKeyDown(O,S)},tabIndex:S===N?0:-1,role:"option","aria-selected":r.isSelectedTime(S)?"true":void 0,"aria-disabled":r.isDisabledTime(S)?"true":void 0},ht(S,d,r.props.locale))})}),r}return Ht(n,[{key:"componentDidMount",value:function(){this.scrollToTheSelectedTime(),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})}},{key:"render",value:function(){var r=this,s=this.state.height;return Z.createElement("div",{className:"react-datepicker__time-container ".concat(this.props.todayButton?"react-datepicker__time-container--with-today-button":"")},Z.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(this.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(a){r.header=a}},Z.createElement("div",{className:"react-datepicker-time__header"},this.props.timeCaption)),Z.createElement("div",{className:"react-datepicker__time"},Z.createElement("div",{className:"react-datepicker__time-box"},Z.createElement("ul",{className:"react-datepicker__time-list",ref:function(a){r.list=a},style:s?{height:s}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))}}],[{key:"defaultProps",get:function(){return{intervals:30,onTimeChange:function(){},todayButton:null,timeCaption:"Time"}}}]),n}();F(tk,"calcCenterPosition",function(t,e){return e.offsetTop-(t/2-e.clientHeight/2)});var VI=function(t){Wt(n,Z.Component);var e=Yt(n);function n(r){var s;return Ut(this,n),F(B(s=e.call(this,r)),"YEAR_REFS",Dc(Array(s.props.yearItemNumber)).map(function(){return Z.createRef()})),F(B(s),"isDisabled",function(a){return mp(a,s.props)}),F(B(s),"isExcluded",function(a){return _v(a,s.props)}),F(B(s),"selectingDate",function(){var a;return(a=s.props.selectingDate)!==null&&a!==void 0?a:s.props.preSelection}),F(B(s),"updateFocusOnPaginate",function(a){var o=(function(){this.YEAR_REFS[a].current.focus()}).bind(B(s));window.requestAnimationFrame(o)}),F(B(s),"handleYearClick",function(a,o){s.props.onDayClick&&s.props.onDayClick(a,o)}),F(B(s),"handleYearNavigation",function(a,o){var l=s.props,d=l.date,u=l.yearItemNumber,p=Ga(d,u).startPeriod;s.isDisabled(o)||s.isExcluded(o)||(s.props.setPreSelection(o),a-p==-1?s.updateFocusOnPaginate(u-1):a-p===u?s.updateFocusOnPaginate(0):s.YEAR_REFS[a-p].current.focus())}),F(B(s),"isSameDay",function(a,o){return st(a,o)}),F(B(s),"isCurrentYear",function(a){return a===Re(tt())}),F(B(s),"isRangeStart",function(a){return s.props.startDate&&s.props.endDate&&Ws(as(tt(),a),s.props.startDate)}),F(B(s),"isRangeEnd",function(a){return s.props.startDate&&s.props.endDate&&Ws(as(tt(),a),s.props.endDate)}),F(B(s),"isInRange",function(a){return Zf(a,s.props.startDate,s.props.endDate)}),F(B(s),"isInSelectingRange",function(a){var o=s.props,l=o.selectsStart,d=o.selectsEnd,u=o.selectsRange,p=o.startDate,f=o.endDate;return!(!(l||d||u)||!s.selectingDate())&&(l&&f?Zf(a,s.selectingDate(),f):(d&&p||!(!u||!p||f))&&Zf(a,p,s.selectingDate()))}),F(B(s),"isSelectingRangeStart",function(a){if(!s.isInSelectingRange(a))return!1;var o=s.props,l=o.startDate,d=o.selectsStart,u=as(tt(),a);return Ws(u,d?s.selectingDate():l)}),F(B(s),"isSelectingRangeEnd",function(a){if(!s.isInSelectingRange(a))return!1;var o=s.props,l=o.endDate,d=o.selectsEnd,u=o.selectsRange,p=as(tt(),a);return Ws(p,d||u?s.selectingDate():l)}),F(B(s),"isKeyboardSelected",function(a){var o=Pl(as(s.props.date,a));return!s.props.disabledKeyboardNavigation&&!s.props.inline&&!st(o,Pl(s.props.selected))&&st(o,Pl(s.props.preSelection))}),F(B(s),"onYearClick",function(a,o){var l=s.props.date;s.handleYearClick(Pl(as(l,o)),a)}),F(B(s),"onYearKeyDown",function(a,o){var l=a.key;if(!s.props.disabledKeyboardNavigation)switch(l){case"Enter":s.onYearClick(a,o),s.props.setPreSelection(s.props.selected);break;case"ArrowRight":s.handleYearNavigation(o+1,bo(s.props.preSelection,1));break;case"ArrowLeft":s.handleYearNavigation(o-1,Cc(s.props.preSelection,1))}}),F(B(s),"getYearClassNames",function(a){var o=s.props,l=o.minDate,d=o.maxDate,u=o.selected,p=o.excludeDates,f=o.includeDates,x=o.filterDate;return Qt("react-datepicker__year-text",{"react-datepicker__year-text--selected":a===Re(u),"react-datepicker__year-text--disabled":(l||d||p||f||x)&&KN(a,s.props),"react-datepicker__year-text--keyboard-selected":s.isKeyboardSelected(a),"react-datepicker__year-text--range-start":s.isRangeStart(a),"react-datepicker__year-text--range-end":s.isRangeEnd(a),"react-datepicker__year-text--in-range":s.isInRange(a),"react-datepicker__year-text--in-selecting-range":s.isInSelectingRange(a),"react-datepicker__year-text--selecting-range-start":s.isSelectingRangeStart(a),"react-datepicker__year-text--selecting-range-end":s.isSelectingRangeEnd(a),"react-datepicker__year-text--today":s.isCurrentYear(a)})}),F(B(s),"getYearTabIndex",function(a){return s.props.disabledKeyboardNavigation?"-1":a===Re(s.props.preSelection)?"0":"-1"}),F(B(s),"getYearContainerClassNames",function(){var a=s.props,o=a.selectingDate,l=a.selectsStart,d=a.selectsEnd,u=a.selectsRange;return Qt("react-datepicker__year",{"react-datepicker__year--selecting-range":o&&(l||d||u)})}),F(B(s),"getYearContent",function(a){return s.props.renderYearContent?s.props.renderYearContent(a):a}),s}return Ht(n,[{key:"render",value:function(){for(var r=this,s=[],a=this.props,o=a.date,l=a.yearItemNumber,d=a.onYearMouseEnter,u=a.onYearMouseLeave,p=Ga(o,l),f=p.startPeriod,x=p.endPeriod,g=function(b){s.push(Z.createElement("div",{ref:r.YEAR_REFS[b-f],onClick:function(w){r.onYearClick(w,b)},onKeyDown:function(w){r.onYearKeyDown(w,b)},tabIndex:r.getYearTabIndex(b),className:r.getYearClassNames(b),onMouseEnter:function(w){return d(w,b)},onMouseLeave:function(w){return u(w,b)},key:b,"aria-current":r.isCurrentYear(b)?"date":void 0},r.getYearContent(b)))},v=f;v<=x;v++)g(v);return Z.createElement("div",{className:this.getYearContainerClassNames()},Z.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.clearSelectingDate},s))}}]),n}(),qI=function(t){Wt(n,Z.Component);var e=Yt(n);function n(r){var s;return Ut(this,n),F(B(s=e.call(this,r)),"onTimeChange",function(a){s.setState({time:a});var o=s.props.date,l=o instanceof Date&&!isNaN(o)?o:new Date;l.setHours(a.split(":")[0]),l.setMinutes(a.split(":")[1]),s.props.onChange(l)}),F(B(s),"renderTimeInput",function(){var a=s.state.time,o=s.props,l=o.date,d=o.timeString,u=o.customTimeInput;return u?Z.cloneElement(u,{date:l,value:a,onChange:s.onTimeChange}):Z.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",required:!0,value:a,onChange:function(p){s.onTimeChange(p.target.value||d)}})}),s.state={time:s.props.timeString},s}return Ht(n,[{key:"render",value:function(){return Z.createElement("div",{className:"react-datepicker__input-time-container"},Z.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),Z.createElement("div",{className:"react-datepicker-time__input-container"},Z.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.timeString!==s.time?{time:r.timeString}:null}}]),n}();function ZI(t){var e=t.className,n=t.children,r=t.showPopperArrow,s=t.arrowProps,a=s===void 0?{}:s;return Z.createElement("div",{className:e},r&&Z.createElement("div",So({className:"react-datepicker__triangle"},a)),n)}var KI=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],GI=function(t){Wt(n,Z.Component);var e=Yt(n);function n(r){var s;return Ut(this,n),F(B(s=e.call(this,r)),"handleClickOutside",function(a){s.props.onClickOutside(a)}),F(B(s),"setClickOutsideRef",function(){return s.containerRef.current}),F(B(s),"handleDropdownFocus",function(a){(function(){var o=((arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).className||"").split(/\s+/);return KI.some(function(l){return o.indexOf(l)>=0})})(a.target)&&s.props.onDropdownFocus()}),F(B(s),"getDateInView",function(){var a=s.props,o=a.preSelection,l=a.selected,d=a.openToDate,u=GN(s.props),p=QN(s.props),f=tt(),x=d||l||o;return x||(u&&Hs(f,u)?u:p&&ii(f,p)?p:f)}),F(B(s),"increaseMonth",function(){s.setState(function(a){var o=a.date;return{date:_r(o,1)}},function(){return s.handleMonthChange(s.state.date)})}),F(B(s),"decreaseMonth",function(){s.setState(function(a){var o=a.date;return{date:_o(o,1)}},function(){return s.handleMonthChange(s.state.date)})}),F(B(s),"handleDayClick",function(a,o,l){s.props.onSelect(a,o,l),s.props.setPreSelection&&s.props.setPreSelection(a)}),F(B(s),"handleDayMouseEnter",function(a){s.setState({selectingDate:a}),s.props.onDayMouseEnter&&s.props.onDayMouseEnter(a)}),F(B(s),"handleMonthMouseLeave",function(){s.setState({selectingDate:null}),s.props.onMonthMouseLeave&&s.props.onMonthMouseLeave()}),F(B(s),"handleYearMouseEnter",function(a,o){s.setState({selectingDate:as(tt(),o)}),s.props.onYearMouseEnter&&s.props.onYearMouseEnter(a,o)}),F(B(s),"handleYearMouseLeave",function(a,o){s.props.onYearMouseLeave&&s.props.onYearMouseLeave(a,o)}),F(B(s),"handleYearChange",function(a){s.props.onYearChange&&(s.props.onYearChange(a),s.setState({isRenderAriaLiveMessage:!0})),s.props.adjustDateOnChange&&(s.props.onSelect&&s.props.onSelect(a),s.props.setOpen&&s.props.setOpen(!0)),s.props.setPreSelection&&s.props.setPreSelection(a)}),F(B(s),"handleMonthChange",function(a){s.handleCustomMonthChange(a),s.props.adjustDateOnChange&&(s.props.onSelect&&s.props.onSelect(a),s.props.setOpen&&s.props.setOpen(!0)),s.props.setPreSelection&&s.props.setPreSelection(a)}),F(B(s),"handleCustomMonthChange",function(a){s.props.onMonthChange&&(s.props.onMonthChange(a),s.setState({isRenderAriaLiveMessage:!0}))}),F(B(s),"handleMonthYearChange",function(a){s.handleYearChange(a),s.handleMonthChange(a)}),F(B(s),"changeYear",function(a){s.setState(function(o){var l=o.date;return{date:as(l,a)}},function(){return s.handleYearChange(s.state.date)})}),F(B(s),"changeMonth",function(a){s.setState(function(o){var l=o.date;return{date:un(l,a)}},function(){return s.handleMonthChange(s.state.date)})}),F(B(s),"changeMonthYear",function(a){s.setState(function(o){var l=o.date;return{date:as(un(l,sn(a)),Re(a))}},function(){return s.handleMonthYearChange(s.state.date)})}),F(B(s),"header",function(){var a=Wr(arguments.length>0&&arguments[0]!==void 0?arguments[0]:s.state.date,s.props.locale,s.props.calendarStartDay),o=[];return s.props.showWeekNumbers&&o.push(Z.createElement("div",{key:"W",className:"react-datepicker__day-name"},s.props.weekLabel||"#")),o.concat([0,1,2,3,4,5,6].map(function(l){var d=zo(a,l),u=s.formatWeekday(d,s.props.locale),p=s.props.weekDayClassName?s.props.weekDayClassName(d):void 0;return Z.createElement("div",{key:l,className:Qt("react-datepicker__day-name",p)},u)}))}),F(B(s),"formatWeekday",function(a,o){return s.props.formatWeekDay?function(l,d,u){return d(ht(l,"EEEE",u))}(a,s.props.formatWeekDay,o):s.props.useWeekdaysShort?function(l,d){return ht(l,"EEE",d)}(a,o):function(l,d){return ht(l,"EEEEEE",d)}(a,o)}),F(B(s),"decreaseYear",function(){s.setState(function(a){var o=a.date;return{date:Cc(o,s.props.showYearPicker?s.props.yearItemNumber:1)}},function(){return s.handleYearChange(s.state.date)})}),F(B(s),"clearSelectingDate",function(){s.setState({selectingDate:null})}),F(B(s),"renderPreviousButton",function(){if(!s.props.renderCustomHeader){var a;switch(!0){case s.props.showMonthYearPicker:a=g_(s.state.date,s.props);break;case s.props.showYearPicker:a=function(_){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},S=N.minDate,P=N.yearItemNumber,O=P===void 0?Ql:P,A=Ga(Pl(Cc(_,O)),O).endPeriod,R=S&&Re(S);return R&&R>A||!1}(s.state.date,s.props);break;default:a=f_(s.state.date,s.props)}if((s.props.forceShowMonthNavigation||s.props.showDisabledMonthNavigation||!a)&&!s.props.showTimeSelectOnly){var o=["react-datepicker__navigation","react-datepicker__navigation--previous"],l=s.decreaseMonth;(s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker)&&(l=s.decreaseYear),a&&s.props.showDisabledMonthNavigation&&(o.push("react-datepicker__navigation--previous--disabled"),l=null);var d=s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker,u=s.props,p=u.previousMonthButtonLabel,f=u.previousYearButtonLabel,x=s.props,g=x.previousMonthAriaLabel,v=g===void 0?typeof p=="string"?p:"Previous Month":g,b=x.previousYearAriaLabel,w=b===void 0?typeof f=="string"?f:"Previous Year":b;return Z.createElement("button",{type:"button",className:o.join(" "),onClick:l,onKeyDown:s.props.handleOnKeyDown,"aria-label":d?w:v},Z.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"].join(" ")},d?s.props.previousYearButtonLabel:s.props.previousMonthButtonLabel))}}}),F(B(s),"increaseYear",function(){s.setState(function(a){var o=a.date;return{date:bo(o,s.props.showYearPicker?s.props.yearItemNumber:1)}},function(){return s.handleYearChange(s.state.date)})}),F(B(s),"renderNextButton",function(){if(!s.props.renderCustomHeader){var a;switch(!0){case s.props.showMonthYearPicker:a=x_(s.state.date,s.props);break;case s.props.showYearPicker:a=function(_){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},S=N.maxDate,P=N.yearItemNumber,O=P===void 0?Ql:P,A=Ga(bo(_,O),O).startPeriod,R=S&&Re(S);return R&&R<A||!1}(s.state.date,s.props);break;default:a=m_(s.state.date,s.props)}if((s.props.forceShowMonthNavigation||s.props.showDisabledMonthNavigation||!a)&&!s.props.showTimeSelectOnly){var o=["react-datepicker__navigation","react-datepicker__navigation--next"];s.props.showTimeSelect&&o.push("react-datepicker__navigation--next--with-time"),s.props.todayButton&&o.push("react-datepicker__navigation--next--with-today-button");var l=s.increaseMonth;(s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker)&&(l=s.increaseYear),a&&s.props.showDisabledMonthNavigation&&(o.push("react-datepicker__navigation--next--disabled"),l=null);var d=s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker,u=s.props,p=u.nextMonthButtonLabel,f=u.nextYearButtonLabel,x=s.props,g=x.nextMonthAriaLabel,v=g===void 0?typeof p=="string"?p:"Next Month":g,b=x.nextYearAriaLabel,w=b===void 0?typeof f=="string"?f:"Next Year":b;return Z.createElement("button",{type:"button",className:o.join(" "),onClick:l,onKeyDown:s.props.handleOnKeyDown,"aria-label":d?w:v},Z.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"].join(" ")},d?s.props.nextYearButtonLabel:s.props.nextMonthButtonLabel))}}}),F(B(s),"renderCurrentMonth",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s.state.date,o=["react-datepicker__current-month"];return s.props.showYearDropdown&&o.push("react-datepicker__current-month--hasYearDropdown"),s.props.showMonthDropdown&&o.push("react-datepicker__current-month--hasMonthDropdown"),s.props.showMonthYearDropdown&&o.push("react-datepicker__current-month--hasMonthYearDropdown"),Z.createElement("div",{className:o.join(" ")},ht(a,s.props.dateFormat,s.props.locale))}),F(B(s),"renderYearDropdown",function(){var a=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(s.props.showYearDropdown&&!a)return Z.createElement(AI,{adjustDateOnChange:s.props.adjustDateOnChange,date:s.state.date,onSelect:s.props.onSelect,setOpen:s.props.setOpen,dropdownMode:s.props.dropdownMode,onChange:s.changeYear,minDate:s.props.minDate,maxDate:s.props.maxDate,year:Re(s.state.date),scrollableYearDropdown:s.props.scrollableYearDropdown,yearDropdownItemNumber:s.props.yearDropdownItemNumber})}),F(B(s),"renderMonthDropdown",function(){var a=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(s.props.showMonthDropdown&&!a)return Z.createElement(FI,{dropdownMode:s.props.dropdownMode,locale:s.props.locale,onChange:s.changeMonth,month:sn(s.state.date),useShortMonthInDropdown:s.props.useShortMonthInDropdown})}),F(B(s),"renderMonthYearDropdown",function(){var a=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(s.props.showMonthYearDropdown&&!a)return Z.createElement(BI,{dropdownMode:s.props.dropdownMode,locale:s.props.locale,dateFormat:s.props.dateFormat,onChange:s.changeMonthYear,minDate:s.props.minDate,maxDate:s.props.maxDate,date:s.state.date,scrollableMonthYearDropdown:s.props.scrollableMonthYearDropdown})}),F(B(s),"handleTodayButtonClick",function(a){s.props.onSelect(d_(),a),s.props.setPreSelection&&s.props.setPreSelection(d_())}),F(B(s),"renderTodayButton",function(){if(s.props.todayButton&&!s.props.showTimeSelectOnly)return Z.createElement("div",{className:"react-datepicker__today-button",onClick:function(a){return s.handleTodayButtonClick(a)}},s.props.todayButton)}),F(B(s),"renderDefaultHeader",function(a){var o=a.monthDate,l=a.i;return Z.createElement("div",{className:"react-datepicker__header ".concat(s.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},s.renderCurrentMonth(o),Z.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(s.props.dropdownMode),onFocus:s.handleDropdownFocus},s.renderMonthDropdown(l!==0),s.renderMonthYearDropdown(l!==0),s.renderYearDropdown(l!==0)),Z.createElement("div",{className:"react-datepicker__day-names"},s.header(o)))}),F(B(s),"renderCustomHeader",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=a.monthDate,l=a.i;if(s.props.showTimeSelect&&!s.state.monthContainer||s.props.showTimeSelectOnly)return null;var d=f_(s.state.date,s.props),u=m_(s.state.date,s.props),p=g_(s.state.date,s.props),f=x_(s.state.date,s.props),x=!s.props.showMonthYearPicker&&!s.props.showQuarterYearPicker&&!s.props.showYearPicker;return Z.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:s.props.onDropdownFocus},s.props.renderCustomHeader(wh(wh({},s.state),{},{customHeaderCount:l,monthDate:o,changeMonth:s.changeMonth,changeYear:s.changeYear,decreaseMonth:s.decreaseMonth,increaseMonth:s.increaseMonth,decreaseYear:s.decreaseYear,increaseYear:s.increaseYear,prevMonthButtonDisabled:d,nextMonthButtonDisabled:u,prevYearButtonDisabled:p,nextYearButtonDisabled:f})),x&&Z.createElement("div",{className:"react-datepicker__day-names"},s.header(o)))}),F(B(s),"renderYearHeader",function(){var a=s.state.date,o=s.props,l=o.showYearPicker,d=Ga(a,o.yearItemNumber),u=d.startPeriod,p=d.endPeriod;return Z.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},l?"".concat(u," - ").concat(p):Re(a))}),F(B(s),"renderHeader",function(a){switch(!0){case s.props.renderCustomHeader!==void 0:return s.renderCustomHeader(a);case(s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker):return s.renderYearHeader(a);default:return s.renderDefaultHeader(a)}}),F(B(s),"renderMonths",function(){var a;if(!s.props.showTimeSelectOnly&&!s.props.showYearPicker){for(var o=[],l=s.props.showPreviousMonths?s.props.monthsShown-1:0,d=_o(s.state.date,l),u=(a=s.props.monthSelectedIn)!==null&&a!==void 0?a:l,p=0;p<s.props.monthsShown;++p){var f=_r(d,p-u+l),x="month-".concat(p),g=p<s.props.monthsShown-1,v=p>0;o.push(Z.createElement("div",{key:x,ref:function(b){s.monthContainer=b},className:"react-datepicker__month-container"},s.renderHeader({monthDate:f,i:p}),Z.createElement(YI,{chooseDayAriaLabelPrefix:s.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:s.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:s.props.weekAriaLabelPrefix,ariaLabelPrefix:s.props.monthAriaLabelPrefix,onChange:s.changeMonthYear,day:f,dayClassName:s.props.dayClassName,calendarStartDay:s.props.calendarStartDay,monthClassName:s.props.monthClassName,onDayClick:s.handleDayClick,handleOnKeyDown:s.props.handleOnDayKeyDown,onDayMouseEnter:s.handleDayMouseEnter,onMouseLeave:s.handleMonthMouseLeave,onWeekSelect:s.props.onWeekSelect,orderInDisplay:p,formatWeekNumber:s.props.formatWeekNumber,locale:s.props.locale,minDate:s.props.minDate,maxDate:s.props.maxDate,excludeDates:s.props.excludeDates,excludeDateIntervals:s.props.excludeDateIntervals,highlightDates:s.props.highlightDates,holidays:s.props.holidays,selectingDate:s.state.selectingDate,includeDates:s.props.includeDates,includeDateIntervals:s.props.includeDateIntervals,inline:s.props.inline,shouldFocusDayInline:s.props.shouldFocusDayInline,fixedHeight:s.props.fixedHeight,filterDate:s.props.filterDate,preSelection:s.props.preSelection,setPreSelection:s.props.setPreSelection,selected:s.props.selected,selectsStart:s.props.selectsStart,selectsEnd:s.props.selectsEnd,selectsRange:s.props.selectsRange,selectsDisabledDaysInRange:s.props.selectsDisabledDaysInRange,showWeekNumbers:s.props.showWeekNumbers,startDate:s.props.startDate,endDate:s.props.endDate,peekNextMonth:s.props.peekNextMonth,setOpen:s.props.setOpen,shouldCloseOnSelect:s.props.shouldCloseOnSelect,renderDayContents:s.props.renderDayContents,renderMonthContent:s.props.renderMonthContent,renderQuarterContent:s.props.renderQuarterContent,renderYearContent:s.props.renderYearContent,disabledKeyboardNavigation:s.props.disabledKeyboardNavigation,showMonthYearPicker:s.props.showMonthYearPicker,showFullMonthYearPicker:s.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:s.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:s.props.showFourColumnMonthYearPicker,showYearPicker:s.props.showYearPicker,showQuarterYearPicker:s.props.showQuarterYearPicker,showWeekPicker:s.props.showWeekPicker,isInputFocused:s.props.isInputFocused,containerRef:s.containerRef,monthShowsDuplicateDaysEnd:g,monthShowsDuplicateDaysStart:v})))}return o}}),F(B(s),"renderYears",function(){if(!s.props.showTimeSelectOnly)return s.props.showYearPicker?Z.createElement("div",{className:"react-datepicker__year--container"},s.renderHeader(),Z.createElement(VI,So({onDayClick:s.handleDayClick,selectingDate:s.state.selectingDate,clearSelectingDate:s.clearSelectingDate,date:s.state.date},s.props,{onYearMouseEnter:s.handleYearMouseEnter,onYearMouseLeave:s.handleYearMouseLeave}))):void 0}),F(B(s),"renderTimeSection",function(){if(s.props.showTimeSelect&&(s.state.monthContainer||s.props.showTimeSelectOnly))return Z.createElement(tk,{selected:s.props.selected,openToDate:s.props.openToDate,onChange:s.props.onTimeChange,timeClassName:s.props.timeClassName,format:s.props.timeFormat,includeTimes:s.props.includeTimes,intervals:s.props.timeIntervals,minTime:s.props.minTime,maxTime:s.props.maxTime,excludeTimes:s.props.excludeTimes,filterTime:s.props.filterTime,timeCaption:s.props.timeCaption,todayButton:s.props.todayButton,showMonthDropdown:s.props.showMonthDropdown,showMonthYearDropdown:s.props.showMonthYearDropdown,showYearDropdown:s.props.showYearDropdown,withPortal:s.props.withPortal,monthRef:s.state.monthContainer,injectTimes:s.props.injectTimes,locale:s.props.locale,handleOnKeyDown:s.props.handleOnKeyDown,showTimeSelectOnly:s.props.showTimeSelectOnly})}),F(B(s),"renderInputTimeSection",function(){var a=new Date(s.props.selected),o=Os(a)&&s.props.selected?"".concat(y_(a.getHours()),":").concat(y_(a.getMinutes())):"";if(s.props.showTimeInput)return Z.createElement(qI,{date:a,timeString:o,timeInputLabel:s.props.timeInputLabel,onChange:s.props.onTimeChange,customTimeInput:s.props.customTimeInput})}),F(B(s),"renderAriaLiveRegion",function(){var a,o=Ga(s.state.date,s.props.yearItemNumber),l=o.startPeriod,d=o.endPeriod;return a=s.props.showYearPicker?"".concat(l," - ").concat(d):s.props.showMonthYearPicker||s.props.showQuarterYearPicker?Re(s.state.date):"".concat(bv(sn(s.state.date),s.props.locale)," ").concat(Re(s.state.date)),Z.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},s.state.isRenderAriaLiveMessage&&a)}),F(B(s),"renderChildren",function(){if(s.props.children)return Z.createElement("div",{className:"react-datepicker__children-container"},s.props.children)}),s.containerRef=Z.createRef(),s.state={date:s.getDateInView(),selectingDate:null,monthContainer:null,isRenderAriaLiveMessage:!1},s}return Ht(n,[{key:"componentDidMount",value:function(){var r=this;this.props.showTimeSelect&&(this.assignMonthContainer=void r.setState({monthContainer:r.monthContainer}))}},{key:"componentDidUpdate",value:function(r){var s=this;if(!this.props.preSelection||st(this.props.preSelection,r.preSelection)&&this.props.monthSelectedIn===r.monthSelectedIn)this.props.openToDate&&!st(this.props.openToDate,r.openToDate)&&this.setState({date:this.props.openToDate});else{var a=!gr(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return a&&s.handleCustomMonthChange(s.state.date)})}}},{key:"render",value:function(){var r=this.props.container||ZI;return Z.createElement("div",{style:{display:"contents"},ref:this.containerRef},Z.createElement(r,{className:Qt("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showPopperArrow:this.props.showPopperArrow,arrowProps:this.props.arrowProps},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))}}],[{key:"defaultProps",get:function(){return{onDropdownFocus:function(){},monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",customTimeInput:null,yearItemNumber:Ql}}}]),n}(),QI=function(t){var e=t.icon,n=t.className,r=n===void 0?"":n,s=t.onClick,a="react-datepicker__calendar-icon";return Z.isValidElement(e)?Z.cloneElement(e,{className:"".concat(e.props.className||""," ").concat(a," ").concat(r),onClick:function(o){typeof e.props.onClick=="function"&&e.props.onClick(o),typeof s=="function"&&s(o)}}):typeof e=="string"?Z.createElement("i",{className:"".concat(a," ").concat(e," ").concat(r),"aria-hidden":"true",onClick:s}):Z.createElement("svg",{className:"".concat(a," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},Z.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},nk=function(t){Wt(n,Z.Component);var e=Yt(n);function n(r){var s;return Ut(this,n),(s=e.call(this,r)).el=document.createElement("div"),s}return Ht(n,[{key:"componentDidMount",value:function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.portalRoot.removeChild(this.el)}},{key:"render",value:function(){return QT.createPortal(this.props.children,this.el)}}]),n}(),XI=function(t){return!t.disabled&&t.tabIndex!==-1},rk=function(t){Wt(n,Z.Component);var e=Yt(n);function n(r){var s;return Ut(this,n),F(B(s=e.call(this,r)),"getTabChildren",function(){return Array.prototype.slice.call(s.tabLoopRef.current.querySelectorAll("[tabindex], a, button, input, select, textarea"),1,-1).filter(XI)}),F(B(s),"handleFocusStart",function(){var a=s.getTabChildren();a&&a.length>1&&a[a.length-1].focus()}),F(B(s),"handleFocusEnd",function(){var a=s.getTabChildren();a&&a.length>1&&a[0].focus()}),s.tabLoopRef=Z.createRef(),s}return Ht(n,[{key:"render",value:function(){return this.props.enableTabLoop?Z.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},Z.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:"0",onFocus:this.handleFocusStart}),this.props.children,Z.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:"0",onFocus:this.handleFocusEnd})):this.props.children}}],[{key:"defaultProps",get:function(){return{enableTabLoop:!0}}}]),n}(),JI=function(t){Wt(n,Z.Component);var e=Yt(n);function n(){return Ut(this,n),e.apply(this,arguments)}return Ht(n,[{key:"render",value:function(){var r,s=this.props,a=s.className,o=s.wrapperClassName,l=s.hidePopper,d=s.popperComponent,u=s.popperModifiers,p=s.popperPlacement,f=s.popperProps,x=s.targetComponent,g=s.enableTabLoop,v=s.popperOnKeyDown,b=s.portalId,w=s.portalHost;if(!l){var _=Qt("react-datepicker-popper",a);r=Z.createElement(jI,So({modifiers:u,placement:p},f),function(S){var P=S.ref,O=S.style,A=S.placement,R=S.arrowProps;return Z.createElement(rk,{enableTabLoop:g},Z.createElement("div",{ref:P,style:O,className:_,"data-placement":A,onKeyDown:v},Z.cloneElement(d,{arrowProps:R})))})}this.props.popperContainer&&(r=Z.createElement(this.props.popperContainer,{},r)),b&&!l&&(r=Z.createElement(nk,{portalId:b,portalHost:w},r));var N=Qt("react-datepicker-wrapper",o);return Z.createElement(iA,{className:"react-datepicker-manager"},Z.createElement(CI,null,function(S){var P=S.ref;return Z.createElement("div",{ref:P,className:N},x)}),r)}}],[{key:"defaultProps",get:function(){return{hidePopper:!0,popperModifiers:[],popperProps:{},popperPlacement:"bottom-start"}}}]),n}(),w_="react-datepicker-ignore-onclickoutside",eF=pp(GI),Qf="Date input not valid.",qd=function(t){Wt(n,Z.Component);var e=Yt(n);function n(r){var s;return Ut(this,n),F(B(s=e.call(this,r)),"getPreSelection",function(){return s.props.openToDate?s.props.openToDate:s.props.selectsEnd&&s.props.startDate?s.props.startDate:s.props.selectsStart&&s.props.endDate?s.props.endDate:tt()}),F(B(s),"modifyHolidays",function(){var a;return(a=s.props.holidays)===null||a===void 0?void 0:a.reduce(function(o,l){var d=new Date(l.date);return Sc(d)?[].concat(Dc(o),[wh(wh({},l),{},{date:d})]):o},[])}),F(B(s),"calcInitialState",function(){var a,o=s.getPreSelection(),l=GN(s.props),d=QN(s.props),u=l&&Hs(o,Ur(l))?l:d&&ii(o,Dg(d))?d:o;return{open:s.props.startOpen||!1,preventFocus:!1,preSelection:(a=s.props.selectsRange?s.props.startDate:s.props.selected)!==null&&a!==void 0?a:u,highlightDates:v_(s.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1}}),F(B(s),"clearPreventFocusTimeout",function(){s.preventFocusTimeout&&clearTimeout(s.preventFocusTimeout)}),F(B(s),"setFocus",function(){s.input&&s.input.focus&&s.input.focus({preventScroll:!0})}),F(B(s),"setBlur",function(){s.input&&s.input.blur&&s.input.blur(),s.cancelFocusInput()}),F(B(s),"setOpen",function(a){var o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];s.setState({open:a,preSelection:a&&s.state.open?s.state.preSelection:s.calcInitialState().preSelection,lastPreSelectChange:Xf},function(){a||s.setState(function(l){return{focused:!!o&&l.focused}},function(){!o&&s.setBlur(),s.setState({inputValue:null})})})}),F(B(s),"inputOk",function(){return hp(s.state.preSelection)}),F(B(s),"isCalendarOpen",function(){return s.props.open===void 0?s.state.open&&!s.props.disabled&&!s.props.readOnly:s.props.open}),F(B(s),"handleFocus",function(a){s.state.preventFocus||(s.props.onFocus(a),s.props.preventOpenOnFocus||s.props.readOnly||s.setOpen(!0)),s.setState({focused:!0})}),F(B(s),"sendFocusBackToInput",function(){s.preventFocusTimeout&&s.clearPreventFocusTimeout(),s.setState({preventFocus:!0},function(){s.preventFocusTimeout=setTimeout(function(){s.setFocus(),s.setState({preventFocus:!1})})})}),F(B(s),"cancelFocusInput",function(){clearTimeout(s.inputFocusTimeout),s.inputFocusTimeout=null}),F(B(s),"deferFocusInput",function(){s.cancelFocusInput(),s.inputFocusTimeout=setTimeout(function(){return s.setFocus()},1)}),F(B(s),"handleDropdownFocus",function(){s.cancelFocusInput()}),F(B(s),"handleBlur",function(a){(!s.state.open||s.props.withPortal||s.props.showTimeInput)&&s.props.onBlur(a),s.setState({focused:!1})}),F(B(s),"handleCalendarClickOutside",function(a){s.props.inline||s.setOpen(!1),s.props.onClickOutside(a),s.props.withPortal&&a.preventDefault()}),F(B(s),"handleChange",function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var d=o[0];if(!s.props.onChangeRaw||(s.props.onChangeRaw.apply(B(s),o),typeof d.isDefaultPrevented=="function"&&!d.isDefaultPrevented())){s.setState({inputValue:d.target.value,lastPreSelectChange:tF});var u,p,f,x,g,v,b,w,_=(u=d.target.value,p=s.props.dateFormat,f=s.props.locale,x=s.props.strictParsing,g=s.props.minDate,v=null,b=Gi(f)||Gi(Ki()),w=!0,Array.isArray(p)?(p.forEach(function(N){var S=Hf(u,N,new Date,{locale:b});x&&(w=Os(S,g)&&u===ht(S,N,f)),Os(S,g)&&w&&(v=S)}),v):(v=Hf(u,p,new Date,{locale:b}),x?w=Os(v)&&u===ht(v,p,f):Os(v)||(p=p.match(PI).map(function(N){var S=N[0];return S==="p"||S==="P"?b?(0,TI[S])(N,b.formatLong):S:N}).join(""),u.length>0&&(v=Hf(u,p.slice(0,u.length),new Date)),Os(v)||(v=new Date(u))),Os(v)&&w?v:null));s.props.showTimeSelectOnly&&s.props.selected&&_&&!st(_,s.props.selected)&&(_=EI(s.props.selected,{hours:Br(_),minutes:zr(_),seconds:$b(_)})),!_&&d.target.value||(s.props.showWeekPicker&&(_=Wr(_,s.props.locale,s.props.calendarStartDay)),s.setSelected(_,d,!0))}}),F(B(s),"handleSelect",function(a,o,l){if(s.props.shouldCloseOnSelect&&!s.props.showTimeSelect&&s.sendFocusBackToInput(),s.props.onChangeRaw&&s.props.onChangeRaw(o),s.props.showWeekPicker&&(a=Wr(a,s.props.locale,s.props.calendarStartDay)),s.setSelected(a,o,!1,l),s.props.showDateSelect&&s.setState({isRenderAriaLiveMessage:!0}),!s.props.shouldCloseOnSelect||s.props.showTimeSelect)s.setPreSelection(a);else if(!s.props.inline){s.props.selectsRange||s.setOpen(!1);var d=s.props,u=d.startDate,p=d.endDate;!u||p||Hs(a,u)||s.setOpen(!1)}}),F(B(s),"setSelected",function(a,o,l,d){var u=a;if(s.props.showYearPicker){if(u!==null&&KN(Re(u),s.props))return}else if(s.props.showMonthYearPicker){if(u!==null&&ZN(u,s.props))return}else if(u!==null&&mp(u,s.props))return;var p=s.props,f=p.onChange,x=p.selectsRange,g=p.startDate,v=p.endDate;if(!Ui(s.props.selected,u)||s.props.allowSameDay||x)if(u!==null&&(!s.props.selected||l&&(s.props.showTimeSelect||s.props.showTimeSelectOnly||s.props.showTimeInput)||(u=l_(u,{hour:Br(s.props.selected),minute:zr(s.props.selected),second:$b(s.props.selected)})),s.props.inline||s.setState({preSelection:u}),s.props.focusSelectedMonth||s.setState({monthSelectedIn:d})),x){var b=g&&!v,w=g&&v;!g&&!v?f([u,null],o):b&&(Hs(u,g)?f([u,null],o):f([g,u],o)),w&&f([u,null],o)}else f(u,o);l||(s.props.onSelect(u,o),s.setState({inputValue:null}))}),F(B(s),"setPreSelection",function(a){var o=s.props.minDate!==void 0,l=s.props.maxDate!==void 0,d=!0;if(a){s.props.showWeekPicker&&(a=Wr(a,s.props.locale,s.props.calendarStartDay));var u=Ur(a);if(o&&l)d=Cu(a,s.props.minDate,s.props.maxDate);else if(o){var p=Ur(s.props.minDate);d=ii(a,p)||Ui(u,p)}else if(l){var f=Dg(s.props.maxDate);d=Hs(a,f)||Ui(u,f)}}d&&s.setState({preSelection:a})}),F(B(s),"toggleCalendar",function(){s.setOpen(!s.state.open)}),F(B(s),"handleTimeChange",function(a){var o=s.props.selected?s.props.selected:s.getPreSelection(),l=s.props.selected?a:l_(o,{hour:Br(a),minute:zr(a)});s.setState({preSelection:l}),s.props.onChange(l),s.props.shouldCloseOnSelect&&(s.sendFocusBackToInput(),s.setOpen(!1)),s.props.showTimeInput&&s.setOpen(!0),(s.props.showTimeSelectOnly||s.props.showTimeSelect)&&s.setState({isRenderAriaLiveMessage:!0}),s.setState({inputValue:null})}),F(B(s),"onInputClick",function(){s.props.disabled||s.props.readOnly||s.setOpen(!0),s.props.onInputClick()}),F(B(s),"onInputKeyDown",function(a){s.props.onKeyDown(a);var o=a.key;if(s.state.open||s.props.inline||s.props.preventOpenOnFocus){if(s.state.open){if(o==="ArrowDown"||o==="ArrowUp"){a.preventDefault();var l=s.props.showWeekPicker&&s.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',d=s.calendar.componentNode&&s.calendar.componentNode.querySelector(l);return void(d&&d.focus({preventScroll:!0}))}var u=tt(s.state.preSelection);o==="Enter"?(a.preventDefault(),s.inputOk()&&s.state.lastPreSelectChange===Xf?(s.handleSelect(u,a),!s.props.shouldCloseOnSelect&&s.setPreSelection(u)):s.setOpen(!1)):o==="Escape"?(a.preventDefault(),s.sendFocusBackToInput(),s.setOpen(!1)):o==="Tab"&&s.setOpen(!1),s.inputOk()||s.props.onInputError({code:1,msg:Qf})}}else o!=="ArrowDown"&&o!=="ArrowUp"&&o!=="Enter"||s.onInputClick()}),F(B(s),"onPortalKeyDown",function(a){a.key==="Escape"&&(a.preventDefault(),s.setState({preventFocus:!0},function(){s.setOpen(!1),setTimeout(function(){s.setFocus(),s.setState({preventFocus:!1})})}))}),F(B(s),"onDayKeyDown",function(a){s.props.onKeyDown(a);var o=a.key,l=tt(s.state.preSelection);if(o==="Enter")a.preventDefault(),s.handleSelect(l,a),!s.props.shouldCloseOnSelect&&s.setPreSelection(l);else if(o==="Escape")a.preventDefault(),s.setOpen(!1),s.inputOk()||s.props.onInputError({code:1,msg:Qf});else if(!s.props.disabledKeyboardNavigation){var d;switch(o){case"ArrowLeft":d=s.props.showWeekPicker?Fb(l,1):x6(l,1);break;case"ArrowRight":d=s.props.showWeekPicker?fh(l,1):zo(l,1);break;case"ArrowUp":d=Fb(l,1);break;case"ArrowDown":d=fh(l,1);break;case"PageUp":d=_o(l,1);break;case"PageDown":d=_r(l,1);break;case"Home":d=Cc(l,1);break;case"End":d=bo(l,1);break;default:d=null}if(!d)return void(s.props.onInputError&&s.props.onInputError({code:1,msg:Qf}));if(a.preventDefault(),s.setState({lastPreSelectChange:Xf}),s.props.adjustDateOnChange&&s.setSelected(d),s.setPreSelection(d),s.props.inline){var u=sn(l),p=sn(d),f=Re(l),x=Re(d);u!==p||f!==x?s.setState({shouldFocusDayInline:!0}):s.setState({shouldFocusDayInline:!1})}}}),F(B(s),"onPopperKeyDown",function(a){a.key==="Escape"&&(a.preventDefault(),s.sendFocusBackToInput())}),F(B(s),"onClearClick",function(a){a&&a.preventDefault&&a.preventDefault(),s.sendFocusBackToInput(),s.props.selectsRange?s.props.onChange([null,null],a):s.props.onChange(null,a),s.setState({inputValue:null})}),F(B(s),"clear",function(){s.onClearClick()}),F(B(s),"onScroll",function(a){typeof s.props.closeOnScroll=="boolean"&&s.props.closeOnScroll?a.target!==document&&a.target!==document.documentElement&&a.target!==document.body||s.setOpen(!1):typeof s.props.closeOnScroll=="function"&&s.props.closeOnScroll(a)&&s.setOpen(!1)}),F(B(s),"renderCalendar",function(){return s.props.inline||s.isCalendarOpen()?Z.createElement(eF,{ref:function(a){s.calendar=a},locale:s.props.locale,calendarStartDay:s.props.calendarStartDay,chooseDayAriaLabelPrefix:s.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:s.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:s.props.weekAriaLabelPrefix,monthAriaLabelPrefix:s.props.monthAriaLabelPrefix,adjustDateOnChange:s.props.adjustDateOnChange,setOpen:s.setOpen,shouldCloseOnSelect:s.props.shouldCloseOnSelect,dateFormat:s.props.dateFormatCalendar,useWeekdaysShort:s.props.useWeekdaysShort,formatWeekDay:s.props.formatWeekDay,dropdownMode:s.props.dropdownMode,selected:s.props.selected,preSelection:s.state.preSelection,onSelect:s.handleSelect,onWeekSelect:s.props.onWeekSelect,openToDate:s.props.openToDate,minDate:s.props.minDate,maxDate:s.props.maxDate,selectsStart:s.props.selectsStart,selectsEnd:s.props.selectsEnd,selectsRange:s.props.selectsRange,startDate:s.props.startDate,endDate:s.props.endDate,excludeDates:s.props.excludeDates,excludeDateIntervals:s.props.excludeDateIntervals,filterDate:s.props.filterDate,onClickOutside:s.handleCalendarClickOutside,formatWeekNumber:s.props.formatWeekNumber,highlightDates:s.state.highlightDates,holidays:MI(s.modifyHolidays()),includeDates:s.props.includeDates,includeDateIntervals:s.props.includeDateIntervals,includeTimes:s.props.includeTimes,injectTimes:s.props.injectTimes,inline:s.props.inline,shouldFocusDayInline:s.state.shouldFocusDayInline,peekNextMonth:s.props.peekNextMonth,showMonthDropdown:s.props.showMonthDropdown,showPreviousMonths:s.props.showPreviousMonths,useShortMonthInDropdown:s.props.useShortMonthInDropdown,showMonthYearDropdown:s.props.showMonthYearDropdown,showWeekNumbers:s.props.showWeekNumbers,showYearDropdown:s.props.showYearDropdown,withPortal:s.props.withPortal,forceShowMonthNavigation:s.props.forceShowMonthNavigation,showDisabledMonthNavigation:s.props.showDisabledMonthNavigation,scrollableYearDropdown:s.props.scrollableYearDropdown,scrollableMonthYearDropdown:s.props.scrollableMonthYearDropdown,todayButton:s.props.todayButton,weekLabel:s.props.weekLabel,outsideClickIgnoreClass:w_,fixedHeight:s.props.fixedHeight,monthsShown:s.props.monthsShown,monthSelectedIn:s.state.monthSelectedIn,onDropdownFocus:s.handleDropdownFocus,onMonthChange:s.props.onMonthChange,onYearChange:s.props.onYearChange,dayClassName:s.props.dayClassName,weekDayClassName:s.props.weekDayClassName,monthClassName:s.props.monthClassName,timeClassName:s.props.timeClassName,showDateSelect:s.props.showDateSelect,showTimeSelect:s.props.showTimeSelect,showTimeSelectOnly:s.props.showTimeSelectOnly,onTimeChange:s.handleTimeChange,timeFormat:s.props.timeFormat,timeIntervals:s.props.timeIntervals,minTime:s.props.minTime,maxTime:s.props.maxTime,excludeTimes:s.props.excludeTimes,filterTime:s.props.filterTime,timeCaption:s.props.timeCaption,className:s.props.calendarClassName,container:s.props.calendarContainer,yearItemNumber:s.props.yearItemNumber,yearDropdownItemNumber:s.props.yearDropdownItemNumber,previousMonthAriaLabel:s.props.previousMonthAriaLabel,previousMonthButtonLabel:s.props.previousMonthButtonLabel,nextMonthAriaLabel:s.props.nextMonthAriaLabel,nextMonthButtonLabel:s.props.nextMonthButtonLabel,previousYearAriaLabel:s.props.previousYearAriaLabel,previousYearButtonLabel:s.props.previousYearButtonLabel,nextYearAriaLabel:s.props.nextYearAriaLabel,nextYearButtonLabel:s.props.nextYearButtonLabel,timeInputLabel:s.props.timeInputLabel,disabledKeyboardNavigation:s.props.disabledKeyboardNavigation,renderCustomHeader:s.props.renderCustomHeader,popperProps:s.props.popperProps,renderDayContents:s.props.renderDayContents,renderMonthContent:s.props.renderMonthContent,renderQuarterContent:s.props.renderQuarterContent,renderYearContent:s.props.renderYearContent,onDayMouseEnter:s.props.onDayMouseEnter,onMonthMouseLeave:s.props.onMonthMouseLeave,onYearMouseEnter:s.props.onYearMouseEnter,onYearMouseLeave:s.props.onYearMouseLeave,selectsDisabledDaysInRange:s.props.selectsDisabledDaysInRange,showTimeInput:s.props.showTimeInput,showMonthYearPicker:s.props.showMonthYearPicker,showFullMonthYearPicker:s.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:s.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:s.props.showFourColumnMonthYearPicker,showYearPicker:s.props.showYearPicker,showQuarterYearPicker:s.props.showQuarterYearPicker,showWeekPicker:s.props.showWeekPicker,showPopperArrow:s.props.showPopperArrow,excludeScrollbar:s.props.excludeScrollbar,handleOnKeyDown:s.props.onKeyDown,handleOnDayKeyDown:s.onDayKeyDown,isInputFocused:s.state.focused,customTimeInput:s.props.customTimeInput,setPreSelection:s.setPreSelection},s.props.children):null}),F(B(s),"renderAriaLiveRegion",function(){var a,o=s.props,l=o.dateFormat,d=o.locale,u=s.props.showTimeInput||s.props.showTimeSelect?"PPPPp":"PPPP";return a=s.props.selectsRange?"Selected start date: ".concat(Tr(s.props.startDate,{dateFormat:u,locale:d}),". ").concat(s.props.endDate?"End date: "+Tr(s.props.endDate,{dateFormat:u,locale:d}):""):s.props.showTimeSelectOnly?"Selected time: ".concat(Tr(s.props.selected,{dateFormat:l,locale:d})):s.props.showYearPicker?"Selected year: ".concat(Tr(s.props.selected,{dateFormat:"yyyy",locale:d})):s.props.showMonthYearPicker?"Selected month: ".concat(Tr(s.props.selected,{dateFormat:"MMMM yyyy",locale:d})):s.props.showQuarterYearPicker?"Selected quarter: ".concat(Tr(s.props.selected,{dateFormat:"yyyy, QQQ",locale:d})):"Selected date: ".concat(Tr(s.props.selected,{dateFormat:u,locale:d})),Z.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},a)}),F(B(s),"renderDateInput",function(){var a,o=Qt(s.props.className,F({},w_,s.state.open)),l=s.props.customInput||Z.createElement("input",{type:"text"}),d=s.props.customInputRef||"ref",u=typeof s.props.value=="string"?s.props.value:typeof s.state.inputValue=="string"?s.state.inputValue:s.props.selectsRange?function(p,f,x){if(!p)return"";var g=Tr(p,x),v=f?Tr(f,x):"";return"".concat(g," - ").concat(v)}(s.props.startDate,s.props.endDate,s.props):Tr(s.props.selected,s.props);return Z.cloneElement(l,(F(F(F(F(F(F(F(F(F(F(a={},d,function(p){s.input=p}),"value",u),"onBlur",s.handleBlur),"onChange",s.handleChange),"onClick",s.onInputClick),"onFocus",s.handleFocus),"onKeyDown",s.onInputKeyDown),"id",s.props.id),"name",s.props.name),"form",s.props.form),F(F(F(F(F(F(F(F(F(F(a,"autoFocus",s.props.autoFocus),"placeholder",s.props.placeholderText),"disabled",s.props.disabled),"autoComplete",s.props.autoComplete),"className",Qt(l.props.className,o)),"title",s.props.title),"readOnly",s.props.readOnly),"required",s.props.required),"tabIndex",s.props.tabIndex),"aria-describedby",s.props.ariaDescribedBy),F(F(F(a,"aria-invalid",s.props.ariaInvalid),"aria-labelledby",s.props.ariaLabelledBy),"aria-required",s.props.ariaRequired)))}),F(B(s),"renderClearButton",function(){var a=s.props,o=a.isClearable,l=a.disabled,d=a.selected,u=a.startDate,p=a.endDate,f=a.clearButtonTitle,x=a.clearButtonClassName,g=x===void 0?"":x,v=a.ariaLabelClose,b=v===void 0?"Close":v;return!o||d==null&&u==null&&p==null?null:Z.createElement("button",{type:"button",className:Qt("react-datepicker__close-icon",g,{"react-datepicker__close-icon--disabled":l}),disabled:l,"aria-label":b,onClick:s.onClearClick,title:f,tabIndex:-1})}),s.state=s.calcInitialState(),s.preventFocusTimeout=null,s}return Ht(n,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll,!0)}},{key:"componentDidUpdate",value:function(r,s){var a,o;r.inline&&(a=r.selected,o=this.props.selected,a&&o?sn(a)!==sn(o)||Re(a)!==Re(o):a!==o)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&r.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),r.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:v_(this.props.highlightDates)}),s.focused||Ui(r.selected,this.props.selected)||this.setState({inputValue:null}),s.open!==this.state.open&&(s.open===!1&&this.state.open===!0&&this.props.onCalendarOpen(),s.open===!0&&this.state.open===!1&&this.props.onCalendarClose())}},{key:"componentWillUnmount",value:function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0)}},{key:"renderInputContainer",value:function(){var r=this.props,s=r.showIcon,a=r.icon,o=r.calendarIconClassname,l=r.toggleCalendarOnIconClick,d=this.state.open;return Z.createElement("div",{className:"react-datepicker__input-container".concat(s?" react-datepicker__view-calendar-icon":"")},s&&Z.createElement(QI,So({icon:a,className:"".concat(o," ").concat(d&&"react-datepicker-ignore-onclickoutside")},l?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())}},{key:"render",value:function(){var r=this.renderCalendar();if(this.props.inline)return r;if(this.props.withPortal){var s=this.state.open?Z.createElement(rk,{enableTabLoop:this.props.enableTabLoop},Z.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},r)):null;return this.state.open&&this.props.portalId&&(s=Z.createElement(nk,{portalId:this.props.portalId,portalHost:this.props.portalHost},s)),Z.createElement("div",null,this.renderInputContainer(),s)}return Z.createElement(JI,{className:this.props.popperClassName,wrapperClassName:this.props.wrapperClassName,hidePopper:!this.isCalendarOpen(),portalId:this.props.portalId,portalHost:this.props.portalHost,popperModifiers:this.props.popperModifiers,targetComponent:this.renderInputContainer(),popperContainer:this.props.popperContainer,popperComponent:r,popperPlacement:this.props.popperPlacement,popperProps:this.props.popperProps,popperOnKeyDown:this.onPopperKeyDown,enableTabLoop:this.props.enableTabLoop})}}],[{key:"defaultProps",get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",onChange:function(){},disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",onFocus:function(){},onBlur:function(){},onKeyDown:function(){},onInputClick:function(){},onSelect:function(){},onClickOutside:function(){},onMonthChange:function(){},onCalendarOpen:function(){},onCalendarClose:function(){},preventOpenOnFocus:!1,onYearChange:function(){},onInputError:function(){},monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:Ql,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1}}}]),n}(),tF="input",Xf="navigate";function nF({discounts:t=[],onChange:e}){const[n,r]=j.useState({price:"",start_date:null,end_date:null,description:""}),s=()=>{if(!n.price||!n.start_date||!n.end_date){$.error("الرجاء إدخال السعر وتواريخ التخفيض");return}if(n.start_date>=n.end_date){$.error("تاريخ البداية يجب أن يكون قبل تاريخ النهاية");return}const l={id:Vr(),...n};e([...t,l]),r({price:"",start_date:null,end_date:null,description:""})},a=l=>{e(t.filter(d=>d.id!==l))},o=(l,d,u)=>{e(t.map(p=>p.id===l?{...p,[d]:u}:p))};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"التخفيضات المجدولة"}),t.length>0?i.jsx("div",{className:"space-y-4",children:t.map(l=>i.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex-1 grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"سعر التخفيض (₪)"}),i.jsx("input",{type:"number",value:l.price,onChange:d=>o(l.id,"price",parseFloat(d.target.value)),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ البداية"}),i.jsx(qd,{selected:new Date(l.start_date),onChange:d=>o(l.id,"start_date",d),className:"w-full border rounded-md px-3 py-1.5",dateFormat:"yyyy/MM/dd",minDate:new Date})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ النهاية"}),i.jsx(qd,{selected:new Date(l.end_date),onChange:d=>o(l.id,"end_date",d),className:"w-full border rounded-md px-3 py-1.5",dateFormat:"yyyy/MM/dd",minDate:new Date(l.start_date)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الوصف"}),i.jsx("input",{type:"text",value:l.description,onChange:d=>o(l.id,"description",d.target.value),className:"w-full border rounded-md px-3 py-1.5",placeholder:"مثال: تخفيض العيد"})]})]}),i.jsx("button",{type:"button",onClick:()=>a(l.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]},l.id))}):i.jsx("p",{className:"text-gray-500 text-center py-4",children:"لا توجد تخفيضات مجدولة"})]}),i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"إضافة تخفيض جديد"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"سعر التخفيض (₪)"}),i.jsx("input",{type:"number",value:n.price,onChange:l=>r({...n,price:parseFloat(l.target.value)}),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ البداية"}),i.jsx(qd,{selected:n.start_date,onChange:l=>r({...n,start_date:l}),className:"w-full border rounded-md px-3 py-1.5",dateFormat:"yyyy/MM/dd",minDate:new Date,placeholderText:"اختر تاريخ البداية"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ النهاية"}),i.jsx(qd,{selected:n.end_date,onChange:l=>r({...n,end_date:l}),className:"w-full border rounded-md px-3 py-1.5",dateFormat:"yyyy/MM/dd",minDate:n.start_date||new Date,placeholderText:"اختر تاريخ النهاية"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الوصف"}),i.jsx("input",{type:"text",value:n.description,onChange:l=>r({...n,description:l.target.value}),className:"w-full border rounded-md px-3 py-1.5",placeholder:"مثال: تخفيض العيد"})]})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{type:"button",onClick:s,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"إضافة التخفيض"})})]})]})}function rF({attributes:t=[],onChange:e}){const[n,r]=j.useState({name:"",type:"select",required:!1,values:[]}),[s,a]=j.useState(""),o=()=>{if(!n.name){$.error("الرجاء إدخال اسم السمة");return}if(n.type==="select"&&n.values.length===0){$.error("الرجاء إضافة قيم للسمة");return}const f={id:Vr(),...n};e([...t,f]),r({name:"",type:"select",required:!1,values:[]})},l=f=>{e(t.filter(x=>x.id!==f))},d=(f,x,g)=>{e(t.map(v=>v.id===f?{...v,[x]:g}:v))},u=()=>{if(!s){$.error("الرجاء إدخال قيمة");return}r({...n,values:[...n.values,{id:Vr(),value:s}]}),a("")},p=(f,x)=>{e(t.map(g=>g.id===f?{...g,values:g.values.filter(v=>v.id!==x)}:g))};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"السمات العامة"}),t.length>0?i.jsx("div",{className:"space-y-4",children:t.map(f=>i.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex-1 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم السمة"}),i.jsx("input",{type:"text",value:f.name,onChange:x=>d(f.id,"name",x.target.value),className:"w-full border rounded-md px-3 py-1.5",placeholder:"مثال: المقاس"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع السمة"}),i.jsxs("select",{value:f.type,onChange:x=>d(f.id,"type",x.target.value),className:"w-full border rounded-md px-3 py-1.5",children:[i.jsx("option",{value:"select",children:"قائمة اختيار"}),i.jsx("option",{value:"text",children:"نص"}),i.jsx("option",{value:"number",children:"رقم"})]})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:f.required,onChange:x=>d(f.id,"required",x.target.checked),className:"ml-2"}),"إجباري"]})})]}),f.type==="select"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"القيم المتاحة"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:f.values.map(x=>i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[x.value,i.jsx("button",{type:"button",onClick:()=>p(f.id,x.id),className:"mr-1 text-blue-600 hover:text-blue-800",children:"×"})]},x.id))})]})]}),i.jsx("button",{type:"button",onClick:()=>l(f.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]},f.id))}):i.jsx("p",{className:"text-gray-500 text-center py-4",children:"لا توجد سمات بعد"})]}),i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"إضافة سمة جديدة"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم السمة"}),i.jsx("input",{type:"text",value:n.name,onChange:f=>r({...n,name:f.target.value}),className:"w-full border rounded-md px-3 py-1.5",placeholder:"مثال: المقاس"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع السمة"}),i.jsxs("select",{value:n.type,onChange:f=>r({...n,type:f.target.value}),className:"w-full border rounded-md px-3 py-1.5",children:[i.jsx("option",{value:"select",children:"قائمة اختيار"}),i.jsx("option",{value:"text",children:"نص"}),i.jsx("option",{value:"number",children:"رقم"})]})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:n.required,onChange:f=>r({...n,required:f.target.checked}),className:"ml-2"}),"إجباري"]})})]}),n.type==="select"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"القيم المتاحة"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:s,onChange:f=>a(f.target.value),className:"flex-1 border rounded-md px-3 py-1.5",placeholder:"أدخل قيمة"}),i.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"إضافة"})]}),i.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:n.values.map(f=>i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[f.value,i.jsx("button",{type:"button",onClick:()=>r({...n,values:n.values.filter(x=>x.id!==f.id)}),className:"mr-1 text-blue-600 hover:text-blue-800",children:"×"})]},f.id))})]})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{type:"button",onClick:o,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"إضافة السمة"})})]})]})}function sF({addons:t=[],onChange:e}){const[n,r]=j.useState({name:"",price:0,is_default:!1,is_required:!1}),s=()=>{if(!n.name){$.error("الرجاء إدخال اسم الإضافة");return}const l={id:Vr(),...n};e([...t,l]),r({name:"",price:0,is_default:!1,is_required:!1})},a=l=>{e(t.filter(d=>d.id!==l))},o=(l,d,u)=>{e(t.map(p=>p.id===l?{...p,[d]:u}:p))};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"الإضافات"}),t.length>0?i.jsx("div",{className:"space-y-4",children:t.map(l=>i.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex-1 grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الإضافة"}),i.jsx("input",{type:"text",value:l.name,onChange:d=>o(l.id,"name",d.target.value),className:"w-full border rounded-md px-3 py-1.5"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعر (₪)"}),i.jsx("input",{type:"number",value:l.price,onChange:d=>o(l.id,"price",parseFloat(d.target.value)),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:l.is_default,onChange:d=>o(l.id,"is_default",d.target.checked),className:"ml-2"}),"افتراضي"]})}),i.jsx("div",{className:"flex items-end",children:i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:l.is_required,onChange:d=>o(l.id,"is_required",d.target.checked),className:"ml-2"}),"إجباري"]})})]}),i.jsx("button",{type:"button",onClick:()=>a(l.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]},l.id))}):i.jsx("p",{className:"text-gray-500 text-center py-4",children:"لا توجد إضافات بعد"})]}),i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"إضافة إضافة جديدة"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الإضافة"}),i.jsx("input",{type:"text",value:n.name,onChange:l=>r({...n,name:l.target.value}),className:"w-full border rounded-md px-3 py-1.5",placeholder:"مثال: سكر إضافي"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعر (₪)"}),i.jsx("input",{type:"number",value:n.price,onChange:l=>r({...n,price:parseFloat(l.target.value)}),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:n.is_default,onChange:l=>r({...n,is_default:l.target.checked}),className:"ml-2"}),"افتراضي"]})}),i.jsx("div",{className:"flex items-end",children:i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:n.is_required,onChange:l=>r({...n,is_required:l.target.checked}),className:"ml-2"}),"إجباري"]})})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{type:"button",onClick:s,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"إضافة"})})]})]})}function iF({onSubmit:t,initialData:e=null}){const[n,r]=j.useState({name:"",description:"",price:"",wholesale_price:"",discount_price:"",scheduled_discounts:[],vendor_id:"",category_id:"",status:"active",image:"",gallery:[],video:"",stock:0,addons:[],type:"regular",variants:[],wholesale_prices:[],attributes:[],...e}),[s,a]=j.useState([]),[o,l]=j.useState([]),[d,u]=j.useState(!0);j.useEffect(()=>{(async()=>{try{u(!0);const{data:x,error:g}=await te.from("vendors").select("id, store_name").order("store_name");g?(console.error("Error fetching vendors:",g),a([{id:1,store_name:"متجر كوفي"},{id:2,store_name:"متجر الشاي"},{id:3,store_name:"متجر العصائر"}])):a(x||[]);const{data:v,error:b}=await te.from("categories").select("id, name").order("name");b?(console.error("Error fetching categories:",b),l([{id:1,name:"مشروبات ساخنة"},{id:2,name:"عصائر"},{id:3,name:"حلويات"}])):l(v||[])}catch(x){console.error("Error fetching data:",x),a([{id:1,store_name:"متجر كوفي"},{id:2,store_name:"متجر الشاي"},{id:3,store_name:"متجر العصائر"}]),l([{id:1,name:"مشروبات ساخنة"},{id:2,name:"عصائر"},{id:3,name:"حلويات"}])}finally{u(!1)}})()},[]);const p=f=>{if(f.preventDefault(),!n.name||!n.price||!n.vendor_id||!n.category_id){$.error("الرجاء تعبئة جميع الحقول المطلوبة");return}t(n)};return i.jsxs("form",{onSubmit:p,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع المنتج"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",value:"regular",checked:n.type==="regular",onChange:f=>r({...n,type:f.target.value}),className:"ml-2"}),"منتج عادي"]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",value:"variant",checked:n.type==="variant",onChange:f=>r({...n,type:f.target.value}),className:"ml-2"}),"منتج متعدد الأنواع"]})]})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الصورة المميزة"}),i.jsx(xs,{type:"image",preview:n.image,onUpload:({preview:f})=>r({...n,image:f})})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"معرض الصور"}),i.jsx(mL,{images:n.gallery,onUpdate:f=>r({...n,gallery:f})})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"فيديو المنتج"}),i.jsx(xs,{type:"video",preview:n.video,onUpload:({preview:f})=>r({...n,video:f})})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم المنتج ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:n.name,onChange:f=>r({...n,name:f.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),i.jsx("textarea",{value:n.description,onChange:f=>r({...n,description:f.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),n.type==="regular"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["السعر (₪) ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:n.price,onChange:f=>r({...n,price:f.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"سعر الجملة (₪)"}),i.jsx("input",{type:"number",value:n.wholesale_price,onChange:f=>r({...n,wholesale_price:f.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"اختياري"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"سعر التخفيض الحالي (₪)"}),i.jsx("input",{type:"number",value:n.discount_price,onChange:f=>r({...n,discount_price:f.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"اختياري"})]})]}),i.jsx("div",{className:"col-span-1 md:col-span-2",children:i.jsx(nF,{discounts:n.scheduled_discounts,onChange:f=>r({...n,scheduled_discounts:f})})}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["المخزون ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:n.stock,onChange:f=>r({...n,stock:parseInt(f.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",required:!0})]})]}):i.jsx("div",{className:"col-span-1 md:col-span-2",children:i.jsx(xL,{variants:n.variants,onChange:f=>r({...n,variants:f})})}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["المتجر ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:n.vendor_id,onChange:f=>r({...n,vendor_id:f.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,disabled:d,children:[i.jsx("option",{value:"",children:"اختر المتجر"}),s.map(f=>i.jsx("option",{value:f.id,children:f.store_name},f.id))]}),d&&i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"جاري تحميل المتاجر..."})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["التصنيف ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:n.category_id,onChange:f=>r({...n,category_id:f.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,disabled:d,children:[i.jsx("option",{value:"",children:"اختر التصنيف"}),o.map(f=>i.jsx("option",{value:f.id,children:f.name},f.id))]}),d&&i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"جاري تحميل التصنيفات..."})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الحالة ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:n.status,onChange:f=>r({...n,status:f.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"active",children:"نشط"}),i.jsx("option",{value:"inactive",children:"غير نشط"}),i.jsx("option",{value:"draft",children:"مسودة"})]})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx(gL,{prices:n.wholesale_prices,onChange:f=>r({...n,wholesale_prices:f})}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"أسعار الجملة اختيارية"})]}),i.jsx("div",{className:"col-span-1 md:col-span-2",children:i.jsx(rF,{attributes:n.attributes,onChange:f=>r({...n,attributes:f})})}),i.jsx("div",{className:"col-span-1 md:col-span-2",children:i.jsx(sF,{addons:n.addons,onChange:f=>r({...n,addons:f})})})]}),i.jsx("div",{className:"flex justify-end space-x-2 pt-4",children:i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:e?"تحديث":"إضافة"})})]})}function aF(){const[t,e]=j.useState([]),[n,r]=j.useState([]),[s,a]=j.useState([]),[o,l]=j.useState(!0),[d,u]=j.useState(null),[p,f]=j.useState(!1),[x,g]=j.useState(null),[v,b]=j.useState("grid"),[w,_]=j.useState(null),[N,S]=j.useState({});j.useEffect(()=>{P()},[]);const P=async()=>{try{l(!0),u(null);const{data:E,error:K}=await te.from("products").select("*");if(K)throw K;const{data:re,error:Q}=await te.from("categories").select("*").order("name");if(Q)throw Q;r(re||[]);const{data:se,error:oe}=await te.from("vendors").select("id, store_name");if(oe)throw oe;a(se||[]);const ie=await Promise.all((E||[]).map(async ge=>{let ve=null;if(ge.category_id){const{data:ae}=await te.from("categories").select("name").eq("id",ge.category_id).single();ae&&(ve=ae)}let W=null;if(ge.vendor_id){const{data:ae}=await te.from("vendors").select("store_name").eq("id",ge.vendor_id).single();ae&&(W=ae)}return{...ge,category:ve,vendor:W}}));e(ie)}catch(E){console.error("Error fetching data:",E),u("فشل في تحميل البيانات. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل البيانات")}finally{l(!1)}},O={name:{type:"text",label:"اسم المنتج",placeholder:"البحث باسم المنتج",value:""},vendor_id:{type:"select",label:"المتجر",placeholder:"جميع المتاجر",options:s.map(E=>({value:E.id,label:E.store_name})),value:""},category_id:{type:"select",label:"التصنيف",placeholder:"جميع التصنيفات",options:n.map(E=>({value:E.id,label:E.name})),value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"active",label:"نشط"},{value:"inactive",label:"غير نشط"},{value:"draft",label:"مسودة"}],value:""}},{filters:A,filterData:R,handleFilterChange:T}=Bn(O),Y=async E=>{try{l(!0);const K={id:x?x.id:Vr(),name:E.name,description:E.description,price:parseFloat(E.price),wholesale_price:E.wholesale_price?parseFloat(E.wholesale_price):null,discount_price:E.discount_price?parseFloat(E.discount_price):null,vendor_id:E.vendor_id,category_id:E.category_id,status:E.status,stock:parseInt(E.stock),image_url:E.image};if(x){const{data:re,error:Q}=await te.from("products").update(K).eq("id",x.id).select();if(Q)throw Q;if(E.addons&&E.addons.length>0){await te.from("product_addons").delete().eq("product_id",x.id);const se=E.addons.map(ie=>({product_id:x.id,name:ie.name,price:parseFloat(ie.price),is_default:ie.is_default,is_required:ie.is_required})),{error:oe}=await te.from("product_addons").insert(se);if(oe)throw oe}$.success("تم تحديث المنتج بنجاح")}else{const{data:re,error:Q}=await te.from("products").insert([K]).select();if(Q)throw Q;if(E.addons&&E.addons.length>0&&re&&re.length>0){const se=E.addons.map(ie=>({product_id:re[0].id,name:ie.name,price:parseFloat(ie.price),is_default:ie.is_default,is_required:ie.is_required})),{error:oe}=await te.from("product_addons").insert(se);if(oe)throw oe}$.success("تم إضافة المنتج بنجاح")}P(),f(!1),g(null)}catch(K){console.error("Error saving product:",K),$.error(x?"فشل في تحديث المنتج":"فشل في إضافة المنتج")}finally{l(!1)}},D=async E=>{if(window.confirm("هل أنت متأكد من حذف هذا المنتج؟"))try{l(!0);const{error:K}=await te.from("products").delete().eq("id",E);if(K)throw K;$.success("تم حذف المنتج بنجاح"),P()}catch(K){console.error("Error deleting product:",K),$.error("فشل في حذف المنتج")}finally{l(!1)}},U=(E,K)=>{_({id:E.id,field:K}),S({...N,[E.id]:{...N[E.id]||{},[K]:E[K]}})},ee=(E,K,re)=>{S({...N,[E]:{...N[E]||{},[K]:re}})},G=async E=>{try{const K=N[E];if(!K)return;K.price!==void 0&&(K.price=parseFloat(K.price)),K.wholesale_price!==void 0&&(K.wholesale_price=parseFloat(K.wholesale_price)||null),K.discount_price!==void 0&&(K.discount_price=parseFloat(K.discount_price)||null),K.stock!==void 0&&(K.stock=parseInt(K.stock));const{error:re}=await te.from("products").update(K).eq("id",E);if(re)throw re;$.success("تم تحديث المنتج بنجاح"),P(),_(null)}catch(K){console.error("Error updating product:",K),$.error("فشل في تحديث المنتج")}},z=()=>{_(null)},V=E=>{switch(E){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"draft":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},C=E=>{switch(E){case"active":return"نشط";case"inactive":return"غير نشط";case"draft":return"مسودة";default:return E}},q=R(t),I=()=>i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6",children:q.length===0?i.jsx("div",{className:"col-span-full text-center py-12",children:i.jsx("p",{className:"text-gray-500",children:"لا توجد منتجات متطابقة مع معايير البحث"})}):q.map(E=>{var K,re;return i.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[E.image_url&&i.jsx("img",{src:E.image_url,alt:E.name,className:"w-full h-48 object-cover",onError:Q=>{Q.target.onerror=null,Q.target.src="https://via.placeholder.com/300x200?text=No+Image"}}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold",children:E.name}),i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${V(E.status)}`,children:C(E.status)})]}),i.jsx("p",{className:"text-gray-600 text-sm mb-2",children:E.description}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"text-xl font-bold text-green-600",children:["₪",E.price]}),E.wholesale_price&&i.jsxs("p",{className:"text-sm text-gray-500",children:["سعر الجملة: ₪",E.wholesale_price]}),E.discount_price&&i.jsxs("p",{className:"text-sm text-red-500",children:["سعر التخفيض: ₪",E.discount_price]}),i.jsxs("p",{className:"text-sm text-gray-500",children:["المخزون: ",E.stock," قطعة"]}),i.jsxs("p",{className:"text-sm text-gray-500",children:["المتجر: ",(K=E.vendor)==null?void 0:K.store_name]}),i.jsxs("p",{className:"text-sm text-gray-500",children:["التصنيف: ",(re=E.category)==null?void 0:re.name]})]}),i.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[i.jsx("button",{onClick:()=>{g(E),f(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),i.jsx("button",{onClick:()=>D(E.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]})]},E.id)})}),X=()=>i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المنتج"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"السعر"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"سعر الجملة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"سعر التخفيض"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المخزون"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المتجر"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التصنيف"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:q.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"9",className:"px-6 py-4 text-center text-gray-500",children:"لا توجد منتجات متطابقة مع معايير البحث"})}):q.map(E=>{var K,re,Q,se,oe,ie,ge,ve,W;return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[E.image_url&&i.jsx("img",{src:E.image_url,alt:E.name,className:"w-10 h-10 rounded-full object-cover ml-3",onError:ae=>{ae.target.onerror=null,ae.target.src="https://via.placeholder.com/40?text=No+Image"}}),i.jsxs("div",{children:[(w==null?void 0:w.id)===E.id&&(w==null?void 0:w.field)==="name"?i.jsx("input",{type:"text",value:((K=N[E.id])==null?void 0:K.name)||E.name,onChange:ae=>ee(E.id,"name",ae.target.value),className:"w-full border rounded-md px-2 py-1 text-sm",autoFocus:!0}):i.jsx("div",{className:"font-medium text-gray-900 cursor-pointer hover:text-blue-600",onClick:()=>U(E,"name"),children:E.name}),(w==null?void 0:w.id)===E.id&&(w==null?void 0:w.field)==="description"?i.jsx("textarea",{value:((re=N[E.id])==null?void 0:re.description)||E.description||"",onChange:ae=>ee(E.id,"description",ae.target.value),className:"w-full border rounded-md px-2 py-1 text-sm mt-1",rows:"2",autoFocus:!0}):i.jsx("div",{className:"text-gray-500 cursor-pointer hover:text-blue-600",onClick:()=>U(E,"description"),children:E.description||"إضافة وصف"})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(w==null?void 0:w.id)===E.id&&(w==null?void 0:w.field)==="price"?i.jsx("input",{type:"number",value:((Q=N[E.id])==null?void 0:Q.price)||E.price,onChange:ae=>ee(E.id,"price",ae.target.value),className:"w-24 border rounded-md px-2 py-1 text-sm",min:"0",step:"0.01",autoFocus:!0}):i.jsxs("div",{className:"text-lg font-semibold text-green-600 cursor-pointer hover:text-blue-600",onClick:()=>U(E,"price"),children:["₪",E.price]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(w==null?void 0:w.id)===E.id&&(w==null?void 0:w.field)==="wholesale_price"?i.jsx("input",{type:"number",value:((se=N[E.id])==null?void 0:se.wholesale_price)||E.wholesale_price||"",onChange:ae=>ee(E.id,"wholesale_price",ae.target.value),className:"w-24 border rounded-md px-2 py-1 text-sm",min:"0",step:"0.01",autoFocus:!0}):i.jsx("div",{className:"text-gray-500 cursor-pointer hover:text-blue-600",onClick:()=>U(E,"wholesale_price"),children:E.wholesale_price?`₪${E.wholesale_price}`:"-"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(w==null?void 0:w.id)===E.id&&(w==null?void 0:w.field)==="discount_price"?i.jsx("input",{type:"number",value:((oe=N[E.id])==null?void 0:oe.discount_price)||E.discount_price||"",onChange:ae=>ee(E.id,"discount_price",ae.target.value),className:"w-24 border rounded-md px-2 py-1 text-sm",min:"0",step:"0.01",autoFocus:!0}):i.jsx("div",{className:"text-red-500 cursor-pointer hover:text-blue-600",onClick:()=>U(E,"discount_price"),children:E.discount_price?`₪${E.discount_price}`:"-"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(w==null?void 0:w.id)===E.id&&(w==null?void 0:w.field)==="stock"?i.jsx("input",{type:"number",value:((ie=N[E.id])==null?void 0:ie.stock)||E.stock,onChange:ae=>ee(E.id,"stock",ae.target.value),className:"w-24 border rounded-md px-2 py-1 text-sm",min:"0",autoFocus:!0}):i.jsxs("div",{className:"text-gray-500 cursor-pointer hover:text-blue-600",onClick:()=>U(E,"stock"),children:[E.stock," قطعة"]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:(ge=E.vendor)==null?void 0:ge.store_name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:(ve=E.category)==null?void 0:ve.name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(w==null?void 0:w.id)===E.id&&(w==null?void 0:w.field)==="status"?i.jsxs("select",{value:((W=N[E.id])==null?void 0:W.status)||E.status,onChange:ae=>ee(E.id,"status",ae.target.value),className:"border rounded-md px-2 py-1 text-sm",autoFocus:!0,children:[i.jsx("option",{value:"active",children:"نشط"}),i.jsx("option",{value:"inactive",children:"غير نشط"}),i.jsx("option",{value:"draft",children:"مسودة"})]}):i.jsx("span",{className:`px-2 py-1 text-xs rounded-full cursor-pointer ${V(E.status)}`,onClick:()=>U(E,"status"),children:C(E.status)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(w==null?void 0:w.id)===E.id?i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>G(E.id),className:"text-green-600 hover:text-green-800 ml-2",children:"حفظ"}),i.jsx("button",{onClick:z,className:"text-gray-600 hover:text-gray-800",children:"إلغاء"})]}):i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>{g(E),f(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),i.jsx("button",{onClick:()=>D(E.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})})]},E.id)})})]})})});return o&&t.length===0?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):d?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:d}),i.jsx("button",{onClick:P,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"إدارة المنتجات"}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>b("grid"),className:`px-3 py-1 rounded ${v==="grid"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض شبكي"}),i.jsx("button",{onClick:()=>b("table"),className:`px-3 py-1 rounded ${v==="table"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض جدول"})]}),i.jsx("button",{onClick:()=>{g(null),f(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة منتج جديد"})]})]}),i.jsx(zn,{filters:A,onFilterChange:T}),v==="grid"?I():X(),i.jsx(_e,{open:p,onClose:()=>{f(!1),g(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-start justify-center min-h-screen",children:[i.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white w-full min-h-screen",children:[i.jsx("div",{className:"sticky top-0 bg-white border-b z-10",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[i.jsx(_e.Title,{className:"text-2xl font-bold",children:x?"تعديل منتج":"إضافة منتج جديد"}),i.jsx("button",{onClick:()=>{f(!1),g(null)},className:"p-2 rounded-full hover:bg-gray-100",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:i.jsx(iF,{onSubmit:Y,initialData:x})})]})]})}),i.jsxs("div",{className:"fixed bottom-4 right-4 bg-blue-600 text-white p-4 rounded-lg shadow-lg max-w-xs",children:[i.jsx("h4",{className:"font-bold mb-2",children:"تلميح: التعديل السريع"}),i.jsx("p",{className:"text-sm",children:'يمكنك النقر مباشرة على أي حقل في العرض الجدولي للتعديل السريع، ثم الضغط على زر "حفظ" لتأكيد التغييرات.'})]})]})}function oF(){const[t,e]=j.useState([]),[n,r]=j.useState(!1),[s,a]=j.useState(!0),[o,l]=j.useState(null),[d,u]=j.useState({name:"",slug:"",description:"",parent_id:"",image_url:""});j.useEffect(()=>{b()},[]);const p={name:{type:"text",label:"اسم التصنيف",placeholder:"البحث باسم التصنيف",value:""},parent_id:{type:"select",label:"التصنيف الأب",placeholder:"جميع التصنيفات",options:t.map(O=>({value:O.id,label:O.name})),value:""}},{filters:f,filterData:x,handleFilterChange:g}=Bn(p),v=x(t),b=async()=>{try{a(!0),l(null);const{data:O,error:A}=await te.from("categories").select("*").order("name");if(A)throw A;e(O||[])}catch(O){console.error("Error fetching categories:",O),l("فشل في تحميل التصنيفات. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل التصنيفات")}finally{a(!1)}},w=async O=>{let A=O,R=1,T=!1;for(;!T;){const{data:Y,error:D}=await te.from("categories").select("id").eq("slug",A).maybeSingle();if(D)throw D;!Y||d.id&&Y.id===d.id?T=!0:(A=`${O}-${R}`,R++)}return A},_=async O=>{O.preventDefault();try{const A=d.name.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""),R=await w(A),T={...d,slug:R,parent_id:d.parent_id||null};if(d.id||(T.id=Vr()),d.id){const{error:Y}=await te.from("categories").update(T).eq("id",d.id);if(Y)throw Y;$.success("تم تحديث التصنيف بنجاح")}else{const{error:Y}=await te.from("categories").insert([T]);if(Y)throw Y;$.success("تم إضافة التصنيف بنجاح")}r(!1),u({name:"",slug:"",description:"",parent_id:"",image_url:""}),b()}catch(A){console.error("Error saving category:",A),$.error(d.id?"فشل في تحديث التصنيف":"فشل في إضافة التصنيف")}},N=async O=>{if(window.confirm("هل أنت متأكد من حذف هذا التصنيف؟"))try{const{error:A}=await te.from("categories").delete().eq("id",O);if(A)throw A;$.success("تم حذف التصنيف بنجاح"),b()}catch(A){console.error("Error deleting category:",A),$.error("فشل في حذف التصنيف")}},S=({preview:O})=>{O&&u({...d,image_url:O})};if(s)return i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(o)return i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:o}),i.jsx("button",{onClick:b,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]});const P=(O,A=0)=>{var R,T;return i.jsxs(Z.Fragment,{children:[i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{style:{marginRight:`${A*20}px`},children:[A>0&&"↳ ",O.name]})}),i.jsx("td",{className:"px-6 py-4",children:O.description}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:((R=t.find(Y=>Y.id===O.parent_id))==null?void 0:R.name)||"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:O.image_url?i.jsx("img",{src:O.image_url,alt:O.name,className:"w-10 h-10 object-cover rounded",onError:Y=>{Y.target.onerror=null,Y.target.src="https://via.placeholder.com/40?text=No+Image"}}):"-"}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[i.jsx("button",{onClick:()=>{u(O),r(!0)},className:"text-blue-600 hover:text-blue-900 ml-4",children:"تعديل"}),i.jsx("button",{onClick:()=>N(O.id),className:"text-red-600 hover:text-red-900",children:"حذف"})]})]}),(T=O.children)==null?void 0:T.map(Y=>P(Y,A+1))]},O.id)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"التصنيفات"}),i.jsx("button",{onClick:()=>{u({name:"",slug:"",description:"",parent_id:"",image_url:""}),r(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"إضافة تصنيف جديد"})]}),i.jsx(zn,{filters:f,onFilterChange:g}),i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"p-6",children:t.length===0?i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-gray-500",children:"لا توجد تصنيفات. قم بإضافة تصنيف جديد."})}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الاسم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الوصف"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التصنيف الأب"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الصورة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(O=>P(O))})]})})})}),i.jsx(_e,{open:n,onClose:()=>r(!1),className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:d.id?"تعديل تصنيف":"إضافة تصنيف جديد"}),i.jsxs("form",{onSubmit:_,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم التصنيف ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:d.name,onChange:O=>{u({...d,name:O.target.value})},className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),i.jsx("textarea",{value:d.description,onChange:O=>u({...d,description:O.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"التصنيف الأب"}),i.jsxs("select",{value:d.parent_id||"",onChange:O=>u({...d,parent_id:O.target.value||null}),className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"",children:"بدون تصنيف أب"}),t.filter(O=>O.id!==d.id).map(O=>i.jsx("option",{value:O.id,children:O.name},O.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"صورة التصنيف"}),i.jsx(xs,{type:"image",preview:d.image_url,onUpload:S,storeInSupabase:!0,bucket:It.GENERAL,folder:"categories"})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx("button",{type:"button",onClick:()=>{r(!1),u({name:"",slug:"",description:"",parent_id:"",image_url:""})},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:d.id?"تحديث":"إضافة"})]})]})]})]})})]})}function lF(t,e){const n=j.useRef(e);j.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const cF=1;function dF(t){return Object.freeze({__version:cF,map:t})}function uF(t,e){return Object.freeze({...t,...e})}const sk=j.createContext(null),ik=sk.Provider;function ak(){const t=j.useContext(sk);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function hF(t){function e(n,r){const{instance:s,context:a}=t(n).current;return j.useImperativeHandle(r,()=>s),n.children==null?null:Z.createElement(ik,{value:a},n.children)}return j.forwardRef(e)}function pF(t){function e(n,r){const{instance:s}=t(n).current;return j.useImperativeHandle(r,()=>s),null}return j.forwardRef(e)}function fF(t,e){const n=j.useRef();j.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function ok(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var zg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(pn,function(n){var r="1.9.4";function s(c){var h,m,y,k;for(m=1,y=arguments.length;m<y;m++){k=arguments[m];for(h in k)c[h]=k[h]}return c}var a=Object.create||function(){function c(){}return function(h){return c.prototype=h,new c}}();function o(c,h){var m=Array.prototype.slice;if(c.bind)return c.bind.apply(c,m.call(arguments,1));var y=m.call(arguments,2);return function(){return c.apply(h,y.length?y.concat(m.call(arguments)):arguments)}}var l=0;function d(c){return"_leaflet_id"in c||(c._leaflet_id=++l),c._leaflet_id}function u(c,h,m){var y,k,M,H;return H=function(){y=!1,k&&(M.apply(m,k),k=!1)},M=function(){y?k=arguments:(c.apply(m,arguments),setTimeout(H,h),y=!0)},M}function p(c,h,m){var y=h[1],k=h[0],M=y-k;return c===y&&m?c:((c-k)%M+M)%M+k}function f(){return!1}function x(c,h){if(h===!1)return c;var m=Math.pow(10,h===void 0?6:h);return Math.round(c*m)/m}function g(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}function v(c){return g(c).split(/\s+/)}function b(c,h){Object.prototype.hasOwnProperty.call(c,"options")||(c.options=c.options?a(c.options):{});for(var m in h)c.options[m]=h[m];return c.options}function w(c,h,m){var y=[];for(var k in c)y.push(encodeURIComponent(m?k.toUpperCase():k)+"="+encodeURIComponent(c[k]));return(!h||h.indexOf("?")===-1?"?":"&")+y.join("&")}var _=/\{ *([\w_ -]+) *\}/g;function N(c,h){return c.replace(_,function(m,y){var k=h[y];if(k===void 0)throw new Error("No value provided for variable "+m);return typeof k=="function"&&(k=k(h)),k})}var S=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"};function P(c,h){for(var m=0;m<c.length;m++)if(c[m]===h)return m;return-1}var O="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function A(c){return window["webkit"+c]||window["moz"+c]||window["ms"+c]}var R=0;function T(c){var h=+new Date,m=Math.max(0,16-(h-R));return R=h+m,window.setTimeout(c,m)}var Y=window.requestAnimationFrame||A("RequestAnimationFrame")||T,D=window.cancelAnimationFrame||A("CancelAnimationFrame")||A("CancelRequestAnimationFrame")||function(c){window.clearTimeout(c)};function U(c,h,m){if(m&&Y===T)c.call(h);else return Y.call(window,o(c,h))}function ee(c){c&&D.call(window,c)}var G={__proto__:null,extend:s,create:a,bind:o,get lastId(){return l},stamp:d,throttle:u,wrapNum:p,falseFn:f,formatNum:x,trim:g,splitWords:v,setOptions:b,getParamString:w,template:N,isArray:S,indexOf:P,emptyImageUrl:O,requestFn:Y,cancelFn:D,requestAnimFrame:U,cancelAnimFrame:ee};function z(){}z.extend=function(c){var h=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=h.__super__=this.prototype,y=a(m);y.constructor=h,h.prototype=y;for(var k in this)Object.prototype.hasOwnProperty.call(this,k)&&k!=="prototype"&&k!=="__super__"&&(h[k]=this[k]);return c.statics&&s(h,c.statics),c.includes&&(V(c.includes),s.apply(null,[y].concat(c.includes))),s(y,c),delete y.statics,delete y.includes,y.options&&(y.options=m.options?a(m.options):{},s(y.options,c.options)),y._initHooks=[],y.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var M=0,H=y._initHooks.length;M<H;M++)y._initHooks[M].call(this)}},h},z.include=function(c){var h=this.prototype.options;return s(this.prototype,c),c.options&&(this.prototype.options=h,this.mergeOptions(c.options)),this},z.mergeOptions=function(c){return s(this.prototype.options,c),this},z.addInitHook=function(c){var h=Array.prototype.slice.call(arguments,1),m=typeof c=="function"?c:function(){this[c].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function V(c){if(!(typeof L>"u"||!L||!L.Mixin)){c=S(c)?c:[c];for(var h=0;h<c.length;h++)c[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var C={on:function(c,h,m){if(typeof c=="object")for(var y in c)this._on(y,c[y],h);else{c=v(c);for(var k=0,M=c.length;k<M;k++)this._on(c[k],h,m)}return this},off:function(c,h,m){if(!arguments.length)delete this._events;else if(typeof c=="object")for(var y in c)this._off(y,c[y],h);else{c=v(c);for(var k=arguments.length===1,M=0,H=c.length;M<H;M++)k?this._off(c[M]):this._off(c[M],h,m)}return this},_on:function(c,h,m,y){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(c,h,m)===!1){m===this&&(m=void 0);var k={fn:h,ctx:m};y&&(k.once=!0),this._events=this._events||{},this._events[c]=this._events[c]||[],this._events[c].push(k)}},_off:function(c,h,m){var y,k,M;if(this._events&&(y=this._events[c],!!y)){if(arguments.length===1){if(this._firingCount)for(k=0,M=y.length;k<M;k++)y[k].fn=f;delete this._events[c];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var H=this._listens(c,h,m);if(H!==!1){var J=y[H];this._firingCount&&(J.fn=f,this._events[c]=y=y.slice()),y.splice(H,1)}}},fire:function(c,h,m){if(!this.listens(c,m))return this;var y=s({},h,{type:c,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var k=this._events[c];if(k){this._firingCount=this._firingCount+1||1;for(var M=0,H=k.length;M<H;M++){var J=k[M],ne=J.fn;J.once&&this.off(c,ne,J.ctx),ne.call(J.ctx||this,y)}this._firingCount--}}return m&&this._propagateEvent(y),this},listens:function(c,h,m,y){typeof c!="string"&&console.warn('"string" type argument expected');var k=h;typeof h!="function"&&(y=!!h,k=void 0,m=void 0);var M=this._events&&this._events[c];if(M&&M.length&&this._listens(c,k,m)!==!1)return!0;if(y){for(var H in this._eventParents)if(this._eventParents[H].listens(c,h,m,y))return!0}return!1},_listens:function(c,h,m){if(!this._events)return!1;var y=this._events[c]||[];if(!h)return!!y.length;m===this&&(m=void 0);for(var k=0,M=y.length;k<M;k++)if(y[k].fn===h&&y[k].ctx===m)return k;return!1},once:function(c,h,m){if(typeof c=="object")for(var y in c)this._on(y,c[y],h,!0);else{c=v(c);for(var k=0,M=c.length;k<M;k++)this._on(c[k],h,m,!0)}return this},addEventParent:function(c){return this._eventParents=this._eventParents||{},this._eventParents[d(c)]=c,this},removeEventParent:function(c){return this._eventParents&&delete this._eventParents[d(c)],this},_propagateEvent:function(c){for(var h in this._eventParents)this._eventParents[h].fire(c.type,s({layer:c.target,propagatedFrom:c.target},c),!0)}};C.addEventListener=C.on,C.removeEventListener=C.clearAllEventListeners=C.off,C.addOneTimeEventListener=C.once,C.fireEvent=C.fire,C.hasEventListeners=C.listens;var q=z.extend(C);function I(c,h,m){this.x=m?Math.round(c):c,this.y=m?Math.round(h):h}var X=Math.trunc||function(c){return c>0?Math.floor(c):Math.ceil(c)};I.prototype={clone:function(){return new I(this.x,this.y)},add:function(c){return this.clone()._add(E(c))},_add:function(c){return this.x+=c.x,this.y+=c.y,this},subtract:function(c){return this.clone()._subtract(E(c))},_subtract:function(c){return this.x-=c.x,this.y-=c.y,this},divideBy:function(c){return this.clone()._divideBy(c)},_divideBy:function(c){return this.x/=c,this.y/=c,this},multiplyBy:function(c){return this.clone()._multiplyBy(c)},_multiplyBy:function(c){return this.x*=c,this.y*=c,this},scaleBy:function(c){return new I(this.x*c.x,this.y*c.y)},unscaleBy:function(c){return new I(this.x/c.x,this.y/c.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=X(this.x),this.y=X(this.y),this},distanceTo:function(c){c=E(c);var h=c.x-this.x,m=c.y-this.y;return Math.sqrt(h*h+m*m)},equals:function(c){return c=E(c),c.x===this.x&&c.y===this.y},contains:function(c){return c=E(c),Math.abs(c.x)<=Math.abs(this.x)&&Math.abs(c.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function E(c,h,m){return c instanceof I?c:S(c)?new I(c[0],c[1]):c==null?c:typeof c=="object"&&"x"in c&&"y"in c?new I(c.x,c.y):new I(c,h,m)}function K(c,h){if(c)for(var m=h?[c,h]:c,y=0,k=m.length;y<k;y++)this.extend(m[y])}K.prototype={extend:function(c){var h,m;if(!c)return this;if(c instanceof I||typeof c[0]=="number"||"x"in c)h=m=E(c);else if(c=re(c),h=c.min,m=c.max,!h||!m)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=m.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(c){return E((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,c)},getBottomLeft:function(){return E(this.min.x,this.max.y)},getTopRight:function(){return E(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(c){var h,m;return typeof c[0]=="number"||c instanceof I?c=E(c):c=re(c),c instanceof K?(h=c.min,m=c.max):h=m=c,h.x>=this.min.x&&m.x<=this.max.x&&h.y>=this.min.y&&m.y<=this.max.y},intersects:function(c){c=re(c);var h=this.min,m=this.max,y=c.min,k=c.max,M=k.x>=h.x&&y.x<=m.x,H=k.y>=h.y&&y.y<=m.y;return M&&H},overlaps:function(c){c=re(c);var h=this.min,m=this.max,y=c.min,k=c.max,M=k.x>h.x&&y.x<m.x,H=k.y>h.y&&y.y<m.y;return M&&H},isValid:function(){return!!(this.min&&this.max)},pad:function(c){var h=this.min,m=this.max,y=Math.abs(h.x-m.x)*c,k=Math.abs(h.y-m.y)*c;return re(E(h.x-y,h.y-k),E(m.x+y,m.y+k))},equals:function(c){return c?(c=re(c),this.min.equals(c.getTopLeft())&&this.max.equals(c.getBottomRight())):!1}};function re(c,h){return!c||c instanceof K?c:new K(c,h)}function Q(c,h){if(c)for(var m=h?[c,h]:c,y=0,k=m.length;y<k;y++)this.extend(m[y])}Q.prototype={extend:function(c){var h=this._southWest,m=this._northEast,y,k;if(c instanceof oe)y=c,k=c;else if(c instanceof Q){if(y=c._southWest,k=c._northEast,!y||!k)return this}else return c?this.extend(ie(c)||se(c)):this;return!h&&!m?(this._southWest=new oe(y.lat,y.lng),this._northEast=new oe(k.lat,k.lng)):(h.lat=Math.min(y.lat,h.lat),h.lng=Math.min(y.lng,h.lng),m.lat=Math.max(k.lat,m.lat),m.lng=Math.max(k.lng,m.lng)),this},pad:function(c){var h=this._southWest,m=this._northEast,y=Math.abs(h.lat-m.lat)*c,k=Math.abs(h.lng-m.lng)*c;return new Q(new oe(h.lat-y,h.lng-k),new oe(m.lat+y,m.lng+k))},getCenter:function(){return new oe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new oe(this.getNorth(),this.getWest())},getSouthEast:function(){return new oe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(c){typeof c[0]=="number"||c instanceof oe||"lat"in c?c=ie(c):c=se(c);var h=this._southWest,m=this._northEast,y,k;return c instanceof Q?(y=c.getSouthWest(),k=c.getNorthEast()):y=k=c,y.lat>=h.lat&&k.lat<=m.lat&&y.lng>=h.lng&&k.lng<=m.lng},intersects:function(c){c=se(c);var h=this._southWest,m=this._northEast,y=c.getSouthWest(),k=c.getNorthEast(),M=k.lat>=h.lat&&y.lat<=m.lat,H=k.lng>=h.lng&&y.lng<=m.lng;return M&&H},overlaps:function(c){c=se(c);var h=this._southWest,m=this._northEast,y=c.getSouthWest(),k=c.getNorthEast(),M=k.lat>h.lat&&y.lat<m.lat,H=k.lng>h.lng&&y.lng<m.lng;return M&&H},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(c,h){return c?(c=se(c),this._southWest.equals(c.getSouthWest(),h)&&this._northEast.equals(c.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function se(c,h){return c instanceof Q?c:new Q(c,h)}function oe(c,h,m){if(isNaN(c)||isNaN(h))throw new Error("Invalid LatLng object: ("+c+", "+h+")");this.lat=+c,this.lng=+h,m!==void 0&&(this.alt=+m)}oe.prototype={equals:function(c,h){if(!c)return!1;c=ie(c);var m=Math.max(Math.abs(this.lat-c.lat),Math.abs(this.lng-c.lng));return m<=(h===void 0?1e-9:h)},toString:function(c){return"LatLng("+x(this.lat,c)+", "+x(this.lng,c)+")"},distanceTo:function(c){return ve.distance(this,ie(c))},wrap:function(){return ve.wrapLatLng(this)},toBounds:function(c){var h=180*c/40075017,m=h/Math.cos(Math.PI/180*this.lat);return se([this.lat-h,this.lng-m],[this.lat+h,this.lng+m])},clone:function(){return new oe(this.lat,this.lng,this.alt)}};function ie(c,h,m){return c instanceof oe?c:S(c)&&typeof c[0]!="object"?c.length===3?new oe(c[0],c[1],c[2]):c.length===2?new oe(c[0],c[1]):null:c==null?c:typeof c=="object"&&"lat"in c?new oe(c.lat,"lng"in c?c.lng:c.lon,c.alt):h===void 0?null:new oe(c,h,m)}var ge={latLngToPoint:function(c,h){var m=this.projection.project(c),y=this.scale(h);return this.transformation._transform(m,y)},pointToLatLng:function(c,h){var m=this.scale(h),y=this.transformation.untransform(c,m);return this.projection.unproject(y)},project:function(c){return this.projection.project(c)},unproject:function(c){return this.projection.unproject(c)},scale:function(c){return 256*Math.pow(2,c)},zoom:function(c){return Math.log(c/256)/Math.LN2},getProjectedBounds:function(c){if(this.infinite)return null;var h=this.projection.bounds,m=this.scale(c),y=this.transformation.transform(h.min,m),k=this.transformation.transform(h.max,m);return new K(y,k)},infinite:!1,wrapLatLng:function(c){var h=this.wrapLng?p(c.lng,this.wrapLng,!0):c.lng,m=this.wrapLat?p(c.lat,this.wrapLat,!0):c.lat,y=c.alt;return new oe(m,h,y)},wrapLatLngBounds:function(c){var h=c.getCenter(),m=this.wrapLatLng(h),y=h.lat-m.lat,k=h.lng-m.lng;if(y===0&&k===0)return c;var M=c.getSouthWest(),H=c.getNorthEast(),J=new oe(M.lat-y,M.lng-k),ne=new oe(H.lat-y,H.lng-k);return new Q(J,ne)}},ve=s({},ge,{wrapLng:[-180,180],R:6371e3,distance:function(c,h){var m=Math.PI/180,y=c.lat*m,k=h.lat*m,M=Math.sin((h.lat-c.lat)*m/2),H=Math.sin((h.lng-c.lng)*m/2),J=M*M+Math.cos(y)*Math.cos(k)*H*H,ne=2*Math.atan2(Math.sqrt(J),Math.sqrt(1-J));return this.R*ne}}),W=6378137,ae={R:W,MAX_LATITUDE:85.0511287798,project:function(c){var h=Math.PI/180,m=this.MAX_LATITUDE,y=Math.max(Math.min(m,c.lat),-m),k=Math.sin(y*h);return new I(this.R*c.lng*h,this.R*Math.log((1+k)/(1-k))/2)},unproject:function(c){var h=180/Math.PI;return new oe((2*Math.atan(Math.exp(c.y/this.R))-Math.PI/2)*h,c.x*h/this.R)},bounds:function(){var c=W*Math.PI;return new K([-c,-c],[c,c])}()};function he(c,h,m,y){if(S(c)){this._a=c[0],this._b=c[1],this._c=c[2],this._d=c[3];return}this._a=c,this._b=h,this._c=m,this._d=y}he.prototype={transform:function(c,h){return this._transform(c.clone(),h)},_transform:function(c,h){return h=h||1,c.x=h*(this._a*c.x+this._b),c.y=h*(this._c*c.y+this._d),c},untransform:function(c,h){return h=h||1,new I((c.x/h-this._b)/this._a,(c.y/h-this._d)/this._c)}};function ke(c,h,m,y){return new he(c,h,m,y)}var Ce=s({},ve,{code:"EPSG:3857",projection:ae,transformation:function(){var c=.5/(Math.PI*ae.R);return ke(c,.5,-c,.5)}()}),ce=s({},Ce,{code:"EPSG:900913"});function Se(c){return document.createElementNS("http://www.w3.org/2000/svg",c)}function Ve(c,h){var m="",y,k,M,H,J,ne;for(y=0,M=c.length;y<M;y++){for(J=c[y],k=0,H=J.length;k<H;k++)ne=J[k],m+=(k?"L":"M")+ne.x+" "+ne.y;m+=h?we.svg?"z":"x":""}return m||"M0 0"}var Xe=document.documentElement.style,Vt="ActiveXObject"in window,Jt=Vt&&!document.addEventListener,wt="msLaunchUri"in navigator&&!("documentMode"in document),Tn=jr("webkit"),gi=jr("android"),xi=jr("android 2")||jr("android 3"),ue=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),je=gi&&jr("Google")&&ue<537&&!("AudioNode"in window),Je=!!window.opera,dt=!wt&&jr("chrome"),Mt=jr("gecko")&&!Tn&&!Je&&!Vt,vi=!dt&&jr("safari"),Zr=jr("phantom"),xa="OTransition"in Xe,Uo=navigator.platform.indexOf("Win")===0,va=Vt&&"transition"in Xe,bs="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!xi,ya="MozPerspective"in Xe,Ho=!window.L_DISABLE_3D&&(va||bs||ya)&&!xa&&!Zr,Kr=typeof orientation<"u"||jr("mobile"),Wo=Kr&&Tn,_p=Kr&&bs,Iv=!window.PointerEvent&&window.MSPointerEvent,Fv=!!(window.PointerEvent||Iv),$v="ontouchstart"in window||!!window.TouchEvent,oS=!window.L_NO_TOUCH&&($v||Fv),lS=Kr&&Je,cS=Kr&&Mt,dS=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,uS=function(){var c=!1;try{var h=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("testPassiveEventSupport",f,h),window.removeEventListener("testPassiveEventSupport",f,h)}catch{}return c}(),hS=function(){return!!document.createElement("canvas").getContext}(),wp=!!(document.createElementNS&&Se("svg").createSVGRect),pS=!!wp&&function(){var c=document.createElement("div");return c.innerHTML="<svg/>",(c.firstChild&&c.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),fS=!wp&&function(){try{var c=document.createElement("div");c.innerHTML='<v:shape adj="1"/>';var h=c.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}}(),mS=navigator.platform.indexOf("Mac")===0,gS=navigator.platform.indexOf("Linux")===0;function jr(c){return navigator.userAgent.toLowerCase().indexOf(c)>=0}var we={ie:Vt,ielt9:Jt,edge:wt,webkit:Tn,android:gi,android23:xi,androidStock:je,opera:Je,chrome:dt,gecko:Mt,safari:vi,phantom:Zr,opera12:xa,win:Uo,ie3d:va,webkit3d:bs,gecko3d:ya,any3d:Ho,mobile:Kr,mobileWebkit:Wo,mobileWebkit3d:_p,msPointer:Iv,pointer:Fv,touch:oS,touchNative:$v,mobileOpera:lS,mobileGecko:cS,retina:dS,passiveEvents:uS,canvas:hS,svg:wp,vml:fS,inlineSvg:pS,mac:mS,linux:gS},zv=we.msPointer?"MSPointerDown":"pointerdown",Bv=we.msPointer?"MSPointerMove":"pointermove",Uv=we.msPointer?"MSPointerUp":"pointerup",Hv=we.msPointer?"MSPointerCancel":"pointercancel",jp={touchstart:zv,touchmove:Bv,touchend:Uv,touchcancel:Hv},Wv={touchstart:wS,touchmove:Jc,touchend:Jc,touchcancel:Jc},ba={},Yv=!1;function xS(c,h,m){return h==="touchstart"&&_S(),Wv[h]?(m=Wv[h].bind(this,m),c.addEventListener(jp[h],m,!1),m):(console.warn("wrong event specified:",h),f)}function vS(c,h,m){if(!jp[h]){console.warn("wrong event specified:",h);return}c.removeEventListener(jp[h],m,!1)}function yS(c){ba[c.pointerId]=c}function bS(c){ba[c.pointerId]&&(ba[c.pointerId]=c)}function Vv(c){delete ba[c.pointerId]}function _S(){Yv||(document.addEventListener(zv,yS,!0),document.addEventListener(Bv,bS,!0),document.addEventListener(Uv,Vv,!0),document.addEventListener(Hv,Vv,!0),Yv=!0)}function Jc(c,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var m in ba)h.touches.push(ba[m]);h.changedTouches=[h],c(h)}}function wS(c,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&qt(h),Jc(c,h)}function jS(c){var h={},m,y;for(y in c)m=c[y],h[y]=m&&m.bind?m.bind(c):m;return c=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var NS=200;function kS(c,h){c.addEventListener("dblclick",h);var m=0,y;function k(M){if(M.detail!==1){y=M.detail;return}if(!(M.pointerType==="mouse"||M.sourceCapabilities&&!M.sourceCapabilities.firesTouchEvents)){var H=Qv(M);if(!(H.some(function(ne){return ne instanceof HTMLLabelElement&&ne.attributes.for})&&!H.some(function(ne){return ne instanceof HTMLInputElement||ne instanceof HTMLSelectElement}))){var J=Date.now();J-m<=NS?(y++,y===2&&h(jS(M))):y=1,m=J}}}return c.addEventListener("click",k),{dblclick:h,simDblclick:k}}function SS(c,h){c.removeEventListener("dblclick",h.dblclick),c.removeEventListener("click",h.simDblclick)}var Np=nd(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Yo=nd(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),qv=Yo==="webkitTransition"||Yo==="OTransition"?Yo+"End":"transitionend";function Zv(c){return typeof c=="string"?document.getElementById(c):c}function Vo(c,h){var m=c.style[h]||c.currentStyle&&c.currentStyle[h];if((!m||m==="auto")&&document.defaultView){var y=document.defaultView.getComputedStyle(c,null);m=y?y[h]:null}return m==="auto"?null:m}function Ye(c,h,m){var y=document.createElement(c);return y.className=h||"",m&&m.appendChild(y),y}function ft(c){var h=c.parentNode;h&&h.removeChild(c)}function ed(c){for(;c.firstChild;)c.removeChild(c.firstChild)}function _a(c){var h=c.parentNode;h&&h.lastChild!==c&&h.appendChild(c)}function wa(c){var h=c.parentNode;h&&h.firstChild!==c&&h.insertBefore(c,h.firstChild)}function kp(c,h){if(c.classList!==void 0)return c.classList.contains(h);var m=td(c);return m.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(m)}function Pe(c,h){if(c.classList!==void 0)for(var m=v(h),y=0,k=m.length;y<k;y++)c.classList.add(m[y]);else if(!kp(c,h)){var M=td(c);Sp(c,(M?M+" ":"")+h)}}function jt(c,h){c.classList!==void 0?c.classList.remove(h):Sp(c,g((" "+td(c)+" ").replace(" "+h+" "," ")))}function Sp(c,h){c.className.baseVal===void 0?c.className=h:c.className.baseVal=h}function td(c){return c.correspondingElement&&(c=c.correspondingElement),c.className.baseVal===void 0?c.className:c.className.baseVal}function Un(c,h){"opacity"in c.style?c.style.opacity=h:"filter"in c.style&&CS(c,h)}function CS(c,h){var m=!1,y="DXImageTransform.Microsoft.Alpha";try{m=c.filters.item(y)}catch{if(h===1)return}h=Math.round(h*100),m?(m.Enabled=h!==100,m.Opacity=h):c.style.filter+=" progid:"+y+"(opacity="+h+")"}function nd(c){for(var h=document.documentElement.style,m=0;m<c.length;m++)if(c[m]in h)return c[m];return!1}function yi(c,h,m){var y=h||new I(0,0);c.style[Np]=(we.ie3d?"translate("+y.x+"px,"+y.y+"px)":"translate3d("+y.x+"px,"+y.y+"px,0)")+(m?" scale("+m+")":"")}function Tt(c,h){c._leaflet_pos=h,we.any3d?yi(c,h):(c.style.left=h.x+"px",c.style.top=h.y+"px")}function bi(c){return c._leaflet_pos||new I(0,0)}var qo,Zo,Cp;if("onselectstart"in document)qo=function(){Ee(window,"selectstart",qt)},Zo=function(){nt(window,"selectstart",qt)};else{var Ko=nd(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);qo=function(){if(Ko){var c=document.documentElement.style;Cp=c[Ko],c[Ko]="none"}},Zo=function(){Ko&&(document.documentElement.style[Ko]=Cp,Cp=void 0)}}function Ep(){Ee(window,"dragstart",qt)}function Tp(){nt(window,"dragstart",qt)}var rd,Pp;function Dp(c){for(;c.tabIndex===-1;)c=c.parentNode;c.style&&(sd(),rd=c,Pp=c.style.outlineStyle,c.style.outlineStyle="none",Ee(window,"keydown",sd))}function sd(){rd&&(rd.style.outlineStyle=Pp,rd=void 0,Pp=void 0,nt(window,"keydown",sd))}function Kv(c){do c=c.parentNode;while((!c.offsetWidth||!c.offsetHeight)&&c!==document.body);return c}function Mp(c){var h=c.getBoundingClientRect();return{x:h.width/c.offsetWidth||1,y:h.height/c.offsetHeight||1,boundingClientRect:h}}var ES={__proto__:null,TRANSFORM:Np,TRANSITION:Yo,TRANSITION_END:qv,get:Zv,getStyle:Vo,create:Ye,remove:ft,empty:ed,toFront:_a,toBack:wa,hasClass:kp,addClass:Pe,removeClass:jt,setClass:Sp,getClass:td,setOpacity:Un,testProp:nd,setTransform:yi,setPosition:Tt,getPosition:bi,get disableTextSelection(){return qo},get enableTextSelection(){return Zo},disableImageDrag:Ep,enableImageDrag:Tp,preventOutline:Dp,restoreOutline:sd,getSizedParentNode:Kv,getScale:Mp};function Ee(c,h,m,y){if(h&&typeof h=="object")for(var k in h)Lp(c,k,h[k],m);else{h=v(h);for(var M=0,H=h.length;M<H;M++)Lp(c,h[M],m,y)}return this}var Nr="_leaflet_events";function nt(c,h,m,y){if(arguments.length===1)Gv(c),delete c[Nr];else if(h&&typeof h=="object")for(var k in h)Rp(c,k,h[k],m);else if(h=v(h),arguments.length===2)Gv(c,function(J){return P(h,J)!==-1});else for(var M=0,H=h.length;M<H;M++)Rp(c,h[M],m,y);return this}function Gv(c,h){for(var m in c[Nr]){var y=m.split(/\d/)[0];(!h||h(y))&&Rp(c,y,null,null,m)}}var Op={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Lp(c,h,m,y){var k=h+d(m)+(y?"_"+d(y):"");if(c[Nr]&&c[Nr][k])return this;var M=function(J){return m.call(y||c,J||window.event)},H=M;!we.touchNative&&we.pointer&&h.indexOf("touch")===0?M=xS(c,h,M):we.touch&&h==="dblclick"?M=kS(c,M):"addEventListener"in c?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?c.addEventListener(Op[h]||h,M,we.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(M=function(J){J=J||window.event,Ip(c,J)&&H(J)},c.addEventListener(Op[h],M,!1)):c.addEventListener(h,H,!1):c.attachEvent("on"+h,M),c[Nr]=c[Nr]||{},c[Nr][k]=M}function Rp(c,h,m,y,k){k=k||h+d(m)+(y?"_"+d(y):"");var M=c[Nr]&&c[Nr][k];if(!M)return this;!we.touchNative&&we.pointer&&h.indexOf("touch")===0?vS(c,h,M):we.touch&&h==="dblclick"?SS(c,M):"removeEventListener"in c?c.removeEventListener(Op[h]||h,M,!1):c.detachEvent("on"+h,M),c[Nr][k]=null}function _i(c){return c.stopPropagation?c.stopPropagation():c.originalEvent?c.originalEvent._stopped=!0:c.cancelBubble=!0,this}function Ap(c){return Lp(c,"wheel",_i),this}function Go(c){return Ee(c,"mousedown touchstart dblclick contextmenu",_i),c._leaflet_disable_click=!0,this}function qt(c){return c.preventDefault?c.preventDefault():c.returnValue=!1,this}function wi(c){return qt(c),_i(c),this}function Qv(c){if(c.composedPath)return c.composedPath();for(var h=[],m=c.target;m;)h.push(m),m=m.parentNode;return h}function Xv(c,h){if(!h)return new I(c.clientX,c.clientY);var m=Mp(h),y=m.boundingClientRect;return new I((c.clientX-y.left)/m.x-h.clientLeft,(c.clientY-y.top)/m.y-h.clientTop)}var TS=we.linux&&we.chrome?window.devicePixelRatio:we.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Jv(c){return we.edge?c.wheelDeltaY/2:c.deltaY&&c.deltaMode===0?-c.deltaY/TS:c.deltaY&&c.deltaMode===1?-c.deltaY*20:c.deltaY&&c.deltaMode===2?-c.deltaY*60:c.deltaX||c.deltaZ?0:c.wheelDelta?(c.wheelDeltaY||c.wheelDelta)/2:c.detail&&Math.abs(c.detail)<32765?-c.detail*20:c.detail?c.detail/-32765*60:0}function Ip(c,h){var m=h.relatedTarget;if(!m)return!0;try{for(;m&&m!==c;)m=m.parentNode}catch{return!1}return m!==c}var PS={__proto__:null,on:Ee,off:nt,stopPropagation:_i,disableScrollPropagation:Ap,disableClickPropagation:Go,preventDefault:qt,stop:wi,getPropagationPath:Qv,getMousePosition:Xv,getWheelDelta:Jv,isExternalTarget:Ip,addListener:Ee,removeListener:nt},e0=q.extend({run:function(c,h,m,y){this.stop(),this._el=c,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(y||.5,.2),this._startPos=bi(c),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=U(this._animate,this),this._step()},_step:function(c){var h=+new Date-this._startTime,m=this._duration*1e3;h<m?this._runFrame(this._easeOut(h/m),c):(this._runFrame(1),this._complete())},_runFrame:function(c,h){var m=this._startPos.add(this._offset.multiplyBy(c));h&&m._round(),Tt(this._el,m),this.fire("step")},_complete:function(){ee(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(c){return 1-Math.pow(1-c,this._easeOutPower)}}),ze=q.extend({options:{crs:Ce,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(c,h){h=b(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(c),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(ie(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Yo&&we.any3d&&!we.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ee(this._proxy,qv,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(c,h,m){if(h=h===void 0?this._zoom:this._limitZoom(h),c=this._limitCenter(ie(c),h,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=s({animate:m.animate},m.zoom),m.pan=s({animate:m.animate,duration:m.duration},m.pan));var y=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(c,h,m.zoom):this._tryAnimatedPan(c,m.pan);if(y)return clearTimeout(this._sizeTimer),this}return this._resetView(c,h,m.pan&&m.pan.noMoveStart),this},setZoom:function(c,h){return this._loaded?this.setView(this.getCenter(),c,{zoom:h}):(this._zoom=c,this)},zoomIn:function(c,h){return c=c||(we.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+c,h)},zoomOut:function(c,h){return c=c||(we.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-c,h)},setZoomAround:function(c,h,m){var y=this.getZoomScale(h),k=this.getSize().divideBy(2),M=c instanceof I?c:this.latLngToContainerPoint(c),H=M.subtract(k).multiplyBy(1-1/y),J=this.containerPointToLatLng(k.add(H));return this.setView(J,h,{zoom:m})},_getBoundsCenterZoom:function(c,h){h=h||{},c=c.getBounds?c.getBounds():se(c);var m=E(h.paddingTopLeft||h.padding||[0,0]),y=E(h.paddingBottomRight||h.padding||[0,0]),k=this.getBoundsZoom(c,!1,m.add(y));if(k=typeof h.maxZoom=="number"?Math.min(h.maxZoom,k):k,k===1/0)return{center:c.getCenter(),zoom:k};var M=y.subtract(m).divideBy(2),H=this.project(c.getSouthWest(),k),J=this.project(c.getNorthEast(),k),ne=this.unproject(H.add(J).divideBy(2).add(M),k);return{center:ne,zoom:k}},fitBounds:function(c,h){if(c=se(c),!c.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(c,h);return this.setView(m.center,m.zoom,h)},fitWorld:function(c){return this.fitBounds([[-90,-180],[90,180]],c)},panTo:function(c,h){return this.setView(c,this._zoom,{pan:h})},panBy:function(c,h){if(c=E(c).round(),h=h||{},!c.x&&!c.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(c))return this._resetView(this.unproject(this.project(this.getCenter()).add(c)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new e0,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){Pe(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(c).round();this._panAnim.run(this._mapPane,m,h.duration||.25,h.easeLinearity)}else this._rawPanBy(c),this.fire("move").fire("moveend");return this},flyTo:function(c,h,m){if(m=m||{},m.animate===!1||!we.any3d)return this.setView(c,h,m);this._stop();var y=this.project(this.getCenter()),k=this.project(c),M=this.getSize(),H=this._zoom;c=ie(c),h=h===void 0?H:h;var J=Math.max(M.x,M.y),ne=J*this.getZoomScale(H,h),le=k.distanceTo(y)||1,me=1.42,Ne=me*me;function Le(Pt){var gd=Pt?-1:1,vC=Pt?ne:J,yC=ne*ne-J*J+gd*Ne*Ne*le*le,bC=2*vC*Ne*le,Zp=yC/bC,L0=Math.sqrt(Zp*Zp+1)-Zp,_C=L0<1e-9?-18:Math.log(L0);return _C}function cn(Pt){return(Math.exp(Pt)-Math.exp(-Pt))/2}function Rt(Pt){return(Math.exp(Pt)+Math.exp(-Pt))/2}function Wn(Pt){return cn(Pt)/Rt(Pt)}var gn=Le(0);function Ea(Pt){return J*(Rt(gn)/Rt(gn+me*Pt))}function fC(Pt){return J*(Rt(gn)*Wn(gn+me*Pt)-cn(gn))/Ne}function mC(Pt){return 1-Math.pow(1-Pt,1.5)}var gC=Date.now(),M0=(Le(1)-gn)/me,xC=m.duration?1e3*m.duration:1e3*M0*.8;function O0(){var Pt=(Date.now()-gC)/xC,gd=mC(Pt)*M0;Pt<=1?(this._flyToFrame=U(O0,this),this._move(this.unproject(y.add(k.subtract(y).multiplyBy(fC(gd)/le)),H),this.getScaleZoom(J/Ea(gd),H),{flyTo:!0})):this._move(c,h)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),O0.call(this),this},flyToBounds:function(c,h){var m=this._getBoundsCenterZoom(c,h);return this.flyTo(m.center,m.zoom,h)},setMaxBounds:function(c){return c=se(c),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),c.isValid()?(this.options.maxBounds=c,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(c){var h=this.options.minZoom;return this.options.minZoom=c,this._loaded&&h!==c&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(c):this},setMaxZoom:function(c){var h=this.options.maxZoom;return this.options.maxZoom=c,this._loaded&&h!==c&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(c):this},panInsideBounds:function(c,h){this._enforcingBounds=!0;var m=this.getCenter(),y=this._limitCenter(m,this._zoom,se(c));return m.equals(y)||this.panTo(y,h),this._enforcingBounds=!1,this},panInside:function(c,h){h=h||{};var m=E(h.paddingTopLeft||h.padding||[0,0]),y=E(h.paddingBottomRight||h.padding||[0,0]),k=this.project(this.getCenter()),M=this.project(c),H=this.getPixelBounds(),J=re([H.min.add(m),H.max.subtract(y)]),ne=J.getSize();if(!J.contains(M)){this._enforcingBounds=!0;var le=M.subtract(J.getCenter()),me=J.extend(M).getSize().subtract(ne);k.x+=le.x<0?-me.x:me.x,k.y+=le.y<0?-me.y:me.y,this.panTo(this.unproject(k),h),this._enforcingBounds=!1}return this},invalidateSize:function(c){if(!this._loaded)return this;c=s({animate:!1,pan:!0},c===!0?{animate:!0}:c);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),y=h.divideBy(2).round(),k=m.divideBy(2).round(),M=y.subtract(k);return!M.x&&!M.y?this:(c.animate&&c.pan?this.panBy(M):(c.pan&&this._rawPanBy(M),this.fire("move"),c.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(c){if(c=this._locateOptions=s({timeout:1e4,watch:!1},c),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=o(this._handleGeolocationResponse,this),m=o(this._handleGeolocationError,this);return c.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,m,c):navigator.geolocation.getCurrentPosition(h,m,c),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(c){if(this._container._leaflet_id){var h=c.code,m=c.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(c){if(this._container._leaflet_id){var h=c.coords.latitude,m=c.coords.longitude,y=new oe(h,m),k=y.toBounds(c.coords.accuracy*2),M=this._locateOptions;if(M.setView){var H=this.getBoundsZoom(k);this.setView(y,M.maxZoom?Math.min(H,M.maxZoom):H)}var J={latlng:y,bounds:k,timestamp:c.timestamp};for(var ne in c.coords)typeof c.coords[ne]=="number"&&(J[ne]=c.coords[ne]);this.fire("locationfound",J)}},addHandler:function(c,h){if(!h)return this;var m=this[c]=new h(this);return this._handlers.push(m),this.options[c]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ft(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ee(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var c;for(c in this._layers)this._layers[c].remove();for(c in this._panes)ft(this._panes[c]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(c,h){var m="leaflet-pane"+(c?" leaflet-"+c.replace("Pane","")+"-pane":""),y=Ye("div",m,h||this._mapPane);return c&&(this._panes[c]=y),y},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var c=this.getPixelBounds(),h=this.unproject(c.getBottomLeft()),m=this.unproject(c.getTopRight());return new Q(h,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(c,h,m){c=se(c),m=E(m||[0,0]);var y=this.getZoom()||0,k=this.getMinZoom(),M=this.getMaxZoom(),H=c.getNorthWest(),J=c.getSouthEast(),ne=this.getSize().subtract(m),le=re(this.project(J,y),this.project(H,y)).getSize(),me=we.any3d?this.options.zoomSnap:1,Ne=ne.x/le.x,Le=ne.y/le.y,cn=h?Math.max(Ne,Le):Math.min(Ne,Le);return y=this.getScaleZoom(cn,y),me&&(y=Math.round(y/(me/100))*(me/100),y=h?Math.ceil(y/me)*me:Math.floor(y/me)*me),Math.max(k,Math.min(M,y))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new I(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(c,h){var m=this._getTopLeftPoint(c,h);return new K(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(c){return this.options.crs.getProjectedBounds(c===void 0?this.getZoom():c)},getPane:function(c){return typeof c=="string"?this._panes[c]:c},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(c,h){var m=this.options.crs;return h=h===void 0?this._zoom:h,m.scale(c)/m.scale(h)},getScaleZoom:function(c,h){var m=this.options.crs;h=h===void 0?this._zoom:h;var y=m.zoom(c*m.scale(h));return isNaN(y)?1/0:y},project:function(c,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(ie(c),h)},unproject:function(c,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(E(c),h)},layerPointToLatLng:function(c){var h=E(c).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(c){var h=this.project(ie(c))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(c){return this.options.crs.wrapLatLng(ie(c))},wrapLatLngBounds:function(c){return this.options.crs.wrapLatLngBounds(se(c))},distance:function(c,h){return this.options.crs.distance(ie(c),ie(h))},containerPointToLayerPoint:function(c){return E(c).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(c){return E(c).add(this._getMapPanePos())},containerPointToLatLng:function(c){var h=this.containerPointToLayerPoint(E(c));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(c){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ie(c)))},mouseEventToContainerPoint:function(c){return Xv(c,this._container)},mouseEventToLayerPoint:function(c){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(c))},mouseEventToLatLng:function(c){return this.layerPointToLatLng(this.mouseEventToLayerPoint(c))},_initContainer:function(c){var h=this._container=Zv(c);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ee(h,"scroll",this._onScroll,this),this._containerId=d(h)},_initLayout:function(){var c=this._container;this._fadeAnimated=this.options.fadeAnimation&&we.any3d,Pe(c,"leaflet-container"+(we.touch?" leaflet-touch":"")+(we.retina?" leaflet-retina":"")+(we.ielt9?" leaflet-oldie":"")+(we.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=Vo(c,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(c.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var c=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Tt(this._mapPane,new I(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Pe(c.markerPane,"leaflet-zoom-hide"),Pe(c.shadowPane,"leaflet-zoom-hide"))},_resetView:function(c,h,m){Tt(this._mapPane,new I(0,0));var y=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var k=this._zoom!==h;this._moveStart(k,m)._move(c,h)._moveEnd(k),this.fire("viewreset"),y&&this.fire("load")},_moveStart:function(c,h){return c&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(c,h,m,y){h===void 0&&(h=this._zoom);var k=this._zoom!==h;return this._zoom=h,this._lastCenter=c,this._pixelOrigin=this._getNewPixelOrigin(c),y?m&&m.pinch&&this.fire("zoom",m):((k||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(c){return c&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ee(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(c){Tt(this._mapPane,this._getMapPanePos().subtract(c))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(c){this._targets={},this._targets[d(this._container)]=this;var h=c?nt:Ee;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),we.any3d&&this.options.transform3DLimit&&(c?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ee(this._resizeRequest),this._resizeRequest=U(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var c=this._getMapPanePos();Math.max(Math.abs(c.x),Math.abs(c.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(c,h){for(var m=[],y,k=h==="mouseout"||h==="mouseover",M=c.target||c.srcElement,H=!1;M;){if(y=this._targets[d(M)],y&&(h==="click"||h==="preclick")&&this._draggableMoved(y)){H=!0;break}if(y&&y.listens(h,!0)&&(k&&!Ip(M,c)||(m.push(y),k))||M===this._container)break;M=M.parentNode}return!m.length&&!H&&!k&&this.listens(h,!0)&&(m=[this]),m},_isClickDisabled:function(c){for(;c&&c!==this._container;){if(c._leaflet_disable_click)return!0;c=c.parentNode}},_handleDOMEvent:function(c){var h=c.target||c.srcElement;if(!(!this._loaded||h._leaflet_disable_events||c.type==="click"&&this._isClickDisabled(h))){var m=c.type;m==="mousedown"&&Dp(h),this._fireDOMEvent(c,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(c,h,m){if(c.type==="click"){var y=s({},c);y.type="preclick",this._fireDOMEvent(y,y.type,m)}var k=this._findEventTargets(c,h);if(m){for(var M=[],H=0;H<m.length;H++)m[H].listens(h,!0)&&M.push(m[H]);k=M.concat(k)}if(k.length){h==="contextmenu"&&qt(c);var J=k[0],ne={originalEvent:c};if(c.type!=="keypress"&&c.type!=="keydown"&&c.type!=="keyup"){var le=J.getLatLng&&(!J._radius||J._radius<=10);ne.containerPoint=le?this.latLngToContainerPoint(J.getLatLng()):this.mouseEventToContainerPoint(c),ne.layerPoint=this.containerPointToLayerPoint(ne.containerPoint),ne.latlng=le?J.getLatLng():this.layerPointToLatLng(ne.layerPoint)}for(H=0;H<k.length;H++)if(k[H].fire(h,ne,!0),ne.originalEvent._stopped||k[H].options.bubblingMouseEvents===!1&&P(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(c){return c=c.dragging&&c.dragging.enabled()?c:this,c.dragging&&c.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var c=0,h=this._handlers.length;c<h;c++)this._handlers[c].disable()},whenReady:function(c,h){return this._loaded?c.call(h||this,{target:this}):this.on("load",c,h),this},_getMapPanePos:function(){return bi(this._mapPane)||new I(0,0)},_moved:function(){var c=this._getMapPanePos();return c&&!c.equals([0,0])},_getTopLeftPoint:function(c,h){var m=c&&h!==void 0?this._getNewPixelOrigin(c,h):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(c,h){var m=this.getSize()._divideBy(2);return this.project(c,h)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(c,h,m){var y=this._getNewPixelOrigin(m,h);return this.project(c,h)._subtract(y)},_latLngBoundsToNewLayerBounds:function(c,h,m){var y=this._getNewPixelOrigin(m,h);return re([this.project(c.getSouthWest(),h)._subtract(y),this.project(c.getNorthWest(),h)._subtract(y),this.project(c.getSouthEast(),h)._subtract(y),this.project(c.getNorthEast(),h)._subtract(y)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(c){return this.latLngToLayerPoint(c).subtract(this._getCenterLayerPoint())},_limitCenter:function(c,h,m){if(!m)return c;var y=this.project(c,h),k=this.getSize().divideBy(2),M=new K(y.subtract(k),y.add(k)),H=this._getBoundsOffset(M,m,h);return Math.abs(H.x)<=1&&Math.abs(H.y)<=1?c:this.unproject(y.add(H),h)},_limitOffset:function(c,h){if(!h)return c;var m=this.getPixelBounds(),y=new K(m.min.add(c),m.max.add(c));return c.add(this._getBoundsOffset(y,h))},_getBoundsOffset:function(c,h,m){var y=re(this.project(h.getNorthEast(),m),this.project(h.getSouthWest(),m)),k=y.min.subtract(c.min),M=y.max.subtract(c.max),H=this._rebound(k.x,-M.x),J=this._rebound(k.y,-M.y);return new I(H,J)},_rebound:function(c,h){return c+h>0?Math.round(c-h)/2:Math.max(0,Math.ceil(c))-Math.max(0,Math.floor(h))},_limitZoom:function(c){var h=this.getMinZoom(),m=this.getMaxZoom(),y=we.any3d?this.options.zoomSnap:1;return y&&(c=Math.round(c/y)*y),Math.max(h,Math.min(m,c))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){jt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(c,h){var m=this._getCenterOffset(c)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,h),!0)},_createAnimProxy:function(){var c=this._proxy=Ye("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(c),this.on("zoomanim",function(h){var m=Np,y=this._proxy.style[m];yi(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),y===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ft(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var c=this.getCenter(),h=this.getZoom();yi(this._proxy,this.project(c,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(c){this._animatingZoom&&c.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(c,h,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var y=this.getZoomScale(h),k=this._getCenterOffset(c)._divideBy(1-1/y);return m.animate!==!0&&!this.getSize().contains(k)?!1:(U(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(c,h,!0)},this),!0)},_animateZoom:function(c,h,m,y){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=c,this._animateToZoom=h,Pe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:c,zoom:h,noUpdate:y}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&jt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function DS(c,h){return new ze(c,h)}var cr=z.extend({options:{position:"topright"},initialize:function(c){b(this,c)},getPosition:function(){return this.options.position},setPosition:function(c){var h=this._map;return h&&h.removeControl(this),this.options.position=c,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(c){this.remove(),this._map=c;var h=this._container=this.onAdd(c),m=this.getPosition(),y=c._controlCorners[m];return Pe(h,"leaflet-control"),m.indexOf("bottom")!==-1?y.insertBefore(h,y.firstChild):y.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ft(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(c){this._map&&c&&c.screenX>0&&c.screenY>0&&this._map.getContainer().focus()}}),Qo=function(c){return new cr(c)};ze.include({addControl:function(c){return c.addTo(this),this},removeControl:function(c){return c.remove(),this},_initControlPos:function(){var c=this._controlCorners={},h="leaflet-",m=this._controlContainer=Ye("div",h+"control-container",this._container);function y(k,M){var H=h+k+" "+h+M;c[k+M]=Ye("div",H,m)}y("top","left"),y("top","right"),y("bottom","left"),y("bottom","right")},_clearControlPos:function(){for(var c in this._controlCorners)ft(this._controlCorners[c]);ft(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var t0=cr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(c,h,m,y){return m<y?-1:y<m?1:0}},initialize:function(c,h,m){b(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var y in c)this._addLayer(c[y],y);for(y in h)this._addLayer(h[y],y,!0)},onAdd:function(c){this._initLayout(),this._update(),this._map=c,c.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(c){return cr.prototype.addTo.call(this,c),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(c,h){return this._addLayer(c,h),this._map?this._update():this},addOverlay:function(c,h){return this._addLayer(c,h,!0),this._map?this._update():this},removeLayer:function(c){c.off("add remove",this._onLayerChange,this);var h=this._getLayer(d(c));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){Pe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var c=this._map.getSize().y-(this._container.offsetTop+50);return c<this._section.clientHeight?(Pe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=c+"px"):jt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return jt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var c="leaflet-control-layers",h=this._container=Ye("div",c),m=this.options.collapsed;h.setAttribute("aria-haspopup",!0),Go(h),Ap(h);var y=this._section=Ye("section",c+"-list");m&&(this._map.on("click",this.collapse,this),Ee(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var k=this._layersLink=Ye("a",c+"-toggle",h);k.href="#",k.title="Layers",k.setAttribute("role","button"),Ee(k,{keydown:function(M){M.keyCode===13&&this._expandSafely()},click:function(M){qt(M),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=Ye("div",c+"-base",y),this._separator=Ye("div",c+"-separator",y),this._overlaysList=Ye("div",c+"-overlays",y),h.appendChild(y)},_getLayer:function(c){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&d(this._layers[h].layer)===c)return this._layers[h]},_addLayer:function(c,h,m){this._map&&c.on("add remove",this._onLayerChange,this),this._layers.push({layer:c,name:h,overlay:m}),this.options.sortLayers&&this._layers.sort(o(function(y,k){return this.options.sortFunction(y.layer,k.layer,y.name,k.name)},this)),this.options.autoZIndex&&c.setZIndex&&(this._lastZIndex++,c.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ed(this._baseLayersList),ed(this._overlaysList),this._layerControlInputs=[];var c,h,m,y,k=0;for(m=0;m<this._layers.length;m++)y=this._layers[m],this._addItem(y),h=h||y.overlay,c=c||!y.overlay,k+=y.overlay?0:1;return this.options.hideSingleBase&&(c=c&&k>1,this._baseLayersList.style.display=c?"":"none"),this._separator.style.display=h&&c?"":"none",this},_onLayerChange:function(c){this._handlingClick||this._update();var h=this._getLayer(d(c.target)),m=h.overlay?c.type==="add"?"overlayadd":"overlayremove":c.type==="add"?"baselayerchange":null;m&&this._map.fire(m,h)},_createRadioElement:function(c,h){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+c+'"'+(h?' checked="checked"':"")+"/>",y=document.createElement("div");return y.innerHTML=m,y.firstChild},_addItem:function(c){var h=document.createElement("label"),m=this._map.hasLayer(c.layer),y;c.overlay?(y=document.createElement("input"),y.type="checkbox",y.className="leaflet-control-layers-selector",y.defaultChecked=m):y=this._createRadioElement("leaflet-base-layers_"+d(this),m),this._layerControlInputs.push(y),y.layerId=d(c.layer),Ee(y,"click",this._onInputClick,this);var k=document.createElement("span");k.innerHTML=" "+c.name;var M=document.createElement("span");h.appendChild(M),M.appendChild(y),M.appendChild(k);var H=c.overlay?this._overlaysList:this._baseLayersList;return H.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var c=this._layerControlInputs,h,m,y=[],k=[];this._handlingClick=!0;for(var M=c.length-1;M>=0;M--)h=c[M],m=this._getLayer(h.layerId).layer,h.checked?y.push(m):h.checked||k.push(m);for(M=0;M<k.length;M++)this._map.hasLayer(k[M])&&this._map.removeLayer(k[M]);for(M=0;M<y.length;M++)this._map.hasLayer(y[M])||this._map.addLayer(y[M]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var c=this._layerControlInputs,h,m,y=this._map.getZoom(),k=c.length-1;k>=0;k--)h=c[k],m=this._getLayer(h.layerId).layer,h.disabled=m.options.minZoom!==void 0&&y<m.options.minZoom||m.options.maxZoom!==void 0&&y>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var c=this._section;this._preventClick=!0,Ee(c,"click",qt),this.expand();var h=this;setTimeout(function(){nt(c,"click",qt),h._preventClick=!1})}}),MS=function(c,h,m){return new t0(c,h,m)},Fp=cr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(c){var h="leaflet-control-zoom",m=Ye("div",h+" leaflet-bar"),y=this.options;return this._zoomInButton=this._createButton(y.zoomInText,y.zoomInTitle,h+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(y.zoomOutText,y.zoomOutTitle,h+"-out",m,this._zoomOut),this._updateDisabled(),c.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(c){c.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(c){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(c.shiftKey?3:1))},_zoomOut:function(c){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(c.shiftKey?3:1))},_createButton:function(c,h,m,y,k){var M=Ye("a",m,y);return M.innerHTML=c,M.href="#",M.title=h,M.setAttribute("role","button"),M.setAttribute("aria-label",h),Go(M),Ee(M,"click",wi),Ee(M,"click",k,this),Ee(M,"click",this._refocusOnMap,this),M},_updateDisabled:function(){var c=this._map,h="leaflet-disabled";jt(this._zoomInButton,h),jt(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||c._zoom===c.getMinZoom())&&(Pe(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||c._zoom===c.getMaxZoom())&&(Pe(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});ze.mergeOptions({zoomControl:!0}),ze.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Fp,this.addControl(this.zoomControl))});var OS=function(c){return new Fp(c)},n0=cr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(c){var h="leaflet-control-scale",m=Ye("div",h),y=this.options;return this._addScales(y,h+"-line",m),c.on(y.updateWhenIdle?"moveend":"move",this._update,this),c.whenReady(this._update,this),m},onRemove:function(c){c.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(c,h,m){c.metric&&(this._mScale=Ye("div",h,m)),c.imperial&&(this._iScale=Ye("div",h,m))},_update:function(){var c=this._map,h=c.getSize().y/2,m=c.distance(c.containerPointToLatLng([0,h]),c.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(m)},_updateScales:function(c){this.options.metric&&c&&this._updateMetric(c),this.options.imperial&&c&&this._updateImperial(c)},_updateMetric:function(c){var h=this._getRoundNum(c),m=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,m,h/c)},_updateImperial:function(c){var h=c*3.2808399,m,y,k;h>5280?(m=h/5280,y=this._getRoundNum(m),this._updateScale(this._iScale,y+" mi",y/m)):(k=this._getRoundNum(h),this._updateScale(this._iScale,k+" ft",k/h))},_updateScale:function(c,h,m){c.style.width=Math.round(this.options.maxWidth*m)+"px",c.innerHTML=h},_getRoundNum:function(c){var h=Math.pow(10,(Math.floor(c)+"").length-1),m=c/h;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,h*m}}),LS=function(c){return new n0(c)},RS='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',$p=cr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(we.inlineSvg?RS+" ":"")+"Leaflet</a>"},initialize:function(c){b(this,c),this._attributions={}},onAdd:function(c){c.attributionControl=this,this._container=Ye("div","leaflet-control-attribution"),Go(this._container);for(var h in c._layers)c._layers[h].getAttribution&&this.addAttribution(c._layers[h].getAttribution());return this._update(),c.on("layeradd",this._addAttribution,this),this._container},onRemove:function(c){c.off("layeradd",this._addAttribution,this)},_addAttribution:function(c){c.layer.getAttribution&&(this.addAttribution(c.layer.getAttribution()),c.layer.once("remove",function(){this.removeAttribution(c.layer.getAttribution())},this))},setPrefix:function(c){return this.options.prefix=c,this._update(),this},addAttribution:function(c){return c?(this._attributions[c]||(this._attributions[c]=0),this._attributions[c]++,this._update(),this):this},removeAttribution:function(c){return c?(this._attributions[c]&&(this._attributions[c]--,this._update()),this):this},_update:function(){if(this._map){var c=[];for(var h in this._attributions)this._attributions[h]&&c.push(h);var m=[];this.options.prefix&&m.push(this.options.prefix),c.length&&m.push(c.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});ze.mergeOptions({attributionControl:!0}),ze.addInitHook(function(){this.options.attributionControl&&new $p().addTo(this)});var AS=function(c){return new $p(c)};cr.Layers=t0,cr.Zoom=Fp,cr.Scale=n0,cr.Attribution=$p,Qo.layers=MS,Qo.zoom=OS,Qo.scale=LS,Qo.attribution=AS;var kr=z.extend({initialize:function(c){this._map=c},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});kr.addTo=function(c,h){return c.addHandler(h,this),this};var IS={Events:C},r0=we.touch?"touchstart mousedown":"mousedown",_s=q.extend({options:{clickTolerance:3},initialize:function(c,h,m,y){b(this,y),this._element=c,this._dragStartTarget=h||c,this._preventOutline=m},enable:function(){this._enabled||(Ee(this._dragStartTarget,r0,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(_s._dragging===this&&this.finishDrag(!0),nt(this._dragStartTarget,r0,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(c){if(this._enabled&&(this._moved=!1,!kp(this._element,"leaflet-zoom-anim"))){if(c.touches&&c.touches.length!==1){_s._dragging===this&&this.finishDrag();return}if(!(_s._dragging||c.shiftKey||c.which!==1&&c.button!==1&&!c.touches)&&(_s._dragging=this,this._preventOutline&&Dp(this._element),Ep(),qo(),!this._moving)){this.fire("down");var h=c.touches?c.touches[0]:c,m=Kv(this._element);this._startPoint=new I(h.clientX,h.clientY),this._startPos=bi(this._element),this._parentScale=Mp(m);var y=c.type==="mousedown";Ee(document,y?"mousemove":"touchmove",this._onMove,this),Ee(document,y?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(c){if(this._enabled){if(c.touches&&c.touches.length>1){this._moved=!0;return}var h=c.touches&&c.touches.length===1?c.touches[0]:c,m=new I(h.clientX,h.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,qt(c),this._moved||(this.fire("dragstart"),this._moved=!0,Pe(document.body,"leaflet-dragging"),this._lastTarget=c.target||c.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Pe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=c,this._updatePosition())}},_updatePosition:function(){var c={originalEvent:this._lastEvent};this.fire("predrag",c),Tt(this._element,this._newPos),this.fire("drag",c)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(c){jt(document.body,"leaflet-dragging"),this._lastTarget&&(jt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),nt(document,"mousemove touchmove",this._onMove,this),nt(document,"mouseup touchend touchcancel",this._onUp,this),Tp(),Zo();var h=this._moved&&this._moving;this._moving=!1,_s._dragging=!1,h&&this.fire("dragend",{noInertia:c,distance:this._newPos.distanceTo(this._startPos)})}});function s0(c,h,m){var y,k=[1,4,2,8],M,H,J,ne,le,me,Ne,Le;for(M=0,me=c.length;M<me;M++)c[M]._code=ji(c[M],h);for(J=0;J<4;J++){for(Ne=k[J],y=[],M=0,me=c.length,H=me-1;M<me;H=M++)ne=c[M],le=c[H],ne._code&Ne?le._code&Ne||(Le=id(le,ne,Ne,h,m),Le._code=ji(Le,h),y.push(Le)):(le._code&Ne&&(Le=id(le,ne,Ne,h,m),Le._code=ji(Le,h),y.push(Le)),y.push(ne));c=y}return c}function i0(c,h){var m,y,k,M,H,J,ne,le,me;if(!c||c.length===0)throw new Error("latlngs not passed");Hn(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var Ne=ie([0,0]),Le=se(c),cn=Le.getNorthWest().distanceTo(Le.getSouthWest())*Le.getNorthEast().distanceTo(Le.getNorthWest());cn<1700&&(Ne=zp(c));var Rt=c.length,Wn=[];for(m=0;m<Rt;m++){var gn=ie(c[m]);Wn.push(h.project(ie([gn.lat-Ne.lat,gn.lng-Ne.lng])))}for(J=ne=le=0,m=0,y=Rt-1;m<Rt;y=m++)k=Wn[m],M=Wn[y],H=k.y*M.x-M.y*k.x,ne+=(k.x+M.x)*H,le+=(k.y+M.y)*H,J+=H*3;J===0?me=Wn[0]:me=[ne/J,le/J];var Ea=h.unproject(E(me));return ie([Ea.lat+Ne.lat,Ea.lng+Ne.lng])}function zp(c){for(var h=0,m=0,y=0,k=0;k<c.length;k++){var M=ie(c[k]);h+=M.lat,m+=M.lng,y++}return ie([h/y,m/y])}var FS={__proto__:null,clipPolygon:s0,polygonCenter:i0,centroid:zp};function a0(c,h){if(!h||!c.length)return c.slice();var m=h*h;return c=BS(c,m),c=zS(c,m),c}function o0(c,h,m){return Math.sqrt(Xo(c,h,m,!0))}function $S(c,h,m){return Xo(c,h,m)}function zS(c,h){var m=c.length,y=typeof Uint8Array<"u"?Uint8Array:Array,k=new y(m);k[0]=k[m-1]=1,Bp(c,k,h,0,m-1);var M,H=[];for(M=0;M<m;M++)k[M]&&H.push(c[M]);return H}function Bp(c,h,m,y,k){var M=0,H,J,ne;for(J=y+1;J<=k-1;J++)ne=Xo(c[J],c[y],c[k],!0),ne>M&&(H=J,M=ne);M>m&&(h[H]=1,Bp(c,h,m,y,H),Bp(c,h,m,H,k))}function BS(c,h){for(var m=[c[0]],y=1,k=0,M=c.length;y<M;y++)US(c[y],c[k])>h&&(m.push(c[y]),k=y);return k<M-1&&m.push(c[M-1]),m}var l0;function c0(c,h,m,y,k){var M=y?l0:ji(c,m),H=ji(h,m),J,ne,le;for(l0=H;;){if(!(M|H))return[c,h];if(M&H)return!1;J=M||H,ne=id(c,h,J,m,k),le=ji(ne,m),J===M?(c=ne,M=le):(h=ne,H=le)}}function id(c,h,m,y,k){var M=h.x-c.x,H=h.y-c.y,J=y.min,ne=y.max,le,me;return m&8?(le=c.x+M*(ne.y-c.y)/H,me=ne.y):m&4?(le=c.x+M*(J.y-c.y)/H,me=J.y):m&2?(le=ne.x,me=c.y+H*(ne.x-c.x)/M):m&1&&(le=J.x,me=c.y+H*(J.x-c.x)/M),new I(le,me,k)}function ji(c,h){var m=0;return c.x<h.min.x?m|=1:c.x>h.max.x&&(m|=2),c.y<h.min.y?m|=4:c.y>h.max.y&&(m|=8),m}function US(c,h){var m=h.x-c.x,y=h.y-c.y;return m*m+y*y}function Xo(c,h,m,y){var k=h.x,M=h.y,H=m.x-k,J=m.y-M,ne=H*H+J*J,le;return ne>0&&(le=((c.x-k)*H+(c.y-M)*J)/ne,le>1?(k=m.x,M=m.y):le>0&&(k+=H*le,M+=J*le)),H=c.x-k,J=c.y-M,y?H*H+J*J:new I(k,M)}function Hn(c){return!S(c[0])||typeof c[0][0]!="object"&&typeof c[0][0]<"u"}function d0(c){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Hn(c)}function u0(c,h){var m,y,k,M,H,J,ne,le;if(!c||c.length===0)throw new Error("latlngs not passed");Hn(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var me=ie([0,0]),Ne=se(c),Le=Ne.getNorthWest().distanceTo(Ne.getSouthWest())*Ne.getNorthEast().distanceTo(Ne.getNorthWest());Le<1700&&(me=zp(c));var cn=c.length,Rt=[];for(m=0;m<cn;m++){var Wn=ie(c[m]);Rt.push(h.project(ie([Wn.lat-me.lat,Wn.lng-me.lng])))}for(m=0,y=0;m<cn-1;m++)y+=Rt[m].distanceTo(Rt[m+1])/2;if(y===0)le=Rt[0];else for(m=0,M=0;m<cn-1;m++)if(H=Rt[m],J=Rt[m+1],k=H.distanceTo(J),M+=k,M>y){ne=(M-y)/k,le=[J.x-ne*(J.x-H.x),J.y-ne*(J.y-H.y)];break}var gn=h.unproject(E(le));return ie([gn.lat+me.lat,gn.lng+me.lng])}var HS={__proto__:null,simplify:a0,pointToSegmentDistance:o0,closestPointOnSegment:$S,clipSegment:c0,_getEdgeIntersection:id,_getBitCode:ji,_sqClosestPointOnSegment:Xo,isFlat:Hn,_flat:d0,polylineCenter:u0},Up={project:function(c){return new I(c.lng,c.lat)},unproject:function(c){return new oe(c.y,c.x)},bounds:new K([-180,-90],[180,90])},Hp={R:6378137,R_MINOR:6356752314245179e-9,bounds:new K([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(c){var h=Math.PI/180,m=this.R,y=c.lat*h,k=this.R_MINOR/m,M=Math.sqrt(1-k*k),H=M*Math.sin(y),J=Math.tan(Math.PI/4-y/2)/Math.pow((1-H)/(1+H),M/2);return y=-m*Math.log(Math.max(J,1e-10)),new I(c.lng*h*m,y)},unproject:function(c){for(var h=180/Math.PI,m=this.R,y=this.R_MINOR/m,k=Math.sqrt(1-y*y),M=Math.exp(-c.y/m),H=Math.PI/2-2*Math.atan(M),J=0,ne=.1,le;J<15&&Math.abs(ne)>1e-7;J++)le=k*Math.sin(H),le=Math.pow((1-le)/(1+le),k/2),ne=Math.PI/2-2*Math.atan(M*le)-H,H+=ne;return new oe(H*h,c.x*h/m)}},WS={__proto__:null,LonLat:Up,Mercator:Hp,SphericalMercator:ae},YS=s({},ve,{code:"EPSG:3395",projection:Hp,transformation:function(){var c=.5/(Math.PI*Hp.R);return ke(c,.5,-c,.5)}()}),h0=s({},ve,{code:"EPSG:4326",projection:Up,transformation:ke(1/180,1,-1/180,.5)}),VS=s({},ge,{projection:Up,transformation:ke(1,0,-1,0),scale:function(c){return Math.pow(2,c)},zoom:function(c){return Math.log(c)/Math.LN2},distance:function(c,h){var m=h.lng-c.lng,y=h.lat-c.lat;return Math.sqrt(m*m+y*y)},infinite:!0});ge.Earth=ve,ge.EPSG3395=YS,ge.EPSG3857=Ce,ge.EPSG900913=ce,ge.EPSG4326=h0,ge.Simple=VS;var dr=q.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(c){return c.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(c){return c&&c.removeLayer(this),this},getPane:function(c){return this._map.getPane(c?this.options[c]||c:this.options.pane)},addInteractiveTarget:function(c){return this._map._targets[d(c)]=this,this},removeInteractiveTarget:function(c){return delete this._map._targets[d(c)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(c){var h=c.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var m=this.getEvents();h.on(m,this),this.once("remove",function(){h.off(m,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});ze.include({addLayer:function(c){if(!c._layerAdd)throw new Error("The provided object is not a Layer.");var h=d(c);return this._layers[h]?this:(this._layers[h]=c,c._mapToAdd=this,c.beforeAdd&&c.beforeAdd(this),this.whenReady(c._layerAdd,c),this)},removeLayer:function(c){var h=d(c);return this._layers[h]?(this._loaded&&c.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:c}),c.fire("remove")),c._map=c._mapToAdd=null,this):this},hasLayer:function(c){return d(c)in this._layers},eachLayer:function(c,h){for(var m in this._layers)c.call(h,this._layers[m]);return this},_addLayers:function(c){c=c?S(c)?c:[c]:[];for(var h=0,m=c.length;h<m;h++)this.addLayer(c[h])},_addZoomLimit:function(c){(!isNaN(c.options.maxZoom)||!isNaN(c.options.minZoom))&&(this._zoomBoundLayers[d(c)]=c,this._updateZoomLevels())},_removeZoomLimit:function(c){var h=d(c);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var c=1/0,h=-1/0,m=this._getZoomSpan();for(var y in this._zoomBoundLayers){var k=this._zoomBoundLayers[y].options;c=k.minZoom===void 0?c:Math.min(c,k.minZoom),h=k.maxZoom===void 0?h:Math.max(h,k.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=c===1/0?void 0:c,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ja=dr.extend({initialize:function(c,h){b(this,h),this._layers={};var m,y;if(c)for(m=0,y=c.length;m<y;m++)this.addLayer(c[m])},addLayer:function(c){var h=this.getLayerId(c);return this._layers[h]=c,this._map&&this._map.addLayer(c),this},removeLayer:function(c){var h=c in this._layers?c:this.getLayerId(c);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(c){var h=typeof c=="number"?c:this.getLayerId(c);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(c){var h=Array.prototype.slice.call(arguments,1),m,y;for(m in this._layers)y=this._layers[m],y[c]&&y[c].apply(y,h);return this},onAdd:function(c){this.eachLayer(c.addLayer,c)},onRemove:function(c){this.eachLayer(c.removeLayer,c)},eachLayer:function(c,h){for(var m in this._layers)c.call(h,this._layers[m]);return this},getLayer:function(c){return this._layers[c]},getLayers:function(){var c=[];return this.eachLayer(c.push,c),c},setZIndex:function(c){return this.invoke("setZIndex",c)},getLayerId:function(c){return d(c)}}),qS=function(c,h){return new ja(c,h)},Gr=ja.extend({addLayer:function(c){return this.hasLayer(c)?this:(c.addEventParent(this),ja.prototype.addLayer.call(this,c),this.fire("layeradd",{layer:c}))},removeLayer:function(c){return this.hasLayer(c)?(c in this._layers&&(c=this._layers[c]),c.removeEventParent(this),ja.prototype.removeLayer.call(this,c),this.fire("layerremove",{layer:c})):this},setStyle:function(c){return this.invoke("setStyle",c)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var c=new Q;for(var h in this._layers){var m=this._layers[h];c.extend(m.getBounds?m.getBounds():m.getLatLng())}return c}}),ZS=function(c,h){return new Gr(c,h)},Na=z.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(c){b(this,c)},createIcon:function(c){return this._createIcon("icon",c)},createShadow:function(c){return this._createIcon("shadow",c)},_createIcon:function(c,h){var m=this._getIconUrl(c);if(!m){if(c==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var y=this._createImg(m,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(y,c),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),y},_setIconStyles:function(c,h){var m=this.options,y=m[h+"Size"];typeof y=="number"&&(y=[y,y]);var k=E(y),M=E(h==="shadow"&&m.shadowAnchor||m.iconAnchor||k&&k.divideBy(2,!0));c.className="leaflet-marker-"+h+" "+(m.className||""),M&&(c.style.marginLeft=-M.x+"px",c.style.marginTop=-M.y+"px"),k&&(c.style.width=k.x+"px",c.style.height=k.y+"px")},_createImg:function(c,h){return h=h||document.createElement("img"),h.src=c,h},_getIconUrl:function(c){return we.retina&&this.options[c+"RetinaUrl"]||this.options[c+"Url"]}});function KS(c){return new Na(c)}var Jo=Na.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(c){return typeof Jo.imagePath!="string"&&(Jo.imagePath=this._detectIconPath()),(this.options.imagePath||Jo.imagePath)+Na.prototype._getIconUrl.call(this,c)},_stripUrl:function(c){var h=function(m,y,k){var M=y.exec(m);return M&&M[k]};return c=h(c,/^url\((['"])?(.+)\1\)$/,2),c&&h(c,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var c=Ye("div","leaflet-default-icon-path",document.body),h=Vo(c,"background-image")||Vo(c,"backgroundImage");if(document.body.removeChild(c),h=this._stripUrl(h),h)return h;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),p0=kr.extend({initialize:function(c){this._marker=c},addHooks:function(){var c=this._marker._icon;this._draggable||(this._draggable=new _s(c,c,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Pe(c,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&jt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(c){var h=this._marker,m=h._map,y=this._marker.options.autoPanSpeed,k=this._marker.options.autoPanPadding,M=bi(h._icon),H=m.getPixelBounds(),J=m.getPixelOrigin(),ne=re(H.min._subtract(J).add(k),H.max._subtract(J).subtract(k));if(!ne.contains(M)){var le=E((Math.max(ne.max.x,M.x)-ne.max.x)/(H.max.x-ne.max.x)-(Math.min(ne.min.x,M.x)-ne.min.x)/(H.min.x-ne.min.x),(Math.max(ne.max.y,M.y)-ne.max.y)/(H.max.y-ne.max.y)-(Math.min(ne.min.y,M.y)-ne.min.y)/(H.min.y-ne.min.y)).multiplyBy(y);m.panBy(le,{animate:!1}),this._draggable._newPos._add(le),this._draggable._startPos._add(le),Tt(h._icon,this._draggable._newPos),this._onDrag(c),this._panRequest=U(this._adjustPan.bind(this,c))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(c){this._marker.options.autoPan&&(ee(this._panRequest),this._panRequest=U(this._adjustPan.bind(this,c)))},_onDrag:function(c){var h=this._marker,m=h._shadow,y=bi(h._icon),k=h._map.layerPointToLatLng(y);m&&Tt(m,y),h._latlng=k,c.latlng=k,c.oldLatLng=this._oldLatLng,h.fire("move",c).fire("drag",c)},_onDragEnd:function(c){ee(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",c)}}),ad=dr.extend({options:{icon:new Jo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(c,h){b(this,h),this._latlng=ie(c)},onAdd:function(c){this._zoomAnimated=this._zoomAnimated&&c.options.markerZoomAnimation,this._zoomAnimated&&c.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(c){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&c.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(c){var h=this._latlng;return this._latlng=ie(c),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(c){return this.options.zIndexOffset=c,this.update()},getIcon:function(){return this.options.icon},setIcon:function(c){return this.options.icon=c,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var c=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(c)}return this},_initIcon:function(){var c=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=c.icon.createIcon(this._icon),y=!1;m!==this._icon&&(this._icon&&this._removeIcon(),y=!0,c.title&&(m.title=c.title),m.tagName==="IMG"&&(m.alt=c.alt||"")),Pe(m,h),c.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,c.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ee(m,"focus",this._panOnFocus,this);var k=c.icon.createShadow(this._shadow),M=!1;k!==this._shadow&&(this._removeShadow(),M=!0),k&&(Pe(k,h),k.alt=""),this._shadow=k,c.opacity<1&&this._updateOpacity(),y&&this.getPane().appendChild(this._icon),this._initInteraction(),k&&M&&this.getPane(c.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&nt(this._icon,"focus",this._panOnFocus,this),ft(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ft(this._shadow),this._shadow=null},_setPos:function(c){this._icon&&Tt(this._icon,c),this._shadow&&Tt(this._shadow,c),this._zIndex=c.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(c){this._icon&&(this._icon.style.zIndex=this._zIndex+c)},_animateZoom:function(c){var h=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(Pe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),p0)){var c=this.options.draggable;this.dragging&&(c=this.dragging.enabled(),this.dragging.disable()),this.dragging=new p0(this),c&&this.dragging.enable()}},setOpacity:function(c){return this.options.opacity=c,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var c=this.options.opacity;this._icon&&Un(this._icon,c),this._shadow&&Un(this._shadow,c)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var c=this._map;if(c){var h=this.options.icon.options,m=h.iconSize?E(h.iconSize):E(0,0),y=h.iconAnchor?E(h.iconAnchor):E(0,0);c.panInside(this._latlng,{paddingTopLeft:y,paddingBottomRight:m.subtract(y)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function GS(c,h){return new ad(c,h)}var ws=dr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(c){this._renderer=c.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(c){return b(this,c),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&c&&Object.prototype.hasOwnProperty.call(c,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),od=ws.extend({options:{fill:!0,radius:10},initialize:function(c,h){b(this,h),this._latlng=ie(c),this._radius=this.options.radius},setLatLng:function(c){var h=this._latlng;return this._latlng=ie(c),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(c){return this.options.radius=this._radius=c,this.redraw()},getRadius:function(){return this._radius},setStyle:function(c){var h=c&&c.radius||this._radius;return ws.prototype.setStyle.call(this,c),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var c=this._radius,h=this._radiusY||c,m=this._clickTolerance(),y=[c+m,h+m];this._pxBounds=new K(this._point.subtract(y),this._point.add(y))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(c){return c.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function QS(c,h){return new od(c,h)}var Wp=od.extend({initialize:function(c,h,m){if(typeof h=="number"&&(h=s({},m,{radius:h})),b(this,h),this._latlng=ie(c),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(c){return this._mRadius=c,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var c=[this._radius,this._radiusY||this._radius];return new Q(this._map.layerPointToLatLng(this._point.subtract(c)),this._map.layerPointToLatLng(this._point.add(c)))},setStyle:ws.prototype.setStyle,_project:function(){var c=this._latlng.lng,h=this._latlng.lat,m=this._map,y=m.options.crs;if(y.distance===ve.distance){var k=Math.PI/180,M=this._mRadius/ve.R/k,H=m.project([h+M,c]),J=m.project([h-M,c]),ne=H.add(J).divideBy(2),le=m.unproject(ne).lat,me=Math.acos((Math.cos(M*k)-Math.sin(h*k)*Math.sin(le*k))/(Math.cos(h*k)*Math.cos(le*k)))/k;(isNaN(me)||me===0)&&(me=M/Math.cos(Math.PI/180*h)),this._point=ne.subtract(m.getPixelOrigin()),this._radius=isNaN(me)?0:ne.x-m.project([le,c-me]).x,this._radiusY=ne.y-H.y}else{var Ne=y.unproject(y.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(Ne).x}this._updateBounds()}});function XS(c,h,m){return new Wp(c,h,m)}var Qr=ws.extend({options:{smoothFactor:1,noClip:!1},initialize:function(c,h){b(this,h),this._setLatLngs(c)},getLatLngs:function(){return this._latlngs},setLatLngs:function(c){return this._setLatLngs(c),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(c){for(var h=1/0,m=null,y=Xo,k,M,H=0,J=this._parts.length;H<J;H++)for(var ne=this._parts[H],le=1,me=ne.length;le<me;le++){k=ne[le-1],M=ne[le];var Ne=y(c,k,M,!0);Ne<h&&(h=Ne,m=y(c,k,M))}return m&&(m.distance=Math.sqrt(h)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return u0(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(c,h){return h=h||this._defaultShape(),c=ie(c),h.push(c),this._bounds.extend(c),this.redraw()},_setLatLngs:function(c){this._bounds=new Q,this._latlngs=this._convertLatLngs(c)},_defaultShape:function(){return Hn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(c){for(var h=[],m=Hn(c),y=0,k=c.length;y<k;y++)m?(h[y]=ie(c[y]),this._bounds.extend(h[y])):h[y]=this._convertLatLngs(c[y]);return h},_project:function(){var c=new K;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,c),this._bounds.isValid()&&c.isValid()&&(this._rawPxBounds=c,this._updateBounds())},_updateBounds:function(){var c=this._clickTolerance(),h=new I(c,c);this._rawPxBounds&&(this._pxBounds=new K([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(c,h,m){var y=c[0]instanceof oe,k=c.length,M,H;if(y){for(H=[],M=0;M<k;M++)H[M]=this._map.latLngToLayerPoint(c[M]),m.extend(H[M]);h.push(H)}else for(M=0;M<k;M++)this._projectLatlngs(c[M],h,m)},_clipPoints:function(){var c=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,m,y,k,M,H,J,ne;for(m=0,k=0,M=this._rings.length;m<M;m++)for(ne=this._rings[m],y=0,H=ne.length;y<H-1;y++)J=c0(ne[y],ne[y+1],c,y,!0),J&&(h[k]=h[k]||[],h[k].push(J[0]),(J[1]!==ne[y+1]||y===H-2)&&(h[k].push(J[1]),k++))}},_simplifyPoints:function(){for(var c=this._parts,h=this.options.smoothFactor,m=0,y=c.length;m<y;m++)c[m]=a0(c[m],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(c,h){var m,y,k,M,H,J,ne=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(m=0,M=this._parts.length;m<M;m++)for(J=this._parts[m],y=0,H=J.length,k=H-1;y<H;k=y++)if(!(!h&&y===0)&&o0(c,J[k],J[y])<=ne)return!0;return!1}});function JS(c,h){return new Qr(c,h)}Qr._flat=d0;var ka=Qr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return i0(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(c){var h=Qr.prototype._convertLatLngs.call(this,c),m=h.length;return m>=2&&h[0]instanceof oe&&h[0].equals(h[m-1])&&h.pop(),h},_setLatLngs:function(c){Qr.prototype._setLatLngs.call(this,c),Hn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Hn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var c=this._renderer._bounds,h=this.options.weight,m=new I(h,h);if(c=new K(c.min.subtract(m),c.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}for(var y=0,k=this._rings.length,M;y<k;y++)M=s0(this._rings[y],c,!0),M.length&&this._parts.push(M)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(c){var h=!1,m,y,k,M,H,J,ne,le;if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(M=0,ne=this._parts.length;M<ne;M++)for(m=this._parts[M],H=0,le=m.length,J=le-1;H<le;J=H++)y=m[H],k=m[J],y.y>c.y!=k.y>c.y&&c.x<(k.x-y.x)*(c.y-y.y)/(k.y-y.y)+y.x&&(h=!h);return h||Qr.prototype._containsPoint.call(this,c,!0)}});function eC(c,h){return new ka(c,h)}var Xr=Gr.extend({initialize:function(c,h){b(this,h),this._layers={},c&&this.addData(c)},addData:function(c){var h=S(c)?c:c.features,m,y,k;if(h){for(m=0,y=h.length;m<y;m++)k=h[m],(k.geometries||k.geometry||k.features||k.coordinates)&&this.addData(k);return this}var M=this.options;if(M.filter&&!M.filter(c))return this;var H=ld(c,M);return H?(H.feature=ud(c),H.defaultOptions=H.options,this.resetStyle(H),M.onEachFeature&&M.onEachFeature(c,H),this.addLayer(H)):this},resetStyle:function(c){return c===void 0?this.eachLayer(this.resetStyle,this):(c.options=s({},c.defaultOptions),this._setLayerStyle(c,this.options.style),this)},setStyle:function(c){return this.eachLayer(function(h){this._setLayerStyle(h,c)},this)},_setLayerStyle:function(c,h){c.setStyle&&(typeof h=="function"&&(h=h(c.feature)),c.setStyle(h))}});function ld(c,h){var m=c.type==="Feature"?c.geometry:c,y=m?m.coordinates:null,k=[],M=h&&h.pointToLayer,H=h&&h.coordsToLatLng||Yp,J,ne,le,me;if(!y&&!m)return null;switch(m.type){case"Point":return J=H(y),f0(M,c,J,h);case"MultiPoint":for(le=0,me=y.length;le<me;le++)J=H(y[le]),k.push(f0(M,c,J,h));return new Gr(k);case"LineString":case"MultiLineString":return ne=cd(y,m.type==="LineString"?0:1,H),new Qr(ne,h);case"Polygon":case"MultiPolygon":return ne=cd(y,m.type==="Polygon"?1:2,H),new ka(ne,h);case"GeometryCollection":for(le=0,me=m.geometries.length;le<me;le++){var Ne=ld({geometry:m.geometries[le],type:"Feature",properties:c.properties},h);Ne&&k.push(Ne)}return new Gr(k);case"FeatureCollection":for(le=0,me=m.features.length;le<me;le++){var Le=ld(m.features[le],h);Le&&k.push(Le)}return new Gr(k);default:throw new Error("Invalid GeoJSON object.")}}function f0(c,h,m,y){return c?c(h,m):new ad(m,y&&y.markersInheritOptions&&y)}function Yp(c){return new oe(c[1],c[0],c[2])}function cd(c,h,m){for(var y=[],k=0,M=c.length,H;k<M;k++)H=h?cd(c[k],h-1,m):(m||Yp)(c[k]),y.push(H);return y}function Vp(c,h){return c=ie(c),c.alt!==void 0?[x(c.lng,h),x(c.lat,h),x(c.alt,h)]:[x(c.lng,h),x(c.lat,h)]}function dd(c,h,m,y){for(var k=[],M=0,H=c.length;M<H;M++)k.push(h?dd(c[M],Hn(c[M])?0:h-1,m,y):Vp(c[M],y));return!h&&m&&k.length>0&&k.push(k[0].slice()),k}function Sa(c,h){return c.feature?s({},c.feature,{geometry:h}):ud(h)}function ud(c){return c.type==="Feature"||c.type==="FeatureCollection"?c:{type:"Feature",properties:{},geometry:c}}var qp={toGeoJSON:function(c){return Sa(this,{type:"Point",coordinates:Vp(this.getLatLng(),c)})}};ad.include(qp),Wp.include(qp),od.include(qp),Qr.include({toGeoJSON:function(c){var h=!Hn(this._latlngs),m=dd(this._latlngs,h?1:0,!1,c);return Sa(this,{type:(h?"Multi":"")+"LineString",coordinates:m})}}),ka.include({toGeoJSON:function(c){var h=!Hn(this._latlngs),m=h&&!Hn(this._latlngs[0]),y=dd(this._latlngs,m?2:h?1:0,!0,c);return h||(y=[y]),Sa(this,{type:(m?"Multi":"")+"Polygon",coordinates:y})}}),ja.include({toMultiPoint:function(c){var h=[];return this.eachLayer(function(m){h.push(m.toGeoJSON(c).geometry.coordinates)}),Sa(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(c){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(c);var m=h==="GeometryCollection",y=[];return this.eachLayer(function(k){if(k.toGeoJSON){var M=k.toGeoJSON(c);if(m)y.push(M.geometry);else{var H=ud(M);H.type==="FeatureCollection"?y.push.apply(y,H.features):y.push(H)}}}),m?Sa(this,{geometries:y,type:"GeometryCollection"}):{type:"FeatureCollection",features:y}}});function m0(c,h){return new Xr(c,h)}var tC=m0,hd=dr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(c,h,m){this._url=c,this._bounds=se(h),b(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Pe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ft(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(c){return this.options.opacity=c,this._image&&this._updateOpacity(),this},setStyle:function(c){return c.opacity&&this.setOpacity(c.opacity),this},bringToFront:function(){return this._map&&_a(this._image),this},bringToBack:function(){return this._map&&wa(this._image),this},setUrl:function(c){return this._url=c,this._image&&(this._image.src=c),this},setBounds:function(c){return this._bounds=se(c),this._map&&this._reset(),this},getEvents:function(){var c={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var c=this._url.tagName==="IMG",h=this._image=c?this._url:Ye("img");if(Pe(h,"leaflet-image-layer"),this._zoomAnimated&&Pe(h,"leaflet-zoom-animated"),this.options.className&&Pe(h,this.options.className),h.onselectstart=f,h.onmousemove=f,h.onload=o(this.fire,this,"load"),h.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),c){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(c){var h=this._map.getZoomScale(c.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,c.zoom,c.center).min;yi(this._image,m,h)},_reset:function(){var c=this._image,h=new K(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=h.getSize();Tt(c,h.min),c.style.width=m.x+"px",c.style.height=m.y+"px"},_updateOpacity:function(){Un(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var c=this.options.errorOverlayUrl;c&&this._url!==c&&(this._url=c,this._image.src=c)},getCenter:function(){return this._bounds.getCenter()}}),nC=function(c,h,m){return new hd(c,h,m)},g0=hd.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var c=this._url.tagName==="VIDEO",h=this._image=c?this._url:Ye("video");if(Pe(h,"leaflet-image-layer"),this._zoomAnimated&&Pe(h,"leaflet-zoom-animated"),this.options.className&&Pe(h,this.options.className),h.onselectstart=f,h.onmousemove=f,h.onloadeddata=o(this.fire,this,"load"),c){for(var m=h.getElementsByTagName("source"),y=[],k=0;k<m.length;k++)y.push(m[k].src);this._url=m.length>0?y:[h.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var M=0;M<this._url.length;M++){var H=Ye("source");H.src=this._url[M],h.appendChild(H)}}});function rC(c,h,m){return new g0(c,h,m)}var x0=hd.extend({_initImage:function(){var c=this._image=this._url;Pe(c,"leaflet-image-layer"),this._zoomAnimated&&Pe(c,"leaflet-zoom-animated"),this.options.className&&Pe(c,this.options.className),c.onselectstart=f,c.onmousemove=f}});function sC(c,h,m){return new x0(c,h,m)}var Sr=dr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(c,h){c&&(c instanceof oe||S(c))?(this._latlng=ie(c),b(this,h)):(b(this,c),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(c){return c=arguments.length?c:this._source._map,c.hasLayer(this)||c.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(c){return this._map?this.close():(arguments.length?this._source=c:c=this._source,this._prepareOpen(),this.openOn(c._map)),this},onAdd:function(c){this._zoomAnimated=c._zoomAnimated,this._container||this._initLayout(),c._fadeAnimated&&Un(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),c._fadeAnimated&&Un(this._container,1),this.bringToFront(),this.options.interactive&&(Pe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(c){c._fadeAnimated?(Un(this._container,0),this._removeTimeout=setTimeout(o(ft,void 0,this._container),200)):ft(this._container),this.options.interactive&&(jt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(c){return this._latlng=ie(c),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(c){return this._content=c,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var c={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&_a(this._container),this},bringToBack:function(){return this._map&&wa(this._container),this},_prepareOpen:function(c){var h=this._source;if(!h._map)return!1;if(h instanceof Gr){h=null;var m=this._source._layers;for(var y in m)if(m[y]._map){h=m[y];break}if(!h)return!1;this._source=h}if(!c)if(h.getCenter)c=h.getCenter();else if(h.getLatLng)c=h.getLatLng();else if(h.getBounds)c=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(c),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var c=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")c.innerHTML=h;else{for(;c.hasChildNodes();)c.removeChild(c.firstChild);c.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var c=this._map.latLngToLayerPoint(this._latlng),h=E(this.options.offset),m=this._getAnchor();this._zoomAnimated?Tt(this._container,c.add(m)):h=h.add(c).add(m);var y=this._containerBottom=-h.y,k=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=y+"px",this._container.style.left=k+"px"}},_getAnchor:function(){return[0,0]}});ze.include({_initOverlay:function(c,h,m,y){var k=h;return k instanceof c||(k=new c(y).setContent(h)),m&&k.setLatLng(m),k}}),dr.include({_initOverlay:function(c,h,m,y){var k=m;return k instanceof c?(b(k,y),k._source=this):(k=h&&!y?h:new c(y,this),k.setContent(m)),k}});var pd=Sr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(c){return c=arguments.length?c:this._source._map,!c.hasLayer(this)&&c._popup&&c._popup.options.autoClose&&c.removeLayer(c._popup),c._popup=this,Sr.prototype.openOn.call(this,c)},onAdd:function(c){Sr.prototype.onAdd.call(this,c),c.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ws||this._source.on("preclick",_i))},onRemove:function(c){Sr.prototype.onRemove.call(this,c),c.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ws||this._source.off("preclick",_i))},getEvents:function(){var c=Sr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(c.preclick=this.close),this.options.keepInView&&(c.moveend=this._adjustPan),c},_initLayout:function(){var c="leaflet-popup",h=this._container=Ye("div",c+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=Ye("div",c+"-content-wrapper",h);if(this._contentNode=Ye("div",c+"-content",m),Go(h),Ap(this._contentNode),Ee(h,"contextmenu",_i),this._tipContainer=Ye("div",c+"-tip-container",h),this._tip=Ye("div",c+"-tip",this._tipContainer),this.options.closeButton){var y=this._closeButton=Ye("a",c+"-close-button",h);y.setAttribute("role","button"),y.setAttribute("aria-label","Close popup"),y.href="#close",y.innerHTML='<span aria-hidden="true">&#215;</span>',Ee(y,"click",function(k){qt(k),this.close()},this)}},_updateLayout:function(){var c=this._contentNode,h=c.style;h.width="",h.whiteSpace="nowrap";var m=c.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),h.width=m+1+"px",h.whiteSpace="",h.height="";var y=c.offsetHeight,k=this.options.maxHeight,M="leaflet-popup-scrolled";k&&y>k?(h.height=k+"px",Pe(c,M)):jt(c,M),this._containerWidth=this._container.offsetWidth},_animateZoom:function(c){var h=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center),m=this._getAnchor();Tt(this._container,h.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var c=this._map,h=parseInt(Vo(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+h,y=this._containerWidth,k=new I(this._containerLeft,-m-this._containerBottom);k._add(bi(this._container));var M=c.layerPointToContainerPoint(k),H=E(this.options.autoPanPadding),J=E(this.options.autoPanPaddingTopLeft||H),ne=E(this.options.autoPanPaddingBottomRight||H),le=c.getSize(),me=0,Ne=0;M.x+y+ne.x>le.x&&(me=M.x+y-le.x+ne.x),M.x-me-J.x<0&&(me=M.x-J.x),M.y+m+ne.y>le.y&&(Ne=M.y+m-le.y+ne.y),M.y-Ne-J.y<0&&(Ne=M.y-J.y),(me||Ne)&&(this.options.keepInView&&(this._autopanning=!0),c.fire("autopanstart").panBy([me,Ne]))}},_getAnchor:function(){return E(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),iC=function(c,h){return new pd(c,h)};ze.mergeOptions({closePopupOnClick:!0}),ze.include({openPopup:function(c,h,m){return this._initOverlay(pd,c,h,m).openOn(this),this},closePopup:function(c){return c=arguments.length?c:this._popup,c&&c.close(),this}}),dr.include({bindPopup:function(c,h){return this._popup=this._initOverlay(pd,this._popup,c,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(c){return this._popup&&(this instanceof Gr||(this._popup._source=this),this._popup._prepareOpen(c||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(c){return this._popup&&this._popup.setContent(c),this},getPopup:function(){return this._popup},_openPopup:function(c){if(!(!this._popup||!this._map)){wi(c);var h=c.layer||c.target;if(this._popup._source===h&&!(h instanceof ws)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(c.latlng);return}this._popup._source=h,this.openPopup(c.latlng)}},_movePopup:function(c){this._popup.setLatLng(c.latlng)},_onKeyPress:function(c){c.originalEvent.keyCode===13&&this._openPopup(c)}});var fd=Sr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(c){Sr.prototype.onAdd.call(this,c),this.setOpacity(this.options.opacity),c.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(c){Sr.prototype.onRemove.call(this,c),c.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var c=Sr.prototype.getEvents.call(this);return this.options.permanent||(c.preclick=this.close),c},_initLayout:function(){var c="leaflet-tooltip",h=c+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ye("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(c){var h,m,y=this._map,k=this._container,M=y.latLngToContainerPoint(y.getCenter()),H=y.layerPointToContainerPoint(c),J=this.options.direction,ne=k.offsetWidth,le=k.offsetHeight,me=E(this.options.offset),Ne=this._getAnchor();J==="top"?(h=ne/2,m=le):J==="bottom"?(h=ne/2,m=0):J==="center"?(h=ne/2,m=le/2):J==="right"?(h=0,m=le/2):J==="left"?(h=ne,m=le/2):H.x<M.x?(J="right",h=0,m=le/2):(J="left",h=ne+(me.x+Ne.x)*2,m=le/2),c=c.subtract(E(h,m,!0)).add(me).add(Ne),jt(k,"leaflet-tooltip-right"),jt(k,"leaflet-tooltip-left"),jt(k,"leaflet-tooltip-top"),jt(k,"leaflet-tooltip-bottom"),Pe(k,"leaflet-tooltip-"+J),Tt(k,c)},_updatePosition:function(){var c=this._map.latLngToLayerPoint(this._latlng);this._setPosition(c)},setOpacity:function(c){this.options.opacity=c,this._container&&Un(this._container,c)},_animateZoom:function(c){var h=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center);this._setPosition(h)},_getAnchor:function(){return E(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),aC=function(c,h){return new fd(c,h)};ze.include({openTooltip:function(c,h,m){return this._initOverlay(fd,c,h,m).openOn(this),this},closeTooltip:function(c){return c.close(),this}}),dr.include({bindTooltip:function(c,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(fd,this._tooltip,c,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(c){if(!(!c&&this._tooltipHandlersAdded)){var h=c?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[h](m),this._tooltipHandlersAdded=!c}},openTooltip:function(c){return this._tooltip&&(this instanceof Gr||(this._tooltip._source=this),this._tooltip._prepareOpen(c)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(c){return this._tooltip&&this._tooltip.setContent(c),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(c){var h=typeof c.getElement=="function"&&c.getElement();h&&(Ee(h,"focus",function(){this._tooltip._source=c,this.openTooltip()},this),Ee(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(c){var h=typeof c.getElement=="function"&&c.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(c){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(c)});return}this._tooltip._source=c.layer||c.target,this.openTooltip(this._tooltip.options.sticky?c.latlng:void 0)}},_moveTooltip:function(c){var h=c.latlng,m,y;this._tooltip.options.sticky&&c.originalEvent&&(m=this._map.mouseEventToContainerPoint(c.originalEvent),y=this._map.containerPointToLayerPoint(m),h=this._map.layerPointToLatLng(y)),this._tooltip.setLatLng(h)}});var v0=Na.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(c){var h=c&&c.tagName==="DIV"?c:document.createElement("div"),m=this.options;if(m.html instanceof Element?(ed(h),h.appendChild(m.html)):h.innerHTML=m.html!==!1?m.html:"",m.bgPos){var y=E(m.bgPos);h.style.backgroundPosition=-y.x+"px "+-y.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function oC(c){return new v0(c)}Na.Default=Jo;var el=dr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:we.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(c){b(this,c)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(c){c._addZoomLimit(this)},onRemove:function(c){this._removeAllTiles(),ft(this._container),c._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(_a(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(wa(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(c){return this.options.opacity=c,this._updateOpacity(),this},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var c=this._clampZoom(this._map.getZoom());c!==this._tileZoom&&(this._tileZoom=c,this._updateLevels()),this._update()}return this},getEvents:function(){var c={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),c.move=this._onMove),this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},createTile:function(){return document.createElement("div")},getTileSize:function(){var c=this.options.tileSize;return c instanceof I?c:new I(c,c)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(c){for(var h=this.getPane().children,m=-c(-1/0,1/0),y=0,k=h.length,M;y<k;y++)M=h[y].style.zIndex,h[y]!==this._container&&M&&(m=c(m,+M));isFinite(m)&&(this.options.zIndex=m+c(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!we.ielt9){Un(this._container,this.options.opacity);var c=+new Date,h=!1,m=!1;for(var y in this._tiles){var k=this._tiles[y];if(!(!k.current||!k.loaded)){var M=Math.min(1,(c-k.loaded)/200);Un(k.el,M),M<1?h=!0:(k.active?m=!0:this._onOpaqueTile(k),k.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),h&&(ee(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=Ye("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var c=this._tileZoom,h=this.options.maxZoom;if(c!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===c?(this._levels[m].el.style.zIndex=h-Math.abs(c-m),this._onUpdateLevel(m)):(ft(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var y=this._levels[c],k=this._map;return y||(y=this._levels[c]={},y.el=Ye("div","leaflet-tile-container leaflet-zoom-animated",this._container),y.el.style.zIndex=h,y.origin=k.project(k.unproject(k.getPixelOrigin()),c).round(),y.zoom=c,this._setZoomTransform(y,k.getCenter(),k.getZoom()),f(y.el.offsetWidth),this._onCreateLevel(y)),this._level=y,y}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var c,h,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(c in this._tiles)h=this._tiles[c],h.retain=h.current;for(c in this._tiles)if(h=this._tiles[c],h.current&&!h.active){var y=h.coords;this._retainParent(y.x,y.y,y.z,y.z-5)||this._retainChildren(y.x,y.y,y.z,y.z+2)}for(c in this._tiles)this._tiles[c].retain||this._removeTile(c)}},_removeTilesAtZoom:function(c){for(var h in this._tiles)this._tiles[h].coords.z===c&&this._removeTile(h)},_removeAllTiles:function(){for(var c in this._tiles)this._removeTile(c)},_invalidateAll:function(){for(var c in this._levels)ft(this._levels[c].el),this._onRemoveLevel(Number(c)),delete this._levels[c];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(c,h,m,y){var k=Math.floor(c/2),M=Math.floor(h/2),H=m-1,J=new I(+k,+M);J.z=+H;var ne=this._tileCoordsToKey(J),le=this._tiles[ne];return le&&le.active?(le.retain=!0,!0):(le&&le.loaded&&(le.retain=!0),H>y?this._retainParent(k,M,H,y):!1)},_retainChildren:function(c,h,m,y){for(var k=2*c;k<2*c+2;k++)for(var M=2*h;M<2*h+2;M++){var H=new I(k,M);H.z=m+1;var J=this._tileCoordsToKey(H),ne=this._tiles[J];if(ne&&ne.active){ne.retain=!0;continue}else ne&&ne.loaded&&(ne.retain=!0);m+1<y&&this._retainChildren(k,M,m+1,y)}},_resetView:function(c){var h=c&&(c.pinch||c.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(c){this._setView(c.center,c.zoom,!0,c.noUpdate)},_clampZoom:function(c){var h=this.options;return h.minNativeZoom!==void 0&&c<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<c?h.maxNativeZoom:c},_setView:function(c,h,m,y){var k=Math.round(h);this.options.maxZoom!==void 0&&k>this.options.maxZoom||this.options.minZoom!==void 0&&k<this.options.minZoom?k=void 0:k=this._clampZoom(k);var M=this.options.updateWhenZooming&&k!==this._tileZoom;(!y||M)&&(this._tileZoom=k,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),k!==void 0&&this._update(c),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(c,h)},_setZoomTransforms:function(c,h){for(var m in this._levels)this._setZoomTransform(this._levels[m],c,h)},_setZoomTransform:function(c,h,m){var y=this._map.getZoomScale(m,c.zoom),k=c.origin.multiplyBy(y).subtract(this._map._getNewPixelOrigin(h,m)).round();we.any3d?yi(c.el,k,y):Tt(c.el,k)},_resetGrid:function(){var c=this._map,h=c.options.crs,m=this._tileSize=this.getTileSize(),y=this._tileZoom,k=this._map.getPixelWorldBounds(this._tileZoom);k&&(this._globalTileRange=this._pxBoundsToTileRange(k)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(c.project([0,h.wrapLng[0]],y).x/m.x),Math.ceil(c.project([0,h.wrapLng[1]],y).x/m.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(c.project([h.wrapLat[0],0],y).y/m.x),Math.ceil(c.project([h.wrapLat[1],0],y).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(c){var h=this._map,m=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),y=h.getZoomScale(m,this._tileZoom),k=h.project(c,this._tileZoom).floor(),M=h.getSize().divideBy(y*2);return new K(k.subtract(M),k.add(M))},_update:function(c){var h=this._map;if(h){var m=this._clampZoom(h.getZoom());if(c===void 0&&(c=h.getCenter()),this._tileZoom!==void 0){var y=this._getTiledPixelBounds(c),k=this._pxBoundsToTileRange(y),M=k.getCenter(),H=[],J=this.options.keepBuffer,ne=new K(k.getBottomLeft().subtract([J,-J]),k.getTopRight().add([J,-J]));if(!(isFinite(k.min.x)&&isFinite(k.min.y)&&isFinite(k.max.x)&&isFinite(k.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var le in this._tiles){var me=this._tiles[le].coords;(me.z!==this._tileZoom||!ne.contains(new I(me.x,me.y)))&&(this._tiles[le].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(c,m);return}for(var Ne=k.min.y;Ne<=k.max.y;Ne++)for(var Le=k.min.x;Le<=k.max.x;Le++){var cn=new I(Le,Ne);if(cn.z=this._tileZoom,!!this._isValidTile(cn)){var Rt=this._tiles[this._tileCoordsToKey(cn)];Rt?Rt.current=!0:H.push(cn)}}if(H.sort(function(gn,Ea){return gn.distanceTo(M)-Ea.distanceTo(M)}),H.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Wn=document.createDocumentFragment();for(Le=0;Le<H.length;Le++)this._addTile(H[Le],Wn);this._level.el.appendChild(Wn)}}}},_isValidTile:function(c){var h=this._map.options.crs;if(!h.infinite){var m=this._globalTileRange;if(!h.wrapLng&&(c.x<m.min.x||c.x>m.max.x)||!h.wrapLat&&(c.y<m.min.y||c.y>m.max.y))return!1}if(!this.options.bounds)return!0;var y=this._tileCoordsToBounds(c);return se(this.options.bounds).overlaps(y)},_keyToBounds:function(c){return this._tileCoordsToBounds(this._keyToTileCoords(c))},_tileCoordsToNwSe:function(c){var h=this._map,m=this.getTileSize(),y=c.scaleBy(m),k=y.add(m),M=h.unproject(y,c.z),H=h.unproject(k,c.z);return[M,H]},_tileCoordsToBounds:function(c){var h=this._tileCoordsToNwSe(c),m=new Q(h[0],h[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(c){return c.x+":"+c.y+":"+c.z},_keyToTileCoords:function(c){var h=c.split(":"),m=new I(+h[0],+h[1]);return m.z=+h[2],m},_removeTile:function(c){var h=this._tiles[c];h&&(ft(h.el),delete this._tiles[c],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(c)}))},_initTile:function(c){Pe(c,"leaflet-tile");var h=this.getTileSize();c.style.width=h.x+"px",c.style.height=h.y+"px",c.onselectstart=f,c.onmousemove=f,we.ielt9&&this.options.opacity<1&&Un(c,this.options.opacity)},_addTile:function(c,h){var m=this._getTilePos(c),y=this._tileCoordsToKey(c),k=this.createTile(this._wrapCoords(c),o(this._tileReady,this,c));this._initTile(k),this.createTile.length<2&&U(o(this._tileReady,this,c,null,k)),Tt(k,m),this._tiles[y]={el:k,coords:c,current:!0},h.appendChild(k),this.fire("tileloadstart",{tile:k,coords:c})},_tileReady:function(c,h,m){h&&this.fire("tileerror",{error:h,tile:m,coords:c});var y=this._tileCoordsToKey(c);m=this._tiles[y],m&&(m.loaded=+new Date,this._map._fadeAnimated?(Un(m.el,0),ee(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),h||(Pe(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:c})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),we.ielt9||!this._map._fadeAnimated?U(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(c){return c.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(c){var h=new I(this._wrapX?p(c.x,this._wrapX):c.x,this._wrapY?p(c.y,this._wrapY):c.y);return h.z=c.z,h},_pxBoundsToTileRange:function(c){var h=this.getTileSize();return new K(c.min.unscaleBy(h).floor(),c.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var c in this._tiles)if(!this._tiles[c].loaded)return!1;return!0}});function lC(c){return new el(c)}var Ca=el.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(c,h){this._url=c,h=b(this,h),h.detectRetina&&we.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(c,h){return this._url===c&&h===void 0&&(h=!0),this._url=c,h||this.redraw(),this},createTile:function(c,h){var m=document.createElement("img");return Ee(m,"load",o(this._tileOnLoad,this,h,m)),Ee(m,"error",o(this._tileOnError,this,h,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(c),m},getTileUrl:function(c){var h={r:we.retina?"@2x":"",s:this._getSubdomain(c),x:c.x,y:c.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-c.y;this.options.tms&&(h.y=m),h["-y"]=m}return N(this._url,s(h,this.options))},_tileOnLoad:function(c,h){we.ielt9?setTimeout(o(c,this,null,h),0):c(null,h)},_tileOnError:function(c,h,m){var y=this.options.errorTileUrl;y&&h.getAttribute("src")!==y&&(h.src=y),c(m,h)},_onTileRemove:function(c){c.tile.onload=null},_getZoomForUrl:function(){var c=this._tileZoom,h=this.options.maxZoom,m=this.options.zoomReverse,y=this.options.zoomOffset;return m&&(c=h-c),c+y},_getSubdomain:function(c){var h=Math.abs(c.x+c.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var c,h;for(c in this._tiles)if(this._tiles[c].coords.z!==this._tileZoom&&(h=this._tiles[c].el,h.onload=f,h.onerror=f,!h.complete)){h.src=O;var m=this._tiles[c].coords;ft(h),delete this._tiles[c],this.fire("tileabort",{tile:h,coords:m})}},_removeTile:function(c){var h=this._tiles[c];if(h)return h.el.setAttribute("src",O),el.prototype._removeTile.call(this,c)},_tileReady:function(c,h,m){if(!(!this._map||m&&m.getAttribute("src")===O))return el.prototype._tileReady.call(this,c,h,m)}});function y0(c,h){return new Ca(c,h)}var b0=Ca.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(c,h){this._url=c;var m=s({},this.defaultWmsParams);for(var y in h)y in this.options||(m[y]=h[y]);h=b(this,h);var k=h.detectRetina&&we.retina?2:1,M=this.getTileSize();m.width=M.x*k,m.height=M.y*k,this.wmsParams=m},onAdd:function(c){this._crs=this.options.crs||c.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,Ca.prototype.onAdd.call(this,c)},getTileUrl:function(c){var h=this._tileCoordsToNwSe(c),m=this._crs,y=re(m.project(h[0]),m.project(h[1])),k=y.min,M=y.max,H=(this._wmsVersion>=1.3&&this._crs===h0?[k.y,k.x,M.y,M.x]:[k.x,k.y,M.x,M.y]).join(","),J=Ca.prototype.getTileUrl.call(this,c);return J+w(this.wmsParams,J,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+H},setParams:function(c,h){return s(this.wmsParams,c),h||this.redraw(),this}});function cC(c,h){return new b0(c,h)}Ca.WMS=b0,y0.wms=cC;var Jr=dr.extend({options:{padding:.1},initialize:function(c){b(this,c),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Pe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var c={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(c.zoomanim=this._onAnimZoom),c},_onAnimZoom:function(c){this._updateTransform(c.center,c.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(c,h){var m=this._map.getZoomScale(h,this._zoom),y=this._map.getSize().multiplyBy(.5+this.options.padding),k=this._map.project(this._center,h),M=y.multiplyBy(-m).add(k).subtract(this._map._getNewPixelOrigin(c,h));we.any3d?yi(this._container,M,m):Tt(this._container,M)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var c in this._layers)this._layers[c]._reset()},_onZoomEnd:function(){for(var c in this._layers)this._layers[c]._project()},_updatePaths:function(){for(var c in this._layers)this._layers[c]._update()},_update:function(){var c=this.options.padding,h=this._map.getSize(),m=this._map.containerPointToLayerPoint(h.multiplyBy(-c)).round();this._bounds=new K(m,m.add(h.multiplyBy(1+c*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),_0=Jr.extend({options:{tolerance:0},getEvents:function(){var c=Jr.prototype.getEvents.call(this);return c.viewprereset=this._onViewPreReset,c},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Jr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var c=this._container=document.createElement("canvas");Ee(c,"mousemove",this._onMouseMove,this),Ee(c,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ee(c,"mouseout",this._handleMouseOut,this),c._leaflet_disable_events=!0,this._ctx=c.getContext("2d")},_destroyContainer:function(){ee(this._redrawRequest),delete this._ctx,ft(this._container),nt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var c;this._redrawBounds=null;for(var h in this._layers)c=this._layers[h],c._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Jr.prototype._update.call(this);var c=this._bounds,h=this._container,m=c.getSize(),y=we.retina?2:1;Tt(h,c.min),h.width=y*m.x,h.height=y*m.y,h.style.width=m.x+"px",h.style.height=m.y+"px",we.retina&&this._ctx.scale(2,2),this._ctx.translate(-c.min.x,-c.min.y),this.fire("update")}},_reset:function(){Jr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(c){this._updateDashArray(c),this._layers[d(c)]=c;var h=c._order={layer:c,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(c){this._requestRedraw(c)},_removePath:function(c){var h=c._order,m=h.next,y=h.prev;m?m.prev=y:this._drawLast=y,y?y.next=m:this._drawFirst=m,delete c._order,delete this._layers[d(c)],this._requestRedraw(c)},_updatePath:function(c){this._extendRedrawBounds(c),c._project(),c._update(),this._requestRedraw(c)},_updateStyle:function(c){this._updateDashArray(c),this._requestRedraw(c)},_updateDashArray:function(c){if(typeof c.options.dashArray=="string"){var h=c.options.dashArray.split(/[, ]+/),m=[],y,k;for(k=0;k<h.length;k++){if(y=Number(h[k]),isNaN(y))return;m.push(y)}c.options._dashArray=m}else c.options._dashArray=c.options.dashArray},_requestRedraw:function(c){this._map&&(this._extendRedrawBounds(c),this._redrawRequest=this._redrawRequest||U(this._redraw,this))},_extendRedrawBounds:function(c){if(c._pxBounds){var h=(c.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new K,this._redrawBounds.extend(c._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(c._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var c=this._redrawBounds;if(c){var h=c.getSize();this._ctx.clearRect(c.min.x,c.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var c,h=this._redrawBounds;if(this._ctx.save(),h){var m=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var y=this._drawFirst;y;y=y.next)c=y.layer,(!h||c._pxBounds&&c._pxBounds.intersects(h))&&c._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(c,h){if(this._drawing){var m,y,k,M,H=c._parts,J=H.length,ne=this._ctx;if(J){for(ne.beginPath(),m=0;m<J;m++){for(y=0,k=H[m].length;y<k;y++)M=H[m][y],ne[y?"lineTo":"moveTo"](M.x,M.y);h&&ne.closePath()}this._fillStroke(ne,c)}}},_updateCircle:function(c){if(!(!this._drawing||c._empty())){var h=c._point,m=this._ctx,y=Math.max(Math.round(c._radius),1),k=(Math.max(Math.round(c._radiusY),1)||y)/y;k!==1&&(m.save(),m.scale(1,k)),m.beginPath(),m.arc(h.x,h.y/k,y,0,Math.PI*2,!1),k!==1&&m.restore(),this._fillStroke(m,c)}},_fillStroke:function(c,h){var m=h.options;m.fill&&(c.globalAlpha=m.fillOpacity,c.fillStyle=m.fillColor||m.color,c.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(c.setLineDash&&c.setLineDash(h.options&&h.options._dashArray||[]),c.globalAlpha=m.opacity,c.lineWidth=m.weight,c.strokeStyle=m.color,c.lineCap=m.lineCap,c.lineJoin=m.lineJoin,c.stroke())},_onClick:function(c){for(var h=this._map.mouseEventToLayerPoint(c),m,y,k=this._drawFirst;k;k=k.next)m=k.layer,m.options.interactive&&m._containsPoint(h)&&(!(c.type==="click"||c.type==="preclick")||!this._map._draggableMoved(m))&&(y=m);this._fireEvent(y?[y]:!1,c)},_onMouseMove:function(c){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(c);this._handleMouseHover(c,h)}},_handleMouseOut:function(c){var h=this._hoveredLayer;h&&(jt(this._container,"leaflet-interactive"),this._fireEvent([h],c,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(c,h){if(!this._mouseHoverThrottled){for(var m,y,k=this._drawFirst;k;k=k.next)m=k.layer,m.options.interactive&&m._containsPoint(h)&&(y=m);y!==this._hoveredLayer&&(this._handleMouseOut(c),y&&(Pe(this._container,"leaflet-interactive"),this._fireEvent([y],c,"mouseover"),this._hoveredLayer=y)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,c),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(c,h,m){this._map._fireDOMEvent(h,m||h.type,c)},_bringToFront:function(c){var h=c._order;if(h){var m=h.next,y=h.prev;if(m)m.prev=y;else return;y?y.next=m:m&&(this._drawFirst=m),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(c)}},_bringToBack:function(c){var h=c._order;if(h){var m=h.next,y=h.prev;if(y)y.next=m;else return;m?m.prev=y:y&&(this._drawLast=y),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(c)}}});function w0(c){return we.canvas?new _0(c):null}var tl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(c){return document.createElement("<lvml:"+c+' class="lvml">')}}catch{}return function(c){return document.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),dC={_initContainer:function(){this._container=Ye("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Jr.prototype._update.call(this),this.fire("update"))},_initPath:function(c){var h=c._container=tl("shape");Pe(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",c._path=tl("path"),h.appendChild(c._path),this._updateStyle(c),this._layers[d(c)]=c},_addPath:function(c){var h=c._container;this._container.appendChild(h),c.options.interactive&&c.addInteractiveTarget(h)},_removePath:function(c){var h=c._container;ft(h),c.removeInteractiveTarget(h),delete this._layers[d(c)]},_updateStyle:function(c){var h=c._stroke,m=c._fill,y=c.options,k=c._container;k.stroked=!!y.stroke,k.filled=!!y.fill,y.stroke?(h||(h=c._stroke=tl("stroke")),k.appendChild(h),h.weight=y.weight+"px",h.color=y.color,h.opacity=y.opacity,y.dashArray?h.dashStyle=S(y.dashArray)?y.dashArray.join(" "):y.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=y.lineCap.replace("butt","flat"),h.joinstyle=y.lineJoin):h&&(k.removeChild(h),c._stroke=null),y.fill?(m||(m=c._fill=tl("fill")),k.appendChild(m),m.color=y.fillColor||y.color,m.opacity=y.fillOpacity):m&&(k.removeChild(m),c._fill=null)},_updateCircle:function(c){var h=c._point.round(),m=Math.round(c._radius),y=Math.round(c._radiusY||m);this._setPath(c,c._empty()?"M0 0":"AL "+h.x+","+h.y+" "+m+","+y+" 0,"+65535*360)},_setPath:function(c,h){c._path.v=h},_bringToFront:function(c){_a(c._container)},_bringToBack:function(c){wa(c._container)}},md=we.vml?tl:Se,nl=Jr.extend({_initContainer:function(){this._container=md("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=md("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ft(this._container),nt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Jr.prototype._update.call(this);var c=this._bounds,h=c.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,m.setAttribute("width",h.x),m.setAttribute("height",h.y)),Tt(m,c.min),m.setAttribute("viewBox",[c.min.x,c.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(c){var h=c._path=md("path");c.options.className&&Pe(h,c.options.className),c.options.interactive&&Pe(h,"leaflet-interactive"),this._updateStyle(c),this._layers[d(c)]=c},_addPath:function(c){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(c._path),c.addInteractiveTarget(c._path)},_removePath:function(c){ft(c._path),c.removeInteractiveTarget(c._path),delete this._layers[d(c)]},_updatePath:function(c){c._project(),c._update()},_updateStyle:function(c){var h=c._path,m=c.options;h&&(m.stroke?(h.setAttribute("stroke",m.color),h.setAttribute("stroke-opacity",m.opacity),h.setAttribute("stroke-width",m.weight),h.setAttribute("stroke-linecap",m.lineCap),h.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?h.setAttribute("stroke-dasharray",m.dashArray):h.removeAttribute("stroke-dasharray"),m.dashOffset?h.setAttribute("stroke-dashoffset",m.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),m.fill?(h.setAttribute("fill",m.fillColor||m.color),h.setAttribute("fill-opacity",m.fillOpacity),h.setAttribute("fill-rule",m.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(c,h){this._setPath(c,Ve(c._parts,h))},_updateCircle:function(c){var h=c._point,m=Math.max(Math.round(c._radius),1),y=Math.max(Math.round(c._radiusY),1)||m,k="a"+m+","+y+" 0 1,0 ",M=c._empty()?"M0 0":"M"+(h.x-m)+","+h.y+k+m*2+",0 "+k+-m*2+",0 ";this._setPath(c,M)},_setPath:function(c,h){c._path.setAttribute("d",h)},_bringToFront:function(c){_a(c._path)},_bringToBack:function(c){wa(c._path)}});we.vml&&nl.include(dC);function j0(c){return we.svg||we.vml?new nl(c):null}ze.include({getRenderer:function(c){var h=c.options.renderer||this._getPaneRenderer(c.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(c){if(c==="overlayPane"||c===void 0)return!1;var h=this._paneRenderers[c];return h===void 0&&(h=this._createRenderer({pane:c}),this._paneRenderers[c]=h),h},_createRenderer:function(c){return this.options.preferCanvas&&w0(c)||j0(c)}});var N0=ka.extend({initialize:function(c,h){ka.prototype.initialize.call(this,this._boundsToLatLngs(c),h)},setBounds:function(c){return this.setLatLngs(this._boundsToLatLngs(c))},_boundsToLatLngs:function(c){return c=se(c),[c.getSouthWest(),c.getNorthWest(),c.getNorthEast(),c.getSouthEast()]}});function uC(c,h){return new N0(c,h)}nl.create=md,nl.pointsToPath=Ve,Xr.geometryToLayer=ld,Xr.coordsToLatLng=Yp,Xr.coordsToLatLngs=cd,Xr.latLngToCoords=Vp,Xr.latLngsToCoords=dd,Xr.getFeature=Sa,Xr.asFeature=ud,ze.mergeOptions({boxZoom:!0});var k0=kr.extend({initialize:function(c){this._map=c,this._container=c._container,this._pane=c._panes.overlayPane,this._resetStateTimeout=0,c.on("unload",this._destroy,this)},addHooks:function(){Ee(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){nt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ft(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(c){if(!c.shiftKey||c.which!==1&&c.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),qo(),Ep(),this._startPoint=this._map.mouseEventToContainerPoint(c),Ee(document,{contextmenu:wi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(c){this._moved||(this._moved=!0,this._box=Ye("div","leaflet-zoom-box",this._container),Pe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(c);var h=new K(this._point,this._startPoint),m=h.getSize();Tt(this._box,h.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(ft(this._box),jt(this._container,"leaflet-crosshair")),Zo(),Tp(),nt(document,{contextmenu:wi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(c){if(!(c.which!==1&&c.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var h=new Q(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(c){c.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ze.addInitHook("addHandler","boxZoom",k0),ze.mergeOptions({doubleClickZoom:!0});var S0=kr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(c){var h=this._map,m=h.getZoom(),y=h.options.zoomDelta,k=c.originalEvent.shiftKey?m-y:m+y;h.options.doubleClickZoom==="center"?h.setZoom(k):h.setZoomAround(c.containerPoint,k)}});ze.addInitHook("addHandler","doubleClickZoom",S0),ze.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var C0=kr.extend({addHooks:function(){if(!this._draggable){var c=this._map;this._draggable=new _s(c._mapPane,c._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),c.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),c.on("zoomend",this._onZoomEnd,this),c.whenReady(this._onZoomEnd,this))}Pe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){jt(this._map._container,"leaflet-grab"),jt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var c=this._map;if(c._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=se(this._map.options.maxBounds);this._offsetLimit=re(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;c.fire("movestart").fire("dragstart"),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(c){if(this._map.options.inertia){var h=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(h),this._prunePositions(h)}this._map.fire("move",c).fire("drag",c)},_prunePositions:function(c){for(;this._positions.length>1&&c-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var c=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(c).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(c,h){return c-(c-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var c=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;c.x<h.min.x&&(c.x=this._viscousLimit(c.x,h.min.x)),c.y<h.min.y&&(c.y=this._viscousLimit(c.y,h.min.y)),c.x>h.max.x&&(c.x=this._viscousLimit(c.x,h.max.x)),c.y>h.max.y&&(c.y=this._viscousLimit(c.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(c)}},_onPreDragWrap:function(){var c=this._worldWidth,h=Math.round(c/2),m=this._initialWorldOffset,y=this._draggable._newPos.x,k=(y-h+m)%c+h-m,M=(y+h+m)%c-h-m,H=Math.abs(k+m)<Math.abs(M+m)?k:M;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=H},_onDragEnd:function(c){var h=this._map,m=h.options,y=!m.inertia||c.noInertia||this._times.length<2;if(h.fire("dragend",c),y)h.fire("moveend");else{this._prunePositions(+new Date);var k=this._lastPos.subtract(this._positions[0]),M=(this._lastTime-this._times[0])/1e3,H=m.easeLinearity,J=k.multiplyBy(H/M),ne=J.distanceTo([0,0]),le=Math.min(m.inertiaMaxSpeed,ne),me=J.multiplyBy(le/ne),Ne=le/(m.inertiaDeceleration*H),Le=me.multiplyBy(-Ne/2).round();!Le.x&&!Le.y?h.fire("moveend"):(Le=h._limitOffset(Le,h.options.maxBounds),U(function(){h.panBy(Le,{duration:Ne,easeLinearity:H,noMoveStart:!0,animate:!0})}))}}});ze.addInitHook("addHandler","dragging",C0),ze.mergeOptions({keyboard:!0,keyboardPanDelta:80});var E0=kr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(c){this._map=c,this._setPanDelta(c.options.keyboardPanDelta),this._setZoomDelta(c.options.zoomDelta)},addHooks:function(){var c=this._map._container;c.tabIndex<=0&&(c.tabIndex="0"),Ee(c,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),nt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=document.body,h=document.documentElement,m=c.scrollTop||h.scrollTop,y=c.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(y,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(c){var h=this._panKeys={},m=this.keyCodes,y,k;for(y=0,k=m.left.length;y<k;y++)h[m.left[y]]=[-1*c,0];for(y=0,k=m.right.length;y<k;y++)h[m.right[y]]=[c,0];for(y=0,k=m.down.length;y<k;y++)h[m.down[y]]=[0,c];for(y=0,k=m.up.length;y<k;y++)h[m.up[y]]=[0,-1*c]},_setZoomDelta:function(c){var h=this._zoomKeys={},m=this.keyCodes,y,k;for(y=0,k=m.zoomIn.length;y<k;y++)h[m.zoomIn[y]]=c;for(y=0,k=m.zoomOut.length;y<k;y++)h[m.zoomOut[y]]=-c},_addHooks:function(){Ee(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){nt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(c){if(!(c.altKey||c.ctrlKey||c.metaKey)){var h=c.keyCode,m=this._map,y;if(h in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(y=this._panKeys[h],c.shiftKey&&(y=E(y).multiplyBy(3)),m.options.maxBounds&&(y=m._limitOffset(E(y),m.options.maxBounds)),m.options.worldCopyJump){var k=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(y)));m.panTo(k)}else m.panBy(y)}else if(h in this._zoomKeys)m.setZoom(m.getZoom()+(c.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;wi(c)}}});ze.addInitHook("addHandler","keyboard",E0),ze.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var T0=kr.extend({addHooks:function(){Ee(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){nt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(c){var h=Jv(c),m=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(c),this._startTime||(this._startTime=+new Date);var y=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),y),wi(c)},_performZoom:function(){var c=this._map,h=c.getZoom(),m=this._map.options.zoomSnap||0;c._stop();var y=this._delta/(this._map.options.wheelPxPerZoomLevel*4),k=4*Math.log(2/(1+Math.exp(-Math.abs(y))))/Math.LN2,M=m?Math.ceil(k/m)*m:k,H=c._limitZoom(h+(this._delta>0?M:-M))-h;this._delta=0,this._startTime=null,H&&(c.options.scrollWheelZoom==="center"?c.setZoom(h+H):c.setZoomAround(this._lastMousePos,h+H))}});ze.addInitHook("addHandler","scrollWheelZoom",T0);var hC=600;ze.mergeOptions({tapHold:we.touchNative&&we.safari&&we.mobile,tapTolerance:15});var P0=kr.extend({addHooks:function(){Ee(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){nt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(c){if(clearTimeout(this._holdTimeout),c.touches.length===1){var h=c.touches[0];this._startPos=this._newPos=new I(h.clientX,h.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Ee(document,"touchend",qt),Ee(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),hC),Ee(document,"touchend touchcancel contextmenu",this._cancel,this),Ee(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function c(){nt(document,"touchend",qt),nt(document,"touchend touchcancel",c)},_cancel:function(){clearTimeout(this._holdTimeout),nt(document,"touchend touchcancel contextmenu",this._cancel,this),nt(document,"touchmove",this._onMove,this)},_onMove:function(c){var h=c.touches[0];this._newPos=new I(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(c,h){var m=new MouseEvent(c,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});m._simulated=!0,h.target.dispatchEvent(m)}});ze.addInitHook("addHandler","tapHold",P0),ze.mergeOptions({touchZoom:we.touch,bounceAtZoomLimits:!0});var D0=kr.extend({addHooks:function(){Pe(this._map._container,"leaflet-touch-zoom"),Ee(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){jt(this._map._container,"leaflet-touch-zoom"),nt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(c){var h=this._map;if(!(!c.touches||c.touches.length!==2||h._animatingZoom||this._zooming)){var m=h.mouseEventToContainerPoint(c.touches[0]),y=h.mouseEventToContainerPoint(c.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(m.add(y)._divideBy(2))),this._startDist=m.distanceTo(y),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),Ee(document,"touchmove",this._onTouchMove,this),Ee(document,"touchend touchcancel",this._onTouchEnd,this),qt(c)}},_onTouchMove:function(c){if(!(!c.touches||c.touches.length!==2||!this._zooming)){var h=this._map,m=h.mouseEventToContainerPoint(c.touches[0]),y=h.mouseEventToContainerPoint(c.touches[1]),k=m.distanceTo(y)/this._startDist;if(this._zoom=h.getScaleZoom(k,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&k<1||this._zoom>h.getMaxZoom()&&k>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,k===1)return}else{var M=m._add(y)._divideBy(2)._subtract(this._centerPoint);if(k===1&&M.x===0&&M.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(M),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),ee(this._animRequest);var H=o(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=U(H,this,!0),qt(c)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ee(this._animRequest),nt(document,"touchmove",this._onTouchMove,this),nt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ze.addInitHook("addHandler","touchZoom",D0),ze.BoxZoom=k0,ze.DoubleClickZoom=S0,ze.Drag=C0,ze.Keyboard=E0,ze.ScrollWheelZoom=T0,ze.TapHold=P0,ze.TouchZoom=D0,n.Bounds=K,n.Browser=we,n.CRS=ge,n.Canvas=_0,n.Circle=Wp,n.CircleMarker=od,n.Class=z,n.Control=cr,n.DivIcon=v0,n.DivOverlay=Sr,n.DomEvent=PS,n.DomUtil=ES,n.Draggable=_s,n.Evented=q,n.FeatureGroup=Gr,n.GeoJSON=Xr,n.GridLayer=el,n.Handler=kr,n.Icon=Na,n.ImageOverlay=hd,n.LatLng=oe,n.LatLngBounds=Q,n.Layer=dr,n.LayerGroup=ja,n.LineUtil=HS,n.Map=ze,n.Marker=ad,n.Mixin=IS,n.Path=ws,n.Point=I,n.PolyUtil=FS,n.Polygon=ka,n.Polyline=Qr,n.Popup=pd,n.PosAnimation=e0,n.Projection=WS,n.Rectangle=N0,n.Renderer=Jr,n.SVG=nl,n.SVGOverlay=x0,n.TileLayer=Ca,n.Tooltip=fd,n.Transformation=he,n.Util=G,n.VideoOverlay=g0,n.bind=o,n.bounds=re,n.canvas=w0,n.circle=XS,n.circleMarker=QS,n.control=Qo,n.divIcon=oC,n.extend=s,n.featureGroup=ZS,n.geoJSON=m0,n.geoJson=tC,n.gridLayer=lC,n.icon=KS,n.imageOverlay=nC,n.latLng=ie,n.latLngBounds=se,n.layerGroup=qS,n.map=DS,n.marker=GS,n.point=E,n.polygon=eC,n.polyline=JS,n.popup=iC,n.rectangle=uC,n.setOptions=b,n.stamp=d,n.svg=j0,n.svgOverlay=sC,n.tileLayer=y0,n.tooltip=aC,n.transformation=ke,n.version=r,n.videoOverlay=rC;var pC=window.L;n.noConflict=function(){return window.L=pC,this},window.L=n})})(zg,zg.exports);var xp=zg.exports;const lk=oi(xp);function ck(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function dk(t,e){return e==null?function(r,s){const a=j.useRef();return a.current||(a.current=t(r,s)),a}:function(r,s){const a=j.useRef();a.current||(a.current=t(r,s));const o=j.useRef(r),{instance:l}=a.current;return j.useEffect(function(){o.current!==r&&(e(l,r,o.current),o.current=r)},[l,r,s]),a}}function mF(t,e){j.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var a;(a=e.layerContainer)==null||a.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function uk(t){return function(n){const r=ak(),s=t(ok(n,r),r);return lF(r.map,n.attribution),fF(s.current,n.eventHandlers),mF(s.current,r),s}}function gF(t,e){const n=dk(t,e),r=uk(n);return hF(r)}function xF(t,e){const n=dk(t,e),r=uk(n);return pF(r)}function vF(t,e,n){const{opacity:r,zIndex:s}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function yF(){return ak().map}function Bg(){return Bg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bg.apply(this,arguments)}function bF({bounds:t,boundsOptions:e,center:n,children:r,className:s,id:a,placeholder:o,style:l,whenReady:d,zoom:u,...p},f){const[x]=j.useState({className:s,id:a,style:l}),[g,v]=j.useState(null);j.useImperativeHandle(f,()=>(g==null?void 0:g.map)??null,[g]);const b=j.useCallback(_=>{if(_!==null&&g===null){const N=new xp.Map(_,p);n!=null&&u!=null?N.setView(n,u):t!=null&&N.fitBounds(t,e),d!=null&&N.whenReady(d),v(dF(N))}},[]);j.useEffect(()=>()=>{g==null||g.map.remove()},[g]);const w=g?Z.createElement(ik,{value:g},r):o??null;return Z.createElement("div",Bg({},x,{ref:b}),w)}const _F=j.forwardRef(bF),wF=gF(function({position:e,...n},r){const s=new xp.Marker(e,n);return ck(s,uF(r,{overlayContainer:s}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),jF=xF(function({url:e,...n},r){const s=new xp.TileLayer(e,ok(n,r));return ck(s,r)},function(e,n,r){vF(e,n,r);const{url:s}=n;s!=null&&s!==r.url&&e.setUrl(s)});delete lk.Icon.Default.prototype._getIconUrl;lk.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function NF({position:t,onPositionChange:e}){return yF(),i.jsx(wF,{position:t,draggable:!0,eventHandlers:{dragend:n=>{const s=n.target.getLatLng();e(s.lat,s.lng)}}})}function kF({initialLat:t,initialLng:e,onLocationSelect:n}){const a=[t||31.5017,e||34.4668],o=l=>{n(l.latlng.lat,l.latlng.lng)};return i.jsx("div",{className:"w-full h-96 rounded-lg overflow-hidden border border-gray-300",children:i.jsxs(_F,{center:a,zoom:10,style:{height:"100%",width:"100%"},onClick:o,children:[i.jsx(jF,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),i.jsx(NF,{position:a,onPositionChange:n})]})})}function SF({availableAreas:t,selectedAreas:e,onChange:n}){const[r,s]=j.useState(""),[a,o]=j.useState(""),[l,d]=j.useState(!1),u=r?t.filter(v=>v.toLowerCase().includes(r.toLowerCase())):t,p=v=>{const b=e.includes(v)?e.filter(w=>w!==v):[...e,v];n(b)},f=()=>{n(t)},x=()=>{n([])},g=()=>{if(a.trim()){if(t.includes(a.trim())||e.includes(a.trim())){alert("هذه المنطقة موجودة بالفعل");return}n([...e,a.trim()]),o(""),d(!1)}};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[i.jsx("input",{type:"text",value:r,onChange:v=>s(v.target.value),placeholder:"بحث عن منطقة...",className:"flex-1 border rounded-md px-3 py-2"}),i.jsx("button",{type:"button",onClick:f,className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200",children:"تحديد الكل"}),i.jsx("button",{type:"button",onClick:x,className:"px-3 py-2 bg-red-100 text-red-700 rounded-md hover:bg-red-200",children:"إلغاء الكل"})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 max-h-60 overflow-y-auto border rounded-md p-4",children:u.length>0?u.map(v=>i.jsxs("label",{className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded",children:[i.jsx("input",{type:"checkbox",checked:e.includes(v),onChange:()=>p(v),className:"rounded text-blue-600"}),i.jsx("span",{children:v})]},v)):i.jsxs("div",{className:"col-span-full text-center py-4 text-gray-500",children:["لا توجد مناطق متطابقة مع البحث",i.jsx("button",{type:"button",onClick:()=>d(!0),className:"block mx-auto mt-2 text-blue-600 hover:text-blue-800",children:"إضافة منطقة جديدة"})]})}),l&&i.jsxs("div",{className:"mt-4 p-4 border rounded-md bg-gray-50",children:[i.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"إضافة منطقة خدمة جديدة"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:a,onChange:v=>o(v.target.value),placeholder:"اسم المنطقة الجديدة...",className:"flex-1 border rounded-md px-3 py-2"}),i.jsx("button",{type:"button",onClick:g,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"إضافة"}),i.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"إلغاء"})]})]}),!l&&i.jsx("div",{className:"flex justify-center",children:i.jsxs("button",{type:"button",onClick:()=>d(!0),className:"px-4 py-2 text-blue-600 hover:text-blue-800 flex items-center",children:[i.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"إضافة منطقة خدمة جديدة"]})}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("h4",{className:"font-medium text-gray-700 mb-2",children:["المناطق المحددة (",e.length,")"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:e.length>0?e.map(v=>i.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm flex items-center",children:[v,i.jsx("button",{type:"button",onClick:()=>p(v),className:"ml-1 text-blue-600 hover:text-blue-800",children:"×"})]},v)):i.jsx("span",{className:"text-gray-500",children:"لم يتم تحديد أي منطقة"})})]})]})}function CF({availableCategories:t,selectedCategories:e,onChange:n,loading:r}){const[s,a]=j.useState(""),o=s?t.filter(d=>d.name.toLowerCase().includes(s.toLowerCase())):t,l=d=>{const u=e.includes(d)?e.filter(p=>p!==d):[...e,d];n(u)};return i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"flex items-center space-x-2 mb-4",children:i.jsx("input",{type:"text",value:s,onChange:d=>a(d.target.value),placeholder:"بحث عن تصنيف...",className:"flex-1 border rounded-md px-3 py-2"})}),r?i.jsx("div",{className:"flex justify-center items-center h-40",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-60 overflow-y-auto border rounded-md p-4",children:o.length>0?o.map(d=>i.jsxs("label",{className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded",children:[i.jsx("input",{type:"checkbox",checked:e.includes(d.id),onChange:()=>l(d.id),className:"rounded text-blue-600"}),i.jsx("span",{children:d.name})]},d.id)):i.jsx("div",{className:"col-span-full text-center py-4 text-gray-500",children:"لا توجد تصنيفات متطابقة مع البحث"})}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("h4",{className:"font-medium text-gray-700 mb-2",children:["التصنيفات المحددة (",e.length,")"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:e.length>0?e.map(d=>{const u=t.find(p=>p.id===d);return i.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm flex items-center",children:[u?u.name:"تصنيف غير معروف",i.jsx("button",{type:"button",onClick:()=>l(d),className:"ml-1 text-blue-600 hover:text-blue-800",children:"×"})]},d)}):i.jsx("span",{className:"text-gray-500",children:"لم يتم تحديد أي تصنيف"})})]})]})]})}function hk({onSubmit:t,initialData:e=null}){const[n,r]=j.useState({store_name:"",phone:"",address:"",description:"",delivery_type:"distance",delivery_radius:5,price_per_km:2,min_delivery_fee:5,delivery_fee_per_km:1,status:"active",logo_url:"",banner_url:"",commission_rate:10,wallet_enabled:!1,auto_charge:!1,service_areas:[],categories:[],latitude:null,longitude:null,membership:{type:"basic",expires_at:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString().split("T")[0],commission_rate:10},featured:!1,featured_until:new Date(new Date().setMonth(new Date().getMonth()+1)).toISOString().split("T")[0],featured_order:1,...e}),[s,a]=j.useState([]),[o,l]=j.useState(!0),[d,u]=j.useState(Date.now()),p=["رام الله","البيرة","نابلس","جنين","طولكرم","قلقيلية","طوباس","سلفيت","أريحا","بيت لحم","الخليل","بيت جالا","بيت ساحور","بيرزيت","الظاهرية","دورا","يطا","عنبتا","بيت فجار","بديا","عزون","بيت أمر","حلحول","سعير","ترقوميا","عرابة","يعبد","قباطية","طمون","عقابا","بيت فوريك","عصيرة الشمالية","بيتا","حوارة","سبسطية","عقربا"];j.useEffect(()=>{(async()=>{try{l(!0);const{data:N,error:S}=await te.from("categories").select("*").order("name");if(S)throw S;a(N||[])}catch(N){console.error("Error fetching categories:",N),$.error("فشل في تحميل التصنيفات")}finally{l(!1)}})()},[]);const f=async _=>{_.preventDefault();try{if(!n.store_name||!n.phone||!n.address){$.error("الرجاء تعبئة جميع الحقول المطلوبة");return}if(n.delivery_type==="distance"&&(!n.delivery_radius||!n.price_per_km)){$.error("الرجاء تعبئة نطاق التوصيل وسعر الكيلومتر");return}if(!n.membership.expires_at){$.error("الرجاء تحديد تاريخ انتهاء العضوية");return}if(n.categories.length===0){$.error("الرجاء اختيار تصنيف واحد على الأقل");return}const N={...n};n.featured?(N.featured_until=n.featured_until,N.featured_order=n.featured_order):(N.featured_until=null,N.featured_order=null),t(_,N)}catch(N){console.error("Error submitting form:",N),$.error("حدث خطأ أثناء حفظ البيانات")}},x=(_,N)=>{r({...n,latitude:_,longitude:N}),u(Date.now())},g=_=>{r({...n,service_areas:_})},v=_=>{r({...n,categories:_})},b=({preview:_})=>{_&&r({...n,logo_url:_})},w=({preview:_})=>{_&&r({...n,banner_url:_})};return i.jsxs("form",{onSubmit:f,className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"بيانات المتجر"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم المتجر ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:n.store_name,onChange:_=>r({...n,store_name:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["رقم الهاتف ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"tel",value:n.phone,onChange:_=>r({...n,phone:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["العنوان ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:n.address,onChange:_=>r({...n,address:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"وصف المتجر"}),i.jsx("textarea",{value:n.description,onChange:_=>r({...n,description:_.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"صورة اللوجو"}),i.jsx(xs,{type:"image",preview:n.logo_url,onUpload:b,storeInSupabase:!0,bucket:It.VENDORS,folder:"logos"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"صورة الغلاف"}),i.jsx(xs,{type:"image",preview:n.banner_url,onUpload:w,storeInSupabase:!0,bucket:It.VENDORS,folder:"banners"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"تصنيف المتجر"}),i.jsx("div",{className:"mb-4",children:i.jsx(CF,{availableCategories:s,selectedCategories:n.categories,onChange:v,loading:o})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"حالة المتجر"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الحالة ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:n.status,onChange:_=>r({...n,status:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"active",children:"نشط"}),i.jsx("option",{value:"inactive",children:"غير نشط"}),i.jsx("option",{value:"pending",children:"معلق"}),i.jsx("option",{value:"suspended",children:"موقوف"}),i.jsx("option",{value:"busy",children:"مشغول"})]})]}),i.jsx("div",{children:i.jsxs("label",{className:"flex items-center space-x-2 mt-8",children:[i.jsx("input",{type:"checkbox",checked:n.featured,onChange:_=>r({...n,featured:_.target.checked}),className:"rounded text-blue-600"}),i.jsx("span",{children:"متجر مميز"})]})}),n.featured&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ انتهاء التمييز"}),i.jsx("input",{type:"date",value:n.featured_until,onChange:_=>r({...n,featured_until:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:n.featured})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ترتيب العرض (الأقل = الأعلى)"}),i.jsx("input",{type:"number",value:n.featured_order,onChange:_=>r({...n,featured_order:parseInt(_.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"1",required:n.featured})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"موقع المتجر"}),i.jsxs("div",{className:"mb-4",children:[i.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"حدد موقع المتجر على الخريطة بالنقر على المكان المناسب"}),i.jsx(kF,{initialLat:n.latitude,initialLng:n.longitude,onLocationSelect:x},d)]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"خط العرض"}),i.jsx("input",{type:"text",value:n.latitude||"",onChange:_=>r({...n,latitude:parseFloat(_.target.value)}),className:"w-full border rounded-md px-3 py-2",placeholder:"مثال: 31.5017"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"خط الطول"}),i.jsx("input",{type:"text",value:n.longitude||"",onChange:_=>r({...n,longitude:parseFloat(_.target.value)}),className:"w-full border rounded-md px-3 py-2",placeholder:"مثال: 34.4668"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"إعدادات التوصيل"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نوع التوصيل ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:n.delivery_type,onChange:_=>r({...n,delivery_type:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"distance",children:"حسب المسافة"}),i.jsx("option",{value:"fixed",children:"سعر ثابت"}),i.jsx("option",{value:"zones",children:"مناطق"})]})]}),n.delivery_type==="distance"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نطاق التوصيل (كم) ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:n.delivery_radius,onChange:_=>r({...n,delivery_radius:Number(_.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.1",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["سعر الكيلومتر (₪) ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:n.price_per_km,onChange:_=>r({...n,price_per_km:Number(_.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.1",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأدنى لتكلفة التوصيل (₪)"}),i.jsx("input",{type:"number",value:n.min_delivery_fee,onChange:_=>r({...n,min_delivery_fee:Number(_.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تكلفة التوصيل لكل كيلومتر (₪)"}),i.jsx("input",{type:"number",value:n.delivery_fee_per_km,onChange:_=>r({...n,delivery_fee_per_km:Number(_.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.1"})]})]}),n.delivery_type==="fixed"&&i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["سعر التوصيل الثابت (₪) ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:n.min_delivery_fee,onChange:_=>r({...n,min_delivery_fee:Number(_.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.1",required:!0})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"مناطق الخدمة"}),i.jsx(SF,{availableAreas:p,selectedAreas:n.service_areas,onChange:g})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"إعدادات العضوية"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نوع العضوية ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:n.membership.type,onChange:_=>r({...n,membership:{...n.membership,type:_.target.value}}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"basic",children:"أساسية"}),i.jsx("option",{value:"premium",children:"مميزة"}),i.jsx("option",{value:"gold",children:"ذهبية"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نسبة العمولة (%) ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:n.membership.commission_rate,onChange:_=>r({...n,membership:{...n.membership,commission_rate:Number(_.target.value)}}),className:"w-full border rounded-md px-3 py-2",min:"0",max:"100",step:"0.1",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["تاريخ انتهاء العضوية ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"date",value:n.membership.expires_at,onChange:_=>r({...n,membership:{...n.membership,expires_at:_.target.value}}),className:"w-full border rounded-md px-3 py-2",required:!0})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"إعدادات إضافية"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نسبة العمولة (%) ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:n.commission_rate,onChange:_=>r({...n,commission_rate:Number(_.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",max:"100",step:"0.1",required:!0})]}),i.jsx("div",{children:i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",checked:n.wallet_enabled,onChange:_=>r({...n,wallet_enabled:_.target.checked}),className:"rounded text-blue-600"}),i.jsx("span",{children:"تفعيل المحفظة"})]})}),n.wallet_enabled&&i.jsx("div",{children:i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",checked:n.auto_charge,onChange:_=>r({...n,auto_charge:_.target.checked}),className:"rounded text-blue-600"}),i.jsx("span",{children:"تفعيل الشحن التلقائي"})]})})]})]}),i.jsx("div",{className:"flex justify-end space-x-2",children:i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:e?"تحديث":"إضافة"})})]})}const EF=async()=>{try{const{data:t,error:e}=await te.from("vendors").select("*").order("created_at",{ascending:!1});if(e)throw e;return t||[]}catch(t){throw console.error("Error fetching vendors:",t),t}},TF=async(t,e)=>{try{const{data:n,error:r}=await te.from("vendors").update({store_name:e.store_name,phone:e.phone,address:e.address,description:e.description,delivery_type:e.delivery_type,delivery_radius:e.delivery_radius,price_per_km:e.price_per_km,min_delivery_fee:e.min_delivery_fee,delivery_fee_per_km:e.delivery_fee_per_km,latitude:e.latitude,longitude:e.longitude,status:e.status,logo_url:e.logo_url,banner_url:e.banner_url,commission_rate:e.commission_rate,wallet_enabled:e.wallet_enabled,auto_charge:e.auto_charge,service_areas:e.service_areas,membership:e.membership,updated_at:new Date().toISOString()}).eq("id",t).select();if(r)throw r;return n[0]}catch(n){throw console.error("Error updating vendor:",n),n}},PF=async t=>{try{const{error:e}=await te.from("vendors").delete().eq("id",t);if(e)throw e;return!0}catch(e){throw console.error("Error deleting vendor:",e),e}};function DF(){const[t,e]=j.useState([]),[n,r]=j.useState([]),[s,a]=j.useState(!0),[o,l]=j.useState(null),[d,u]=j.useState(!1),[p,f]=j.useState(null),[x,g]=j.useState("grid"),[v,b]=j.useState({store_name:"",phone:"",address:"",delivery_type:"distance",delivery_radius:5,price_per_km:2,status:"active",logo_url:"",banner_url:"",categories:[],wallet_enabled:!1,auto_charge:!1,service_areas:[],latitude:null,longitude:null,membership:{type:"basic",expires_at:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString().split("T")[0],commission_rate:10},featured:!1,featured_until:new Date(new Date().setMonth(new Date().getMonth()+1)).toISOString().split("T")[0],featured_order:1});j.useEffect(()=>{w()},[]);const w=async()=>{try{a(!0),l(null);const{data:C,error:q}=await te.from("vendors").select("*").order("created_at",{ascending:!1});if(q)throw q;e(C||[]);const{data:I,error:X}=await te.from("categories").select("*").order("name");if(X)throw X;r(I||[])}catch(C){console.error("Error fetching data:",C),l("فشل في تحميل البيانات. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل البيانات")}finally{a(!1)}},_={store_name:{type:"text",label:"اسم المتجر",placeholder:"البحث باسم المتجر",value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"active",label:"مفتوح"},{value:"inactive",label:"مغلق"},{value:"busy",label:"مشغول"},{value:"pending",label:"معلق"},{value:"suspended",label:"موقوف"}],value:""},delivery_type:{type:"select",label:"نوع التوصيل",placeholder:"جميع الأنواع",options:[{value:"distance",label:"حسب المسافة"},{value:"fixed",label:"سعر ثابت"},{value:"zones",label:"مناطق"}],value:""},featured:{type:"select",label:"التمييز",placeholder:"الكل",options:[{value:"true",label:"مميز"},{value:"false",label:"غير مميز"}],value:""}},{filters:N,filterData:S,handleFilterChange:P}=Bn(_),O=async(C,q)=>{C.preventDefault();try{if(!q.store_name||!q.phone||!q.address){$.error("الرجاء تعبئة جميع الحقول المطلوبة");return}if(q.delivery_type==="distance"&&(!q.delivery_radius||!q.price_per_km)){$.error("الرجاء تعبئة نطاق التوصيل وسعر الكيلومتر");return}if(q.categories.length===0){$.error("الرجاء اختيار تصنيف واحد على الأقل");return}if(!q.membership.expires_at){$.error("الرجاء تحديد تاريخ انتهاء العضوية");return}if(p)await TF(p.id,q),$.success("تم تحديث البائع بنجاح");else{const{data:I,error:X}=await te.from("vendors").insert([q]).select();if(X)throw X;$.success("تم إضافة البائع بنجاح")}w(),u(!1),f(null),b({store_name:"",phone:"",address:"",delivery_type:"distance",delivery_radius:5,price_per_km:2,status:"active",logo_url:"",banner_url:"",categories:[],wallet_enabled:!1,auto_charge:!1,service_areas:[],latitude:null,longitude:null,membership:{type:"basic",expires_at:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString().split("T")[0],commission_rate:10},featured:!1,featured_until:new Date(new Date().setMonth(new Date().getMonth()+1)).toISOString().split("T")[0],featured_order:1})}catch(I){console.error("Error saving vendor:",I),$.error(p?"فشل في تحديث البائع":"فشل في إضافة البائع")}},A=async C=>{if(window.confirm("هل أنت متأكد من حذف هذا البائع؟"))try{a(!0),await PF(C),e(t.filter(q=>q.id!==C)),$.success("تم حذف البائع بنجاح"),w()}catch(q){console.error("Error deleting vendor:",q),$.error("فشل في حذف البائع")}finally{a(!1)}},R=async(C,q)=>{try{a(!0);const{error:I}=await te.rpc("update_vendor_status",{p_vendor_id:C,p_status:q});if(I)throw I;e(t.map(X=>X.id===C?{...X,status:q}:X)),$.success(`تم تغيير حالة البائع إلى ${Y(q)}`)}catch(I){console.error("Error updating vendor status:",I),$.error("فشل في تحديث حالة البائع")}finally{a(!1)}},T=C=>{switch(C){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"busy":return"bg-yellow-100 text-yellow-800";case"pending":return"bg-blue-100 text-blue-800";case"suspended":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},Y=C=>{switch(C){case"active":return"مفتوح";case"inactive":return"مغلق";case"busy":return"مشغول";case"pending":return"معلق";case"suspended":return"موقوف";default:return C}},D=C=>{switch(C){case"distance":return"حسب المسافة";case"fixed":return"سعر ثابت";case"zones":return"مناطق";default:return C}},U=C=>{if(!C)return"bg-gray-100 text-gray-800";switch(C){case"gold":return"bg-yellow-100 text-yellow-800";case"premium":return"bg-purple-100 text-purple-800";case"basic":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},ee=C=>{if(!C)return"أساسية";switch(C){case"gold":return"ذهبية";case"premium":return"مميزة";case"basic":return"أساسية";default:return C}},G=S(t),z=()=>i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:G.map(C=>{var q,I,X;return i.jsxs("div",{className:`bg-white rounded-lg shadow-md overflow-hidden ${C.featured?"ring-2 ring-yellow-500":""}`,children:[C.featured&&i.jsxs("div",{className:"bg-yellow-500 text-white px-4 py-1 text-sm text-center",children:["متجر مميز حتى ",new Date(C.featured_until).toLocaleDateString("ar-SA")]}),C.banner_url&&i.jsx("img",{src:C.banner_url,alt:`${C.store_name} banner`,className:"w-full h-32 object-cover",onError:E=>{E.target.onerror=null,E.target.src="https://via.placeholder.com/400x150?text=Banner"}}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[C.logo_url&&i.jsx("img",{src:C.logo_url,alt:`${C.store_name} logo`,className:"w-16 h-16 rounded-full object-cover",onError:E=>{E.target.onerror=null,E.target.src="https://via.placeholder.com/80?text=Logo"}}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold",children:C.store_name}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsxs("div",{className:"relative inline-block",children:[i.jsxs("select",{value:C.status,onChange:E=>R(C.id,E.target.value),className:`px-2 py-1 text-sm rounded-full ${T(C.status)} appearance-none pr-8 cursor-pointer`,children:[i.jsx("option",{value:"active",children:"مفتوح"}),i.jsx("option",{value:"inactive",children:"مغلق"}),i.jsx("option",{value:"busy",children:"مشغول"}),i.jsx("option",{value:"pending",children:"معلق"}),i.jsx("option",{value:"suspended",children:"موقوف"})]}),i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-2",children:i.jsx("svg",{className:"h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),i.jsx("span",{className:`px-2 py-1 text-sm rounded-full ${U((q=C.membership)==null?void 0:q.type)}`,children:ee((I=C.membership)==null?void 0:I.type)}),i.jsxs("span",{className:"text-yellow-500",children:["★ ",C.rating]}),i.jsxs("span",{className:"text-gray-500",children:["(",C.rating_count,")"]})]})]})]}),i.jsxs("div",{className:"mt-4 space-y-2",children:[i.jsx("p",{className:"text-gray-600",children:C.address}),i.jsx("p",{className:"text-gray-600",children:C.phone}),i.jsx("div",{className:"flex flex-wrap gap-2",children:(X=C.categories)==null?void 0:X.map(E=>{const K=n.find(re=>re.id===E);return K?i.jsx("span",{className:"bg-blue-100 text-blue-800 text-sm px-2 py-1 rounded-full",children:K.name},K.id):null})})]}),i.jsx("div",{className:"mt-4 pt-4 border-t",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500",children:"نوع التوصيل"}),i.jsx("p",{className:"font-medium",children:D(C.delivery_type)})]}),C.delivery_type==="distance"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500",children:"سعر الكيلومتر"}),i.jsxs("p",{className:"font-medium",children:["₪",C.price_per_km]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500",children:"نطاق التوصيل"}),i.jsxs("p",{className:"font-medium",children:[C.delivery_radius," كم"]})]})]})]})}),i.jsx("div",{className:"mt-4 pt-4 border-t",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500",children:"المحفظة"}),i.jsx("p",{className:"font-medium",children:C.wallet_enabled?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-green-600",children:"مفعلة"}),i.jsxs("span",{className:"text-gray-600 mr-2",children:["(₪",C.wallet_balance||0,")"]})]}):i.jsx("span",{className:"text-red-600",children:"غير مفعلة"})})]}),C.wallet_enabled&&i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500",children:"الشحن التلقائي"}),i.jsx("p",{className:"font-medium",children:C.auto_charge?i.jsx("span",{className:"text-green-600",children:"مفعل"}):i.jsx("span",{className:"text-red-600",children:"غير مفعل"})})]})]})}),i.jsxs("div",{className:"mt-4 pt-4 border-t",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"مناطق الخدمة"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:C.service_areas&&C.service_areas.length>0?C.service_areas.map((E,K)=>i.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:E},K)):i.jsx("span",{className:"text-gray-500",children:"لا توجد مناطق خدمة محددة"})})]}),i.jsxs("div",{className:"mt-4 pt-4 border-t flex justify-end space-x-2",children:[i.jsx("button",{onClick:()=>{f(C),b({...C,categories:C.categories||[]}),u(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),i.jsx("button",{onClick:()=>A(C.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]})]},C.id)})}),V=()=>i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المتجر"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التقييم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العنوان"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التصنيفات"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التوصيل"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المحفظة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العضوية"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"مناطق الخدمة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:G.map(C=>{var q,I,X,E;return i.jsxs("tr",{className:C.featured?"bg-yellow-50":"",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[C.logo_url&&i.jsx("img",{src:C.logo_url,alt:C.store_name,className:"w-10 h-10 rounded-full object-cover ml-3",onError:K=>{K.target.onerror=null,K.target.src="https://via.placeholder.com/40?text=Logo"}}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-medium text-gray-900",children:[C.store_name,C.featured&&i.jsx("span",{className:"mr-2 text-yellow-500 text-sm",children:"(مميز)"})]}),i.jsx("div",{className:"text-gray-500",children:C.phone})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-yellow-500",children:"★"}),i.jsx("span",{className:"ml-1",children:C.rating}),i.jsxs("span",{className:"text-gray-500 ml-1",children:["(",C.rating_count,")"]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:C.address}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"flex flex-wrap gap-1",children:(q=C.categories)==null?void 0:q.map(K=>{const re=n.find(Q=>Q.id===K);return re?i.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:re.name},re.id):null})})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:D(C.delivery_type)}),C.delivery_type==="distance"&&i.jsxs("div",{className:"text-sm text-gray-500",children:[C.delivery_radius," كم - ₪",C.price_per_km,"/كم"]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{children:i.jsx("div",{className:"text-sm font-medium",children:C.wallet_enabled?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-green-600",children:"مفعلة"}),i.jsxs("div",{className:"text-sm text-gray-500",children:["₪",C.wallet_balance||0]})]}):i.jsx("span",{className:"text-red-600",children:"غير مفعلة"})})})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{children:[i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${U((I=C.membership)==null?void 0:I.type)}`,children:ee((X=C.membership)==null?void 0:X.type)}),i.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[((E=C.membership)==null?void 0:E.commission_rate)||10,"%"]})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex flex-wrap gap-1",children:[C.service_areas&&C.service_areas.length>0?C.service_areas.slice(0,3).map((K,re)=>i.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:K},re)):i.jsx("span",{className:"text-gray-500",children:"-"}),C.service_areas&&C.service_areas.length>3&&i.jsxs("span",{className:"text-gray-500 text-xs",children:["+",C.service_areas.length-3]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"relative inline-block",children:[i.jsxs("select",{value:C.status,onChange:K=>R(C.id,K.target.value),className:`px-2 py-1 text-xs rounded-full ${T(C.status)} appearance-none pr-8 cursor-pointer`,children:[i.jsx("option",{value:"active",children:"مفتوح"}),i.jsx("option",{value:"inactive",children:"مغلق"}),i.jsx("option",{value:"busy",children:"مشغول"}),i.jsx("option",{value:"pending",children:"معلق"}),i.jsx("option",{value:"suspended",children:"موقوف"})]}),i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-2",children:i.jsx("svg",{className:"h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[i.jsx("button",{onClick:()=>{f(C),b({...C,categories:C.categories||[]}),u(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),i.jsx("button",{onClick:()=>A(C.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},C.id)})})]})})});return s?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:o}),i.jsx("button",{onClick:w,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"البائعين"}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>g("grid"),className:`px-3 py-1 rounded ${x==="grid"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض شبكي"}),i.jsx("button",{onClick:()=>g("table"),className:`px-3 py-1 rounded ${x==="table"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض جدول"})]}),i.jsx("button",{onClick:()=>{f(null),b({store_name:"",phone:"",address:"",delivery_type:"distance",delivery_radius:5,price_per_km:2,status:"active",logo_url:"",banner_url:"",categories:[],wallet_enabled:!1,auto_charge:!1,service_areas:[],latitude:null,longitude:null,membership:{type:"basic",expires_at:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString().split("T")[0],commission_rate:10},featured:!1,featured_until:new Date(new Date().setMonth(new Date().getMonth()+1)).toISOString().split("T")[0],featured_order:1}),u(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة بائع جديد"})]})]}),i.jsx(zn,{filters:N,onFilterChange:P}),x==="grid"?z():V(),d&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-start justify-center min-h-screen",children:[i.jsx("div",{className:"fixed inset-0 bg-black opacity-30",onClick:()=>u(!1)}),i.jsxs("div",{className:"relative bg-white w-full min-h-screen",children:[i.jsx("div",{className:"sticky top-0 bg-white border-b z-10",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:p?"تعديل بائع":"إضافة بائع جديد"}),i.jsx("button",{onClick:()=>{u(!1),f(null)},className:"p-2 rounded-full hover:bg-gray-100",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:i.jsx(hk,{onSubmit:O,initialData:p})})]})]})})]})}function MF(){const[t,e]=j.useState(!1),n=async(a,o)=>{a.preventDefault();try{e(!0);const l=await r({username:o.store_name.replace(/\s+/g,"_").toLowerCase(),password:"password123",name:o.store_name,email:o.email||null,phone:o.phone,role:"vendor"});if(!l)throw new Error("فشل في إنشاء المستخدم المخصص");const{data:d,error:u}=await te.from("vendors").insert([{user_id:l,store_name:o.store_name,phone:o.phone,address:o.address,description:o.description,delivery_type:o.delivery_type,delivery_radius:o.delivery_radius,price_per_km:o.price_per_km,min_delivery_fee:o.min_delivery_fee,delivery_fee_per_km:o.delivery_fee_per_km,latitude:o.latitude,longitude:o.longitude,status:o.status,logo_url:o.logo_url,banner_url:o.banner_url,commission_rate:o.commission_rate,wallet_enabled:o.wallet_enabled,auto_charge:o.auto_charge,service_areas:o.service_areas,membership:o.membership}]).select();if(u)throw u;if(o.categories.length>0){const p=d[0].id,f=o.categories.map(g=>({vendor_id:p,category_id:g})),{error:x}=await te.from("vendor_categories").insert(f);x&&console.error("Error linking categories:",x)}$.success("تم إضافة البائع بنجاح")}catch(l){console.error("Error adding vendor:",l),$.error(l.message||"فشل في إضافة البائع")}finally{e(!1)}},r=async a=>{try{const{data:o,error:l}=await te.from("custom_users").select("id").eq("username",a.username).maybeSingle();if(l)throw l;o&&(a.username=`${a.username}_${Math.floor(Math.random()*1e3)}`);const{data:d,error:u}=await te.rpc("add_custom_user",{p_username:a.username,p_password:a.password,p_name:a.name,p_email:a.email,p_phone:a.phone,p_role:a.role});if(u)throw u;return d}catch(o){console.error("Error adding custom user:",o);try{const l=Vr(),{error:d}=await te.from("custom_users").insert([{id:l,username:a.username,password:a.password,password_hash:await s(a.password),name:a.name,email:a.email,phone:a.phone,role:a.role,status:"active"}]);if(d)throw d;return l}catch(l){throw console.error("Fallback error adding custom user:",l),l}}},s=async a=>{const l=new TextEncoder().encode(a),d=await crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(d)).map(f=>f.toString(16).padStart(2,"0")).join("")};return i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"إضافة بائع جديد"}),i.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:i.jsx(hk,{onSubmit:n})}),i.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-6 rounded-lg",children:[i.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"ملاحظات هامة"}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-blue-700",children:[i.jsx("li",{children:"سيتم إنشاء حساب مستخدم مخصص للبائع تلقائيًا."}),i.jsx("li",{children:'كلمة المرور الافتراضية هي "password123" ويجب تغييرها بعد الإنشاء.'}),i.jsx("li",{children:"تأكد من تحديد موقع المتجر بدقة على الخريطة لضمان دقة حسابات التوصيل."}),i.jsx("li",{children:"يمكن للبائع تحديث بياناته لاحقًا من خلال لوحة التحكم الخاصة به."}),i.jsx("li",{children:"تأكد من اختيار مناطق الخدمة المناسبة للبائع."}),i.jsx("li",{children:"يجب اختيار تصنيف واحد على الأقل للبائع."})]})]})]})}function OF(){const[t,e]=j.useState([]),[n,r]=j.useState(!0),[s,a]=j.useState(null),[o,l]=j.useState(!1),[d,u]=j.useState(null),[p,f]=j.useState({name:"",phone:"",email:"",status:"offline",commission_rate:15,vehicle_type:"motorcycle",vehicle_model:"",vehicle_year:"",vehicle_plate:"",working_areas:[]}),x=["رام الله","البيرة","نابلس","جنين","طولكرم","قلقيلية","طوباس","سلفيت","أريحا","بيت لحم","الخليل","بيت جالا","بيت ساحور","بيرزيت","الظاهرية","دورا","يطا","عنبتا","بيت فجار","بديا","عزون"];j.useEffect(()=>{g()},[]);const g=async()=>{try{r(!0),a(null);const{data:T,error:Y}=await te.from("drivers").select(`
          *,
          user:user_id(*)
        `).order("created_at",{ascending:!1});if(Y)throw Y;e(T||[])}catch(T){console.error("Error fetching drivers:",T),a("فشل في تحميل بيانات السائقين. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل بيانات السائقين"),e([{id:1,name:"خالد أحمد",phone:"0599123456",email:"khaled@example.com",status:"active",rating:4.8,rating_count:156,total_orders:230,completed_orders:220,cancelled_orders:10,commission_rate:15,wallet_balance:450,vehicle:{type:"motorcycle",model:"هوندا",year:"2022",plate_number:"1234-H"},working_areas:["رام الله","البيرة","نابلس"]},{id:2,name:"محمد علي",phone:"0599234567",email:"mohammad@example.com",status:"active",rating:4.5,rating_count:98,total_orders:180,completed_orders:170,cancelled_orders:10,commission_rate:15,wallet_balance:320,vehicle:{type:"car",model:"تويوتا",year:"2020",plate_number:"5678-T"},working_areas:["جنين","طولكرم","قلقيلية"]},{id:3,name:"أحمد محمود",phone:"0599345678",email:"ahmad@example.com",status:"inactive",rating:4.2,rating_count:75,total_orders:120,completed_orders:110,cancelled_orders:10,commission_rate:15,wallet_balance:200,vehicle:{type:"motorcycle",model:"سوزوكي",year:"2021",plate_number:"9012-S"},working_areas:["بيت لحم","الخليل"]}])}finally{r(!1)}},v={name:{type:"text",label:"اسم السائق",placeholder:"البحث باسم السائق",value:""},phone:{type:"text",label:"رقم الهاتف",placeholder:"البحث برقم الهاتف",value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"offline",label:"غير متصل"},{value:"available",label:"متاح"},{value:"busy",label:"مشغول"}],value:""},vehicle_type:{type:"select",label:"نوع المركبة",placeholder:"جميع الأنواع",options:[{value:"motorcycle",label:"دراجة نارية"},{value:"car",label:"سيارة"},{value:"bicycle",label:"دراجة هوائية"}],value:""}},{filters:b,filterData:w,handleFilterChange:_}=Bn(v),N=async T=>{T.preventDefault();try{if(!p.name||!p.phone){$.error("الرجاء تعبئة جميع الحقول المطلوبة");return}if(d){const{error:Y}=await te.from("drivers").update({name:p.name,phone:p.phone,email:p.email,status:p.status,commission_rate:p.commission_rate,vehicle_type:p.vehicle_type,vehicle_model:p.vehicle_model,vehicle_year:p.vehicle_year,vehicle_plate:p.vehicle_plate,working_areas:p.working_areas}).eq("id",d.id);if(Y)throw Y;$.success("تم تحديث السائق بنجاح")}else{const{error:Y}=await te.from("drivers").insert([{name:p.name,phone:p.phone,email:p.email,status:p.status,commission_rate:p.commission_rate,vehicle_type:p.vehicle_type,vehicle_model:p.vehicle_model,vehicle_year:p.vehicle_year,vehicle_plate:p.vehicle_plate,working_areas:p.working_areas}]);if(Y)throw Y;$.success("تم إضافة السائق بنجاح")}g(),l(!1),u(null),f({name:"",phone:"",email:"",status:"offline",commission_rate:15,vehicle_type:"motorcycle",vehicle_model:"",vehicle_year:"",vehicle_plate:"",working_areas:[]})}catch(Y){console.error("Error saving driver:",Y),$.error(d?"فشل في تحديث السائق":"فشل في إضافة السائق")}},S=async T=>{if(window.confirm("هل أنت متأكد من حذف هذا السائق؟"))try{const{error:Y}=await te.from("drivers").delete().eq("id",T);if(Y)throw Y;$.success("تم حذف السائق بنجاح"),g()}catch(Y){console.error("Error deleting driver:",Y),$.error("فشل في حذف السائق")}},P=T=>{switch(T){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"available":return"bg-green-100 text-green-800";case"busy":return"bg-yellow-100 text-yellow-800";case"offline":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},O=T=>{switch(T){case"active":return"نشط";case"inactive":return"غير نشط";case"available":return"متاح";case"busy":return"مشغول";case"offline":return"غير متصل";default:return T}},A=T=>{switch(T){case"motorcycle":return"دراجة نارية";case"car":return"سيارة";case"bicycle":return"دراجة هوائية";default:return T}},R=w(t);return n&&t.length===0?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:s}),i.jsx("button",{onClick:g,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"السائقين"}),i.jsx("button",{onClick:()=>{u(null),f({name:"",phone:"",email:"",status:"offline",commission_rate:15,vehicle_type:"motorcycle",vehicle_model:"",vehicle_year:"",vehicle_plate:"",working_areas:[]}),l(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة سائق جديد"})]}),i.jsx(zn,{filters:b,onFilterChange:_}),i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"السائق"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التقييم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الطلبات"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العمولة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المركبة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"مناطق العمل"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:"لا يوجد سائقين متطابقين مع معايير البحث"})}):R.map(T=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:T.name}),i.jsxs("div",{className:"text-sm text-gray-500",children:[i.jsx("div",{children:T.phone}),i.jsx("div",{children:T.email})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-yellow-500",children:"★"}),i.jsx("span",{className:"ml-1",children:T.rating}),i.jsxs("span",{className:"text-gray-500 ml-1",children:["(",T.rating_count,")"]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{children:[i.jsxs("div",{className:"text-sm",children:["الكل: ",T.total_orders||0]}),i.jsxs("div",{className:"text-sm text-green-600",children:["مكتمل: ",T.completed_orders||0]}),i.jsxs("div",{className:"text-sm text-red-600",children:["ملغي: ",T.cancelled_orders||0]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{children:[i.jsxs("div",{className:"text-sm font-medium",children:[T.commission_rate,"%"]}),i.jsxs("div",{className:"text-sm text-gray-500",children:["الرصيد: ₪",T.wallet_balance||0]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:A(T.vehicle_type)}),i.jsxs("div",{className:"text-sm text-gray-500",children:[T.vehicle_model," ",T.vehicle_year]}),i.jsx("div",{className:"text-sm text-gray-500",children:T.vehicle_plate})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"flex flex-wrap gap-1",children:T.working_areas&&T.working_areas.length>0?T.working_areas.map((Y,D)=>i.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:Y},D)):i.jsx("span",{className:"text-gray-500",children:"-"})})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${P(T.status)}`,children:O(T.status)})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[i.jsx("button",{onClick:()=>{u(T),f({name:T.name,phone:T.phone,email:T.email,status:T.status,commission_rate:T.commission_rate,vehicle_type:T.vehicle_type,vehicle_model:T.vehicle_model,vehicle_year:T.vehicle_year,vehicle_plate:T.vehicle_plate,working_areas:T.working_areas||[]}),l(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),i.jsx("button",{onClick:()=>S(T.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},T.id))})]})})}),o&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx("div",{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-3xl w-full mx-4",children:[i.jsx("h2",{className:"text-2xl font-bold mb-6",children:d?"تعديل سائق":"إضافة سائق جديد"}),i.jsxs("form",{onSubmit:N,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم السائق"}),i.jsx("input",{type:"text",value:p.name,onChange:T=>f({...p,name:T.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم الهاتف"}),i.jsx("input",{type:"tel",value:p.phone,onChange:T=>f({...p,phone:T.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),i.jsx("input",{type:"email",value:p.email,onChange:T=>f({...p,email:T.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحالة"}),i.jsxs("select",{value:p.status,onChange:T=>f({...p,status:T.target.value}),className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"offline",children:"غير متصل"}),i.jsx("option",{value:"available",children:"متاح"}),i.jsx("option",{value:"busy",children:"مشغول"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نسبة العمولة (%)"}),i.jsx("input",{type:"number",value:p.commission_rate,onChange:T=>f({...p,commission_rate:Number(T.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",max:"100",step:"0.1"})]})]}),i.jsxs("div",{className:"border-t pt-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"معلومات المركبة"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع المركبة"}),i.jsxs("select",{value:p.vehicle_type,onChange:T=>f({...p,vehicle_type:T.target.value}),className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"motorcycle",children:"دراجة نارية"}),i.jsx("option",{value:"car",children:"سيارة"}),i.jsx("option",{value:"bicycle",children:"دراجة هوائية"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الموديل"}),i.jsx("input",{type:"text",value:p.vehicle_model,onChange:T=>f({...p,vehicle_model:T.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"سنة الصنع"}),i.jsx("input",{type:"text",value:p.vehicle_year,onChange:T=>f({...p,vehicle_year:T.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم اللوحة"}),i.jsx("input",{type:"text",value:p.vehicle_plate,onChange:T=>f({...p,vehicle_plate:T.target.value}),className:"w-full border rounded-md px-3 py-2"})]})]})]}),i.jsxs("div",{className:"border-t pt-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"مناطق العمل"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-60 overflow-y-auto",children:x.map(T=>i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",checked:p.working_areas.includes(T),onChange:Y=>{const D=Y.target.checked?[...p.working_areas,T]:p.working_areas.filter(U=>U!==T);f({...p,working_areas:D})},className:"rounded text-blue-600"}),i.jsx("span",{children:T})]},T))})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{l(!1),u(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:d?"تحديث":"إضافة"})]})]})]})]})})]})}function LF(){const[t,e]=j.useState(!1),[n,r]=j.useState({name:"",phone:"",email:"",password:"",status:"offline",commission_rate:15,vehicle_type:"motorcycle",vehicle_model:"",vehicle_year:"",vehicle_plate:"",working_areas:[]}),s=["رام الله","البيرة","نابلس","جنين","طولكرم","قلقيلية","طوباس","سلفيت","أريحا","بيت لحم","الخليل","بيت جالا","بيت ساحور","بيرزيت","الظاهرية","دورا","يطا","عنبتا","بيت فجار","بديا","عزون"],a=async o=>{o.preventDefault();try{if(e(!0),!n.name||!n.phone||!n.password){$.error("الرجاء تعبئة جميع الحقول المطلوبة"),e(!1);return}const l=n.phone.replace(/\s+/g,""),{data:d,error:u}=await supabase.rpc("add_custom_user",{p_username:l,p_password:n.password,p_name:n.name,p_email:n.email||null,p_phone:n.phone,p_role:"driver"});if(u){console.error("Error creating custom user:",u),$.error("فشل في إنشاء حساب المستخدم: "+u.message),e(!1);return}const{data:p,error:f}=await supabase.from("drivers").insert([{user_id:d,name:n.name,phone:n.phone,email:n.email,status:n.status,commission_rate:n.commission_rate,vehicle_type:n.vehicle_type,vehicle_model:n.vehicle_model,vehicle_year:n.vehicle_year,vehicle_plate:n.vehicle_plate,working_areas:n.working_areas}]).select();if(f){console.error("Error creating driver:",f),$.error("فشل في إنشاء بيانات السائق: "+f.message),e(!1);return}const{error:x}=await supabase.rpc("register_driver_in_auth",{p_driver_id:p[0].id});x&&console.error("Error registering driver in auth system:",x),$.success("تم إضافة السائق بنجاح"),r({name:"",phone:"",email:"",password:"",status:"offline",commission_rate:15,vehicle_type:"motorcycle",vehicle_model:"",vehicle_year:"",vehicle_plate:"",working_areas:[]})}catch(l){console.error("Error adding driver:",l),$.error(l.message||"فشل في إضافة السائق")}finally{e(!1)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"إضافة سائق جديد"}),i.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:i.jsxs("form",{onSubmit:a,className:"space-y-6",children:[i.jsxs("div",{className:"border-b pb-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"بيانات السائق"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الاسم ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:n.name,onChange:o=>r({...n,name:o.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["رقم الهاتف ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"tel",value:n.phone,onChange:o=>r({...n,phone:o.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),i.jsx("input",{type:"email",value:n.email,onChange:o=>r({...n,email:o.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["كلمة المرور ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"password",value:n.password,onChange:o=>r({...n,password:o.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الحالة ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:n.status,onChange:o=>r({...n,status:o.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"offline",children:"غير متصل"}),i.jsx("option",{value:"available",children:"متاح"}),i.jsx("option",{value:"busy",children:"مشغول"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نسبة العمولة (%) ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:n.commission_rate,onChange:o=>r({...n,commission_rate:Number(o.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",max:"100",step:"0.1",required:!0})]})]})]}),i.jsxs("div",{className:"border-b pb-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"معلومات المركبة"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نوع المركبة ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:n.vehicle_type,onChange:o=>r({...n,vehicle_type:o.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"motorcycle",children:"دراجة نارية"}),i.jsx("option",{value:"car",children:"سيارة"}),i.jsx("option",{value:"bicycle",children:"دراجة هوائية"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الموديل"}),i.jsx("input",{type:"text",value:n.vehicle_model,onChange:o=>r({...n,vehicle_model:o.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"سنة الصنع"}),i.jsx("input",{type:"text",value:n.vehicle_year,onChange:o=>r({...n,vehicle_year:o.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم اللوحة"}),i.jsx("input",{type:"text",value:n.vehicle_plate,onChange:o=>r({...n,vehicle_plate:o.target.value}),className:"w-full border rounded-md px-3 py-2"})]})]})]}),i.jsxs("div",{className:"border-b pb-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"مناطق العمل"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 max-h-60 overflow-y-auto",children:s.map(o=>i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",checked:n.working_areas.includes(o),onChange:l=>{const d=l.target.checked?[...n.working_areas,o]:n.working_areas.filter(u=>u!==o);r({...n,working_areas:d})},className:"rounded text-blue-600"}),i.jsx("span",{children:o})]},o))})]}),i.jsx("div",{className:"flex justify-end space-x-2",children:i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:t,children:t?"جاري الإضافة...":"إضافة سائق جديد"})})]})})]})}function RF(){const{user:t}=Ro(),[e,n]=j.useState([]),[r,s]=j.useState([]),[a,o]=j.useState(!0),[l,d]=j.useState(null),[u,p]=j.useState(!1),[f,x]=j.useState(null),[g,v]=j.useState({name:"",zone_id:"",cost:0,min_amount:null,max_amount:null,delivery_type:"distance",settings:{distance:{min_distance:1,max_distance:20,base_fee:5,price_per_km:2},fixed:{fixed_price:10},zones:{zones:[{name:"المنطقة أ",price:10},{name:"المنطقة ب",price:15},{name:"المنطقة ج",price:20}]}}});j.useEffect(()=>{b()},[]);const b=async()=>{try{o(!0),d(null);const{data:D,error:U}=await te.from("shipping_zones").select("*").order("name");if(U)throw U;s(D||[]);const{data:ee,error:G}=await te.from("shipping_methods").select(`
          *,
          zone:zone_id(name)
        `).order("name");if(G)throw G;n(ee||[])}catch(D){console.error("Error fetching data:",D),d("فشل في تحميل البيانات. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل البيانات")}finally{o(!1)}},w={name:{type:"text",label:"اسم الطريقة",placeholder:"البحث باسم طريقة الشحن",value:""},zone_id:{type:"select",label:"منطقة الشحن",placeholder:"جميع المناطق",options:r.map(D=>({value:D.id,label:D.name})),value:""},delivery_type:{type:"select",label:"نوع التوصيل",placeholder:"جميع الأنواع",options:[{value:"distance",label:"حسب المسافة"},{value:"fixed",label:"سعر ثابت"},{value:"zones",label:"مناطق"}],value:""},cost:{type:"number",label:"التكلفة",placeholder:"البحث بالتكلفة",min:0,value:""}},{filters:_,filterData:N,handleFilterChange:S}=Bn(w),P=async D=>{D.preventDefault();try{if(!g.name||g.cost===""){$.error("الرجاء تعبئة جميع الحقول المطلوبة");return}if(g.min_amount!==null&&g.max_amount!==null&&parseFloat(g.min_amount)>parseFloat(g.max_amount)){$.error("الحد الأدنى يجب أن يكون أقل من أو يساوي الحد الأقصى");return}const U={name:g.name,zone_id:g.zone_id||null,cost:parseFloat(g.cost),min_amount:g.min_amount!==""?parseFloat(g.min_amount):null,max_amount:g.max_amount!==""?parseFloat(g.max_amount):null,delivery_type:g.delivery_type,settings:g.settings[g.delivery_type]};if(f){const{error:ee}=await te.from("shipping_methods").update(U).eq("id",f.id);if(ee)throw ee;$.success("تم تحديث طريقة الشحن بنجاح")}else{const{error:ee}=await te.from("shipping_methods").insert([U]);if(ee)throw ee;$.success("تم إضافة طريقة الشحن بنجاح")}b(),p(!1),x(null),v({name:"",zone_id:"",cost:0,min_amount:null,max_amount:null,delivery_type:"distance",settings:{distance:{min_distance:1,max_distance:20,base_fee:5,price_per_km:2},fixed:{fixed_price:10},zones:{zones:[{name:"المنطقة أ",price:10},{name:"المنطقة ب",price:15},{name:"المنطقة ج",price:20}]}}})}catch(U){console.error("Error saving shipping method:",U),$.error(f?"فشل في تحديث طريقة الشحن":"فشل في إضافة طريقة الشحن")}},O=async D=>{if(window.confirm("هل أنت متأكد من حذف طريقة الشحن هذه؟"))try{const{error:U}=await te.from("shipping_methods").delete().eq("id",D);if(U)throw U;$.success("تم حذف طريقة الشحن بنجاح"),b()}catch(U){console.error("Error deleting shipping method:",U),$.error("فشل في حذف طريقة الشحن")}},A=async()=>{const D=prompt("أدخل اسم منطقة الشحن الجديدة:");if(D)try{const U=t==null?void 0:t.id;if(!U){$.error("يجب تسجيل الدخول لإضافة منطقة شحن");return}const{data:ee,error:G}=await te.from("shipping_zones").insert([{name:D,vendor_id:U}]).select();if(G){console.error("Error adding shipping zone:",G);const{data:z,error:V}=await te.from("shipping_zones").insert([{name:D,vendor_id:null}]).select();if(V)throw V;$.success("تم إضافة منطقة الشحن بنجاح (بدون ربط بالبائع)")}else $.success("تم إضافة منطقة الشحن بنجاح");b()}catch(U){console.error("Error adding shipping zone:",U),$.error("فشل في إضافة منطقة الشحن")}},R=async D=>{if(window.confirm("هل أنت متأكد من حذف منطقة الشحن هذه؟ سيتم حذف جميع طرق الشحن المرتبطة بها."))try{const{error:U}=await te.from("shipping_zones").delete().eq("id",D);if(U)throw U;$.success("تم حذف منطقة الشحن بنجاح"),b()}catch(U){console.error("Error deleting shipping zone:",U),$.error("فشل في حذف منطقة الشحن")}},T=D=>{switch(D){case"distance":return"حسب المسافة";case"fixed":return"سعر ثابت";case"zones":return"مناطق";default:return D}},Y=N(e);return a?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):l?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:l}),i.jsx("button",{onClick:b,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"طرق التوصيل"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:A,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"إضافة منطقة شحن"}),i.jsx("button",{onClick:()=>{x(null),v({name:"",zone_id:"",cost:0,min_amount:null,max_amount:null,delivery_type:"distance",settings:{distance:{min_distance:1,max_distance:20,base_fee:5,price_per_km:2},fixed:{fixed_price:10},zones:{zones:[{name:"المنطقة أ",price:10},{name:"المنطقة ب",price:15},{name:"المنطقة ج",price:20}]}}}),p(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة طريقة توصيل"})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"مناطق الشحن"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:r.length===0?i.jsx("div",{className:"col-span-full text-center py-4 text-gray-500",children:"لا توجد مناطق شحن. قم بإضافة منطقة شحن جديدة."}):r.map(D=>i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h4",{className:"font-medium",children:D.name}),i.jsx("button",{onClick:()=>R(D.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]}),i.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:[e.filter(U=>U.zone_id===D.id).length," طريقة توصيل"]})]},D.id))})]}),i.jsx(zn,{filters:_,onFilterChange:S}),i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"اسم الطريقة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"نوع التوصيل"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"منطقة الشحن"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التكلفة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحد الأدنى للطلب"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحد الأقصى للطلب"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإعدادات"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Y.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:"لا توجد طرق شحن متطابقة مع معايير البحث"})}):Y.map(D=>{var U,ee,G;return i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"font-medium text-gray-900",children:D.name})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:T(D.delivery_type)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:((U=D.zone)==null?void 0:U.name)||"جميع المناطق"}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",D.cost]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:D.min_amount!==null?`₪${D.min_amount}`:"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:D.max_amount!==null?`₪${D.max_amount}`:"-"}),i.jsxs("td",{className:"px-6 py-4",children:[D.delivery_type==="distance"&&D.settings&&i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{children:["السعر الأساسي: ₪",D.settings.base_fee]}),i.jsxs("div",{children:["سعر الكيلومتر: ₪",D.settings.price_per_km]}),i.jsxs("div",{children:["نطاق التوصيل: ",D.settings.min_distance," - ",D.settings.max_distance," كم"]})]}),D.delivery_type==="fixed"&&D.settings&&i.jsx("div",{className:"text-sm",children:i.jsxs("div",{children:["السعر الثابت: ₪",D.settings.fixed_price]})}),D.delivery_type==="zones"&&D.settings&&D.settings.zones&&i.jsx("div",{className:"text-sm",children:Array.isArray(D.settings.zones)?D.settings.zones.map((z,V)=>i.jsxs("div",{children:[z.name,": ₪",z.price]},V)):(G=(ee=D.settings.zones)==null?void 0:ee.zones)==null?void 0:G.map((z,V)=>i.jsxs("div",{children:[z.name,": ₪",z.price]},V))})]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[i.jsx("button",{onClick:()=>{x(D),v({name:D.name,zone_id:D.zone_id||"",cost:D.cost,min_amount:D.min_amount,max_amount:D.max_amount,delivery_type:D.delivery_type||"distance",settings:{distance:D.delivery_type==="distance"?D.settings:{min_distance:1,max_distance:20,base_fee:5,price_per_km:2},fixed:D.delivery_type==="fixed"?D.settings:{fixed_price:10},zones:D.delivery_type==="zones"?D.settings:{zones:[{name:"المنطقة أ",price:10},{name:"المنطقة ب",price:15},{name:"المنطقة ج",price:20}]}}}),p(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),i.jsx("button",{onClick:()=>O(D.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},D.id)})})]})})}),i.jsx(_e,{open:u,onClose:()=>{p(!1),x(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-3xl w-full mx-4",children:[i.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:f?"تعديل طريقة التوصيل":"إضافة طريقة توصيل جديدة"}),i.jsxs("form",{onSubmit:P,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم الطريقة ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:g.name,onChange:D=>v({...g,name:D.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"منطقة الشحن"}),i.jsxs("select",{value:g.zone_id,onChange:D=>v({...g,zone_id:D.target.value}),className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"",children:"جميع المناطق"}),r.map(D=>i.jsx("option",{value:D.id,children:D.name},D.id))]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نوع التوصيل ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:g.delivery_type,onChange:D=>v({...g,delivery_type:D.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"distance",children:"حسب المسافة"}),i.jsx("option",{value:"fixed",children:"سعر ثابت"}),i.jsx("option",{value:"zones",children:"مناطق"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["التكلفة (₪) ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:g.cost,onChange:D=>v({...g,cost:D.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأدنى للطلب (₪)"}),i.jsx("input",{type:"number",value:g.min_amount!==null?g.min_amount:"",onChange:D=>v({...g,min_amount:D.target.value===""?null:D.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01",placeholder:"اتركه فارغاً إذا لم يكن هناك حد أدنى"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأقصى للطلب (₪)"}),i.jsx("input",{type:"number",value:g.max_amount!==null?g.max_amount:"",onChange:D=>v({...g,max_amount:D.target.value===""?null:D.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01",placeholder:"اتركه فارغاً إذا لم يكن هناك حد أقصى"})]})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["إعدادات ",T(g.delivery_type)]}),g.delivery_type==="distance"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"السعر الأساسي (₪)"}),i.jsx("input",{type:"number",value:g.settings.distance.base_fee,onChange:D=>v({...g,settings:{...g.settings,distance:{...g.settings.distance,base_fee:parseFloat(D.target.value)}}}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"سعر الكيلومتر (₪)"}),i.jsx("input",{type:"number",value:g.settings.distance.price_per_km,onChange:D=>v({...g,settings:{...g.settings,distance:{...g.settings.distance,price_per_km:parseFloat(D.target.value)}}}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأدنى للمسافة (كم)"}),i.jsx("input",{type:"number",value:g.settings.distance.min_distance,onChange:D=>v({...g,settings:{...g.settings,distance:{...g.settings.distance,min_distance:parseFloat(D.target.value)}}}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأقصى للمسافة (كم)"}),i.jsx("input",{type:"number",value:g.settings.distance.max_distance,onChange:D=>v({...g,settings:{...g.settings,distance:{...g.settings.distance,max_distance:parseFloat(D.target.value)}}}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.1"})]})]}),g.delivery_type==="fixed"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"السعر الثابت (₪)"}),i.jsx("input",{type:"number",value:g.settings.fixed.fixed_price,onChange:D=>v({...g,settings:{...g.settings,fixed:{fixed_price:parseFloat(D.target.value)}}}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01"})]}),g.delivery_type==="zones"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المناطق"}),i.jsxs("div",{className:"space-y-2",children:[g.settings.zones.zones.map((D,U)=>i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:D.name,onChange:ee=>{const G=[...g.settings.zones.zones];G[U]={...D,name:ee.target.value},v({...g,settings:{...g.settings,zones:{zones:G}}})},className:"flex-1 border rounded-md px-3 py-2",placeholder:"اسم المنطقة"}),i.jsx("input",{type:"number",value:D.price,onChange:ee=>{const G=[...g.settings.zones.zones];G[U]={...D,price:parseFloat(ee.target.value)},v({...g,settings:{...g.settings,zones:{zones:G}}})},className:"w-32 border rounded-md px-3 py-2",min:"0",step:"0.01",placeholder:"السعر"}),i.jsx("button",{type:"button",onClick:()=>{const ee=g.settings.zones.zones.filter((G,z)=>z!==U);v({...g,settings:{...g.settings,zones:{zones:ee}}})},className:"text-red-600 hover:text-red-800",children:"حذف"})]},U)),i.jsx("button",{type:"button",onClick:()=>{const D=[...g.settings.zones.zones,{name:"",price:0}];v({...g,settings:{...g.settings,zones:{zones:D}}})},className:"text-blue-600 hover:text-blue-800 text-sm",children:"إضافة منطقة"})]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{p(!1),x(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:f?"تحديث":"إضافة"})]})]})]})]})})]})}function AF(){const[t,e]=j.useState([]),[n,r]=j.useState(!0),[s,a]=j.useState(null),[o,l]=j.useState(!1),[d,u]=j.useState(null),[p,f]=j.useState({name:"",phone:"",address:"",email:"",notes:""});j.useEffect(()=>{x()},[]);const x=async()=>{try{r(!0),a(null);const{data:R,error:T}=await te.from("customers").select("*").order("created_at",{ascending:!1});if(T)throw console.error("Error fetching customers:",T),new Error(`فشل في جلب بيانات الزبائن: ${T.message}`);e(R||[])}catch(R){console.error("Error fetching customers:",R),a(R.message||"فشل في تحميل بيانات العملاء. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل بيانات العملاء"),e([])}finally{r(!1)}},g={name:{type:"text",label:"اسم العميل",placeholder:"البحث باسم العميل",value:""},phone:{type:"text",label:"رقم الهاتف",placeholder:"البحث برقم الهاتف",value:""},address:{type:"text",label:"العنوان",placeholder:"البحث بالعنوان",value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"active",label:"نشط"},{value:"blocked",label:"محظور"}],value:""},orders_count:{type:"number",label:"عدد الطلبات",placeholder:"الحد الأدنى للطلبات",min:0,value:""},total_spent:{type:"number",label:"إجمالي الإنفاق",placeholder:"الحد الأدنى للإنفاق",min:0,value:""}},{filters:v,filterData:b,handleFilterChange:w}=Bn(g),_=async R=>{if(R.preventDefault(),!p.name||!p.phone){$.error("الرجاء إدخال الاسم ورقم الهاتف");return}try{if(r(!0),d){const{error:T}=await te.from("customers").update({name:p.name,phone:p.phone,address:p.address,email:p.email,notes:p.notes,updated_at:new Date().toISOString()}).eq("id",d.id);if(T)throw T;$.success("تم تحديث بيانات العميل بنجاح")}else{const{error:T}=await te.from("customers").insert([{name:p.name,phone:p.phone,address:p.address,email:p.email,notes:p.notes}]);if(T)throw T;$.success("تم إضافة العميل بنجاح")}f({name:"",phone:"",address:"",email:"",notes:""}),u(null),l(!1),x()}catch(T){console.error("Error saving customer:",T),$.error(d?"فشل في تحديث بيانات العميل":"فشل في إضافة العميل")}finally{r(!1)}},N=R=>{u(R),f({name:R.name,phone:R.phone,address:R.address||"",email:R.email||"",notes:R.notes||""}),l(!0)},S=async R=>{try{const T=t.find(U=>U.id===R);if(!T)return;const Y=T.status==="active"?"blocked":"active",{error:D}=await te.from("customers").update({status:Y}).eq("id",R);if(D)throw D;e(t.map(U=>U.id===R?{...U,status:Y}:U)),$.success(`تم ${Y==="active"?"إلغاء حظر":"حظر"} العميل بنجاح`)}catch(T){console.error("Error updating customer status:",T),$.error("فشل في تحديث حالة العميل")}},P=R=>{switch(R){case"active":return"bg-green-100 text-green-800";case"blocked":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},O=R=>{switch(R){case"active":return"نشط";case"blocked":return"محظور";default:return R}},A=b(t);return n&&t.length===0?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:s}),i.jsx("button",{onClick:x,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"bg-white rounded-lg shadow",children:[i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"الزبائن"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{u(null),f({name:"",phone:"",address:"",email:"",notes:""}),l(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة زبون جديد"}),i.jsx("button",{className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"تصدير البيانات"})]})]}),i.jsx(zn,{filters:v,onFilterChange:w}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الاسم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"رقم الهاتف"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العنوان"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"عدد الطلبات"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"إجمالي الإنفاق"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"آخر طلب"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:"لا يوجد زبائن متطابقين مع معايير البحث"})}):A.map(R=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.phone}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.address||"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.orders_count||0}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",(R.total_spent||0).toFixed(2)]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.last_order?new Date(R.last_order).toLocaleDateString("ar-SA"):"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${P(R.status||"active")}`,children:O(R.status||"active")})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[i.jsx("button",{onClick:()=>N(R),className:"text-blue-600 hover:text-blue-900 ml-4",children:"تعديل"}),i.jsx("button",{onClick:()=>S(R.id),className:`${(R.status||"active")==="blocked"?"text-green-600 hover:text-green-900":"text-red-600 hover:text-red-900"}`,children:(R.status||"active")==="blocked"?"إلغاء الحظر":"حظر"})]})]},R.id))})]})})]}),i.jsx(_e,{open:o,onClose:()=>{l(!1),u(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:d?"تعديل بيانات الزبون":"إضافة زبون جديد"}),i.jsxs("form",{onSubmit:_,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الاسم ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:p.name,onChange:R=>f({...p,name:R.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["رقم الهاتف ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"tel",value:p.phone,onChange:R=>f({...p,phone:R.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),i.jsx("input",{type:"email",value:p.email,onChange:R=>f({...p,email:R.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"العنوان"}),i.jsx("input",{type:"text",value:p.address,onChange:R=>f({...p,address:R.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ملاحظات"}),i.jsx("textarea",{value:p.notes,onChange:R=>f({...p,notes:R.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{l(!1),u(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:n,children:n?"جاري الحفظ...":d?"تحديث":"إضافة"})]})]})]})]})})]})}function IF(){const[t,e]=j.useState(!1),[n,r]=j.useState({name:"",phone:"",email:"",password:"",address:"",notes:""}),[s,a]=j.useState(!1),[o,l]=j.useState(null);j.useEffect(()=>{const u=localStorage.getItem("customerToEdit");if(u)try{const p=JSON.parse(u);r({name:p.name||"",phone:p.phone||"",email:p.email||"",password:"",address:p.address||"",notes:p.notes||""}),l(p.id),a(!0),localStorage.removeItem("customerToEdit")}catch(p){console.error("Error parsing customer data:",p)}},[]);const d=async u=>{u.preventDefault();try{if(e(!0),!n.name||!n.phone){$.error("الرجاء تعبئة جميع الحقول المطلوبة"),e(!1);return}if(s){const p={name:n.name,phone:n.phone,email:n.email||null,address:n.address||null,notes:n.notes||null},{error:f}=await te.from("customers").update(p).eq("id",o);if(f)throw f;if(n.password){const{data:x,error:g}=await te.from("customers").select("user_id").eq("id",o).single();if(g)throw g;if(x.user_id){const{error:v}=await te.rpc("change_custom_user_password",{p_user_id:x.user_id,p_new_password:n.password});if(v)throw v}}$.success("تم تحديث بيانات الزبون بنجاح")}else{if(!n.password){$.error("الرجاء إدخال كلمة مرور للزبون"),e(!1);return}const{data:p,error:f}=await te.auth.signUp({email:n.email||`${n.phone}@example.com`,password:n.password,options:{data:{name:n.name,phone:n.phone,role:"customer"}}});if(f){console.error("Error creating user:",f),$.error("خطأ في إنشاء المستخدم: "+f.message),e(!1);return}const{data:x,error:g}=await te.from("customers").insert([{user_id:p.user.id,name:n.name,phone:n.phone,email:n.email,address:n.address,notes:n.notes}]).select();if(g)throw g;$.success("تم إضافة الزبون بنجاح")}r({name:"",phone:"",email:"",password:"",address:"",notes:""}),a(!1),l(null)}catch(p){console.error("Error adding/updating customer:",p),$.error(p.message||"فشل في إضافة/تحديث الزبون")}finally{e(!1)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:s?"تعديل بيانات الزبون":"إضافة زبون جديد"}),i.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:i.jsxs("form",{onSubmit:d,className:"space-y-6",children:[i.jsxs("div",{className:"border-b pb-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"بيانات الزبون"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الاسم ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:n.name,onChange:u=>r({...n,name:u.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["رقم الهاتف ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"tel",value:n.phone,onChange:u=>r({...n,phone:u.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),i.jsx("input",{type:"email",value:n.email,onChange:u=>r({...n,email:u.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["كلمة المرور ",s?"":i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"password",value:n.password,onChange:u=>r({...n,password:u.target.value}),className:"w-full border rounded-md px-3 py-2",required:!s,placeholder:s?"اتركه فارغاً للاحتفاظ بكلمة المرور الحالية":""}),s&&i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"اتركه فارغاً للاحتفاظ بكلمة المرور الحالية"})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"العنوان"}),i.jsx("input",{type:"text",value:n.address,onChange:u=>r({...n,address:u.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ملاحظات"}),i.jsx("textarea",{value:n.notes,onChange:u=>r({...n,notes:u.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]})]})]}),i.jsx("div",{className:"flex justify-end space-x-2",children:i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:t,children:t?"جاري الحفظ...":s?"تحديث الزبون":"إضافة زبون جديد"})})]})})]})}function FF(){const[t,e]=j.useState([]),[n,r]=j.useState(!0),[s,a]=j.useState(null),[o,l]=j.useState(!1),[d,u]=j.useState(!1),[p,f]=j.useState(null),[x,g]=j.useState({name:"",email:"",role:"customer",password:"",confirm_password:""}),[v,b]=j.useState({password:"",confirm_password:""});j.useEffect(()=>{w()},[]);const w=async()=>{try{r(!0),a(null);const{data:z,error:V}=await te.from("custom_users").select("*").order("created_at",{ascending:!1});if(V)throw V;e(z||[])}catch(z){console.error("Error fetching users:",z),a("فشل في تحميل المستخدمين. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل المستخدمين"),e([])}finally{r(!1)}},_={username:{type:"text",label:"اسم المستخدم",placeholder:"البحث باسم المستخدم",value:""},name:{type:"text",label:"الاسم",placeholder:"البحث بالاسم",value:""},email:{type:"text",label:"البريد الإلكتروني",placeholder:"البحث بالبريد الإلكتروني",value:""},role:{type:"select",label:"الدور",placeholder:"جميع الأدوار",options:[{value:"admin",label:"مدير"},{value:"vendor",label:"بائع"},{value:"driver",label:"سائق"},{value:"customer",label:"زبون"}],value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"active",label:"نشط"},{value:"inactive",label:"غير نشط"},{value:"blocked",label:"محظور"}],value:""}},{filters:N,filterData:S,handleFilterChange:P}=Bn(_),O=async z=>{if(z.preventDefault(),x.password!==x.confirm_password){$.error("كلمة المرور غير متطابقة");return}try{if(r(!0),p){const V={name:x.name,email:x.email,role:x.role,status:x.status,updated_at:new Date().toISOString()};if(x.password){const{data:q,error:I}=await te.rpc("hash_password",{password:x.password});if(I)throw I;V.password_hash=q}const{error:C}=await te.from("custom_users").update(V).eq("id",p.id);if(C)throw C;$.success("تم تحديث المستخدم بنجاح")}else{const{data:V,error:C}=await te.rpc("add_custom_user",{p_username:x.username,p_password:x.password,p_name:x.name,p_email:x.email,p_phone:x.phone||"",p_role:x.role});if(C)throw C;$.success("تم إضافة المستخدم بنجاح")}w(),l(!1),f(null),g({username:"",password:"",name:"",email:"",role:"customer",confirm_password:""})}catch(V){console.error("Error saving user:",V),$.error(p?"فشل في تحديث المستخدم":"فشل في إضافة المستخدم")}finally{r(!1)}},A=z=>{if(z.preventDefault(),!p){$.error("لم يتم تحديد المستخدم");return}if(v.password!==v.confirm_password){$.error("كلمة المرور غير متطابقة");return}R(p.id,v.password)},R=async(z,V)=>{try{r(!0);const{data:C,error:q}=await te.rpc("hash_password",{password:V});if(q)throw q;const{error:I}=await te.from("custom_users").update({password_hash:C,updated_at:new Date().toISOString()}).eq("id",z);if(I)throw I;$.success("تم تحديث كلمة المرور بنجاح"),u(!1),f(null),b({password:"",confirm_password:""})}catch(C){console.error("Error updating password:",C),$.error("فشل في تحديث كلمة المرور")}finally{r(!1)}},T=async(z,V)=>{try{r(!0);const{error:C}=await te.from("custom_users").update({status:V,updated_at:new Date().toISOString()}).eq("id",z);if(C)throw C;e(t.map(q=>q.id===z?{...q,status:V}:q)),$.success("تم تحديث حالة المستخدم بنجاح")}catch(C){console.error("Error updating user status:",C),$.error("فشل في تحديث حالة المستخدم")}finally{r(!1)}},Y=async z=>{if(window.confirm("هل أنت متأكد من حذف هذا المستخدم؟"))try{r(!0);const{error:V}=await te.from("custom_users").delete().eq("id",z);if(V)throw V;e(t.filter(C=>C.id!==z)),$.success("تم حذف المستخدم بنجاح")}catch(V){console.error("Error deleting user:",V),$.error("فشل في حذف المستخدم")}finally{r(!1)}},D=z=>{switch(z){case"admin":return"مدير";case"vendor":return"بائع";case"driver":return"سائق";case"customer":return"زبون";default:return z}},U=z=>{switch(z){case"admin":return"bg-purple-100 text-purple-800";case"vendor":return"bg-blue-100 text-blue-800";case"driver":return"bg-green-100 text-green-800";case"customer":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},ee=z=>{switch(z){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-yellow-100 text-yellow-800";case"blocked":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},G=S(t);return n&&t.length===0?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:s}),i.jsx("button",{onClick:w,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"إدارة المستخدمين"}),i.jsx("button",{onClick:()=>{f(null),g({username:"",password:"",name:"",email:"",role:"customer",confirm_password:""}),l(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة مستخدم جديد"})]}),i.jsx(zn,{filters:N,onFilterChange:P}),i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"اسم المستخدم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الاسم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"البريد الإلكتروني"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"رقم الهاتف"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الدور"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"تاريخ الإنشاء"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:G.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:"لا يوجد مستخدمين متطابقين مع معايير البحث"})}):G.map(z=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:z.username}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:z.name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:z.email}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:z.phone}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${U(z.role)}`,children:D(z.role)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("select",{value:z.status,onChange:V=>T(z.id,V.target.value),className:`px-2 py-1 rounded-full text-xs ${ee(z.status)}`,children:[i.jsx("option",{value:"active",children:"نشط"}),i.jsx("option",{value:"inactive",children:"غير نشط"}),i.jsx("option",{value:"blocked",children:"محظور"})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(z.created_at).toLocaleDateString("ar-SA")}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[i.jsx("button",{onClick:()=>{f(z),g({username:z.username,password:"",name:z.name,email:z.email||"",phone:z.phone||"",role:z.role,status:z.status}),l(!0)},className:"text-blue-600 hover:text-blue-800 ml-4",children:"تعديل"}),i.jsx("button",{onClick:()=>{f(z),b({password:"",confirm_password:""}),u(!0)},className:"text-yellow-600 hover:text-yellow-800 ml-4",children:"كلمة المرور"}),i.jsx("button",{onClick:()=>Y(z.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},z.id))})]})})}),i.jsx(_e,{open:o,onClose:()=>{l(!1),f(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:p?"تعديل مستخدم":"إضافة مستخدم جديد"}),i.jsxs("form",{onSubmit:O,className:"space-y-4",children:[!p&&i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم المستخدم ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:x.username,onChange:z=>g({...x,username:z.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[p?"كلمة المرور الجديدة":"كلمة المرور"," ",!p&&i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"password",value:x.password,onChange:z=>g({...x,password:z.target.value}),className:"w-full border rounded-md px-3 py-2",required:!p,placeholder:p?"اتركه فارغًا للاحتفاظ بكلمة المرور الحالية":""})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["تأكيد كلمة المرور ",!p&&i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"password",value:x.confirm_password,onChange:z=>g({...x,confirm_password:z.target.value}),className:"w-full border rounded-md px-3 py-2",required:!p||x.password!=="",placeholder:p?"اتركه فارغًا للاحتفاظ بكلمة المرور الحالية":""})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الاسم ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:x.name,onChange:z=>g({...x,name:z.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),i.jsx("input",{type:"email",value:x.email,onChange:z=>g({...x,email:z.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم الهاتف"}),i.jsx("input",{type:"tel",value:x.phone,onChange:z=>g({...x,phone:z.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الدور ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:x.role,onChange:z=>g({...x,role:z.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"admin",children:"مدير"}),i.jsx("option",{value:"vendor",children:"بائع"}),i.jsx("option",{value:"driver",children:"سائق"}),i.jsx("option",{value:"customer",children:"زبون"})]})]}),p&&i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الحالة ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:x.status,onChange:z=>g({...x,status:z.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"active",children:"نشط"}),i.jsx("option",{value:"inactive",children:"غير نشط"}),i.jsx("option",{value:"blocked",children:"محظور"})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{l(!1),f(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:n,children:n?"جاري الحفظ...":p?"تحديث":"إضافة"})]})]})]})]})}),i.jsx(_e,{open:d,onClose:()=>{u(!1),f(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:"تغيير كلمة المرور"}),i.jsxs("form",{onSubmit:A,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"كلمة المرور الجديدة"}),i.jsx("input",{type:"password",value:v.password,onChange:z=>b({...v,password:z.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تأكيد كلمة المرور"}),i.jsx("input",{type:"password",value:v.confirm_password,onChange:z=>b({...v,confirm_password:z.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{u(!1),f(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"تحديث كلمة المرور"})]})]})]})]})})]})}var pk={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(pn,function(){var n=1e3,r=6e4,s=36e5,a="millisecond",o="second",l="minute",d="hour",u="day",p="week",f="month",x="quarter",g="year",v="date",b="Invalid Date",w=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,N={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(z){var V=["th","st","nd","rd"],C=z%100;return"["+z+(V[(C-20)%10]||V[C]||V[0])+"]"}},S=function(z,V,C){var q=String(z);return!q||q.length>=V?z:""+Array(V+1-q.length).join(C)+z},P={s:S,z:function(z){var V=-z.utcOffset(),C=Math.abs(V),q=Math.floor(C/60),I=C%60;return(V<=0?"+":"-")+S(q,2,"0")+":"+S(I,2,"0")},m:function z(V,C){if(V.date()<C.date())return-z(C,V);var q=12*(C.year()-V.year())+(C.month()-V.month()),I=V.clone().add(q,f),X=C-I<0,E=V.clone().add(q+(X?-1:1),f);return+(-(q+(C-I)/(X?I-E:E-I))||0)},a:function(z){return z<0?Math.ceil(z)||0:Math.floor(z)},p:function(z){return{M:f,y:g,w:p,d:u,D:v,h:d,m:l,s:o,ms:a,Q:x}[z]||String(z||"").toLowerCase().replace(/s$/,"")},u:function(z){return z===void 0}},O="en",A={};A[O]=N;var R="$isDayjsObject",T=function(z){return z instanceof ee||!(!z||!z[R])},Y=function z(V,C,q){var I;if(!V)return O;if(typeof V=="string"){var X=V.toLowerCase();A[X]&&(I=X),C&&(A[X]=C,I=X);var E=V.split("-");if(!I&&E.length>1)return z(E[0])}else{var K=V.name;A[K]=V,I=K}return!q&&I&&(O=I),I||!q&&O},D=function(z,V){if(T(z))return z.clone();var C=typeof V=="object"?V:{};return C.date=z,C.args=arguments,new ee(C)},U=P;U.l=Y,U.i=T,U.w=function(z,V){return D(z,{locale:V.$L,utc:V.$u,x:V.$x,$offset:V.$offset})};var ee=function(){function z(C){this.$L=Y(C.locale,null,!0),this.parse(C),this.$x=this.$x||C.x||{},this[R]=!0}var V=z.prototype;return V.parse=function(C){this.$d=function(q){var I=q.date,X=q.utc;if(I===null)return new Date(NaN);if(U.u(I))return new Date;if(I instanceof Date)return new Date(I);if(typeof I=="string"&&!/Z$/i.test(I)){var E=I.match(w);if(E){var K=E[2]-1||0,re=(E[7]||"0").substring(0,3);return X?new Date(Date.UTC(E[1],K,E[3]||1,E[4]||0,E[5]||0,E[6]||0,re)):new Date(E[1],K,E[3]||1,E[4]||0,E[5]||0,E[6]||0,re)}}return new Date(I)}(C),this.init()},V.init=function(){var C=this.$d;this.$y=C.getFullYear(),this.$M=C.getMonth(),this.$D=C.getDate(),this.$W=C.getDay(),this.$H=C.getHours(),this.$m=C.getMinutes(),this.$s=C.getSeconds(),this.$ms=C.getMilliseconds()},V.$utils=function(){return U},V.isValid=function(){return this.$d.toString()!==b},V.isSame=function(C,q){var I=D(C);return this.startOf(q)<=I&&I<=this.endOf(q)},V.isAfter=function(C,q){return D(C)<this.startOf(q)},V.isBefore=function(C,q){return this.endOf(q)<D(C)},V.$g=function(C,q,I){return U.u(C)?this[q]:this.set(I,C)},V.unix=function(){return Math.floor(this.valueOf()/1e3)},V.valueOf=function(){return this.$d.getTime()},V.startOf=function(C,q){var I=this,X=!!U.u(q)||q,E=U.p(C),K=function(W,ae){var he=U.w(I.$u?Date.UTC(I.$y,ae,W):new Date(I.$y,ae,W),I);return X?he:he.endOf(u)},re=function(W,ae){return U.w(I.toDate()[W].apply(I.toDate("s"),(X?[0,0,0,0]:[23,59,59,999]).slice(ae)),I)},Q=this.$W,se=this.$M,oe=this.$D,ie="set"+(this.$u?"UTC":"");switch(E){case g:return X?K(1,0):K(31,11);case f:return X?K(1,se):K(0,se+1);case p:var ge=this.$locale().weekStart||0,ve=(Q<ge?Q+7:Q)-ge;return K(X?oe-ve:oe+(6-ve),se);case u:case v:return re(ie+"Hours",0);case d:return re(ie+"Minutes",1);case l:return re(ie+"Seconds",2);case o:return re(ie+"Milliseconds",3);default:return this.clone()}},V.endOf=function(C){return this.startOf(C,!1)},V.$set=function(C,q){var I,X=U.p(C),E="set"+(this.$u?"UTC":""),K=(I={},I[u]=E+"Date",I[v]=E+"Date",I[f]=E+"Month",I[g]=E+"FullYear",I[d]=E+"Hours",I[l]=E+"Minutes",I[o]=E+"Seconds",I[a]=E+"Milliseconds",I)[X],re=X===u?this.$D+(q-this.$W):q;if(X===f||X===g){var Q=this.clone().set(v,1);Q.$d[K](re),Q.init(),this.$d=Q.set(v,Math.min(this.$D,Q.daysInMonth())).$d}else K&&this.$d[K](re);return this.init(),this},V.set=function(C,q){return this.clone().$set(C,q)},V.get=function(C){return this[U.p(C)]()},V.add=function(C,q){var I,X=this;C=Number(C);var E=U.p(q),K=function(se){var oe=D(X);return U.w(oe.date(oe.date()+Math.round(se*C)),X)};if(E===f)return this.set(f,this.$M+C);if(E===g)return this.set(g,this.$y+C);if(E===u)return K(1);if(E===p)return K(7);var re=(I={},I[l]=r,I[d]=s,I[o]=n,I)[E]||1,Q=this.$d.getTime()+C*re;return U.w(Q,this)},V.subtract=function(C,q){return this.add(-1*C,q)},V.format=function(C){var q=this,I=this.$locale();if(!this.isValid())return I.invalidDate||b;var X=C||"YYYY-MM-DDTHH:mm:ssZ",E=U.z(this),K=this.$H,re=this.$m,Q=this.$M,se=I.weekdays,oe=I.months,ie=I.meridiem,ge=function(ae,he,ke,Ce){return ae&&(ae[he]||ae(q,X))||ke[he].slice(0,Ce)},ve=function(ae){return U.s(K%12||12,ae,"0")},W=ie||function(ae,he,ke){var Ce=ae<12?"AM":"PM";return ke?Ce.toLowerCase():Ce};return X.replace(_,function(ae,he){return he||function(ke){switch(ke){case"YY":return String(q.$y).slice(-2);case"YYYY":return U.s(q.$y,4,"0");case"M":return Q+1;case"MM":return U.s(Q+1,2,"0");case"MMM":return ge(I.monthsShort,Q,oe,3);case"MMMM":return ge(oe,Q);case"D":return q.$D;case"DD":return U.s(q.$D,2,"0");case"d":return String(q.$W);case"dd":return ge(I.weekdaysMin,q.$W,se,2);case"ddd":return ge(I.weekdaysShort,q.$W,se,3);case"dddd":return se[q.$W];case"H":return String(K);case"HH":return U.s(K,2,"0");case"h":return ve(1);case"hh":return ve(2);case"a":return W(K,re,!0);case"A":return W(K,re,!1);case"m":return String(re);case"mm":return U.s(re,2,"0");case"s":return String(q.$s);case"ss":return U.s(q.$s,2,"0");case"SSS":return U.s(q.$ms,3,"0");case"Z":return E}return null}(ae)||E.replace(":","")})},V.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},V.diff=function(C,q,I){var X,E=this,K=U.p(q),re=D(C),Q=(re.utcOffset()-this.utcOffset())*r,se=this-re,oe=function(){return U.m(E,re)};switch(K){case g:X=oe()/12;break;case f:X=oe();break;case x:X=oe()/3;break;case p:X=(se-Q)/6048e5;break;case u:X=(se-Q)/864e5;break;case d:X=se/s;break;case l:X=se/r;break;case o:X=se/n;break;default:X=se}return I?X:U.a(X)},V.daysInMonth=function(){return this.endOf(f).$D},V.$locale=function(){return A[this.$L]},V.locale=function(C,q){if(!C)return this.$L;var I=this.clone(),X=Y(C,q,!0);return X&&(I.$L=X),I},V.clone=function(){return U.w(this.$d,this)},V.toDate=function(){return new Date(this.valueOf())},V.toJSON=function(){return this.isValid()?this.toISOString():null},V.toISOString=function(){return this.$d.toISOString()},V.toString=function(){return this.$d.toUTCString()},z}(),G=ee.prototype;return D.prototype=G,[["$ms",a],["$s",o],["$m",l],["$H",d],["$W",u],["$M",f],["$y",g],["$D",v]].forEach(function(z){G[z[1]]=function(V){return this.$g(V,z[0],z[1])}}),D.extend=function(z,V){return z.$i||(z(V,ee,D),z.$i=!0),D},D.locale=Y,D.isDayjs=T,D.unix=function(z){return D(1e3*z)},D.en=A[O],D.Ls=A,D.p={},D})})(pk);var fk=pk.exports;const mk=oi(fk);var $F={exports:{}};(function(t,e){(function(n,r){t.exports=r(fk)})(pn,function(n){function r(u){return u&&typeof u=="object"&&"default"in u?u:{default:u}}var s=r(n),a="يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),o={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},l={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},d={name:"ar",weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),months:a,monthsShort:a,weekStart:6,meridiem:function(u){return u>12?"م":"ص"},relativeTime:{future:"بعد %s",past:"منذ %s",s:"ثانية واحدة",m:"دقيقة واحدة",mm:"%d دقائق",h:"ساعة واحدة",hh:"%d ساعات",d:"يوم واحد",dd:"%d أيام",M:"شهر واحد",MM:"%d أشهر",y:"عام واحد",yy:"%d أعوام"},preparse:function(u){return u.replace(/[١٢٣٤٥٦٧٨٩٠]/g,function(p){return l[p]}).replace(/،/g,",")},postformat:function(u){return u.replace(/\d/g,function(p){return o[p]}).replace(/,/g,"،")},ordinal:function(u){return u},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"}};return s.default.locale(d,null,!0),d})})($F);mk.locale("ar");const zF=t=>{if(!t||t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return`${parseFloat((t/Math.pow(e,r)).toFixed(2))} ${n[r]}`},BF=t=>t?mk(t).format("D MMMM YYYY"):"",j_=t=>{const e=["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الآخرة","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة"];return t>=1&&t<=12?e[t-1]:""};function UF({media:t,onClose:e,onDelete:n,onUpdate:r}){const[s,a]=j.useState(!1),[o,l]=j.useState({alt_text:t.alt_text||"",title:t.title||"",description:t.description||""}),d=u=>{u.preventDefault(),r(t.id,o),a(!1)};return t?i.jsxs("div",{className:"bg-white p-6 rounded-lg",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"تفاصيل الملف"}),i.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden",children:t.type==="image"?i.jsx("img",{src:t.url,alt:t.alt_text||t.name,className:"w-full h-full object-contain",onError:u=>{u.target.onerror=null,u.target.src="data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22600%22%20height%3D%22400%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Crect%20width%3D%22600%22%20height%3D%22400%22%20fill%3D%22%23e2e8f0%22%3E%3C%2Frect%3E%3Ctext%20x%3D%22300%22%20y%3D%22200%22%20font-size%3D%2220%22%20text-anchor%3D%22middle%22%20alignment-baseline%3D%22middle%22%20font-family%3D%22Arial%2C%20sans-serif%22%20fill%3D%22%2364748b%22%3EImage%20Not%20Found%3C%2Ftext%3E%3C%2Fsvg%3E"}}):t.type==="video"?i.jsx("video",{src:t.url,controls:!0,className:"w-full h-full",onError:u=>{u.target.onerror=null;const p=u.target.parentNode;p&&(p.innerHTML='<div class="w-full h-full flex items-center justify-center bg-gray-200 text-gray-500">فشل تحميل الفيديو</div>')}}):t.type==="audio"?i.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gray-100 p-4",children:[i.jsx("svg",{className:"w-16 h-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})}),i.jsx("audio",{src:t.url,controls:!0,className:"w-full"})]}):i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:i.jsx("svg",{className:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),s?i.jsxs("form",{onSubmit:d,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"النص البديل"}),i.jsx("input",{type:"text",value:o.alt_text,onChange:u=>l({...o,alt_text:u.target.value}),className:"w-full border rounded-md px-3 py-2",placeholder:"وصف الصورة للقراء الشاشة"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"العنوان"}),i.jsx("input",{type:"text",value:o.title,onChange:u=>l({...o,title:u.target.value}),className:"w-full border rounded-md px-3 py-2",placeholder:"عنوان الملف"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الوصف"}),i.jsx("textarea",{value:o.description,onChange:u=>l({...o,description:u.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3",placeholder:"وصف الملف"})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"حفظ"})]})]}):i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"اسم الملف"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.original_filename||t.filename||t.name})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"نوع الملف"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.type==="image"?"صورة":t.type==="video"?"فيديو":t.type==="audio"?"صوت":"مستند"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"حجم الملف"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:zF(t.file_size||t.size)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"المجلد"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.bucket||"عام"})]}),t.width&&t.height&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الأبعاد"}),i.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[t.width,"×",t.height]})]}),t.duration&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"المدة"}),i.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[t.duration," ثانية"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"تاريخ الرفع"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:BF(t.created_at||t.uploaded_at)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"عدد الاستخدامات"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.usage_count||0})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"النص البديل"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.alt_text||"لا يوجد نص بديل"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"العنوان"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.title||"لا يوجد عنوان"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الوصف"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.description||"لا يوجد وصف"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الرابط"}),i.jsx("p",{className:"mt-1 text-sm text-blue-600 truncate",children:i.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",children:t.url})})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[!s&&i.jsx("button",{onClick:()=>a(!0),className:"px-4 py-2 bg-gray-100 text-gray-800 rounded hover:bg-gray-200",children:"تعديل"}),i.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إغلاق"}),i.jsx("button",{onClick:()=>n(t.id),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"حذف"})]})]})]}):null}function HF(){const[t,e]=j.useState([]),[n,r]=j.useState(!0),[s,a]=j.useState(null),[o,l]=j.useState("grid"),[d,u]=j.useState(!1),[p,f]=j.useState(!1),[x,g]=j.useState(null),[v,b]=j.useState(null),[w,_]=j.useState("general"),[N,S]=j.useState(""),[P,O]=j.useState(1),[A,R]=j.useState(0),[T,Y]=j.useState(!1),D=20;j.useEffect(()=>{U()},[P,N]);const U=async()=>{try{r(!0);const Q=(P-1)*D,se=Q+D-1;let oe=te.from("media_files").select("*",{count:"exact"});N&&(oe=oe.or(`filename.ilike.%${N}%,original_filename.ilike.%${N}%,alt_text.ilike.%${N}%,title.ilike.%${N}%`));const{data:ie,error:ge,count:ve}=await oe.order("created_at",{ascending:!1}).range(Q,se);if(ge)throw ge;const W=ie.map(ae=>{const{publicUrl:he}=te.storage.from(ae.bucket).getPublicUrl(ae.file_path);return{...ae,url:he,type:ae.mime_type.startsWith("image/")?"image":ae.mime_type.startsWith("video/")?"video":ae.mime_type.startsWith("audio/")?"audio":"document"}});e(W),R(ve||0)}catch(Q){console.error("Error fetching media:",Q),a("فشل في تحميل ملفات الوسائط"),e([{id:1,name:"product-image-1.jpg",filename:"product-image-1.jpg",original_filename:"product-image-1.jpg",type:"image",file_size:1024*1024*2,url:"https://images.unsplash.com/photo-1514432324607-a09d9b4aefdd?q=80&w=200&auto=format&fit=crop",bucket:"products",created_at:"2025-04-15T10:30:00Z",width:1200,height:800,usage_count:3},{id:2,name:"banner-1.jpg",filename:"banner-1.jpg",original_filename:"banner-1.jpg",type:"image",file_size:1024*1024*3,url:"https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?q=80&w=200&auto=format&fit=crop",bucket:"vendors",created_at:"2025-04-10T14:20:00Z",width:1920,height:600,usage_count:1},{id:3,name:"product-video-1.mp4",filename:"product-video-1.mp4",original_filename:"product-video-1.mp4",type:"video",file_size:1024*1024*15,url:"https://example.com/video.mp4",bucket:"products",created_at:"2025-04-05T09:15:00Z",duration:"00:30",usage_count:2},{id:4,name:"logo.png",filename:"logo.png",original_filename:"logo.png",type:"image",file_size:1024*512,url:"https://images.unsplash.com/photo-1559925393-8be0ec4767c8?q=80&w=200&auto=format&fit=crop",bucket:"general",created_at:"2025-03-20T11:45:00Z",width:400,height:400,usage_count:5}])}finally{r(!1)}},ee=Q=>{Q.target.files&&Q.target.files[0]&&b(Q.target.files[0])},G=async()=>{if(!v){$.error("الرجاء اختيار ملف");return}try{Y(!0);const Q=v.name.split(".").pop(),se=`${Math.random().toString(36).substring(2,15)}_${Date.now()}.${Q}`,oe=se,{data:ie,error:ge}=await te.storage.from(w).upload(oe,v,{cacheControl:"3600",upsert:!1});if(ge)throw ge;const{data:{publicUrl:ve}}=te.storage.from(w).getPublicUrl(oe),{data:W,error:ae}=await te.from("media_files").insert([{filename:se,original_filename:v.name,file_path:oe,file_size:v.size,mime_type:v.type,bucket:w,is_public:!0,width:v.type.startsWith("image/")?1200:null,height:v.type.startsWith("image/")?800:null}]).select();if(ae)throw ae;$.success("تم رفع الملف بنجاح");const he={id:W[0].id,name:v.name,filename:se,original_filename:v.name,file_path:oe,mime_type:v.type,type:v.type.startsWith("image/")?"image":v.type.startsWith("video/")?"video":v.type.startsWith("audio/")?"audio":"document",file_size:v.size,url:ve,bucket:w,created_at:new Date().toISOString(),width:v.type.startsWith("image/")?1200:null,height:v.type.startsWith("image/")?800:null,duration:v.type.startsWith("video/")?"00:30":null,usage_count:0};e([he,...t]),u(!1),b(null)}catch(Q){console.error("Error uploading file:",Q),$.error("فشل في رفع الملف")}finally{Y(!1)}},z=async Q=>{if(window.confirm("هل أنت متأكد من حذف هذا الملف؟"))try{r(!0);const{data:se,error:oe}=await te.from("media_files").select("*").eq("id",Q).single();if(oe)throw oe;const{error:ie}=await te.storage.from(se.bucket).remove([se.file_path]);ie&&console.error("Error deleting from storage:",ie);const{error:ge}=await te.from("media_files").delete().eq("id",Q);if(ge)throw ge;e(t.filter(ve=>ve.id!==Q)),x&&x.id===Q&&(f(!1),g(null)),$.success("تم حذف الملف بنجاح")}catch(se){console.error("Error deleting media:",se),$.error("فشل في حذف الملف")}finally{r(!1)}},V=async(Q,se)=>{try{const{data:oe,error:ie}=await te.from("media_files").update({alt_text:se.alt_text,title:se.title,description:se.description,updated_at:new Date().toISOString()}).eq("id",Q).select();if(ie)throw ie;e(t.map(ge=>ge.id===Q?{...ge,...se}:ge)),x&&x.id===Q&&g({...x,...se}),$.success("تم تحديث الملف بنجاح")}catch(oe){console.error("Error updating media:",oe),$.error("فشل في تحديث الملف")}},C=Q=>{if(Q===0)return"0 Bytes";const se=1024,oe=["Bytes","KB","MB","GB"],ie=Math.floor(Math.log(Q)/Math.log(se));return parseFloat((Q/Math.pow(se,ie)).toFixed(2))+" "+oe[ie]},q=Q=>new Date(Q).toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric"}),I=Q=>{Q.preventDefault(),O(1),U()},X=Q=>{O(Q)},E=Math.ceil(A/D),K=()=>i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:t.map(Q=>i.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden group",children:[i.jsxs("div",{className:"relative aspect-square",children:[Q.type==="image"?i.jsx("img",{src:Q.url,alt:Q.name,className:"w-full h-full object-cover",onError:se=>{se.target.onerror=null,se.target.src="https://via.placeholder.com/300x300?text=Image+Not+Found"}}):Q.type==="video"?i.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:i.jsxs("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}):i.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:i.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),i.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center space-x-2",children:[i.jsx("button",{onClick:()=>{g(Q),f(!0)},className:"p-2 bg-white rounded-full hover:bg-gray-100",children:i.jsxs("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),i.jsx("button",{onClick:()=>z(Q.id),className:"p-2 bg-white rounded-full hover:bg-gray-100",children:i.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),Q.type==="image"&&i.jsx("button",{onClick:()=>{navigator.clipboard.writeText(Q.url),$.success("تم نسخ رابط الصورة")},className:"p-2 bg-white rounded-full hover:bg-gray-100",children:i.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})]})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"font-medium text-gray-900 truncate",children:Q.original_filename||Q.filename}),i.jsxs("div",{className:"flex justify-between items-center mt-1",children:[i.jsx("p",{className:"text-sm text-gray-500",children:C(Q.file_size||Q.size)}),i.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded-full",children:Q.bucket})]}),Q.usage_count>0&&i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["استخدم ",Q.usage_count," مرة"]})]})]},Q.id))}),re=()=>i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الملف"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"النوع"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحجم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المجلد"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الاستخدامات"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"تاريخ الرفع"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(Q=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:Q.type==="image"?i.jsx("img",{src:Q.url,alt:Q.name,className:"h-10 w-10 rounded object-cover",onError:se=>{se.target.onerror=null,se.target.src="https://via.placeholder.com/40?text=Error"}}):Q.type==="video"?i.jsx("div",{className:"h-10 w-10 rounded bg-gray-200 flex items-center justify-center text-gray-500",children:i.jsxs("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}):i.jsx("div",{className:"h-10 w-10 rounded bg-gray-200 flex items-center justify-center text-gray-500",children:i.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),i.jsxs("div",{className:"mr-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:Q.original_filename||Q.filename}),i.jsxs("div",{className:"text-sm text-gray-500",children:[Q.width&&Q.height&&`${Q.width}×${Q.height}`,Q.duration&&` • ${Q.duration}`]})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Q.type==="image"?"bg-blue-100 text-blue-800":Q.type==="video"?"bg-purple-100 text-purple-800":Q.type==="audio"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:Q.type==="image"?"صورة":Q.type==="video"?"فيديو":Q.type==="audio"?"صوت":"مستند"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C(Q.file_size||Q.size)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Q.bucket}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Q.usage_count||0}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:q(Q.created_at||Q.uploaded_at)}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[i.jsx("button",{onClick:()=>{g(Q),f(!0)},className:"text-blue-600 hover:text-blue-900 ml-4",children:"عرض"}),i.jsx("button",{onClick:()=>z(Q.id),className:"text-red-600 hover:text-red-900",children:"حذف"})]})]},Q.id))})]})})});return n&&t.length===0?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:s}),i.jsx("button",{onClick:U,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"إدارة الوسائط"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>l("grid"),className:`px-3 py-1 rounded ${o==="grid"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض شبكي"}),i.jsx("button",{onClick:()=>l("table"),className:`px-3 py-1 rounded ${o==="table"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض جدول"})]}),i.jsx("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"رفع ملف جديد"})]})]}),i.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:i.jsxs("form",{onSubmit:I,className:"flex items-stretch gap-2",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx("input",{type:"text",value:N,onChange:Q=>S(Q.target.value),className:"w-full border rounded-lg px-3 py-2 pr-10",placeholder:"البحث عن الملفات..."}),i.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:i.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})})]}),i.jsx("div",{children:i.jsxs("select",{value:w,onChange:Q=>_(Q.target.value),className:"border rounded-lg px-3 py-2",children:[i.jsx("option",{value:It.GENERAL,children:"عام"}),i.jsx("option",{value:It.PRODUCTS,children:"المنتجات"}),i.jsx("option",{value:It.VENDORS,children:"البائعين"}),i.jsx("option",{value:It.PROFILES,children:"الملفات الشخصية"}),i.jsx("option",{value:It.ADVERTISEMENTS,children:"الإعلانات"})]})}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"بحث"})]})}),n?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:s}),i.jsx("button",{onClick:U,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):t.length===0?i.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md text-center",children:[i.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"لا توجد وسائط"}),i.jsx("p",{className:"text-gray-500 mb-4",children:"لم يتم العثور على أي وسائط. بدء بالرفع للاستفادة من مكتبة الوسائط."}),i.jsx("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"رفع ملف جديد"})]}):i.jsxs(i.Fragment,{children:[o==="grid"?K():re(),E>1&&i.jsx("div",{className:"flex justify-center mt-6",children:i.jsxs("nav",{className:"inline-flex bg-white rounded-md shadow",children:[i.jsx("button",{onClick:()=>X(P-1),disabled:P===1,className:`px-3 py-2 rounded-l-md border border-gray-300 ${P===1?"opacity-50 cursor-not-allowed":"hover:bg-gray-50"}`,children:"السابق"}),[...Array(E).keys()].map(Q=>i.jsx("button",{onClick:()=>X(Q+1),className:`px-3 py-2 border-t border-b border-gray-300 ${P===Q+1?"bg-blue-50 text-blue-600 font-bold":"hover:bg-gray-50"}`,children:Q+1},Q+1)),i.jsx("button",{onClick:()=>X(P+1),disabled:P===E,className:`px-3 py-2 rounded-r-md border border-gray-300 ${P===E?"opacity-50 cursor-not-allowed":"hover:bg-gray-50"}`,children:"التالي"})]})})]}),d&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx("div",{className:"fixed inset-0 bg-black opacity-30",onClick:()=>u(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx("h2",{className:"text-2xl font-bold mb-6",children:"رفع ملف جديد"}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المجلد"}),i.jsxs("select",{value:w,onChange:Q=>_(Q.target.value),className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:It.GENERAL,children:"عام"}),i.jsx("option",{value:It.PRODUCTS,children:"المنتجات"}),i.jsx("option",{value:It.VENDORS,children:"البائعين"}),i.jsx("option",{value:It.PROFILES,children:"الملفات الشخصية"}),i.jsx("option",{value:It.ADVERTISEMENTS,children:"الإعلانات"})]})]}),i.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-blue-500 transition-colors",children:[i.jsx("input",{type:"file",onChange:ee,className:"hidden",id:"file-upload"}),i.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[i.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:i.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),i.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[i.jsx("p",{children:"اسحب وأفلت الملف هنا، أو"}),i.jsx("p",{className:"text-blue-600",children:"اضغط للاختيار"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, GIF, PDF, MP4 حتى 10 ميجابايت"})]})]}),v&&i.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("svg",{className:"h-5 w-5 text-gray-400 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:v.name}),i.jsx("p",{className:"text-xs text-gray-500",children:C(v.size)})]})]}),i.jsx("button",{onClick:()=>b(null),className:"text-red-600 hover:text-red-800",children:"حذف"})]})}),i.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[i.jsx("button",{onClick:()=>{u(!1),b(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800 ml-2",children:"إلغاء"}),i.jsx("button",{onClick:G,disabled:!v||T,className:`px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 ${!v||T?"opacity-50 cursor-not-allowed":""}`,children:T?"جاري الرفع...":"رفع"})]})]})]})}),p&&x&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx("div",{className:"fixed inset-0 bg-black opacity-30",onClick:()=>{f(!1),g(null)}}),i.jsx("div",{className:"relative bg-white rounded-lg p-8 max-w-4xl w-full mx-4",children:i.jsx(UF,{media:x,onClose:()=>{f(!1),g(null)},onDelete:z,onUpdate:V})})]})})]})}const WF=async()=>{try{const{data:t,error:e}=await te.from("vendor_wallets").select(`
        *,
        vendor:vendor_id (
          id,
          store_name,
          status,
          user_id
        )
      `);if(e)throw e;return t||[]}catch(t){throw console.error("Error fetching vendor wallets:",t),t}},YF=async(t,e,n="شحن رصيد")=>{try{const{data:r,error:s}=await te.rpc("charge_vendor_wallet",{p_vendor_id:t,p_amount:e,p_description:n});if(s)throw s;return r}catch(r){throw console.error("Error charging vendor wallet:",r),r}},gk=async()=>{try{const{data:t,error:e}=await te.from("app_settings").select("settings").single();if(e)throw e;return t.settings.payment||{}}catch(t){throw console.error("Error fetching payment settings:",t),t}},xk=async t=>{try{const{data:e,error:n}=await te.from("app_settings").select("settings").single();if(n)throw n;const r={...e.settings,payment:t},{error:s}=await te.from("app_settings").update({settings:r}).eq("id",e.id);if(s)throw s;return!0}catch(e){throw console.error("Error updating payment settings:",e),e}};function VF(){const[t,e]=j.useState({total:0,pending:0}),[n,r]=j.useState([]),[s,a]=j.useState([]),[o,l]=j.useState(!0),[d,u]=j.useState(null),[p,f]=j.useState(!1),[x,g]=j.useState(""),[v,b]=j.useState(null),[w,_]=j.useState(!1),N={name:{type:"text",label:"اسم المتجر",placeholder:"البحث باسم المتجر",value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"active",label:"نشط"},{value:"inactive",label:"غير نشط"}],value:""},wallet_enabled:{type:"select",label:"المحفظة",placeholder:"الكل",options:[{value:"true",label:"مفعلة"},{value:"false",label:"غير مفعلة"}],value:""}},{filters:S,filterData:P,handleFilterChange:O}=Bn(N),A=j.useCallback(async()=>{try{l(!0),u(null);const D=await WF(),U=D.reduce((z,V)=>z+(V.balance||0),0),ee=D.reduce((z,V)=>z+(V.pending_balance||0),0);e({total:U,pending:ee});const G=D.map(z=>{var V,C;return{id:z.vendor_id,name:((V=z.vendor)==null?void 0:V.store_name)||"متجر بدون اسم",balance:z.balance||0,wallet_enabled:!0,auto_charge:z.auto_charge||!1,total_orders:z.total_orders||0,total_sales:z.total_earnings||0,status:((C=z.vendor)==null?void 0:C.status)||"inactive"}});a(G);try{const{data:z,error:V}=await te.from("wallet_transactions").select("*").order("created_at",{ascending:!1}).limit(10);if(V)throw V;r(z||[])}catch(z){console.error("Error fetching transactions:",z),r([])}}catch(D){console.error("Error fetching wallet data:",D),u("فشل في تحميل بيانات المحفظة. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل بيانات المحفظة")}finally{l(!1)}},[]);j.useEffect(()=>{A()},[A]);const R=async()=>{if(!v||!x||x<=0){$.error("الرجاء اختيار المتجر وإدخال المبلغ");return}try{_(!0),await YF(v.id,parseFloat(x),`شحن رصيد بواسطة المدير: ${x} شيكل`),$.success(`تم شحن ${x} شيكل بنجاح لحساب ${v.name}`),f(!1),g(""),b(null),A()}catch(D){console.error("Error charging wallet:",D),$.error("فشل في عملية الشحن")}finally{_(!1)}},T=D=>{switch(D.type){case"credit":return{color:"text-green-600",prefix:"+",text:D.payment_type==="cash"?"إيداع نقدي":D.payment_type==="admin_charge"?"شحن بواسطة المدير":"إيداع محفظة"};case"debit":return{color:"text-red-600",prefix:"-",text:D.payment_type==="withdrawal"?"سحب رصيد":D.payment_type==="commission"?"عمولة":"خصم"};default:return{color:"text-gray-600",prefix:"",text:"معاملة"}}},Y=P(s);return o&&s.length===0?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):d?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:d}),i.jsx("button",{onClick:A,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"الرصيد المتاح"}),i.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["₪",t.total-t.pending]}),i.jsxs("p",{className:"text-gray-500 mt-2",children:["الرصيد الكلي: ₪",t.total]}),i.jsx("button",{onClick:()=>f(!0),className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"شحن رصيد"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"الرصيد المعلق"}),i.jsxs("div",{className:"text-3xl font-bold text-orange-600",children:["₪",t.pending]}),i.jsx("p",{className:"text-gray-500 mt-2",children:"سيتم تحويله خلال 24 ساعة"})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"محافظ البائعين"}),i.jsx("button",{onClick:()=>f(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"شحن رصيد"})]}),i.jsx(zn,{filters:S,onFilterChange:O}),i.jsx("div",{className:"overflow-x-auto mt-4",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-right py-3 px-4 bg-gray-50",children:"المتجر"}),i.jsx("th",{className:"text-right py-3 px-4 bg-gray-50",children:"الرصيد"}),i.jsx("th",{className:"text-right py-3 px-4 bg-gray-50",children:"المحفظة"}),i.jsx("th",{className:"text-right py-3 px-4 bg-gray-50",children:"الشحن التلقائي"}),i.jsx("th",{className:"text-right py-3 px-4 bg-gray-50",children:"عدد الطلبات"}),i.jsx("th",{className:"text-right py-3 px-4 bg-gray-50",children:"إجمالي المبيعات"}),i.jsx("th",{className:"text-right py-3 px-4 bg-gray-50",children:"الحالة"}),i.jsx("th",{className:"text-right py-3 px-4 bg-gray-50",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:Y.map(D=>i.jsxs("tr",{children:[i.jsx("td",{className:"py-3 px-4",children:D.name}),i.jsxs("td",{className:"py-3 px-4 font-semibold",children:["₪",D.balance]}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${D.wallet_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:D.wallet_enabled?"مفعلة":"غير مفعلة"})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${D.auto_charge?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:D.auto_charge?"مفعل":"غير مفعل"})}),i.jsx("td",{className:"py-3 px-4",children:D.total_orders}),i.jsxs("td",{className:"py-3 px-4",children:["₪",D.total_sales]}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${D.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:D.status==="active"?"نشط":"غير نشط"})}),i.jsxs("td",{className:"py-3 px-4",children:[i.jsx("button",{onClick:()=>{b(D),f(!0)},className:"text-blue-600 hover:text-blue-800 ml-3",children:"شحن رصيد"}),i.jsx("button",{onClick:()=>{},className:"text-gray-600 hover:text-gray-800",children:"السجل"})]})]},D.id))})]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"آخر المعاملات"}),i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-right py-2",children:"التاريخ"}),i.jsx("th",{className:"text-right py-2",children:"النوع"}),i.jsx("th",{className:"text-right py-2",children:"المبلغ"}),i.jsx("th",{className:"text-right py-2",children:"الحالة"})]})}),i.jsx("tbody",{children:n.map(D=>{const U=T(D);return i.jsxs("tr",{children:[i.jsx("td",{className:"py-2",children:new Date(D.created_at).toLocaleDateString("ar-SA")}),i.jsx("td",{className:"py-2",children:U.text}),i.jsxs("td",{className:`py-2 ${U.color}`,children:[U.prefix,"₪",Math.abs(D.amount)]}),i.jsx("td",{className:"py-2",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${D.status==="completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:D.status==="completed"?"مكتمل":"معلق"})})]},D.id)})})]})]}),i.jsx(_e,{open:p,onClose:()=>{f(!1),b(null),g("")},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:"شحن رصيد"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اختر المتجر"}),i.jsxs("select",{value:(v==null?void 0:v.id)||"",onChange:D=>{const U=s.find(ee=>ee.id===D.target.value);b(U)},className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"",children:"اختر المتجر"}),s.map(D=>i.jsxs("option",{value:D.id,children:[D.name," (رصيد: ₪",D.balance,")"]},D.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المبلغ (₪)"}),i.jsx("input",{type:"number",value:x,onChange:D=>g(D.target.value),className:"w-full border rounded-md px-3 py-2",min:"1",step:"0.01",placeholder:"أدخل المبلغ"})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{onClick:()=>{f(!1),b(null),g("")},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{onClick:R,disabled:w,className:`px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 ${w?"opacity-70 cursor-not-allowed":""}`,children:w?"جاري الشحن...":"شحن الرصيد"})]})]})]})]})})]})}function qF(){const[t,e]=j.useState(!1),[n,r]=j.useState({deliveryCommission:15,autoDeductFromDriver:!0,autoChargeVendor:!0,wallet:{enabled:!0,name:"توصيل محفظة (الدفع المسبق)",description:"عند تفعيل هذا الخيار، يتم التعامل مع الطلبات المدفوعة مسبقًا (عبر المحفظة أو الدفع الإلكتروني)",steps:["يُعتبر التوصيل في هذه الحالة مدفوعًا مسبقًا","يتم شحن محفظة البائع بالكامل بقيمة الطلب + التوصيل","يتم خصم نفس القيمة من محفظة السائق تلقائيًا","السائق يستلم من الزبون فقط أجرة التوصيل يدًا بيد"],note:"✅ هذا النظام مناسب لتطبيقات الدفع المسبق والطلبات التي تُدفع أونلاين"},traditional:{enabled:!0,name:"المحفظة التقليدية (الدفع عند الاستلام)",description:"في هذا النظام، يتم تقسيم المبلغ مباشرة عند التسليم",steps:["الزبون يدفع كامل المبلغ (الطلب + التوصيل) للسائق","يتم تحويل قيمة الطلب إلى محفظة البائع","ويتم إضافة قيمة التوصيل إلى محفظة السائق"],note:"✅ هذا الخيار مناسب للطلبات التي يتم دفعها نقدًا عند التسليم"}});j.useEffect(()=>{(async()=>{try{e(!0);const l=await gk();l&&l.wallet&&r(l.wallet)}catch(l){console.error("Error loading wallet settings:",l),$.error("فشل في تحميل إعدادات المحفظة")}finally{e(!1)}})()},[]);const s=()=>{try{e(!0);const o={...n};xk(o),$.success("تم حفظ إعدادات المحفظة بنجاح")}catch(o){console.error("Error saving wallet settings:",o),$.error("فشل في حفظ إعدادات المحفظة")}finally{e(!1)}},a=({type:o,method:l})=>i.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-lg shadow-md p-6 border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`p-2 rounded-full ${o==="wallet"?"bg-blue-100 text-blue-600":"bg-green-100 text-green-600"}`,children:o==="wallet"?"💳":"💰"}),i.jsx("h3",{className:"text-xl font-bold",children:l.name})]}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:l.enabled,onChange:d=>r({...n,[o]:{...l,enabled:d.target.checked}}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-100",children:i.jsx("p",{className:"text-gray-600",children:l.description})}),i.jsxs("div",{children:[i.jsxs("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[i.jsx("span",{className:"text-blue-600",children:"📝"}),"خطوات العمل"]}),i.jsxs("div",{className:"space-y-2",children:[l.steps.map((d,u)=>i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:d,onChange:p=>{const f=[...l.steps];f[u]=p.target.value,r({...n,[o]:{...l,steps:f}})},className:"flex-1 border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"}),i.jsx("button",{onClick:()=>{const p=l.steps.filter((f,x)=>x!==u);r({...n,[o]:{...l,steps:p}})},className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:"✕"})]},u)),i.jsxs("button",{onClick:()=>{const d=[...l.steps,""];r({...n,[o]:{...l,steps:d}})},className:"text-blue-600 hover:text-blue-800 text-sm flex items-center gap-1 px-3 py-2 rounded-lg hover:bg-blue-50 transition-colors",children:[i.jsx("span",{children:"+"}),"إضافة خطوة"]})]})]}),i.jsx("div",{className:`p-4 rounded-lg ${o==="wallet"?"bg-blue-50 text-blue-800":"bg-green-50 text-green-800"}`,children:i.jsx("p",{children:l.note})})]})]});return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:"⚙️"}),i.jsx("h2",{className:"text-2xl font-bold",children:"إعدادات المحفظة"})]}),i.jsxs("button",{onClick:s,disabled:t,className:`bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 ${t?"opacity-70 cursor-not-allowed":""}`,children:[i.jsx("span",{children:"💾"}),t?"جاري الحفظ...":"حفظ التغييرات"]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-lg shadow-md p-6 border border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-full",children:"💰"}),i.jsx("h3",{className:"text-xl font-bold",children:"إعدادات العمولة والخصومات"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-100",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نسبة عمولة التوصيل (في الدفع المسبق)"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"number",value:n.deliveryCommission,onChange:o=>r({...n,deliveryCommission:Number(o.target.value)}),className:"w-32 border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",min:"0",max:"100"}),i.jsx("span",{className:"text-gray-600",children:"%"})]})]}),i.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-100 space-y-3",children:[i.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg transition-colors cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:n.autoDeductFromDriver,onChange:o=>r({...n,autoDeductFromDriver:o.target.checked}),className:"rounded text-blue-600 focus:ring-blue-500 w-5 h-5"}),i.jsx("span",{children:"خصم تلقائي من السائق (الدفع المسبق)"})]}),i.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg transition-colors cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:n.autoChargeVendor,onChange:o=>r({...n,autoChargeVendor:o.target.checked}),className:"rounded text-blue-600 focus:ring-blue-500 w-5 h-5"}),i.jsx("span",{children:"شحن محفظة البائع تلقائيًا"})]})]}),i.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-lg",children:[i.jsxs("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[i.jsx("span",{children:"🧪"}),"مثال توضيحي"]}),i.jsx("p",{className:"text-gray-600 mb-4",children:"الطلب: 70 شيكل (60 للمنتج + 10 توصيل)"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-blue-600 bg-white px-4 py-2 rounded-lg shadow-sm",children:"🔹 محفظة البائع = +70 شيكل"}),i.jsx("p",{className:"text-red-600 bg-white px-4 py-2 rounded-lg shadow-sm",children:"🔹 محفظة السائق = -70 شيكل"}),i.jsx("p",{className:"text-green-600 bg-white px-4 py-2 rounded-lg shadow-sm",children:"🔹 السائق يستلم فقط 10 شيكل من الزبون مباشرة"})]})]})]})]}),i.jsx(a,{type:"wallet",method:n.wallet}),i.jsx(a,{type:"traditional",method:n.traditional})]})}function ZF(){const[t]=j.useState([{id:1,title:"طلب جديد",message:"تم استلام طلب جديد من متجر كوفي",time:"10:30",read:!1},{id:2,title:"اكتمال طلب",message:"تم اكتمال الطلب رقم #123",time:"09:45",read:!0},{id:3,title:"تسجيل سائق",message:"سائق جديد بحاجة للموافقة",time:"09:00",read:!1}]);return i.jsx("div",{className:"bg-white rounded-lg shadow",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"الإشعارات"}),i.jsx("div",{className:"space-y-4",children:t.map(e=>i.jsx("div",{className:`p-4 rounded-lg border ${e.read?"bg-gray-50":"bg-blue-50 border-blue-200"}`,children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:e.title}),i.jsx("p",{className:"text-gray-600 mt-1",children:e.message})]}),i.jsx("span",{className:"text-sm text-gray-500",children:e.time})]})},e.id))})]})})}const KF=Z.lazy(()=>sa(()=>import("./UserSettings-Md0ZxgO0.js"),[]));function GF(){const{settings:t,saveSettings:e}=ep(),[n,r]=j.useState({store:{...t.store},social:{...t.social},notifications:{...t.notifications},login:{...t.login}}),[s,a]=j.useState("general"),o=async()=>{try{await e(n)&&(document.title=`لوحة تحكم ${n.store.name}`,$.success("تم حفظ الإعدادات بنجاح"))}catch{$.error("فشل في حفظ الإعدادات")}},l=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"معلومات المتجر"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم المتجر"}),i.jsx("input",{type:"text",value:n.store.name,onChange:f=>r({...n,store:{...n.store,name:f.target.value}}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),i.jsx("input",{type:"email",value:n.store.email,onChange:f=>r({...n,store:{...n.store,email:f.target.value}}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم الهاتف"}),i.jsx("input",{type:"tel",value:n.store.phone,onChange:f=>r({...n,store:{...n.store,phone:f.target.value}}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"العملة"}),i.jsxs("select",{value:n.store.currency,onChange:f=>r({...n,store:{...n.store,currency:f.target.value}}),className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"ILS",children:"₪ شيكل"}),i.jsx("option",{value:"USD",children:"$ دولار"}),i.jsx("option",{value:"JOD",children:"د.أ دينار"})]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"العنوان"}),i.jsx("input",{type:"text",value:n.store.address,onChange:f=>r({...n,store:{...n.store,address:f.target.value}}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"وصف المتجر"}),i.jsx("textarea",{value:n.store.description,onChange:f=>r({...n,store:{...n.store,description:f.target.value}}),rows:"3",className:"w-full border rounded-md px-3 py-2"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"روابط التواصل الاجتماعي"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"فيسبوك"}),i.jsx("input",{type:"url",value:n.social.facebook,onChange:f=>r({...n,social:{...n.social,facebook:f.target.value}}),className:"w-full border rounded-md px-3 py-2",placeholder:"https://facebook.com/..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تويتر"}),i.jsx("input",{type:"url",value:n.social.twitter,onChange:f=>r({...n,social:{...n.social,twitter:f.target.value}}),className:"w-full border rounded-md px-3 py-2",placeholder:"https://twitter.com/..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"انستغرام"}),i.jsx("input",{type:"url",value:n.social.instagram,onChange:f=>r({...n,social:{...n.social,instagram:f.target.value}}),className:"w-full border rounded-md px-3 py-2",placeholder:"https://instagram.com/..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"واتساب"}),i.jsx("input",{type:"tel",value:n.social.whatsapp,onChange:f=>r({...n,social:{...n.social,whatsapp:f.target.value}}),className:"w-full border rounded-md px-3 py-2",placeholder:"رقم الواتساب"})]})]})]})]}),d=()=>i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"إعدادات الإشعارات"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("label",{className:"flex items-center space-x-3",children:[i.jsx("input",{type:"checkbox",checked:n.notifications.email,onChange:f=>r({...n,notifications:{...n.notifications,email:f.target.checked}}),className:"rounded text-blue-600 focus:ring-blue-500"}),i.jsx("span",{children:"إشعارات البريد الإلكتروني"})]}),i.jsxs("label",{className:"flex items-center space-x-3",children:[i.jsx("input",{type:"checkbox",checked:n.notifications.sms,onChange:f=>r({...n,notifications:{...n.notifications,sms:f.target.checked}}),className:"rounded text-blue-600 focus:ring-blue-500"}),i.jsx("span",{children:"إشعارات الرسائل النصية"})]}),i.jsxs("label",{className:"flex items-center space-x-3",children:[i.jsx("input",{type:"checkbox",checked:n.notifications.push,onChange:f=>r({...n,notifications:{...n.notifications,push:f.target.checked}}),className:"rounded text-blue-600 focus:ring-blue-500"}),i.jsx("span",{children:"إشعارات التطبيق"})]})]})]}),u=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"إعدادات صفحة تسجيل الدخول"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رابط شعار صفحة تسجيل الدخول"}),i.jsx("input",{type:"url",value:n.login.logo,onChange:f=>r({...n,login:{...n.login,logo:f.target.value}}),className:"w-full border rounded-md px-3 py-2",placeholder:"https://example.com/logo.png"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رابط خلفية صفحة تسجيل الدخول"}),i.jsx("input",{type:"url",value:n.login.background,onChange:f=>r({...n,login:{...n.login,background:f.target.value}}),className:"w-full border rounded-md px-3 py-2",placeholder:"https://example.com/background.jpg"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"معاينة صفحة تسجيل الدخول"}),i.jsx("div",{className:"border rounded-lg overflow-hidden",children:i.jsx("div",{className:"relative",style:{background:n.login.background?`url(${n.login.background}) center/cover no-repeat`:"linear-gradient(135deg, #1e293b 0%, #0f172a 100%)",padding:"2rem",minHeight:"400px"},children:i.jsx("div",{className:"relative z-10 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white bg-opacity-95 backdrop-blur-sm p-8 rounded-lg shadow-2xl w-full max-w-md border border-gray-200",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"flex justify-center mb-4",children:n.login.logo?i.jsx("img",{src:n.login.logo,alt:"Logo",className:"h-20 w-20 rounded-lg shadow-lg"}):i.jsx("div",{className:"h-20 w-20 rounded-lg shadow-lg bg-blue-600 text-white flex items-center justify-center text-3xl",children:"🛒"})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"تسجيل الدخول"}),i.jsxs("p",{className:"text-gray-600 mt-2",children:["مرحباً بك في نظام ",n.store.name]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"البريد الإلكتروني"}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"email",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-yellow-500 focus:border-yellow-500 shadow-sm",placeholder:"أدخل البريد الإلكتروني",disabled:!0})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"كلمة المرور"}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"password",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-yellow-500 focus:border-yellow-500 shadow-sm",placeholder:"أدخل كلمة المرور",disabled:!0})})]}),i.jsx("div",{children:i.jsx("button",{className:"w-full bg-gradient-to-r from-yellow-500 to-yellow-600 text-slate-900 py-2 rounded-md hover:from-yellow-600 hover:to-yellow-700 transition-colors shadow-md font-bold opacity-70 cursor-not-allowed",disabled:!0,children:"تسجيل الدخول"})})]})]})})})})]})]}),p=()=>i.jsx("div",{id:"userSettings",children:i.jsx(j.Suspense,{fallback:i.jsx("div",{children:"جاري التحميل..."}),children:i.jsx(KF,{})})});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"الإعدادات"}),i.jsx("button",{onClick:o,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"حفظ التغييرات"})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[i.jsx("div",{className:"border-b",children:i.jsxs("nav",{className:"flex gap-4 px-6","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>a("general"),className:`py-4 px-4 text-sm font-medium border-b-2 -mb-px ${s==="general"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"إعدادات عامة"}),i.jsx("button",{onClick:()=>a("notifications"),className:`py-4 px-4 text-sm font-medium border-b-2 -mb-px ${s==="notifications"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"إعدادات الإشعارات"}),i.jsx("button",{onClick:()=>a("login"),className:`py-4 px-4 text-sm font-medium border-b-2 -mb-px ${s==="login"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"إعدادات تسجيل الدخول"}),i.jsx("button",{onClick:()=>a("user"),className:`py-4 px-4 text-sm font-medium border-b-2 -mb-px ${s==="user"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"إعدادات المستخدم"})]})}),i.jsxs("div",{className:"p-6",children:[s==="general"&&l(),s==="notifications"&&d(),s==="login"&&u(),s==="user"&&p()]})]})]})}function QF(){const[t,e]=j.useState([]),[n,r]=j.useState([]),[s,a]=j.useState([]),[o,l]=j.useState(!0),[d,u]=j.useState(null),[p,f]=j.useState(!1),[x,g]=j.useState(null),[v,b]=j.useState({title:"",description:"",vendor_id:"",vendor_category_id:"",image_url:"",link:"",start_date:"",end_date:"",status:"draft",type:"banner",position:"home",priority:1});j.useEffect(()=>{w()},[]);const w=async()=>{try{l(!0),u(null);const{data:G,error:z}=await te.from("vendors").select("id, store_name").order("store_name");if(z)throw z;r(G||[]);const{data:V,error:C}=await te.from("vendor_categories_table").select("id, name").order("name");if(C)throw C;a(V||[]);const{data:q,error:I}=await te.from("advertisements").select(`
          *,
          vendor:vendor_id(store_name),
          vendor_category:vendor_category_id(name)
        `).order("created_at",{ascending:!1});if(I)throw I;e(q||[])}catch(G){console.error("Error fetching data:",G),u("فشل في تحميل البيانات. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل البيانات")}finally{l(!1)}},_={title:{type:"text",label:"العنوان",placeholder:"البحث بالعنوان",value:""},type:{type:"select",label:"النوع",placeholder:"جميع الأنواع",options:[{value:"banner",label:"بانر"},{value:"popup",label:"نافذة منبثقة"},{value:"slider",label:"شريحة عرض"}],value:""},position:{type:"select",label:"الموقع",placeholder:"جميع المواقع",options:[{value:"home",label:"الرئيسية"},{value:"category",label:"التصنيفات"},{value:"product",label:"المنتجات"},{value:"checkout",label:"الدفع"},{value:"vendor_category",label:"قسم البائعين"}],value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"draft",label:"مسودة"},{value:"pending",label:"معلق"},{value:"active",label:"نشط"},{value:"expired",label:"منتهي"}],value:""}},{filters:N,filterData:S,handleFilterChange:P}=Bn(_),O=async G=>{if(G.preventDefault(),!v.title||!v.image_url){$.error("الرجاء تعبئة جميع الحقول المطلوبة");return}try{if(v.position==="vendor_category"&&!v.vendor_category_id){$.error("الرجاء اختيار قسم البائعين");return}if(x){const{data:z,error:V}=await te.from("advertisements").update({title:v.title,description:v.description,vendor_id:v.vendor_id||null,vendor_category_id:v.position==="vendor_category"?v.vendor_category_id:null,image_url:v.image_url,link:v.link,start_date:v.start_date,end_date:v.end_date,status:v.status,type:v.type,position:v.position,priority:parseInt(v.priority)}).eq("id",x.id).select();if(V)throw V;e(C=>C.map(q=>q.id===x.id?{...z[0],vendor:n.find(I=>I.id===z[0].vendor_id)||null,vendor_category:s.find(I=>I.id===z[0].vendor_category_id)||null}:q)),$.success("تم تحديث الإعلان بنجاح"),f(!1),g(null)}else{const{data:z,error:V}=await te.from("advertisements").insert([{title:v.title,description:v.description,vendor_id:v.vendor_id||null,vendor_category_id:v.position==="vendor_category"?v.vendor_category_id:null,image_url:v.image_url,link:v.link,start_date:v.start_date,end_date:v.end_date,status:v.status,type:v.type,position:v.position,priority:parseInt(v.priority)}]).select();if(V)throw V;e(C=>[{...z[0],vendor:n.find(q=>q.id===z[0].vendor_id)||null,vendor_category:s.find(q=>q.id===z[0].vendor_category_id)||null},...C]),$.success("تم إضافة الإعلان بنجاح"),f(!1)}b({title:"",description:"",vendor_id:"",vendor_category_id:"",image_url:"",link:"",start_date:"",end_date:"",status:"draft",type:"banner",position:"home",priority:1})}catch(z){console.error("Error saving advertisement:",z),$.error("فشل في حفظ الإعلان")}},A=async G=>{if(window.confirm("هل أنت متأكد من حذف هذا الإعلان؟"))try{const{error:z}=await te.from("advertisements").delete().eq("id",G);if(z)throw z;e(t.filter(V=>V.id!==G)),$.success("تم حذف الإعلان بنجاح")}catch(z){console.error("Error deleting advertisement:",z),$.error("فشل في حذف الإعلان")}},R=G=>{switch(G){case"banner":return"بانر";case"popup":return"نافذة منبثقة";case"slider":return"شريحة عرض";default:return G}},T=G=>{switch(G){case"home":return"الرئيسية";case"category":return"التصنيفات";case"product":return"المنتجات";case"checkout":return"الدفع";case"vendor_category":return"قسم البائعين";default:return G}},Y=G=>{switch(G){case"draft":return"مسودة";case"pending":return"معلق";case"active":return"نشط";case"expired":return"منتهي";default:return G}},D=G=>{switch(G){case"draft":return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800";case"active":return"bg-green-100 text-green-800";case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},U=({preview:G})=>{G&&b({...v,image_url:G})},ee=S(t);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"الإعلانات"}),i.jsx("button",{onClick:()=>{g(null),b({title:"",description:"",vendor_id:"",vendor_category_id:"",image_url:"",link:"",start_date:"",end_date:"",status:"draft",type:"banner",position:"home",priority:1}),f(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة إعلان جديد"})]}),i.jsx(zn,{filters:N,onFilterChange:P}),o?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):d?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:d}),i.jsx("button",{onClick:w,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):ee.length===0?i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-100 text-blue-600 rounded-full mx-auto flex items-center justify-center mb-4",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"لا توجد إعلانات"}),i.jsx("p",{className:"text-gray-500 mb-6",children:"لم يتم العثور على أي إعلانات متطابقة مع معايير البحث المحددة."}),i.jsx("button",{onClick:()=>{g(null),b({title:"",description:"",vendor_id:"",vendor_category_id:"",image_url:"",link:"",start_date:"",end_date:"",status:"draft",type:"banner",position:"home",priority:1}),f(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة أول إعلان"})]}):i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الصورة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العنوان"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المتجر"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"قسم البائعين"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"النوع"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الموقع"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الفترة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإحصائيات"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ee.map(G=>{var z,V;return i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"h-16 w-24 bg-gray-200 rounded overflow-hidden",children:G.image_url?i.jsx("img",{src:G.image_url,alt:G.title,className:"h-full w-full object-cover",onError:C=>{C.target.onerror=null,C.target.src="data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22100%22%20height%3D%2280%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Crect%20width%3D%22100%22%20height%3D%2280%22%20fill%3D%22%23e2e8f0%22%3E%3C%2Frect%3E%3Ctext%20x%3D%2250%22%20y%3D%2240%22%20font-size%3D%2210%22%20text-anchor%3D%22middle%22%20alignment-baseline%3D%22middle%22%20font-family%3D%22Arial%2C%20sans-serif%22%20fill%3D%22%2364748b%22%3E%D8%A5%D8%B9%D9%84%D8%A7%D9%86%3C%2Ftext%3E%3C%2Fsvg%3E"}}):i.jsx("div",{className:"h-full w-full flex items-center justify-center text-gray-400",children:"لا توجد صورة"})})}),i.jsxs("td",{className:"px-6 py-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:G.title}),G.description&&i.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:G.description})]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm text-gray-900",children:((z=G.vendor)==null?void 0:z.store_name)||"-"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm text-gray-900",children:((V=G.vendor_category)==null?void 0:V.name)||"-"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm text-gray-900",children:R(G.type)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm text-gray-900",children:T(G.position)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"text-sm text-gray-900",children:[new Date(G.start_date).toLocaleDateString("ar-SA"),i.jsx("br",{}),new Date(G.end_date).toLocaleDateString("ar-SA")]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${D(G.status)}`,children:Y(G.status)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.jsxs("div",{className:"flex flex-col",children:[i.jsxs("span",{children:["المشاهدات: ",G.views||0]}),i.jsxs("span",{children:["النقرات: ",G.clicks||0]}),i.jsx("span",{className:"text-xs",children:G.views>0?`${(G.clicks/G.views*100).toFixed(1)}% معدل النقر`:"0% معدل النقر"})]})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[i.jsx("button",{onClick:()=>{g(G),b({title:G.title,description:G.description||"",vendor_id:G.vendor_id||"",vendor_category_id:G.vendor_category_id||"",image_url:G.image_url,link:G.link||"",start_date:G.start_date||"",end_date:G.end_date||"",status:G.status,type:G.type,position:G.position,priority:G.priority}),f(!0)},className:"text-blue-600 hover:text-blue-800 ml-4",children:"تعديل"}),i.jsx("button",{onClick:()=>A(G.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},G.id)})})]})})}),i.jsx(_e,{open:p,onClose:()=>f(!1),className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-6 w-full max-w-2xl mx-4",children:[i.jsx(_e.Title,{className:"text-2xl font-bold mb-4",children:x?"تعديل الإعلان":"إضافة إعلان جديد"}),i.jsxs("form",{onSubmit:O,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["العنوان ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:v.title,onChange:G=>b({...v,title:G.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الوصف"}),i.jsx("textarea",{value:v.description,onChange:G=>b({...v,description:G.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المتجر"}),i.jsxs("select",{value:v.vendor_id,onChange:G=>b({...v,vendor_id:G.target.value}),className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"",children:"اختر المتجر"}),n.map(G=>i.jsx("option",{value:G.id,children:G.store_name},G.id))]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["الموقع ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:v.position,onChange:G=>b({...v,position:G.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"home",children:"الرئيسية"}),i.jsx("option",{value:"category",children:"التصنيفات"}),i.jsx("option",{value:"product",children:"المنتجات"}),i.jsx("option",{value:"checkout",children:"الدفع"}),i.jsx("option",{value:"vendor_category",children:"قسم البائعين"})]})]}),v.position==="vendor_category"&&i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["قسم البائعين ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:v.vendor_category_id,onChange:G=>b({...v,vendor_category_id:G.target.value}),className:"w-full border rounded-md px-3 py-2",required:v.position==="vendor_category",children:[i.jsx("option",{value:"",children:"اختر قسم البائعين"}),s.map(G=>i.jsx("option",{value:G.id,children:G.name},G.id))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["صورة الإعلان ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx(xs,{type:"image",preview:v.image_url,onUpload:U,storeInSupabase:!0,bucket:It.ADVERTISEMENTS})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رابط الإعلان"}),i.jsx("input",{type:"text",value:v.link,onChange:G=>b({...v,link:G.target.value}),className:"w-full border rounded-md px-3 py-2",placeholder:"https://example.com"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["تاريخ البداية ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"date",value:v.start_date,onChange:G=>b({...v,start_date:G.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["تاريخ النهاية ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"date",value:v.end_date,onChange:G=>b({...v,end_date:G.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["نوع الإعلان ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:v.type,onChange:G=>b({...v,type:G.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"banner",children:"بانر"}),i.jsx("option",{value:"popup",children:"نافذة منبثقة"}),i.jsx("option",{value:"slider",children:"شريحة عرض"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["الأولوية ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:v.priority,onChange:G=>b({...v,priority:parseInt(G.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"1",required:!0}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"الإعلانات ذات الأرقام الأقل تظهر أولاً"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["الحالة ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:v.status,onChange:G=>b({...v,status:G.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"draft",children:"مسودة"}),i.jsx("option",{value:"pending",children:"معلق"}),i.jsx("option",{value:"active",children:"نشط"}),i.jsx("option",{value:"expired",children:"منتهي"})]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:x?"تحديث الإعلان":"إضافة الإعلان"})]})]})]})]})})]})}function XF(){var ve;const[t,e]=j.useState({points_value:.1,min_points_redeem:100,points_expiry_days:365,points_per_currency:1,min_order_points:10}),[n,r]=j.useState([{id:1,name:"برونزي",icon:"🥉",min_points:0,max_points:999,benefits:["كسب نقاط × 1","خصم 5% على التوصيل"],color:"bg-amber-100 text-amber-800"},{id:2,name:"فضي",icon:"🥈",min_points:1e3,max_points:4999,benefits:["كسب نقاط × 1.5","خصم 10% على التوصيل","أولوية في الدعم"],color:"bg-gray-100 text-gray-800"},{id:3,name:"ذهبي",icon:"🥇",min_points:5e3,max_points:9999,benefits:["كسب نقاط × 2","خصم 15% على التوصيل","أولوية في الدعم","عروض حصرية"],color:"bg-yellow-100 text-yellow-800"},{id:4,name:"بلاتيني",icon:"👑",min_points:1e4,max_points:null,benefits:["كسب نقاط × 3","خصم 20% على التوصيل","أولوية قصوى في الدعم","عروض حصرية","هدية عيد ميلاد"],color:"bg-purple-100 text-purple-800"}]),[s,a]=j.useState([]),[o,l]=j.useState([]),[d,u]=j.useState([]),[p,f]=j.useState([]),[x,g]=j.useState(!0),[v,b]=j.useState(null),[w,_]=j.useState(!1),[N,S]=j.useState(!1),[P,O]=j.useState(!1),[A,R]=j.useState(null),[T,Y]=j.useState(null),[D,U]=j.useState({name:"",description:"",points_cost:"",reward_type:"free_delivery",discount_type:"",discount_value:"",min_order_amount:"",max_discount:"",usage_limit:"",start_date:"",end_date:"",status:"active"}),ee=j.useCallback(async()=>{var W;try{g(!0),b(null);const{data:ae,error:he}=await te.from("points_rewards").select("*").order("points_cost",{ascending:!0});if(he)throw he;a(ae||[]);try{const{data:Vt,error:Jt}=await te.rpc("get_customers_with_points");if(Jt)throw Jt;l(Vt||[])}catch(Vt){console.error("Error fetching customers with points:",Vt);const{data:Jt,error:wt}=await te.from("customers").select("id, name, phone, email");if(wt)throw wt;l(Jt||[])}const{data:ke,error:Ce}=await te.from("points_transactions").select(`
          *,
          account:account_id(
            customer:customer_id(name)
          )
        `).order("created_at",{ascending:!1}).limit(10);if(Ce)throw Ce;u(ke||[]);const{data:ce,error:Se}=await te.from("points_redemptions").select(`
          *,
          account:account_id(
            customer:customer_id(name)
          ),
          reward:reward_id(name)
        `).order("created_at",{ascending:!1}).limit(10);if(Se)throw Se;f(ce||[]);const{data:Ve,error:Xe}=await te.from("app_settings").select("settings").single();!Xe&&((W=Ve==null?void 0:Ve.settings)!=null&&W.points)&&e(Ve.settings.points)}catch(ae){console.error("Error fetching data:",ae),b("فشل في تحميل البيانات. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل البيانات")}finally{g(!1)}},[]);j.useEffect(()=>{ee()},[ee]);const G={name:{type:"text",label:"اسم المكافأة",placeholder:"البحث باسم المكافأة",value:""},reward_type:{type:"select",label:"نوع المكافأة",placeholder:"جميع الأنواع",options:[{value:"free_delivery",label:"توصيل مجاني"},{value:"order_discount",label:"خصم على الطلب"},{value:"delivery_discount",label:"خصم على التوصيل"},{value:"product_discount",label:"خصم على منتج"},{value:"gift",label:"هدية"}],value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"active",label:"نشط"},{value:"inactive",label:"غير نشط"}],value:""}},{filters:z,filterData:V,handleFilterChange:C}=Bn(G),q=async()=>{try{g(!0);const{data:W,error:ae}=await te.from("app_settings").select("settings, id").single();if(ae&&ae.code!=="PGRST116")throw ae;let he,ke;if(W){he={...W.settings,points:t},ke=W.id;const{error:Ce}=await te.from("app_settings").update({settings:he}).eq("id",ke);if(Ce)throw Ce}else{he={points:t};const{data:Ce,error:ce}=await te.from("app_settings").insert([{settings:he}]).select();if(ce)throw ce}$.success("تم حفظ الإعدادات بنجاح"),_(!1)}catch(W){console.error("Error saving settings:",W),$.error("فشل في حفظ الإعدادات")}finally{g(!1)}},I=async()=>{try{if(g(!0),!D.name||!D.points_cost||!D.reward_type||!D.start_date||!D.end_date){$.error("الرجاء تعبئة جميع الحقول المطلوبة"),g(!1);return}const W={name:D.name,description:D.description,points_cost:parseInt(D.points_cost),reward_type:D.reward_type,discount_type:D.discount_type||null,discount_value:D.discount_value?parseFloat(D.discount_value):null,min_order_amount:D.min_order_amount?parseFloat(D.min_order_amount):null,max_discount:D.max_discount?parseFloat(D.max_discount):null,usage_limit:D.usage_limit?parseInt(D.usage_limit):null,start_date:D.start_date,end_date:D.end_date,status:D.status};if(A){const{error:ae}=await te.from("points_rewards").update(W).eq("id",A.id);if(ae)throw ae;$.success("تم تحديث المكافأة بنجاح")}else{const{error:ae}=await te.from("points_rewards").insert([W]);if(ae)throw ae;$.success("تم إضافة المكافأة بنجاح")}ee(),S(!1),R(null),U({name:"",description:"",points_cost:"",reward_type:"free_delivery",discount_type:"",discount_value:"",min_order_amount:"",max_discount:"",usage_limit:"",start_date:"",end_date:"",status:"active"})}catch(W){console.error("Error saving reward:",W),$.error("فشل في حفظ المكافأة")}finally{g(!1)}},X=async()=>{try{if(T)r(n.map(W=>W.id===T.id?{...T}:W)),$.success("تم تحديث المستوى بنجاح");else{const W={id:Math.max(...n.map(ae=>ae.id))+1,...T};r([...n,W]),$.success("تم إضافة المستوى بنجاح")}O(!1),Y(null)}catch(W){console.error("Error saving level:",W),$.error("فشل في حفظ المستوى")}},E=async W=>{if(window.confirm("هل أنت متأكد من حذف هذه المكافأة؟"))try{g(!0);const{error:ae}=await te.from("points_rewards").delete().eq("id",W);if(ae)throw ae;$.success("تم حذف المكافأة بنجاح"),ee()}catch(ae){console.error("Error deleting reward:",ae),$.error("فشل في حذف المكافأة")}finally{g(!1)}},K=W=>{switch(W){case"free_delivery":return"توصيل مجاني";case"order_discount":return"خصم على الطلب";case"delivery_discount":return"خصم على التوصيل";case"product_discount":return"خصم على منتج";case"gift":return"هدية";default:return W}},re=W=>W.reward_type==="free_delivery"?"توصيل مجاني":W.discount_type==="percentage"?`${W.discount_value}%`:`₪${W.discount_value}`,Q=W=>{switch(W){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"used":return"bg-blue-100 text-blue-800";case"expired":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},se=W=>{switch(W){case"active":return"نشط";case"inactive":return"غير نشط";case"used":return"مستخدم";case"expired":return"منتهي";default:return W}},oe=W=>{switch(W){case"earn":return"كسب نقاط";case"spend":return"استخدام نقاط";case"expire":return"انتهاء صلاحية";case"adjust":return"تعديل";default:return W}},ie=W=>{switch(W){case"earn":return"text-green-600";case"spend":return"text-red-600";case"expire":return"text-gray-600";case"adjust":return"text-blue-600";default:return"text-gray-600"}},ge=V(s);return x&&s.length===0?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):v?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:v}),i.jsx("button",{onClick:ee,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"إعدادات النقاط"}),i.jsx("button",{onClick:()=>_(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"تعديل الإعدادات"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"قيمة النقطة"}),i.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["₪",t.points_value]})]}),i.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"الحد الأدنى للاستبدال"}),i.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t.min_points_redeem," نقطة"]})]}),i.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"مدة صلاحية النقاط"}),i.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t.points_expiry_days," يوم"]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"مستويات العملاء"}),i.jsx("button",{onClick:()=>{Y(null),O(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة مستوى جديد"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map(W=>i.jsxs("div",{className:`rounded-lg p-6 ${W.color}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-3xl",children:W.icon}),i.jsx("h3",{className:"text-xl font-semibold mt-2",children:W.name})]}),i.jsxs("div",{className:"text-sm",children:[W.min_points.toLocaleString()," - ",W.max_points?W.max_points.toLocaleString():"∞"," نقطة"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-medium",children:"المميزات:"}),i.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm",children:W.benefits.map((ae,he)=>i.jsx("li",{children:ae},he))})]}),i.jsx("div",{className:"flex justify-end mt-4",children:i.jsx("button",{onClick:()=>{Y(W),O(!0)},className:"text-sm hover:underline",children:"تعديل"})})]},W.id))})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("div",{className:"flex justify-between items-center mb-6",children:i.jsx("h2",{className:"text-xl font-semibold",children:"آخر معاملات النقاط"})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العميل"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العملية"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"النقاط"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الوصف"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التاريخ"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"لا توجد معاملات"})}):d.map(W=>{var ae,he;return i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:((he=(ae=W.account)==null?void 0:ae.customer)==null?void 0:he.name)||"غير معروف"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:ie(W.type),children:oe(W.type)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("span",{className:ie(W.type),children:[W.type==="earn"?"+":W.type==="spend"||W.type==="expire"?"-":"",W.amount]})}),i.jsx("td",{className:"px-6 py-4",children:W.description}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(W.created_at).toLocaleString("ar-SA")})]},W.id)})})]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("div",{className:"flex justify-between items-center mb-6",children:i.jsx("h2",{className:"text-xl font-semibold",children:"آخر عمليات استبدال النقاط"})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العميل"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المكافأة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"النقاط"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الرمز"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"تاريخ الانتهاء"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"لا توجد عمليات استبدال"})}):p.map(W=>{var ae,he,ke;return i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:((he=(ae=W.account)==null?void 0:ae.customer)==null?void 0:he.name)||"غير معروف"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:((ke=W.reward)==null?void 0:ke.name)||"غير معروف"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("span",{className:"text-red-600",children:["-",W.points_spent]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:W.code})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Q(W.status)}`,children:se(W.status)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(W.expires_at).toLocaleDateString("ar-SA")})]},W.id)})})]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"المكافآت"}),i.jsx("button",{onClick:()=>{R(null),U({name:"",description:"",points_cost:"",reward_type:"free_delivery",discount_type:"",discount_value:"",min_order_amount:"",max_discount:"",usage_limit:"",start_date:"",end_date:"",status:"active"}),S(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة مكافأة جديدة"})]}),i.jsx(zn,{filters:z,onFilterChange:C}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6",children:ge.length===0?i.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:"لا توجد مكافآت متطابقة مع معايير البحث"}):ge.map(W=>i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg",children:W.name}),i.jsx("p",{className:"text-gray-600 text-sm",children:W.description})]}),i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${W.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:W.status==="active"?"نشط":"غير نشط"})]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"النقاط المطلوبة:"})," ",W.points_cost]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"نوع المكافأة:"})," ",K(W.reward_type)]}),W.discount_value&&i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"قيمة الخصم:"})," ",re(W)]}),W.min_order_amount&&i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"الحد الأدنى للطلب:"})," ₪",W.min_order_amount]}),W.max_discount&&i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"أقصى خصم:"})," ₪",W.max_discount]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"الاستخدام:"})," ",W.used_count||0,"/",W.usage_limit||"∞"]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"الصلاحية:"})," ",new Date(W.start_date).toLocaleDateString("ar-SA")," -"," ",new Date(W.end_date).toLocaleDateString("ar-SA")]})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx("button",{onClick:()=>{R(W),U({name:W.name,description:W.description||"",points_cost:W.points_cost.toString(),reward_type:W.reward_type,discount_type:W.discount_type||"",discount_value:W.discount_value?W.discount_value.toString():"",min_order_amount:W.min_order_amount?W.min_order_amount.toString():"",max_discount:W.max_discount?W.max_discount.toString():"",usage_limit:W.usage_limit?W.usage_limit.toString():"",start_date:W.start_date,end_date:W.end_date,status:W.status}),S(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),i.jsx("button",{onClick:()=>E(W.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},W.id))})]}),i.jsx(_e,{open:w,onClose:()=>_(!1),className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx(_e.Title,{className:"text-2xl font-semibold mb-6",children:"إعدادات النقاط"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"قيمة النقطة (₪)"}),i.jsx("input",{type:"number",step:"0.01",value:t.points_value,onChange:W=>e({...t,points_value:parseFloat(W.target.value)}),className:"w-full p-2 border rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحد الأدنى للاستبدال (نقاط)"}),i.jsx("input",{type:"number",value:t.min_points_redeem,onChange:W=>e({...t,min_points_redeem:parseInt(W.target.value)}),className:"w-full p-2 border rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"مدة صلاحية النقاط (أيام)"}),i.jsx("input",{type:"number",value:t.points_expiry_days,onChange:W=>e({...t,points_expiry_days:parseInt(W.target.value)}),className:"w-full p-2 border rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"النقاط لكل ₪1"}),i.jsx("input",{type:"number",step:"0.01",value:t.points_per_currency,onChange:W=>e({...t,points_per_currency:parseFloat(W.target.value)}),className:"w-full p-2 border rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحد الأدنى للطلب لكسب النقاط (₪)"}),i.jsx("input",{type:"number",step:"0.01",value:t.min_order_points,onChange:W=>e({...t,min_order_points:parseFloat(W.target.value)}),className:"w-full p-2 border rounded-lg"})]})]}),i.jsxs("div",{className:"flex justify-end mt-6 space-x-2",children:[i.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{onClick:q,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",disabled:x,children:x?"جارٍ الحفظ...":"حفظ"})]})]})]})}),i.jsx(_e,{open:N,onClose:()=>S(!1),className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx(_e.Title,{className:"text-2xl font-semibold mb-6",children:A?"تعديل المكافأة":"إضافة مكافأة جديدة"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم المكافأة"}),i.jsx("input",{type:"text",value:D.name,onChange:W=>U({...D,name:W.target.value}),className:"w-full p-2 border rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الوصف"}),i.jsx("textarea",{value:D.description,onChange:W=>U({...D,description:W.target.value}),className:"w-full p-2 border rounded-lg",rows:3})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"النقاط المطلوبة"}),i.jsx("input",{type:"number",value:D.points_cost,onChange:W=>U({...D,points_cost:W.target.value}),className:"w-full p-2 border rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع المكافأة"}),i.jsxs("select",{value:D.reward_type,onChange:W=>U({...D,reward_type:W.target.value}),className:"w-full p-2 border rounded-lg",children:[i.jsx("option",{value:"free_delivery",children:"توصيل مجاني"}),i.jsx("option",{value:"order_discount",children:"خصم على الطلب"}),i.jsx("option",{value:"delivery_discount",children:"خصم على التوصيل"}),i.jsx("option",{value:"product_discount",children:"خصم على منتج"}),i.jsx("option",{value:"gift",children:"هدية"})]})]}),D.reward_type!=="free_delivery"&&D.reward_type!=="gift"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع الخصم"}),i.jsxs("select",{value:D.discount_type,onChange:W=>U({...D,discount_type:W.target.value}),className:"w-full p-2 border rounded-lg",children:[i.jsx("option",{value:"",children:"اختر نوع الخصم"}),i.jsx("option",{value:"percentage",children:"نسبة مئوية"}),i.jsx("option",{value:"fixed",children:"مبلغ ثابت"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"قيمة الخصم"}),i.jsx("input",{type:"number",step:D.discount_type==="percentage"?"1":"0.01",value:D.discount_value,onChange:W=>U({...D,discount_value:W.target.value}),className:"w-full p-2 border rounded-lg",min:"0",step:"0.01"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحد الأدنى للطلب"}),i.jsx("input",{type:"number",step:"0.01",value:D.min_order_amount,onChange:W=>U({...D,min_order_amount:W.target.value}),className:"w-full p-2 border rounded-lg"})]}),D.reward_type!=="free_delivery"&&D.reward_type!=="gift"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"أقصى خصم"}),i.jsx("input",{type:"number",step:"0.01",value:D.max_discount,onChange:W=>U({...D,max_discount:W.target.value}),className:"w-full p-2 border rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"حد الاستخدام"}),i.jsx("input",{type:"number",value:D.usage_limit,onChange:W=>U({...D,usage_limit:W.target.value}),className:"w-full p-2 border rounded-lg",placeholder:"اتركه فارغاً لعدم وجود حد"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ البداية"}),i.jsx("input",{type:"date",value:D.start_date,onChange:W=>U({...D,start_date:W.target.value}),className:"w-full p-2 border rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ الانتهاء"}),i.jsx("input",{type:"date",value:D.end_date,onChange:W=>U({...D,end_date:W.target.value}),className:"w-full p-2 border rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحالة"}),i.jsxs("select",{value:D.status,onChange:W=>U({...D,status:W.target.value}),className:"w-full p-2 border rounded-lg",children:[i.jsx("option",{value:"active",children:"نشط"}),i.jsx("option",{value:"inactive",children:"غير نشط"})]})]})]}),i.jsxs("div",{className:"flex justify-end mt-6 space-x-2",children:[i.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{onClick:I,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",disabled:x,children:x?"جارٍ الحفظ...":"حفظ"})]})]})]})}),i.jsx(_e,{open:P,onClose:()=>O(!1),className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:T?"تعديل المستوى":"إضافة مستوى جديد"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم المستوى"}),i.jsx("input",{type:"text",value:(T==null?void 0:T.name)||"",onChange:W=>Y({...T,name:W.target.value}),className:"w-full p-2 border rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الأيقونة"}),i.jsx("input",{type:"text",value:(T==null?void 0:T.icon)||"",onChange:W=>Y({...T,icon:W.target.value}),className:"w-full p-2 border rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحد الأدنى للنقاط"}),i.jsx("input",{type:"number",value:(T==null?void 0:T.min_points)||"",onChange:W=>Y({...T,min_points:parseInt(W.target.value)}),className:"w-full p-2 border rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحد الأقصى للنقاط"}),i.jsx("input",{type:"number",value:(T==null?void 0:T.max_points)||"",onChange:W=>Y({...T,max_points:parseInt(W.target.value)}),className:"w-full p-2 border rounded-lg",placeholder:"اتركه فارغاً لعدم وجود حد"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المميزات (كل سطر ميزة)"}),i.jsx("textarea",{value:((ve=T==null?void 0:T.benefits)==null?void 0:ve.join(`
`))||"",onChange:W=>Y({...T,benefits:W.target.value.split(`
`)}),className:"w-full p-2 border rounded-lg",rows:5})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"لون الخلفية"}),i.jsxs("select",{value:(T==null?void 0:T.color)||"",onChange:W=>Y({...T,color:W.target.value}),className:"w-full p-2 border rounded-lg",children:[i.jsx("option",{value:"bg-amber-100 text-amber-800",children:"برونزي"}),i.jsx("option",{value:"bg-gray-100 text-gray-800",children:"فضي"}),i.jsx("option",{value:"bg-yellow-100 text-yellow-800",children:"ذهبي"}),i.jsx("option",{value:"bg-purple-100 text-purple-800",children:"بلاتيني"})]})]})]}),i.jsxs("div",{className:"flex justify-end mt-6 space-x-2",children:[i.jsx("button",{onClick:()=>O(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{onClick:X,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",disabled:x,children:x?"جارٍ الحفظ...":"حفظ"})]})]})]})})]})}function JF(){const[t,e]=j.useState([{id:1,name:"مكافأة إحالة المستخدم",description:"احصل على نقاط عند دعوة صديق",type:"user",points_reward:100,points_referrer:50,usage_limit:null,status:"active"},{id:2,name:"مكافأة إحالة المشاهير",description:"برنامج إحالة خاص للمشاهير",type:"influencer",points_reward:200,points_referrer:100,usage_limit:null,status:"active"}]),[n,r]=j.useState([{id:1,user_id:"123",code:"ABC123",type:"user",status:"active",usage_limit:10,used_count:5,points_reward:100,points_referrer:50,expires_at:"2025-12-31"},{id:2,user_id:"456",code:"INF789XYZ",type:"influencer",status:"active",usage_limit:100,used_count:45,points_reward:200,points_referrer:100,expires_at:"2025-12-31"}]),[s,a]=j.useState(!1),[o,l]=j.useState(!1),[d,u]=j.useState(null),[p,f]=j.useState(null),x={code:{type:"text",label:"كود الإحالة",placeholder:"البحث بكود الإحالة",value:""},type:{type:"select",label:"نوع الكود",placeholder:"جميع الأنواع",options:[{value:"user",label:"مستخدم"},{value:"influencer",label:"مشهور"}],value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"active",label:"نشط"},{value:"inactive",label:"غير نشط"}],value:""}},{filters:g,filterData:v,handleFilterChange:b}=Bn(x),w=async()=>{try{$.success(d?"تم تحديث المكافأة بنجاح":"تم إضافة المكافأة بنجاح"),a(!1),u(null)}catch{$.error("فشل في حفظ المكافأة")}},_=async()=>{try{$.success(p?"تم تحديث الكود بنجاح":"تم إضافة الكود بنجاح"),l(!1),f(null)}catch{$.error("فشل في حفظ الكود")}},N=async R=>{if(window.confirm("هل أنت متأكد من حذف هذا الكود؟"))try{$.success("تم حذف الكود بنجاح")}catch{$.error("فشل في حذف الكود")}},S=R=>{switch(R){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},P=R=>{switch(R){case"active":return"نشط";case"inactive":return"غير نشط";default:return R}},O=R=>{switch(R){case"user":return"مستخدم";case"influencer":return"مشهور";default:return R}},A=v(n);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"مكافآت الإحالة"}),i.jsx("button",{onClick:()=>{u(null),a(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة مكافأة جديدة"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(R=>i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg",children:R.name}),i.jsx("p",{className:"text-gray-600 text-sm",children:R.description})]}),i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${S(R.status)}`,children:P(R.status)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"نوع الإحالة:"})," ",O(R.type)]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"نقاط المستخدم الجديد:"})," ",R.points_reward]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"نقاط صاحب الإحالة:"})," ",R.points_referrer]}),R.usage_limit&&i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"الحد الأقصى للاستخدام:"})," ",R.usage_limit]})]}),i.jsx("div",{className:"flex justify-end mt-4",children:i.jsx("button",{onClick:()=>{u(R),a(!0)},className:"text-blue-600 hover:text-blue-800",children:"تعديل"})})]},R.id))})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"أكواد الإحالة"}),i.jsx("button",{onClick:()=>{f(null),l(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إنشاء كود جديد"})]}),i.jsx(zn,{filters:g,onFilterChange:b}),i.jsx("div",{className:"mt-6 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الكود"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"النوع"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الاستخدام"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"النقاط"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"تاريخ الانتهاء"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(R=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:R.code}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:O(R.type)}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[R.used_count,"/",R.usage_limit||"∞"]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{children:["المستخدم: ",R.points_reward]}),i.jsxs("div",{children:["المُحيل: ",R.points_referrer]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.expires_at?new Date(R.expires_at).toLocaleDateString("ar-SA"):"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${S(R.status)}`,children:P(R.status)})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[i.jsx("button",{onClick:()=>{f(R),l(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),i.jsx("button",{onClick:()=>N(R.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},R.id))})]})})]}),i.jsx(_e,{open:s,onClose:()=>{a(!1),u(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:d?"تعديل مكافأة":"إضافة مكافأة جديدة"}),i.jsxs("form",{onSubmit:R=>{R.preventDefault(),w()},className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم المكافأة"}),i.jsx("input",{type:"text",className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),i.jsx("textarea",{className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع الإحالة"}),i.jsxs("select",{className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"user",children:"مستخدم"}),i.jsx("option",{value:"influencer",children:"مشهور"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نقاط المستخدم الجديد"}),i.jsx("input",{type:"number",className:"w-full border rounded-md px-3 py-2",min:"0",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نقاط صاحب الإحالة"}),i.jsx("input",{type:"number",className:"w-full border rounded-md px-3 py-2",min:"0",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأقصى للاستخدام"}),i.jsx("input",{type:"number",className:"w-full border rounded-md px-3 py-2",min:"0",placeholder:"اتركه فارغاً لعدم وجود حد"})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx("button",{type:"button",onClick:()=>{a(!1),u(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:d?"تحديث":"إضافة"})]})]})]})]})}),i.jsx(_e,{open:o,onClose:()=>{l(!1),f(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:p?"تعديل كود":"إنشاء كود جديد"}),i.jsxs("form",{onSubmit:R=>{R.preventDefault(),_()},className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع الكود"}),i.jsxs("select",{className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"user",children:"مستخدم"}),i.jsx("option",{value:"influencer",children:"مشهور"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأقصى للاستخدام"}),i.jsx("input",{type:"number",className:"w-full border rounded-md px-3 py-2",min:"0",placeholder:"اتركه فارغاً لعدم وجود حد"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ الانتهاء"}),i.jsx("input",{type:"date",className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx("button",{type:"button",onClick:()=>{l(!1),f(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:p?"تحديث":"إنشاء"})]})]})]})]})})]})}function e8(){const[t,e]=j.useState([{id:1,code:"WELCOME10",type:"percentage",value:10,min_order:50,max_discount:20,usage_limit:100,used_count:45,start_date:"2025-01-01",end_date:"2025-12-31",status:"active",description:"خصم 10% للطلب الأول"},{id:2,code:"FREEDEL",type:"fixed",value:15,min_order:100,usage_limit:50,used_count:20,start_date:"2025-01-01",end_date:"2025-06-30",status:"active",description:"توصيل مجاني"}]),[n,r]=j.useState(!1),[s,a]=j.useState(null),[o,l]=j.useState({code:"",type:"percentage",value:"",min_order:"",max_discount:"",usage_limit:"",start_date:"",end_date:"",description:""}),d={code:{type:"text",label:"كود الخصم",placeholder:"البحث بكود الخصم",value:""},type:{type:"select",label:"نوع الخصم",placeholder:"جميع الأنواع",options:[{value:"percentage",label:"نسبة مئوية"},{value:"fixed",label:"مبلغ ثابت"}],value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"active",label:"نشط"},{value:"inactive",label:"غير نشط"},{value:"expired",label:"منتهي"}],value:""}},{filters:u,filterData:p,handleFilterChange:f}=Bn(d),x=async _=>{_.preventDefault();try{$.success(s?"تم تحديث الكوبون بنجاح":"تم إضافة الكوبون بنجاح"),r(!1),a(null),l({code:"",type:"percentage",value:"",min_order:"",max_discount:"",usage_limit:"",start_date:"",end_date:"",description:""})}catch{$.error("فشل في حفظ الكوبون")}},g=async _=>{if(window.confirm("هل أنت متأكد من حذف هذا الكوبون؟"))try{$.success("تم حذف الكوبون بنجاح")}catch{$.error("فشل في حذف الكوبون")}},v=_=>{switch(_){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},b=_=>{switch(_){case"active":return"نشط";case"inactive":return"غير نشط";case"expired":return"منتهي";default:return _}},w=p(t);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"كوبونات الخصم"}),i.jsx("button",{onClick:()=>{a(null),r(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة كوبون جديد"})]}),i.jsx(zn,{filters:u,onFilterChange:f}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(_=>i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold",children:_.code}),i.jsx("p",{className:"text-gray-600 text-sm",children:_.description})]}),i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${v(_.status)}`,children:b(_.status)})]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"نوع الخصم:"})," ",_.type==="percentage"?`${_.value}%`:`₪${_.value}`]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"الحد الأدنى للطلب:"})," ₪",_.min_order]}),_.max_discount&&i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"أقصى خصم:"})," ₪",_.max_discount]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"الاستخدام:"})," ",_.used_count,"/",_.usage_limit]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"الصلاحية:"})," ",new Date(_.start_date).toLocaleDateString("ar-SA")," -"," ",new Date(_.end_date).toLocaleDateString("ar-SA")]})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx("button",{onClick:()=>{a(_),l(_),r(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),i.jsx("button",{onClick:()=>g(_.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},_.id))}),i.jsx(_e,{open:n,onClose:()=>{r(!1),a(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:s?"تعديل كوبون":"إضافة كوبون جديد"}),i.jsxs("form",{onSubmit:x,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"كود الخصم"}),i.jsx("input",{type:"text",value:o.code,onChange:_=>l({...o,code:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع الخصم"}),i.jsxs("select",{value:o.type,onChange:_=>l({...o,type:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"percentage",children:"نسبة مئوية"}),i.jsx("option",{value:"fixed",children:"مبلغ ثابت"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:o.type==="percentage"?"نسبة الخصم (%)":"قيمة الخصم (₪)"}),i.jsx("input",{type:"number",value:o.value,onChange:_=>l({...o,value:_.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:o.type==="percentage"?"1":"0.01",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأدنى للطلب (₪)"}),i.jsx("input",{type:"number",value:o.min_order,onChange:_=>l({...o,min_order:_.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01",required:!0})]}),o.type==="percentage"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"أقصى خصم (₪)"}),i.jsx("input",{type:"number",value:o.max_discount,onChange:_=>l({...o,max_discount:_.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأقصى للاستخدام"}),i.jsx("input",{type:"number",value:o.usage_limit,onChange:_=>l({...o,usage_limit:_.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ البداية"}),i.jsx("input",{type:"date",value:o.start_date,onChange:_=>l({...o,start_date:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ النهاية"}),i.jsx("input",{type:"date",value:o.end_date,onChange:_=>l({...o,end_date:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),i.jsx("textarea",{value:o.description,onChange:_=>l({...o,description:_.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx("button",{type:"button",onClick:()=>{r(!1),a(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:s?"تحديث":"إضافة"})]})]})]})]})})]})}function t8(){const[t,e]=j.useState([{id:1,name:"برونزي",description:"المستوى الأساسي للتجار",min_purchase_amount:5e3,discount_percentage:5,min_order_amount:500,benefits:["خصم 5% على جميع المنتجات","دعم أولوية للتجار","تقارير شهرية"],status:"active"},{id:2,name:"فضي",description:"المستوى المتوسط للتجار",min_purchase_amount:1e4,discount_percentage:10,min_order_amount:1e3,benefits:["خصم 10% على جميع المنتجات","دعم أولوية للتجار","تقارير أسبوعية","شحن مجاني للطلبات فوق 2000₪"],status:"active"},{id:3,name:"ذهبي",description:"المستوى المتقدم للتجار",min_purchase_amount:25e3,discount_percentage:15,min_order_amount:2e3,benefits:["خصم 15% على جميع المنتجات","دعم أولوية قصوى","تقارير يومية","شحن مجاني لجميع الطلبات","مدير حساب مخصص"],status:"active"},{id:4,name:"بلاتيني",description:"المستوى الأعلى للتجار",min_purchase_amount:5e4,discount_percentage:20,min_order_amount:5e3,benefits:["خصم 20% على جميع المنتجات","دعم على مدار الساعة","تقارير مخصصة","شحن مجاني وسريع لجميع الطلبات","مدير حساب مخصص","أسعار خاصة للمنتجات الجديدة"],status:"active"}]),[n,r]=j.useState([]),[s,a]=j.useState(!0),[o,l]=j.useState(null),[d,u]=j.useState(!1),[p,f]=j.useState(!1),[x,g]=j.useState(null),[v,b]=j.useState(null),[w,_]=j.useState({company_name:"",tier_id:"",tax_number:"",contact_name:"",contact_phone:"",contact_email:"",billing_address:"",shipping_address:"",status:"pending",notes:""}),[N,S]=j.useState({name:"",description:"",min_purchase_amount:"",discount_percentage:"",min_order_amount:"",benefits:[],status:"active"});j.useEffect(()=>{P()},[]);const P=async()=>{try{a(!0),l(null);const{data:C,error:q}=await te.from("customer_wholesale_tiers").select(`
          customer_id,
          tier_id,
          status,
          approved_at,
          created_at,
          customer:customer_id(*),
          tier:tier_id(*)
        `);if(q)throw q;const I=C.map(K=>{var re,Q,se,oe,ie,ge,ve,W,ae,he,ke,Ce,ce,Se,Ve,Xe,Vt,Jt,wt,Tn;return{id:K.customer_id,company_name:((Q=(re=K.customer)==null?void 0:re.wholesale_info)==null?void 0:Q.company_name)||"شركة بدون اسم",tier_id:K.tier_id,tax_number:((oe=(se=K.customer)==null?void 0:se.wholesale_info)==null?void 0:oe.tax_number)||"",contact_name:(ie=K.customer)==null?void 0:ie.name,contact_phone:(ge=K.customer)==null?void 0:ge.phone,contact_email:((ve=K.customer)==null?void 0:ve.email)||"",total_purchases:((ae=(W=K.customer)==null?void 0:W.wholesale_info)==null?void 0:ae.total_purchases)||0,status:K.status,approval_date:K.approved_at,last_purchase_date:(ke=(he=K.customer)==null?void 0:he.wholesale_info)==null?void 0:ke.last_purchase_date,billing_address:((ce=(Ce=K.customer)==null?void 0:Ce.wholesale_info)==null?void 0:ce.billing_address)||((Se=K.customer)==null?void 0:Se.address)||"",shipping_address:((Xe=(Ve=K.customer)==null?void 0:Ve.wholesale_info)==null?void 0:Xe.shipping_address)||((Vt=K.customer)==null?void 0:Vt.address)||"",notes:((wt=(Jt=K.customer)==null?void 0:Jt.wholesale_info)==null?void 0:wt.notes)||((Tn=K.customer)==null?void 0:Tn.notes)||"",tier:K.tier}});r(I);const{data:X,error:E}=await te.from("wholesale_tiers").select("*").order("min_purchase_amount",{ascending:!0});E?console.error("Error fetching tiers:",E):X&&X.length>0&&e(X)}catch(C){console.error("Error fetching data:",C),l("فشل في تحميل البيانات. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل البيانات")}finally{a(!1)}},O={company_name:{type:"text",label:"اسم الشركة",placeholder:"البحث باسم الشركة",value:""},tier_id:{type:"select",label:"المستوى",placeholder:"جميع المستويات",options:t.map(C=>({value:C.id,label:C.name})),value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"pending",label:"قيد المراجعة"},{value:"approved",label:"معتمد"},{value:"rejected",label:"مرفوض"}],value:""}},{filters:A,filterData:R,handleFilterChange:T}=Bn(O),Y=async C=>{C.preventDefault();try{if(!w.company_name||!w.tier_id||!w.tax_number){$.error("الرجاء تعبئة جميع الحقول المطلوبة");return}if(x){const{error:q}=await te.from("customers").update({name:w.contact_name,phone:w.contact_phone,email:w.contact_email,address:w.shipping_address,notes:w.notes,wholesale_info:{company_name:w.company_name,tax_number:w.tax_number,billing_address:w.billing_address,shipping_address:w.shipping_address},updated_at:new Date().toISOString()}).eq("id",x.id);if(q)throw q;const{error:I}=await te.rpc("convert_to_wholesale_customer",{p_customer_id:x.id,p_tier_id:w.tier_id,p_status:w.status});if(I)throw I;$.success("تم تحديث العميل بنجاح")}else{const{data:q,error:I}=await te.from("customers").insert([{name:w.contact_name,phone:w.contact_phone,email:w.contact_email,address:w.shipping_address,notes:w.notes,wholesale_info:{company_name:w.company_name,tax_number:w.tax_number,billing_address:w.billing_address,shipping_address:w.shipping_address}}]).select();if(I)throw I;const{error:X}=await te.rpc("convert_to_wholesale_customer",{p_customer_id:q[0].id,p_tier_id:w.tier_id,p_status:w.status});if(X)throw X;$.success("تم إضافة العميل بنجاح")}P(),u(!1),g(null),_({company_name:"",tier_id:"",tax_number:"",contact_name:"",contact_phone:"",contact_email:"",billing_address:"",shipping_address:"",status:"pending",notes:""})}catch(q){console.error("Error saving customer:",q),$.error(x?"فشل تحديث العميل":"فشل إضافة العميل")}},D=async C=>{C.preventDefault();try{if(!N.name||!N.min_purchase_amount||!N.discount_percentage){$.error("الرجاء تعبئة جميع الحقول المطلوبة");return}const q={name:N.name,description:N.description,min_purchase_amount:parseFloat(N.min_purchase_amount),discount_percentage:parseFloat(N.discount_percentage),min_order_amount:parseFloat(N.min_order_amount)||0,benefits:N.benefits,status:N.status};if(v){const{error:I}=await te.from("wholesale_tiers").update(q).eq("id",v.id);if(I)throw I;$.success("تم تحديث المستوى بنجاح")}else{const{error:I}=await te.from("wholesale_tiers").insert([q]);if(I)throw I;$.success("تم إضافة المستوى بنجاح")}P(),f(!1),b(null),S({name:"",description:"",min_purchase_amount:"",discount_percentage:"",min_order_amount:"",benefits:[],status:"active"})}catch(q){console.error("Error saving tier:",q),$.error(v?"فشل تحديث المستوى":"فشل إضافة المستوى")}},U=async(C,q)=>{try{const{error:I}=await te.rpc("update_wholesale_customer_status",{p_customer_id:C,p_status:q});if(I)throw I;r(n.map(X=>X.id===C?{...X,status:q,approval_date:q==="approved"?new Date().toISOString():X.approval_date}:X)),$.success("تم تحديث حالة العميل بنجاح")}catch(I){console.error("Error updating customer status:",I),$.error("فشل في تحديث حالة العميل")}},ee=async C=>{if(window.confirm("هل أنت متأكد من حذف هذا العميل؟"))try{const{error:q}=await te.from("customer_wholesale_tiers").delete().eq("customer_id",C);if(q)throw q;const{error:I}=await te.from("customers").update({wholesale_info:null,updated_at:new Date().toISOString()}).eq("id",C);if(I)throw I;r(n.filter(X=>X.id!==C)),$.success("تم حذف العميل بنجاح")}catch(q){console.error("Error deleting customer:",q),$.error("فشل في حذف العميل")}},G=C=>{switch(C){case"approved":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},z=C=>{const q=t.find(I=>I.id===C);switch(q==null?void 0:q.name){case"برونزي":return"bg-amber-100 text-amber-800";case"فضي":return"bg-gray-100 text-gray-800";case"ذهبي":return"bg-yellow-100 text-yellow-800";case"بلاتيني":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},V=R(n);return s?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:o}),i.jsx("button",{onClick:P,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"عملاء الجملة"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{b(null),S({name:"",description:"",min_purchase_amount:"",discount_percentage:"",min_order_amount:"",benefits:[],status:"active"}),f(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة مستوى"}),i.jsx("button",{onClick:()=>{g(null),_({company_name:"",tier_id:"",tax_number:"",contact_name:"",contact_phone:"",contact_email:"",billing_address:"",shipping_address:"",status:"pending",notes:""}),u(!0)},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"إضافة عميل"})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"مستويات العملاء"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:t.map(C=>i.jsxs("div",{className:`rounded-lg p-6 ${z(C.id)}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold",children:C.name}),i.jsx("p",{className:"text-sm mt-1",children:C.description})]}),C.status==="active"?i.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"نشط"}):i.jsx("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded-full",children:"غير نشط"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"الحد الأدنى للمشتريات السنوية"}),i.jsxs("p",{className:"text-lg font-bold",children:["₪",C.min_purchase_amount.toLocaleString()]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"نسبة الخصم"}),i.jsxs("p",{className:"text-lg font-bold",children:[C.discount_percentage,"%"]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"الحد الأدنى للطلب"}),i.jsxs("p",{className:"text-lg font-bold",children:["₪",C.min_order_amount.toLocaleString()]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"المميزات"}),i.jsx("ul",{className:"mt-1 space-y-1",children:C.benefits.map((q,I)=>i.jsxs("li",{className:"text-sm",children:["• ",q]},I))})]})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{onClick:()=>{b(C),S({name:C.name,description:C.description,min_purchase_amount:C.min_purchase_amount,discount_percentage:C.discount_percentage,min_order_amount:C.min_order_amount,benefits:C.benefits,status:C.status}),f(!0)},className:"text-blue-600 hover:text-blue-800",children:"تعديل"})})]},C.id))})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"قائمة العملاء"}),i.jsx(zn,{filters:A,onFilterChange:T}),i.jsx("div",{className:"mt-6 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الشركة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المستوى"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"معلومات الاتصال"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"إجمالي المشتريات"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"آخر طلب"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:V.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"لا يوجد عملاء جملة متطابقين مع معايير البحث"})}):V.map(C=>{var q;return i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:C.company_name}),i.jsxs("div",{className:"text-sm text-gray-500",children:["رقم ضريبي: ",C.tax_number]})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`px-2 py-1 text-sm rounded-full ${z(C.tier_id)}`,children:((q=C.tier)==null?void 0:q.name)||"غير محدد"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{children:C.contact_name}),i.jsx("div",{className:"text-gray-500",children:C.contact_phone}),i.jsx("div",{className:"text-gray-500",children:C.contact_email})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"text-sm",children:i.jsxs("div",{className:"font-medium",children:["₪",C.total_purchases.toLocaleString()]})})}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:C.last_purchase_date?new Date(C.last_purchase_date).toLocaleDateString("ar-SA"):"-"}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("select",{value:C.status,onChange:I=>U(C.id,I.target.value),className:`px-2 py-1 text-sm rounded-full ${G(C.status)}`,children:[i.jsx("option",{value:"pending",children:"قيد المراجعة"}),i.jsx("option",{value:"approved",children:"معتمد"}),i.jsx("option",{value:"rejected",children:"مرفوض"})]})}),i.jsxs("td",{className:"px-6 py-4 text-sm font-medium",children:[i.jsx("button",{onClick:()=>{g(C),_({company_name:C.company_name,tier_id:C.tier_id,tax_number:C.tax_number,contact_name:C.contact_name,contact_phone:C.contact_phone,contact_email:C.contact_email,billing_address:C.billing_address,shipping_address:C.shipping_address,status:C.status,notes:C.notes}),u(!0)},className:"text-blue-600 hover:text-blue-800 ml-4",children:"تعديل"}),i.jsx("button",{onClick:()=>ee(C.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},C.id)})})]})})]}),i.jsx(_e,{open:d,onClose:()=>{u(!1),g(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-2xl w-full mx-4",children:[i.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:x?"تعديل عميل":"إضافة عميل جديد"}),i.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم الشركة ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:w.company_name,onChange:C=>_({...w,company_name:C.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الرقم الضريبي ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:w.tax_number,onChange:C=>_({...w,tax_number:C.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["المستوى ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:w.tier_id,onChange:C=>_({...w,tier_id:C.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"",children:"اختر المستوى"}),t.map(C=>i.jsx("option",{value:C.id,children:C.name},C.id))]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم جهة الاتصال ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:w.contact_name,onChange:C=>_({...w,contact_name:C.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["رقم الهاتف ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"tel",value:w.contact_phone,onChange:C=>_({...w,contact_phone:C.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),i.jsx("input",{type:"email",value:w.contact_email,onChange:C=>_({...w,contact_email:C.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"عنوان الفواتير"}),i.jsx("textarea",{value:w.billing_address,onChange:C=>_({...w,billing_address:C.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"2"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"عنوان الشحن"}),i.jsx("textarea",{value:w.shipping_address,onChange:C=>_({...w,shipping_address:C.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"2"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ملاحظات"}),i.jsx("textarea",{value:w.notes,onChange:C=>_({...w,notes:C.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحالة"}),i.jsxs("select",{value:w.status,onChange:C=>_({...w,status:C.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"pending",children:"قيد المراجعة"}),i.jsx("option",{value:"approved",children:"معتمد"}),i.jsx("option",{value:"rejected",children:"مرفوض"})]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{u(!1),g(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:x?"تحديث":"إضافة"})]})]})]})]})}),i.jsx(_e,{open:p,onClose:()=>{f(!1),b(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-2xl w-full mx-4",children:[i.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:v?"تعديل مستوى":"إضافة مستوى جديد"}),i.jsxs("form",{onSubmit:D,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم المستوى ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:N.name,onChange:C=>S({...N,name:C.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),i.jsx("textarea",{value:N.description,onChange:C=>S({...N,description:C.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"2"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الحد الأدنى للمشتريات السنوية (₪) ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:N.min_purchase_amount,onChange:C=>S({...N,min_purchase_amount:C.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نسبة الخصم (%) ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:N.discount_percentage,onChange:C=>S({...N,discount_percentage:C.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",max:"100",step:"0.01",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الحد الأدنى للطلب (₪) ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:N.min_order_amount,onChange:C=>S({...N,min_order_amount:C.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحالة"}),i.jsxs("select",{value:N.status,onChange:C=>S({...N,status:C.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"active",children:"نشط"}),i.jsx("option",{value:"inactive",children:"غير نشط"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المميزات"}),i.jsxs("div",{className:"space-y-2",children:[N.benefits.map((C,q)=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"text",value:C,onChange:I=>{const X=[...N.benefits];X[q]=I.target.value,S({...N,benefits:X})},className:"flex-1 border rounded-md px-3 py-2"}),i.jsx("button",{type:"button",onClick:()=>{const I=N.benefits.filter((X,E)=>E!==q);S({...N,benefits:I})},className:"text-red-600 hover:text-red-800",children:"حذف"})]},q)),i.jsx("button",{type:"button",onClick:()=>S({...N,benefits:[...N.benefits,""]}),className:"text-blue-600 hover:text-blue-800 text-sm",children:"إضافة ميزة"})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{f(!1),b(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:v?"تحديث":"إضافة"})]})]})]})]})})]})}function n8(){const[t,e]=j.useState(!1),[n,r]=j.useState([]),[s,a]=j.useState({deliveryCommission:15,autoDeductFromDriver:!0,autoChargeVendor:!0,paymentMethods:[],wallet:{enabled:!0,name:"توصيل محفظة (الدفع المسبق)",description:"عند تفعيل هذا الخيار، يتم التعامل مع الطلبات المدفوعة مسبقًا (عبر المحفظة أو الدفع الإلكتروني)",steps:["يُعتبر التوصيل في هذه الحالة مدفوعًا مسبقًا","يتم شحن محفظة البائع بالكامل بقيمة الطلب + التوصيل","يتم خصم نفس القيمة من محفظة السائق تلقائيًا","السائق يستلم من الزبون فقط أجرة التوصيل يدًا بيد"],note:"✅ هذا النظام مناسب لتطبيقات الدفع المسبق والطلبات التي تُدفع أونلاين"},traditional:{enabled:!0,name:"المحفظة التقليدية (الدفع عند الاستلام)",description:"في هذا النظام، يتم تقسيم المبلغ مباشرة عند التسليم",steps:["الزبون يدفع كامل المبلغ (الطلب + التوصيل) للسائق","يتم تحويل قيمة الطلب إلى محفظة البائع","ويتم إضافة قيمة التوصيل إلى محفظة السائق"],note:"✅ هذا الخيار مناسب للطلبات التي يتم دفعها نقدًا عند التسليم"},cash:{enabled:!0,name:"الدفع عند الاستلام",description:"الدفع نقداً عند استلام الطلب",steps:["الزبون يطلب من المتجر","السائق يستلم الطلب من المتجر","السائق يوصل الطلب للزبون","الزبون يدفع المبلغ كاملاً (قيمة الطلب + التوصيل) للسائق"],balanceNotes:["رصيد البائع = 0 (حتى يتم التحصيل)","رصيد السائق = 0 (حتى يتم التحصيل)"],icon:"💰",color:"green"},electronic:{enabled:!0,name:"الدفع الإلكتروني",description:"الدفع المسبق عبر بطاقة الائتمان أو المحفظة الإلكترونية",steps:["الزبون يدفع كامل المبلغ إلكترونياً (قيمة الطلب + التوصيل)","البائع يستلم قيمة الطلب مباشرة","السائق يستلم قيمة التوصيل مباشرة","السائق يوصل الطلب للزبون"],balanceNotes:["رصيد البائع = قيمة الطلب (فوراً)","رصيد السائق = قيمة التوصيل (فوراً)"],icon:"💳",color:"blue"}});j.useEffect(()=>{o(),(async()=>{try{e(!0);const f=await gk();f&&f.wallet&&a(f)}catch(f){console.error("Error loading wallet settings:",f),$.error("فشل في تحميل إعدادات المحفظة")}finally{e(!1)}})()},[]);const o=async()=>{try{const{data:p,error:f}=await te.from("payment_methods").select("*").order("id");if(f)throw f;r(p||[])}catch(p){console.error("Error fetching payment methods:",p),$.error("فشل في تحميل طرق الدفع")}},l=async()=>{try{e(!0);const p={...s};xk(p),$.success("تم حفظ إعدادات المحفظة بنجاح")}catch(p){console.error("Error saving wallet settings:",p),$.error("فشل في حفظ إعدادات المحفظة")}finally{e(!1)}},d=async(p,f)=>{try{e(!0);const{error:x}=await te.from("payment_methods").update({status:f?"active":"inactive"}).eq("id",p);if(x)throw x;r(g=>g.map(v=>v.id===p?{...v,status:f?"active":"inactive"}:v)),$.success(`تم ${f?"تفعيل":"تعطيل"} طريقة الدفع بنجاح`)}catch(x){console.error("Error updating payment method status:",x),$.error("فشل في تحديث حالة طريقة الدفع")}finally{e(!1)}},u=({type:p,method:f})=>{var x,g,v;return i.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-lg shadow-md p-6 border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`p-2 rounded-full ${f.type==="wallet"?"bg-purple-100 text-purple-600":f.type==="electronic"?"bg-blue-100 text-blue-600":"bg-green-100 text-green-600"}`,children:f.icon||(f.type==="wallet"?"👛":f.type==="electronic"?"💳":"💰")}),i.jsx("h3",{className:"text-xl font-bold",children:f.name||"طريقة دفع"})]}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:f.status==="active",onChange:b=>d(f.id,b.target.checked),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-100",children:i.jsx("p",{className:"text-gray-600",children:f.description})}),i.jsxs("div",{children:[i.jsxs("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[i.jsx("span",{className:"text-blue-600",children:"📝"}),"خطوات العمل"]}),i.jsx("div",{className:"space-y-2",children:(g=(x=f.settings)==null?void 0:x.steps)==null?void 0:g.map((b,w)=>i.jsx("div",{className:"bg-white px-4 py-2 rounded-lg shadow-sm",children:b},w))})]}),((v=f.settings)==null?void 0:v.note)&&i.jsx("div",{className:`p-4 rounded-lg ${f.type==="wallet"?"bg-purple-50 text-purple-800":f.type==="electronic"?"bg-blue-50 text-blue-800":"bg-green-50 text-green-800"}`,children:i.jsx("p",{children:f.settings.note})})]})]})};return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:"⚙️"}),i.jsx("h2",{className:"text-2xl font-bold",children:"إعدادات طرق الدفع"})]}),i.jsxs("button",{onClick:l,disabled:t,className:`bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 ${t?"opacity-70 cursor-not-allowed":""}`,children:[i.jsx("span",{children:"💾"}),t?"جاري الحفظ...":"حفظ التغييرات"]})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-8 mt-8",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"طرق الدفع المتاحة"}),n.length===0?i.jsx("div",{className:"bg-white p-8 rounded-lg shadow-md text-center",children:i.jsx("p",{className:"text-gray-500",children:"لا توجد طرق دفع متاحة"})}):n.map(p=>{var f,x,g,v;return i.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-lg shadow-md p-6 border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`p-2 rounded-full ${p.type==="wallet"?"bg-purple-100 text-purple-600":p.type==="electronic"?"bg-blue-100 text-blue-600":"bg-green-100 text-green-600"}`,children:((f=p.settings)==null?void 0:f.icon)||(p.type==="wallet"?"👛":p.type==="electronic"?"💳":"💰")}),i.jsx("h3",{className:"text-xl font-bold",children:p.name})]}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:p.status==="active",onChange:b=>d(p.id,b.target.checked),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-100",children:i.jsx("p",{className:"text-gray-600",children:p.description})}),i.jsxs("div",{children:[i.jsxs("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[i.jsx("span",{className:"text-blue-600",children:"📝"}),"خطوات العمل"]}),i.jsx("div",{className:"space-y-2",children:(g=(x=p.settings)==null?void 0:x.steps)==null?void 0:g.map((b,w)=>i.jsx("div",{className:"bg-white px-4 py-2 rounded-lg shadow-sm",children:b},w))})]}),((v=p.settings)==null?void 0:v.note)&&i.jsx("div",{className:`p-4 rounded-lg ${p.type==="wallet"?"bg-purple-50 text-purple-800":p.type==="electronic"?"bg-blue-50 text-blue-800":"bg-green-50 text-green-800"}`,children:i.jsx("p",{children:p.settings.note})})]})]},p.id)})]}),i.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-lg shadow-md p-6 border border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-full",children:"💰"}),i.jsx("h3",{className:"text-xl font-bold",children:"إعدادات العمولة والخصومات"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-100",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نسبة عمولة البائع (%)"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"number",value:s.deliveryCommission,onChange:p=>a({...s,deliveryCommission:Number(p.target.value)}),className:"w-32 border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",min:"0",max:"100"}),i.jsx("span",{className:"text-gray-600",children:"%"})]})]}),i.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-100 space-y-3",children:[i.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg transition-colors cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:s.autoDeductFromDriver,onChange:p=>a({...s,autoDeductFromDriver:p.target.checked}),className:"rounded text-blue-600 focus:ring-blue-500 w-5 h-5"}),i.jsx("span",{children:"خصم تلقائي من السائق (الدفع المسبق)"})]}),i.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg transition-colors cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:s.autoChargeVendor,onChange:p=>a({...s,autoChargeVendor:p.target.checked}),className:"rounded text-blue-600 focus:ring-blue-500 w-5 h-5"}),i.jsx("span",{children:"شحن محفظة البائع تلقائيًا"})]})]}),i.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-lg",children:[i.jsxs("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[i.jsx("span",{children:"🧪"}),"مثال توضيحي"]}),i.jsx("p",{className:"text-gray-600 mb-4",children:"الطلب: 70 شيكل (60 للمنتج + 10 توصيل)"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"text-blue-600 bg-white px-4 py-2 rounded-lg shadow-sm",children:["🔹 عمولة البائع = ",s.deliveryCommission,"% من 60 شيكل = ",(60*s.deliveryCommission/100).toFixed(2)," شيكل"]}),i.jsxs("p",{className:"text-red-600 bg-white px-4 py-2 rounded-lg shadow-sm",children:["🔹 عمولة السائق = ",s.deliveryCommission,"% من 10 شيكل = ",(10*s.deliveryCommission/100).toFixed(2)," شيكل"]}),i.jsxs("p",{className:"text-green-600 bg-white px-4 py-2 rounded-lg shadow-sm",children:["🔹 إجمالي العمولة للنظام = ",(60*s.deliveryCommission/100+10*s.deliveryCommission/100).toFixed(2)," شيكل"]})]})]})]})]}),i.jsx(u,{type:"wallet",method:s.wallet}),i.jsx(u,{type:"traditional",method:s.traditional})]})}function r8(){const[t,e]=j.useState("settings"),[n,r]=j.useState([]),[s,a]=j.useState(!1),[o,l]=j.useState(null);j.useEffect(()=>{t==="transactions"&&d()},[t]);const d=async()=>{try{a(!0),l(null);const{data:g,error:v}=await te.from("wallets").select("id");if(v)throw v;if(g&&g.length>0){const b=g.map(N=>N.id),{data:w,error:_}=await te.from("wallet_transactions").select(`
            *,
            wallet:wallet_id(user_id),
            order:order_id(*)
          `).in("wallet_id",b).order("created_at",{ascending:!1}).limit(100);if(_)throw _;r(w||[])}else r([{id:1,amount:150,type:"credit",payment_type:"electronic",status:"completed",description:"دفع إلكتروني للطلب #123",created_at:new Date().toISOString(),order:{id:123,total:150}},{id:2,amount:200,type:"credit",payment_type:"cash",status:"completed",description:"دفع نقدي للطلب #124",created_at:new Date(Date.now()-864e5).toISOString(),order:{id:124,total:200}},{id:3,amount:500,type:"debit",payment_type:"withdrawal",status:"pending",description:"طلب سحب رصيد",created_at:new Date(Date.now()-1728e5).toISOString()}])}catch(g){console.error("Error fetching transactions:",g),l("فشل في تحميل المعاملات. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل المعاملات")}finally{a(!1)}},u=(g,v)=>g==="credit"?v==="electronic"?"دفع إلكتروني":v==="cash"?"دفع نقدي":v==="wallet"?"دفع من المحفظة":"إيداع":v==="withdrawal"?"سحب رصيد":v==="commission"?"عمولة":"خصم",p=g=>g==="credit"?"text-green-600":"text-red-600",f=g=>{switch(g){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},x=g=>{switch(g){case"completed":return"مكتمل";case"pending":return"معلق";case"failed":return"فشل";default:return g}};return i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[i.jsx("div",{className:"border-b",children:i.jsxs("nav",{className:"flex space-x-4 px-6","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>e("settings"),className:`py-4 px-4 text-sm font-medium border-b-2 -mb-px ${t==="settings"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"إعدادات طرق الدفع"}),i.jsx("button",{onClick:()=>e("transactions"),className:`py-4 px-4 text-sm font-medium border-b-2 -mb-px ${t==="transactions"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"سجل المعاملات"})]})}),i.jsxs("div",{className:"p-6",children:[t==="settings"&&i.jsx(n8,{}),t==="transactions"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-2xl font-bold mb-6",children:"سجل المعاملات"}),s?i.jsx("div",{className:"flex justify-center items-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:o}),i.jsx("button",{onClick:d,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):n.length===0?i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-gray-500",children:"لا توجد معاملات"})}):i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التاريخ"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الوصف"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"رقم الطلب"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"النوع"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المبلغ"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(g=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(g.created_at).toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.description}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g.order?`#${g.order.id}`:"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:i.jsx("span",{className:p(g.type),children:u(g.type,g.payment_type)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:i.jsxs("span",{className:p(g.type),children:[g.type==="credit"?"+":"-","₪",Math.abs(g.amount)]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${f(g.status)}`,children:x(g.status)})})]},g.id))})]})})})]})]})]})})}const s8=async(t,e=null)=>{try{const{data:n,error:r}=await te.rpc("get_ratings_by_type",{p_type:t,p_id:e});if(r)throw r;return n||[]}catch(n){throw console.error("Error fetching ratings:",n),n}},i8=async(t,e=null)=>{try{const{data:n,error:r}=await te.rpc("get_ratings_stats",{p_type:t,p_id:e});if(r)throw r;return n||{average:0,total:0,distribution:{}}}catch(n){throw console.error("Error fetching ratings stats:",n),n}},a8=async t=>{try{if(!t.order_id||!t.from_type||!t.from_id||!t.to_type||!t.to_id||!t.rating)throw new Error("جميع الحقول المطلوبة غير متوفرة");if(!["customer","vendor","driver"].includes(t.from_type)||!["customer","vendor","driver"].includes(t.to_type))throw new Error("نوع المرسل أو المستقبل غير صالح");if(t.rating<1||t.rating>5)throw new Error("التقييم يجب أن يكون بين 1 و 5");const{data:e,error:n}=await te.from("ratings").insert([{order_id:t.order_id,from_type:t.from_type,from_id:t.from_id,to_type:t.to_type,to_id:t.to_id,rating:t.rating,comment:t.comment}]).select();if(n)throw n;return e[0]}catch(e){throw console.error("Error adding rating:",e),e}},o8=async(t,e)=>{try{const{data:n,error:r}=await te.rpc("get_ratings_report",{p_type:t,p_year:e});if(r)throw r;return n||[]}catch(n){throw console.error("Error fetching ratings report:",n),n}};function Qa({rating:t,size:e="md",interactive:n=!1,onChange:r}){const s=(a,o)=>{const l={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};return i.jsx("button",{onClick:()=>n&&(r==null?void 0:r(o+1)),className:`${n?"cursor-pointer":"cursor-default"}`,disabled:!n,type:"button",children:i.jsx("svg",{className:`${l[e]} ${a?"text-yellow-400 fill-yellow-400":"text-gray-300"} transition-colors`,fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},o)};return i.jsx("div",{className:"flex items-center space-x-1",children:[...Array(5)].map((a,o)=>s(o<t,o))})}function l8({orderId:t,driverId:e,customerId:n,onComplete:r}){const[s,a]=j.useState(5),[o,l]=j.useState(""),[d,u]=j.useState(!1),[p,f]=j.useState(!1),x=async g=>{g.preventDefault(),u(!0);try{await a8({order_id:t,from_type:"driver",from_id:e,to_type:"customer",to_id:n,rating:s,comment:o}),$.success("تم إرسال تقييم الزبون بنجاح"),f(!0),r==null||r()}catch(v){console.error("خطأ في إرسال التقييم:",v),$.error("فشل في إرسال تقييم الزبون")}finally{u(!1)}};return p?i.jsxs("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[i.jsx("div",{className:"text-green-600 text-xl mb-2",children:"✓"}),i.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"تم إرسال التقييم بنجاح"}),i.jsx("p",{className:"text-green-700",children:"شكراً لك على تقييم الزبون"})]}):i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"تقييم الزبون"}),i.jsxs("form",{onSubmit:x,children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-gray-700 mb-2",children:"التقييم"}),i.jsx("div",{className:"flex justify-center",children:i.jsx(Qa,{rating:s,size:"lg",interactive:!0,onChange:a})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-gray-700 mb-2",children:"ملاحظات (اختياري)"}),i.jsx("textarea",{value:o,onChange:g=>l(g.target.value),className:"w-full border rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"أضف ملاحظاتك حول الزبون هنا..."})]}),i.jsx("button",{type:"submit",disabled:d,className:`w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors ${d?"opacity-50 cursor-not-allowed":""}`,children:d?"جاري الإرسال...":"إرسال التقييم"})]})]})}function Jf({type:t="vendor"}){const[e,n]=j.useState([]),[r,s]=j.useState({average:0,total:0,distribution:{}}),[a,o]=j.useState(!0),[l,d]=j.useState(null),[u,p]=j.useState("grid");j.useEffect(()=>{f()},[t]);const f=async()=>{try{o(!0),d(null);const _=await s8(t);n(_||[]);const N=await i8(t);s(N||{average:0,total:0,distribution:{}})}catch(_){console.error("Error fetching ratings data:",_),d("فشل في تحميل بيانات التقييمات. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل بيانات التقييمات")}finally{o(!1)}},x=async _=>{if(window.confirm("هل أنت متأكد من حذف هذا التقييم؟"))try{const{error:N}=await supabase.from("ratings").delete().eq("id",_);if(N)throw N;$.success("تم حذف التقييم بنجاح"),f()}catch(N){console.error("Error deleting rating:",N),$.error("فشل في حذف التقييم")}},g=_=>r.total>0?_/r.total*100:0,v=_=>new Date(_).toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"col-span-1 flex flex-col items-center justify-center",children:[i.jsx("div",{className:"text-5xl font-bold text-yellow-500",children:r.average.toFixed(1)}),i.jsx("div",{className:"mt-2",children:i.jsx(Qa,{rating:r.average})}),i.jsxs("div",{className:"text-gray-500 mt-2",children:["من ",r.total," تقييم"]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"توزيع التقييمات"}),i.jsx("div",{className:"space-y-3",children:[5,4,3,2,1].map(_=>i.jsxs("div",{className:"flex items-center",children:[i.jsxs("div",{className:"w-12 text-sm text-gray-600",children:[_," نجوم"]}),i.jsx("div",{className:"flex-1 mx-4",children:i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:i.jsx("div",{className:"bg-yellow-500 h-2.5 rounded-full",style:{width:`${g(r.distribution[_]||0)}%`}})})}),i.jsxs("div",{className:"w-12 text-sm text-gray-600",children:[r.distribution[_]||0," (",g(r.distribution[_]||0).toFixed(0),"%)"]})]},_))})]})]})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(_=>i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold",children:[t==="vendor"?"متجر":t==="driver"?"سائق":"زبون",_.to_name&&`: ${_.to_name}`]}),i.jsxs("p",{className:"text-gray-500 text-sm",children:["تقييم من ",_.from_name||"مستخدم"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Qa,{rating:_.rating}),i.jsx("span",{className:"text-lg font-semibold",children:_.rating})]})]}),_.comment&&i.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:i.jsx("p",{className:"text-gray-700",children:_.comment})}),i.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-500",children:v(_.created_at)}),i.jsx("button",{onClick:()=>x(_.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},_.id))})]}),w=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"col-span-1 flex flex-col items-center justify-center",children:[i.jsx("div",{className:"text-5xl font-bold text-yellow-500",children:r.average.toFixed(1)}),i.jsx("div",{className:"mt-2",children:i.jsx(Qa,{rating:r.average})}),i.jsxs("div",{className:"text-gray-500 mt-2",children:["من ",r.total," تقييم"]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"توزيع التقييمات"}),i.jsx("div",{className:"space-y-3",children:[5,4,3,2,1].map(_=>i.jsxs("div",{className:"flex items-center",children:[i.jsxs("div",{className:"w-12 text-sm text-gray-600",children:[_," نجوم"]}),i.jsx("div",{className:"flex-1 mx-4",children:i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:i.jsx("div",{className:"bg-yellow-500 h-2.5 rounded-full",style:{width:`${g(r.distribution[_]||0)}%`}})})}),i.jsxs("div",{className:"w-12 text-sm text-gray-600",children:[r.distribution[_]||0," (",g(r.distribution[_]||0).toFixed(0),"%)"]})]},_))})]})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:t==="vendor"?"المتجر":t==="driver"?"السائق":"الزبون"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المقيم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التقييم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التعليق"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التاريخ"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(_=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.to_name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.from_name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Qa,{rating:_.rating}),i.jsx("span",{className:"ml-2",children:_.rating})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"max-w-xs truncate",children:_.comment||"-"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:v(_.created_at)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:i.jsx("button",{onClick:()=>x(_.id),className:"text-red-600 hover:text-red-800",children:"حذف"})})]},_.id))})]})})})]});return a?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):l?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:l}),i.jsx("button",{onClick:f,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:t==="vendor"?"تقييمات البائعين":t==="driver"?"تقييمات السائقين":"تقييمات الزبائن"}),i.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>p("grid"),className:`px-4 py-2 rounded-lg transition-colors ${u==="grid"?"bg-white shadow text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"عرض شبكي"}),i.jsx("button",{onClick:()=>p("table"),className:`px-4 py-2 rounded-lg transition-colors ${u==="table"?"bg-white shadow text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"عرض جدول"})]})]}),u==="grid"?b():w()]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Qc(t){return t+.5|0}const Ys=(t,e,n)=>Math.max(Math.min(t,n),e);function Dl(t){return Ys(Qc(t*2.55),0,255)}function ni(t){return Ys(Qc(t*255),0,255)}function os(t){return Ys(Qc(t/2.55)/100,0,1)}function N_(t){return Ys(Qc(t*100),0,100)}const Yn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ug=[..."0123456789ABCDEF"],c8=t=>Ug[t&15],d8=t=>Ug[(t&240)>>4]+Ug[t&15],Zd=t=>(t&240)>>4===(t&15),u8=t=>Zd(t.r)&&Zd(t.g)&&Zd(t.b)&&Zd(t.a);function h8(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Yn[t[1]]*17,g:255&Yn[t[2]]*17,b:255&Yn[t[3]]*17,a:e===5?Yn[t[4]]*17:255}:(e===7||e===9)&&(n={r:Yn[t[1]]<<4|Yn[t[2]],g:Yn[t[3]]<<4|Yn[t[4]],b:Yn[t[5]]<<4|Yn[t[6]],a:e===9?Yn[t[7]]<<4|Yn[t[8]]:255})),n}const p8=(t,e)=>t<255?e(t):"";function f8(t){var e=u8(t)?c8:d8;return t?"#"+e(t.r)+e(t.g)+e(t.b)+p8(t.a,e):void 0}const m8=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function vk(t,e,n){const r=e*Math.min(n,1-n),s=(a,o=(a+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function g8(t,e,n){const r=(s,a=(s+t/60)%6)=>n-n*e*Math.max(Math.min(a,4-a,1),0);return[r(5),r(3),r(1)]}function x8(t,e,n){const r=vk(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function v8(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function wv(t){const n=t.r/255,r=t.g/255,s=t.b/255,a=Math.max(n,r,s),o=Math.min(n,r,s),l=(a+o)/2;let d,u,p;return a!==o&&(p=a-o,u=l>.5?p/(2-a-o):p/(a+o),d=v8(n,r,s,p,a),d=d*60+.5),[d|0,u||0,l]}function jv(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(ni)}function Nv(t,e,n){return jv(vk,t,e,n)}function y8(t,e,n){return jv(x8,t,e,n)}function b8(t,e,n){return jv(g8,t,e,n)}function yk(t){return(t%360+360)%360}function _8(t){const e=m8.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Dl(+e[5]):ni(+e[5]));const s=yk(+e[2]),a=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=y8(s,a,o):e[1]==="hsv"?r=b8(s,a,o):r=Nv(s,a,o),{r:r[0],g:r[1],b:r[2],a:n}}function w8(t,e){var n=wv(t);n[0]=yk(n[0]+e),n=Nv(n),t.r=n[0],t.g=n[1],t.b=n[2]}function j8(t){if(!t)return;const e=wv(t),n=e[0],r=N_(e[1]),s=N_(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${os(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const k_={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},S_={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function N8(){const t={},e=Object.keys(S_),n=Object.keys(k_);let r,s,a,o,l;for(r=0;r<e.length;r++){for(o=l=e[r],s=0;s<n.length;s++)a=n[s],l=l.replace(a,k_[a]);a=parseInt(S_[o],16),t[l]=[a>>16&255,a>>8&255,a&255]}return t}let Kd;function k8(t){Kd||(Kd=N8(),Kd.transparent=[0,0,0,0]);const e=Kd[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const S8=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function C8(t){const e=S8.exec(t);let n=255,r,s,a;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Dl(o):Ys(o*255,0,255)}return r=+e[1],s=+e[3],a=+e[5],r=255&(e[2]?Dl(r):Ys(r,0,255)),s=255&(e[4]?Dl(s):Ys(s,0,255)),a=255&(e[6]?Dl(a):Ys(a,0,255)),{r,g:s,b:a,a:n}}}function E8(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${os(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const em=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ra=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function T8(t,e,n){const r=Ra(os(t.r)),s=Ra(os(t.g)),a=Ra(os(t.b));return{r:ni(em(r+n*(Ra(os(e.r))-r))),g:ni(em(s+n*(Ra(os(e.g))-s))),b:ni(em(a+n*(Ra(os(e.b))-a))),a:t.a+n*(e.a-t.a)}}function Gd(t,e,n){if(t){let r=wv(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Nv(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function bk(t,e){return t&&Object.assign(e||{},t)}function C_(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ni(t[3]))):(e=bk(t,{r:0,g:0,b:0,a:1}),e.a=ni(e.a)),e}function P8(t){return t.charAt(0)==="r"?C8(t):_8(t)}class Mc{constructor(e){if(e instanceof Mc)return e;const n=typeof e;let r;n==="object"?r=C_(e):n==="string"&&(r=h8(e)||k8(e)||P8(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=bk(this._rgb);return e&&(e.a=os(e.a)),e}set rgb(e){this._rgb=C_(e)}rgbString(){return this._valid?E8(this._rgb):void 0}hexString(){return this._valid?f8(this._rgb):void 0}hslString(){return this._valid?j8(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let a;const o=n===a?.5:n,l=2*o-1,d=r.a-s.a,u=((l*d===-1?l:(l+d)/(1+l*d))+1)/2;a=1-u,r.r=255&u*r.r+a*s.r+.5,r.g=255&u*r.g+a*s.g+.5,r.b=255&u*r.b+a*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=T8(this._rgb,e._rgb,n)),this}clone(){return new Mc(this.rgb)}alpha(e){return this._rgb.a=ni(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Qc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Gd(this._rgb,2,e),this}darken(e){return Gd(this._rgb,2,-e),this}saturate(e){return Gd(this._rgb,1,e),this}desaturate(e){return Gd(this._rgb,1,-e),this}rotate(e){return w8(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function es(){}const D8=(()=>{let t=0;return()=>t++})();function at(t){return t==null}function $t(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function qe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ar(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Pr(t,e){return ar(t)?t:e}function Be(t,e){return typeof t>"u"?e:t}const M8=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function lt(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ge(t,e,n,r){let s,a,o;if($t(t))for(a=t.length,s=0;s<a;s++)e.call(n,t[s],s);else if(qe(t))for(o=Object.keys(t),a=o.length,s=0;s<a;s++)e.call(n,t[o[s]],o[s])}function kh(t,e){let n,r,s,a;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],a=e[n],s.datasetIndex!==a.datasetIndex||s.index!==a.index)return!1;return!0}function Sh(t){if($t(t))return t.map(Sh);if(qe(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=Sh(t[n[s]]);return e}return t}function _k(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function O8(t,e,n,r){if(!_k(t))return;const s=e[t],a=n[t];qe(s)&&qe(a)?Oc(s,a,r):e[t]=Sh(a)}function Oc(t,e,n){const r=$t(e)?e:[e],s=r.length;if(!qe(t))return t;n=n||{};const a=n.merger||O8;let o;for(let l=0;l<s;++l){if(o=r[l],!qe(o))continue;const d=Object.keys(o);for(let u=0,p=d.length;u<p;++u)a(d[u],t,o,n)}return t}function Xl(t,e){return Oc(t,e,{merger:L8})}function L8(t,e,n){if(!_k(t))return;const r=e[t],s=n[t];qe(r)&&qe(s)?Xl(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Sh(s))}const E_={"":t=>t,x:t=>t.x,y:t=>t.y};function R8(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function A8(t){const e=R8(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Ch(t,e){return(E_[e]||(E_[e]=A8(e)))(t)}function kv(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Eh=t=>typeof t<"u",ai=t=>typeof t=="function",T_=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function I8(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Bt=Math.PI,Yr=2*Bt,F8=Yr+Bt,Th=Number.POSITIVE_INFINITY,$8=Bt/180,xr=Bt/2,ki=Bt/4,P_=Bt*2/3,wk=Math.log10,Co=Math.sign;function Jl(t,e,n){return Math.abs(t-e)<n}function D_(t){const e=Math.round(t);t=Jl(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(wk(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function z8(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,a)=>s-a).pop(),e}function B8(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Lc(t){return!B8(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function U8(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function H8(t,e,n){let r,s,a;for(r=0,s=t.length;r<s;r++)a=t[r][n],isNaN(a)||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function Hi(t){return t*(Bt/180)}function W8(t){return t*(180/Bt)}function M_(t){if(!ar(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Y8(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let a=Math.atan2(r,n);return a<-.5*Bt&&(a+=Yr),{angle:a,distance:s}}function Hg(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function V8(t,e){return(t-e+F8)%Yr-Bt}function Ts(t){return(t%Yr+Yr)%Yr}function jk(t,e,n,r){const s=Ts(t),a=Ts(e),o=Ts(n),l=Ts(a-s),d=Ts(o-s),u=Ts(s-a),p=Ts(s-o);return s===a||s===o||r&&a===o||l>d&&u<p}function Gn(t,e,n){return Math.max(e,Math.min(n,t))}function q8(t){return Gn(t,-32768,32767)}function Ml(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Sv(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,a;for(;r-s>1;)a=s+r>>1,n(a)?s=a:r=a;return{lo:s,hi:r}}const Wi=(t,e,n,r)=>Sv(t,n,r?s=>{const a=t[s][e];return a<n||a===n&&t[s+1][e]===n}:s=>t[s][e]<n),Z8=(t,e,n)=>Sv(t,n,r=>t[r][e]>=n);function K8(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const Nk=["push","pop","shift","splice","unshift"];function G8(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Nk.forEach(n=>{const r="_onData"+kv(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...a){const o=s.apply(this,a);return t._chartjs.listeners.forEach(l=>{typeof l[r]=="function"&&l[r](...a)}),o}})})}function O_(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(Nk.forEach(a=>{delete t[a]}),delete t._chartjs)}function Q8(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const kk=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function Sk(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,kk.call(window,()=>{r=!1,t.apply(e,n)}))}}function X8(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const Cv=t=>t==="start"?"left":t==="end"?"right":"center",nn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,J8=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function e$(t,e,n){const r=e.length;let s=0,a=r;if(t._sorted){const{iScale:o,vScale:l,_parsed:d}=t,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,p=o.axis,{min:f,max:x,minDefined:g,maxDefined:v}=o.getUserBounds();if(g){if(s=Math.min(Wi(d,p,f).lo,n?r:Wi(e,p,o.getPixelForValue(f)).lo),u){const b=d.slice(0,s+1).reverse().findIndex(w=>!at(w[l.axis]));s-=Math.max(0,b)}s=Gn(s,0,r-1)}if(v){let b=Math.max(Wi(d,o.axis,x,!0).hi+1,n?0:Wi(e,p,o.getPixelForValue(x),!0).hi+1);if(u){const w=d.slice(b-1).findIndex(_=>!at(_[l.axis]));b+=Math.max(0,w)}a=Gn(b,s,r)-s}else a=r-s}return{start:s,count:a}}function t$(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const a=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),a}const Qd=t=>t===0||t===1,L_=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Yr/n)),R_=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Yr/n)+1,ec={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*xr)+1,easeOutSine:t=>Math.sin(t*xr),easeInOutSine:t=>-.5*(Math.cos(Bt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Qd(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Qd(t)?t:L_(t,.075,.3),easeOutElastic:t=>Qd(t)?t:R_(t,.075,.3),easeInOutElastic(t){return Qd(t)?t:t<.5?.5*L_(t*2,.1125,.45):.5+.5*R_(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ec.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ec.easeInBounce(t*2)*.5:ec.easeOutBounce(t*2-1)*.5+.5};function Ev(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function A_(t){return Ev(t)?t:new Mc(t)}function tm(t){return Ev(t)?t:new Mc(t).saturate(.5).darken(.1).hexString()}const n$=["x","y","borderWidth","radius","tension"],r$=["color","borderColor","backgroundColor"];function s$(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:r$},numbers:{type:"number",properties:n$}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function i$(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const I_=new Map;function a$(t,e){e=e||{};const n=t+JSON.stringify(e);let r=I_.get(n);return r||(r=new Intl.NumberFormat(t,e),I_.set(n,r)),r}function Ck(t,e,n){return a$(e,n).format(t)}const o$={values(t){return $t(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,a=t;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),a=l$(t,n)}const o=wk(Math.abs(a)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),d={notation:s,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(d,this.options.ticks.format),Ck(t,r,d)}};function l$(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Ek={formatters:o$};function c$(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ek.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const oa=Object.create(null),Wg=Object.create(null);function tc(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const a=n[r];t=t[a]||(t[a]=Object.create(null))}return t}function nm(t,e,n){return typeof e=="string"?Oc(tc(t,e),n):Oc(tc(t,""),e)}class d${constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>tm(s.backgroundColor),this.hoverBorderColor=(r,s)=>tm(s.borderColor),this.hoverColor=(r,s)=>tm(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return nm(this,e,n)}get(e){return tc(this,e)}describe(e,n){return nm(Wg,e,n)}override(e,n){return nm(oa,e,n)}route(e,n,r,s){const a=tc(this,e),o=tc(this,r),l="_"+n;Object.defineProperties(a,{[l]:{value:a[n],writable:!0},[n]:{enumerable:!0,get(){const d=this[l],u=o[s];return qe(d)?Object.assign({},u,d):Be(d,u)},set(d){this[l]=d}}})}apply(e){e.forEach(n=>n(this))}}var Ct=new d$({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[s$,i$,c$]);function u$(t){return!t||at(t.size)||at(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function F_(t,e,n,r,s){let a=e[s];return a||(a=e[s]=t.measureText(s).width,n.push(s)),a>r&&(r=a),r}function Si(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function $_(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Yg(t,e,n,r){Tk(t,e,n,r,null)}function Tk(t,e,n,r,s){let a,o,l,d,u,p,f,x;const g=e.pointStyle,v=e.rotation,b=e.radius;let w=(v||0)*$8;if(g&&typeof g=="object"&&(a=g.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(w),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(b)||b<=0)){switch(t.beginPath(),g){default:s?t.ellipse(n,r,s/2,b,0,0,Yr):t.arc(n,r,b,0,Yr),t.closePath();break;case"triangle":p=s?s/2:b,t.moveTo(n+Math.sin(w)*p,r-Math.cos(w)*b),w+=P_,t.lineTo(n+Math.sin(w)*p,r-Math.cos(w)*b),w+=P_,t.lineTo(n+Math.sin(w)*p,r-Math.cos(w)*b),t.closePath();break;case"rectRounded":u=b*.516,d=b-u,o=Math.cos(w+ki)*d,f=Math.cos(w+ki)*(s?s/2-u:d),l=Math.sin(w+ki)*d,x=Math.sin(w+ki)*(s?s/2-u:d),t.arc(n-f,r-l,u,w-Bt,w-xr),t.arc(n+x,r-o,u,w-xr,w),t.arc(n+f,r+l,u,w,w+xr),t.arc(n-x,r+o,u,w+xr,w+Bt),t.closePath();break;case"rect":if(!v){d=Math.SQRT1_2*b,p=s?s/2:d,t.rect(n-p,r-d,2*p,2*d);break}w+=ki;case"rectRot":f=Math.cos(w)*(s?s/2:b),o=Math.cos(w)*b,l=Math.sin(w)*b,x=Math.sin(w)*(s?s/2:b),t.moveTo(n-f,r-l),t.lineTo(n+x,r-o),t.lineTo(n+f,r+l),t.lineTo(n-x,r+o),t.closePath();break;case"crossRot":w+=ki;case"cross":f=Math.cos(w)*(s?s/2:b),o=Math.cos(w)*b,l=Math.sin(w)*b,x=Math.sin(w)*(s?s/2:b),t.moveTo(n-f,r-l),t.lineTo(n+f,r+l),t.moveTo(n+x,r-o),t.lineTo(n-x,r+o);break;case"star":f=Math.cos(w)*(s?s/2:b),o=Math.cos(w)*b,l=Math.sin(w)*b,x=Math.sin(w)*(s?s/2:b),t.moveTo(n-f,r-l),t.lineTo(n+f,r+l),t.moveTo(n+x,r-o),t.lineTo(n-x,r+o),w+=ki,f=Math.cos(w)*(s?s/2:b),o=Math.cos(w)*b,l=Math.sin(w)*b,x=Math.sin(w)*(s?s/2:b),t.moveTo(n-f,r-l),t.lineTo(n+f,r+l),t.moveTo(n+x,r-o),t.lineTo(n-x,r+o);break;case"line":o=s?s/2:Math.cos(w)*b,l=Math.sin(w)*b,t.moveTo(n-o,r-l),t.lineTo(n+o,r+l);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(w)*(s?s/2:b),r+Math.sin(w)*b);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Rc(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Tv(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Pv(t){t.restore()}function h$(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const a=(e.x+n.x)/2;t.lineTo(a,e.y),t.lineTo(a,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function p$(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function f$(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),at(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function m$(t,e,n,r,s){if(s.strikethrough||s.underline){const a=t.measureText(r),o=e-a.actualBoundingBoxLeft,l=e+a.actualBoundingBoxRight,d=n-a.actualBoundingBoxAscent,u=n+a.actualBoundingBoxDescent,p=s.strikethrough?(d+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,p),t.lineTo(l,p),t.stroke()}}function g$(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Ac(t,e,n,r,s,a={}){const o=$t(e)?e:[e],l=a.strokeWidth>0&&a.strokeColor!=="";let d,u;for(t.save(),t.font=s.string,f$(t,a),d=0;d<o.length;++d)u=o[d],a.backdrop&&g$(t,a.backdrop),l&&(a.strokeColor&&(t.strokeStyle=a.strokeColor),at(a.strokeWidth)||(t.lineWidth=a.strokeWidth),t.strokeText(u,n,r,a.maxWidth)),t.fillText(u,n,r,a.maxWidth),m$(t,n,r,u,a),r+=Number(s.lineHeight);t.restore()}function Vg(t,e){const{x:n,y:r,w:s,h:a,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Bt,Bt,!0),t.lineTo(n,r+a-o.bottomLeft),t.arc(n+o.bottomLeft,r+a-o.bottomLeft,o.bottomLeft,Bt,xr,!0),t.lineTo(n+s-o.bottomRight,r+a),t.arc(n+s-o.bottomRight,r+a-o.bottomRight,o.bottomRight,xr,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-xr,!0),t.lineTo(n+o.topLeft,r)}const x$=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,v$=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function y$(t,e){const n=(""+t).match(x$);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const b$=t=>+t||0;function Pk(t,e){const n={},r=qe(e),s=r?Object.keys(e):e,a=qe(t)?r?o=>Be(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=b$(a(o));return n}function _$(t){return Pk(t,{top:"y",right:"x",bottom:"y",left:"x"})}function nc(t){return Pk(t,["topLeft","topRight","bottomLeft","bottomRight"])}function or(t){const e=_$(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function on(t,e){t=t||{},e=e||Ct.font;let n=Be(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=Be(t.style,e.style);r&&!(""+r).match(v$)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:Be(t.family,e.family),lineHeight:y$(Be(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Be(t.weight,e.weight),string:""};return s.string=u$(s),s}function Xd(t,e,n,r){let s,a,o;for(s=0,a=t.length;s<a;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function w$(t,e,n){const{min:r,max:s}=t,a=M8(e,(s-r)/2),o=(l,d)=>n&&l===0?0:l+d;return{min:o(r,-Math.abs(a)),max:o(s,a)}}function ma(t,e){return Object.assign(Object.create(t),e)}function Dv(t,e=[""],n,r,s=()=>t[0]){const a=n||t;typeof r>"u"&&(r=Lk("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:a,_fallback:r,_getTarget:s,override:l=>Dv([l,...t],e,a,r)};return new Proxy(o,{deleteProperty(l,d){return delete l[d],delete l._keys,delete t[0][d],!0},get(l,d){return Mk(l,d,()=>P$(d,e,t,l))},getOwnPropertyDescriptor(l,d){return Reflect.getOwnPropertyDescriptor(l._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,d){return B_(l).includes(d)},ownKeys(l){return B_(l)},set(l,d,u){const p=l._storage||(l._storage=s());return l[d]=p[d]=u,delete l._keys,!0}})}function Eo(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Dk(t,r),setContext:a=>Eo(t,a,n,r),override:a=>Eo(t.override(a),e,n,r)};return new Proxy(s,{deleteProperty(a,o){return delete a[o],delete t[o],!0},get(a,o,l){return Mk(a,o,()=>N$(a,o,l))},getOwnPropertyDescriptor(a,o){return a._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(a,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(a,o,l){return t[o]=l,delete a[o],!0}})}function Dk(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:ai(n)?n:()=>n,isIndexable:ai(r)?r:()=>r}}const j$=(t,e)=>t?t+kv(e):e,Mv=(t,e)=>qe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Mk(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function N$(t,e,n){const{_proxy:r,_context:s,_subProxy:a,_descriptors:o}=t;let l=r[e];return ai(l)&&o.isScriptable(e)&&(l=k$(e,l,t,n)),$t(l)&&l.length&&(l=S$(e,l,t,o.isIndexable)),Mv(e,l)&&(l=Eo(l,s,a&&a[e],o)),l}function k$(t,e,n,r){const{_proxy:s,_context:a,_subProxy:o,_stack:l}=n;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let d=e(a,o||r);return l.delete(t),Mv(t,d)&&(d=Ov(s._scopes,s,t,d)),d}function S$(t,e,n,r){const{_proxy:s,_context:a,_subProxy:o,_descriptors:l}=n;if(typeof a.index<"u"&&r(t))return e[a.index%e.length];if(qe(e[0])){const d=e,u=s._scopes.filter(p=>p!==d);e=[];for(const p of d){const f=Ov(u,s,t,p);e.push(Eo(f,a,o&&o[t],l))}}return e}function Ok(t,e,n){return ai(t)?t(e,n):t}const C$=(t,e)=>t===!0?e:typeof t=="string"?Ch(e,t):void 0;function E$(t,e,n,r,s){for(const a of e){const o=C$(n,a);if(o){t.add(o);const l=Ok(o._fallback,n,s);if(typeof l<"u"&&l!==n&&l!==r)return l}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function Ov(t,e,n,r){const s=e._rootScopes,a=Ok(e._fallback,n,r),o=[...t,...s],l=new Set;l.add(r);let d=z_(l,o,n,a||n,r);return d===null||typeof a<"u"&&a!==n&&(d=z_(l,o,a,d,r),d===null)?!1:Dv(Array.from(l),[""],s,a,()=>T$(e,n,r))}function z_(t,e,n,r,s){for(;n;)n=E$(t,e,n,r,s);return n}function T$(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return $t(s)&&qe(n)?n:s||{}}function P$(t,e,n,r){let s;for(const a of e)if(s=Lk(j$(a,t),n),typeof s<"u")return Mv(t,s)?Ov(n,r,t,s):s}function Lk(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function B_(t){let e=t._keys;return e||(e=t._keys=D$(t._scopes)),e}function D$(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const M$=Number.EPSILON||1e-14,To=(t,e)=>e<t.length&&!t[e].skip&&t[e],Rk=t=>t==="x"?"y":"x";function O$(t,e,n,r){const s=t.skip?e:t,a=e,o=n.skip?e:n,l=Hg(a,s),d=Hg(o,a);let u=l/(l+d),p=d/(l+d);u=isNaN(u)?0:u,p=isNaN(p)?0:p;const f=r*u,x=r*p;return{previous:{x:a.x-f*(o.x-s.x),y:a.y-f*(o.y-s.y)},next:{x:a.x+x*(o.x-s.x),y:a.y+x*(o.y-s.y)}}}function L$(t,e,n){const r=t.length;let s,a,o,l,d,u=To(t,0);for(let p=0;p<r-1;++p)if(d=u,u=To(t,p+1),!(!d||!u)){if(Jl(e[p],0,M$)){n[p]=n[p+1]=0;continue}s=n[p]/e[p],a=n[p+1]/e[p],l=Math.pow(s,2)+Math.pow(a,2),!(l<=9)&&(o=3/Math.sqrt(l),n[p]=s*o*e[p],n[p+1]=a*o*e[p])}}function R$(t,e,n="x"){const r=Rk(n),s=t.length;let a,o,l,d=To(t,0);for(let u=0;u<s;++u){if(o=l,l=d,d=To(t,u+1),!l)continue;const p=l[n],f=l[r];o&&(a=(p-o[n])/3,l[`cp1${n}`]=p-a,l[`cp1${r}`]=f-a*e[u]),d&&(a=(d[n]-p)/3,l[`cp2${n}`]=p+a,l[`cp2${r}`]=f+a*e[u])}}function A$(t,e="x"){const n=Rk(e),r=t.length,s=Array(r).fill(0),a=Array(r);let o,l,d,u=To(t,0);for(o=0;o<r;++o)if(l=d,d=u,u=To(t,o+1),!!d){if(u){const p=u[e]-d[e];s[o]=p!==0?(u[n]-d[n])/p:0}a[o]=l?u?Co(s[o-1])!==Co(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}L$(t,s,a),R$(t,a,e)}function Jd(t,e,n){return Math.max(Math.min(t,n),e)}function I$(t,e){let n,r,s,a,o,l=Rc(t[0],e);for(n=0,r=t.length;n<r;++n)o=a,a=l,l=n<r-1&&Rc(t[n+1],e),a&&(s=t[n],o&&(s.cp1x=Jd(s.cp1x,e.left,e.right),s.cp1y=Jd(s.cp1y,e.top,e.bottom)),l&&(s.cp2x=Jd(s.cp2x,e.left,e.right),s.cp2y=Jd(s.cp2y,e.top,e.bottom)))}function F$(t,e,n,r,s){let a,o,l,d;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")A$(t,s);else{let u=r?t[t.length-1]:t[0];for(a=0,o=t.length;a<o;++a)l=t[a],d=O$(u,l,t[Math.min(a+1,o-(r?0:1))%o],e.tension),l.cp1x=d.previous.x,l.cp1y=d.previous.y,l.cp2x=d.next.x,l.cp2y=d.next.y,u=l}e.capBezierPoints&&I$(t,n)}function Lv(){return typeof window<"u"&&typeof document<"u"}function Rv(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Ph(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const vp=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function $$(t,e){return vp(t).getPropertyValue(e)}const z$=["top","right","bottom","left"];function Qi(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const a=z$[s];r[a]=parseFloat(t[e+"-"+a+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const B$=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function U$(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:a}=r;let o=!1,l,d;if(B$(s,a,t.target))l=s,d=a;else{const u=e.getBoundingClientRect();l=r.clientX-u.left,d=r.clientY-u.top,o=!0}return{x:l,y:d,box:o}}function Oi(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=vp(n),a=s.boxSizing==="border-box",o=Qi(s,"padding"),l=Qi(s,"border","width"),{x:d,y:u,box:p}=U$(t,n),f=o.left+(p&&l.left),x=o.top+(p&&l.top);let{width:g,height:v}=e;return a&&(g-=o.width+l.width,v-=o.height+l.height),{x:Math.round((d-f)/g*n.width/r),y:Math.round((u-x)/v*n.height/r)}}function H$(t,e,n){let r,s;if(e===void 0||n===void 0){const a=t&&Rv(t);if(!a)e=t.clientWidth,n=t.clientHeight;else{const o=a.getBoundingClientRect(),l=vp(a),d=Qi(l,"border","width"),u=Qi(l,"padding");e=o.width-u.width-d.width,n=o.height-u.height-d.height,r=Ph(l.maxWidth,a,"clientWidth"),s=Ph(l.maxHeight,a,"clientHeight")}}return{width:e,height:n,maxWidth:r||Th,maxHeight:s||Th}}const eu=t=>Math.round(t*10)/10;function W$(t,e,n,r){const s=vp(t),a=Qi(s,"margin"),o=Ph(s.maxWidth,t,"clientWidth")||Th,l=Ph(s.maxHeight,t,"clientHeight")||Th,d=H$(t,e,n);let{width:u,height:p}=d;if(s.boxSizing==="content-box"){const x=Qi(s,"border","width"),g=Qi(s,"padding");u-=g.width+x.width,p-=g.height+x.height}return u=Math.max(0,u-a.width),p=Math.max(0,r?u/r:p-a.height),u=eu(Math.min(u,o,d.maxWidth)),p=eu(Math.min(p,l,d.maxHeight)),u&&!p&&(p=eu(u/2)),(e!==void 0||n!==void 0)&&r&&d.height&&p>d.height&&(p=d.height,u=eu(Math.floor(p*r))),{width:u,height:p}}function U_(t,e,n){const r=e||1,s=Math.floor(t.height*r),a=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==a?(t.currentDevicePixelRatio=r,o.height=s,o.width=a,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const Y$=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Lv()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function H_(t,e){const n=$$(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Li(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function V$(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function q$(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},a={x:e.cp1x,y:e.cp1y},o=Li(t,s,n),l=Li(s,a,n),d=Li(a,e,n),u=Li(o,l,n),p=Li(l,d,n);return Li(u,p,n)}const Z$=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},K$=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function oo(t,e,n){return t?Z$(e,n):K$()}function Ak(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function Ik(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Fk(t){return t==="angle"?{between:jk,compare:V8,normalize:Ts}:{between:Ml,compare:(e,n)=>e-n,normalize:e=>e}}function W_({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function G$(t,e,n){const{property:r,start:s,end:a}=n,{between:o,normalize:l}=Fk(r),d=e.length;let{start:u,end:p,loop:f}=t,x,g;if(f){for(u+=d,p+=d,x=0,g=d;x<g&&o(l(e[u%d][r]),s,a);++x)u--,p--;u%=d,p%=d}return p<u&&(p+=d),{start:u,end:p,loop:f,style:t.style}}function Q$(t,e,n){if(!n)return[t];const{property:r,start:s,end:a}=n,o=e.length,{compare:l,between:d,normalize:u}=Fk(r),{start:p,end:f,loop:x,style:g}=G$(t,e,n),v=[];let b=!1,w=null,_,N,S;const P=()=>d(s,S,_)&&l(s,S)!==0,O=()=>l(a,_)===0||d(a,S,_),A=()=>b||P(),R=()=>!b||O();for(let T=p,Y=p;T<=f;++T)N=e[T%o],!N.skip&&(_=u(N[r]),_!==S&&(b=d(_,s,a),w===null&&A()&&(w=l(_,s)===0?T:Y),w!==null&&R()&&(v.push(W_({start:w,end:T,loop:x,count:o,style:g})),w=null),Y=T,S=_));return w!==null&&v.push(W_({start:w,end:f,loop:x,count:o,style:g})),v}function X$(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const a=Q$(r[s],t.points,e);a.length&&n.push(...a)}return n}function J$(t,e,n,r){let s=0,a=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(a+=s);a>s&&t[a%e].skip;)a--;return a%=e,{start:s,end:a}}function ez(t,e,n,r){const s=t.length,a=[];let o=e,l=t[e],d;for(d=e+1;d<=n;++d){const u=t[d%s];u.skip||u.stop?l.skip||(r=!1,a.push({start:e%s,end:(d-1)%s,loop:r}),e=o=u.stop?d:null):(o=d,l.skip&&(e=d)),l=u}return o!==null&&a.push({start:e%s,end:o%s,loop:r}),a}function tz(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const a=!!t._loop,{start:o,end:l}=J$(n,s,a,r);if(r===!0)return Y_(t,[{start:o,end:l,loop:a}],n,e);const d=l<o?l+s:l,u=!!t._fullLoop&&o===0&&l===s-1;return Y_(t,ez(n,o,d,u),n,e)}function Y_(t,e,n,r){return!r||!r.setContext||!n?e:nz(t,e,n,r)}function nz(t,e,n,r){const s=t._chart.getContext(),a=V_(t.options),{_datasetIndex:o,options:{spanGaps:l}}=t,d=n.length,u=[];let p=a,f=e[0].start,x=f;function g(v,b,w,_){const N=l?-1:1;if(v!==b){for(v+=d;n[v%d].skip;)v-=N;for(;n[b%d].skip;)b+=N;v%d!==b%d&&(u.push({start:v%d,end:b%d,loop:w,style:_}),p=_,f=b%d)}}for(const v of e){f=l?f:v.start;let b=n[f%d],w;for(x=f+1;x<=v.end;x++){const _=n[x%d];w=V_(r.setContext(ma(s,{type:"segment",p0:b,p1:_,p0DataIndex:(x-1)%d,p1DataIndex:x%d,datasetIndex:o}))),rz(w,p)&&g(f,x-1,v.loop,p),b=_,p=w}f<x-1&&g(f,x-1,v.loop,p)}return u}function V_(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function rz(t,e){if(!e)return!1;const n=[],r=function(s,a){return Ev(a)?(n.includes(a)||n.push(a),n.indexOf(a)):a};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function tu(t,e,n){return t.options.clip?t[n]:e[n]}function sz(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:tu(n,e,"left"),right:tu(n,e,"right"),top:tu(r,e,"top"),bottom:tu(r,e,"bottom")}:e}function iz(t,e){const n=e._clip;if(n.disabled)return!1;const r=sz(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class az{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const a=n.listeners[s],o=n.duration;a.forEach(l=>l({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=kk.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const a=r.items;let o=a.length-1,l=!1,d;for(;o>=0;--o)d=a[o],d._active?(d._total>r.duration&&(r.duration=d._total),d.tick(e),l=!0):(a[o]=a[a.length-1],a.pop());l&&(s.draw(),this._notify(s,r,e,"progress")),a.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=a.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ts=new az;const q_="transparent",oz={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=A_(t||q_),s=r.valid&&A_(e||q_);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class lz{constructor(e,n,r,s){const a=n[r];s=Xd([e.to,s,a,e.from]);const o=Xd([e.from,a,s]);this._active=!0,this._fn=e.fn||oz[e.type||typeof o],this._easing=ec[e.easing]||ec.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],a=r-this._start,o=this._duration-a;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=Xd([e.to,n,s,e.from]),this._from=Xd([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,a=this._from,o=this._loop,l=this._to;let d;if(this._active=a!==l&&(o||n<r),!this._active){this._target[s]=l,this._notify(!0);return}if(n<0){this._target[s]=a;return}d=n/r%2,d=o&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[s]=this._fn(a,l,d)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class $k{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!qe(e))return;const n=Object.keys(Ct.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const a=e[s];if(!qe(a))return;const o={};for(const l of n)o[l]=a[l];($t(a.properties)&&a.properties||[s]).forEach(l=>{(l===s||!r.has(l))&&r.set(l,o)})})}_animateOptions(e,n){const r=n.options,s=dz(e,r);if(!s)return[];const a=this._createAnimations(s,r);return r.$shared&&cz(e.options.$animations,r).then(()=>{e.options=r},()=>{}),a}_createAnimations(e,n){const r=this._properties,s=[],a=e.$animations||(e.$animations={}),o=Object.keys(n),l=Date.now();let d;for(d=o.length-1;d>=0;--d){const u=o[d];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(e,n));continue}const p=n[u];let f=a[u];const x=r.get(u);if(f)if(x&&f.active()){f.update(x,p,l);continue}else f.cancel();if(!x||!x.duration){e[u]=p;continue}a[u]=f=new lz(x,e,u,p),s.push(f)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return ts.add(this._chart,r),!0}}function cz(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const a=t[r[s]];a&&a.active()&&n.push(a.wait())}return Promise.all(n)}function dz(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Z_(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,a=n.max===void 0?e:0;return{start:r?a:s,end:r?s:a}}function uz(t,e,n){if(n===!1)return!1;const r=Z_(t,n),s=Z_(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function hz(t){let e,n,r,s;return qe(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function zk(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,a;for(s=0,a=r.length;s<a;++s)n.push(r[s].index);return n}function K_(t,e,n,r={}){const s=t.keys,a=r.mode==="single";let o,l,d,u;if(e===null)return;let p=!1;for(o=0,l=s.length;o<l;++o){if(d=+s[o],d===n){if(p=!0,r.all)continue;break}u=t.values[d],ar(u)&&(a||e===0||Co(e)===Co(u))&&(e+=u)}return!p&&!r.all?0:e}function pz(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",a=r.axis==="x"?"x":"y",o=Object.keys(t),l=new Array(o.length);let d,u,p;for(d=0,u=o.length;d<u;++d)p=o[d],l[d]={[s]:p,[a]:t[p]};return l}function rm(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function fz(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function mz(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function gz(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function G_(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const a=t[s.index];if(n&&a>0||!n&&a<0)return s.index}return null}function Q_(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:a,vScale:o,index:l}=r,d=a.axis,u=o.axis,p=fz(a,o,r),f=e.length;let x;for(let g=0;g<f;++g){const v=e[g],{[d]:b,[u]:w}=v,_=v._stacks||(v._stacks={});x=_[u]=gz(s,p,b),x[l]=w,x._top=G_(x,o,!0,r.type),x._bottom=G_(x,o,!1,r.type);const N=x._visualValues||(x._visualValues={});N[l]=w}}function sm(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function xz(t,e){return ma(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function vz(t,e,n){return ma(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function vl(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const a=s._stacks;if(!a||a[r]===void 0||a[r][n]===void 0)return;delete a[r][n],a[r]._visualValues!==void 0&&a[r]._visualValues[n]!==void 0&&delete a[r]._visualValues[n]}}}const im=t=>t==="reset"||t==="none",X_=(t,e)=>e?t:Object.assign({},t),yz=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:zk(n,!0),values:null};class rc{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=rm(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&vl(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(f,x,g,v)=>f==="x"?x:f==="r"?v:g,a=n.xAxisID=Be(r.xAxisID,sm(e,"x")),o=n.yAxisID=Be(r.yAxisID,sm(e,"y")),l=n.rAxisID=Be(r.rAxisID,sm(e,"r")),d=n.indexAxis,u=n.iAxisID=s(d,a,o,l),p=n.vAxisID=s(d,o,a,l);n.xScale=this.getScaleForId(a),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&O_(this._data,this),e._stacked&&vl(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(qe(n)){const s=this._cachedMeta;this._data=pz(n,s)}else if(r!==n){if(r){O_(r,this);const s=this._cachedMeta;vl(s),s._parsed=[]}n&&Object.isExtensible(n)&&G8(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const a=n._stacked;n._stacked=rm(n.vScale,n),n.stack!==r.stack&&(s=!0,vl(n),n.stack=r.stack),this._resyncElements(e),(s||a!==n._stacked)&&(Q_(this,n._parsed),n._stacked=rm(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:a,_stacked:o}=r,l=a.axis;let d=e===0&&n===s.length?!0:r._sorted,u=e>0&&r._parsed[e-1],p,f,x;if(this._parsing===!1)r._parsed=s,r._sorted=!0,x=s;else{$t(s[e])?x=this.parseArrayData(r,s,e,n):qe(s[e])?x=this.parseObjectData(r,s,e,n):x=this.parsePrimitiveData(r,s,e,n);const g=()=>f[l]===null||u&&f[l]<u[l];for(p=0;p<n;++p)r._parsed[p+e]=f=x[p],d&&(g()&&(d=!1),u=f);r._sorted=d}o&&Q_(this,x)}parsePrimitiveData(e,n,r,s){const{iScale:a,vScale:o}=e,l=a.axis,d=o.axis,u=a.getLabels(),p=a===o,f=new Array(s);let x,g,v;for(x=0,g=s;x<g;++x)v=x+r,f[x]={[l]:p||a.parse(u[v],v),[d]:o.parse(n[v],v)};return f}parseArrayData(e,n,r,s){const{xScale:a,yScale:o}=e,l=new Array(s);let d,u,p,f;for(d=0,u=s;d<u;++d)p=d+r,f=n[p],l[d]={x:a.parse(f[0],p),y:o.parse(f[1],p)};return l}parseObjectData(e,n,r,s){const{xScale:a,yScale:o}=e,{xAxisKey:l="x",yAxisKey:d="y"}=this._parsing,u=new Array(s);let p,f,x,g;for(p=0,f=s;p<f;++p)x=p+r,g=n[x],u[p]={x:a.parse(Ch(g,l),x),y:o.parse(Ch(g,d),x)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,a=this._cachedMeta,o=n[e.axis],l={keys:zk(s,!0),values:n._stacks[e.axis]._visualValues};return K_(l,o,a.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const a=r[n.axis];let o=a===null?NaN:a;const l=s&&r._stacks[n.axis];s&&l&&(s.values=l,o=K_(s,a,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,a=r._sorted&&e===r.iScale,o=s.length,l=this._getOtherScale(e),d=yz(n,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:f}=mz(l);let x,g;function v(){g=s[x];const b=g[l.axis];return!ar(g[e.axis])||p>b||f<b}for(x=0;x<o&&!(!v()&&(this.updateRangeFromParsed(u,e,g,d),a));++x);if(a){for(x=o-1;x>=0;--x)if(!v()){this.updateRangeFromParsed(u,e,g,d);break}}return u}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,a,o;for(s=0,a=n.length;s<a;++s)o=n[s][e.axis],ar(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,a=this.getParsed(e);return{label:r?""+r.getLabelForValue(a[r.axis]):"",value:s?""+s.getLabelForValue(a[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=hz(Be(this.options.clip,uz(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],a=n.chartArea,o=[],l=this._drawStart||0,d=this._drawCount||s.length-l,u=this.options.drawActiveElementsOnTop;let p;for(r.dataset&&r.dataset.draw(e,a,l,d),p=l;p<l+d;++p){const f=s[p];f.hidden||(f.active&&u?o.push(f):f.draw(e,a))}for(p=0;p<o.length;++p)o[p].draw(e,a)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];a=o.$context||(o.$context=vz(this.getContext(),e,o)),a.parsed=this.getParsed(e),a.raw=s.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=xz(this.chart.getContext(),this.index)),a.dataset=s,a.index=a.datasetIndex=this.index;return a.active=!!n,a.mode=r,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",a=this._cachedDataOpts,o=e+"-"+n,l=a[o],d=this.enableOptionSharing&&Eh(r);if(l)return X_(l,d);const u=this.chart.config,p=u.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],x=u.getOptionScopes(this.getDataset(),p),g=Object.keys(Ct.elements[e]),v=()=>this.getContext(r,s,n),b=u.resolveNamedOptions(x,g,v,f);return b.$shared&&(b.$shared=d,a[o]=Object.freeze(X_(b,d))),b}_resolveAnimations(e,n,r){const s=this.chart,a=this._cachedDataOpts,o=`animation-${n}`,l=a[o];if(l)return l;let d;if(s.options.animation!==!1){const p=this.chart.config,f=p.datasetAnimationScopeKeys(this._type,n),x=p.getOptionScopes(this.getDataset(),f);d=p.createResolver(x,this.getContext(e,r,n))}const u=new $k(s,d&&d.animations);return d&&d._cacheable&&(a[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||im(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,a=this.getSharedOptions(r),o=this.includeOptions(n,a)||a!==s;return this.updateSharedOptions(a,n,r),{sharedOptions:a,includeOptions:o}}updateElement(e,n,r,s){im(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!im(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const a=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(a)||a})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[l,d,u]of this._syncList)this[l](d,u);this._syncList=[];const s=r.length,a=n.length,o=Math.min(a,s);o&&this.parse(0,o),a>s?this._insertElements(s,a-s,e):a<s&&this._removeElements(a,s-a)}_insertElements(e,n,r=!0){const s=this._cachedMeta,a=s.data,o=e+n;let l;const d=u=>{for(u.length+=n,l=u.length-1;l>=o;l--)u[l]=u[l-n]};for(d(a),l=e;l<o;++l)a[l]=new this.dataElementType;this._parsing&&d(s._parsed),this.parse(e,n),r&&this.updateElements(a,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&vl(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}De(rc,"defaults",{}),De(rc,"datasetElementType",null),De(rc,"dataElementType",null);class Eu extends rc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:a}=n,o=this.chart._animationsDisabled;let{start:l,count:d}=e$(n,s,o);this._drawStart=l,this._drawCount=d,t$(n)&&(l=0,d=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!a._decimated,r.points=s;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:u},e),this.updateElements(s,l,d,e)}updateElements(e,n,r,s){const a=s==="reset",{iScale:o,vScale:l,_stacked:d,_dataset:u}=this._cachedMeta,{sharedOptions:p,includeOptions:f}=this._getSharedOptions(n,s),x=o.axis,g=l.axis,{spanGaps:v,segment:b}=this.options,w=Lc(v)?v:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||a||s==="none",N=n+r,S=e.length;let P=n>0&&this.getParsed(n-1);for(let O=0;O<S;++O){const A=e[O],R=_?A:{};if(O<n||O>=N){R.skip=!0;continue}const T=this.getParsed(O),Y=at(T[g]),D=R[x]=o.getPixelForValue(T[x],O),U=R[g]=a||Y?l.getBasePixel():l.getPixelForValue(d?this.applyStack(l,T,d):T[g],O);R.skip=isNaN(D)||isNaN(U)||Y,R.stop=O>0&&Math.abs(T[x]-P[x])>w,b&&(R.parsed=T,R.raw=u.data[O]),f&&(R.options=p||this.resolveDataElementOptions(O,A.active?"active":s)),_||this.updateElement(A,O,R,s),P=T}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const a=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,a,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}De(Eu,"id","line"),De(Eu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),De(Eu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Ci(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Av{constructor(e){De(this,"options");this.options=e||{}}static override(e){Object.assign(Av.prototype,e)}init(){}formats(){return Ci()}parse(){return Ci()}format(){return Ci()}add(){return Ci()}diff(){return Ci()}startOf(){return Ci()}endOf(){return Ci()}}var bz={_date:Av};function _z(t,e,n,r){const{controller:s,data:a,_sorted:o}=t,l=s._cachedMeta.iScale,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&a.length){const u=l._reversePixels?Z8:Wi;if(r){if(s._sharedOptions){const p=a[0],f=typeof p.getRange=="function"&&p.getRange(e);if(f){const x=u(a,e,n-f),g=u(a,e,n+f);return{lo:x.lo,hi:g.hi}}}}else{const p=u(a,e,n);if(d){const{vScale:f}=s._cachedMeta,{_parsed:x}=t,g=x.slice(0,p.lo+1).reverse().findIndex(b=>!at(b[f.axis]));p.lo-=Math.max(0,g);const v=x.slice(p.hi).findIndex(b=>!at(b[f.axis]));p.hi+=Math.max(0,v)}return p}}return{lo:0,hi:a.length-1}}function yp(t,e,n,r,s){const a=t.getSortedVisibleDatasetMetas(),o=n[e];for(let l=0,d=a.length;l<d;++l){const{index:u,data:p}=a[l],{lo:f,hi:x}=_z(a[l],e,o,s);for(let g=f;g<=x;++g){const v=p[g];v.skip||r(v,u,g)}}}function wz(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const a=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(o,2))}}function am(t,e,n,r,s){const a=[];return!s&&!t.isPointInArea(e)||yp(t,n,e,function(l,d,u){!s&&!Rc(l,t.chartArea,0)||l.inRange(e.x,e.y,r)&&a.push({element:l,datasetIndex:d,index:u})},!0),a}function jz(t,e,n,r){let s=[];function a(o,l,d){const{startAngle:u,endAngle:p}=o.getProps(["startAngle","endAngle"],r),{angle:f}=Y8(o,{x:e.x,y:e.y});jk(f,u,p)&&s.push({element:o,datasetIndex:l,index:d})}return yp(t,n,e,a),s}function Nz(t,e,n,r,s,a){let o=[];const l=wz(n);let d=Number.POSITIVE_INFINITY;function u(p,f,x){const g=p.inRange(e.x,e.y,s);if(r&&!g)return;const v=p.getCenterPoint(s);if(!(!!a||t.isPointInArea(v))&&!g)return;const w=l(e,v);w<d?(o=[{element:p,datasetIndex:f,index:x}],d=w):w===d&&o.push({element:p,datasetIndex:f,index:x})}return yp(t,n,e,u),o}function om(t,e,n,r,s,a){return!a&&!t.isPointInArea(e)?[]:n==="r"&&!r?jz(t,e,n,s):Nz(t,e,n,r,s,a)}function J_(t,e,n,r,s){const a=[],o=n==="x"?"inXRange":"inYRange";let l=!1;return yp(t,n,e,(d,u,p)=>{d[o]&&d[o](e[n],s)&&(a.push({element:d,datasetIndex:u,index:p}),l=l||d.inRange(e.x,e.y,s))}),r&&!l?[]:a}var kz={modes:{index(t,e,n,r){const s=Oi(e,t),a=n.axis||"x",o=n.includeInvisible||!1,l=n.intersect?am(t,s,a,r,o):om(t,s,a,!1,r,o),d=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const p=l[0].index,f=u.data[p];f&&!f.skip&&d.push({element:f,datasetIndex:u.index,index:p})}),d):[]},dataset(t,e,n,r){const s=Oi(e,t),a=n.axis||"xy",o=n.includeInvisible||!1;let l=n.intersect?am(t,s,a,r,o):om(t,s,a,!1,r,o);if(l.length>0){const d=l[0].datasetIndex,u=t.getDatasetMeta(d).data;l=[];for(let p=0;p<u.length;++p)l.push({element:u[p],datasetIndex:d,index:p})}return l},point(t,e,n,r){const s=Oi(e,t),a=n.axis||"xy",o=n.includeInvisible||!1;return am(t,s,a,r,o)},nearest(t,e,n,r){const s=Oi(e,t),a=n.axis||"xy",o=n.includeInvisible||!1;return om(t,s,a,n.intersect,r,o)},x(t,e,n,r){const s=Oi(e,t);return J_(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=Oi(e,t);return J_(t,s,"y",n.intersect,r)}}};const Bk=["left","top","right","bottom"];function yl(t,e){return t.filter(n=>n.pos===e)}function ew(t,e){return t.filter(n=>Bk.indexOf(n.pos)===-1&&n.box.axis===e)}function bl(t,e){return t.sort((n,r)=>{const s=e?r:n,a=e?n:r;return s.weight===a.weight?s.index-a.index:s.weight-a.weight})}function Sz(t){const e=[];let n,r,s,a,o,l;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:a,options:{stack:o,stackWeight:l=1}}=s,e.push({index:n,box:s,pos:a,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&a+o,stackWeight:l});return e}function Cz(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:a}=n;if(!r||!Bk.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=a}return e}function Ez(t,e){const n=Cz(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let a,o,l;for(a=0,o=t.length;a<o;++a){l=t[a];const{fullSize:d}=l.box,u=n[l.stack],p=u&&l.stackWeight/u.weight;l.horizontal?(l.width=p?p*r:d&&e.availableWidth,l.height=s):(l.width=r,l.height=p?p*s:d&&e.availableHeight)}return n}function Tz(t){const e=Sz(t),n=bl(e.filter(u=>u.box.fullSize),!0),r=bl(yl(e,"left"),!0),s=bl(yl(e,"right")),a=bl(yl(e,"top"),!0),o=bl(yl(e,"bottom")),l=ew(e,"x"),d=ew(e,"y");return{fullSize:n,leftAndTop:r.concat(a),rightAndBottom:s.concat(d).concat(o).concat(l),chartArea:yl(e,"chartArea"),vertical:r.concat(s).concat(d),horizontal:a.concat(o).concat(l)}}function tw(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function Uk(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Pz(t,e,n,r){const{pos:s,box:a}=n,o=t.maxPadding;if(!qe(s)){n.size&&(t[s]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?a.height:a.width),n.size=f.size/f.count,t[s]+=n.size}a.getPadding&&Uk(o,a.getPadding());const l=Math.max(0,e.outerWidth-tw(o,t,"left","right")),d=Math.max(0,e.outerHeight-tw(o,t,"top","bottom")),u=l!==t.w,p=d!==t.h;return t.w=l,t.h=d,n.horizontal?{same:u,other:p}:{same:p,other:u}}function Dz(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Mz(t,e){const n=e.maxPadding;function r(s){const a={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{a[o]=Math.max(e[o],n[o])}),a}return r(t?["left","right"]:["top","bottom"])}function Ol(t,e,n,r){const s=[];let a,o,l,d,u,p;for(a=0,o=t.length,u=0;a<o;++a){l=t[a],d=l.box,d.update(l.width||e.w,l.height||e.h,Mz(l.horizontal,e));const{same:f,other:x}=Pz(e,n,l,r);u|=f&&s.length,p=p||x,d.fullSize||s.push(l)}return u&&Ol(s,e,n,r)||p}function nu(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function nw(t,e,n,r){const s=n.padding;let{x:a,y:o}=e;for(const l of t){const d=l.box,u=r[l.stack]||{placed:0,weight:1},p=l.stackWeight/u.weight||1;if(l.horizontal){const f=e.w*p,x=u.size||d.height;Eh(u.start)&&(o=u.start),d.fullSize?nu(d,s.left,o,n.outerWidth-s.right-s.left,x):nu(d,e.left+u.placed,o,f,x),u.start=o,u.placed+=f,o=d.bottom}else{const f=e.h*p,x=u.size||d.width;Eh(u.start)&&(a=u.start),d.fullSize?nu(d,a,s.top,x,n.outerHeight-s.bottom-s.top):nu(d,a,e.top+u.placed,x,f),u.start=a,u.placed+=f,a=d.right}}e.x=a,e.y=o}var Qn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=or(t.options.layout.padding),a=Math.max(e-s.width,0),o=Math.max(n-s.height,0),l=Tz(t.boxes),d=l.vertical,u=l.horizontal;Ge(t.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const p=d.reduce((b,w)=>w.box.options&&w.box.options.display===!1?b:b+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:a,availableHeight:o,vBoxMaxWidth:a/2/p,hBoxMaxHeight:o/2}),x=Object.assign({},s);Uk(x,or(r));const g=Object.assign({maxPadding:x,w:a,h:o,x:s.left,y:s.top},s),v=Ez(d.concat(u),f);Ol(l.fullSize,g,f,v),Ol(d,g,f,v),Ol(u,g,f,v)&&Ol(d,g,f,v),Dz(g),nw(l.leftAndTop,g,f,v),g.x+=g.w,g.y+=g.h,nw(l.rightAndBottom,g,f,v),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},Ge(l.chartArea,b=>{const w=b.box;Object.assign(w,t.chartArea),w.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class Hk{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class Oz extends Hk{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Tu="$chartjs",Lz={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},rw=t=>t===null||t==="";function Rz(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[Tu]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",rw(s)){const a=H_(t,"width");a!==void 0&&(t.width=a)}if(rw(r))if(t.style.height==="")t.height=t.width/(e||2);else{const a=H_(t,"height");a!==void 0&&(t.height=a)}return t}const Wk=Y$?{passive:!0}:!1;function Az(t,e,n){t&&t.addEventListener(e,n,Wk)}function Iz(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Wk)}function Fz(t,e){const n=Lz[t.type]||t.type,{x:r,y:s}=Oi(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function Dh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function $z(t,e,n){const r=t.canvas,s=new MutationObserver(a=>{let o=!1;for(const l of a)o=o||Dh(l.addedNodes,r),o=o&&!Dh(l.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function zz(t,e,n){const r=t.canvas,s=new MutationObserver(a=>{let o=!1;for(const l of a)o=o||Dh(l.removedNodes,r),o=o&&!Dh(l.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Ic=new Map;let sw=0;function Yk(){const t=window.devicePixelRatio;t!==sw&&(sw=t,Ic.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Bz(t,e){Ic.size||window.addEventListener("resize",Yk),Ic.set(t,e)}function Uz(t){Ic.delete(t),Ic.size||window.removeEventListener("resize",Yk)}function Hz(t,e,n){const r=t.canvas,s=r&&Rv(r);if(!s)return;const a=Sk((l,d)=>{const u=s.clientWidth;n(l,d),u<s.clientWidth&&n()},window),o=new ResizeObserver(l=>{const d=l[0],u=d.contentRect.width,p=d.contentRect.height;u===0&&p===0||a(u,p)});return o.observe(s),Bz(t,a),o}function lm(t,e,n){n&&n.disconnect(),e==="resize"&&Uz(t)}function Wz(t,e,n){const r=t.canvas,s=Sk(a=>{t.ctx!==null&&n(Fz(a,t))},t);return Az(r,e,s),s}class Yz extends Hk{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(Rz(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Tu])return!1;const r=n[Tu].initial;["height","width"].forEach(a=>{const o=r[a];at(o)?n.removeAttribute(a):n.setAttribute(a,o)});const s=r.style||{};return Object.keys(s).forEach(a=>{n.style[a]=s[a]}),n.width=n.width,delete n[Tu],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:$z,detach:zz,resize:Hz}[n]||Wz;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:lm,detach:lm,resize:lm}[n]||Iz)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return W$(e,n,r,s)}isAttached(e){const n=e&&Rv(e);return!!(n&&n.isConnected)}}function Vz(t){return!Lv()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Oz:Yz}var lu;let ga=(lu=class{constructor(){De(this,"x");De(this,"y");De(this,"active",!1);De(this,"options");De(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Lc(this.x)&&Lc(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(a=>{s[a]=r[a]&&r[a].active()?r[a]._to:this[a]}),s}},De(lu,"defaults",{}),De(lu,"defaultRoutes"),lu);function qz(t,e){const n=t.options.ticks,r=Zz(t),s=Math.min(n.maxTicksLimit||r,r),a=n.major.enabled?Gz(e):[],o=a.length,l=a[0],d=a[o-1],u=[];if(o>s)return Qz(e,u,a,o/s),u;const p=Kz(a,e,s);if(o>0){let f,x;const g=o>1?Math.round((d-l)/(o-1)):null;for(ru(e,u,p,at(g)?0:l-g,l),f=0,x=o-1;f<x;f++)ru(e,u,p,a[f],a[f+1]);return ru(e,u,p,d,at(g)?e.length:d+g),u}return ru(e,u,p),u}function Zz(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function Kz(t,e,n){const r=Xz(t),s=e.length/n;if(!r)return Math.max(s,1);const a=z8(r);for(let o=0,l=a.length-1;o<l;o++){const d=a[o];if(d>s)return d}return Math.max(s,1)}function Gz(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function Qz(t,e,n,r){let s=0,a=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===a&&(e.push(t[o]),s++,a=n[s*r])}function ru(t,e,n,r,s){const a=Be(r,0),o=Math.min(Be(s,t.length),t.length);let l=0,d,u,p;for(n=Math.ceil(n),s&&(d=s-r,n=d/Math.floor(d/n)),p=a;p<0;)l++,p=Math.round(a+l*n);for(u=Math.max(a,0);u<o;u++)u===p&&(e.push(t[u]),l++,p=Math.round(a+l*n))}function Xz(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const Jz=t=>t==="left"?"right":t==="right"?"left":t,iw=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,aw=(t,e)=>Math.min(e||t,t);function ow(t,e){const n=[],r=t.length/e,s=t.length;let a=0;for(;a<s;a+=r)n.push(t[Math.floor(a)]);return n}function e7(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),a=t._startPixel,o=t._endPixel,l=1e-6;let d=t.getPixelForTick(s),u;if(!(n&&(r===1?u=Math.max(d-a,o-d):e===0?u=(t.getPixelForTick(1)-d)/2:u=(d-t.getPixelForTick(s-1))/2,d+=s<e?u:-u,d<a-l||d>o+l)))return d}function t7(t,e){Ge(t,n=>{const r=n.gc,s=r.length/2;let a;if(s>e){for(a=0;a<s;++a)delete n.data[r[a]];r.splice(0,s)}})}function _l(t){return t.drawTicks?t.tickLength:0}function lw(t,e){if(!t.display)return 0;const n=on(t.font,e),r=or(t.padding);return($t(t.text)?t.text.length:1)*n.lineHeight+r.height}function n7(t,e){return ma(t,{scale:e,type:"scale"})}function r7(t,e,n){return ma(t,{tick:n,index:e,type:"tick"})}function s7(t,e,n){let r=Cv(t);return(n&&e!=="right"||!n&&e==="right")&&(r=Jz(r)),r}function i7(t,e,n,r){const{top:s,left:a,bottom:o,right:l,chart:d}=t,{chartArea:u,scales:p}=d;let f=0,x,g,v;const b=o-s,w=l-a;if(t.isHorizontal()){if(g=nn(r,a,l),qe(n)){const _=Object.keys(n)[0],N=n[_];v=p[_].getPixelForValue(N)+b-e}else n==="center"?v=(u.bottom+u.top)/2+b-e:v=iw(t,n,e);x=l-a}else{if(qe(n)){const _=Object.keys(n)[0],N=n[_];g=p[_].getPixelForValue(N)-w+e}else n==="center"?g=(u.left+u.right)/2-w+e:g=iw(t,n,e);v=nn(r,o,s),f=n==="left"?-xr:xr}return{titleX:g,titleY:v,maxWidth:x,rotation:f}}class Bo extends ga{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=Pr(e,Number.POSITIVE_INFINITY),n=Pr(n,Number.NEGATIVE_INFINITY),r=Pr(r,Number.POSITIVE_INFINITY),s=Pr(s,Number.NEGATIVE_INFINITY),{min:Pr(e,r),max:Pr(n,s),minDefined:ar(e),maxDefined:ar(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:a}=this.getUserBounds(),o;if(s&&a)return{min:n,max:r};const l=this.getMatchingVisibleMetas();for(let d=0,u=l.length;d<u;++d)o=l[d].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),a||(r=Math.max(r,o.max));return n=a&&n>r?r:n,r=s&&n>r?n:r,{min:Pr(n,Pr(r,n)),max:Pr(r,Pr(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){lt(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:a,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=w$(this,a,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=l<this.ticks.length;this._convertTicksToLabels(d?ow(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=qz(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){lt(this.options.afterUpdate,[this])}beforeSetDimensions(){lt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){lt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),lt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){lt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,a;for(r=0,s=e.length;r<s;r++)a=e[r],a.label=lt(n.callback,[a.value,r,e],this)}afterTickToLabelConversion(){lt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){lt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=aw(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,a=n.maxRotation;let o=s,l,d,u;if(!this._isVisible()||!n.display||s>=a||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const p=this._getLabelSizes(),f=p.widest.width,x=p.highest.height,g=Gn(this.chart.width-f,0,this.maxWidth);l=e.offset?this.maxWidth/r:g/(r-1),f+6>l&&(l=g/(r-(e.offset?.5:1)),d=this.maxHeight-_l(e.grid)-n.padding-lw(e.title,this.chart.options.font),u=Math.sqrt(f*f+x*x),o=W8(Math.min(Math.asin(Gn((p.highest.height+6)/l,-1,1)),Math.asin(Gn(d/u,-1,1))-Math.asin(Gn(x/u,-1,1)))),o=Math.max(s,Math.min(a,o))),this.labelRotation=o}afterCalculateLabelRotation(){lt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){lt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:a}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const d=lw(s,n.options.font);if(l?(e.width=this.maxWidth,e.height=_l(a)+d):(e.height=this.maxHeight,e.width=_l(a)+d),r.display&&this.ticks.length){const{first:u,last:p,widest:f,highest:x}=this._getLabelSizes(),g=r.padding*2,v=Hi(this.labelRotation),b=Math.cos(v),w=Math.sin(v);if(l){const _=r.mirror?0:w*f.width+b*x.height;e.height=Math.min(this.maxHeight,e.height+_+g)}else{const _=r.mirror?0:b*f.width+w*x.height;e.width=Math.min(this.maxWidth,e.width+_+g)}this._calculatePadding(u,p,w,b)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:a,padding:o},position:l}=this.options,d=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const p=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let x=0,g=0;d?u?(x=s*e.width,g=r*n.height):(x=r*e.height,g=s*n.width):a==="start"?g=n.width:a==="end"?x=e.width:a!=="inner"&&(x=e.width/2,g=n.width/2),this.paddingLeft=Math.max((x-p+o)*this.width/(this.width-p),0),this.paddingRight=Math.max((g-f+o)*this.width/(this.width-f),0)}else{let p=n.height/2,f=e.height/2;a==="start"?(p=0,f=e.height):a==="end"&&(p=n.height,f=0),this.paddingTop=p+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){lt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)at(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=ow(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:a}=this,o=[],l=[],d=Math.floor(n/aw(n,r));let u=0,p=0,f,x,g,v,b,w,_,N,S,P,O;for(f=0;f<n;f+=d){if(v=e[f].label,b=this._resolveTickFontOptions(f),s.font=w=b.string,_=a[w]=a[w]||{data:{},gc:[]},N=b.lineHeight,S=P=0,!at(v)&&!$t(v))S=F_(s,_.data,_.gc,S,v),P=N;else if($t(v))for(x=0,g=v.length;x<g;++x)O=v[x],!at(O)&&!$t(O)&&(S=F_(s,_.data,_.gc,S,O),P+=N);o.push(S),l.push(P),u=Math.max(S,u),p=Math.max(P,p)}t7(a,n);const A=o.indexOf(u),R=l.indexOf(p),T=Y=>({width:o[Y]||0,height:l[Y]||0});return{first:T(0),last:T(n-1),widest:T(A),highest:T(R),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return q8(this._alignToPixels?Si(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=r7(this.getContext(),e,r))}return this.$context||(this.$context=n7(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Hi(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),a=this._getLabelSizes(),o=e.autoSkipPadding||0,l=a?a.widest.width+o:0,d=a?a.highest.height+o:0;return this.isHorizontal()?d*r>l*s?l/r:d/s:d*s<l*r?d/r:l/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:a,position:o,border:l}=s,d=a.offset,u=this.isHorizontal(),f=this.ticks.length+(d?1:0),x=_l(a),g=[],v=l.setContext(this.getContext()),b=v.display?v.width:0,w=b/2,_=function(C){return Si(r,C,b)};let N,S,P,O,A,R,T,Y,D,U,ee,G;if(o==="top")N=_(this.bottom),R=this.bottom-x,Y=N-w,U=_(e.top)+w,G=e.bottom;else if(o==="bottom")N=_(this.top),U=e.top,G=_(e.bottom)-w,R=N+w,Y=this.top+x;else if(o==="left")N=_(this.right),A=this.right-x,T=N-w,D=_(e.left)+w,ee=e.right;else if(o==="right")N=_(this.left),D=e.left,ee=_(e.right)-w,A=N+w,T=this.left+x;else if(n==="x"){if(o==="center")N=_((e.top+e.bottom)/2+.5);else if(qe(o)){const C=Object.keys(o)[0],q=o[C];N=_(this.chart.scales[C].getPixelForValue(q))}U=e.top,G=e.bottom,R=N+w,Y=R+x}else if(n==="y"){if(o==="center")N=_((e.left+e.right)/2);else if(qe(o)){const C=Object.keys(o)[0],q=o[C];N=_(this.chart.scales[C].getPixelForValue(q))}A=N-w,T=A-x,D=e.left,ee=e.right}const z=Be(s.ticks.maxTicksLimit,f),V=Math.max(1,Math.ceil(f/z));for(S=0;S<f;S+=V){const C=this.getContext(S),q=a.setContext(C),I=l.setContext(C),X=q.lineWidth,E=q.color,K=I.dash||[],re=I.dashOffset,Q=q.tickWidth,se=q.tickColor,oe=q.tickBorderDash||[],ie=q.tickBorderDashOffset;P=e7(this,S,d),P!==void 0&&(O=Si(r,P,X),u?A=T=D=ee=O:R=Y=U=G=O,g.push({tx1:A,ty1:R,tx2:T,ty2:Y,x1:D,y1:U,x2:ee,y2:G,width:X,color:E,borderDash:K,borderDashOffset:re,tickWidth:Q,tickColor:se,tickBorderDash:oe,tickBorderDashOffset:ie}))}return this._ticksLength=f,this._borderValue=N,g}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:a}=r,o=this.isHorizontal(),l=this.ticks,{align:d,crossAlign:u,padding:p,mirror:f}=a,x=_l(r.grid),g=x+p,v=f?-p:g,b=-Hi(this.labelRotation),w=[];let _,N,S,P,O,A,R,T,Y,D,U,ee,G="middle";if(s==="top")A=this.bottom-v,R=this._getXAxisLabelAlignment();else if(s==="bottom")A=this.top+v,R=this._getXAxisLabelAlignment();else if(s==="left"){const V=this._getYAxisLabelAlignment(x);R=V.textAlign,O=V.x}else if(s==="right"){const V=this._getYAxisLabelAlignment(x);R=V.textAlign,O=V.x}else if(n==="x"){if(s==="center")A=(e.top+e.bottom)/2+g;else if(qe(s)){const V=Object.keys(s)[0],C=s[V];A=this.chart.scales[V].getPixelForValue(C)+g}R=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")O=(e.left+e.right)/2-g;else if(qe(s)){const V=Object.keys(s)[0],C=s[V];O=this.chart.scales[V].getPixelForValue(C)}R=this._getYAxisLabelAlignment(x).textAlign}n==="y"&&(d==="start"?G="top":d==="end"&&(G="bottom"));const z=this._getLabelSizes();for(_=0,N=l.length;_<N;++_){S=l[_],P=S.label;const V=a.setContext(this.getContext(_));T=this.getPixelForTick(_)+a.labelOffset,Y=this._resolveTickFontOptions(_),D=Y.lineHeight,U=$t(P)?P.length:1;const C=U/2,q=V.color,I=V.textStrokeColor,X=V.textStrokeWidth;let E=R;o?(O=T,R==="inner"&&(_===N-1?E=this.options.reverse?"left":"right":_===0?E=this.options.reverse?"right":"left":E="center"),s==="top"?u==="near"||b!==0?ee=-U*D+D/2:u==="center"?ee=-z.highest.height/2-C*D+D:ee=-z.highest.height+D/2:u==="near"||b!==0?ee=D/2:u==="center"?ee=z.highest.height/2-C*D:ee=z.highest.height-U*D,f&&(ee*=-1),b!==0&&!V.showLabelBackdrop&&(O+=D/2*Math.sin(b))):(A=T,ee=(1-U)*D/2);let K;if(V.showLabelBackdrop){const re=or(V.backdropPadding),Q=z.heights[_],se=z.widths[_];let oe=ee-re.top,ie=0-re.left;switch(G){case"middle":oe-=Q/2;break;case"bottom":oe-=Q;break}switch(R){case"center":ie-=se/2;break;case"right":ie-=se;break;case"inner":_===N-1?ie-=se:_>0&&(ie-=se/2);break}K={left:ie,top:oe,width:se+re.width,height:Q+re.height,color:V.backdropColor}}w.push({label:P,font:Y,textOffset:ee,options:{rotation:b,color:q,strokeColor:I,strokeWidth:X,textAlign:E,textBaseline:G,translation:[O,A],backdrop:K}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Hi(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:a}}=this.options,o=this._getLabelSizes(),l=e+a,d=o.widest.width;let u,p;return n==="left"?s?(p=this.right+a,r==="near"?u="left":r==="center"?(u="center",p+=d/2):(u="right",p+=d)):(p=this.right-l,r==="near"?u="right":r==="center"?(u="center",p-=d/2):(u="left",p=this.left)):n==="right"?s?(p=this.left+a,r==="near"?u="right":r==="center"?(u="center",p-=d/2):(u="left",p-=d)):(p=this.left+l,r==="near"?u="left":r==="center"?(u="center",p+=d/2):(u="right",p=this.right)):u="right",{textAlign:u,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:a,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,a,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(a=>a.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,o;const l=(d,u,p)=>{!p.width||!p.color||(r.save(),r.lineWidth=p.width,r.strokeStyle=p.color,r.setLineDash(p.borderDash||[]),r.lineDashOffset=p.borderDashOffset,r.beginPath(),r.moveTo(d.x,d.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(n.display)for(a=0,o=s.length;a<o;++a){const d=s[a];n.drawOnChartArea&&l({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),n.drawTicks&&l({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,a=r.setContext(this.getContext()),o=r.display?a.width:0;if(!o)return;const l=s.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let u,p,f,x;this.isHorizontal()?(u=Si(e,this.left,o)-o/2,p=Si(e,this.right,l)+l/2,f=x=d):(f=Si(e,this.top,o)-o/2,x=Si(e,this.bottom,l)+l/2,u=p=d),n.save(),n.lineWidth=a.width,n.strokeStyle=a.color,n.beginPath(),n.moveTo(u,f),n.lineTo(p,x),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&Tv(r,s);const a=this.getLabelItems(e);for(const o of a){const l=o.options,d=o.font,u=o.label,p=o.textOffset;Ac(r,u,0,p,d,l)}s&&Pv(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const a=on(r.font),o=or(r.padding),l=r.align;let d=a.lineHeight/2;n==="bottom"||n==="center"||qe(n)?(d+=o.bottom,$t(r.text)&&(d+=a.lineHeight*(r.text.length-1))):d+=o.top;const{titleX:u,titleY:p,maxWidth:f,rotation:x}=i7(this,d,n,l);Ac(e,r.text,0,0,a,{color:r.color,maxWidth:f,rotation:x,textAlign:s7(l,n,s),textBaseline:"middle",translation:[u,p]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=Be(e.grid&&e.grid.z,-1),s=Be(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Bo.prototype.draw?[{z:n,draw:a=>{this.draw(a)}}]:[{z:r,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let a,o;for(a=0,o=n.length;a<o;++a){const l=n[a];l[r]===this.id&&(!e||l.type===e)&&s.push(l)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return on(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class su{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;l7(n)&&(r=this.register(n));const s=this.items,a=e.id,o=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in s||(s[a]=e,a7(e,o,r),this.override&&Ct.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in Ct[s]&&(delete Ct[s][r],this.override&&delete oa[r])}}function a7(t,e,n){const r=Oc(Object.create(null),[n?Ct.get(n):{},Ct.get(e),t.defaults]);Ct.set(e,r),t.defaultRoutes&&o7(e,t.defaultRoutes),t.descriptors&&Ct.describe(e,t.descriptors)}function o7(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),a=[t].concat(r).join("."),o=e[n].split("."),l=o.pop(),d=o.join(".");Ct.route(a,s,d,l)})}function l7(t){return"id"in t&&"defaults"in t}class c7{constructor(){this.controllers=new su(rc,"datasets",!0),this.elements=new su(ga,"elements"),this.plugins=new su(Object,"plugins"),this.scales=new su(Bo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const a=r||this._getRegistryForType(s);r||a.isForType(s)||a===this.plugins&&s.id?this._exec(e,a,s):Ge(s,o=>{const l=r||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,n,r){const s=kv(e);lt(r["before"+s],[],r),n[e](r),lt(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var Lr=new c7;class d7{constructor(){this._init=[]}notify(e,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const a=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(a,e,n,r);return n==="afterDestroy"&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,s){s=s||{};for(const a of e){const o=a.plugin,l=o[r],d=[n,s,a.options];if(lt(l,d,o)===!1&&s.cancelable)return!1}return!0}invalidate(){at(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=Be(r.options&&r.options.plugins,{}),a=u7(r);return s===!1&&!n?[]:p7(e,a,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(a,o)=>a.filter(l=>!o.some(d=>l.plugin.id===d.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function u7(t){const e={},n=[],r=Object.keys(Lr.plugins.items);for(let a=0;a<r.length;a++)n.push(Lr.getPlugin(r[a]));const s=t.plugins||[];for(let a=0;a<s.length;a++){const o=s[a];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function h7(t,e){return!e&&t===!1?null:t===!0?{}:t}function p7(t,{plugins:e,localIds:n},r,s){const a=[],o=t.getContext();for(const l of e){const d=l.id,u=h7(r[d],s);u!==null&&a.push({plugin:l,options:f7(t.config,{plugin:l,local:n[d]},u,o)})}return a}function f7(t,{plugin:e,local:n},r,s){const a=t.pluginScopeKeys(e),o=t.getOptionScopes(r,a);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function qg(t,e){const n=Ct.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function m7(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function g7(t,e){return t===e?"_index_":"_value_"}function cw(t){if(t==="x"||t==="y"||t==="r")return t}function x7(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Zg(t,...e){if(cw(t))return t;for(const n of e){const r=n.axis||x7(n.position)||t.length>1&&cw(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function dw(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function v7(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return dw(t,"x",n[0])||dw(t,"y",n[0])}return{}}function y7(t,e){const n=oa[t.type]||{scales:{}},r=e.scales||{},s=qg(t.type,e),a=Object.create(null);return Object.keys(r).forEach(o=>{const l=r[o];if(!qe(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const d=Zg(o,l,v7(o,t),Ct.scales[l.type]),u=g7(d,s),p=n.scales||{};a[o]=Xl(Object.create(null),[{axis:d},l,p[d],p[u]])}),t.data.datasets.forEach(o=>{const l=o.type||t.type,d=o.indexAxis||qg(l,e),p=(oa[l]||{}).scales||{};Object.keys(p).forEach(f=>{const x=m7(f,d),g=o[x+"AxisID"]||x;a[g]=a[g]||Object.create(null),Xl(a[g],[{axis:x},r[g],p[f]])})}),Object.keys(a).forEach(o=>{const l=a[o];Xl(l,[Ct.scales[l.type],Ct.scale])}),a}function Vk(t){const e=t.options||(t.options={});e.plugins=Be(e.plugins,{}),e.scales=y7(t,e)}function qk(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function b7(t){return t=t||{},t.data=qk(t.data),Vk(t),t}const uw=new Map,Zk=new Set;function iu(t,e){let n=uw.get(t);return n||(n=e(),uw.set(t,n),Zk.add(n)),n}const wl=(t,e,n)=>{const r=Ch(e,n);r!==void 0&&t.add(r)};class _7{constructor(e){this._config=b7(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=qk(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Vk(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return iu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return iu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return iu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return iu(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:a}=this,o=this._cachedScopes(e,r),l=o.get(n);if(l)return l;const d=new Set;n.forEach(p=>{e&&(d.add(e),p.forEach(f=>wl(d,e,f))),p.forEach(f=>wl(d,s,f)),p.forEach(f=>wl(d,oa[a]||{},f)),p.forEach(f=>wl(d,Ct,f)),p.forEach(f=>wl(d,Wg,f))});const u=Array.from(d);return u.length===0&&u.push(Object.create(null)),Zk.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:e,type:n}=this;return[e,oa[n]||{},Ct.datasets[n]||{},{type:n},Ct,Wg]}resolveNamedOptions(e,n,r,s=[""]){const a={$shared:!0},{resolver:o,subPrefixes:l}=hw(this._resolverCache,e,s);let d=o;if(j7(o,n)){a.$shared=!1,r=ai(r)?r():r;const u=this.createResolver(e,r,l);d=Eo(o,r,u)}for(const u of n)a[u]=d[u];return a}createResolver(e,n,r=[""],s){const{resolver:a}=hw(this._resolverCache,e,r);return qe(n)?Eo(a,n,void 0,s):a}}function hw(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let a=r.get(s);return a||(a={resolver:Dv(e,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},r.set(s,a)),a}const w7=t=>qe(t)&&Object.getOwnPropertyNames(t).some(e=>ai(t[e]));function j7(t,e){const{isScriptable:n,isIndexable:r}=Dk(t);for(const s of e){const a=n(s),o=r(s),l=(o||a)&&t[s];if(a&&(ai(l)||w7(l))||o&&$t(l))return!0}return!1}var N7="4.4.9";const k7=["top","bottom","left","right","chartArea"];function pw(t,e){return t==="top"||t==="bottom"||k7.indexOf(t)===-1&&e==="x"}function fw(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function mw(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),lt(n&&n.onComplete,[t],e)}function S7(t){const e=t.chart,n=e.options.animation;lt(n&&n.onProgress,[t],e)}function Kk(t){return Lv()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Pu={},gw=t=>{const e=Kk(t);return Object.values(Pu).filter(n=>n.canvas===e).pop()};function C7(t,e,n){const r=Object.keys(t);for(const s of r){const a=+s;if(a>=e){const o=t[s];delete t[s],(n>0||a>e)&&(t[a+n]=o)}}}function E7(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var Ss;let Xc=(Ss=class{static register(...e){Lr.add(...e),xw()}static unregister(...e){Lr.remove(...e),xw()}constructor(e,n){const r=this.config=new _7(n),s=Kk(e),a=gw(s);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||Vz(s)),this.platform.updateConfig(r);const l=this.platform.acquireContext(s,o.aspectRatio),d=l&&l.canvas,u=d&&d.height,p=d&&d.width;if(this.id=D8(),this.ctx=l,this.canvas=d,this.width=p,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new d7,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=X8(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],Pu[this.id]=this,!l||!d){console.error("Failed to create chart: can't acquire context from the given item");return}ts.listen(this,"complete",mw),ts.listen(this,"progress",S7),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:a}=this;return at(e)?n&&a?a:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Lr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():U_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return $_(this.canvas,this.ctx),this}stop(){return ts.stop(this),this}resize(e,n){ts.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,a=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,a),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,U_(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),lt(r.onResize,[this,o],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ge(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,l)=>(o[l]=!1,o),{});let a=[];n&&(a=a.concat(Object.keys(n).map(o=>{const l=n[o],d=Zg(o,l),u=d==="r",p=d==="x";return{options:l,dposition:u?"chartArea":p?"bottom":"left",dtype:u?"radialLinear":p?"category":"linear"}}))),Ge(a,o=>{const l=o.options,d=l.id,u=Zg(d,l),p=Be(l.type,o.dtype);(l.position===void 0||pw(l.position,u)!==pw(o.dposition))&&(l.position=o.dposition),s[d]=!0;let f=null;if(d in r&&r[d].type===p)f=r[d];else{const x=Lr.getScale(p);f=new x({id:d,type:p,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(l,e)}),Ge(s,(o,l)=>{o||delete r[l]}),Ge(r,o=>{Qn.configure(this,o,o.options),Qn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,a)=>s.index-a.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(fw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(a=>a===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const a=n[r];let o=this.getDatasetMeta(r);const l=a.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=l,o.indexAxis=a.indexAxis||qg(l,this.options),o.order=a.order||0,o.index=r,o.label=""+a.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const d=Lr.getController(l),{datasetElementType:u,dataElementType:p}=Ct.datasets[l];Object.assign(d,{dataElementType:Lr.getElement(p),datasetElementType:u&&Lr.getElement(u)}),o.controller=new d(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ge(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,p=this.data.datasets.length;u<p;u++){const{controller:f}=this.getDatasetMeta(u),x=!s&&a.indexOf(f)===-1;f.buildOrUpdateElements(x),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||Ge(a,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(fw("z","_idx"));const{_active:l,_lastEvent:d}=this;d?this._eventHandler(d,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Ge(this.scales,e=>{Qn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!T_(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:a}of n){const o=r==="_removeElements"?-a:a;C7(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=a=>new Set(e.filter(o=>o[0]===a).map((o,l)=>l+","+o.splice(1).join(","))),s=r(0);for(let a=1;a<n;a++)if(!T_(s,r(a)))return;return Array.from(s).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Qn.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Ge(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,a)=>{s._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,ai(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ts.has(this)?this.attached&&!ts.running(this)&&ts.start(this):(this.draw(),mw({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,a;for(s=0,a=n.length;s<a;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=iz(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&Tv(n,s),e.controller.draw(),s&&Pv(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Rc(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const a=kz.modes[n];return typeof a=="function"?a(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(a=>a&&a._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=ma(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",a=this.getDatasetMeta(e),o=a.controller._resolveAnimations(void 0,s);Eh(n)?(a.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(a,{visible:r}),this.update(l=>l.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),ts.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),$_(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Pu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(a,o)=>{n.addEventListener(this,a,o),e[a]=o},s=(a,o,l)=>{a.offsetX=o,a.offsetY=l,this._eventHandler(a)};Ge(this.options.events,a=>r(a,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(d,u)=>{n.addEventListener(this,d,u),e[d]=u},s=(d,u)=>{e[d]&&(n.removeEventListener(this,d,u),delete e[d])},a=(d,u)=>{this.canvas&&this.resize(d,u)};let o;const l=()=>{s("attach",l),this.attached=!0,this.resize(),r("resize",a),r("detach",o)};o=()=>{this.attached=!1,s("resize",a),this._stop(),this._resize(0,0),r("attach",l)},n.isAttached(this.canvas)?l():o()}unbindEvents(){Ge(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ge(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let a,o,l,d;for(n==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+s+"DatasetHoverStyle"]()),l=0,d=e.length;l<d;++l){o=e[l];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:a,index:o})=>{const l=this.getDatasetMeta(a);if(!l)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:l.data[o],index:o}});!kh(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,a=(d,u)=>d.filter(p=>!u.some(f=>p.datasetIndex===f.datasetIndex&&p.index===f.index)),o=a(n,e),l=r?e:a(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const a=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(a||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:a}=this,o=n,l=this._getActiveElements(e,s,r,o),d=I8(e),u=E7(e,this._lastEvent,r,d);r&&(this._lastEvent=null,lt(a.onHover,[e,l,this],this),d&&lt(a.onClick,[e,l,this],this));const p=!kh(l,s);return(p||n)&&(this._active=l,this._updateHoverStyles(l,s,n)),this._lastEvent=u,p}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,s)}},De(Ss,"defaults",Ct),De(Ss,"instances",Pu),De(Ss,"overrides",oa),De(Ss,"registry",Lr),De(Ss,"version",N7),De(Ss,"getChart",gw),Ss);function xw(){return Ge(Xc.instances,t=>t._plugins.invalidate())}function Gk(t,e,n=e){t.lineCap=Be(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Be(n.borderDash,e.borderDash)),t.lineDashOffset=Be(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Be(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Be(n.borderWidth,e.borderWidth),t.strokeStyle=Be(n.borderColor,e.borderColor)}function T7(t,e,n){t.lineTo(n.x,n.y)}function P7(t){return t.stepped?h$:t.tension||t.cubicInterpolationMode==="monotone"?p$:T7}function Qk(t,e,n={}){const r=t.length,{start:s=0,end:a=r-1}=n,{start:o,end:l}=e,d=Math.max(s,o),u=Math.min(a,l),p=s<o&&a<o||s>l&&a>l;return{count:r,start:d,loop:e.loop,ilen:u<d&&!p?r+u-d:u-d}}function D7(t,e,n,r){const{points:s,options:a}=e,{count:o,start:l,loop:d,ilen:u}=Qk(s,n,r),p=P7(a);let{move:f=!0,reverse:x}=r||{},g,v,b;for(g=0;g<=u;++g)v=s[(l+(x?u-g:g))%o],!v.skip&&(f?(t.moveTo(v.x,v.y),f=!1):p(t,b,v,x,a.stepped),b=v);return d&&(v=s[(l+(x?u:0))%o],p(t,b,v,x,a.stepped)),!!d}function M7(t,e,n,r){const s=e.points,{count:a,start:o,ilen:l}=Qk(s,n,r),{move:d=!0,reverse:u}=r||{};let p=0,f=0,x,g,v,b,w,_;const N=P=>(o+(u?l-P:P))%a,S=()=>{b!==w&&(t.lineTo(p,w),t.lineTo(p,b),t.lineTo(p,_))};for(d&&(g=s[N(0)],t.moveTo(g.x,g.y)),x=0;x<=l;++x){if(g=s[N(x)],g.skip)continue;const P=g.x,O=g.y,A=P|0;A===v?(O<b?b=O:O>w&&(w=O),p=(f*p+P)/++f):(S(),t.lineTo(P,O),v=A,f=0,b=w=O),_=O}S()}function Kg(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?M7:D7}function O7(t){return t.stepped?V$:t.tension||t.cubicInterpolationMode==="monotone"?q$:Li}function L7(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),Gk(t,e.options),t.stroke(s)}function R7(t,e,n,r){const{segments:s,options:a}=e,o=Kg(e);for(const l of s)Gk(t,a,l.style),t.beginPath(),o(t,e,l,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const A7=typeof Path2D=="function";function I7(t,e,n,r){A7&&!e.options.segment?L7(t,e,n,r):R7(t,e,n,r)}class Xa extends ga{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;F$(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=tz(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],a=this.points,o=X$(this,{property:n,start:s,end:s});if(!o.length)return;const l=[],d=O7(r);let u,p;for(u=0,p=o.length;u<p;++u){const{start:f,end:x}=o[u],g=a[f],v=a[x];if(g===v){l.push(g);continue}const b=Math.abs((s-g[n])/(v[n]-g[n])),w=d(g,v,b,r.stepped);w[n]=e[n],l.push(w)}return l.length===1?l[0]:l}pathSegment(e,n,r){return Kg(this)(e,this,n,r)}path(e,n,r){const s=this.segments,a=Kg(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const l of s)o&=a(e,this,l,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),I7(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}De(Xa,"id","line"),De(Xa,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),De(Xa,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),De(Xa,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function vw(t,e,n,r){const s=t.options,{[n]:a}=t.getProps([n],r);return Math.abs(e-a)<s.radius+s.hitRadius}class sc extends ga{constructor(n){super();De(this,"parsed");De(this,"skip");De(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const a=this.options,{x:o,y:l}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(r-l,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(n,r){return vw(this,n,"x",r)}inYRange(n,r){return vw(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!Rc(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,Yg(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}De(sc,"id","point"),De(sc,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),De(sc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const yw=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},F7=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class bw extends ga{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=lt(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=on(r.font),a=s.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:d}=yw(r,a);let u,p;n.font=s.string,this.isHorizontal()?(u=this.maxWidth,p=this._fitRows(o,a,l,d)+10):(p=this.maxHeight,u=this._fitCols(o,s,l,d)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(p,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:a,maxWidth:o,options:{labels:{padding:l}}}=this,d=this.legendHitBoxes=[],u=this.lineWidths=[0],p=s+l;let f=e;a.textAlign="left",a.textBaseline="middle";let x=-1,g=-p;return this.legendItems.forEach((v,b)=>{const w=r+n/2+a.measureText(v.text).width;(b===0||u[u.length-1]+w+2*l>o)&&(f+=p,u[u.length-(b>0?0:1)]=0,g+=p,x++),d[b]={left:0,top:g,row:x,width:w,height:s},u[u.length-1]+=w+l}),f}_fitCols(e,n,r,s){const{ctx:a,maxHeight:o,options:{labels:{padding:l}}}=this,d=this.legendHitBoxes=[],u=this.columnSizes=[],p=o-e;let f=l,x=0,g=0,v=0,b=0;return this.legendItems.forEach((w,_)=>{const{itemWidth:N,itemHeight:S}=$7(r,n,a,w,s);_>0&&g+S+2*l>p&&(f+=x+l,u.push({width:x,height:g}),v+=x+l,b++,x=g=0),d[_]={left:v,top:g,col:b,width:N,height:S},x=Math.max(x,N),g+=S+l}),f+=x,u.push({width:x,height:g}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:a}}=this,o=oo(a,this.left,this.width);if(this.isHorizontal()){let l=0,d=nn(r,this.left+s,this.right-this.lineWidths[l]);for(const u of n)l!==u.row&&(l=u.row,d=nn(r,this.left+s,this.right-this.lineWidths[l])),u.top+=this.top+e+s,u.left=o.leftForLtr(o.x(d),u.width),d+=u.width+s}else{let l=0,d=nn(r,this.top+e+s,this.bottom-this.columnSizes[l].height);for(const u of n)u.col!==l&&(l=u.col,d=nn(r,this.top+e+s,this.bottom-this.columnSizes[l].height)),u.top=d,u.left+=this.left+s,u.left=o.leftForLtr(o.x(u.left),u.width),d+=u.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Tv(e,this),this._draw(),Pv(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:a,labels:o}=e,l=Ct.color,d=oo(e.rtl,this.left,this.width),u=on(o.font),{padding:p}=o,f=u.size,x=f/2;let g;this.drawTitle(),s.textAlign=d.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=u.string;const{boxWidth:v,boxHeight:b,itemHeight:w}=yw(o,f),_=function(A,R,T){if(isNaN(v)||v<=0||isNaN(b)||b<0)return;s.save();const Y=Be(T.lineWidth,1);if(s.fillStyle=Be(T.fillStyle,l),s.lineCap=Be(T.lineCap,"butt"),s.lineDashOffset=Be(T.lineDashOffset,0),s.lineJoin=Be(T.lineJoin,"miter"),s.lineWidth=Y,s.strokeStyle=Be(T.strokeStyle,l),s.setLineDash(Be(T.lineDash,[])),o.usePointStyle){const D={radius:b*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:Y},U=d.xPlus(A,v/2),ee=R+x;Tk(s,D,U,ee,o.pointStyleWidth&&v)}else{const D=R+Math.max((f-b)/2,0),U=d.leftForLtr(A,v),ee=nc(T.borderRadius);s.beginPath(),Object.values(ee).some(G=>G!==0)?Vg(s,{x:U,y:D,w:v,h:b,radius:ee}):s.rect(U,D,v,b),s.fill(),Y!==0&&s.stroke()}s.restore()},N=function(A,R,T){Ac(s,T.text,A,R+w/2,u,{strikethrough:T.hidden,textAlign:d.textAlign(T.textAlign)})},S=this.isHorizontal(),P=this._computeTitleHeight();S?g={x:nn(a,this.left+p,this.right-r[0]),y:this.top+p+P,line:0}:g={x:this.left+p,y:nn(a,this.top+P+p,this.bottom-n[0].height),line:0},Ak(this.ctx,e.textDirection);const O=w+p;this.legendItems.forEach((A,R)=>{s.strokeStyle=A.fontColor,s.fillStyle=A.fontColor;const T=s.measureText(A.text).width,Y=d.textAlign(A.textAlign||(A.textAlign=o.textAlign)),D=v+x+T;let U=g.x,ee=g.y;d.setWidth(this.width),S?R>0&&U+D+p>this.right&&(ee=g.y+=O,g.line++,U=g.x=nn(a,this.left+p,this.right-r[g.line])):R>0&&ee+O>this.bottom&&(U=g.x=U+n[g.line].width+p,g.line++,ee=g.y=nn(a,this.top+P+p,this.bottom-n[g.line].height));const G=d.x(U);if(_(G,ee,A),U=J8(Y,U+v+x,S?U+D:this.right,e.rtl),N(d.x(U),ee,A),S)g.x+=D+p;else if(typeof A.text!="string"){const z=u.lineHeight;g.y+=Xk(A,z)+p}else g.y+=O}),Ik(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=on(n.font),s=or(n.padding);if(!n.display)return;const a=oo(e.rtl,this.left,this.width),o=this.ctx,l=n.position,d=r.size/2,u=s.top+d;let p,f=this.left,x=this.width;if(this.isHorizontal())x=Math.max(...this.lineWidths),p=this.top+u,f=nn(e.align,f,this.right-x);else{const v=this.columnSizes.reduce((b,w)=>Math.max(b,w.height),0);p=u+nn(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const g=nn(l,f,f+x);o.textAlign=a.textAlign(Cv(l)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Ac(o,n.text,g,p,r)}_computeTitleHeight(){const e=this.options.title,n=on(e.font),r=or(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,a;if(Ml(e,this.left,this.right)&&Ml(n,this.top,this.bottom)){for(a=this.legendHitBoxes,r=0;r<a.length;++r)if(s=a[r],Ml(e,s.left,s.left+s.width)&&Ml(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!U7(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,a=F7(s,r);s&&!a&&lt(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!a&&lt(n.onHover,[e,r,this],this)}else r&&lt(n.onClick,[e,r,this],this)}}function $7(t,e,n,r,s){const a=z7(r,t,e,n),o=B7(s,r,e.lineHeight);return{itemWidth:a,itemHeight:o}}function z7(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((a,o)=>a.length>o.length?a:o)),e+n.size/2+r.measureText(s).width}function B7(t,e,n){let r=t;return typeof e.text!="string"&&(r=Xk(e,n)),r}function Xk(t,e){const n=t.text?t.text.length:0;return e*n}function U7(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Jk={id:"legend",_element:bw,start(t,e,n){const r=t.legend=new bw({ctx:t.ctx,options:n,chart:t});Qn.configure(t,r,n),Qn.addBox(t,r)},stop(t){Qn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Qn.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:a,useBorderRadius:o,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(d=>{const u=d.controller.getStyle(n?0:void 0),p=or(u.borderWidth);return{text:e[d.index].label,fillStyle:u.backgroundColor,fontColor:a,hidden:!d.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:s||u.textAlign,borderRadius:o&&(l||u.borderRadius),datasetIndex:d.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class eS extends ga{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=$t(r.text)?r.text.length:1;this._padding=or(r.padding);const a=s*on(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:a,options:o}=this,l=o.align;let d=0,u,p,f;return this.isHorizontal()?(p=nn(l,r,a),f=n+e,u=a-r):(o.position==="left"?(p=r+e,f=nn(l,s,n),d=Bt*-.5):(p=a-e,f=nn(l,n,s),d=Bt*.5),u=s-n),{titleX:p,titleY:f,maxWidth:u,rotation:d}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=on(n.font),a=r.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:d,rotation:u}=this._drawArgs(a);Ac(e,n.text,0,0,r,{color:n.color,maxWidth:d,rotation:u,textAlign:Cv(n.align),textBaseline:"middle",translation:[o,l]})}}function H7(t,e){const n=new eS({ctx:t.ctx,options:e,chart:t});Qn.configure(t,n,e),Qn.addBox(t,n),t.titleBlock=n}var tS={id:"title",_element:eS,start(t,e,n){H7(t,n)},stop(t){const e=t.titleBlock;Qn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Qn.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ll={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,a=0;for(e=0,n=t.length;e<n;++e){const l=t[e].element;if(l&&l.hasValue()){const d=l.tooltipPosition();r.add(d.x),s+=d.y,++a}}return a===0||r.size===0?!1:{x:[...r].reduce((l,d)=>l+d)/r.size,y:s/a}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,a,o,l;for(a=0,o=t.length;a<o;++a){const d=t[a].element;if(d&&d.hasValue()){const u=d.getCenterPoint(),p=Hg(e,u);p<s&&(s=p,l=d)}}if(l){const d=l.tooltipPosition();n=d.x,r=d.y}return{x:n,y:r}}};function Mr(t,e){return e&&($t(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ns(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function W7(t,e){const{element:n,datasetIndex:r,index:s}=e,a=t.getDatasetMeta(r).controller,{label:o,value:l}=a.getLabelAndValue(s);return{chart:t,label:o,parsed:a.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:l,dataset:a.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function _w(t,e){const n=t.chart.ctx,{body:r,footer:s,title:a}=t,{boxWidth:o,boxHeight:l}=e,d=on(e.bodyFont),u=on(e.titleFont),p=on(e.footerFont),f=a.length,x=s.length,g=r.length,v=or(e.padding);let b=v.height,w=0,_=r.reduce((P,O)=>P+O.before.length+O.lines.length+O.after.length,0);if(_+=t.beforeBody.length+t.afterBody.length,f&&(b+=f*u.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),_){const P=e.displayColors?Math.max(l,d.lineHeight):d.lineHeight;b+=g*P+(_-g)*d.lineHeight+(_-1)*e.bodySpacing}x&&(b+=e.footerMarginTop+x*p.lineHeight+(x-1)*e.footerSpacing);let N=0;const S=function(P){w=Math.max(w,n.measureText(P).width+N)};return n.save(),n.font=u.string,Ge(t.title,S),n.font=d.string,Ge(t.beforeBody.concat(t.afterBody),S),N=e.displayColors?o+2+e.boxPadding:0,Ge(r,P=>{Ge(P.before,S),Ge(P.lines,S),Ge(P.after,S)}),N=0,n.font=p.string,Ge(t.footer,S),n.restore(),w+=v.width,{width:w,height:b}}function Y7(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function V7(t,e,n,r){const{x:s,width:a}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+a+o>e.width||t==="right"&&s-a-o<0)return!0}function q7(t,e,n,r){const{x:s,width:a}=n,{width:o,chartArea:{left:l,right:d}}=t;let u="center";return r==="center"?u=s<=(l+d)/2?"left":"right":s<=a/2?u="left":s>=o-a/2&&(u="right"),V7(u,t,e,n)&&(u="center"),u}function ww(t,e,n){const r=n.yAlign||e.yAlign||Y7(t,n);return{xAlign:n.xAlign||e.xAlign||q7(t,e,n,r),yAlign:r}}function Z7(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function K7(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function jw(t,e,n,r){const{caretSize:s,caretPadding:a,cornerRadius:o}=t,{xAlign:l,yAlign:d}=n,u=s+a,{topLeft:p,topRight:f,bottomLeft:x,bottomRight:g}=nc(o);let v=Z7(e,l);const b=K7(e,d,u);return d==="center"?l==="left"?v+=u:l==="right"&&(v-=u):l==="left"?v-=Math.max(p,x)+s:l==="right"&&(v+=Math.max(f,g)+s),{x:Gn(v,0,r.width-e.width),y:Gn(b,0,r.height-e.height)}}function au(t,e,n){const r=or(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function Nw(t){return Mr([],ns(t))}function G7(t,e,n){return ma(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function kw(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const nS={beforeTitle:es,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:es,beforeBody:es,beforeLabel:es,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return at(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:es,afterBody:es,beforeFooter:es,footer:es,afterFooter:es};function vn(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?nS[e].call(n,r):s}class Gg extends ga{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,a=new $k(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=G7(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=vn(r,"beforeTitle",this,e),a=vn(r,"title",this,e),o=vn(r,"afterTitle",this,e);let l=[];return l=Mr(l,ns(s)),l=Mr(l,ns(a)),l=Mr(l,ns(o)),l}getBeforeBody(e,n){return Nw(vn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return Ge(e,a=>{const o={before:[],lines:[],after:[]},l=kw(r,a);Mr(o.before,ns(vn(l,"beforeLabel",this,a))),Mr(o.lines,vn(l,"label",this,a)),Mr(o.after,ns(vn(l,"afterLabel",this,a))),s.push(o)}),s}getAfterBody(e,n){return Nw(vn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=vn(r,"beforeFooter",this,e),a=vn(r,"footer",this,e),o=vn(r,"afterFooter",this,e);let l=[];return l=Mr(l,ns(s)),l=Mr(l,ns(a)),l=Mr(l,ns(o)),l}_createItems(e){const n=this._active,r=this.chart.data,s=[],a=[],o=[];let l=[],d,u;for(d=0,u=n.length;d<u;++d)l.push(W7(this.chart,n[d]));return e.filter&&(l=l.filter((p,f,x)=>e.filter(p,f,x,r))),e.itemSort&&(l=l.sort((p,f)=>e.itemSort(p,f,r))),Ge(l,p=>{const f=kw(e.callbacks,p);s.push(vn(f,"labelColor",this,p)),a.push(vn(f,"labelPointStyle",this,p)),o.push(vn(f,"labelTextColor",this,p))}),this.labelColors=s,this.labelPointStyles=a,this.labelTextColors=o,this.dataPoints=l,l}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let a,o=[];if(!s.length)this.opacity!==0&&(a={opacity:0});else{const l=Ll[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const d=this._size=_w(this,r),u=Object.assign({},l,d),p=ww(this.chart,r,u),f=jw(r,u,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,a={opacity:1,x:f.x,y:f.y,width:d.width,height:d.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const a=this.getCaretPosition(e,r,s);n.lineTo(a.x1,a.y1),n.lineTo(a.x2,a.y2),n.lineTo(a.x3,a.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:a}=this,{caretSize:o,cornerRadius:l}=r,{topLeft:d,topRight:u,bottomLeft:p,bottomRight:f}=nc(l),{x,y:g}=e,{width:v,height:b}=n;let w,_,N,S,P,O;return a==="center"?(P=g+b/2,s==="left"?(w=x,_=w-o,S=P+o,O=P-o):(w=x+v,_=w+o,S=P-o,O=P+o),N=w):(s==="left"?_=x+Math.max(d,p)+o:s==="right"?_=x+v-Math.max(u,f)-o:_=this.caretX,a==="top"?(S=g,P=S-o,w=_-o,N=_+o):(S=g+b,P=S+o,w=_+o,N=_-o),O=S),{x1:w,x2:_,x3:N,y1:S,y2:P,y3:O}}drawTitle(e,n,r){const s=this.title,a=s.length;let o,l,d;if(a){const u=oo(r.rtl,this.x,this.width);for(e.x=au(this,r.titleAlign,r),n.textAlign=u.textAlign(r.titleAlign),n.textBaseline="middle",o=on(r.titleFont),l=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,d=0;d<a;++d)n.fillText(s[d],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,d+1===a&&(e.y+=r.titleMarginBottom-l)}}_drawColorBox(e,n,r,s,a){const o=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:d,boxWidth:u}=a,p=on(a.bodyFont),f=au(this,"left",a),x=s.x(f),g=d<p.lineHeight?(p.lineHeight-d)/2:0,v=n.y+g;if(a.usePointStyle){const b={radius:Math.min(u,d)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},w=s.leftForLtr(x,u)+u/2,_=v+d/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,Yg(e,b,w,_),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Yg(e,b,w,_)}else{e.lineWidth=qe(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const b=s.leftForLtr(x,u),w=s.leftForLtr(s.xPlus(x,1),u-2),_=nc(o.borderRadius);Object.values(_).some(N=>N!==0)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,Vg(e,{x:b,y:v,w:u,h:d,radius:_}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Vg(e,{x:w,y:v+1,w:u-2,h:d-2,radius:_}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(b,v,u,d),e.strokeRect(b,v,u,d),e.fillStyle=o.backgroundColor,e.fillRect(w,v+1,u-2,d-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:a,bodyAlign:o,displayColors:l,boxHeight:d,boxWidth:u,boxPadding:p}=r,f=on(r.bodyFont);let x=f.lineHeight,g=0;const v=oo(r.rtl,this.x,this.width),b=function(T){n.fillText(T,v.x(e.x+g),e.y+x/2),e.y+=x+a},w=v.textAlign(o);let _,N,S,P,O,A,R;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=au(this,w,r),n.fillStyle=r.bodyColor,Ge(this.beforeBody,b),g=l&&w!=="right"?o==="center"?u/2+p:u+2+p:0,P=0,A=s.length;P<A;++P){for(_=s[P],N=this.labelTextColors[P],n.fillStyle=N,Ge(_.before,b),S=_.lines,l&&S.length&&(this._drawColorBox(n,e,P,v,r),x=Math.max(f.lineHeight,d)),O=0,R=S.length;O<R;++O)b(S[O]),x=f.lineHeight;Ge(_.after,b)}g=0,x=f.lineHeight,Ge(this.afterBody,b),e.y-=a}drawFooter(e,n,r){const s=this.footer,a=s.length;let o,l;if(a){const d=oo(r.rtl,this.x,this.width);for(e.x=au(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=d.textAlign(r.footerAlign),n.textBaseline="middle",o=on(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,l=0;l<a;++l)n.fillText(s[l],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:a,yAlign:o}=this,{x:l,y:d}=e,{width:u,height:p}=r,{topLeft:f,topRight:x,bottomLeft:g,bottomRight:v}=nc(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(l+f,d),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(l+u-x,d),n.quadraticCurveTo(l+u,d,l+u,d+x),o==="center"&&a==="right"&&this.drawCaret(e,n,r,s),n.lineTo(l+u,d+p-v),n.quadraticCurveTo(l+u,d+p,l+u-v,d+p),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(l+g,d+p),n.quadraticCurveTo(l,d+p,l,d+p-g),o==="center"&&a==="left"&&this.drawCaret(e,n,r,s),n.lineTo(l,d+f),n.quadraticCurveTo(l,d,l+f,d),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,a=r&&r.y;if(s||a){const o=Ll[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=_w(this,e),d=Object.assign({},o,this._size),u=ww(n,e,d),p=jw(e,d,u,n);(s._to!==p.x||a._to!==p.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},a={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=or(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(e.save(),e.globalAlpha=r,this.drawBackground(a,e,s,n),Ak(e,n.textDirection),a.y+=o.top,this.drawTitle(a,e,n),this.drawBody(a,e,n),this.drawFooter(a,e,n),Ik(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:l,index:d})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[d],index:d}}),a=!kh(r,s),o=this._positionChanged(s,n);(a||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,a=this._active||[],o=this._getActiveElements(e,a,n,r),l=this._positionChanged(o,e),d=n||!kh(o,a)||l;return d&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),d}_getActiveElements(e,n,r,s){const a=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,a.mode,a,r);return a.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:a}=this,o=Ll[a.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}De(Gg,"positioners",Ll);var rS={id:"tooltip",_element:Gg,positioners:Ll,afterInit(t,e,n){n&&(t.tooltip=new Gg({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:nS},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Q7=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function X7(t,e,n,r){const s=t.indexOf(e);if(s===-1)return Q7(t,e,n,r);const a=t.lastIndexOf(e);return s!==a?n:s}const J7=(t,e)=>t===null?null:Gn(Math.round(t),0,e);function Sw(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Mh extends Bo{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:a}of n)r[s]===a&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(at(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:X7(r,e,Be(n,e),this._addedLabels),J7(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let a=this.getLabels();a=e===0&&n===a.length-1?a:a.slice(e,n+1),this._valueRange=Math.max(a.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return Sw.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}De(Mh,"id","category"),De(Mh,"defaults",{ticks:{callback:Sw}});function eB(t,e){const n=[],{bounds:s,step:a,min:o,max:l,precision:d,count:u,maxTicks:p,maxDigits:f,includeBounds:x}=t,g=a||1,v=p-1,{min:b,max:w}=e,_=!at(o),N=!at(l),S=!at(u),P=(w-b)/(f+1);let O=D_((w-b)/v/g)*g,A,R,T,Y;if(O<1e-14&&!_&&!N)return[{value:b},{value:w}];Y=Math.ceil(w/O)-Math.floor(b/O),Y>v&&(O=D_(Y*O/v/g)*g),at(d)||(A=Math.pow(10,d),O=Math.ceil(O*A)/A),s==="ticks"?(R=Math.floor(b/O)*O,T=Math.ceil(w/O)*O):(R=b,T=w),_&&N&&a&&U8((l-o)/a,O/1e3)?(Y=Math.round(Math.min((l-o)/O,p)),O=(l-o)/Y,R=o,T=l):S?(R=_?o:R,T=N?l:T,Y=u-1,O=(T-R)/Y):(Y=(T-R)/O,Jl(Y,Math.round(Y),O/1e3)?Y=Math.round(Y):Y=Math.ceil(Y));const D=Math.max(M_(O),M_(R));A=Math.pow(10,at(d)?D:d),R=Math.round(R*A)/A,T=Math.round(T*A)/A;let U=0;for(_&&(x&&R!==o?(n.push({value:o}),R<o&&U++,Jl(Math.round((R+U*O)*A)/A,o,Cw(o,P,t))&&U++):R<o&&U++);U<Y;++U){const ee=Math.round((R+U*O)*A)/A;if(N&&ee>l)break;n.push({value:ee})}return N&&x&&T!==l?n.length&&Jl(n[n.length-1].value,l,Cw(l,P,t))?n[n.length-1].value=l:n.push({value:l}):(!N||T===l)&&n.push({value:T}),n}function Cw(t,e,{horizontal:n,minRotation:r}){const s=Hi(r),a=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/a,o)}class tB extends Bo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return at(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:a}=this;const o=d=>s=n?s:d,l=d=>a=r?a:d;if(e){const d=Co(s),u=Co(a);d<0&&u<0?l(0):d>0&&u>0&&o(0)}if(s===a){let d=a===0?1:Math.abs(a*.05);l(a+d),e||o(s-d)}this.min=s,this.max=a}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},a=this._range||this,o=eB(s,a);return e.bounds==="ticks"&&H8(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Ck(e,this.chart.options.locale,this.options.ticks.format)}}class Oh extends tB{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ar(e)?e:0,this.max=ar(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Hi(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,a.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}De(Oh,"id","linear"),De(Oh,"defaults",{ticks:{callback:Ek.formatters.numeric}});const bp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},_n=Object.keys(bp);function Ew(t,e){return t-e}function Tw(t,e){if(at(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:a}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),ar(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(Lc(a)||a===!0)?n.startOf(o,"isoWeek",a):n.startOf(o,s)),+o)}function Pw(t,e,n,r){const s=_n.length;for(let a=_n.indexOf(t);a<s-1;++a){const o=bp[_n[a]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(l*o.size))<=r)return _n[a]}return _n[s-1]}function nB(t,e,n,r,s){for(let a=_n.length-1;a>=_n.indexOf(n);a--){const o=_n[a];if(bp[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return _n[n?_n.indexOf(n):0]}function rB(t){for(let e=_n.indexOf(t)+1,n=_n.length;e<n;++e)if(bp[_n[e]].common)return _n[e]}function Dw(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=Sv(n,e),a=n[r]>=e?n[r]:n[s];t[a]=!0}}function sB(t,e,n,r){const s=t._adapter,a=+s.startOf(e[0].value,r),o=e[e.length-1].value;let l,d;for(l=a;l<=o;l=+s.add(l,1,r))d=n[l],d>=0&&(e[d].major=!0);return e}function Mw(t,e,n){const r=[],s={},a=e.length;let o,l;for(o=0;o<a;++o)l=e[o],s[l]=o,r.push({value:l,major:!1});return a===0||!n?r:sB(t,r,s,n)}class Lh extends Bo{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new bz._date(e.adapters.date);s.init(n),Xl(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Tw(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:a,minDefined:o,maxDefined:l}=this.getUserBounds();function d(u){!o&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!l&&!isNaN(u.max)&&(a=Math.max(a,u.max))}(!o||!l)&&(d(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&d(this.getMinMax(!1))),s=ar(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),a=ar(a)&&!isNaN(a)?a:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,a-1),this.max=Math.max(s+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const a=this.min,o=this.max,l=K8(s,a,o);return this._unit=n.unit||(r.autoSkip?Pw(n.minUnit,this.min,this.max,this._getLabelCapacity(a)):nB(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:rB(this._unit),this.initOffsets(s),e.reverse&&l.reverse(),Mw(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,a;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?r=a:r=(a-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Gn(n,0,o),r=Gn(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,a=s.time,o=a.unit||Pw(a.minUnit,n,r,this._getLabelCapacity(n)),l=Be(s.ticks.stepSize,1),d=o==="week"?a.isoWeekday:!1,u=Lc(d)||d===!0,p={};let f=n,x,g;if(u&&(f=+e.startOf(f,"isoWeek",d)),f=+e.startOf(f,u?"day":o),e.diff(r,n,o)>1e5*l)throw new Error(n+" and "+r+" are too far apart with stepSize of "+l+" "+o);const v=s.ticks.source==="data"&&this.getDataTimestamps();for(x=f,g=0;x<r;x=+e.add(x,l,o),g++)Dw(p,x,v);return(x===r||s.bounds==="ticks"||g===1)&&Dw(p,x,v),Object.keys(p).sort(Ew).map(b=>+b)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,a=this._unit,o=n||s[a];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const a=this.options,o=a.ticks.callback;if(o)return lt(o,[e,n,r],this);const l=a.time.displayFormats,d=this._unit,u=this._majorUnit,p=d&&l[d],f=u&&l[u],x=r[n],g=u&&f&&x&&x.major;return this._adapter.format(e,s||(g?f:p))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=Hi(this.isHorizontal()?n.maxRotation:n.minRotation),a=Math.cos(s),o=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:r*a+l*o,h:r*o+l*a}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,a=this._tickFormatFunction(e,0,Mw(this,[e],this._majorUnit),s),o=this._getLabelSize(a),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(Tw(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Q8(e.sort(Ew))}}De(Lh,"id","time"),De(Lh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function ou(t,e,n){let r=0,s=t.length-1,a,o,l,d;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=Wi(t,"pos",e)),{pos:a,time:l}=t[r],{pos:o,time:d}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=Wi(t,"time",e)),{time:a,pos:l}=t[r],{time:o,pos:d}=t[s]);const u=o-a;return u?l+(d-l)*(e-a)/u:l}class Ow extends Lh{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=ou(n,this.min),this._tableRange=ou(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],a=[];let o,l,d,u,p;for(o=0,l=e.length;o<l;++o)u=e[o],u>=n&&u<=r&&s.push(u);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,l=s.length;o<l;++o)p=s[o+1],d=s[o-1],u=s[o],Math.round((p+d)/2)!==u&&a.push({time:u,pos:o/(l-1)});return a}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,a)=>s-a)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(ou(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return ou(this._table,r*this._tableRange+this._minPos,!0)}}De(Ow,"id","timeseries"),De(Ow,"defaults",Lh.defaults);const sS="label";function Lw(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function iB(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function iS(t,e){t.labels=e}function aS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:sS;const r=[];t.datasets=e.map(s=>{const a=t.datasets.find(o=>o[n]===s[n]);return!a||!s.data||r.includes(a)?{...s}:(r.push(a),Object.assign(a,s),a)})}function aB(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:sS;const n={labels:[],datasets:[]};return iS(n,t.labels),aS(n,t.datasets,e),n}function oB(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:a,type:o,data:l,options:d,plugins:u=[],fallbackContent:p,updateMode:f,...x}=t,g=j.useRef(null),v=j.useRef(null),b=()=>{g.current&&(v.current=new Xc(g.current,{type:o,data:aB(l,a),options:d&&{...d},plugins:u}),Lw(e,v.current))},w=()=>{Lw(e,null),v.current&&(v.current.destroy(),v.current=null)};return j.useEffect(()=>{!s&&v.current&&d&&iB(v.current,d)},[s,d]),j.useEffect(()=>{!s&&v.current&&iS(v.current.config.data,l.labels)},[s,l.labels]),j.useEffect(()=>{!s&&v.current&&l.datasets&&aS(v.current.config.data,l.datasets,a)},[s,l.datasets]),j.useEffect(()=>{v.current&&(s?(w(),setTimeout(b)):v.current.update(f))},[s,d,l.labels,l.datasets,f]),j.useEffect(()=>{v.current&&(w(),setTimeout(b))},[o]),j.useEffect(()=>(b(),()=>w()),[]),Z.createElement("canvas",{ref:g,role:"img",height:n,width:r,...x},p)}const lB=j.forwardRef(oB);function cB(t,e){return Xc.register(e),j.forwardRef((n,r)=>Z.createElement(lB,{...n,ref:r,type:t}))}const Qg=cB("line",Eu);Xc.register(Mh,Oh,sc,Xa,tS,rS,Jk);function dB(){const[t,e]=j.useState(new Date().getFullYear()),[n,r]=j.useState("vendor"),[s,a]=j.useState([]),[o,l]=j.useState(!0),[d,u]=j.useState(null),p=[{id:"vendor",label:"البائعين"},{id:"driver",label:"السائقين"}],f=[t,t-1,t-2];j.useEffect(()=>{x()},[t,n]);const x=async()=>{try{l(!0),u(null);const b=await o8(n,t),w=[];for(let _=1;_<=12;_++){const N=b.find(S=>S.month===_);N?w.push(N):w.push({month:_,avg_rating:0,count:0})}a(w)}catch(b){console.error("Error fetching ratings report:",b),u("فشل في تحميل تقرير التقييمات. الرجاء المحاولة مرة أخرى.")}finally{l(!1)}},g={labels:s.map(b=>j_(b.month)),datasets:[{label:"متوسط التقييم",data:s.map(b=>b.count>0?b.avg_rating:null),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.5)",tension:.4,pointBackgroundColor:"rgb(59, 130, 246)",pointRadius:5,pointHoverRadius:7}]},v={responsive:!0,scales:{y:{min:0,max:5,ticks:{stepSize:1}}},plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(b){const w=s[b.dataIndex];return[`متوسط التقييم: ${b.parsed.y}`,`عدد التقييمات: ${w.count}`]}}}}};return o?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):d?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:d}),i.jsx("button",{onClick:x,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"تقرير التقييمات الشهري"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"flex bg-gray-100 rounded-lg p-1",children:p.map(b=>i.jsx("button",{onClick:()=>r(b.id),className:`px-4 py-2 rounded-lg transition-colors ${n===b.id?"bg-white shadow text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:b.label},b.id))}),i.jsx("select",{value:t,onChange:b=>e(Number(b.target.value)),className:"border rounded-lg px-3 py-2",children:f.map(b=>i.jsx("option",{value:b,children:b},b))})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["متوسط التقييمات الشهرية لعام ",t]}),i.jsx("div",{className:"h-80",children:i.jsx(Qg,{data:g,options:v})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 border-b",children:i.jsx("h3",{className:"text-lg font-semibold",children:"تفاصيل التقييمات الشهرية"})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الشهر"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"متوسط التقييم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"عدد التقييمات"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التقييم"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(b=>i.jsxs("tr",{className:b.count===0?"bg-gray-50 text-gray-400":"",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:j_(b.month)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.count>0?b.avg_rating.toFixed(1):"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.count}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.count>0?i.jsx("div",{className:"flex items-center",children:i.jsx(Qa,{rating:b.avg_rating})}):i.jsx("span",{children:"-"})})]},b.month))})]})})]})]})}const uB=async(t=new Date().getFullYear())=>{try{const{data:e,error:n}=await te.from("orders").select("total, created_at");if(n)throw n;const r=Array(12).fill(0),s=Array(12).fill(0);return e.forEach(a=>{const o=new Date(a.created_at);if(o.getFullYear()===t){const l=o.getMonth();r[l]+=parseFloat(a.total||0),s[l]+=1}}),{monthlySales:r,monthlyOrders:s}}catch(e){throw console.error("Error fetching monthly sales stats:",e),e}},hB=async()=>{try{const{data:t,error:e}=await te.rpc("get_financial_summary");if(e)throw e;return t||{total_sales:0,electronic_payments:0,cash_payments:0,admin_commissions:0,vendor_balances:0,driver_balances:0}}catch(t){throw console.error("Error fetching financial stats:",t),t}};Xc.register(Mh,Oh,sc,Xa,tS,rS,Jk);function pB(){const[t,e]=j.useState({adminCommissions:{total:0,fromVendors:0,fromDrivers:0,pendingFromVendors:0,pendingFromDrivers:0,byPaymentType:{electronic:0,cash:0},monthly:[0,0,0,0,0,0,0,0,0,0,0,0]},vendorBalances:{total:0,available:0,pending:0,byPaymentType:{electronic:0,cash:0},monthly:[0,0,0,0,0,0,0,0,0,0,0,0]},driverBalances:{total:0,available:0,pending:0,byPaymentType:{electronic:0,cash:0},monthly:[0,0,0,0,0,0,0,0,0,0,0,0]},totalSales:{amount:0,electronic:0,cash:0,monthly:[0,0,0,0,0,0,0,0,0,0,0,0]}}),[n,r]=j.useState(!0),[s,a]=j.useState(null);j.useEffect(()=>{o()},[]);const o=async()=>{try{r(!0),a(null);const p=await hB(),{monthlySales:f}=await uB(),x=f.map(g=>Math.round(g*.15));e({adminCommissions:{total:p.admin_commissions||0,fromVendors:p.admin_commissions_vendors||0,fromDrivers:p.admin_commissions_drivers||0,pendingFromVendors:p.pending_commissions_vendors||0,pendingFromDrivers:p.pending_commissions_drivers||0,byPaymentType:{electronic:p.admin_commissions_electronic||0,cash:p.admin_commissions_cash||0},monthly:x},vendorBalances:{total:p.vendor_balances||0,available:p.vendor_available_balances||0,pending:p.vendor_pending_balances||0,byPaymentType:{electronic:p.vendor_balances_electronic||0,cash:p.vendor_balances_cash||0},monthly:f.map(g=>Math.round(g*.7))},driverBalances:{total:p.driver_balances||0,available:p.driver_available_balances||0,pending:p.driver_pending_balances||0,byPaymentType:{electronic:p.driver_balances_electronic||0,cash:p.driver_balances_cash||0},monthly:f.map(g=>Math.round(g*.3))},totalSales:{amount:p.total_sales||0,electronic:p.electronic_payments||0,cash:p.cash_payments||0,monthly:f}})}catch(p){console.error("Error fetching financial data:",p),a("فشل في تحميل البيانات المالية. الرجاء المحاولة مرة أخرى.")}finally{r(!1)}},l=["يناير","فبراير","مارس","إبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],d={labels:l,datasets:[{label:"المبيعات الكلية",data:t.totalSales.monthly,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.5)",tension:.4},{label:"عمولات الإدارة",data:t.adminCommissions.monthly,borderColor:"rgb(16, 185, 129)",backgroundColor:"rgba(16, 185, 129, 0.5)",tension:.4}]},u={labels:l,datasets:[{label:"أرصدة البائعين",data:t.vendorBalances.monthly,borderColor:"rgb(245, 158, 11)",backgroundColor:"rgba(245, 158, 11, 0.5)",tension:.4},{label:"أرصدة السائقين",data:t.driverBalances.monthly,borderColor:"rgb(139, 92, 246)",backgroundColor:"rgba(139, 92, 246, 0.5)",tension:.4}]};return n?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:s}),i.jsx("button",{onClick:()=>o(),className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"لوحة المعلومات المالية"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"عمولات الإدارة"}),i.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["₪",t.adminCommissions.total.toLocaleString()]}),i.jsxs("p",{className:"text-gray-500 mt-2",children:["الرصيد الكلي: ₪",t.adminCommissions.total.toLocaleString()]}),i.jsxs("div",{className:"mt-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"من البائعين:"}),i.jsxs("span",{className:"font-medium",children:["₪",t.adminCommissions.fromVendors.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"من السائقين:"}),i.jsxs("span",{className:"font-medium",children:["₪",t.adminCommissions.fromDrivers.toLocaleString()]})]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"العمولات حسب طريقة الدفع"}),i.jsxs("div",{className:"mt-2",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{children:"الدفع الإلكتروني:"}),i.jsxs("span",{className:"font-bold",children:["₪",t.adminCommissions.byPaymentType.electronic.toLocaleString()]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:i.jsx("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:`${t.adminCommissions.byPaymentType.electronic/t.adminCommissions.total*100}%`}})})]}),i.jsxs("div",{className:"mt-3",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{children:"الدفع النقدي:"}),i.jsxs("span",{className:"font-bold",children:["₪",t.adminCommissions.byPaymentType.cash.toLocaleString()]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:i.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${t.adminCommissions.byPaymentType.cash/t.adminCommissions.total*100}%`}})})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"العمولات المعلقة"}),i.jsxs("div",{className:"text-3xl font-bold text-yellow-600",children:["₪",(t.adminCommissions.pendingFromVendors+t.adminCommissions.pendingFromDrivers).toLocaleString()]}),i.jsxs("div",{className:"mt-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"من البائعين:"}),i.jsxs("span",{className:"font-medium",children:["₪",t.adminCommissions.pendingFromVendors.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"من السائقين:"}),i.jsxs("span",{className:"font-medium",children:["₪",t.adminCommissions.pendingFromDrivers.toLocaleString()]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"أرصدة البائعين"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-600",children:"الرصيد الكلي:"}),i.jsxs("span",{className:"text-xl font-bold",children:["₪",t.vendorBalances.total.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-600",children:"الرصيد المتاح:"}),i.jsxs("span",{className:"text-lg font-semibold text-green-600",children:["₪",t.vendorBalances.available.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-600",children:"الرصيد المعلق:"}),i.jsxs("span",{className:"text-lg font-semibold text-yellow-600",children:["₪",t.vendorBalances.pending.toLocaleString()]})]}),i.jsxs("div",{className:"pt-4 border-t",children:[i.jsx("p",{className:"text-sm font-medium mb-2",children:"حسب طريقة الدفع:"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"الدفع الإلكتروني"}),i.jsxs("p",{className:"text-lg font-semibold",children:["₪",t.vendorBalances.byPaymentType.electronic.toLocaleString()]})]}),i.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"الدفع النقدي"}),i.jsxs("p",{className:"text-lg font-semibold",children:["₪",t.vendorBalances.byPaymentType.cash.toLocaleString()]})]})]})]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"أرصدة السائقين"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-600",children:"الرصيد الكلي:"}),i.jsxs("span",{className:"text-xl font-bold",children:["₪",t.driverBalances.total.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-600",children:"الرصيد المتاح:"}),i.jsxs("span",{className:"text-lg font-semibold text-green-600",children:["₪",t.driverBalances.available.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-600",children:"الرصيد المعلق:"}),i.jsxs("span",{className:"text-lg font-semibold text-yellow-600",children:["₪",t.driverBalances.pending.toLocaleString()]})]}),i.jsxs("div",{className:"pt-4 border-t",children:[i.jsx("p",{className:"text-sm font-medium mb-2",children:"حسب طريقة الدفع:"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"الدفع الإلكتروني"}),i.jsxs("p",{className:"text-lg font-semibold",children:["₪",t.driverBalances.byPaymentType.electronic.toLocaleString()]})]}),i.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"الدفع النقدي"}),i.jsxs("p",{className:"text-lg font-semibold",children:["₪",t.driverBalances.byPaymentType.cash.toLocaleString()]})]})]})]})]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"إجمالي المبيعات"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"إجمالي المبيعات"}),i.jsxs("p",{className:"text-2xl font-bold",children:["₪",t.totalSales.amount.toLocaleString()]})]}),i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"الدفع الإلكتروني"}),i.jsxs("p",{className:"text-2xl font-bold",children:["₪",t.totalSales.electronic.toLocaleString()]}),i.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[(t.totalSales.electronic/t.totalSales.amount*100).toFixed(1),"% من المبيعات"]})]}),i.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm text-green-600 font-medium",children:"الدفع النقدي"}),i.jsxs("p",{className:"text-2xl font-bold",children:["₪",t.totalSales.cash.toLocaleString()]}),i.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[(t.totalSales.cash/t.totalSales.amount*100).toFixed(1),"% من المبيعات"]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"المبيعات والعمولات الشهرية"}),i.jsx("div",{className:"h-80",children:i.jsx(Qg,{data:d})})]}),i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"أرصدة البائعين والسائقين"}),i.jsx("div",{className:"h-80",children:i.jsx(Qg,{data:u})})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"تفاصيل المدفوعات حسب طريقة الدفع"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"طريقة الدفع"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"إجمالي المبيعات"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"عمولات الإدارة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"أرصدة البائعين"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"أرصدة السائقين"})]})}),i.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:"الدفع الإلكتروني"}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.totalSales.electronic.toLocaleString()]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.adminCommissions.byPaymentType.electronic.toLocaleString()]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.vendorBalances.byPaymentType.electronic.toLocaleString()]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.driverBalances.byPaymentType.electronic.toLocaleString()]})]}),i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:"الدفع النقدي"}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.totalSales.cash.toLocaleString()]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.adminCommissions.byPaymentType.cash.toLocaleString()]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.vendorBalances.byPaymentType.cash.toLocaleString()]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.driverBalances.byPaymentType.cash.toLocaleString()]})]}),i.jsxs("tr",{className:"bg-gray-50 font-semibold",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:"الإجمالي"}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.totalSales.amount.toLocaleString()]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.adminCommissions.total.toLocaleString()]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.vendorBalances.total.toLocaleString()]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.driverBalances.total.toLocaleString()]})]})]})]})})]})]})}function fB(){const[t,e]=j.useState([{id:1,consumer_key:"ck_1234567890abcdef1234567890abcdef",description:"مفتاح API للتطبيق",permissions:["read","write"],created_at:"2025-01-15T10:30:00Z",last_used:"2025-04-17T14:20:00Z",status:"active"},{id:2,consumer_key:"ck_abcdef1234567890abcdef1234567890",description:"مفتاح API للموقع",permissions:["read"],created_at:"2025-02-10T09:15:00Z",last_used:"2025-04-15T11:45:00Z",status:"active"},{id:3,consumer_key:"ck_0987654321fedcba0987654321fedcba",description:"مفتاح API للتطبيق الجوال",permissions:["read","write","delete"],created_at:"2025-03-05T14:30:00Z",last_used:null,status:"revoked"}]),[n,r]=j.useState(!1),[s,a]=j.useState(!1),[o,l]=j.useState(null),[d,u]=j.useState({description:"",permissions:["read"]}),p=()=>{if(!d.description){$.error("الرجاء إدخال وصف للمفتاح");return}const b="ck_"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),w="cs_"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),_={id:Math.max(...t.map(N=>N.id))+1,consumer_key:b,description:d.description,permissions:d.permissions,created_at:new Date().toISOString(),last_used:null,status:"active"};e([...t,_]),l({consumer_key:b,consumer_secret:w}),a(!0),r(!1),u({description:"",permissions:["read"]}),$.success("تم إنشاء مفتاح API بنجاح")},f=b=>{e(t.map(w=>w.id===b?{...w,status:"revoked"}:w)),$.success("تم تعطيل المفتاح بنجاح")},x=b=>{e(t.map(w=>w.id===b?{...w,status:"active"}:w)),$.success("تم تفعيل المفتاح بنجاح")},g=b=>{u(w=>{const _=w.permissions.includes(b)?w.permissions.filter(N=>N!==b):[...w.permissions,b];return{...w,permissions:_}})},v=b=>b?new Date(b).toLocaleString("ar-SA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"لم يستخدم بعد";return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"مفاتيح API"}),i.jsx("button",{onClick:()=>r(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إنشاء مفتاح جديد"})]}),s&&i.jsxs("div",{className:"bg-green-50 border border-green-200 p-6 rounded-lg",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"تم إنشاء مفتاح API جديد"}),i.jsx("button",{onClick:()=>a(!1),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"مفتاح المستهلك (Consumer Key):"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("code",{className:"bg-white p-2 rounded border flex-1 text-sm font-mono overflow-x-auto",children:o.consumer_key}),i.jsx("button",{onClick:()=>{navigator.clipboard.writeText(o.consumer_key),$.success("تم نسخ مفتاح المستهلك")},className:"mr-2 p-2 text-blue-600 hover:text-blue-800",children:"نسخ"})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"سر المستهلك (Consumer Secret):"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("code",{className:"bg-white p-2 rounded border flex-1 text-sm font-mono overflow-x-auto",children:o.consumer_secret}),i.jsx("button",{onClick:()=>{navigator.clipboard.writeText(o.consumer_secret),$.success("تم نسخ سر المستهلك")},className:"mr-2 p-2 text-blue-600 hover:text-blue-800",children:"نسخ"})]})]}),i.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[i.jsx("p",{className:"text-yellow-800 font-medium",children:"تنبيه هام!"}),i.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:"هذه هي المرة الوحيدة التي سيتم فيها عرض سر المستهلك. يرجى حفظه في مكان آمن."})]})]})]}),n?i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"إنشاء مفتاح API جديد"}),i.jsxs("form",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),i.jsx("input",{type:"text",value:d.description,onChange:b=>u({...d,description:b.target.value}),className:"w-full border rounded-md px-3 py-2",placeholder:"مثال: تطبيق الجوال، موقع الويب، إلخ",required:!0}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"أدخل وصفًا يساعدك على تذكر الغرض من هذا المفتاح"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الصلاحيات"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:d.permissions.includes("read"),onChange:()=>g("read"),className:"rounded text-blue-600 focus:ring-blue-500 ml-2"}),i.jsx("span",{children:"قراءة (Read)"}),i.jsx("span",{className:"mr-2 text-sm text-gray-500",children:"- الوصول للقراءة فقط"})]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:d.permissions.includes("write"),onChange:()=>g("write"),className:"rounded text-blue-600 focus:ring-blue-500 ml-2"}),i.jsx("span",{children:"كتابة (Write)"}),i.jsx("span",{className:"mr-2 text-sm text-gray-500",children:"- إنشاء وتحديث البيانات"})]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:d.permissions.includes("delete"),onChange:()=>g("delete"),className:"rounded text-blue-600 focus:ring-blue-500 ml-2"}),i.jsx("span",{children:"حذف (Delete)"}),i.jsx("span",{className:"mr-2 text-sm text-gray-500",children:"- حذف البيانات"})]})]}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"حدد الصلاحيات التي تريد منحها لهذا المفتاح"})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>r(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"إنشاء مفتاح"})]})]})]}):i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الوصف"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المفتاح"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الصلاحيات"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"تاريخ الإنشاء"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"آخر استخدام"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(b=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.description})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("code",{className:"text-sm font-mono bg-gray-100 px-2 py-1 rounded",children:b.consumer_key}),i.jsx("button",{onClick:()=>{navigator.clipboard.writeText(b.consumer_key),$.success("تم نسخ المفتاح")},className:"mr-2 text-blue-600 hover:text-blue-800",children:"نسخ"})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex flex-wrap gap-1",children:[b.permissions.includes("read")&&i.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800",children:"قراءة"}),b.permissions.includes("write")&&i.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800",children:"كتابة"}),b.permissions.includes("delete")&&i.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-red-100 text-red-800",children:"حذف"})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:v(b.created_at)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:v(b.last_used)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${b.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:b.status==="active"?"نشط":"معطل"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:b.status==="active"?i.jsx("button",{onClick:()=>f(b.id),className:"text-red-600 hover:text-red-800",children:"تعطيل"}):i.jsx("button",{onClick:()=>x(b.id),className:"text-green-600 hover:text-green-800",children:"تفعيل"})})]},b.id))})]})})}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"كيفية استخدام مفاتيح API"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"المصادقة الأساسية"}),i.jsx("p",{className:"text-gray-600 mb-2",children:"يمكنك استخدام المصادقة الأساسية (Basic Authentication) مع مفتاح المستهلك وسر المستهلك:"}),i.jsx("pre",{className:"bg-gray-100 p-3 rounded-lg overflow-x-auto text-sm",children:i.jsx("code",{children:"const credentials = btoa(`${consumerKey}:${consumerSecret}`);\n\nfetch('https://api.example.com/endpoint', {\n  headers: {\n    'Authorization': `Basic ${credentials}`,\n    'Content-Type': 'application/json'\n  }\n})"})})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"معلمات URL"}),i.jsx("p",{className:"text-gray-600 mb-2",children:"يمكنك أيضًا تمرير المفاتيح كمعلمات URL:"}),i.jsx("pre",{className:"bg-gray-100 p-3 rounded-lg overflow-x-auto text-sm",children:i.jsx("code",{children:"fetch('https://api.example.com/endpoint?consumer_key=ck_xxxx&consumer_secret=cs_xxxx')"})})]}),i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"ملاحظة أمنية"}),i.jsx("p",{className:"text-blue-700 text-sm",children:"يفضل استخدام المصادقة الأساسية عبر HTTPS لضمان أمان المفاتيح. تجنب استخدام معلمات URL في بيئة الإنتاج."})]})]})]})]})}const mB=async t=>{try{const{data:e,error:n}=await te.rpc("get_order_status_history_with_users",{p_order_id:t});if(n){console.error("Error using RPC function:",n);const{data:r,error:s}=await te.from("order_status_history").select(`
          *,
          user:created_by(*)
        `).eq("order_id",t).order("created_at",{ascending:!0});if(s)throw s;return r||[]}return e}catch(e){throw console.error("Error fetching order status history:",e),e}};function gB({order:t,onClose:e,onStatusUpdate:n,isModal:r=!1}){var he,ke,Ce;const[s,a]=j.useState(null),[o,l]=j.useState([]),[d,u]=j.useState(null),[p,f]=j.useState("15"),[x,g]=j.useState(t.status),[v,b]=j.useState([]),[w,_]=j.useState("specific"),[N,S]=j.useState(!1),[P,O]=j.useState(!0),[A,R]=j.useState(!0),[T,Y]=j.useState(!1),[D,U]=j.useState(""),[ee,G]=j.useState(t.status),[z,V]=j.useState(null),[C,q]=j.useState(!1),I=[{value:"pending",label:"معلق"},{value:"accepted",label:"مقبول"},{value:"processing",label:"قيد التحضير"},{value:"waiting-for-driver",label:"في قائمة الانتظار"},{value:"delivering",label:"مع السائق"},{value:"completed",label:"مكتمل"},{value:"cancelled",label:"ملغي"}];j.useEffect(()=>{(async()=>{const{data:{session:Se}}=await te.auth.getSession();Se!=null&&Se.user&&a(Se.user)})(),X(),E()},[]);const X=async()=>{try{O(!0);const{data:ce,error:Se}=await te.from("drivers").select("id, name, status, rating, phone").order("name");if(Se)throw Se;l(ce||[])}catch(ce){console.error("Error loading drivers:",ce),$.error("حدث خطأ أثناء تحميل قائمة السائقين")}finally{O(!1)}},E=async()=>{try{R(!0);const ce=await mB(t.id);ce&&ce.length>0?b(ce.map(Se=>({id:Se.id,status:Se.status,note:Se.note||Q(Se.status),created_at:Se.created_at}))):b([{id:"initial",status:t.status,note:"تم إنشاء الطلب",created_at:t.created_at}])}catch(ce){console.error("Error loading status history:",ce),b([{id:"initial",status:t.status,note:"تم إنشاء الطلب",created_at:t.created_at}])}finally{R(!1)}},K=async()=>{var ce;if(!s){$.error("يرجى تسجيل الدخول للمتابعة");return}try{Y(!0),V(null);const{data:Se,error:Ve}=await te.from("vendors").select("id").eq("store_name",(ce=t.vendor)==null?void 0:ce.store_name).single();if(Ve)throw console.error("Error fetching vendor:",Ve),V("فشل في العثور على البائع"),Ve;const{error:Xe}=await te.from("driver_waiting_list").insert([{order_id:t.id,vendor_id:Se.id,status:"pending"}]);if(Xe)throw console.error("Error adding to waiting list:",Xe),V("فشل في إضافة الطلب لقائمة الانتظار"),Xe;await se("waiting-for-driver","تم إضافة الطلب لقائمة انتظار السائقين"),$.success("تم إضافة الطلب لقائمة انتظار السائقين")}catch(Se){console.error("Error adding to waiting list:",Se),$.error("حدث خطأ أثناء إضافة الطلب لقائمة الانتظار"),V("حدث خطأ أثناء إضافة الطلب لقائمة الانتظار")}finally{Y(!1)}},re=async()=>{if(!s){$.error("يرجى تسجيل الدخول للمتابعة");return}if(w==="waiting-list"){await K();return}if(!d){$.error("الرجاء اختيار سائق");return}try{const{error:ce}=await te.from("orders").update({driver_id:d.id,status:"delivering"}).eq("id",t.id);if(ce)throw ce;const{error:Se}=await te.from("order_status_history").insert([{order_id:t.id,status:"delivering",note:`تم تعيين السائق ${d.name}`,created_by:s.id}]);Se&&console.error("Error adding status history:",Se),g("delivering"),typeof n=="function"&&n(t.id,"delivering"),await E(),$.success(`تم تعيين السائق ${d.name} للطلب`)}catch(ce){console.error("Error assigning driver:",ce),$.error("فشل في تعيين السائق")}},Q=ce=>{switch(ce){case"processing":return"تم بدء تحضير الطلب";case"delivering":return"تم تحويل الطلب للتوصيل";case"waiting-for-driver":return"تم إضافة الطلب لقائمة انتظار السائقين";case"completed":return"تم إكمال الطلب";case"accepted":return"تم قبول الطلب";case"rejected":return"تم رفض الطلب";default:return`تم تغيير الحالة إلى ${ie(ce)}`}},se=async(ce,Se="")=>{if(!s){$.error("يرجى تسجيل الدخول للمتابعة");return}try{q(!0);const{data:Ve,error:Xe}=await te.rpc("update_order_status_simple",{p_order_id:t.id,p_status:ce,p_note:Se||D||Q(ce)});if(Xe||!Ve)throw new Error((Xe==null?void 0:Xe.message)||"فشل في تحديث حالة الطلب");g(ce),typeof n=="function"&&n(t.id,ce),await E(),U(""),$.success("تم تحديث حالة الطلب"),ce==="completed"&&S(!0)}catch(Ve){console.error("Error updating status:",Ve),$.error("حدث خطأ أثناء تحديث الحالة")}finally{q(!1)}},oe=async()=>{if(!s){$.error("يرجى تسجيل الدخول للمتابعة");return}try{q(!0),await se(ee)}catch(ce){console.error("Error updating status:",ce),$.error("حدث خطأ أثناء تحديث الحالة")}},ie=ce=>{const Se=I.find(Ve=>Ve.value===ce);return Se?Se.label:ce},ge=ce=>{switch(ce){case"pending":return"bg-yellow-100 text-yellow-800";case"accepted":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";case"processing":return"bg-yellow-100 text-yellow-800";case"waiting-for-driver":return"bg-orange-100 text-orange-800";case"delivering":return"bg-purple-100 text-purple-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},ve=()=>{se("accepted","تم قبول الطلب"),$.success("تم قبول الطلب بنجاح")},W=()=>{se("rejected","تم رفض الطلب"),$.error("تم رفض الطلب")},ae=()=>{$.success("تم تقييم الزبون بنجاح"),S(!1)};return i.jsxs("div",{className:"bg-white rounded-lg p-6 relative z-50 max-w-3xl max-h-[90vh] overflow-y-auto shadow-2xl",onClick:ce=>ce.stopPropagation(),children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-xl font-semibold",children:["إجراءات الطلب #",t.id.substring(0,8)]}),i.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 z-50",children:"✕"})]}),s?N?i.jsx(l8,{orderId:t.id,driverId:(d==null?void 0:d.id)||t.driver_id,customerId:t.customer_id,onComplete:ae}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"border rounded-lg p-4 mb-6",children:[i.jsx("h3",{className:"font-semibold mb-3",children:"معلومات الطلب"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{children:["المتجر: ",((he=t.vendor)==null?void 0:he.store_name)||"غير محدد"]}),i.jsxs("p",{children:["الزبون: ",((ke=t.customer)==null?void 0:ke.name)||"غير محدد"]}),i.jsxs("p",{children:["المبلغ: ₪",parseFloat(t.total).toFixed(2)]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("h4",{className:"font-medium mb-2",children:"المنتجات:"}),i.jsx("ul",{className:"list-disc list-inside",children:(Ce=t.items)==null?void 0:Ce.map((ce,Se)=>{var Ve;return i.jsxs("li",{children:[((Ve=ce.product)==null?void 0:Ve.name)||"منتج"," × ",ce.quantity," (₪",parseFloat(ce.price).toFixed(2),")"]},Se)})})]})]})]}),t.status==="pending"&&i.jsxs("div",{className:"border rounded-lg p-4 mb-6",children:[i.jsx("h3",{className:"font-semibold mb-4",children:"قبول/رفض الطلب"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:ve,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition-colors",disabled:!s,children:"قبول الطلب"}),i.jsx("button",{onClick:W,className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 transition-colors",disabled:!s,children:"رفض الطلب"})]})]}),i.jsxs("div",{className:"border rounded-lg p-4 mb-6",children:[i.jsx("h3",{className:"font-semibold mb-3",children:"وقت التحضير"}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("input",{type:"number",min:"5",max:"120",value:p,onChange:ce=>f(ce.target.value),className:"border rounded-md p-2 w-24"}),i.jsx("span",{children:"دقيقة"})]})]}),i.jsxs("div",{className:"border rounded-lg p-4 mb-6",children:[i.jsx("h3",{className:"font-semibold mb-3",children:"تعيين سائق"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex space-x-4 mb-4",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",value:"specific",checked:w==="specific",onChange:ce=>_(ce.target.value),className:"ml-2"}),"تعيين سائق محدد"]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",value:"waiting-list",checked:w==="waiting-list",onChange:ce=>_(ce.target.value),className:"ml-2"}),"إضافة لقائمة الانتظار"]})]}),w==="specific"&&i.jsxs("select",{className:"w-full border rounded-md p-2",value:(d==null?void 0:d.id)||"",onChange:ce=>{const Se=o.find(Ve=>Ve.id===ce.target.value);u(Se||null)},children:[i.jsx("option",{value:"",children:"اختر سائق"}),P?i.jsx("option",{disabled:!0,children:"جاري تحميل السائقين..."}):o.map(ce=>i.jsxs("option",{value:ce.id,disabled:ce.status==="busy",children:[ce.name," (",ce.rating," ★) - ",ce.status==="available"?"متاح":"مشغول"]},ce.id))]}),i.jsx("button",{onClick:re,disabled:!s||T||w==="specific"&&!d||x==="delivering",className:`w-full text-white py-2 rounded-md transition-colors ${!s||T||w==="specific"&&!d||x==="delivering"?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:T?"جاري الإضافة...":x==="delivering"?"تم تعيين السائق":w==="waiting-list"?"إضافة للقائمة":"تعيين السائق"}),z&&i.jsx("p",{className:"mt-2 text-sm text-red-600",children:z})]})]}),i.jsxs("div",{className:"border rounded-lg p-4 mb-6",children:[i.jsx("h3",{className:"font-semibold mb-3",children:"تحديث الحالة"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{children:i.jsx("select",{value:ee,onChange:ce=>G(ce.target.value),className:"w-full border rounded-md p-2",children:I.map(ce=>i.jsx("option",{value:ce.value,children:ce.label},ce.value))})}),i.jsx("div",{children:i.jsx("input",{type:"text",value:D,onChange:ce=>U(ce.target.value),placeholder:"ملاحظات (اختياري)",className:"w-full border rounded-md p-2"})}),i.jsx("button",{onClick:oe,disabled:!s||C,className:`w-full bg-blue-500 text-white py-2 rounded-md hover:bg-blue-600 transition-colors ${!s||C?"opacity-70 cursor-not-allowed":""}`,children:C?"جاري التحديث...":"تحديث الحالة"})]})]}),i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold mb-3",children:"سجل الحالات"}),A?i.jsx("div",{className:"flex justify-center py-4",children:i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):i.jsx("div",{className:"space-y-3",children:v.map(ce=>i.jsxs("div",{className:"flex items-center space-x-4 border-b pb-2",children:[i.jsx("div",{className:`px-3 py-1 rounded-full ${ge(ce.status)}`,children:ie(ce.status)}),i.jsx("div",{className:"text-gray-600",children:ce.note}),i.jsx("div",{className:"text-gray-500 text-sm",children:new Date(ce.created_at).toLocaleTimeString("ar-SA")})]},ce.id))})]})]}):i.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:[i.jsx("strong",{className:"font-bold",children:"تنبيه!"}),i.jsx("span",{className:"block sm:inline",children:" يرجى تسجيل الدخول للمتابعة."})]})]})}const xB={customer_name:"اسم العميل",customer_phone:"هاتف العميل",address:"العنوان",vendor_name:"اسم التاجر",total:"المبلغ",status:"الحالة",created_at:"تاريخ الطلب"},cm=["customer_name","customer_phone","address","vendor_name","total","status","created_at"];function vB(){const[t,e]=j.useState([]),[n,r]=j.useState(!0),[s,a]=j.useState(null),[o,l]=j.useState(null),[d,u]=j.useState(!1),p=v=>v?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(v)}`:null,f=j.useCallback(async()=>{r(!0),a(null);try{if(!te)throw new Error("Supabase client is not initialized");const{data:v}=await te.from("orders").select("count").limit(1).single();if(!v)throw new Error("Could not connect to the database");const b=new Promise((P,O)=>setTimeout(()=>O(new Error("Request timeout")),1e4)),w=te.from("orders").select(`
          id,
          total,
          status,
          created_at,
          address,
          customer_name,
          customer_phone,
          vendor_name
        `).order("created_at",{ascending:!1}),{data:_,error:N}=await Promise.race([w,b]);if(N)throw console.error("Supabase error:",N),new Error(`Database error: ${N.message}`);if(!_)throw new Error("No data received from the server");const S=_.map(P=>({id:P.id,customer_name:P.customer_name||"غير معروف",customer_phone:P.customer_phone||"غير متوفر",address:P.address||"غير متوفر",vendor_name:P.vendor_name||"غير معروف",total:P.total,status:P.status,created_at:P.created_at}));e(S)}catch(v){console.error("Error fetching orders:",v);let b="فشل في جلب الطلبات. ";v.message.includes("timeout")?b+="انتهت مهلة الاتصال بالخادم.":v.message.includes("network")?b+="يرجى التحقق من اتصال الإنترنت.":v.message.includes("Database error")?b+=v.message:b+="حدث خطأ غير متوقع.",a(b),$.error(b)}finally{r(!1)}},[]);j.useEffect(()=>{f()},[f]);const x=(v,b)=>v==null?"غير متوفر":b==="created_at"?new Date(v).toLocaleString("ar-EG"):b==="total"?`${Number(v).toFixed(2)} شيكل`:String(v),g=v=>{l(v),u(!0)};return i.jsxs("div",{className:"p-4 relative",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"قائمة الطلبات"}),n&&i.jsx("p",{className:"text-center py-4",children:"جاري التحميل..."}),s&&i.jsxs("div",{className:"text-red-500 text-center py-4 mb-4",children:[i.jsx("p",{children:s}),i.jsx("button",{onClick:f,className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"إعادة المحاولة"})]}),!n&&!s&&i.jsx("div",{className:"overflow-x-auto shadow-md rounded-lg",children:i.jsxs("table",{className:"min-w-full bg-white",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[cm.map(v=>i.jsx("th",{className:"p-3 text-right border-b",children:xB[v]},v)),i.jsx("th",{className:"p-3 text-right border-b",children:"الإجراءات"})]})}),i.jsx("tbody",{children:t.length>0?t.map(v=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[cm.map(b=>i.jsx("td",{className:"p-3 border-b text-right",children:b==="address"&&v.address?i.jsxs("a",{href:p(v.address),target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline hover:text-blue-700",title:"فتح في خرائط Google",children:[v.address,i.jsx("svg",{className:"w-4 h-4 inline-block mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}):x(v[b],b)},`${v.id}-${b}`)),i.jsx("td",{className:"p-3 border-b",children:i.jsx("button",{onClick:()=>g(v),className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"إجراءات"})})]},v.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:cm.length+1,className:"p-4 text-center text-gray-500",children:"لا توجد طلبات متاحة"})})})]})}),d&&o&&i.jsx($f,{appear:!0,show:d,as:j.Fragment,children:i.jsx(_e,{as:"div",className:"fixed inset-0 z-50 overflow-y-auto",onClose:()=>{u(!1),f()},children:i.jsxs("div",{className:"min-h-screen px-4 text-center",children:[i.jsx($f.Child,{as:j.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:i.jsx(_e.Overlay,{className:"fixed inset-0 bg-black bg-opacity-50"})}),i.jsx("span",{className:"inline-block h-screen align-middle","aria-hidden":"true",children:"​"}),i.jsx($f.Child,{as:j.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:i.jsx("div",{className:"inline-block w-full max-w-3xl my-8 text-right align-middle transition-all transform",children:i.jsx(gB,{order:o,onClose:()=>{u(!1),f()},isModal:!0})})})]})})})]})}function yB(){const[t,e]=j.useState([]),[n,r]=j.useState(!0),[s,a]=j.useState("grid");j.useEffect(()=>{o()},[]);const o=async()=>{try{r(!0);const g=await EF();e(g)}catch(g){console.error("Error fetching vendors:",g),$.error("فشل في تحميل البائعين"),e([{id:1,store_name:"متجر كوفي",phone:"0599123456",address:"غزة - الرمال",description:"متجر متخصص في القهوة والمشروبات الساخنة",rating:4.8,rating_count:156,status:"active",logo_url:"https://images.unsplash.com/photo-1559925393-8be0ec4767c8?q=80&w=100&auto=format&fit=crop",banner_url:"https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?q=80&w=400&auto=format&fit=crop",delivery_type:"distance",delivery_radius:5,price_per_km:2},{id:2,store_name:"متجر الشاي",phone:"0599234567",address:"غزة - النصر",description:"متجر متخصص في الشاي والأعشاب",rating:4.5,rating_count:98,status:"active",logo_url:"https://images.unsplash.com/photo-1576092768241-dec231879fc3?q=80&w=100&auto=format&fit=crop",banner_url:"https://images.unsplash.com/photo-1564890369478-c89ca6d9cde9?q=80&w=400&auto=format&fit=crop",delivery_type:"fixed",delivery_radius:null,price_per_km:null},{id:3,store_name:"متجر العصائر",phone:"0599345678",address:"غزة - التفاح",description:"متجر متخصص في العصائر الطازجة",rating:4.7,rating_count:120,status:"active",logo_url:"https://images.unsplash.com/photo-1589733955941-5eeaf752f6dd?q=80&w=100&auto=format&fit=crop",banner_url:"https://images.unsplash.com/photo-1600271886742-f049cd451bba?q=80&w=400&auto=format&fit=crop",delivery_type:"distance",delivery_radius:3,price_per_km:3}])}finally{r(!1)}},l=async(g,v)=>{try{const{error:b}=await te.rpc("update_vendor_status",{p_vendor_id:g,p_status:v});if(b)throw b;e(t.map(w=>w.id===g?{...w,status:v}:w)),$.success(`تم تغيير حالة البائع إلى ${u(v)}`)}catch(b){console.error("Error updating vendor status:",b),$.error("فشل في تحديث حالة البائع")}},d=g=>{switch(g){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"busy":return"bg-yellow-100 text-yellow-800";case"pending":return"bg-blue-100 text-blue-800";case"suspended":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},u=g=>{switch(g){case"active":return"مفتوح";case"inactive":return"مغلق";case"busy":return"مشغول";case"pending":return"معلق";case"suspended":return"موقوف";default:return g}},p=g=>{switch(g){case"distance":return"حسب المسافة";case"fixed":return"سعر ثابت";case"zones":return"مناطق";default:return g}},f=()=>i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map(g=>i.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[g.banner_url&&i.jsx("img",{src:g.banner_url,alt:`${g.store_name} banner`,className:"w-full h-48 object-cover",onError:v=>{v.target.onerror=null,v.target.src="https://via.placeholder.com/300x200?text=No+Image"}}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{className:"flex items-center",children:[g.logo_url&&i.jsx("img",{src:g.logo_url,alt:g.store_name,className:"w-10 h-10 rounded-full object-cover ml-3",onError:v=>{v.target.onerror=null,v.target.src="https://via.placeholder.com/40?text=Logo"}}),i.jsx("h3",{className:"text-lg font-semibold",children:g.store_name})]}),i.jsxs("div",{className:"relative inline-block",children:[i.jsxs("select",{value:g.status,onChange:v=>l(g.id,v.target.value),className:`px-2 py-1 text-xs rounded-full ${d(g.status)} appearance-none pr-8 cursor-pointer`,children:[i.jsx("option",{value:"active",children:"مفتوح"}),i.jsx("option",{value:"inactive",children:"مغلق"}),i.jsx("option",{value:"busy",children:"مشغول"}),i.jsx("option",{value:"pending",children:"معلق"}),i.jsx("option",{value:"suspended",children:"موقوف"})]}),i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-2",children:i.jsx("svg",{className:"h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),i.jsxs("div",{className:"flex items-center mt-1",children:[i.jsx("span",{className:"text-yellow-500",children:"★"}),i.jsx("span",{className:"ml-1",children:g.rating}),i.jsxs("span",{className:"text-gray-500 ml-1",children:["(",g.rating_count,")"]})]}),i.jsx("p",{className:"text-gray-600 text-sm mt-2",children:g.description}),i.jsxs("div",{className:"mt-4 space-y-1 text-sm",children:[i.jsx("p",{className:"text-gray-500",children:g.address}),i.jsx("p",{className:"text-gray-500",children:g.phone})]}),i.jsx("div",{className:"mt-4 pt-4 border-t",children:i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"font-medium text-gray-900",children:p(g.delivery_type)}),g.delivery_type==="distance"&&i.jsxs("div",{className:"text-sm text-gray-500",children:[g.delivery_radius," كم - ₪",g.price_per_km,"/كم"]})]})})]})]},g.id))}),x=()=>i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المتجر"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التقييم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العنوان"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التوصيل"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(g=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[g.logo_url&&i.jsx("img",{src:g.logo_url,alt:g.store_name,className:"w-10 h-10 rounded-full object-cover ml-3",onError:v=>{v.target.onerror=null,v.target.src="https://via.placeholder.com/40?text=Logo"}}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:g.store_name}),i.jsx("div",{className:"text-gray-500",children:g.phone})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-yellow-500",children:"★"}),i.jsx("span",{className:"ml-1",children:g.rating}),i.jsxs("span",{className:"text-gray-500 ml-1",children:["(",g.rating_count,")"]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:g.address}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:p(g.delivery_type)}),g.delivery_type==="distance"&&i.jsxs("div",{className:"text-sm text-gray-500",children:[g.delivery_radius," كم - ₪",g.price_per_km,"/كم"]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"relative inline-block",children:[i.jsxs("select",{value:g.status,onChange:v=>l(g.id,v.target.value),className:`px-2 py-1 text-xs rounded-full ${d(g.status)} appearance-none pr-8 cursor-pointer`,children:[i.jsx("option",{value:"active",children:"مفتوح"}),i.jsx("option",{value:"inactive",children:"مغلق"}),i.jsx("option",{value:"busy",children:"مشغول"}),i.jsx("option",{value:"pending",children:"معلق"}),i.jsx("option",{value:"suspended",children:"موقوف"})]}),i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-2",children:i.jsx("svg",{className:"h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})})]},g.id))})]})})});return n?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"البائعين"}),i.jsx("div",{className:"flex items-center space-x-4",children:i.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>a("grid"),className:`px-3 py-1 rounded ${s==="grid"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض شبكي"}),i.jsx("button",{onClick:()=>a("table"),className:`px-3 py-1 rounded ${s==="table"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض جدول"})]})})]}),s==="grid"?f():x()]})}function bB({categoryId:t,className:e=""}){var x;const[n,r]=j.useState(null),[s,a]=j.useState(!0),[o,l]=j.useState(null);j.useEffect(()=>{t&&d()},[t]);const d=async()=>{try{a(!0);const g=new Date().toISOString().split("T")[0],{data:v,error:b}=await te.from("advertisements").select(`
          *,
          vendor:vendor_id(store_name)
        `).eq("vendor_category_id",t).eq("position","vendor_category").eq("status","active").lte("start_date",g).gte("end_date",g).order("priority",{ascending:!0}).limit(1);if(b)throw b;v&&v.length>0?(r(v[0]),u(v[0].id)):r(null),l(null)}catch(g){console.error("Error fetching vendor category advertisement:",g),l("فشل في تحميل الإعلان"),r(null)}finally{a(!1)}},u=async g=>{try{await te.rpc("increment_advertisement_views",{p_ad_id:g})}catch(v){console.error("Error recording advertisement view:",v)}},p=async()=>{if(n!=null&&n.id)try{await te.rpc("increment_advertisement_clicks",{p_ad_id:n.id})}catch(g){console.error("Error recording advertisement click:",g)}};if(s)return i.jsx("div",{className:`animate-pulse bg-gray-200 rounded-lg ${e}`,style:{aspectRatio:"16/5"}});if(o||!n)return null;const f=i.jsxs("div",{className:`relative overflow-hidden rounded-lg ${e}`,style:{aspectRatio:"16/5"},children:[i.jsx("img",{src:n.image_url,alt:n.title,className:"w-full h-full object-cover",onError:g=>{g.target.onerror=null,g.target.src="data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22800%22%20height%3D%22250%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Crect%20width%3D%22800%22%20height%3D%22250%22%20fill%3D%22%23e2e8f0%22%3E%3C%2Frect%3E%3Ctext%20x%3D%22400%22%20y%3D%22125%22%20font-size%3D%2230%22%20text-anchor%3D%22middle%22%20alignment-baseline%3D%22middle%22%20font-family%3D%22Arial%2C%20sans-serif%22%20fill%3D%22%2364748b%22%3E%D8%A5%D8%B9%D9%84%D8%A7%D9%86%3C%2Ftext%3E%3C%2Fsvg%3E"}}),i.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent flex flex-col justify-end p-4",children:[i.jsx("h3",{className:"text-white text-xl font-bold",children:n.title}),n.description&&i.jsx("p",{className:"text-white/90 text-sm mt-1",children:n.description})]}),((x=n.vendor)==null?void 0:x.store_name)&&i.jsx("div",{className:"absolute top-2 left-2 bg-white/80 px-2 py-1 rounded text-xs",children:n.vendor.store_name})]});return n.link?i.jsx(nh,{to:n.link,onClick:p,children:f}):f}function _B(){const[t,e]=j.useState([]),[n,r]=j.useState([]),[s,a]=j.useState(!0),[o,l]=j.useState(null),[d,u]=j.useState(!1),[p,f]=j.useState(!1),[x,g]=j.useState(!1),[v,b]=j.useState(null),[w,_]=j.useState(null),[N,S]=j.useState({name:"",description:"",image_url:"",slug:""}),[P,O]=j.useState(""),[A,R]=j.useState([]),[T,Y]=j.useState({title:"",description:"",vendor_id:"",image_url:"",link:"",start_date:"",end_date:"",status:"draft",type:"banner",position:"vendor_category",priority:1});j.useEffect(()=>{D()},[]);const D=async()=>{try{a(!0),l(null);const{data:E,error:K}=await te.from("vendor_categories_table").select("*").order("name");if(K)throw K;e(E||[]);const{data:re,error:Q}=await te.from("vendors").select("id, store_name").order("store_name");if(Q)throw Q;r(re||[])}catch(E){console.error("Error fetching data:",E),l("فشل في تحميل البيانات. الرجاء المحاولة مرة أخرى."),$.error("فشل في تحميل البيانات")}finally{a(!1)}},U=async E=>{E.preventDefault();try{a(!0);const K=N.slug||N.name.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"");if(v){const{data:re,error:Q}=await te.from("vendor_categories_table").update({name:N.name,description:N.description,image_url:N.image_url,slug:K,updated_at:new Date().toISOString()}).eq("id",v.id).select();if(Q)throw Q;$.success("تم تحديث القسم بنجاح")}else{const{data:re,error:Q}=await te.from("vendor_categories_table").insert([{name:N.name,description:N.description,image_url:N.image_url,slug:K}]).select();if(Q)throw Q;$.success("تم إضافة القسم بنجاح")}D(),u(!1),b(null),S({name:"",description:"",image_url:"",slug:""})}catch(K){console.error("Error saving category:",K),$.error(v?"فشل في تحديث القسم":"فشل في إضافة القسم")}finally{a(!1)}},ee=async E=>{E.preventDefault();try{if(a(!0),!T.title||!T.image_url||!T.start_date||!T.end_date){$.error("الرجاء تعبئة جميع الحقول المطلوبة"),a(!1);return}const{data:K,error:re}=await te.from("advertisements").insert([{title:T.title,description:T.description,vendor_id:T.vendor_id||null,vendor_category_id:w.id,image_url:T.image_url,link:T.link,start_date:T.start_date,end_date:T.end_date,status:T.status,type:T.type,position:"vendor_category",priority:parseInt(T.priority)}]).select();if(re)throw re;$.success("تم إضافة الإعلان بنجاح"),g(!1),Y({title:"",description:"",vendor_id:"",image_url:"",link:"",start_date:"",end_date:"",status:"draft",type:"banner",position:"vendor_category",priority:1})}catch(K){console.error("Error saving advertisement:",K),$.error("فشل في حفظ الإعلان")}finally{a(!1)}},G=async E=>{if(window.confirm("هل أنت متأكد من حذف هذا القسم؟"))try{const{error:K}=await te.from("vendor_categories_table").delete().eq("id",E);if(K)throw K;$.success("تم حذف القسم بنجاح"),D()}catch(K){console.error("Error deleting category:",K),$.error("فشل في حذف القسم")}},z=({preview:E})=>{E&&S({...N,image_url:E})},V=({preview:E})=>{E&&Y({...T,image_url:E})},C=async E=>{try{a(!0),_(E);const{data:K,error:re}=await te.from("vendor_to_category").select(`
          vendor:vendor_id(id, store_name)
        `).eq("category_id",E.id);if(re)console.error("Error fetching category vendors:",re),R([]);else{const Q=K.filter(se=>se.vendor).map(se=>se.vendor);R(Q)}f(!0)}catch(K){console.error("Error fetching category vendors:",K),$.error("فشل في تحميل البائعين")}finally{a(!1)}},q=async()=>{if(!w||!P){$.error("الرجاء اختيار البائع");return}try{a(!0);const{data:E,error:K}=await te.from("vendor_to_category").select("*").eq("vendor_id",P).eq("category_id",w.id);if(K&&K.code!=="PGRST116")throw K;if(E&&E.length>0){$.info("هذا البائع مرتبط بالفعل بهذا القسم"),O("");return}const{error:re}=await te.from("vendor_to_category").insert([{vendor_id:P,category_id:w.id}]);if(re)throw re;$.success("تم ربط البائع بالقسم بنجاح");const{data:Q,error:se}=await te.from("vendor_to_category").select(`
          vendor:vendor_id(id, store_name)
        `).eq("category_id",w.id);if(se)throw se;const oe=Q.filter(ie=>ie.vendor).map(ie=>ie.vendor);R(oe),O("")}catch(E){console.error("Error linking vendor to category:",E),$.error("فشل في ربط البائع بالقسم: "+E.message)}finally{a(!1)}},I=async E=>{if(!(!w||!E))try{a(!0);const{error:K}=await te.from("vendor_to_category").delete().eq("vendor_id",E).eq("category_id",w.id);if(K)throw K;$.success("تم إلغاء ربط البائع بالقسم بنجاح"),R(A.filter(re=>re.id!==E))}catch(K){console.error("Error unlinking vendor from category:",K),$.error("فشل في إلغاء ربط البائع بالقسم")}finally{a(!1)}},X=E=>{_(E),Y({title:"",description:"",vendor_id:"",image_url:"",link:"",start_date:"",end_date:"",status:"draft",type:"banner",position:"vendor_category",priority:1}),g(!0)};return s&&t.length===0?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:o}),i.jsx("button",{onClick:D,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"أقسام المتاجر"}),i.jsx("button",{onClick:()=>{b(null),S({name:"",description:"",image_url:"",slug:""}),u(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة قسم جديد"})]}),i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الصورة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الاسم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الوصف"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"عدد البائعين"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإعلان"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"لا توجد أقسام بعد. قم بإضافة قسم جديد."})}):t.map(E=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:E.image_url?i.jsx("img",{src:E.image_url,alt:E.name,className:"w-10 h-10 rounded-full object-cover",onError:K=>{K.target.onerror=null,K.target.src="https://via.placeholder.com/40?text=No+Image"}}):i.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:i.jsx("span",{className:"text-gray-500",children:"لا توجد صورة"})})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[i.jsx("div",{className:"font-medium text-gray-900",children:E.name}),i.jsx("div",{className:"text-sm text-gray-500",children:E.slug})]}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"text-sm text-gray-900",children:E.description||"لا يوجد وصف"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("button",{onClick:()=>C(E),className:"text-blue-600 hover:text-blue-800",children:"عرض البائعين"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"flex space-x-2",children:i.jsx("button",{onClick:()=>X(E),className:"text-green-600 hover:text-green-800",children:"إضافة إعلان"})})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[i.jsx("button",{onClick:()=>{b(E),S({name:E.name,description:E.description||"",image_url:E.image_url||"",slug:E.slug||""}),u(!0)},className:"text-blue-600 hover:text-blue-800 ml-4",children:"تعديل"}),i.jsx("button",{onClick:()=>G(E.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},E.id))})]})})}),t.length>0&&i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"معاينة إعلانات الأقسام"}),i.jsx("div",{className:"space-y-6",children:t.map(E=>i.jsxs("div",{className:"border-b pb-6 last:border-b-0 last:pb-0",children:[i.jsx("h4",{className:"text-md font-semibold mb-2",children:E.name}),i.jsx(bB,{categoryId:E.id,className:"w-full"})]},E.id))})]}),i.jsx(_e,{open:d,onClose:()=>{u(!1),b(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx(_e.Title,{className:"text-2xl font-bold mb-6",children:v?"تعديل قسم":"إضافة قسم جديد"}),i.jsxs("form",{onSubmit:U,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم القسم ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:N.name,onChange:E=>S({...N,name:E.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),i.jsx("textarea",{value:N.description,onChange:E=>S({...N,description:E.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الرابط المختصر (Slug)"}),i.jsx("input",{type:"text",value:N.slug,onChange:E=>S({...N,slug:E.target.value}),className:"w-full border rounded-md px-3 py-2",placeholder:"سيتم إنشاؤه تلقائيًا إذا تُرك فارغًا"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"صورة القسم"}),i.jsx(xs,{type:"image",preview:N.image_url,onUpload:z,storeInSupabase:!0,bucket:It.GENERAL,folder:"vendor-categories"})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{u(!1),b(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:s,children:s?"جارٍ الحفظ...":v?"تحديث":"إضافة"})]})]})]})]})}),i.jsx(_e,{open:p,onClose:()=>{f(!1),_(null),R([]),O("")},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsxs(_e.Title,{className:"text-2xl font-bold mb-6",children:["البائعين في قسم: ",w==null?void 0:w.name]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"إضافة بائع للقسم"}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs("select",{value:P,onChange:E=>O(E.target.value),className:"flex-1 border rounded-md px-3 py-2",children:[i.jsx("option",{value:"",children:"اختر بائع"}),n.map(E=>i.jsx("option",{value:E.id,children:E.store_name},E.id))]}),i.jsx("button",{type:"button",onClick:q,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:!P||s,children:"إضافة"})]})]}),i.jsx("div",{className:"max-h-60 overflow-y-auto",children:A.length===0?i.jsx("p",{className:"text-center text-gray-500 py-4",children:"لا يوجد بائعين في هذا القسم"}):i.jsx("ul",{className:"divide-y divide-gray-200",children:A.map(E=>i.jsxs("li",{className:"py-3 flex justify-between items-center",children:[i.jsx("span",{children:E.store_name}),i.jsx("button",{onClick:()=>I(E.id),className:"text-red-600 hover:text-red-800",children:"إلغاء الربط"})]},E.id))})}),i.jsx("div",{className:"mt-6 flex justify-end",children:i.jsx("button",{type:"button",onClick:()=>{f(!1),_(null),R([]),O("")},className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300",children:"إغلاق"})})]})]})}),i.jsx(_e,{open:x,onClose:()=>{g(!1),_(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(_e.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsxs(_e.Title,{className:"text-2xl font-bold mb-6",children:["إضافة إعلان لقسم: ",w==null?void 0:w.name]}),i.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["عنوان الإعلان ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:T.title,onChange:E=>Y({...T,title:E.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),i.jsx("textarea",{value:T.description,onChange:E=>Y({...T,description:E.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المتجر"}),i.jsxs("select",{value:T.vendor_id,onChange:E=>Y({...T,vendor_id:E.target.value}),className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"",children:"اختر المتجر"}),n.map(E=>i.jsx("option",{value:E.id,children:E.store_name},E.id))]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["صورة الإعلان ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx(xs,{type:"image",preview:T.image_url,onUpload:V,storeInSupabase:!0,bucket:It.ADVERTISEMENTS})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رابط الإعلان"}),i.jsx("input",{type:"text",value:T.link,onChange:E=>Y({...T,link:E.target.value}),className:"w-full border rounded-md px-3 py-2",placeholder:"https://example.com"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["تاريخ البداية ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"date",value:T.start_date,onChange:E=>Y({...T,start_date:E.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["تاريخ النهاية ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"date",value:T.end_date,onChange:E=>Y({...T,end_date:E.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نوع الإعلان ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:T.type,onChange:E=>Y({...T,type:E.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"banner",children:"بانر"}),i.jsx("option",{value:"popup",children:"نافذة منبثقة"}),i.jsx("option",{value:"slider",children:"شريحة عرض"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الحالة ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:T.status,onChange:E=>Y({...T,status:E.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"draft",children:"مسودة"}),i.jsx("option",{value:"pending",children:"معلق"}),i.jsx("option",{value:"active",children:"نشط"}),i.jsx("option",{value:"expired",children:"منتهي"})]})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الأولوية ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:T.priority,onChange:E=>Y({...T,priority:parseInt(E.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"1",required:!0}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"الإعلانات ذات الأرقام الأقل تظهر أولاً"})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{g(!1),_(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:s,children:s?"جارٍ الحفظ...":"إضافة الإعلان"})]})]})]})]})})]})}function wB(){const t=da(),e=pi(),{settings:n}=ep(),[r,s]=j.useState("overview");j.useEffect(()=>{document.title=`لوحة تحكم ${n.store.name}`},[n.store.name]),j.useEffect(()=>{const o=e.pathname.split("/").pop();s(o&&o!=="admin-dashboard"?o:"overview")},[e]);const a=o=>{s(o),t(`/admin-dashboard/${o}`)};return i.jsxs("div",{className:"min-h-screen bg-gray-100 flex font-sans overflow-x-hidden w-full",children:[i.jsx(GD,{activeTab:r,onTabChange:a}),i.jsxs("div",{className:"flex-1 mr-64 max-w-[calc(100vw-16rem)]",children:[i.jsx(QD,{}),i.jsx("main",{className:"p-6 space-y-6 overflow-x-hidden",children:i.jsxs(r2,{children:[i.jsx(Me,{path:"/",element:i.jsx(Mf,{})}),i.jsx(Me,{path:"/overview",element:i.jsx(Mf,{})}),i.jsx(Me,{path:"/products",element:i.jsx(g3,{})}),i.jsx(Me,{path:"/products-management",element:i.jsx(aF,{})}),i.jsx(Me,{path:"/categories",element:i.jsx(oF,{})}),i.jsx(Me,{path:"/vendors",element:i.jsx(DF,{})}),i.jsx(Me,{path:"/vendors-list",element:i.jsx(yB,{})}),i.jsx(Me,{path:"/add-vendor",element:i.jsx(MF,{})}),i.jsx(Me,{path:"/vendor-categories-table",element:i.jsx(_B,{})}),i.jsx(Me,{path:"/drivers",element:i.jsx(OF,{})}),i.jsx(Me,{path:"/add-driver",element:i.jsx(LF,{})}),i.jsx(Me,{path:"/shipping-methods",element:i.jsx(RF,{})}),i.jsx(Me,{path:"/customers",element:i.jsx(AF,{})}),i.jsx(Me,{path:"/add-customer",element:i.jsx(IF,{})}),i.jsx(Me,{path:"/users",element:i.jsx(FF,{})}),i.jsx(Me,{path:"/media",element:i.jsx(HF,{})}),i.jsx(Me,{path:"/points-rewards",element:i.jsx(XF,{})}),i.jsx(Me,{path:"/referral",element:i.jsx(JF,{})}),i.jsx(Me,{path:"/coupons",element:i.jsx(e8,{})}),i.jsx(Me,{path:"/wallet",element:i.jsx(VF,{})}),i.jsx(Me,{path:"/wallet-settings",element:i.jsx(qF,{})}),i.jsx(Me,{path:"/notifications",element:i.jsx(ZF,{})}),i.jsx(Me,{path:"/settings",element:i.jsx(GF,{})}),i.jsx(Me,{path:"/advertisements",element:i.jsx(QF,{})}),i.jsx(Me,{path:"/wholesale",element:i.jsx(t8,{})}),i.jsx(Me,{path:"/payments",element:i.jsx(r8,{})}),i.jsx(Me,{path:"/vendor-ratings",element:i.jsx(Jf,{type:"vendor"})}),i.jsx(Me,{path:"/driver-ratings",element:i.jsx(Jf,{type:"driver"})}),i.jsx(Me,{path:"/customer-ratings",element:i.jsx(Jf,{type:"customer"})}),i.jsx(Me,{path:"/ratings-report",element:i.jsx(dB,{})}),i.jsx(Me,{path:"/financial-dashboard",element:i.jsx(pB,{})}),i.jsx(Me,{path:"/api-keys",element:i.jsx(fB,{})}),i.jsx(Me,{path:"/orders",element:i.jsx(vB,{})}),i.jsx(Me,{path:"*",element:i.jsx(Mf,{})})]})})]})]})}function jB(){const{isAuthenticated:t,user:e}=Ro(),n=da(),r=()=>{if(!t())return"/login";if(e)switch(e.role){case"admin":return"/admin-dashboard";default:return"/login"}return"/login"};return i.jsx("div",{className:"min-h-screen bg-gray-100 flex flex-col items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md max-w-md w-full text-center",children:[i.jsx("h1",{className:"text-6xl font-bold text-red-500 mb-4",children:"404"}),i.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"الصفحة غير موجودة"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"عذراً، الصفحة التي تبحث عنها غير موجودة أو تم نقلها."}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(nh,{to:r(),className:"block w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"العودة إلى لوحة التحكم"}),i.jsx("button",{onClick:()=>n(-1),className:"block w-full bg-gray-200 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors",children:"العودة للصفحة السابقة"})]})]})})}function NB(){return pi().pathname!=="/"?null:i.jsx(io,{to:"/login",replace:!0})}function kB(){return i.jsx(aD,{children:i.jsx(oD,{children:i.jsx(ZP,{children:i.jsxs("div",{className:"w-full overflow-x-hidden",children:[i.jsxs(r2,{children:[i.jsx(Me,{path:"/login",element:i.jsx(cD,{})}),i.jsx(Me,{path:"/admin-dashboard/*",element:i.jsx(lD,{allowedRoles:["admin"],children:i.jsx(wB,{})})}),i.jsx(Me,{path:"/",element:i.jsx(NB,{})}),i.jsx(Me,{path:"*",element:i.jsx(jB,{})})]}),i.jsx(ag,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})})})})}dm.createRoot(document.getElementById("root")).render(i.jsx(Z.StrictMode,{children:i.jsx(kB,{})}));export{It as B,xs as M,$ as Q,oi as g,i as j,j as r};
