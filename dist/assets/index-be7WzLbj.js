var vC=Object.defineProperty;var yC=(t,e,n)=>e in t?vC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Te=(t,e,n)=>yC(t,typeof e!="symbol"?e+"":e,n);function bC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var hn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ms(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _C(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Cw={exports:{}},Eh={},Ew={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lc=Symbol.for("react.element"),wC=Symbol.for("react.portal"),jC=Symbol.for("react.fragment"),NC=Symbol.for("react.strict_mode"),kC=Symbol.for("react.profiler"),SC=Symbol.for("react.provider"),CC=Symbol.for("react.context"),EC=Symbol.for("react.forward_ref"),TC=Symbol.for("react.suspense"),PC=Symbol.for("react.memo"),DC=Symbol.for("react.lazy"),N0=Symbol.iterator;function OC(t){return t===null||typeof t!="object"?null:(t=N0&&t[N0]||t["@@iterator"],typeof t=="function"?t:null)}var Tw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Pw=Object.assign,Dw={};function So(t,e,n){this.props=t,this.context=e,this.refs=Dw,this.updater=n||Tw}So.prototype.isReactComponent={};So.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};So.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ow(){}Ow.prototype=So.prototype;function Hg(t,e,n){this.props=t,this.context=e,this.refs=Dw,this.updater=n||Tw}var Yg=Hg.prototype=new Ow;Yg.constructor=Hg;Pw(Yg,So.prototype);Yg.isPureReactComponent=!0;var k0=Array.isArray,Mw=Object.prototype.hasOwnProperty,Vg={current:null},Lw={key:!0,ref:!0,__self:!0,__source:!0};function Aw(t,e,n){var r,s={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)Mw.call(e,r)&&!Lw.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var d=Array(l),u=0;u<l;u++)d[u]=arguments[u+2];s.children=d}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Lc,type:t,key:a,ref:o,props:s,_owner:Vg.current}}function MC(t,e){return{$$typeof:Lc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Lc}function LC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var S0=/\/+/g;function Wp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?LC(""+t.key):e.toString(36)}function su(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Lc:case wC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Wp(o,0):r,k0(s)?(n="",t!=null&&(n=t.replace(S0,"$&/")+"/"),su(s,e,n,"",function(u){return u})):s!=null&&(qg(s)&&(s=MC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(S0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",k0(t))for(var l=0;l<t.length;l++){a=t[l];var d=r+Wp(a,l);o+=su(a,e,n,d,s)}else if(d=OC(t),typeof d=="function")for(t=d.call(t),l=0;!(a=t.next()).done;)a=a.value,d=r+Wp(a,l++),o+=su(a,e,n,d,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function hd(t,e,n){if(t==null)return t;var r=[],s=0;return su(t,r,"","",function(a){return e.call(n,a,s++)}),r}function AC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pn={current:null},iu={transition:null},IC={ReactCurrentDispatcher:pn,ReactCurrentBatchConfig:iu,ReactCurrentOwner:Vg};function Iw(){throw Error("act(...) is not supported in production builds of React.")}Le.Children={map:hd,forEach:function(t,e,n){hd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return hd(t,function(){e++}),e},toArray:function(t){return hd(t,function(e){return e})||[]},only:function(t){if(!qg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Le.Component=So;Le.Fragment=jC;Le.Profiler=kC;Le.PureComponent=Hg;Le.StrictMode=NC;Le.Suspense=TC;Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IC;Le.act=Iw;Le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Pw({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Vg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(d in e)Mw.call(e,d)&&!Lw.hasOwnProperty(d)&&(r[d]=e[d]===void 0&&l!==void 0?l[d]:e[d])}var d=arguments.length-2;if(d===1)r.children=n;else if(1<d){l=Array(d);for(var u=0;u<d;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Lc,type:t.type,key:s,ref:a,props:r,_owner:o}};Le.createContext=function(t){return t={$$typeof:CC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:SC,_context:t},t.Consumer=t};Le.createElement=Aw;Le.createFactory=function(t){var e=Aw.bind(null,t);return e.type=t,e};Le.createRef=function(){return{current:null}};Le.forwardRef=function(t){return{$$typeof:EC,render:t}};Le.isValidElement=qg;Le.lazy=function(t){return{$$typeof:DC,_payload:{_status:-1,_result:t},_init:AC}};Le.memo=function(t,e){return{$$typeof:PC,type:t,compare:e===void 0?null:e}};Le.startTransition=function(t){var e=iu.transition;iu.transition={};try{t()}finally{iu.transition=e}};Le.unstable_act=Iw;Le.useCallback=function(t,e){return pn.current.useCallback(t,e)};Le.useContext=function(t){return pn.current.useContext(t)};Le.useDebugValue=function(){};Le.useDeferredValue=function(t){return pn.current.useDeferredValue(t)};Le.useEffect=function(t,e){return pn.current.useEffect(t,e)};Le.useId=function(){return pn.current.useId()};Le.useImperativeHandle=function(t,e,n){return pn.current.useImperativeHandle(t,e,n)};Le.useInsertionEffect=function(t,e){return pn.current.useInsertionEffect(t,e)};Le.useLayoutEffect=function(t,e){return pn.current.useLayoutEffect(t,e)};Le.useMemo=function(t,e){return pn.current.useMemo(t,e)};Le.useReducer=function(t,e,n){return pn.current.useReducer(t,e,n)};Le.useRef=function(t){return pn.current.useRef(t)};Le.useState=function(t){return pn.current.useState(t)};Le.useSyncExternalStore=function(t,e,n){return pn.current.useSyncExternalStore(t,e,n)};Le.useTransition=function(){return pn.current.useTransition()};Le.version="18.3.1";Ew.exports=Le;var w=Ew.exports;const q=ms(w),ro=bC({__proto__:null,default:q},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RC=w,FC=Symbol.for("react.element"),$C=Symbol.for("react.fragment"),zC=Object.prototype.hasOwnProperty,BC=RC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,UC={key:!0,ref:!0,__self:!0,__source:!0};function Rw(t,e,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)zC.call(e,r)&&!UC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:FC,type:t,key:a,ref:o,props:s,_owner:BC.current}}Eh.Fragment=$C;Eh.jsx=Rw;Eh.jsxs=Rw;Cw.exports=Eh;var i=Cw.exports,nm={},Fw={exports:{}},An={},$w={exports:{}},zw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,X){var E=I.length;I.push(X);e:for(;0<E;){var K=E-1>>>1,re=I[K];if(0<s(re,X))I[K]=X,I[E]=re,E=K;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var X=I[0],E=I.pop();if(E!==X){I[0]=E;e:for(var K=0,re=I.length,Q=re>>>1;K<Q;){var ie=2*(K+1)-1,le=I[ie],ae=ie+1,se=I[ae];if(0>s(le,E))ae<re&&0>s(se,le)?(I[K]=se,I[ae]=E,K=ae):(I[K]=le,I[ie]=E,K=ie);else if(ae<re&&0>s(se,E))I[K]=se,I[ae]=E,K=ae;else break e}}return X}function s(I,X){var E=I.sortIndex-X.sortIndex;return E!==0?E:I.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var d=[],u=[],p=1,f=null,x=3,g=!1,v=!1,b=!1,j=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(I){for(var X=n(u);X!==null;){if(X.callback===null)r(u);else if(X.startTime<=I)r(u),X.sortIndex=X.expirationTime,e(d,X);else break;X=n(u)}}function P(I){if(b=!1,S(I),!v)if(n(d)!==null)v=!0,C(M);else{var X=n(u);X!==null&&V(P,X.startTime-I)}}function M(I,X){v=!1,b&&(b=!1,_(T),T=-1),g=!0;var E=x;try{for(S(X),f=n(d);f!==null&&(!(f.expirationTime>X)||I&&!H());){var K=f.callback;if(typeof K=="function"){f.callback=null,x=f.priorityLevel;var re=K(f.expirationTime<=X);X=t.unstable_now(),typeof re=="function"?f.callback=re:f===n(d)&&r(d),S(X)}else r(d);f=n(d)}if(f!==null)var Q=!0;else{var ie=n(u);ie!==null&&V(P,ie.startTime-X),Q=!1}return Q}finally{f=null,x=E,g=!1}}var R=!1,A=null,T=-1,Y=5,O=-1;function H(){return!(t.unstable_now()-O<Y)}function te(){if(A!==null){var I=t.unstable_now();O=I;var X=!0;try{X=A(!0,I)}finally{X?G():(R=!1,A=null)}}else R=!1}var G;if(typeof N=="function")G=function(){N(te)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,Z=B.port2;B.port1.onmessage=te,G=function(){Z.postMessage(null)}}else G=function(){j(te,0)};function C(I){A=I,R||(R=!0,G())}function V(I,X){T=j(function(){I(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,C(M))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(I){switch(x){case 1:case 2:case 3:var X=3;break;default:X=x}var E=x;x=X;try{return I()}finally{x=E}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,X){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var E=x;x=I;try{return X()}finally{x=E}},t.unstable_scheduleCallback=function(I,X,E){var K=t.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?K+E:K):E=K,I){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=E+re,I={id:p++,callback:X,priorityLevel:I,startTime:E,expirationTime:re,sortIndex:-1},E>K?(I.sortIndex=E,e(u,I),n(d)===null&&I===n(u)&&(b?(_(T),T=-1):b=!0,V(P,E-K))):(I.sortIndex=re,e(d,I),v||g||(v=!0,C(M))),I},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(I){var X=x;return function(){var E=x;x=X;try{return I.apply(this,arguments)}finally{x=E}}}})(zw);$w.exports=zw;var WC=$w.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HC=w,Mn=WC;function de(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bw=new Set,tc={};function ra(t,e){so(t,e),so(t+"Capture",e)}function so(t,e){for(tc[t]=e,t=0;t<e.length;t++)Bw.add(e[t])}var ls=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rm=Object.prototype.hasOwnProperty,YC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,C0={},E0={};function VC(t){return rm.call(E0,t)?!0:rm.call(C0,t)?!1:YC.test(t)?E0[t]=!0:(C0[t]=!0,!1)}function qC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ZC(t,e,n,r){if(e===null||typeof e>"u"||qC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function fn(t,e,n,r,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Kt[t]=new fn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Kt[e]=new fn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Kt[t]=new fn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Kt[t]=new fn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Kt[t]=new fn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Kt[t]=new fn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Kt[t]=new fn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Kt[t]=new fn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Kt[t]=new fn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zg=/[\-:]([a-z])/g;function Kg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zg,Kg);Kt[e]=new fn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zg,Kg);Kt[e]=new fn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zg,Kg);Kt[e]=new fn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Kt[t]=new fn(t,1,!1,t.toLowerCase(),null,!1,!1)});Kt.xlinkHref=new fn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Kt[t]=new fn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Gg(t,e,n,r){var s=Kt.hasOwnProperty(e)?Kt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ZC(e,n,s,r)&&(n=null),r||s===null?VC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var gs=HC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pd=Symbol.for("react.element"),Oa=Symbol.for("react.portal"),Ma=Symbol.for("react.fragment"),Qg=Symbol.for("react.strict_mode"),sm=Symbol.for("react.profiler"),Uw=Symbol.for("react.provider"),Ww=Symbol.for("react.context"),Xg=Symbol.for("react.forward_ref"),im=Symbol.for("react.suspense"),am=Symbol.for("react.suspense_list"),Jg=Symbol.for("react.memo"),Cs=Symbol.for("react.lazy"),Hw=Symbol.for("react.offscreen"),T0=Symbol.iterator;function Xo(t){return t===null||typeof t!="object"?null:(t=T0&&t[T0]||t["@@iterator"],typeof t=="function"?t:null)}var mt=Object.assign,Hp;function vl(t){if(Hp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Hp=e&&e[1]||""}return`
`+Hp+t}var Yp=!1;function Vp(t,e){if(!t||Yp)return"";Yp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=r.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var d=`
`+s[o].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=o&&0<=l);break}}}finally{Yp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?vl(t):""}function KC(t){switch(t.tag){case 5:return vl(t.type);case 16:return vl("Lazy");case 13:return vl("Suspense");case 19:return vl("SuspenseList");case 0:case 2:case 15:return t=Vp(t.type,!1),t;case 11:return t=Vp(t.type.render,!1),t;case 1:return t=Vp(t.type,!0),t;default:return""}}function om(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ma:return"Fragment";case Oa:return"Portal";case sm:return"Profiler";case Qg:return"StrictMode";case im:return"Suspense";case am:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ww:return(t.displayName||"Context")+".Consumer";case Uw:return(t._context.displayName||"Context")+".Provider";case Xg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Jg:return e=t.displayName||null,e!==null?e:om(t.type)||"Memo";case Cs:e=t._payload,t=t._init;try{return om(t(e))}catch{}}return null}function GC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return om(e);case 8:return e===Qg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Js(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Yw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function QC(t){var e=Yw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fd(t){t._valueTracker||(t._valueTracker=QC(t))}function Vw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Yw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Su(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lm(t,e){var n=e.checked;return mt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function P0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Js(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qw(t,e){e=e.checked,e!=null&&Gg(t,"checked",e,!1)}function cm(t,e){qw(t,e);var n=Js(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?dm(t,e.type,n):e.hasOwnProperty("defaultValue")&&dm(t,e.type,Js(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function D0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function dm(t,e,n){(e!=="number"||Su(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var yl=Array.isArray;function Za(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Js(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function um(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(de(91));return mt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function O0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(de(92));if(yl(n)){if(1<n.length)throw Error(de(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Js(n)}}function Zw(t,e){var n=Js(e.value),r=Js(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function M0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Kw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Kw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var md,Gw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(md=md||document.createElement("div"),md.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=md.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function nc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Dl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XC=["Webkit","ms","Moz","O"];Object.keys(Dl).forEach(function(t){XC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Dl[e]=Dl[t]})});function Qw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Dl.hasOwnProperty(t)&&Dl[t]?(""+e).trim():e+"px"}function Xw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Qw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var JC=mt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pm(t,e){if(e){if(JC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(de(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(de(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(de(61))}if(e.style!=null&&typeof e.style!="object")throw Error(de(62))}}function fm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mm=null;function ex(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gm=null,Ka=null,Ga=null;function L0(t){if(t=Rc(t)){if(typeof gm!="function")throw Error(de(280));var e=t.stateNode;e&&(e=Mh(e),gm(t.stateNode,t.type,e))}}function Jw(t){Ka?Ga?Ga.push(t):Ga=[t]:Ka=t}function e1(){if(Ka){var t=Ka,e=Ga;if(Ga=Ka=null,L0(t),e)for(t=0;t<e.length;t++)L0(e[t])}}function t1(t,e){return t(e)}function n1(){}var qp=!1;function r1(t,e,n){if(qp)return t(e,n);qp=!0;try{return t1(t,e,n)}finally{qp=!1,(Ka!==null||Ga!==null)&&(n1(),e1())}}function rc(t,e){var n=t.stateNode;if(n===null)return null;var r=Mh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(de(231,e,typeof n));return n}var xm=!1;if(ls)try{var Jo={};Object.defineProperty(Jo,"passive",{get:function(){xm=!0}}),window.addEventListener("test",Jo,Jo),window.removeEventListener("test",Jo,Jo)}catch{xm=!1}function eE(t,e,n,r,s,a,o,l,d){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(p){this.onError(p)}}var Ol=!1,Cu=null,Eu=!1,vm=null,tE={onError:function(t){Ol=!0,Cu=t}};function nE(t,e,n,r,s,a,o,l,d){Ol=!1,Cu=null,eE.apply(tE,arguments)}function rE(t,e,n,r,s,a,o,l,d){if(nE.apply(this,arguments),Ol){if(Ol){var u=Cu;Ol=!1,Cu=null}else throw Error(de(198));Eu||(Eu=!0,vm=u)}}function sa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function s1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function A0(t){if(sa(t)!==t)throw Error(de(188))}function sE(t){var e=t.alternate;if(!e){if(e=sa(t),e===null)throw Error(de(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return A0(s),t;if(a===r)return A0(s),e;a=a.sibling}throw Error(de(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(de(189))}}if(n.alternate!==r)throw Error(de(190))}if(n.tag!==3)throw Error(de(188));return n.stateNode.current===n?t:e}function i1(t){return t=sE(t),t!==null?a1(t):null}function a1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=a1(t);if(e!==null)return e;t=t.sibling}return null}var o1=Mn.unstable_scheduleCallback,I0=Mn.unstable_cancelCallback,iE=Mn.unstable_shouldYield,aE=Mn.unstable_requestPaint,bt=Mn.unstable_now,oE=Mn.unstable_getCurrentPriorityLevel,tx=Mn.unstable_ImmediatePriority,l1=Mn.unstable_UserBlockingPriority,Tu=Mn.unstable_NormalPriority,lE=Mn.unstable_LowPriority,c1=Mn.unstable_IdlePriority,Th=null,Or=null;function cE(t){if(Or&&typeof Or.onCommitFiberRoot=="function")try{Or.onCommitFiberRoot(Th,t,void 0,(t.current.flags&128)===128)}catch{}}var pr=Math.clz32?Math.clz32:hE,dE=Math.log,uE=Math.LN2;function hE(t){return t>>>=0,t===0?32:31-(dE(t)/uE|0)|0}var gd=64,xd=4194304;function bl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Pu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=bl(l):(a&=o,a!==0&&(r=bl(a)))}else o=n&~s,o!==0?r=bl(o):a!==0&&(r=bl(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-pr(e),s=1<<n,r|=t[n],e&=~s;return r}function pE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-pr(a),l=1<<o,d=s[o];d===-1?(!(l&n)||l&r)&&(s[o]=pE(l,e)):d<=e&&(t.expiredLanes|=l),a&=~l}}function ym(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function d1(){var t=gd;return gd<<=1,!(gd&4194240)&&(gd=64),t}function Zp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ac(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-pr(e),t[e]=n}function mE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-pr(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function nx(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-pr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ze=0;function u1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var h1,rx,p1,f1,m1,bm=!1,vd=[],Us=null,Ws=null,Hs=null,sc=new Map,ic=new Map,Ds=[],gE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function R0(t,e){switch(t){case"focusin":case"focusout":Us=null;break;case"dragenter":case"dragleave":Ws=null;break;case"mouseover":case"mouseout":Hs=null;break;case"pointerover":case"pointerout":sc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ic.delete(e.pointerId)}}function el(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=Rc(e),e!==null&&rx(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function xE(t,e,n,r,s){switch(e){case"focusin":return Us=el(Us,t,e,n,r,s),!0;case"dragenter":return Ws=el(Ws,t,e,n,r,s),!0;case"mouseover":return Hs=el(Hs,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return sc.set(a,el(sc.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,ic.set(a,el(ic.get(a)||null,t,e,n,r,s)),!0}return!1}function g1(t){var e=Mi(t.target);if(e!==null){var n=sa(e);if(n!==null){if(e=n.tag,e===13){if(e=s1(n),e!==null){t.blockedOn=e,m1(t.priority,function(){p1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function au(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=_m(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);mm=r,n.target.dispatchEvent(r),mm=null}else return e=Rc(n),e!==null&&rx(e),t.blockedOn=n,!1;e.shift()}return!0}function F0(t,e,n){au(t)&&n.delete(e)}function vE(){bm=!1,Us!==null&&au(Us)&&(Us=null),Ws!==null&&au(Ws)&&(Ws=null),Hs!==null&&au(Hs)&&(Hs=null),sc.forEach(F0),ic.forEach(F0)}function tl(t,e){t.blockedOn===e&&(t.blockedOn=null,bm||(bm=!0,Mn.unstable_scheduleCallback(Mn.unstable_NormalPriority,vE)))}function ac(t){function e(s){return tl(s,t)}if(0<vd.length){tl(vd[0],t);for(var n=1;n<vd.length;n++){var r=vd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Us!==null&&tl(Us,t),Ws!==null&&tl(Ws,t),Hs!==null&&tl(Hs,t),sc.forEach(e),ic.forEach(e),n=0;n<Ds.length;n++)r=Ds[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ds.length&&(n=Ds[0],n.blockedOn===null);)g1(n),n.blockedOn===null&&Ds.shift()}var Qa=gs.ReactCurrentBatchConfig,Du=!0;function yE(t,e,n,r){var s=Ze,a=Qa.transition;Qa.transition=null;try{Ze=1,sx(t,e,n,r)}finally{Ze=s,Qa.transition=a}}function bE(t,e,n,r){var s=Ze,a=Qa.transition;Qa.transition=null;try{Ze=4,sx(t,e,n,r)}finally{Ze=s,Qa.transition=a}}function sx(t,e,n,r){if(Du){var s=_m(t,e,n,r);if(s===null)sf(t,e,r,Ou,n),R0(t,r);else if(xE(s,t,e,n,r))r.stopPropagation();else if(R0(t,r),e&4&&-1<gE.indexOf(t)){for(;s!==null;){var a=Rc(s);if(a!==null&&h1(a),a=_m(t,e,n,r),a===null&&sf(t,e,r,Ou,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else sf(t,e,r,null,n)}}var Ou=null;function _m(t,e,n,r){if(Ou=null,t=ex(r),t=Mi(t),t!==null)if(e=sa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=s1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ou=t,null}function x1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oE()){case tx:return 1;case l1:return 4;case Tu:case lE:return 16;case c1:return 536870912;default:return 16}default:return 16}}var As=null,ix=null,ou=null;function v1(){if(ou)return ou;var t,e=ix,n=e.length,r,s="value"in As?As.value:As.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[a-r];r++);return ou=s.slice(t,1<r?1-r:void 0)}function lu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yd(){return!0}function $0(){return!1}function In(t){function e(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?yd:$0,this.isPropagationStopped=$0,this}return mt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yd)},persist:function(){},isPersistent:yd}),e}var Co={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ax=In(Co),Ic=mt({},Co,{view:0,detail:0}),_E=In(Ic),Kp,Gp,nl,Ph=mt({},Ic,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ox,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==nl&&(nl&&t.type==="mousemove"?(Kp=t.screenX-nl.screenX,Gp=t.screenY-nl.screenY):Gp=Kp=0,nl=t),Kp)},movementY:function(t){return"movementY"in t?t.movementY:Gp}}),z0=In(Ph),wE=mt({},Ph,{dataTransfer:0}),jE=In(wE),NE=mt({},Ic,{relatedTarget:0}),Qp=In(NE),kE=mt({},Co,{animationName:0,elapsedTime:0,pseudoElement:0}),SE=In(kE),CE=mt({},Co,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),EE=In(CE),TE=mt({},Co,{data:0}),B0=In(TE),PE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ME(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=OE[t])?!!e[t]:!1}function ox(){return ME}var LE=mt({},Ic,{key:function(t){if(t.key){var e=PE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=lu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?DE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ox,charCode:function(t){return t.type==="keypress"?lu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?lu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),AE=In(LE),IE=mt({},Ph,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),U0=In(IE),RE=mt({},Ic,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ox}),FE=In(RE),$E=mt({},Co,{propertyName:0,elapsedTime:0,pseudoElement:0}),zE=In($E),BE=mt({},Ph,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),UE=In(BE),WE=[9,13,27,32],lx=ls&&"CompositionEvent"in window,Ml=null;ls&&"documentMode"in document&&(Ml=document.documentMode);var HE=ls&&"TextEvent"in window&&!Ml,y1=ls&&(!lx||Ml&&8<Ml&&11>=Ml),W0=" ",H0=!1;function b1(t,e){switch(t){case"keyup":return WE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var La=!1;function YE(t,e){switch(t){case"compositionend":return _1(e);case"keypress":return e.which!==32?null:(H0=!0,W0);case"textInput":return t=e.data,t===W0&&H0?null:t;default:return null}}function VE(t,e){if(La)return t==="compositionend"||!lx&&b1(t,e)?(t=v1(),ou=ix=As=null,La=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return y1&&e.locale!=="ko"?null:e.data;default:return null}}var qE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Y0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qE[t.type]:e==="textarea"}function w1(t,e,n,r){Jw(r),e=Mu(e,"onChange"),0<e.length&&(n=new ax("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ll=null,oc=null;function ZE(t){M1(t,0)}function Dh(t){var e=Ra(t);if(Vw(e))return t}function KE(t,e){if(t==="change")return e}var j1=!1;if(ls){var Xp;if(ls){var Jp="oninput"in document;if(!Jp){var V0=document.createElement("div");V0.setAttribute("oninput","return;"),Jp=typeof V0.oninput=="function"}Xp=Jp}else Xp=!1;j1=Xp&&(!document.documentMode||9<document.documentMode)}function q0(){Ll&&(Ll.detachEvent("onpropertychange",N1),oc=Ll=null)}function N1(t){if(t.propertyName==="value"&&Dh(oc)){var e=[];w1(e,oc,t,ex(t)),r1(ZE,e)}}function GE(t,e,n){t==="focusin"?(q0(),Ll=e,oc=n,Ll.attachEvent("onpropertychange",N1)):t==="focusout"&&q0()}function QE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Dh(oc)}function XE(t,e){if(t==="click")return Dh(e)}function JE(t,e){if(t==="input"||t==="change")return Dh(e)}function eT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mr=typeof Object.is=="function"?Object.is:eT;function lc(t,e){if(mr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!rm.call(e,s)||!mr(t[s],e[s]))return!1}return!0}function Z0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function K0(t,e){var n=Z0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Z0(n)}}function k1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?k1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function S1(){for(var t=window,e=Su();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Su(t.document)}return e}function cx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tT(t){var e=S1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&k1(n.ownerDocument.documentElement,n)){if(r!==null&&cx(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=K0(n,a);var o=K0(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nT=ls&&"documentMode"in document&&11>=document.documentMode,Aa=null,wm=null,Al=null,jm=!1;function G0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jm||Aa==null||Aa!==Su(r)||(r=Aa,"selectionStart"in r&&cx(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Al&&lc(Al,r)||(Al=r,r=Mu(wm,"onSelect"),0<r.length&&(e=new ax("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Aa)))}function bd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ia={animationend:bd("Animation","AnimationEnd"),animationiteration:bd("Animation","AnimationIteration"),animationstart:bd("Animation","AnimationStart"),transitionend:bd("Transition","TransitionEnd")},ef={},C1={};ls&&(C1=document.createElement("div").style,"AnimationEvent"in window||(delete Ia.animationend.animation,delete Ia.animationiteration.animation,delete Ia.animationstart.animation),"TransitionEvent"in window||delete Ia.transitionend.transition);function Oh(t){if(ef[t])return ef[t];if(!Ia[t])return t;var e=Ia[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in C1)return ef[t]=e[n];return t}var E1=Oh("animationend"),T1=Oh("animationiteration"),P1=Oh("animationstart"),D1=Oh("transitionend"),O1=new Map,Q0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function si(t,e){O1.set(t,e),ra(e,[t])}for(var tf=0;tf<Q0.length;tf++){var nf=Q0[tf],rT=nf.toLowerCase(),sT=nf[0].toUpperCase()+nf.slice(1);si(rT,"on"+sT)}si(E1,"onAnimationEnd");si(T1,"onAnimationIteration");si(P1,"onAnimationStart");si("dblclick","onDoubleClick");si("focusin","onFocus");si("focusout","onBlur");si(D1,"onTransitionEnd");so("onMouseEnter",["mouseout","mouseover"]);so("onMouseLeave",["mouseout","mouseover"]);so("onPointerEnter",["pointerout","pointerover"]);so("onPointerLeave",["pointerout","pointerover"]);ra("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ra("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ra("onBeforeInput",["compositionend","keypress","textInput","paste"]);ra("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ra("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ra("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iT=new Set("cancel close invalid load scroll toggle".split(" ").concat(_l));function X0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,rE(r,e,void 0,t),t.currentTarget=null}function M1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],d=l.instance,u=l.currentTarget;if(l=l.listener,d!==a&&s.isPropagationStopped())break e;X0(s,l,u),a=d}else for(o=0;o<r.length;o++){if(l=r[o],d=l.instance,u=l.currentTarget,l=l.listener,d!==a&&s.isPropagationStopped())break e;X0(s,l,u),a=d}}}if(Eu)throw t=vm,Eu=!1,vm=null,t}function rt(t,e){var n=e[Em];n===void 0&&(n=e[Em]=new Set);var r=t+"__bubble";n.has(r)||(L1(e,t,2,!1),n.add(r))}function rf(t,e,n){var r=0;e&&(r|=4),L1(n,t,r,e)}var _d="_reactListening"+Math.random().toString(36).slice(2);function cc(t){if(!t[_d]){t[_d]=!0,Bw.forEach(function(n){n!=="selectionchange"&&(iT.has(n)||rf(n,!1,t),rf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_d]||(e[_d]=!0,rf("selectionchange",!1,e))}}function L1(t,e,n,r){switch(x1(e)){case 1:var s=yE;break;case 4:s=bE;break;default:s=sx}n=s.bind(null,e,n,t),s=void 0,!xm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function sf(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Mi(l),o===null)return;if(d=o.tag,d===5||d===6){r=a=o;continue e}l=l.parentNode}}r=r.return}r1(function(){var u=a,p=ex(n),f=[];e:{var x=O1.get(t);if(x!==void 0){var g=ax,v=t;switch(t){case"keypress":if(lu(n)===0)break e;case"keydown":case"keyup":g=AE;break;case"focusin":v="focus",g=Qp;break;case"focusout":v="blur",g=Qp;break;case"beforeblur":case"afterblur":g=Qp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=z0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=jE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=FE;break;case E1:case T1:case P1:g=SE;break;case D1:g=zE;break;case"scroll":g=_E;break;case"wheel":g=UE;break;case"copy":case"cut":case"paste":g=EE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=U0}var b=(e&4)!==0,j=!b&&t==="scroll",_=b?x!==null?x+"Capture":null:x;b=[];for(var N=u,S;N!==null;){S=N;var P=S.stateNode;if(S.tag===5&&P!==null&&(S=P,_!==null&&(P=rc(N,_),P!=null&&b.push(dc(N,P,S)))),j)break;N=N.return}0<b.length&&(x=new g(x,v,null,n,p),f.push({event:x,listeners:b}))}}if(!(e&7)){e:{if(x=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",x&&n!==mm&&(v=n.relatedTarget||n.fromElement)&&(Mi(v)||v[cs]))break e;if((g||x)&&(x=p.window===p?p:(x=p.ownerDocument)?x.defaultView||x.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?Mi(v):null,v!==null&&(j=sa(v),v!==j||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(b=z0,P="onMouseLeave",_="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(b=U0,P="onPointerLeave",_="onPointerEnter",N="pointer"),j=g==null?x:Ra(g),S=v==null?x:Ra(v),x=new b(P,N+"leave",g,n,p),x.target=j,x.relatedTarget=S,P=null,Mi(p)===u&&(b=new b(_,N+"enter",v,n,p),b.target=S,b.relatedTarget=j,P=b),j=P,g&&v)t:{for(b=g,_=v,N=0,S=b;S;S=Na(S))N++;for(S=0,P=_;P;P=Na(P))S++;for(;0<N-S;)b=Na(b),N--;for(;0<S-N;)_=Na(_),S--;for(;N--;){if(b===_||_!==null&&b===_.alternate)break t;b=Na(b),_=Na(_)}b=null}else b=null;g!==null&&J0(f,x,g,b,!1),v!==null&&j!==null&&J0(f,j,v,b,!0)}}e:{if(x=u?Ra(u):window,g=x.nodeName&&x.nodeName.toLowerCase(),g==="select"||g==="input"&&x.type==="file")var M=KE;else if(Y0(x))if(j1)M=JE;else{M=QE;var R=GE}else(g=x.nodeName)&&g.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(M=XE);if(M&&(M=M(t,u))){w1(f,M,n,p);break e}R&&R(t,x,u),t==="focusout"&&(R=x._wrapperState)&&R.controlled&&x.type==="number"&&dm(x,"number",x.value)}switch(R=u?Ra(u):window,t){case"focusin":(Y0(R)||R.contentEditable==="true")&&(Aa=R,wm=u,Al=null);break;case"focusout":Al=wm=Aa=null;break;case"mousedown":jm=!0;break;case"contextmenu":case"mouseup":case"dragend":jm=!1,G0(f,n,p);break;case"selectionchange":if(nT)break;case"keydown":case"keyup":G0(f,n,p)}var A;if(lx)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else La?b1(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(y1&&n.locale!=="ko"&&(La||T!=="onCompositionStart"?T==="onCompositionEnd"&&La&&(A=v1()):(As=p,ix="value"in As?As.value:As.textContent,La=!0)),R=Mu(u,T),0<R.length&&(T=new B0(T,t,null,n,p),f.push({event:T,listeners:R}),A?T.data=A:(A=_1(n),A!==null&&(T.data=A)))),(A=HE?YE(t,n):VE(t,n))&&(u=Mu(u,"onBeforeInput"),0<u.length&&(p=new B0("onBeforeInput","beforeinput",null,n,p),f.push({event:p,listeners:u}),p.data=A))}M1(f,e)})}function dc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Mu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=rc(t,n),a!=null&&r.unshift(dc(t,a,s)),a=rc(t,e),a!=null&&r.push(dc(t,a,s))),t=t.return}return r}function Na(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function J0(t,e,n,r,s){for(var a=e._reactName,o=[];n!==null&&n!==r;){var l=n,d=l.alternate,u=l.stateNode;if(d!==null&&d===r)break;l.tag===5&&u!==null&&(l=u,s?(d=rc(n,a),d!=null&&o.unshift(dc(n,d,l))):s||(d=rc(n,a),d!=null&&o.push(dc(n,d,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var aT=/\r\n?/g,oT=/\u0000|\uFFFD/g;function ey(t){return(typeof t=="string"?t:""+t).replace(aT,`
`).replace(oT,"")}function wd(t,e,n){if(e=ey(e),ey(t)!==e&&n)throw Error(de(425))}function Lu(){}var Nm=null,km=null;function Sm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Cm=typeof setTimeout=="function"?setTimeout:void 0,lT=typeof clearTimeout=="function"?clearTimeout:void 0,ty=typeof Promise=="function"?Promise:void 0,cT=typeof queueMicrotask=="function"?queueMicrotask:typeof ty<"u"?function(t){return ty.resolve(null).then(t).catch(dT)}:Cm;function dT(t){setTimeout(function(){throw t})}function af(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ac(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ac(e)}function Ys(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ny(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Eo=Math.random().toString(36).slice(2),Tr="__reactFiber$"+Eo,uc="__reactProps$"+Eo,cs="__reactContainer$"+Eo,Em="__reactEvents$"+Eo,uT="__reactListeners$"+Eo,hT="__reactHandles$"+Eo;function Mi(t){var e=t[Tr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[cs]||n[Tr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ny(t);t!==null;){if(n=t[Tr])return n;t=ny(t)}return e}t=n,n=t.parentNode}return null}function Rc(t){return t=t[Tr]||t[cs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ra(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(de(33))}function Mh(t){return t[uc]||null}var Tm=[],Fa=-1;function ii(t){return{current:t}}function it(t){0>Fa||(t.current=Tm[Fa],Tm[Fa]=null,Fa--)}function tt(t,e){Fa++,Tm[Fa]=t.current,t.current=e}var ei={},on=ii(ei),jn=ii(!1),qi=ei;function io(t,e){var n=t.type.contextTypes;if(!n)return ei;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Nn(t){return t=t.childContextTypes,t!=null}function Au(){it(jn),it(on)}function ry(t,e,n){if(on.current!==ei)throw Error(de(168));tt(on,e),tt(jn,n)}function A1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(de(108,GC(t)||"Unknown",s));return mt({},n,r)}function Iu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ei,qi=on.current,tt(on,t),tt(jn,jn.current),!0}function sy(t,e,n){var r=t.stateNode;if(!r)throw Error(de(169));n?(t=A1(t,e,qi),r.__reactInternalMemoizedMergedChildContext=t,it(jn),it(on),tt(on,t)):it(jn),tt(jn,n)}var ts=null,Lh=!1,of=!1;function I1(t){ts===null?ts=[t]:ts.push(t)}function pT(t){Lh=!0,I1(t)}function ai(){if(!of&&ts!==null){of=!0;var t=0,e=Ze;try{var n=ts;for(Ze=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ts=null,Lh=!1}catch(s){throw ts!==null&&(ts=ts.slice(t+1)),o1(tx,ai),s}finally{Ze=e,of=!1}}return null}var $a=[],za=0,Ru=null,Fu=0,Hn=[],Yn=0,Zi=null,ss=1,is="";function ji(t,e){$a[za++]=Fu,$a[za++]=Ru,Ru=t,Fu=e}function R1(t,e,n){Hn[Yn++]=ss,Hn[Yn++]=is,Hn[Yn++]=Zi,Zi=t;var r=ss;t=is;var s=32-pr(r)-1;r&=~(1<<s),n+=1;var a=32-pr(e)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ss=1<<32-pr(e)+s|n<<s|r,is=a+t}else ss=1<<a|n<<s|r,is=t}function dx(t){t.return!==null&&(ji(t,1),R1(t,1,0))}function ux(t){for(;t===Ru;)Ru=$a[--za],$a[za]=null,Fu=$a[--za],$a[za]=null;for(;t===Zi;)Zi=Hn[--Yn],Hn[Yn]=null,is=Hn[--Yn],Hn[Yn]=null,ss=Hn[--Yn],Hn[Yn]=null}var On=null,Dn=null,ot=!1,dr=null;function F1(t,e){var n=Vn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function iy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,On=t,Dn=Ys(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,On=t,Dn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Zi!==null?{id:ss,overflow:is}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Vn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,On=t,Dn=null,!0):!1;default:return!1}}function Pm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Dm(t){if(ot){var e=Dn;if(e){var n=e;if(!iy(t,e)){if(Pm(t))throw Error(de(418));e=Ys(n.nextSibling);var r=On;e&&iy(t,e)?F1(r,n):(t.flags=t.flags&-4097|2,ot=!1,On=t)}}else{if(Pm(t))throw Error(de(418));t.flags=t.flags&-4097|2,ot=!1,On=t}}}function ay(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;On=t}function jd(t){if(t!==On)return!1;if(!ot)return ay(t),ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Sm(t.type,t.memoizedProps)),e&&(e=Dn)){if(Pm(t))throw $1(),Error(de(418));for(;e;)F1(t,e),e=Ys(e.nextSibling)}if(ay(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(de(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Dn=Ys(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Dn=null}}else Dn=On?Ys(t.stateNode.nextSibling):null;return!0}function $1(){for(var t=Dn;t;)t=Ys(t.nextSibling)}function ao(){Dn=On=null,ot=!1}function hx(t){dr===null?dr=[t]:dr.push(t)}var fT=gs.ReactCurrentBatchConfig;function rl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(de(309));var r=n.stateNode}if(!r)throw Error(de(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(de(284));if(!n._owner)throw Error(de(290,t))}return t}function Nd(t,e){throw t=Object.prototype.toString.call(e),Error(de(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function oy(t){var e=t._init;return e(t._payload)}function z1(t){function e(_,N){if(t){var S=_.deletions;S===null?(_.deletions=[N],_.flags|=16):S.push(N)}}function n(_,N){if(!t)return null;for(;N!==null;)e(_,N),N=N.sibling;return null}function r(_,N){for(_=new Map;N!==null;)N.key!==null?_.set(N.key,N):_.set(N.index,N),N=N.sibling;return _}function s(_,N){return _=Ks(_,N),_.index=0,_.sibling=null,_}function a(_,N,S){return _.index=S,t?(S=_.alternate,S!==null?(S=S.index,S<N?(_.flags|=2,N):S):(_.flags|=2,N)):(_.flags|=1048576,N)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,N,S,P){return N===null||N.tag!==6?(N=ff(S,_.mode,P),N.return=_,N):(N=s(N,S),N.return=_,N)}function d(_,N,S,P){var M=S.type;return M===Ma?p(_,N,S.props.children,P,S.key):N!==null&&(N.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Cs&&oy(M)===N.type)?(P=s(N,S.props),P.ref=rl(_,N,S),P.return=_,P):(P=mu(S.type,S.key,S.props,null,_.mode,P),P.ref=rl(_,N,S),P.return=_,P)}function u(_,N,S,P){return N===null||N.tag!==4||N.stateNode.containerInfo!==S.containerInfo||N.stateNode.implementation!==S.implementation?(N=mf(S,_.mode,P),N.return=_,N):(N=s(N,S.children||[]),N.return=_,N)}function p(_,N,S,P,M){return N===null||N.tag!==7?(N=Bi(S,_.mode,P,M),N.return=_,N):(N=s(N,S),N.return=_,N)}function f(_,N,S){if(typeof N=="string"&&N!==""||typeof N=="number")return N=ff(""+N,_.mode,S),N.return=_,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case pd:return S=mu(N.type,N.key,N.props,null,_.mode,S),S.ref=rl(_,null,N),S.return=_,S;case Oa:return N=mf(N,_.mode,S),N.return=_,N;case Cs:var P=N._init;return f(_,P(N._payload),S)}if(yl(N)||Xo(N))return N=Bi(N,_.mode,S,null),N.return=_,N;Nd(_,N)}return null}function x(_,N,S,P){var M=N!==null?N.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return M!==null?null:l(_,N,""+S,P);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case pd:return S.key===M?d(_,N,S,P):null;case Oa:return S.key===M?u(_,N,S,P):null;case Cs:return M=S._init,x(_,N,M(S._payload),P)}if(yl(S)||Xo(S))return M!==null?null:p(_,N,S,P,null);Nd(_,S)}return null}function g(_,N,S,P,M){if(typeof P=="string"&&P!==""||typeof P=="number")return _=_.get(S)||null,l(N,_,""+P,M);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case pd:return _=_.get(P.key===null?S:P.key)||null,d(N,_,P,M);case Oa:return _=_.get(P.key===null?S:P.key)||null,u(N,_,P,M);case Cs:var R=P._init;return g(_,N,S,R(P._payload),M)}if(yl(P)||Xo(P))return _=_.get(S)||null,p(N,_,P,M,null);Nd(N,P)}return null}function v(_,N,S,P){for(var M=null,R=null,A=N,T=N=0,Y=null;A!==null&&T<S.length;T++){A.index>T?(Y=A,A=null):Y=A.sibling;var O=x(_,A,S[T],P);if(O===null){A===null&&(A=Y);break}t&&A&&O.alternate===null&&e(_,A),N=a(O,N,T),R===null?M=O:R.sibling=O,R=O,A=Y}if(T===S.length)return n(_,A),ot&&ji(_,T),M;if(A===null){for(;T<S.length;T++)A=f(_,S[T],P),A!==null&&(N=a(A,N,T),R===null?M=A:R.sibling=A,R=A);return ot&&ji(_,T),M}for(A=r(_,A);T<S.length;T++)Y=g(A,_,T,S[T],P),Y!==null&&(t&&Y.alternate!==null&&A.delete(Y.key===null?T:Y.key),N=a(Y,N,T),R===null?M=Y:R.sibling=Y,R=Y);return t&&A.forEach(function(H){return e(_,H)}),ot&&ji(_,T),M}function b(_,N,S,P){var M=Xo(S);if(typeof M!="function")throw Error(de(150));if(S=M.call(S),S==null)throw Error(de(151));for(var R=M=null,A=N,T=N=0,Y=null,O=S.next();A!==null&&!O.done;T++,O=S.next()){A.index>T?(Y=A,A=null):Y=A.sibling;var H=x(_,A,O.value,P);if(H===null){A===null&&(A=Y);break}t&&A&&H.alternate===null&&e(_,A),N=a(H,N,T),R===null?M=H:R.sibling=H,R=H,A=Y}if(O.done)return n(_,A),ot&&ji(_,T),M;if(A===null){for(;!O.done;T++,O=S.next())O=f(_,O.value,P),O!==null&&(N=a(O,N,T),R===null?M=O:R.sibling=O,R=O);return ot&&ji(_,T),M}for(A=r(_,A);!O.done;T++,O=S.next())O=g(A,_,T,O.value,P),O!==null&&(t&&O.alternate!==null&&A.delete(O.key===null?T:O.key),N=a(O,N,T),R===null?M=O:R.sibling=O,R=O);return t&&A.forEach(function(te){return e(_,te)}),ot&&ji(_,T),M}function j(_,N,S,P){if(typeof S=="object"&&S!==null&&S.type===Ma&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case pd:e:{for(var M=S.key,R=N;R!==null;){if(R.key===M){if(M=S.type,M===Ma){if(R.tag===7){n(_,R.sibling),N=s(R,S.props.children),N.return=_,_=N;break e}}else if(R.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Cs&&oy(M)===R.type){n(_,R.sibling),N=s(R,S.props),N.ref=rl(_,R,S),N.return=_,_=N;break e}n(_,R);break}else e(_,R);R=R.sibling}S.type===Ma?(N=Bi(S.props.children,_.mode,P,S.key),N.return=_,_=N):(P=mu(S.type,S.key,S.props,null,_.mode,P),P.ref=rl(_,N,S),P.return=_,_=P)}return o(_);case Oa:e:{for(R=S.key;N!==null;){if(N.key===R)if(N.tag===4&&N.stateNode.containerInfo===S.containerInfo&&N.stateNode.implementation===S.implementation){n(_,N.sibling),N=s(N,S.children||[]),N.return=_,_=N;break e}else{n(_,N);break}else e(_,N);N=N.sibling}N=mf(S,_.mode,P),N.return=_,_=N}return o(_);case Cs:return R=S._init,j(_,N,R(S._payload),P)}if(yl(S))return v(_,N,S,P);if(Xo(S))return b(_,N,S,P);Nd(_,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,N!==null&&N.tag===6?(n(_,N.sibling),N=s(N,S),N.return=_,_=N):(n(_,N),N=ff(S,_.mode,P),N.return=_,_=N),o(_)):n(_,N)}return j}var oo=z1(!0),B1=z1(!1),$u=ii(null),zu=null,Ba=null,px=null;function fx(){px=Ba=zu=null}function mx(t){var e=$u.current;it($u),t._currentValue=e}function Om(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Xa(t,e){zu=t,px=Ba=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_n=!0),t.firstContext=null)}function Qn(t){var e=t._currentValue;if(px!==t)if(t={context:t,memoizedValue:e,next:null},Ba===null){if(zu===null)throw Error(de(308));Ba=t,zu.dependencies={lanes:0,firstContext:t}}else Ba=Ba.next=t;return e}var Li=null;function gx(t){Li===null?Li=[t]:Li.push(t)}function U1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,gx(e)):(n.next=s.next,s.next=n),e.interleaved=n,ds(t,r)}function ds(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Es=!1;function xx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function W1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function as(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ze&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ds(t,n)}return s=r.interleaved,s===null?(e.next=e,gx(r)):(e.next=s.next,s.next=e),r.interleaved=e,ds(t,n)}function cu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,nx(t,n)}}function ly(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Bu(t,e,n,r){var s=t.updateQueue;Es=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var d=l,u=d.next;d.next=null,o===null?a=u:o.next=u,o=d;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=u:l.next=u,p.lastBaseUpdate=d))}if(a!==null){var f=s.baseState;o=0,p=u=d=null,l=a;do{var x=l.lane,g=l.eventTime;if((r&x)===x){p!==null&&(p=p.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,b=l;switch(x=e,g=n,b.tag){case 1:if(v=b.payload,typeof v=="function"){f=v.call(g,f,x);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,x=typeof v=="function"?v.call(g,f,x):v,x==null)break e;f=mt({},f,x);break e;case 2:Es=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,x=s.effects,x===null?s.effects=[l]:x.push(l))}else g={eventTime:g,lane:x,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(u=p=g,d=f):p=p.next=g,o|=x;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;x=l,l=x.next,x.next=null,s.lastBaseUpdate=x,s.shared.pending=null}}while(!0);if(p===null&&(d=f),s.baseState=d,s.firstBaseUpdate=u,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);Gi|=o,t.lanes=o,t.memoizedState=f}}function cy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(de(191,s));s.call(r)}}}var Fc={},Mr=ii(Fc),hc=ii(Fc),pc=ii(Fc);function Ai(t){if(t===Fc)throw Error(de(174));return t}function vx(t,e){switch(tt(pc,e),tt(hc,t),tt(Mr,Fc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hm(e,t)}it(Mr),tt(Mr,e)}function lo(){it(Mr),it(hc),it(pc)}function H1(t){Ai(pc.current);var e=Ai(Mr.current),n=hm(e,t.type);e!==n&&(tt(hc,t),tt(Mr,n))}function yx(t){hc.current===t&&(it(Mr),it(hc))}var ht=ii(0);function Uu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lf=[];function bx(){for(var t=0;t<lf.length;t++)lf[t]._workInProgressVersionPrimary=null;lf.length=0}var du=gs.ReactCurrentDispatcher,cf=gs.ReactCurrentBatchConfig,Ki=0,ft=null,Tt=null,At=null,Wu=!1,Il=!1,fc=0,mT=0;function Jt(){throw Error(de(321))}function _x(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mr(t[n],e[n]))return!1;return!0}function wx(t,e,n,r,s,a){if(Ki=a,ft=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,du.current=t===null||t.memoizedState===null?yT:bT,t=n(r,s),Il){a=0;do{if(Il=!1,fc=0,25<=a)throw Error(de(301));a+=1,At=Tt=null,e.updateQueue=null,du.current=_T,t=n(r,s)}while(Il)}if(du.current=Hu,e=Tt!==null&&Tt.next!==null,Ki=0,At=Tt=ft=null,Wu=!1,e)throw Error(de(300));return t}function jx(){var t=fc!==0;return fc=0,t}function Cr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?ft.memoizedState=At=t:At=At.next=t,At}function Xn(){if(Tt===null){var t=ft.alternate;t=t!==null?t.memoizedState:null}else t=Tt.next;var e=At===null?ft.memoizedState:At.next;if(e!==null)At=e,Tt=t;else{if(t===null)throw Error(de(310));Tt=t,t={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},At===null?ft.memoizedState=At=t:At=At.next=t}return At}function mc(t,e){return typeof e=="function"?e(t):e}function df(t){var e=Xn(),n=e.queue;if(n===null)throw Error(de(311));n.lastRenderedReducer=t;var r=Tt,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var l=o=null,d=null,u=a;do{var p=u.lane;if((Ki&p)===p)d!==null&&(d=d.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:p,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};d===null?(l=d=f,o=r):d=d.next=f,ft.lanes|=p,Gi|=p}u=u.next}while(u!==null&&u!==a);d===null?o=r:d.next=l,mr(r,e.memoizedState)||(_n=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=d,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,ft.lanes|=a,Gi|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function uf(t){var e=Xn(),n=e.queue;if(n===null)throw Error(de(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);mr(a,e.memoizedState)||(_n=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function Y1(){}function V1(t,e){var n=ft,r=Xn(),s=e(),a=!mr(r.memoizedState,s);if(a&&(r.memoizedState=s,_n=!0),r=r.queue,Nx(K1.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||At!==null&&At.memoizedState.tag&1){if(n.flags|=2048,gc(9,Z1.bind(null,n,r,s,e),void 0,null),Rt===null)throw Error(de(349));Ki&30||q1(n,e,s)}return s}function q1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ft.updateQueue,e===null?(e={lastEffect:null,stores:null},ft.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Z1(t,e,n,r){e.value=n,e.getSnapshot=r,G1(e)&&Q1(t)}function K1(t,e,n){return n(function(){G1(e)&&Q1(t)})}function G1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mr(t,n)}catch{return!0}}function Q1(t){var e=ds(t,1);e!==null&&fr(e,t,1,-1)}function dy(t){var e=Cr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mc,lastRenderedState:t},e.queue=t,t=t.dispatch=vT.bind(null,ft,t),[e.memoizedState,t]}function gc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ft.updateQueue,e===null?(e={lastEffect:null,stores:null},ft.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function X1(){return Xn().memoizedState}function uu(t,e,n,r){var s=Cr();ft.flags|=t,s.memoizedState=gc(1|e,n,void 0,r===void 0?null:r)}function Ah(t,e,n,r){var s=Xn();r=r===void 0?null:r;var a=void 0;if(Tt!==null){var o=Tt.memoizedState;if(a=o.destroy,r!==null&&_x(r,o.deps)){s.memoizedState=gc(e,n,a,r);return}}ft.flags|=t,s.memoizedState=gc(1|e,n,a,r)}function uy(t,e){return uu(8390656,8,t,e)}function Nx(t,e){return Ah(2048,8,t,e)}function J1(t,e){return Ah(4,2,t,e)}function ej(t,e){return Ah(4,4,t,e)}function tj(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function nj(t,e,n){return n=n!=null?n.concat([t]):null,Ah(4,4,tj.bind(null,e,t),n)}function kx(){}function rj(t,e){var n=Xn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_x(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function sj(t,e){var n=Xn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_x(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ij(t,e,n){return Ki&21?(mr(n,e)||(n=d1(),ft.lanes|=n,Gi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_n=!0),t.memoizedState=n)}function gT(t,e){var n=Ze;Ze=n!==0&&4>n?n:4,t(!0);var r=cf.transition;cf.transition={};try{t(!1),e()}finally{Ze=n,cf.transition=r}}function aj(){return Xn().memoizedState}function xT(t,e,n){var r=Zs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},oj(t))lj(e,n);else if(n=U1(t,e,n,r),n!==null){var s=un();fr(n,t,r,s),cj(n,e,r)}}function vT(t,e,n){var r=Zs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(oj(t))lj(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,n);if(s.hasEagerState=!0,s.eagerState=l,mr(l,o)){var d=e.interleaved;d===null?(s.next=s,gx(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=U1(t,e,s,r),n!==null&&(s=un(),fr(n,t,r,s),cj(n,e,r))}}function oj(t){var e=t.alternate;return t===ft||e!==null&&e===ft}function lj(t,e){Il=Wu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function cj(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,nx(t,n)}}var Hu={readContext:Qn,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useInsertionEffect:Jt,useLayoutEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useMutableSource:Jt,useSyncExternalStore:Jt,useId:Jt,unstable_isNewReconciler:!1},yT={readContext:Qn,useCallback:function(t,e){return Cr().memoizedState=[t,e===void 0?null:e],t},useContext:Qn,useEffect:uy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,uu(4194308,4,tj.bind(null,e,t),n)},useLayoutEffect:function(t,e){return uu(4194308,4,t,e)},useInsertionEffect:function(t,e){return uu(4,2,t,e)},useMemo:function(t,e){var n=Cr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Cr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=xT.bind(null,ft,t),[r.memoizedState,t]},useRef:function(t){var e=Cr();return t={current:t},e.memoizedState=t},useState:dy,useDebugValue:kx,useDeferredValue:function(t){return Cr().memoizedState=t},useTransition:function(){var t=dy(!1),e=t[0];return t=gT.bind(null,t[1]),Cr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ft,s=Cr();if(ot){if(n===void 0)throw Error(de(407));n=n()}else{if(n=e(),Rt===null)throw Error(de(349));Ki&30||q1(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,uy(K1.bind(null,r,a,t),[t]),r.flags|=2048,gc(9,Z1.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Cr(),e=Rt.identifierPrefix;if(ot){var n=is,r=ss;n=(r&~(1<<32-pr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=fc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=mT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},bT={readContext:Qn,useCallback:rj,useContext:Qn,useEffect:Nx,useImperativeHandle:nj,useInsertionEffect:J1,useLayoutEffect:ej,useMemo:sj,useReducer:df,useRef:X1,useState:function(){return df(mc)},useDebugValue:kx,useDeferredValue:function(t){var e=Xn();return ij(e,Tt.memoizedState,t)},useTransition:function(){var t=df(mc)[0],e=Xn().memoizedState;return[t,e]},useMutableSource:Y1,useSyncExternalStore:V1,useId:aj,unstable_isNewReconciler:!1},_T={readContext:Qn,useCallback:rj,useContext:Qn,useEffect:Nx,useImperativeHandle:nj,useInsertionEffect:J1,useLayoutEffect:ej,useMemo:sj,useReducer:uf,useRef:X1,useState:function(){return uf(mc)},useDebugValue:kx,useDeferredValue:function(t){var e=Xn();return Tt===null?e.memoizedState=t:ij(e,Tt.memoizedState,t)},useTransition:function(){var t=uf(mc)[0],e=Xn().memoizedState;return[t,e]},useMutableSource:Y1,useSyncExternalStore:V1,useId:aj,unstable_isNewReconciler:!1};function or(t,e){if(t&&t.defaultProps){e=mt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Mm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:mt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ih={isMounted:function(t){return(t=t._reactInternals)?sa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=un(),s=Zs(t),a=as(r,s);a.payload=e,n!=null&&(a.callback=n),e=Vs(t,a,s),e!==null&&(fr(e,t,s,r),cu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=un(),s=Zs(t),a=as(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Vs(t,a,s),e!==null&&(fr(e,t,s,r),cu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=un(),r=Zs(t),s=as(n,r);s.tag=2,e!=null&&(s.callback=e),e=Vs(t,s,r),e!==null&&(fr(e,t,r,n),cu(e,t,r))}};function hy(t,e,n,r,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!lc(n,r)||!lc(s,a):!0}function dj(t,e,n){var r=!1,s=ei,a=e.contextType;return typeof a=="object"&&a!==null?a=Qn(a):(s=Nn(e)?qi:on.current,r=e.contextTypes,a=(r=r!=null)?io(t,s):ei),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ih,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function py(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ih.enqueueReplaceState(e,e.state,null)}function Lm(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},xx(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=Qn(a):(a=Nn(e)?qi:on.current,s.context=io(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Mm(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ih.enqueueReplaceState(s,s.state,null),Bu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function co(t,e){try{var n="",r=e;do n+=KC(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function hf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Am(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var wT=typeof WeakMap=="function"?WeakMap:Map;function uj(t,e,n){n=as(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Vu||(Vu=!0,Ym=r),Am(t,e)},n}function hj(t,e,n){n=as(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Am(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Am(t,e),typeof r!="function"&&(qs===null?qs=new Set([this]):qs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function fy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new wT;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=IT.bind(null,t,e,n),e.then(t,t))}function my(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function gy(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=as(-1,1),e.tag=2,Vs(n,e,1))),n.lanes|=1),t)}var jT=gs.ReactCurrentOwner,_n=!1;function cn(t,e,n,r){e.child=t===null?B1(e,null,n,r):oo(e,t.child,n,r)}function xy(t,e,n,r,s){n=n.render;var a=e.ref;return Xa(e,s),r=wx(t,e,n,r,a,s),n=jx(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,us(t,e,s)):(ot&&n&&dx(e),e.flags|=1,cn(t,e,r,s),e.child)}function vy(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!Mx(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,pj(t,e,a,r,s)):(t=mu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:lc,n(o,r)&&t.ref===e.ref)return us(t,e,s)}return e.flags|=1,t=Ks(a,r),t.ref=e.ref,t.return=e,e.child=t}function pj(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(lc(a,r)&&t.ref===e.ref)if(_n=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(_n=!0);else return e.lanes=t.lanes,us(t,e,s)}return Im(t,e,n,r,s)}function fj(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(Wa,Pn),Pn|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,tt(Wa,Pn),Pn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,tt(Wa,Pn),Pn|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,tt(Wa,Pn),Pn|=r;return cn(t,e,s,n),e.child}function mj(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Im(t,e,n,r,s){var a=Nn(n)?qi:on.current;return a=io(e,a),Xa(e,s),n=wx(t,e,n,r,a,s),r=jx(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,us(t,e,s)):(ot&&r&&dx(e),e.flags|=1,cn(t,e,n,s),e.child)}function yy(t,e,n,r,s){if(Nn(n)){var a=!0;Iu(e)}else a=!1;if(Xa(e,s),e.stateNode===null)hu(t,e),dj(e,n,r),Lm(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var d=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Qn(u):(u=Nn(n)?qi:on.current,u=io(e,u));var p=n.getDerivedStateFromProps,f=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||d!==u)&&py(e,o,r,u),Es=!1;var x=e.memoizedState;o.state=x,Bu(e,r,o,s),d=e.memoizedState,l!==r||x!==d||jn.current||Es?(typeof p=="function"&&(Mm(e,n,p,r),d=e.memoizedState),(l=Es||hy(e,n,l,r,x,d,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=d),o.props=r,o.state=d,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,W1(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:or(e.type,l),o.props=u,f=e.pendingProps,x=o.context,d=n.contextType,typeof d=="object"&&d!==null?d=Qn(d):(d=Nn(n)?qi:on.current,d=io(e,d));var g=n.getDerivedStateFromProps;(p=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||x!==d)&&py(e,o,r,d),Es=!1,x=e.memoizedState,o.state=x,Bu(e,r,o,s);var v=e.memoizedState;l!==f||x!==v||jn.current||Es?(typeof g=="function"&&(Mm(e,n,g,r),v=e.memoizedState),(u=Es||hy(e,n,u,r,x,v,d)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,d)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=d,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),r=!1)}return Rm(t,e,n,r,a,s)}function Rm(t,e,n,r,s,a){mj(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&sy(e,n,!1),us(t,e,a);r=e.stateNode,jT.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=oo(e,t.child,null,a),e.child=oo(e,null,l,a)):cn(t,e,l,a),e.memoizedState=r.state,s&&sy(e,n,!0),e.child}function gj(t){var e=t.stateNode;e.pendingContext?ry(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ry(t,e.context,!1),vx(t,e.containerInfo)}function by(t,e,n,r,s){return ao(),hx(s),e.flags|=256,cn(t,e,n,r),e.child}var Fm={dehydrated:null,treeContext:null,retryLane:0};function $m(t){return{baseLanes:t,cachePool:null,transitions:null}}function xj(t,e,n){var r=e.pendingProps,s=ht.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),tt(ht,s&1),t===null)return Dm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=$h(o,r,0,null),t=Bi(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=$m(n),e.memoizedState=Fm,t):Sx(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return NT(t,e,o,r,l,s,n);if(a){a=r.fallback,o=e.mode,s=t.child,l=s.sibling;var d={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=d,e.deletions=null):(r=Ks(s,d),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Ks(l,a):(a=Bi(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?$m(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=Fm,r}return a=t.child,t=a.sibling,r=Ks(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Sx(t,e){return e=$h({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function kd(t,e,n,r){return r!==null&&hx(r),oo(e,t.child,null,n),t=Sx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function NT(t,e,n,r,s,a,o){if(n)return e.flags&256?(e.flags&=-257,r=hf(Error(de(422))),kd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=$h({mode:"visible",children:r.children},s,0,null),a=Bi(a,s,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&oo(e,t.child,null,o),e.child.memoizedState=$m(o),e.memoizedState=Fm,a);if(!(e.mode&1))return kd(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(de(419)),r=hf(a,r,void 0),kd(t,e,o,r)}if(l=(o&t.childLanes)!==0,_n||l){if(r=Rt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,ds(t,s),fr(r,t,s,-1))}return Ox(),r=hf(Error(de(421))),kd(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=RT.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,Dn=Ys(s.nextSibling),On=e,ot=!0,dr=null,t!==null&&(Hn[Yn++]=ss,Hn[Yn++]=is,Hn[Yn++]=Zi,ss=t.id,is=t.overflow,Zi=e),e=Sx(e,r.children),e.flags|=4096,e)}function _y(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Om(t.return,e,n)}function pf(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function vj(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(cn(t,e,r.children,n),r=ht.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_y(t,n,e);else if(t.tag===19)_y(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(tt(ht,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Uu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),pf(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Uu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}pf(e,!0,n,null,a);break;case"together":pf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function hu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function us(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Gi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(de(153));if(e.child!==null){for(t=e.child,n=Ks(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ks(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function kT(t,e,n){switch(e.tag){case 3:gj(e),ao();break;case 5:H1(e);break;case 1:Nn(e.type)&&Iu(e);break;case 4:vx(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;tt($u,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(tt(ht,ht.current&1),e.flags|=128,null):n&e.child.childLanes?xj(t,e,n):(tt(ht,ht.current&1),t=us(t,e,n),t!==null?t.sibling:null);tt(ht,ht.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return vj(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),tt(ht,ht.current),r)break;return null;case 22:case 23:return e.lanes=0,fj(t,e,n)}return us(t,e,n)}var yj,zm,bj,_j;yj=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zm=function(){};bj=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ai(Mr.current);var a=null;switch(n){case"input":s=lm(t,s),r=lm(t,r),a=[];break;case"select":s=mt({},s,{value:void 0}),r=mt({},r,{value:void 0}),a=[];break;case"textarea":s=um(t,s),r=um(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Lu)}pm(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(tc.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var d=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&d!==l&&(d!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in d)d.hasOwnProperty(o)&&l[o]!==d[o]&&(n||(n={}),n[o]=d[o])}else n||(a||(a=[]),a.push(u,n)),n=d;else u==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,l=l?l.__html:void 0,d!=null&&l!==d&&(a=a||[]).push(u,d)):u==="children"?typeof d!="string"&&typeof d!="number"||(a=a||[]).push(u,""+d):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(tc.hasOwnProperty(u)?(d!=null&&u==="onScroll"&&rt("scroll",t),a||l===d||(a=[])):(a=a||[]).push(u,d))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};_j=function(t,e,n,r){n!==r&&(e.flags|=4)};function sl(t,e){if(!ot)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function en(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ST(t,e,n){var r=e.pendingProps;switch(ux(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(e),null;case 1:return Nn(e.type)&&Au(),en(e),null;case 3:return r=e.stateNode,lo(),it(jn),it(on),bx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(jd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,dr!==null&&(Zm(dr),dr=null))),zm(t,e),en(e),null;case 5:yx(e);var s=Ai(pc.current);if(n=e.type,t!==null&&e.stateNode!=null)bj(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(de(166));return en(e),null}if(t=Ai(Mr.current),jd(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Tr]=e,r[uc]=a,t=(e.mode&1)!==0,n){case"dialog":rt("cancel",r),rt("close",r);break;case"iframe":case"object":case"embed":rt("load",r);break;case"video":case"audio":for(s=0;s<_l.length;s++)rt(_l[s],r);break;case"source":rt("error",r);break;case"img":case"image":case"link":rt("error",r),rt("load",r);break;case"details":rt("toggle",r);break;case"input":P0(r,a),rt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},rt("invalid",r);break;case"textarea":O0(r,a),rt("invalid",r)}pm(n,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&wd(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&wd(r.textContent,l,t),s=["children",""+l]):tc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&rt("scroll",r)}switch(n){case"input":fd(r),D0(r,a,!0);break;case"textarea":fd(r),M0(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Lu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Kw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Tr]=e,t[uc]=r,yj(t,e,!1,!1),e.stateNode=t;e:{switch(o=fm(n,r),n){case"dialog":rt("cancel",t),rt("close",t),s=r;break;case"iframe":case"object":case"embed":rt("load",t),s=r;break;case"video":case"audio":for(s=0;s<_l.length;s++)rt(_l[s],t);s=r;break;case"source":rt("error",t),s=r;break;case"img":case"image":case"link":rt("error",t),rt("load",t),s=r;break;case"details":rt("toggle",t),s=r;break;case"input":P0(t,r),s=lm(t,r),rt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=mt({},r,{value:void 0}),rt("invalid",t);break;case"textarea":O0(t,r),s=um(t,r),rt("invalid",t);break;default:s=r}pm(n,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var d=l[a];a==="style"?Xw(t,d):a==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Gw(t,d)):a==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&nc(t,d):typeof d=="number"&&nc(t,""+d):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(tc.hasOwnProperty(a)?d!=null&&a==="onScroll"&&rt("scroll",t):d!=null&&Gg(t,a,d,o))}switch(n){case"input":fd(t),D0(t,r,!1);break;case"textarea":fd(t),M0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Js(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Za(t,!!r.multiple,a,!1):r.defaultValue!=null&&Za(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Lu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return en(e),null;case 6:if(t&&e.stateNode!=null)_j(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(de(166));if(n=Ai(pc.current),Ai(Mr.current),jd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Tr]=e,(a=r.nodeValue!==n)&&(t=On,t!==null))switch(t.tag){case 3:wd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wd(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Tr]=e,e.stateNode=r}return en(e),null;case 13:if(it(ht),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ot&&Dn!==null&&e.mode&1&&!(e.flags&128))$1(),ao(),e.flags|=98560,a=!1;else if(a=jd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(de(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(de(317));a[Tr]=e}else ao(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;en(e),a=!1}else dr!==null&&(Zm(dr),dr=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ht.current&1?Pt===0&&(Pt=3):Ox())),e.updateQueue!==null&&(e.flags|=4),en(e),null);case 4:return lo(),zm(t,e),t===null&&cc(e.stateNode.containerInfo),en(e),null;case 10:return mx(e.type._context),en(e),null;case 17:return Nn(e.type)&&Au(),en(e),null;case 19:if(it(ht),a=e.memoizedState,a===null)return en(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)sl(a,!1);else{if(Pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Uu(t),o!==null){for(e.flags|=128,sl(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return tt(ht,ht.current&1|2),e.child}t=t.sibling}a.tail!==null&&bt()>uo&&(e.flags|=128,r=!0,sl(a,!1),e.lanes=4194304)}else{if(!r)if(t=Uu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),sl(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!ot)return en(e),null}else 2*bt()-a.renderingStartTime>uo&&n!==1073741824&&(e.flags|=128,r=!0,sl(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=bt(),e.sibling=null,n=ht.current,tt(ht,r?n&1|2:n&1),e):(en(e),null);case 22:case 23:return Dx(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Pn&1073741824&&(en(e),e.subtreeFlags&6&&(e.flags|=8192)):en(e),null;case 24:return null;case 25:return null}throw Error(de(156,e.tag))}function CT(t,e){switch(ux(e),e.tag){case 1:return Nn(e.type)&&Au(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return lo(),it(jn),it(on),bx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return yx(e),null;case 13:if(it(ht),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(de(340));ao()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return it(ht),null;case 4:return lo(),null;case 10:return mx(e.type._context),null;case 22:case 23:return Dx(),null;case 24:return null;default:return null}}var Sd=!1,nn=!1,ET=typeof WeakSet=="function"?WeakSet:Set,ve=null;function Ua(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){gt(t,e,r)}else n.current=null}function Bm(t,e,n){try{n()}catch(r){gt(t,e,r)}}var wy=!1;function TT(t,e){if(Nm=Du,t=S1(),cx(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,d=-1,u=0,p=0,f=t,x=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==a||r!==0&&f.nodeType!==3||(d=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)x=f,f=g;for(;;){if(f===t)break t;if(x===n&&++u===s&&(l=o),x===a&&++p===r&&(d=o),(g=f.nextSibling)!==null)break;f=x,x=f.parentNode}f=g}n=l===-1||d===-1?null:{start:l,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(km={focusedElem:t,selectionRange:n},Du=!1,ve=e;ve!==null;)if(e=ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ve=t;else for(;ve!==null;){e=ve;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,j=v.memoizedState,_=e.stateNode,N=_.getSnapshotBeforeUpdate(e.elementType===e.type?b:or(e.type,b),j);_.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(de(163))}}catch(P){gt(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,ve=t;break}ve=e.return}return v=wy,wy=!1,v}function Rl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&Bm(e,n,a)}s=s.next}while(s!==r)}}function Rh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Um(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function wj(t){var e=t.alternate;e!==null&&(t.alternate=null,wj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Tr],delete e[uc],delete e[Em],delete e[uT],delete e[hT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function jj(t){return t.tag===5||t.tag===3||t.tag===4}function jy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jj(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Lu));else if(r!==4&&(t=t.child,t!==null))for(Wm(t,e,n),t=t.sibling;t!==null;)Wm(t,e,n),t=t.sibling}function Hm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Hm(t,e,n),t=t.sibling;t!==null;)Hm(t,e,n),t=t.sibling}var Vt=null,lr=!1;function _s(t,e,n){for(n=n.child;n!==null;)Nj(t,e,n),n=n.sibling}function Nj(t,e,n){if(Or&&typeof Or.onCommitFiberUnmount=="function")try{Or.onCommitFiberUnmount(Th,n)}catch{}switch(n.tag){case 5:nn||Ua(n,e);case 6:var r=Vt,s=lr;Vt=null,_s(t,e,n),Vt=r,lr=s,Vt!==null&&(lr?(t=Vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Vt.removeChild(n.stateNode));break;case 18:Vt!==null&&(lr?(t=Vt,n=n.stateNode,t.nodeType===8?af(t.parentNode,n):t.nodeType===1&&af(t,n),ac(t)):af(Vt,n.stateNode));break;case 4:r=Vt,s=lr,Vt=n.stateNode.containerInfo,lr=!0,_s(t,e,n),Vt=r,lr=s;break;case 0:case 11:case 14:case 15:if(!nn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Bm(n,e,o),s=s.next}while(s!==r)}_s(t,e,n);break;case 1:if(!nn&&(Ua(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){gt(n,e,l)}_s(t,e,n);break;case 21:_s(t,e,n);break;case 22:n.mode&1?(nn=(r=nn)||n.memoizedState!==null,_s(t,e,n),nn=r):_s(t,e,n);break;default:_s(t,e,n)}}function Ny(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ET),e.forEach(function(r){var s=FT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ar(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Vt=l.stateNode,lr=!1;break e;case 3:Vt=l.stateNode.containerInfo,lr=!0;break e;case 4:Vt=l.stateNode.containerInfo,lr=!0;break e}l=l.return}if(Vt===null)throw Error(de(160));Nj(a,o,s),Vt=null,lr=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(u){gt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kj(e,t),e=e.sibling}function kj(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ar(e,t),_r(t),r&4){try{Rl(3,t,t.return),Rh(3,t)}catch(b){gt(t,t.return,b)}try{Rl(5,t,t.return)}catch(b){gt(t,t.return,b)}}break;case 1:ar(e,t),_r(t),r&512&&n!==null&&Ua(n,n.return);break;case 5:if(ar(e,t),_r(t),r&512&&n!==null&&Ua(n,n.return),t.flags&32){var s=t.stateNode;try{nc(s,"")}catch(b){gt(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,l=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&qw(s,a),fm(l,o);var u=fm(l,a);for(o=0;o<d.length;o+=2){var p=d[o],f=d[o+1];p==="style"?Xw(s,f):p==="dangerouslySetInnerHTML"?Gw(s,f):p==="children"?nc(s,f):Gg(s,p,f,u)}switch(l){case"input":cm(s,a);break;case"textarea":Zw(s,a);break;case"select":var x=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var g=a.value;g!=null?Za(s,!!a.multiple,g,!1):x!==!!a.multiple&&(a.defaultValue!=null?Za(s,!!a.multiple,a.defaultValue,!0):Za(s,!!a.multiple,a.multiple?[]:"",!1))}s[uc]=a}catch(b){gt(t,t.return,b)}}break;case 6:if(ar(e,t),_r(t),r&4){if(t.stateNode===null)throw Error(de(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(b){gt(t,t.return,b)}}break;case 3:if(ar(e,t),_r(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ac(e.containerInfo)}catch(b){gt(t,t.return,b)}break;case 4:ar(e,t),_r(t);break;case 13:ar(e,t),_r(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Tx=bt())),r&4&&Ny(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(nn=(u=nn)||p,ar(e,t),nn=u):ar(e,t),_r(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!p&&t.mode&1)for(ve=t,p=t.child;p!==null;){for(f=ve=p;ve!==null;){switch(x=ve,g=x.child,x.tag){case 0:case 11:case 14:case 15:Rl(4,x,x.return);break;case 1:Ua(x,x.return);var v=x.stateNode;if(typeof v.componentWillUnmount=="function"){r=x,n=x.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(b){gt(r,n,b)}}break;case 5:Ua(x,x.return);break;case 22:if(x.memoizedState!==null){Sy(f);continue}}g!==null?(g.return=x,ve=g):Sy(f)}p=p.sibling}e:for(p=null,f=t;;){if(f.tag===5){if(p===null){p=f;try{s=f.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,d=f.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,l.style.display=Qw("display",o))}catch(b){gt(t,t.return,b)}}}else if(f.tag===6){if(p===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(b){gt(t,t.return,b)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ar(e,t),_r(t),r&4&&Ny(t);break;case 21:break;default:ar(e,t),_r(t)}}function _r(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(jj(n)){var r=n;break e}n=n.return}throw Error(de(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(nc(s,""),r.flags&=-33);var a=jy(t);Hm(t,a,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=jy(t);Wm(t,l,o);break;default:throw Error(de(161))}}catch(d){gt(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function PT(t,e,n){ve=t,Sj(t)}function Sj(t,e,n){for(var r=(t.mode&1)!==0;ve!==null;){var s=ve,a=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Sd;if(!o){var l=s.alternate,d=l!==null&&l.memoizedState!==null||nn;l=Sd;var u=nn;if(Sd=o,(nn=d)&&!u)for(ve=s;ve!==null;)o=ve,d=o.child,o.tag===22&&o.memoizedState!==null?Cy(s):d!==null?(d.return=o,ve=d):Cy(s);for(;a!==null;)ve=a,Sj(a),a=a.sibling;ve=s,Sd=l,nn=u}ky(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,ve=a):ky(t)}}function ky(t){for(;ve!==null;){var e=ve;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nn||Rh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!nn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:or(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&cy(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}cy(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var p=u.memoizedState;if(p!==null){var f=p.dehydrated;f!==null&&ac(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(de(163))}nn||e.flags&512&&Um(e)}catch(x){gt(e,e.return,x)}}if(e===t){ve=null;break}if(n=e.sibling,n!==null){n.return=e.return,ve=n;break}ve=e.return}}function Sy(t){for(;ve!==null;){var e=ve;if(e===t){ve=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ve=n;break}ve=e.return}}function Cy(t){for(;ve!==null;){var e=ve;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Rh(4,e)}catch(d){gt(e,n,d)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(d){gt(e,s,d)}}var a=e.return;try{Um(e)}catch(d){gt(e,a,d)}break;case 5:var o=e.return;try{Um(e)}catch(d){gt(e,o,d)}}}catch(d){gt(e,e.return,d)}if(e===t){ve=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ve=l;break}ve=e.return}}var DT=Math.ceil,Yu=gs.ReactCurrentDispatcher,Cx=gs.ReactCurrentOwner,Kn=gs.ReactCurrentBatchConfig,ze=0,Rt=null,Ct=null,qt=0,Pn=0,Wa=ii(0),Pt=0,xc=null,Gi=0,Fh=0,Ex=0,Fl=null,vn=null,Tx=0,uo=1/0,Jr=null,Vu=!1,Ym=null,qs=null,Cd=!1,Is=null,qu=0,$l=0,Vm=null,pu=-1,fu=0;function un(){return ze&6?bt():pu!==-1?pu:pu=bt()}function Zs(t){return t.mode&1?ze&2&&qt!==0?qt&-qt:fT.transition!==null?(fu===0&&(fu=d1()),fu):(t=Ze,t!==0||(t=window.event,t=t===void 0?16:x1(t.type)),t):1}function fr(t,e,n,r){if(50<$l)throw $l=0,Vm=null,Error(de(185));Ac(t,n,r),(!(ze&2)||t!==Rt)&&(t===Rt&&(!(ze&2)&&(Fh|=n),Pt===4&&Os(t,qt)),kn(t,r),n===1&&ze===0&&!(e.mode&1)&&(uo=bt()+500,Lh&&ai()))}function kn(t,e){var n=t.callbackNode;fE(t,e);var r=Pu(t,t===Rt?qt:0);if(r===0)n!==null&&I0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&I0(n),e===1)t.tag===0?pT(Ey.bind(null,t)):I1(Ey.bind(null,t)),cT(function(){!(ze&6)&&ai()}),n=null;else{switch(u1(r)){case 1:n=tx;break;case 4:n=l1;break;case 16:n=Tu;break;case 536870912:n=c1;break;default:n=Tu}n=Lj(n,Cj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Cj(t,e){if(pu=-1,fu=0,ze&6)throw Error(de(327));var n=t.callbackNode;if(Ja()&&t.callbackNode!==n)return null;var r=Pu(t,t===Rt?qt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Zu(t,r);else{e=r;var s=ze;ze|=2;var a=Tj();(Rt!==t||qt!==e)&&(Jr=null,uo=bt()+500,zi(t,e));do try{LT();break}catch(l){Ej(t,l)}while(!0);fx(),Yu.current=a,ze=s,Ct!==null?e=0:(Rt=null,qt=0,e=Pt)}if(e!==0){if(e===2&&(s=ym(t),s!==0&&(r=s,e=qm(t,s))),e===1)throw n=xc,zi(t,0),Os(t,r),kn(t,bt()),n;if(e===6)Os(t,r);else{if(s=t.current.alternate,!(r&30)&&!OT(s)&&(e=Zu(t,r),e===2&&(a=ym(t),a!==0&&(r=a,e=qm(t,a))),e===1))throw n=xc,zi(t,0),Os(t,r),kn(t,bt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(de(345));case 2:Ni(t,vn,Jr);break;case 3:if(Os(t,r),(r&130023424)===r&&(e=Tx+500-bt(),10<e)){if(Pu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){un(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Cm(Ni.bind(null,t,vn,Jr),e);break}Ni(t,vn,Jr);break;case 4:if(Os(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-pr(r);a=1<<o,o=e[o],o>s&&(s=o),r&=~a}if(r=s,r=bt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*DT(r/1960))-r,10<r){t.timeoutHandle=Cm(Ni.bind(null,t,vn,Jr),r);break}Ni(t,vn,Jr);break;case 5:Ni(t,vn,Jr);break;default:throw Error(de(329))}}}return kn(t,bt()),t.callbackNode===n?Cj.bind(null,t):null}function qm(t,e){var n=Fl;return t.current.memoizedState.isDehydrated&&(zi(t,e).flags|=256),t=Zu(t,e),t!==2&&(e=vn,vn=n,e!==null&&Zm(e)),t}function Zm(t){vn===null?vn=t:vn.push.apply(vn,t)}function OT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!mr(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Os(t,e){for(e&=~Ex,e&=~Fh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-pr(e),r=1<<n;t[n]=-1,e&=~r}}function Ey(t){if(ze&6)throw Error(de(327));Ja();var e=Pu(t,0);if(!(e&1))return kn(t,bt()),null;var n=Zu(t,e);if(t.tag!==0&&n===2){var r=ym(t);r!==0&&(e=r,n=qm(t,r))}if(n===1)throw n=xc,zi(t,0),Os(t,e),kn(t,bt()),n;if(n===6)throw Error(de(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ni(t,vn,Jr),kn(t,bt()),null}function Px(t,e){var n=ze;ze|=1;try{return t(e)}finally{ze=n,ze===0&&(uo=bt()+500,Lh&&ai())}}function Qi(t){Is!==null&&Is.tag===0&&!(ze&6)&&Ja();var e=ze;ze|=1;var n=Kn.transition,r=Ze;try{if(Kn.transition=null,Ze=1,t)return t()}finally{Ze=r,Kn.transition=n,ze=e,!(ze&6)&&ai()}}function Dx(){Pn=Wa.current,it(Wa)}function zi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,lT(n)),Ct!==null)for(n=Ct.return;n!==null;){var r=n;switch(ux(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Au();break;case 3:lo(),it(jn),it(on),bx();break;case 5:yx(r);break;case 4:lo();break;case 13:it(ht);break;case 19:it(ht);break;case 10:mx(r.type._context);break;case 22:case 23:Dx()}n=n.return}if(Rt=t,Ct=t=Ks(t.current,null),qt=Pn=e,Pt=0,xc=null,Ex=Fh=Gi=0,vn=Fl=null,Li!==null){for(e=0;e<Li.length;e++)if(n=Li[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=s,r.next=o}n.pending=r}Li=null}return t}function Ej(t,e){do{var n=Ct;try{if(fx(),du.current=Hu,Wu){for(var r=ft.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Wu=!1}if(Ki=0,At=Tt=ft=null,Il=!1,fc=0,Cx.current=null,n===null||n.return===null){Pt=1,xc=e,Ct=null;break}e:{var a=t,o=n.return,l=n,d=e;if(e=qt,l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var u=d,p=l,f=p.tag;if(!(p.mode&1)&&(f===0||f===11||f===15)){var x=p.alternate;x?(p.updateQueue=x.updateQueue,p.memoizedState=x.memoizedState,p.lanes=x.lanes):(p.updateQueue=null,p.memoizedState=null)}var g=my(o);if(g!==null){g.flags&=-257,gy(g,o,l,a,e),g.mode&1&&fy(a,u,e),e=g,d=u;var v=e.updateQueue;if(v===null){var b=new Set;b.add(d),e.updateQueue=b}else v.add(d);break e}else{if(!(e&1)){fy(a,u,e),Ox();break e}d=Error(de(426))}}else if(ot&&l.mode&1){var j=my(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),gy(j,o,l,a,e),hx(co(d,l));break e}}a=d=co(d,l),Pt!==4&&(Pt=2),Fl===null?Fl=[a]:Fl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var _=uj(a,d,e);ly(a,_);break e;case 1:l=d;var N=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof N.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(qs===null||!qs.has(S)))){a.flags|=65536,e&=-e,a.lanes|=e;var P=hj(a,l,e);ly(a,P);break e}}a=a.return}while(a!==null)}Dj(n)}catch(M){e=M,Ct===n&&n!==null&&(Ct=n=n.return);continue}break}while(!0)}function Tj(){var t=Yu.current;return Yu.current=Hu,t===null?Hu:t}function Ox(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Rt===null||!(Gi&268435455)&&!(Fh&268435455)||Os(Rt,qt)}function Zu(t,e){var n=ze;ze|=2;var r=Tj();(Rt!==t||qt!==e)&&(Jr=null,zi(t,e));do try{MT();break}catch(s){Ej(t,s)}while(!0);if(fx(),ze=n,Yu.current=r,Ct!==null)throw Error(de(261));return Rt=null,qt=0,Pt}function MT(){for(;Ct!==null;)Pj(Ct)}function LT(){for(;Ct!==null&&!iE();)Pj(Ct)}function Pj(t){var e=Mj(t.alternate,t,Pn);t.memoizedProps=t.pendingProps,e===null?Dj(t):Ct=e,Cx.current=null}function Dj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=CT(n,e),n!==null){n.flags&=32767,Ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pt=6,Ct=null;return}}else if(n=ST(n,e,Pn),n!==null){Ct=n;return}if(e=e.sibling,e!==null){Ct=e;return}Ct=e=t}while(e!==null);Pt===0&&(Pt=5)}function Ni(t,e,n){var r=Ze,s=Kn.transition;try{Kn.transition=null,Ze=1,AT(t,e,n,r)}finally{Kn.transition=s,Ze=r}return null}function AT(t,e,n,r){do Ja();while(Is!==null);if(ze&6)throw Error(de(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(de(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(mE(t,a),t===Rt&&(Ct=Rt=null,qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Cd||(Cd=!0,Lj(Tu,function(){return Ja(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Kn.transition,Kn.transition=null;var o=Ze;Ze=1;var l=ze;ze|=4,Cx.current=null,TT(t,n),kj(n,t),tT(km),Du=!!Nm,km=Nm=null,t.current=n,PT(n),aE(),ze=l,Ze=o,Kn.transition=a}else t.current=n;if(Cd&&(Cd=!1,Is=t,qu=s),a=t.pendingLanes,a===0&&(qs=null),cE(n.stateNode),kn(t,bt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Vu)throw Vu=!1,t=Ym,Ym=null,t;return qu&1&&t.tag!==0&&Ja(),a=t.pendingLanes,a&1?t===Vm?$l++:($l=0,Vm=t):$l=0,ai(),null}function Ja(){if(Is!==null){var t=u1(qu),e=Kn.transition,n=Ze;try{if(Kn.transition=null,Ze=16>t?16:t,Is===null)var r=!1;else{if(t=Is,Is=null,qu=0,ze&6)throw Error(de(331));var s=ze;for(ze|=4,ve=t.current;ve!==null;){var a=ve,o=a.child;if(ve.flags&16){var l=a.deletions;if(l!==null){for(var d=0;d<l.length;d++){var u=l[d];for(ve=u;ve!==null;){var p=ve;switch(p.tag){case 0:case 11:case 15:Rl(8,p,a)}var f=p.child;if(f!==null)f.return=p,ve=f;else for(;ve!==null;){p=ve;var x=p.sibling,g=p.return;if(wj(p),p===u){ve=null;break}if(x!==null){x.return=g,ve=x;break}ve=g}}}var v=a.alternate;if(v!==null){var b=v.child;if(b!==null){v.child=null;do{var j=b.sibling;b.sibling=null,b=j}while(b!==null)}}ve=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ve=o;else e:for(;ve!==null;){if(a=ve,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Rl(9,a,a.return)}var _=a.sibling;if(_!==null){_.return=a.return,ve=_;break e}ve=a.return}}var N=t.current;for(ve=N;ve!==null;){o=ve;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,ve=S;else e:for(o=N;ve!==null;){if(l=ve,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Rh(9,l)}}catch(M){gt(l,l.return,M)}if(l===o){ve=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,ve=P;break e}ve=l.return}}if(ze=s,ai(),Or&&typeof Or.onPostCommitFiberRoot=="function")try{Or.onPostCommitFiberRoot(Th,t)}catch{}r=!0}return r}finally{Ze=n,Kn.transition=e}}return!1}function Ty(t,e,n){e=co(n,e),e=uj(t,e,1),t=Vs(t,e,1),e=un(),t!==null&&(Ac(t,1,e),kn(t,e))}function gt(t,e,n){if(t.tag===3)Ty(t,t,n);else for(;e!==null;){if(e.tag===3){Ty(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qs===null||!qs.has(r))){t=co(n,t),t=hj(e,t,1),e=Vs(e,t,1),t=un(),e!==null&&(Ac(e,1,t),kn(e,t));break}}e=e.return}}function IT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=un(),t.pingedLanes|=t.suspendedLanes&n,Rt===t&&(qt&n)===n&&(Pt===4||Pt===3&&(qt&130023424)===qt&&500>bt()-Tx?zi(t,0):Ex|=n),kn(t,e)}function Oj(t,e){e===0&&(t.mode&1?(e=xd,xd<<=1,!(xd&130023424)&&(xd=4194304)):e=1);var n=un();t=ds(t,e),t!==null&&(Ac(t,e,n),kn(t,n))}function RT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Oj(t,n)}function FT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(de(314))}r!==null&&r.delete(e),Oj(t,n)}var Mj;Mj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||jn.current)_n=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _n=!1,kT(t,e,n);_n=!!(t.flags&131072)}else _n=!1,ot&&e.flags&1048576&&R1(e,Fu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;hu(t,e),t=e.pendingProps;var s=io(e,on.current);Xa(e,n),s=wx(null,e,r,t,s,n);var a=jx();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nn(r)?(a=!0,Iu(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,xx(e),s.updater=Ih,e.stateNode=s,s._reactInternals=e,Lm(e,r,t,n),e=Rm(null,e,r,!0,a,n)):(e.tag=0,ot&&a&&dx(e),cn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(hu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=zT(r),t=or(r,t),s){case 0:e=Im(null,e,r,t,n);break e;case 1:e=yy(null,e,r,t,n);break e;case 11:e=xy(null,e,r,t,n);break e;case 14:e=vy(null,e,r,or(r.type,t),n);break e}throw Error(de(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:or(r,s),Im(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:or(r,s),yy(t,e,r,s,n);case 3:e:{if(gj(e),t===null)throw Error(de(387));r=e.pendingProps,a=e.memoizedState,s=a.element,W1(t,e),Bu(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=co(Error(de(423)),e),e=by(t,e,r,n,s);break e}else if(r!==s){s=co(Error(de(424)),e),e=by(t,e,r,n,s);break e}else for(Dn=Ys(e.stateNode.containerInfo.firstChild),On=e,ot=!0,dr=null,n=B1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ao(),r===s){e=us(t,e,n);break e}cn(t,e,r,n)}e=e.child}return e;case 5:return H1(e),t===null&&Dm(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,Sm(r,s)?o=null:a!==null&&Sm(r,a)&&(e.flags|=32),mj(t,e),cn(t,e,o,n),e.child;case 6:return t===null&&Dm(e),null;case 13:return xj(t,e,n);case 4:return vx(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=oo(e,null,r,n):cn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:or(r,s),xy(t,e,r,s,n);case 7:return cn(t,e,e.pendingProps,n),e.child;case 8:return cn(t,e,e.pendingProps.children,n),e.child;case 12:return cn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,tt($u,r._currentValue),r._currentValue=o,a!==null)if(mr(a.value,o)){if(a.children===s.children&&!jn.current){e=us(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var d=l.firstContext;d!==null;){if(d.context===r){if(a.tag===1){d=as(-1,n&-n),d.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var p=u.pending;p===null?d.next=d:(d.next=p.next,p.next=d),u.pending=d}}a.lanes|=n,d=a.alternate,d!==null&&(d.lanes|=n),Om(a.return,n,e),l.lanes|=n;break}d=d.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(de(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Om(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}cn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Xa(e,n),s=Qn(s),r=r(s),e.flags|=1,cn(t,e,r,n),e.child;case 14:return r=e.type,s=or(r,e.pendingProps),s=or(r.type,s),vy(t,e,r,s,n);case 15:return pj(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:or(r,s),hu(t,e),e.tag=1,Nn(r)?(t=!0,Iu(e)):t=!1,Xa(e,n),dj(e,r,s),Lm(e,r,s,n),Rm(null,e,r,!0,t,n);case 19:return vj(t,e,n);case 22:return fj(t,e,n)}throw Error(de(156,e.tag))};function Lj(t,e){return o1(t,e)}function $T(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(t,e,n,r){return new $T(t,e,n,r)}function Mx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zT(t){if(typeof t=="function")return Mx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xg)return 11;if(t===Jg)return 14}return 2}function Ks(t,e){var n=t.alternate;return n===null?(n=Vn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function mu(t,e,n,r,s,a){var o=2;if(r=t,typeof t=="function")Mx(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ma:return Bi(n.children,s,a,e);case Qg:o=8,s|=8;break;case sm:return t=Vn(12,n,e,s|2),t.elementType=sm,t.lanes=a,t;case im:return t=Vn(13,n,e,s),t.elementType=im,t.lanes=a,t;case am:return t=Vn(19,n,e,s),t.elementType=am,t.lanes=a,t;case Hw:return $h(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Uw:o=10;break e;case Ww:o=9;break e;case Xg:o=11;break e;case Jg:o=14;break e;case Cs:o=16,r=null;break e}throw Error(de(130,t==null?t:typeof t,""))}return e=Vn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function Bi(t,e,n,r){return t=Vn(7,t,r,e),t.lanes=n,t}function $h(t,e,n,r){return t=Vn(22,t,r,e),t.elementType=Hw,t.lanes=n,t.stateNode={isHidden:!1},t}function ff(t,e,n){return t=Vn(6,t,null,e),t.lanes=n,t}function mf(t,e,n){return e=Vn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function BT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zp(0),this.expirationTimes=Zp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Lx(t,e,n,r,s,a,o,l,d){return t=new BT(t,e,n,l,d),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Vn(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xx(a),t}function UT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oa,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Aj(t){if(!t)return ei;t=t._reactInternals;e:{if(sa(t)!==t||t.tag!==1)throw Error(de(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(de(171))}if(t.tag===1){var n=t.type;if(Nn(n))return A1(t,n,e)}return e}function Ij(t,e,n,r,s,a,o,l,d){return t=Lx(n,r,!0,t,s,a,o,l,d),t.context=Aj(null),n=t.current,r=un(),s=Zs(n),a=as(r,s),a.callback=e??null,Vs(n,a,s),t.current.lanes=s,Ac(t,s,r),kn(t,r),t}function zh(t,e,n,r){var s=e.current,a=un(),o=Zs(s);return n=Aj(n),e.context===null?e.context=n:e.pendingContext=n,e=as(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Vs(s,e,o),t!==null&&(fr(t,s,o,a),cu(t,s,o)),o}function Ku(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Py(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ax(t,e){Py(t,e),(t=t.alternate)&&Py(t,e)}function WT(){return null}var Rj=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ix(t){this._internalRoot=t}Bh.prototype.render=Ix.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(de(409));zh(t,e,null,null)};Bh.prototype.unmount=Ix.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qi(function(){zh(null,t,null,null)}),e[cs]=null}};function Bh(t){this._internalRoot=t}Bh.prototype.unstable_scheduleHydration=function(t){if(t){var e=f1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ds.length&&e!==0&&e<Ds[n].priority;n++);Ds.splice(n,0,t),n===0&&g1(t)}};function Rx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Uh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dy(){}function HT(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var u=Ku(o);a.call(u)}}var o=Ij(e,r,t,0,null,!1,!1,"",Dy);return t._reactRootContainer=o,t[cs]=o.current,cc(t.nodeType===8?t.parentNode:t),Qi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Ku(d);l.call(u)}}var d=Lx(t,0,!1,null,null,!1,!1,"",Dy);return t._reactRootContainer=d,t[cs]=d.current,cc(t.nodeType===8?t.parentNode:t),Qi(function(){zh(e,d,n,r)}),d}function Wh(t,e,n,r,s){var a=n._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var d=Ku(o);l.call(d)}}zh(e,o,t,s)}else o=HT(n,e,t,s,r);return Ku(o)}h1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=bl(e.pendingLanes);n!==0&&(nx(e,n|1),kn(e,bt()),!(ze&6)&&(uo=bt()+500,ai()))}break;case 13:Qi(function(){var r=ds(t,1);if(r!==null){var s=un();fr(r,t,1,s)}}),Ax(t,1)}};rx=function(t){if(t.tag===13){var e=ds(t,134217728);if(e!==null){var n=un();fr(e,t,134217728,n)}Ax(t,134217728)}};p1=function(t){if(t.tag===13){var e=Zs(t),n=ds(t,e);if(n!==null){var r=un();fr(n,t,e,r)}Ax(t,e)}};f1=function(){return Ze};m1=function(t,e){var n=Ze;try{return Ze=t,e()}finally{Ze=n}};gm=function(t,e,n){switch(e){case"input":if(cm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Mh(r);if(!s)throw Error(de(90));Vw(r),cm(r,s)}}}break;case"textarea":Zw(t,n);break;case"select":e=n.value,e!=null&&Za(t,!!n.multiple,e,!1)}};t1=Px;n1=Qi;var YT={usingClientEntryPoint:!1,Events:[Rc,Ra,Mh,Jw,e1,Px]},il={findFiberByHostInstance:Mi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VT={bundleType:il.bundleType,version:il.version,rendererPackageName:il.rendererPackageName,rendererConfig:il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=i1(t),t===null?null:t.stateNode},findFiberByHostInstance:il.findFiberByHostInstance||WT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ed.isDisabled&&Ed.supportsFiber)try{Th=Ed.inject(VT),Or=Ed}catch{}}An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YT;An.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rx(e))throw Error(de(200));return UT(t,e,null,n)};An.createRoot=function(t,e){if(!Rx(t))throw Error(de(299));var n=!1,r="",s=Rj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Lx(t,1,!1,null,null,n,!1,r,s),t[cs]=e.current,cc(t.nodeType===8?t.parentNode:t),new Ix(e)};An.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(de(188)):(t=Object.keys(t).join(","),Error(de(268,t)));return t=i1(e),t=t===null?null:t.stateNode,t};An.flushSync=function(t){return Qi(t)};An.hydrate=function(t,e,n){if(!Uh(e))throw Error(de(200));return Wh(null,t,e,!0,n)};An.hydrateRoot=function(t,e,n){if(!Rx(t))throw Error(de(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",o=Rj;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Ij(e,null,t,1,n??null,s,!1,a,o),t[cs]=e.current,cc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Bh(e)};An.render=function(t,e,n){if(!Uh(e))throw Error(de(200));return Wh(null,t,e,!1,n)};An.unmountComponentAtNode=function(t){if(!Uh(t))throw Error(de(40));return t._reactRootContainer?(Qi(function(){Wh(null,null,t,!1,function(){t._reactRootContainer=null,t[cs]=null})}),!0):!1};An.unstable_batchedUpdates=Px;An.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Uh(n))throw Error(de(200));if(t==null||t._reactInternals===void 0)throw Error(de(38));return Wh(t,e,n,!1,r)};An.version="18.3.1-next-f1338f8080-20240426";function Fj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fj)}catch(t){console.error(t)}}Fj(),Fw.exports=An;var $c=Fw.exports;const qT=ms($c);var Oy=$c;nm.createRoot=Oy.createRoot,nm.hydrateRoot=Oy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vc(){return vc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vc.apply(this,arguments)}var Rs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Rs||(Rs={}));const My="popstate";function ZT(t){t===void 0&&(t={});function e(r,s){let{pathname:a,search:o,hash:l}=r.location;return Km("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Gu(s)}return GT(e,n,null,t)}function Nt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function $j(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KT(){return Math.random().toString(36).substr(2,8)}function Ly(t,e){return{usr:t.state,key:t.key,idx:e}}function Km(t,e,n,r){return n===void 0&&(n=null),vc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?To(e):e,{state:n,key:e&&e.key||r||KT()})}function Gu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function To(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function GT(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,o=s.history,l=Rs.Pop,d=null,u=p();u==null&&(u=0,o.replaceState(vc({},o.state,{idx:u}),""));function p(){return(o.state||{idx:null}).idx}function f(){l=Rs.Pop;let j=p(),_=j==null?null:j-u;u=j,d&&d({action:l,location:b.location,delta:_})}function x(j,_){l=Rs.Push;let N=Km(b.location,j,_);u=p()+1;let S=Ly(N,u),P=b.createHref(N);try{o.pushState(S,"",P)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(P)}a&&d&&d({action:l,location:b.location,delta:1})}function g(j,_){l=Rs.Replace;let N=Km(b.location,j,_);u=p();let S=Ly(N,u),P=b.createHref(N);o.replaceState(S,"",P),a&&d&&d({action:l,location:b.location,delta:0})}function v(j){let _=s.location.origin!=="null"?s.location.origin:s.location.href,N=typeof j=="string"?j:Gu(j);return N=N.replace(/ $/,"%20"),Nt(_,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,_)}let b={get action(){return l},get location(){return t(s,o)},listen(j){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(My,f),d=j,()=>{s.removeEventListener(My,f),d=null}},createHref(j){return e(s,j)},createURL:v,encodeLocation(j){let _=v(j);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:x,replace:g,go(j){return o.go(j)}};return b}var Ay;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ay||(Ay={}));function QT(t,e,n){return n===void 0&&(n="/"),XT(t,e,n)}function XT(t,e,n,r){let s=typeof e=="string"?To(e):e,a=Fx(s.pathname||"/",n);if(a==null)return null;let o=zj(t);JT(o);let l=null;for(let d=0;l==null&&d<o.length;++d){let u=uP(a);l=lP(o[d],u)}return l}function zj(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,o,l)=>{let d={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};d.relativePath.startsWith("/")&&(Nt(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let u=Gs([r,d.relativePath]),p=n.concat(d);a.children&&a.children.length>0&&(Nt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),zj(a.children,e,p,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:aP(u,a.index),routesMeta:p})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let d of Bj(a.path))s(a,o,d)}),e}function Bj(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let o=Bj(r.join("/")),l=[];return l.push(...o.map(d=>d===""?a:[a,d].join("/"))),s&&l.push(...o),l.map(d=>t.startsWith("/")&&d===""?"/":d)}function JT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:oP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const eP=/^:[\w-]+$/,tP=3,nP=2,rP=1,sP=10,iP=-2,Iy=t=>t==="*";function aP(t,e){let n=t.split("/"),r=n.length;return n.some(Iy)&&(r+=iP),e&&(r+=nP),n.filter(s=>!Iy(s)).reduce((s,a)=>s+(eP.test(a)?tP:a===""?rP:sP),r)}function oP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function lP(t,e,n){let{routesMeta:r}=t,s={},a="/",o=[];for(let l=0;l<r.length;++l){let d=r[l],u=l===r.length-1,p=a==="/"?e:e.slice(a.length)||"/",f=cP({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},p),x=d.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Gs([a,f.pathname]),pathnameBase:mP(Gs([a,f.pathnameBase])),route:x}),f.pathnameBase!=="/"&&(a=Gs([a,f.pathnameBase]))}return o}function cP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=dP(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,p,f)=>{let{paramName:x,isOptional:g}=p;if(x==="*"){let b=l[f]||"";o=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const v=l[f];return g&&!v?u[x]=void 0:u[x]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function dP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),$j(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,d)=>(r.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function uP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $j(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Fx(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function hP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?To(t):t;return{pathname:n?n.startsWith("/")?n:pP(n,e):e,search:gP(r),hash:xP(s)}}function pP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function gf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function $x(t,e){let n=fP(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function zx(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=To(t):(s=vc({},t),Nt(!s.pathname||!s.pathname.includes("?"),gf("?","pathname","search",s)),Nt(!s.pathname||!s.pathname.includes("#"),gf("#","pathname","hash",s)),Nt(!s.search||!s.search.includes("#"),gf("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),f-=1;s.pathname=x.join("/")}l=f>=0?e[f]:"/"}let d=hP(s,l),u=o&&o!=="/"&&o.endsWith("/"),p=(a||o===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(u||p)&&(d.pathname+="/"),d}const Gs=t=>t.join("/").replace(/\/\/+/g,"/"),mP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),gP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,xP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function vP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Uj=["post","put","patch","delete"];new Set(Uj);const yP=["get",...Uj];new Set(yP);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yc(){return yc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yc.apply(this,arguments)}const Bx=w.createContext(null),bP=w.createContext(null),oi=w.createContext(null),Hh=w.createContext(null),li=w.createContext({outlet:null,matches:[],isDataRoute:!1}),Wj=w.createContext(null);function _P(t,e){let{relative:n}=e===void 0?{}:e;Po()||Nt(!1);let{basename:r,navigator:s}=w.useContext(oi),{hash:a,pathname:o,search:l}=Yj(t,{relative:n}),d=o;return r!=="/"&&(d=o==="/"?r:Gs([r,o])),s.createHref({pathname:d,search:l,hash:a})}function Po(){return w.useContext(Hh)!=null}function ia(){return Po()||Nt(!1),w.useContext(Hh).location}function Hj(t){w.useContext(oi).static||w.useLayoutEffect(t)}function aa(){let{isDataRoute:t}=w.useContext(li);return t?LP():wP()}function wP(){Po()||Nt(!1);let t=w.useContext(Bx),{basename:e,future:n,navigator:r}=w.useContext(oi),{matches:s}=w.useContext(li),{pathname:a}=ia(),o=JSON.stringify($x(s,n.v7_relativeSplatPath)),l=w.useRef(!1);return Hj(()=>{l.current=!0}),w.useCallback(function(u,p){if(p===void 0&&(p={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let f=zx(u,JSON.parse(o),a,p.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Gs([e,f.pathname])),(p.replace?r.replace:r.push)(f,p.state,p)},[e,r,o,a,t])}function Yj(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=w.useContext(oi),{matches:s}=w.useContext(li),{pathname:a}=ia(),o=JSON.stringify($x(s,r.v7_relativeSplatPath));return w.useMemo(()=>zx(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function jP(t,e){return NP(t,e)}function NP(t,e,n,r){Po()||Nt(!1);let{navigator:s,static:a}=w.useContext(oi),{matches:o}=w.useContext(li),l=o[o.length-1],d=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let p=ia(),f;if(e){var x;let _=typeof e=="string"?To(e):e;u==="/"||(x=_.pathname)!=null&&x.startsWith(u)||Nt(!1),f=_}else f=p;let g=f.pathname||"/",v=g;if(u!=="/"){let _=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(_.length).join("/")}let b=QT(t,{pathname:v}),j=TP(b&&b.map(_=>Object.assign({},_,{params:Object.assign({},d,_.params),pathname:Gs([u,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?u:Gs([u,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,n,r);return e&&j?w.createElement(Hh.Provider,{value:{location:yc({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Rs.Pop}},j):j}function kP(){let t=MP(),e=vP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:s},n):null,null)}const SP=w.createElement(kP,null);class CP extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?w.createElement(li.Provider,{value:this.props.routeContext},w.createElement(Wj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function EP(t){let{routeContext:e,match:n,children:r}=t,s=w.useContext(Bx);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(li.Provider,{value:e},r)}function TP(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let p=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);p>=0||Nt(!1),o=o.slice(0,Math.min(o.length,p+1))}let d=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<o.length;p++){let f=o[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=p),f.route.id){let{loaderData:x,errors:g}=n,v=f.route.loader&&x[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||v){d=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((p,f,x)=>{let g,v=!1,b=null,j=null;n&&(g=l&&f.route.id?l[f.route.id]:void 0,b=f.route.errorElement||SP,d&&(u<0&&x===0?(AP("route-fallback"),v=!0,j=null):u===x&&(v=!0,j=f.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,x+1)),N=()=>{let S;return g?S=b:v?S=j:f.route.Component?S=w.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=p,w.createElement(EP,{match:f,routeContext:{outlet:p,matches:_,isDataRoute:n!=null},children:S})};return n&&(f.route.ErrorBoundary||f.route.errorElement||x===0)?w.createElement(CP,{location:n.location,revalidation:n.revalidation,component:b,error:g,children:N(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):N()},null)}var Vj=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Vj||{}),qj=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(qj||{});function PP(t){let e=w.useContext(Bx);return e||Nt(!1),e}function DP(t){let e=w.useContext(bP);return e||Nt(!1),e}function OP(t){let e=w.useContext(li);return e||Nt(!1),e}function Zj(t){let e=OP(),n=e.matches[e.matches.length-1];return n.route.id||Nt(!1),n.route.id}function MP(){var t;let e=w.useContext(Wj),n=DP(),r=Zj();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function LP(){let{router:t}=PP(Vj.UseNavigateStable),e=Zj(qj.UseNavigateStable),n=w.useRef(!1);return Hj(()=>{n.current=!0}),w.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,yc({fromRouteId:e},a)))},[t,e])}const Ry={};function AP(t,e,n){Ry[t]||(Ry[t]=!0)}function IP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function eo(t){let{to:e,replace:n,state:r,relative:s}=t;Po()||Nt(!1);let{future:a,static:o}=w.useContext(oi),{matches:l}=w.useContext(li),{pathname:d}=ia(),u=aa(),p=zx(e,$x(l,a.v7_relativeSplatPath),d,s==="path"),f=JSON.stringify(p);return w.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:s}),[u,f,s,n,r]),null}function Pe(t){Nt(!1)}function RP(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Rs.Pop,navigator:a,static:o=!1,future:l}=t;Po()&&Nt(!1);let d=e.replace(/^\/*/,"/"),u=w.useMemo(()=>({basename:d,navigator:a,static:o,future:yc({v7_relativeSplatPath:!1},l)}),[d,l,a,o]);typeof r=="string"&&(r=To(r));let{pathname:p="/",search:f="",hash:x="",state:g=null,key:v="default"}=r,b=w.useMemo(()=>{let j=Fx(p,d);return j==null?null:{location:{pathname:j,search:f,hash:x,state:g,key:v},navigationType:s}},[d,p,f,x,g,v,s]);return b==null?null:w.createElement(oi.Provider,{value:u},w.createElement(Hh.Provider,{children:n,value:b}))}function Kj(t){let{children:e,location:n}=t;return jP(Gm(e),n)}new Promise(()=>{});function Gm(t,e){e===void 0&&(e=[]);let n=[];return w.Children.forEach(t,(r,s)=>{if(!w.isValidElement(r))return;let a=[...e,s];if(r.type===w.Fragment){n.push.apply(n,Gm(r.props.children,a));return}r.type!==Pe&&Nt(!1),!r.props.index||!r.props.children||Nt(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Gm(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qm(){return Qm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qm.apply(this,arguments)}function FP(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function $P(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function zP(t,e){return t.button===0&&(!e||e==="_self")&&!$P(t)}const BP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],UP="6";try{window.__reactRouterVersion=UP}catch{}const WP="startTransition",Fy=ro[WP];function HP(t){let{basename:e,children:n,future:r,window:s}=t,a=w.useRef();a.current==null&&(a.current=ZT({window:s,v5Compat:!0}));let o=a.current,[l,d]=w.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},p=w.useCallback(f=>{u&&Fy?Fy(()=>d(f)):d(f)},[d,u]);return w.useLayoutEffect(()=>o.listen(p),[o,p]),w.useEffect(()=>IP(r),[r]),w.createElement(RP,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const YP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qu=w.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:a,replace:o,state:l,target:d,to:u,preventScrollReset:p,viewTransition:f}=e,x=FP(e,BP),{basename:g}=w.useContext(oi),v,b=!1;if(typeof u=="string"&&VP.test(u)&&(v=u,YP))try{let S=new URL(window.location.href),P=u.startsWith("//")?new URL(S.protocol+u):new URL(u),M=Fx(P.pathname,g);P.origin===S.origin&&M!=null?u=M+P.search+P.hash:b=!0}catch{}let j=_P(u,{relative:s}),_=qP(u,{replace:o,state:l,target:d,preventScrollReset:p,relative:s,viewTransition:f});function N(S){r&&r(S),S.defaultPrevented||_(S)}return w.createElement("a",Qm({},x,{href:v||j,onClick:b||a?r:N,ref:n,target:d}))});var $y;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})($y||($y={}));var zy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(zy||(zy={}));function qP(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,d=aa(),u=ia(),p=Yj(t,{relative:o});return w.useCallback(f=>{if(zP(f,n)){f.preventDefault();let x=r!==void 0?r:Gu(u)===Gu(p);d(t,{replace:x,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[u,d,p,r,s,n,t,a,o,l])}function Gj(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=Gj(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function Fs(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=Gj(t))&&(r&&(r+=" "),r+=e);return r}const zl=t=>typeof t=="number"&&!isNaN(t),Xi=t=>typeof t=="string",wn=t=>typeof t=="function",gu=t=>Xi(t)||wn(t)?t:null,xf=t=>w.isValidElement(t)||Xi(t)||wn(t)||zl(t);function ZP(t,e,n){n===void 0&&(n=300);const{scrollHeight:r,style:s}=t;requestAnimationFrame(()=>{s.minHeight="initial",s.height=r+"px",s.transition=`all ${n}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(e,n)})})}function Yh(t){let{enter:e,exit:n,appendPosition:r=!1,collapse:s=!0,collapseDuration:a=300}=t;return function(o){let{children:l,position:d,preventExitTransition:u,done:p,nodeRef:f,isIn:x}=o;const g=r?`${e}--${d}`:e,v=r?`${n}--${d}`:n,b=w.useRef(0);return w.useLayoutEffect(()=>{const j=f.current,_=g.split(" "),N=S=>{S.target===f.current&&(j.dispatchEvent(new Event("d")),j.removeEventListener("animationend",N),j.removeEventListener("animationcancel",N),b.current===0&&S.type!=="animationcancel"&&j.classList.remove(..._))};j.classList.add(..._),j.addEventListener("animationend",N),j.addEventListener("animationcancel",N)},[]),w.useEffect(()=>{const j=f.current,_=()=>{j.removeEventListener("animationend",_),s?ZP(j,p,a):p()};x||(u?_():(b.current=1,j.className+=` ${v}`,j.addEventListener("animationend",_)))},[x]),q.createElement(q.Fragment,null,l)}}function By(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const Wn={list:new Map,emitQueue:new Map,on(t,e){return this.list.has(t)||this.list.set(t,[]),this.list.get(t).push(e),this},off(t,e){if(e){const n=this.list.get(t).filter(r=>r!==e);return this.list.set(t,n),this}return this.list.delete(t),this},cancelEmit(t){const e=this.emitQueue.get(t);return e&&(e.forEach(clearTimeout),this.emitQueue.delete(t)),this},emit(t){this.list.has(t)&&this.list.get(t).forEach(e=>{const n=setTimeout(()=>{e(...[].slice.call(arguments,1))},0);this.emitQueue.has(t)||this.emitQueue.set(t,[]),this.emitQueue.get(t).push(n)})}},Td=t=>{let{theme:e,type:n,...r}=t;return q.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...r})},vf={info:function(t){return q.createElement(Td,{...t},q.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return q.createElement(Td,{...t},q.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return q.createElement(Td,{...t},q.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return q.createElement(Td,{...t},q.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return q.createElement("div",{className:"Toastify__spinner"})}};function KP(t){const[,e]=w.useReducer(g=>g+1,0),[n,r]=w.useState([]),s=w.useRef(null),a=w.useRef(new Map).current,o=g=>n.indexOf(g)!==-1,l=w.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:t,containerId:null,isToastActive:o,getToast:g=>a.get(g)}).current;function d(g){let{containerId:v}=g;const{limit:b}=l.props;!b||v&&l.containerId!==v||(l.count-=l.queue.length,l.queue=[])}function u(g){r(v=>g==null?[]:v.filter(b=>b!==g))}function p(){const{toastContent:g,toastProps:v,staleId:b}=l.queue.shift();x(g,v,b)}function f(g,v){let{delay:b,staleId:j,..._}=v;if(!xf(g)||function(te){return!s.current||l.props.enableMultiContainer&&te.containerId!==l.props.containerId||a.has(te.toastId)&&te.updateId==null}(_))return;const{toastId:N,updateId:S,data:P}=_,{props:M}=l,R=()=>u(N),A=S==null;A&&l.count++;const T={...M,style:M.toastStyle,key:l.toastKey++,...Object.fromEntries(Object.entries(_).filter(te=>{let[G,B]=te;return B!=null})),toastId:N,updateId:S,data:P,closeToast:R,isIn:!1,className:gu(_.className||M.toastClassName),bodyClassName:gu(_.bodyClassName||M.bodyClassName),progressClassName:gu(_.progressClassName||M.progressClassName),autoClose:!_.isLoading&&(Y=_.autoClose,O=M.autoClose,Y===!1||zl(Y)&&Y>0?Y:O),deleteToast(){const te=By(a.get(N),"removed");a.delete(N),Wn.emit(4,te);const G=l.queue.length;if(l.count=N==null?l.count-l.displayedToast:l.count-1,l.count<0&&(l.count=0),G>0){const B=N==null?l.props.limit:1;if(G===1||B===1)l.displayedToast++,p();else{const Z=B>G?G:B;l.displayedToast=Z;for(let C=0;C<Z;C++)p()}}else e()}};var Y,O;T.iconOut=function(te){let{theme:G,type:B,isLoading:Z,icon:C}=te,V=null;const I={theme:G,type:B};return C===!1||(wn(C)?V=C(I):w.isValidElement(C)?V=w.cloneElement(C,I):Xi(C)||zl(C)?V=C:Z?V=vf.spinner():(X=>X in vf)(B)&&(V=vf[B](I))),V}(T),wn(_.onOpen)&&(T.onOpen=_.onOpen),wn(_.onClose)&&(T.onClose=_.onClose),T.closeButton=M.closeButton,_.closeButton===!1||xf(_.closeButton)?T.closeButton=_.closeButton:_.closeButton===!0&&(T.closeButton=!xf(M.closeButton)||M.closeButton);let H=g;w.isValidElement(g)&&!Xi(g.type)?H=w.cloneElement(g,{closeToast:R,toastProps:T,data:P}):wn(g)&&(H=g({closeToast:R,toastProps:T,data:P})),M.limit&&M.limit>0&&l.count>M.limit&&A?l.queue.push({toastContent:H,toastProps:T,staleId:j}):zl(b)?setTimeout(()=>{x(H,T,j)},b):x(H,T,j)}function x(g,v,b){const{toastId:j}=v;b&&a.delete(b);const _={content:g,props:v};a.set(j,_),r(N=>[...N,j].filter(S=>S!==b)),Wn.emit(4,By(_,_.props.updateId==null?"added":"updated"))}return w.useEffect(()=>(l.containerId=t.containerId,Wn.cancelEmit(3).on(0,f).on(1,g=>s.current&&u(g)).on(5,d).emit(2,l),()=>{a.clear(),Wn.emit(3,l)}),[]),w.useEffect(()=>{l.props=t,l.isToastActive=o,l.displayedToast=n.length}),{getToastToRender:function(g){const v=new Map,b=Array.from(a.values());return t.newestOnTop&&b.reverse(),b.forEach(j=>{const{position:_}=j.props;v.has(_)||v.set(_,[]),v.get(_).push(j)}),Array.from(v,j=>g(j[0],j[1]))},containerRef:s,isToastActive:o}}function Uy(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientX:t.clientX}function Wy(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientY:t.clientY}function GP(t){const[e,n]=w.useState(!1),[r,s]=w.useState(!1),a=w.useRef(null),o=w.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,l=w.useRef(t),{autoClose:d,pauseOnHover:u,closeToast:p,onClick:f,closeOnClick:x}=t;function g(P){if(t.draggable){P.nativeEvent.type==="touchstart"&&P.nativeEvent.preventDefault(),o.didMove=!1,document.addEventListener("mousemove",_),document.addEventListener("mouseup",N),document.addEventListener("touchmove",_),document.addEventListener("touchend",N);const M=a.current;o.canCloseOnClick=!0,o.canDrag=!0,o.boundingRect=M.getBoundingClientRect(),M.style.transition="",o.x=Uy(P.nativeEvent),o.y=Wy(P.nativeEvent),t.draggableDirection==="x"?(o.start=o.x,o.removalDistance=M.offsetWidth*(t.draggablePercent/100)):(o.start=o.y,o.removalDistance=M.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent/100))}}function v(P){if(o.boundingRect){const{top:M,bottom:R,left:A,right:T}=o.boundingRect;P.nativeEvent.type!=="touchend"&&t.pauseOnHover&&o.x>=A&&o.x<=T&&o.y>=M&&o.y<=R?j():b()}}function b(){n(!0)}function j(){n(!1)}function _(P){const M=a.current;o.canDrag&&M&&(o.didMove=!0,e&&j(),o.x=Uy(P),o.y=Wy(P),o.delta=t.draggableDirection==="x"?o.x-o.start:o.y-o.start,o.start!==o.x&&(o.canCloseOnClick=!1),M.style.transform=`translate${t.draggableDirection}(${o.delta}px)`,M.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function N(){document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",N),document.removeEventListener("touchmove",_),document.removeEventListener("touchend",N);const P=a.current;if(o.canDrag&&o.didMove&&P){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return s(!0),void t.closeToast();P.style.transition="transform 0.2s, opacity 0.2s",P.style.transform=`translate${t.draggableDirection}(0)`,P.style.opacity="1"}}w.useEffect(()=>{l.current=t}),w.useEffect(()=>(a.current&&a.current.addEventListener("d",b,{once:!0}),wn(t.onOpen)&&t.onOpen(w.isValidElement(t.children)&&t.children.props),()=>{const P=l.current;wn(P.onClose)&&P.onClose(w.isValidElement(P.children)&&P.children.props)}),[]),w.useEffect(()=>(t.pauseOnFocusLoss&&(document.hasFocus()||j(),window.addEventListener("focus",b),window.addEventListener("blur",j)),()=>{t.pauseOnFocusLoss&&(window.removeEventListener("focus",b),window.removeEventListener("blur",j))}),[t.pauseOnFocusLoss]);const S={onMouseDown:g,onTouchStart:g,onMouseUp:v,onTouchEnd:v};return d&&u&&(S.onMouseEnter=j,S.onMouseLeave=b),x&&(S.onClick=P=>{f&&f(P),o.canCloseOnClick&&p()}),{playToast:b,pauseToast:j,isRunning:e,preventExitTransition:r,toastRef:a,eventHandlers:S}}function Qj(t){let{closeToast:e,theme:n,ariaLabel:r="close"}=t;return q.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:s=>{s.stopPropagation(),e(s)},"aria-label":r},q.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},q.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function QP(t){let{delay:e,isRunning:n,closeToast:r,type:s="default",hide:a,className:o,style:l,controlledProgress:d,progress:u,rtl:p,isIn:f,theme:x}=t;const g=a||d&&u===0,v={...l,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused",opacity:g?0:1};d&&(v.transform=`scaleX(${u})`);const b=Fs("Toastify__progress-bar",d?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${x}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":p}),j=wn(o)?o({rtl:p,type:s,defaultClassName:b}):Fs(b,o);return q.createElement("div",{role:"progressbar","aria-hidden":g?"true":"false","aria-label":"notification timer",className:j,style:v,[d&&u>=1?"onTransitionEnd":"onAnimationEnd"]:d&&u<1?null:()=>{f&&r()}})}const XP=t=>{const{isRunning:e,preventExitTransition:n,toastRef:r,eventHandlers:s}=GP(t),{closeButton:a,children:o,autoClose:l,onClick:d,type:u,hideProgressBar:p,closeToast:f,transition:x,position:g,className:v,style:b,bodyClassName:j,bodyStyle:_,progressClassName:N,progressStyle:S,updateId:P,role:M,progress:R,rtl:A,toastId:T,deleteToast:Y,isIn:O,isLoading:H,iconOut:te,closeOnClick:G,theme:B}=t,Z=Fs("Toastify__toast",`Toastify__toast-theme--${B}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":A},{"Toastify__toast--close-on-click":G}),C=wn(v)?v({rtl:A,position:g,type:u,defaultClassName:Z}):Fs(Z,v),V=!!R||!l,I={closeToast:f,type:u,theme:B};let X=null;return a===!1||(X=wn(a)?a(I):w.isValidElement(a)?w.cloneElement(a,I):Qj(I)),q.createElement(x,{isIn:O,done:Y,position:g,preventExitTransition:n,nodeRef:r},q.createElement("div",{id:T,onClick:d,className:C,...s,style:b,ref:r},q.createElement("div",{...O&&{role:M},className:wn(j)?j({type:u}):Fs("Toastify__toast-body",j),style:_},te!=null&&q.createElement("div",{className:Fs("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!H})},te),q.createElement("div",null,o)),X,q.createElement(QP,{...P&&!V?{key:`pb-${P}`}:{},rtl:A,theme:B,delay:l,isRunning:e,isIn:O,closeToast:f,hide:p,type:u,style:S,className:N,controlledProgress:V,progress:R||0})))},Vh=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},JP=Yh(Vh("bounce",!0));Yh(Vh("slide",!0));Yh(Vh("zoom"));Yh(Vh("flip"));const Xm=w.forwardRef((t,e)=>{const{getToastToRender:n,containerRef:r,isToastActive:s}=KP(t),{className:a,style:o,rtl:l,containerId:d}=t;function u(p){const f=Fs("Toastify__toast-container",`Toastify__toast-container--${p}`,{"Toastify__toast-container--rtl":l});return wn(a)?a({position:p,rtl:l,defaultClassName:f}):Fs(f,gu(a))}return w.useEffect(()=>{e&&(e.current=r.current)},[]),q.createElement("div",{ref:r,className:"Toastify",id:d},n((p,f)=>{const x=f.length?{...o}:{...o,pointerEvents:"none"};return q.createElement("div",{className:u(p),style:x,key:`container-${p}`},f.map((g,v)=>{let{content:b,props:j}=g;return q.createElement(XP,{...j,isIn:s(j.toastId),style:{...j.style,"--nth":v+1,"--len":f.length},key:`toast-${j.key}`},b)}))}))});Xm.displayName="ToastContainer",Xm.defaultProps={position:"top-right",transition:JP,autoClose:5e3,closeButton:Qj,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let yf,ki=new Map,wl=[],eD=1;function Xj(){return""+eD++}function tD(t){return t&&(Xi(t.toastId)||zl(t.toastId))?t.toastId:Xj()}function Bl(t,e){return ki.size>0?Wn.emit(0,t,e):wl.push({content:t,options:e}),e.toastId}function Xu(t,e){return{...e,type:e&&e.type||t,toastId:tD(e)}}function Pd(t){return(e,n)=>Bl(e,Xu(t,n))}function z(t,e){return Bl(t,Xu("default",e))}z.loading=(t,e)=>Bl(t,Xu("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),z.promise=function(t,e,n){let r,{pending:s,error:a,success:o}=e;s&&(r=Xi(s)?z.loading(s,n):z.loading(s.render,{...n,...s}));const l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},d=(p,f,x)=>{if(f==null)return void z.dismiss(r);const g={type:p,...l,...n,data:x},v=Xi(f)?{render:f}:f;return r?z.update(r,{...g,...v}):z(v.render,{...g,...v}),x},u=wn(t)?t():t;return u.then(p=>d("success",o,p)).catch(p=>d("error",a,p)),u},z.success=Pd("success"),z.info=Pd("info"),z.error=Pd("error"),z.warning=Pd("warning"),z.warn=z.warning,z.dark=(t,e)=>Bl(t,Xu("default",{theme:"dark",...e})),z.dismiss=t=>{ki.size>0?Wn.emit(1,t):wl=wl.filter(e=>t!=null&&e.options.toastId!==t)},z.clearWaitingQueue=function(t){return t===void 0&&(t={}),Wn.emit(5,t)},z.isActive=t=>{let e=!1;return ki.forEach(n=>{n.isToastActive&&n.isToastActive(t)&&(e=!0)}),e},z.update=function(t,e){e===void 0&&(e={}),setTimeout(()=>{const n=function(r,s){let{containerId:a}=s;const o=ki.get(a||yf);return o&&o.getToast(r)}(t,e);if(n){const{props:r,content:s}=n,a={delay:100,...r,...e,toastId:e.toastId||t,updateId:Xj()};a.toastId!==t&&(a.staleId=t);const o=a.render||s;delete a.render,Bl(o,a)}},0)},z.done=t=>{z.update(t,{progress:1})},z.onChange=t=>(Wn.on(4,t),()=>{Wn.off(4,t)}),z.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},z.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},Wn.on(2,t=>{yf=t.containerId||t,ki.set(yf,t),wl.forEach(e=>{Wn.emit(0,e.content,e.options)}),wl=[]}).on(3,t=>{ki.delete(t.containerId||t),ki.size===0&&Wn.off(0).off(1).off(5)});const Jj=w.createContext(null),nD=({children:t})=>{const[e,n]=w.useState(null),[r,s]=w.useState(!0);w.useEffect(()=>{(async()=>{try{s(!0);const u=localStorage.getItem("userData");if(u)try{const p=JSON.parse(u);n(p)}catch{localStorage.removeItem("userData")}}catch(u){console.error("Error checking user:",u)}finally{s(!1)}})()},[]);const a=async(d,u)=>{try{if(s(!0),d==="admin@example.com"||d==="admin"){const p={id:"00000000-0000-0000-0000-000000000001",name:"مدير النظام",email:"admin@example.com",role:"admin"};return n(p),localStorage.setItem("userData",JSON.stringify(p)),localStorage.getItem("rememberMe")==="true"&&localStorage.setItem("rememberedEmail",d),z.success("تم تسجيل الدخول بنجاح"),p}else throw new Error("بيانات الدخول غير صحيحة")}catch(p){throw console.error("Login error:",p),z.error(p.message||"فشل تسجيل الدخول"),p}finally{s(!1)}},o=async()=>{try{s(!0),n(null),localStorage.removeItem("userData"),z.info("تم تسجيل الخروج بنجاح")}catch(d){console.error("Logout error:",d),z.error("فشل تسجيل الخروج")}finally{s(!1)}},l=()=>{if(e)return!0;const d=localStorage.getItem("userData");if(d)try{const u=JSON.parse(d);return e||n(u),!0}catch{return localStorage.removeItem("userData"),!1}return!1};return i.jsx(Jj.Provider,{value:{user:e,login:a,logout:o,loading:r,isAuthenticated:l},children:t})},Do=()=>{const t=w.useContext(Jj);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},e2=w.createContext(null),Hy={store:{name:"متجر خدماتكم",description:"نظام متكامل لإدارة المتجر",email:"info@example.com",phone:"0599123456",address:"غزة، فلسطين",logo:"/logo.svg",currency:"ILS",language:"ar"},social:{facebook:"",twitter:"",instagram:"",whatsapp:""},notifications:{email:!0,sms:!1,push:!0},login:{logo:"/logo.svg",background:"/login-bg.jpg"}},rD=({children:t})=>{const[e,n]=w.useState(Hy),[r,s]=w.useState(!0);w.useEffect(()=>{const l=localStorage.getItem("appSettings");if(l)try{n(JSON.parse(l))}catch(d){console.error("Error parsing saved settings:",d),n(Hy)}s(!1)},[]);const a=async l=>{try{return s(!0),localStorage.setItem("appSettings",JSON.stringify(l)),n(l),z.success("تم حفظ الإعدادات بنجاح"),!0}catch(d){return console.error("Error saving settings:",d),z.error("فشل في حفظ الإعدادات"),!1}finally{s(!1)}},o=async l=>{try{const d={...e,store:{...e.store,name:l}};return await a(d)}catch(d){return console.error("Error updating store name:",d),!1}};return i.jsx(e2.Provider,{value:{settings:e,loading:r,saveSettings:a,updateStoreName:o},children:t})},qh=()=>{const t=w.useContext(e2);if(!t)throw new Error("useSettings must be used within a SettingsProvider");return t};function sD({children:t,allowedRoles:e=[]}){const{isAuthenticated:n,user:r,loading:s}=Do();return s?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n()?e.length>0&&r&&!e.includes(r.role)?r.role==="admin"?i.jsx(eo,{to:"/admin-dashboard"}):i.jsx(eo,{to:"/login"}):t:i.jsx(eo,{to:"/login"})}function iD(){var N,S;const[t,e]=w.useState(""),[n,r]=w.useState(""),[s,a]=w.useState(!1),[o,l]=w.useState(""),[d,u]=w.useState(!1),{login:p,isAuthenticated:f,user:x}=Do(),{settings:g}=qh(),v=aa();if(w.useEffect(()=>{const P=localStorage.getItem("rememberedEmail"),M=localStorage.getItem("rememberMe")==="true";P&&M&&(e(P),u(!0))},[]),w.useEffect(()=>{document.title=`تسجيل الدخول - ${g.store.name}`},[g.store.name]),f())return x&&x.role==="admin"?i.jsx(eo,{to:"/admin-dashboard"}):i.jsx(eo,{to:"/admin-dashboard"});const b=async P=>{P.preventDefault(),l(""),a(!0);try{localStorage.setItem("rememberMe",d?"true":"false"),(await p(t,n)).role,v("/admin-dashboard")}catch(M){console.error("Error logging in:",M),l(M.message||"فشل في تسجيل الدخول")}finally{a(!1)}},j=((N=g.login)==null?void 0:N.background)||"/login-bg.jpg",_=((S=g.login)==null?void 0:S.logo)||"/logo.svg";return i.jsxs("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundImage:`url(${j})`,backgroundSize:"cover",backgroundPosition:"center",position:"relative"},children:[i.jsx("div",{className:"absolute inset-0 z-0",style:{background:"radial-gradient(circle at top right, rgba(250, 204, 21, 0.1) 0%, rgba(15, 23, 42, 0.9) 70%)",boxShadow:"inset 0 0 100px rgba(250, 204, 21, 0.2)"}}),i.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-yellow-400 rounded-full filter blur-3xl opacity-10 -mr-32 -mt-32"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-yellow-400 rounded-full filter blur-3xl opacity-10 -ml-32 -mb-32"}),i.jsxs("div",{className:"relative z-10 bg-white bg-opacity-95 backdrop-blur-sm p-8 rounded-lg shadow-2xl w-full max-w-md border border-gray-200",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx("img",{src:_,alt:"Logo",className:"h-20 w-20 rounded-lg shadow-lg",onError:P=>{P.target.onerror=null,P.target.src="/logo.svg"}})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"تسجيل الدخول"}),i.jsxs("p",{className:"text-gray-600 mt-2",children:["مرحباً بك في نظام ",g.store.name]})]}),o&&i.jsx("div",{className:"bg-red-50 text-red-800 p-4 rounded-lg mb-6 border-r-4 border-red-500",children:o}),i.jsxs("form",{onSubmit:b,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم المستخدم"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{id:"email",type:"text",value:t,onChange:P=>e(P.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-yellow-500 focus:border-yellow-500 shadow-sm",placeholder:"أدخل اسم المستخدم",required:!0}),i.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:i.jsxs("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[i.jsx("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),i.jsx("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]})})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"كلمة المرور"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{id:"password",type:"password",value:n,onChange:P=>r(P.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-yellow-500 focus:border-yellow-500 shadow-sm",placeholder:"أدخل كلمة المرور",required:!0}),i.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:i.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{id:"remember-me",type:"checkbox",checked:d,onChange:P=>u(P.target.checked),className:"h-4 w-4 text-yellow-600 focus:ring-yellow-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"remember-me",className:"mr-2 block text-sm text-gray-700",children:"تذكرني"})]}),i.jsx("div",{className:"text-sm",children:i.jsx("a",{href:"#",className:"text-yellow-600 hover:text-yellow-500 font-medium",children:"نسيت كلمة المرور؟"})})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:s,className:`w-full bg-gradient-to-r from-yellow-500 to-yellow-600 text-slate-900 py-2 rounded-md hover:from-yellow-600 hover:to-yellow-700 transition-colors shadow-md font-bold ${s?"opacity-50 cursor-not-allowed":""}`,children:s?"جاري تسجيل الدخول...":"تسجيل الدخول"})})]})]})]})}function aD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const oD=w.forwardRef(aD);function lD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"}))}const cD=w.forwardRef(lD);function dD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const uD=w.forwardRef(dD);function hD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 21v-7.5a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 .75.75V21m-4.5 0H2.36m11.14 0H18m0 0h3.64m-1.39 0V9.349M3.75 21V9.349m0 0a3.001 3.001 0 0 0 3.75-.615A2.993 2.993 0 0 0 9.75 9.75c.896 0 1.7-.393 2.25-1.016a2.993 2.993 0 0 0 2.25 1.016c.896 0 1.7-.393 2.25-1.015a3.001 3.001 0 0 0 3.75.614m-16.5 0a3.004 3.004 0 0 1-.621-4.72l1.189-1.19A1.5 1.5 0 0 1 5.378 3h13.243a1.5 1.5 0 0 1 1.06.44l1.19 1.189a3 3 0 0 1-.621 4.72M6.75 18h3.75a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75H6.75a.75.75 0 0 0-.75.75v3.75c0 .414.336.75.75.75Z"}))}const pD=w.forwardRef(hD);function fD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const mD=w.forwardRef(fD);function gD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const xD=w.forwardRef(gD);function vD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const yD=w.forwardRef(vD);function bD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}const _D=w.forwardRef(bD);function wD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 11.25v8.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5v-8.25M12 4.875A2.625 2.625 0 1 0 9.375 7.5H12m0-2.625V7.5m0-2.625A2.625 2.625 0 1 1 14.625 7.5H12m0 0V21m-8.625-9.75h18c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125h-18c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}))}const jD=w.forwardRef(wD);function ND({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const kD=w.forwardRef(ND);function SD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 1 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 0 1-1.44-4.282m3.102.069a18.03 18.03 0 0 1-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 0 1 8.835 2.535M10.34 6.66a23.847 23.847 0 0 0 8.835-2.535m0 0A23.74 23.74 0 0 0 18.795 3m.38 1.125a23.91 23.91 0 0 1 1.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 0 0 1.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 0 1 0 3.46"}))}const CD=w.forwardRef(SD);function ED({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const TD=w.forwardRef(ED);function PD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v17.25m0 0c-1.472 0-2.882.265-4.185.75M12 20.25c1.472 0 2.882.265 4.185.75M18.75 4.97A48.416 48.416 0 0 0 12 4.5c-2.291 0-4.545.16-6.75.47m13.5 0c1.01.143 2.01.317 3 .52m-3-.52 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.988 5.988 0 0 1-2.031.352 5.988 5.988 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L18.75 4.971Zm-16.5.52c.99-.203 1.99-.377 3-.52m0 0 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.989 5.989 0 0 1-2.031.352 5.989 5.989 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L5.25 4.971Z"}))}const DD=w.forwardRef(PD);function OD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const MD=w.forwardRef(OD);function LD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const AD=w.forwardRef(LD);function ID({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const RD=w.forwardRef(ID);function FD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 0 1 0 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 0 1 0-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375Z"}))}const $D=w.forwardRef(FD);function zD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"}))}const Yy=w.forwardRef(zD);function BD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const UD=w.forwardRef(BD);function WD({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const HD=w.forwardRef(WD),YD=[{id:"overview",label:"الإحصائيات",icon:mD},{id:"financial-dashboard",label:"لوحة المعلومات المالية",icon:cD},{id:"orders",label:"الطلبات",icon:AD},{id:"products-management",label:"إدارة المنتجات",icon:_D,subItems:[{id:"products",label:"المنتجات"},{id:"products-management",label:"إدارة المنتجات"},{id:"categories",label:"التصنيفات"}]},{id:"vendors-management",label:"إدارة البائعين",icon:pD,subItems:[{id:"vendors",label:"قائمة البائعين"},{id:"vendors-list",label:"عرض البائعين"},{id:"add-vendor",label:"إضافة بائع"},{id:"vendor-categories-table",label:"أقسام المتاجر"}]},{id:"drivers-management",label:"إدارة السائقين",icon:Yy,subItems:[{id:"drivers",label:"قائمة السائقين"},{id:"add-driver",label:"إضافة سائق"}]},{id:"shipping-methods",label:"طرق التوصيل",icon:Yy},{id:"payments-management",label:"إدارة المدفوعات",icon:yD,subItems:[{id:"payments",label:"طرق الدفع"},{id:"wallet",label:"المحفظة"},{id:"wallet-settings",label:"إعدادات المحفظة"},{id:"wallet-charging",label:"شحن المحافظ"}]},{id:"customers-management",label:"إدارة الزبائن",icon:UD,subItems:[{id:"customers",label:"قائمة الزبائن"},{id:"add-customer",label:"إضافة زبون"}]},{id:"wholesale",label:"عملاء الجملة",icon:DD},{id:"users-management",label:"إدارة المستخدمين",icon:HD,subItems:[{id:"users",label:"مستخدمي النظام"}]},{id:"media",label:"الوسائط",icon:TD},{id:"api-keys",label:"مفاتيح API",icon:kD},{id:"ratings",label:"التقييمات",icon:RD,subItems:[{id:"vendor-ratings",label:"تقييمات المتاجر"},{id:"driver-ratings",label:"تقييمات السائقين"},{id:"customer-ratings",label:"تقييمات الزبائن"},{id:"ratings-report",label:"تقرير التقييمات الشهري"}]},{id:"advertisements",label:"الإعلانات",icon:CD},{id:"coupons",label:"كوبونات الخصم",icon:$D},{id:"points-rewards",label:"النقاط والمكافآت",icon:jD},{id:"referral",label:"نظام الإحالة",icon:MD},{id:"notifications",label:"الإشعارات",icon:uD},{id:"settings",label:"الإعدادات",icon:xD}];function VD({activeTab:t,onTabChange:e}){const n=aa(),{logout:r}=Do(),[s,a]=w.useState({"products-management":!1,"vendors-management":!1,"drivers-management":!1,"customers-management":!1,"users-management":!1,ratings:!1,"payments-management":!0}),o=u=>{e(u),n(`/admin-dashboard/${u}`)},l=u=>{a(p=>({...p,[u]:!p[u]}))},d=()=>{r(),n("/login")};return i.jsxs("aside",{className:"fixed right-0 top-0 w-64 h-full flex flex-col bg-slate-900 text-white shadow-xl z-50",children:[i.jsx("div",{className:"p-4 border-b border-slate-700/50 bg-gradient-to-r from-slate-900 to-slate-800",children:i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center text-white shadow-lg",children:"🛒"}),i.jsx("h2",{className:"mr-2 text-lg font-bold bg-gradient-to-r from-blue-400 to-blue-600 bg-clip-text text-transparent",children:"لوحة التحكم"})]})}),i.jsx("div",{className:"p-4 border-b border-slate-700/50",children:i.jsxs("div",{className:"flex items-center gap-3 bg-slate-800/50 p-3 rounded-lg",children:[i.jsx("div",{className:"w-10 h-10 bg-slate-700 rounded-full flex items-center justify-center border-2 border-yellow-500",children:"👤"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-yellow-100",children:"مدير النظام"}),i.jsx("p",{className:"text-xs text-slate-400",children:"admin@example.com"})]})]})}),i.jsx("nav",{className:"flex-1 overflow-y-auto p-4 space-y-1.5",children:YD.map(u=>{const p=u.icon,f=t===u.id||u.subItems&&u.subItems.some(g=>t===g.id),x=s[u.id];return i.jsxs("div",{children:[i.jsxs(Qu,{to:u.subItems?"#":`/admin-dashboard/${u.id}`,onClick:g=>{g.preventDefault(),u.subItems?l(u.id):o(u.id)},className:`flex items-center w-full px-4 py-3 rounded-lg transition-all duration-200 group ${f?"bg-gradient-to-r from-yellow-600 to-yellow-700 text-white shadow-lg":"text-slate-300 hover:bg-slate-800/70 hover:text-white"}`,children:[i.jsx(p,{className:`w-5 h-5 ml-3 ${f?"text-white":"text-slate-400"} group-hover:scale-110`}),i.jsx("span",{className:"font-medium",children:u.label}),u.subItems&&i.jsx("svg",{className:`w-4 h-4 mr-auto transition-transform ${x?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u.subItems&&x&&i.jsx("div",{className:"mt-1 mr-4 space-y-1",children:u.subItems.map(g=>i.jsx(Qu,{to:`/admin-dashboard/${g.id}`,onClick:v=>{v.preventDefault(),o(g.id)},className:`flex items-center w-full px-4 py-2 rounded-lg transition-all duration-200 ${t===g.id?"bg-yellow-600/50 text-white":"text-slate-400 hover:bg-slate-800/30 hover:text-white"}`,children:i.jsx("span",{className:"text-sm",children:g.label})},g.id))})]},u.id)})}),i.jsx("div",{className:"p-4 border-t border-slate-700/50 bg-slate-900/50 backdrop-blur-sm",children:i.jsxs("button",{onClick:d,className:"flex items-center w-full px-4 py-2 text-slate-300 hover:text-white hover:bg-red-500/10 rounded-lg transition-colors group",children:[i.jsx(oD,{className:"w-5 h-5 ml-3 group-hover:text-red-400"}),i.jsx("span",{className:"group-hover:text-red-400",children:"تسجيل الخروج"})]})})]})}function qD(){const{settings:t}=qh(),{user:e,logout:n}=Do(),r=aa(),[s]=w.useState([{id:1,text:"طلب جديد #123",time:"قبل 5 دقائق"},{id:2,text:"اكتمال الطلب #120",time:"قبل 10 دقائق"},{id:3,text:"تقييم جديد من العميل أحمد",time:"قبل 15 دقيقة"}]),[a,o]=w.useState(!1),[l,d]=w.useState(!1),u=()=>{n(),r("/login")};return i.jsx("div",{className:"bg-gradient-to-r from-slate-900 to-slate-800 shadow-sm",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center h-16",children:[i.jsx("div",{className:"flex-1 max-w-lg",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:i.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),i.jsx("input",{type:"text",placeholder:"بحث...",className:"block w-full bg-slate-800 text-white rounded-lg border-gray-700 pr-10 focus:border-yellow-500 focus:ring-yellow-500 placeholder-gray-400"})]})}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>o(!a),className:"relative p-2 text-gray-300 hover:text-white rounded-full hover:bg-slate-800",children:[i.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),i.jsx("span",{className:"absolute top-0 right-0 block h-2 w-2 rounded-full bg-yellow-500 ring-2 ring-slate-900"})]}),a&&i.jsxs("div",{className:"absolute left-0 mt-2 w-80 bg-slate-800 rounded-lg shadow-lg py-1 z-50 border border-slate-700",children:[i.jsx("div",{className:"px-4 py-2 border-b border-slate-700",children:i.jsx("h3",{className:"text-sm font-semibold text-white",children:"الإشعارات"})}),i.jsx("div",{className:"max-h-64 overflow-y-auto",children:s.map(p=>i.jsxs("div",{className:"px-4 py-2 hover:bg-slate-700 cursor-pointer",children:[i.jsx("p",{className:"text-sm text-gray-200",children:p.text}),i.jsx("p",{className:"text-xs text-gray-400",children:p.time})]},p.id))}),i.jsx("div",{className:"px-4 py-2 border-t border-slate-700",children:i.jsx("button",{className:"text-sm text-yellow-400 hover:text-yellow-300",children:"عرض كل الإشعارات"})})]})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>d(!l),className:"flex items-center",children:[i.jsx("div",{className:"h-8 w-8 rounded-full border-2 border-yellow-500 overflow-hidden bg-slate-700 flex items-center justify-center",children:i.jsx("span",{className:"text-lg text-slate-300",children:"👤"})}),i.jsx("span",{className:"mr-2 text-sm font-medium text-gray-200",children:(e==null?void 0:e.name)||t.store.name})]}),l&&i.jsxs("div",{className:"absolute left-0 mt-2 w-48 bg-slate-800 rounded-lg shadow-lg py-1 z-50 border border-slate-700",children:[i.jsxs("div",{className:"px-4 py-2 border-b border-slate-700",children:[i.jsx("p",{className:"text-sm font-semibold text-white",children:(e==null?void 0:e.email)||"admin@example.com"}),i.jsx("p",{className:"text-xs text-gray-400",children:(e==null?void 0:e.role)==="admin"?"مدير النظام":"مستخدم"})]}),i.jsx("button",{onClick:()=>r("/admin-dashboard/settings"),className:"block w-full text-right px-4 py-2 text-sm text-gray-200 hover:bg-slate-700",children:"الإعدادات"}),i.jsx("button",{onClick:u,className:"block w-full text-right px-4 py-2 text-sm text-red-400 hover:bg-slate-700",children:"تسجيل الخروج"})]})]})]})]})})})}const ZD="modulepreload",KD=function(t){return"/"+t},Vy={},Ji=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(d=>{if(d=KD(d),d in Vy)return;Vy[d]=!0;const u=d.endsWith(".css"),p=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":ZD,u||(f.as="script"),f.crossOrigin="",f.href=d,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((x,g)=>{f.addEventListener("load",x),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},GD=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ji(async()=>{const{default:r}=await Promise.resolve().then(()=>Oo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Ux extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class QD extends Ux{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class XD extends Ux{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class JD extends Ux{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Jm;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Jm||(Jm={}));var e5=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?a(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})};class t5{constructor(e,{headers:n={},customFetch:r,region:s=Jm.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=GD(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return e5(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:o}=n;let l={},{region:d}=n;d||(d=this.region),d&&d!=="any"&&(l["x-region"]=d);let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const p=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:u}).catch(v=>{throw new QD(v)}),f=p.headers.get("x-relay-error");if(f&&f==="true")throw new XD(p);if(!p.ok)throw new JD(p);let x=((r=p.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return x==="application/json"?g=yield p.json():x==="application/octet-stream"?g=yield p.blob():x==="text/event-stream"?g=p:x==="multipart/form-data"?g=yield p.formData():g=yield p.text(),{data:g,error:null}}catch(s){return{data:null,error:s}}})}}var yn={},Wx={},Zh={},zc={},Kh={},Gh={},n5=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ho=n5();const r5=ho.fetch,t2=ho.fetch.bind(ho),n2=ho.Headers,s5=ho.Request,i5=ho.Response,Oo=Object.freeze(Object.defineProperty({__proto__:null,Headers:n2,Request:s5,Response:i5,default:t2,fetch:r5},Symbol.toStringTag,{value:"Module"})),a5=_C(Oo);var Qh={};Object.defineProperty(Qh,"__esModule",{value:!0});let o5=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Qh.default=o5;var r2=hn&&hn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gh,"__esModule",{value:!0});const l5=r2(a5),c5=r2(Qh);let d5=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=l5.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,d;let u=null,p=null,f=null,x=a.status,g=a.statusText;if(a.ok){if(this.method!=="HEAD"){const _=await a.text();_===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?p=_:p=JSON.parse(_))}const b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),j=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&j&&j.length>1&&(f=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(u={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,f=null,x=406,g="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const b=await a.text();try{u=JSON.parse(b),Array.isArray(u)&&a.status===404&&(p=[],u=null,x=200,g="OK")}catch{a.status===404&&b===""?(x=204,g="No Content"):u={message:b}}if(u&&this.isMaybeSingle&&(!((d=u==null?void 0:u.details)===null||d===void 0)&&d.includes("0 rows"))&&(u=null,x=200,g="OK"),u&&this.shouldThrowOnError)throw new c5.default(u)}return{error:u,data:p,count:f,status:x,statusText:g}});return this.shouldThrowOnError||(s=s.catch(a=>{var o,l,d;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(d=a==null?void 0:a.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};Gh.default=d5;var u5=hn&&hn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Kh,"__esModule",{value:!0});const h5=u5(Gh);let p5=class extends h5.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:a=s}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const a=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:a=!1,format:o="text"}={}){var l;const d=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${d};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Kh.default=p5;var f5=hn&&hn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(zc,"__esModule",{value:!0});const m5=f5(Kh);let g5=class extends m5.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};zc.default=g5;var x5=hn&&hn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zh,"__esModule",{value:!0});const al=x5(zc);let v5=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let a=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new al.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),r||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const o=e.reduce((l,d)=>l.concat(Object.keys(d)),[]);if(o.length>0){const l=[...new Set(o)].map(d=>`"${d}"`);this.url.searchParams.set("columns",l.join(","))}}return new al.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:a=!0}={}){const o="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const d=e.reduce((u,p)=>u.concat(Object.keys(p)),[]);if(d.length>0){const u=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",u.join(","))}}return new al.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new al.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new al.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Zh.default=v5;var Xh={},Jh={};Object.defineProperty(Jh,"__esModule",{value:!0});Jh.version=void 0;Jh.version="0.0.0-automated";Object.defineProperty(Xh,"__esModule",{value:!0});Xh.DEFAULT_HEADERS=void 0;const y5=Jh;Xh.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${y5.version}`};var s2=hn&&hn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wx,"__esModule",{value:!0});const b5=s2(Zh),_5=s2(zc),w5=Xh;let j5=class i2{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},w5.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new b5.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new i2(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:a}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let d;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([p,f])=>f!==void 0).map(([p,f])=>[p,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([p,f])=>{l.searchParams.append(p,f)})):(o="POST",d=n);const u=Object.assign({},this.headers);return a&&(u.Prefer=`count=${a}`),new _5.default({method:o,url:l,headers:u,schema:this.schemaName,body:d,fetch:this.fetch,allowEmpty:!1})}};Wx.default=j5;var Mo=hn&&hn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yn,"__esModule",{value:!0});yn.PostgrestError=yn.PostgrestBuilder=yn.PostgrestTransformBuilder=yn.PostgrestFilterBuilder=yn.PostgrestQueryBuilder=yn.PostgrestClient=void 0;const a2=Mo(Wx);yn.PostgrestClient=a2.default;const o2=Mo(Zh);yn.PostgrestQueryBuilder=o2.default;const l2=Mo(zc);yn.PostgrestFilterBuilder=l2.default;const c2=Mo(Kh);yn.PostgrestTransformBuilder=c2.default;const d2=Mo(Gh);yn.PostgrestBuilder=d2.default;const u2=Mo(Qh);yn.PostgrestError=u2.default;var N5=yn.default={PostgrestClient:a2.default,PostgrestQueryBuilder:o2.default,PostgrestFilterBuilder:l2.default,PostgrestTransformBuilder:c2.default,PostgrestBuilder:d2.default,PostgrestError:u2.default};const{PostgrestClient:k5,PostgrestQueryBuilder:UB,PostgrestFilterBuilder:WB,PostgrestTransformBuilder:HB,PostgrestBuilder:YB,PostgrestError:VB}=N5,S5="2.11.2",C5={"X-Client-Info":`realtime-js/${S5}`},E5="1.0.0",h2=1e4,T5=1e3;var to;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(to||(to={}));var Tn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Tn||(Tn={}));var cr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(cr||(cr={}));var eg;(function(t){t.websocket="websocket"})(eg||(eg={}));var Pi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Pi||(Pi={}));class P5{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),a=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(e.slice(o,o+s));o=o+s;const d=r.decode(e.slice(o,o+a));o=o+a;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:d,payload:u}}}class p2{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Je;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Je||(Je={}));const qy=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((a,o)=>(a[o]=D5(o,t,e,s),a),{})},D5=(t,e,n,r)=>{const s=e.find(l=>l.name===t),a=s==null?void 0:s.type,o=n[t];return a&&!r.includes(a)?f2(a,o):tg(o)},f2=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return A5(e,n)}switch(t){case Je.bool:return O5(e);case Je.float4:case Je.float8:case Je.int2:case Je.int4:case Je.int8:case Je.numeric:case Je.oid:return M5(e);case Je.json:case Je.jsonb:return L5(e);case Je.timestamp:return I5(e);case Je.abstime:case Je.date:case Je.daterange:case Je.int4range:case Je.int8range:case Je.money:case Je.reltime:case Je.text:case Je.time:case Je.timestamptz:case Je.timetz:case Je.tsrange:case Je.tstzrange:return tg(e);default:return tg(e)}},tg=t=>t,O5=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},M5=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},L5=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},A5=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const o=t.slice(1,n);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>f2(e,l))}return t},I5=t=>typeof t=="string"?t.replace(" ","T"):t,m2=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class bf{constructor(e,n,r={},s=h2){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Zy;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Zy||(Zy={}));class Ul{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ul.syncState(this.state,s,a,o),this.pendingDiffs.forEach(d=>{this.state=Ul.syncDiff(this.state,d,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ul.syncDiff(this.state,s,a,o),l())}),this.onJoin((s,a,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:o})}),this.onLeave((s,a,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const a=this.cloneDeep(e),o=this.transformState(n),l={},d={};return this.map(a,(u,p)=>{o[u]||(d[u]=p)}),this.map(o,(u,p)=>{const f=a[u];if(f){const x=p.map(j=>j.presence_ref),g=f.map(j=>j.presence_ref),v=p.filter(j=>g.indexOf(j.presence_ref)<0),b=f.filter(j=>x.indexOf(j.presence_ref)<0);v.length>0&&(l[u]=v),b.length>0&&(d[u]=b)}else l[u]=p}),this.syncDiff(a,{joins:l,leaves:d},r,s)}static syncDiff(e,n,r,s){const{joins:a,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(l,d)=>{var u;const p=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(d),p.length>0){const f=e[l].map(g=>g.presence_ref),x=p.filter(g=>f.indexOf(g.presence_ref)<0);e[l].unshift(...x)}r(l,p,d)}),this.map(o,(l,d)=>{let u=e[l];if(!u)return;const p=d.map(f=>f.presence_ref);u=u.filter(f=>p.indexOf(f.presence_ref)<0),e[l]=u,s(l,u,d),u.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ky;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ky||(Ky={}));var Gy;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Gy||(Gy={}));var es;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(es||(es={}));class Hx{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Tn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new bf(this,cr.join,this.params,this.timeout),this.rejoinTimer=new p2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Tn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Tn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Tn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Tn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(cr.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Ul(this),this.broadcastEndpointURL=m2(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:o,private:l}}=this.params;this._onError(p=>e==null?void 0:e(es.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(es.CLOSED));const d={},u={broadcast:a,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var f;if(this.socket.setAuth(),p===void 0){e==null||e(es.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,g=(f=x==null?void 0:x.length)!==null&&f!==void 0?f:0,v=[];for(let b=0;b<g;b++){const j=x[b],{filter:{event:_,schema:N,table:S,filter:P}}=j,M=p&&p[b];if(M&&M.event===_&&M.schema===N&&M.table===S&&M.filter===P)v.push(Object.assign(Object.assign({},j),{id:M.id}));else{this.unsubscribe(),e==null||e(es.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(es.SUBSCRIBED);return}}).receive("error",p=>{e==null||e(es.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(es.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,d;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Tn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(cr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new bf(this,cr.leave,{},e);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new bf(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,a;const o=e.toLocaleLowerCase(),{close:l,error:d,leave:u,join:p}=cr;if(r&&[l,d,u,p].indexOf(o)>=0&&r!==this._joinRef())return;let x=this._onMessage(o,n,r);if(n&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var v,b,j;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((j=(b=g.filter)===null||b===void 0?void 0:b.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===o}).map(g=>g.callback(x,r)):(a=this.bindings[o])===null||a===void 0||a.filter(g=>{var v,b,j,_,N,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const P=g.id,M=(v=g.filter)===null||v===void 0?void 0:v.event;return P&&((b=n.ids)===null||b===void 0?void 0:b.includes(P))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((j=n.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const P=(N=(_=g==null?void 0:g.filter)===null||_===void 0?void 0:_.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return P==="*"||P===((S=n==null?void 0:n.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof x=="object"&&"ids"in x){const v=x.data,{schema:b,table:j,commit_timestamp:_,type:N,errors:S}=v;x=Object.assign(Object.assign({},{schema:b,table:j,commit_timestamp:_,eventType:N,new:{},old:{},errors:S}),this._getPayloadRecords(v))}g.callback(x,r)})}_isClosed(){return this.state===Tn.closed}_isJoined(){return this.state===Tn.joined}_isJoining(){return this.state===Tn.joining}_isLeaving(){return this.state===Tn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),a={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&Hx.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(cr.close,{},e)}_onError(e){this._on(cr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Tn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=qy(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=qy(e.columns,e.old_record)),n}}const R5=()=>{},F5=typeof WebSocket<"u",$5=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class z5{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=C5,this.params={},this.timeout=h2,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=R5,this.conn=null,this.sendBuffer=[],this.serializer=new P5,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...l)=>Ji(async()=>{const{default:d}=await Promise.resolve().then(()=>Oo);return{default:d}},void 0).then(({default:d})=>d(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${eg.websocket}`,this.httpEndpoint=m2(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(a,o)=>o(JSON.stringify(a)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new p2(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(F5){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new B5(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Ji(async()=>{const{default:e}=await import("./browser-BmsuauXY.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:E5}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case to.connecting:return Pi.Connecting;case to.open:return Pi.Open;case to.closing:return Pi.Closing;default:return Pi.Closed}}isConnected(){return this.connectionState()===Pi.Open}channel(e,n={config:{}}){const r=new Hx(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:s,ref:a}=e,o=()=>{this.encode(e,l=>{var d;(d=this.conn)===null||d===void 0||d.send(l)})};this.log("push",`${n} ${r} (${a})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(s=>{n&&s.updateJoinPayload({access_token:n}),s.joinedOnce&&s._isJoined()&&s._push(cr.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(T5,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:a,ref:o}=n;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,a),this.channels.filter(l=>l._isMember(r)).forEach(l=>l._trigger(s,a,o)),this.stateChangeCallbacks.message.forEach(l=>l(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(cr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([$5],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class B5{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=to.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Yx extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Mt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class U5 extends Yx{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ng extends Yx{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var W5=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?a(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})};const g2=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ji(async()=>{const{default:r}=await Promise.resolve().then(()=>Oo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},H5=()=>W5(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ji(()=>Promise.resolve().then(()=>Oo),void 0)).Response:Response}),rg=t=>{if(Array.isArray(t))return t.map(n=>rg(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=rg(r)}),e};var oa=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?a(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})};const _f=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Y5=(t,e,n)=>oa(void 0,void 0,void 0,function*(){const r=yield H5();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new U5(_f(s),t.status||500))}).catch(s=>{e(new ng(_f(s),s))}):e(new ng(_f(t),t))}),V5=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function Bc(t,e,n,r,s,a){return oa(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(n,V5(e,r,s,a)).then(d=>{if(!d.ok)throw d;return r!=null&&r.noResolveJson?d:d.json()}).then(d=>o(d)).catch(d=>Y5(d,l,r))})})}function Ju(t,e,n,r){return oa(this,void 0,void 0,function*(){return Bc(t,"GET",e,n,r)})}function Ts(t,e,n,r,s){return oa(this,void 0,void 0,function*(){return Bc(t,"POST",e,r,s,n)})}function q5(t,e,n,r,s){return oa(this,void 0,void 0,function*(){return Bc(t,"PUT",e,r,s,n)})}function Z5(t,e,n,r){return oa(this,void 0,void 0,function*(){return Bc(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function x2(t,e,n,r,s){return oa(this,void 0,void 0,function*(){return Bc(t,"DELETE",e,r,s,n)})}var gn=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?a(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})};const K5={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Qy={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class G5{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=g2(s)}uploadOrUpdate(e,n,r,s){return gn(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},Qy),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const d=o.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),d&&a.append("metadata",this.encodeMetadata(d)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",o.cacheControl),d&&a.append("metadata",this.encodeMetadata(d))):(a=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,d&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(n),p=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${p}`,Object.assign({method:e,body:a,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),x=yield f.json();return f.ok?{data:{path:u,id:x.Id,fullPath:x.Key},error:null}:{data:null,error:x}}catch(a){if(Mt(a))return{data:null,error:a};throw a}})}upload(e,n,r){return gn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return gn(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let d;const u=Object.assign({upsert:Qy.upsert},s),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",u.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",u.cacheControl)):(d=r,p["cache-control"]=`max-age=${u.cacheControl}`,p["content-type"]=u.contentType);const f=yield this.fetch(l.toString(),{method:"PUT",body:d,headers:p}),x=yield f.json();return f.ok?{data:{path:a,fullPath:x.Key},error:null}:{data:null,error:x}}catch(d){if(Mt(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,n){return gn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const a=yield Ts(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new Yx("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(r){if(Mt(r))return{data:null,error:r};throw r}})}update(e,n,r){return gn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return gn(this,void 0,void 0,function*(){try{return{data:yield Ts(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Mt(s))return{data:null,error:s};throw s}})}copy(e,n,r){return gn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ts(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Mt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return gn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield Ts(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(s){if(Mt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return gn(this,void 0,void 0,function*(){try{const s=yield Ts(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(s){if(Mt(s))return{data:null,error:s};throw s}})}download(e,n){return gn(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Ju(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Mt(l))return{data:null,error:l};throw l}})}info(e){return gn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Ju(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:rg(r),error:null}}catch(r){if(Mt(r))return{data:null,error:r};throw r}})}exists(e){return gn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Z5(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Mt(r)&&r instanceof ng){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&s.push(a);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});d!==""&&s.push(d);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(e){return gn(this,void 0,void 0,function*(){try{return{data:yield x2(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Mt(n))return{data:null,error:n};throw n}})}list(e,n,r){return gn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},K5),n),{prefix:e||""});return{data:yield Ts(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Mt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Q5="2.7.1",X5={"X-Client-Info":`storage-js/${Q5}`};var ka=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?a(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})};class J5{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},X5),n),this.fetch=g2(r)}listBuckets(){return ka(this,void 0,void 0,function*(){try{return{data:yield Ju(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Mt(e))return{data:null,error:e};throw e}})}getBucket(e){return ka(this,void 0,void 0,function*(){try{return{data:yield Ju(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Mt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return ka(this,void 0,void 0,function*(){try{return{data:yield Ts(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Mt(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return ka(this,void 0,void 0,function*(){try{return{data:yield q5(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Mt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ka(this,void 0,void 0,function*(){try{return{data:yield Ts(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Mt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ka(this,void 0,void 0,function*(){try{return{data:yield x2(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Mt(n))return{data:null,error:n};throw n}})}}class e4 extends J5{constructor(e,n={},r){super(e,n,r)}from(e){return new G5(this.url,this.headers,e,this.fetch)}}const t4="2.49.4";let jl="";typeof Deno<"u"?jl="deno":typeof document<"u"?jl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?jl="react-native":jl="node";const n4={"X-Client-Info":`supabase-js-${jl}/${t4}`},r4={headers:n4},s4={schema:"public"},i4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},a4={};var o4=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?a(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})};const l4=t=>{let e;return t?e=t:typeof fetch>"u"?e=t2:e=fetch,(...n)=>e(...n)},c4=()=>typeof Headers>"u"?n2:Headers,d4=(t,e,n)=>{const r=l4(n),s=c4();return(a,o)=>o4(void 0,void 0,void 0,function*(){var l;const d=(l=yield e())!==null&&l!==void 0?l:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${d}`),r(a,Object.assign(Object.assign({},o),{headers:u}))})};var u4=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?a(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})};function h4(t){return t.replace(/\/$/,"")}function p4(t,e){const{db:n,auth:r,realtime:s,global:a}=t,{db:o,auth:l,realtime:d,global:u}=e,p={db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},l),r),realtime:Object.assign(Object.assign({},d),s),global:Object.assign(Object.assign({},u),a),accessToken:()=>u4(this,void 0,void 0,function*(){return""})};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}const v2="2.69.1",Da=30*1e3,sg=3,wf=sg*Da,f4="http://localhost:9999",m4="supabase.auth.token",g4={"X-Client-Info":`gotrue-js/${v2}`},ig="X-Supabase-Api-Version",y2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},x4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,v4=6e5;class Vx extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Se(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class y4 extends Vx{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function b4(t){return Se(t)&&t.name==="AuthApiError"}class b2 extends Vx{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class ci extends Vx{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Ns extends ci{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _4(t){return Se(t)&&t.name==="AuthSessionMissingError"}class jf extends ci{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Dd extends ci{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Od extends ci{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function w4(t){return Se(t)&&t.name==="AuthImplicitGrantRedirectError"}class Xy extends ci{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ag extends ci{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Nf(t){return Se(t)&&t.name==="AuthRetryableFetchError"}class Jy extends ci{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Wl extends ci{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const eb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tb=` 	
\r=`.split(""),j4=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<tb.length;e+=1)t[tb[e].charCodeAt(0)]=-2;for(let e=0;e<eb.length;e+=1)t[eb[e].charCodeAt(0)]=e;return t})();function _2(t,e,n){const r=j4[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function nb(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=o=>{S4(o,r,n)};for(let o=0;o<t.length;o+=1)_2(t.charCodeAt(o),s,a);return e.join("")}function N4(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function k4(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}N4(r,e)}}function S4(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function C4(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)_2(t.charCodeAt(s),n,r);return new Uint8Array(e)}function E4(t){const e=[];return k4(t,n=>e.push(n)),new Uint8Array(e)}function T4(t){return Math.round(Date.now()/1e3)+t}function P4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const kr=()=>typeof window<"u"&&typeof document<"u",yi={tested:!1,writable:!1},Hl=()=>{if(!kr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(yi.tested)return yi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),yi.tested=!0,yi.writable=!0}catch{yi.tested=!0,yi.writable=!1}return yi.writable};function D4(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const w2=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Ji(async()=>{const{default:r}=await Promise.resolve().then(()=>Oo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},O4=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",j2=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Md=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ld=async(t,e)=>{await t.removeItem(e)};class ep{constructor(){this.promise=new ep.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}ep.promiseConstructor=Promise;function kf(t){const e=t.split(".");if(e.length!==3)throw new Wl("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!x4.test(e[r]))throw new Wl("JWT not in base64url format");return{header:JSON.parse(nb(e[0])),payload:JSON.parse(nb(e[1])),signature:C4(e[2]),raw:{header:e[0],payload:e[1]}}}async function M4(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function L4(t,e){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){r(o);return}}catch(o){if(!e(a,o)){s(o);return}}})()})}function A4(t){return("0"+t.toString(16)).substr(-2)}function I4(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,A4).join("")}async function R4(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function F4(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await R4(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sa(t,e,n=!1){const r=I4();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await j2(t,`${e}-code-verifier`,s);const a=await F4(r);return[a,r===a?"plain":"s256"]}const $4=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function z4(t){const e=t.headers.get(ig);if(!e||!e.match($4))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function B4(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function U4(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var W4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Si=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),H4=[502,503,504];async function rb(t){var e;if(!O4(t))throw new ag(Si(t),0);if(H4.includes(t.status))throw new ag(Si(t),t.status);let n;try{n=await t.json()}catch(a){throw new b2(Si(a),a)}let r;const s=z4(t);if(s&&s.getTime()>=y2["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Jy(Si(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ns}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new Jy(Si(n),t.status,n.weak_password.reasons);throw new y4(Si(n),t.status||500,r)}const Y4=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ae(t,e,n,r){var s;const a=Object.assign({},r==null?void 0:r.headers);a[ig]||(a[ig]=y2["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",d=await V4(t,e,n+l,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(d):{data:Object.assign({},d),error:null}}async function V4(t,e,n,r,s,a){const o=Y4(e,r,s,a);let l;try{l=await t(n,Object.assign({},o))}catch(d){throw console.error(d),new ag(Si(d),0)}if(l.ok||await rb(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(d){await rb(d)}}function ks(t){var e;let n=null;G4(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=T4(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function sb(t){const e=ks(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ms(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function q4(t){return{data:t,error:null}}function Z4(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=t,o=W4(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},d=Object.assign({},o);return{data:{properties:l,user:d},error:null}}function K4(t){return t}function G4(t){return t.access_token&&t.refresh_token&&t.expires_in}var Q4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class X4{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=w2(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await Ae(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Se(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ms})}catch(r){if(Se(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Q4(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Z4,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Se(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ae(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ms})}catch(n){if(Se(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,a,o,l,d;try{const u={nextPage:null,lastPage:0,total:0},p=await Ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:K4});if(p.error)throw p.error;const f=await p.json(),x=(o=p.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(d=(l=p.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return g.length>0&&(g.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(v.split(";")[1].split("=")[1]);u[`${j}Page`]=b}),u.total=parseInt(x)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Se(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await Ae(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ms})}catch(n){if(Se(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await Ae(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ms})}catch(r){if(Se(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await Ae(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ms})}catch(r){if(Se(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await Ae(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Se(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await Ae(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Se(n))return{data:null,error:n};throw n}}}const J4={getItem:t=>Hl()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Hl()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Hl()&&globalThis.localStorage.removeItem(t)}};function ib(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function e3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ca={debug:!!(globalThis&&Hl()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class N2 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class t3 extends N2{}async function n3(t,e,n){Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new t3(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ca.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}e3();const r3={url:f4,storageKey:m4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:g4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ab(t,e,n){return await n()}class bc{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=bc.nextInstanceID,bc.nextInstanceID+=1,this.instanceID>0&&kr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},r3),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new X4({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=w2(s.fetch),this.lock=s.lock||ab,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:kr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=n3:this.lock=ab,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Hl()?this.storage=J4:(this.memoryStorage={},this.storage=ib(this.memoryStorage)):(this.memoryStorage={},this.storage=ib(this.memoryStorage)),kr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${v2}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=D4(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),kr()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),w4(a)){const d=(e=a.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Se(n)?{error:n}:{error:new b2("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const a=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:ks}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const d=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:u,session:d},error:null}}catch(a){if(Se(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,r,s;try{let a;if("email"in e){const{email:p,password:f,options:x}=e;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await Sa(this.storage,this.storageKey)),a=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:p,password:f,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:g,code_challenge_method:v},xform:ks})}else if("phone"in e){const{phone:p,password:f,options:x}=e;a=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:f,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},channel:(s=x==null?void 0:x.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:ks})}else throw new Dd("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const d=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:u,session:d},error:null}}catch(a){if(Se(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:o,options:l}=e;n=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:sb})}else if("phone"in e){const{phone:a,password:o,options:l}=e;n=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:sb})}else throw new Dd("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new jf}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Se(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await Md(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:a,error:o}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ks});if(await Ld(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new jf}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:o})}catch(a){if(Se(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:a,nonce:o}=e,l=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ks}),{data:d,error:u}=l;return u?{data:{user:null,session:null},error:u}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new jf}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:u})}catch(n){if(Se(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,a,o;try{if("email"in e){const{email:l,options:d}=e;let u=null,p=null;this.flowType==="pkce"&&([u,p]=await Sa(this.storage,this.storageKey));const{error:f}=await Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},create_user:(r=d==null?void 0:d.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:u,code_challenge_method:p},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:d}=e,{data:u,error:p}=await Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(a=d==null?void 0:d.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(o=d==null?void 0:d.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:p}}throw new Dd("You must provide either an email or phone number.")}catch(l){if(Se(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,r;try{let s,a;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await Ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:ks});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const d=o.session,u=o.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:u,session:d},error:null}}catch(s){if(Se(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await Sa(this.storage,this.storageKey)),await Ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:q4})}catch(a){if(Se(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ns;const{error:s}=await Ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Se(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:a}=e,{error:o}=await Ae(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:a}=e,{data:o,error:l}=await Ae(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Dd("You must provide either an email or phone number and a type")}catch(n){if(Se(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Md(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<wf:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(d,u,p)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,u,p))})}return{data:{session:e},error:null}}const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ms}):await this._useSession(async n=>{var r,s,a;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ns}:await Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Ms})})}catch(n){if(Se(n))return _4(n)&&(await this._removeSession(),await Ld(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new Ns;const o=s.session;let l=null,d=null;this.flowType==="pkce"&&e.email!=null&&([l,d]=await Sa(this.storage,this.storageKey));const{data:u,error:p}=await Ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:d}),jwt:o.access_token,xform:Ms});if(p)throw p;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Se(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ns;const n=Date.now()/1e3;let r=n,s=!0,a=null;const{payload:o}=kf(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:l,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:d}=await this._getUser(e.access_token);if(d)throw d;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(Se(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:l}=n;if(l)throw l;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ns;const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Se(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!kr())throw new Od("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Od(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Xy("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Od("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Xy("No code detected.");const{data:N,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:o,expires_in:l,expires_at:d,token_type:u}=e;if(!a||!l||!o||!u)throw new Od("No session defined in URL");const p=Math.round(Date.now()/1e3),f=parseInt(l);let x=p+f;d&&(x=parseInt(d));const g=x-p;g*1e3<=Da&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const v=x-f;p-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,x,p):p-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,x,p);const{data:b,error:j}=await this._getUser(a);if(j)throw j;const _={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:f,expires_at:x,refresh_token:o,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:e.type},error:null}}catch(r){if(Se(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Md(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{error:a};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(b4(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Ld(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=P4(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:a},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Sa(this.storage,this.storageKey,!0));try{return await Ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(Se(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Se(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async a=>{var o,l,d,u,p;const{data:f,error:x}=a;if(x)throw x;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Ae(this.fetch,"GET",g,{headers:this.headers,jwt:(p=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&p!==void 0?p:void 0})});if(s)throw s;return kr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Se(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:o}=n;if(o)throw o;return await Ae(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Se(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await L4(async s=>(s>0&&await M4(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ks})),(s,a)=>{const o=200*Math.pow(2,s);return a&&Nf(a)&&Date.now()+o-r<Da})}catch(r){if(this._debug(n,"error",r),Se(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),kr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Md(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<wf;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${wf}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),Nf(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ns;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ep;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new Ns;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),Se(a)){const o={session:null,error:a};return Nf(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(d){a.push(d)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await j2(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ld(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&kr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Da);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Da);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Da}ms, refresh threshold is ${sg} ticks`),s<=sg&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof N2)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!kr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,o]=await Sa(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?{data:null,error:a}:await Ae(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Se(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:a,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:d,error:u}=await Ae(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(n){if(Se(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return{data:null,error:a};const{data:o,error:l}=await Ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(Se(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?{data:null,error:a}:await Ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Se(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:a}=e;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=kf(s.access_token);let l=null;o.aal&&(l=o.aal);let d=l;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const p=o.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+v4>Date.now()))return r;const{data:s,error:a}=await Ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!s.keys||s.keys.length===0)throw new Wl("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new Wl("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:g,error:v}=await this.getSession();if(v||!g.session)return{data:null,error:v};r=g.session.access_token}const{header:s,payload:a,signature:o,raw:{header:l,payload:d}}=kf(r);if(B4(a.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:a,header:s,signature:o},error:null}}const u=U4(s.alg),p=await this.fetchJwk(s.kid,n),f=await crypto.subtle.importKey("jwk",p,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,o,E4(`${l}.${d}`)))throw new Wl("Invalid JWT signature");return{data:{claims:a,header:s,signature:o},error:null}}catch(r){if(Se(r))return{data:null,error:r};throw r}}}bc.nextInstanceID=0;const s3=bc;class i3 extends s3{constructor(e){super(e)}}var a3=function(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?a(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})};class o3{constructor(e,n,r){var s,a,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=h4(e);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const d=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:s4,realtime:a4,auth:Object.assign(Object.assign({},i4),{storageKey:d}),global:r4},p=p4(r??{},u);this.storageKey=(s=p.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=p.global.headers)!==null&&a!==void 0?a:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(f,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=p.auth)!==null&&o!==void 0?o:{},this.headers,p.global.fetch),this.fetch=d4(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new k5(`${l}/rest/v1`,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new t5(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new e4(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return a3(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:a,flowType:o,lock:l,debug:d},u,p){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new i3({url:this.authUrl,headers:Object.assign(Object.assign({},f),u),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:l,debug:d,fetch:p,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new z5(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const l3=(t,e,n)=>new o3(t,e,n),c3="https://lrszjkghzvndusfysriq.supabase.co",d3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxyc3pqa2doenZuZHVzZnlzcmlxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU1Mjg4NjEsImV4cCI6MjA2MTEwNDg2MX0.k-veSylkcZ57meRaMry1WtzjytqRTuHvP2B09ZduJiw",ee=l3(c3,d3,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storageKey:"supabase.auth.token"}});function Sf(){const[t,e]=w.useState(!0),[n,r]=w.useState(null),[s,a]=w.useState({totalOrders:0,totalRevenue:0,totalCustomers:0,totalVendors:0,totalDrivers:0,totalProducts:0,averageOrderValue:0,completionRate:0}),[o,l]=w.useState([]),[d,u]=w.useState([]);w.useEffect(()=>{p(),f(),x()},[]);const p=async()=>{try{const{data:g,error:v}=await ee.from("orders").select("total, status");if(v)throw v;const b=g.length,j=g.reduce((te,G)=>te+(parseFloat(G.total)||0),0),_=g.filter(te=>te.status==="completed").length,N=b>0?_/b*100:0,S=b>0?j/b:0,{count:P,error:M}=await ee.from("customers").select("id",{count:"exact"});if(M)throw M;const{count:R,error:A}=await ee.from("vendors").select("id",{count:"exact"});if(A)throw A;const{count:T,error:Y}=await ee.from("drivers").select("id",{count:"exact"});if(Y)throw Y;const{count:O,error:H}=await ee.from("products").select("id",{count:"exact"});if(H)throw H;a({totalOrders:b,totalRevenue:j,totalCustomers:P,totalVendors:R,totalDrivers:T,totalProducts:O,averageOrderValue:S,completionRate:N})}catch(g){console.error("Error fetching stats:",g),r(g.message),z.error("فشل في تحميل الإحصائيات")}},f=async()=>{try{const{data:g,error:v}=await ee.from("orders").select(`
          vendor_id,
          total,
          vendor:vendors(store_name)
        `).not("vendor_id","is",null);if(v)throw v;const b=g.reduce((_,N)=>{var P;const S=N.vendor_id;return _[S]||(_[S]={id:S,store_name:(P=N.vendor)==null?void 0:P.store_name,total_orders:0,total_revenue:0}),_[S].total_orders++,_[S].total_revenue+=parseFloat(N.total)||0,_},{}),j=Object.values(b).sort((_,N)=>N.total_revenue-_.total_revenue).slice(0,5);l(j)}catch(g){console.error("Error fetching vendor orders:",g),z.error("فشل في تحميل بيانات البائعين")}},x=async()=>{try{const{data:g,error:v}=await ee.from("orders").select(`
          *,
          customer:customers(name),
          vendor:vendors(store_name),
          driver:drivers(name)
        `).order("created_at",{ascending:!1}).limit(5);if(v)throw v;u(g)}catch(g){console.error("Error fetching recent orders:",g),z.error("فشل في تحميل الطلبات الأخيرة")}finally{e(!1)}};return t?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:n}),i.jsx("button",{onClick:()=>{e(!0),r(null),p(),f(),x()},className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"إجمالي الطلبات"}),i.jsx("p",{className:"text-3xl font-bold text-blue-600",children:s.totalOrders})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"إجمالي الإيرادات"}),i.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["₪",s.totalRevenue.toFixed(2)]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"متوسط قيمة الطلب"}),i.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:["₪",s.averageOrderValue.toFixed(2)]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"معدل إكمال الطلبات"}),i.jsxs("p",{className:"text-3xl font-bold text-orange-600",children:[s.completionRate.toFixed(1),"%"]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"عدد العملاء"}),i.jsx("p",{className:"text-3xl font-bold text-red-600",children:s.totalCustomers})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"عدد البائعين"}),i.jsx("p",{className:"text-3xl font-bold text-indigo-600",children:s.totalVendors})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"عدد السائقين"}),i.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:s.totalDrivers})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"عدد المنتجات"}),i.jsx("p",{className:"text-3xl font-bold text-pink-600",children:s.totalProducts})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"أفضل البائعين"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المتجر"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"عدد الطلبات"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"إجمالي الإيرادات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(g=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.store_name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.total_orders}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",g.total_revenue.toFixed(2)]})]},g.id))})]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h3",{className:"text-xl font-semibold mb-4",children:"آخر الطلبات"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"رقم الطلب"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العميل"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المتجر"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"السائق"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المبلغ"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التاريخ"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(g=>{var v,b,j;return i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.order_number}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(v=g.customer)==null?void 0:v.name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(b=g.vendor)==null?void 0:b.store_name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:((j=g.driver)==null?void 0:j.name)||"-"}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",parseFloat(g.total).toFixed(2)]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${g.status==="completed"?"bg-green-100 text-green-800":g.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:g.status==="completed"?"مكتمل":g.status==="cancelled"?"ملغي":g.status==="pending"?"معلق":g.status==="processing"?"قيد المعالجة":g.status==="delivering"?"قيد التوصيل":g.status})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(g.created_at).toLocaleDateString("ar-SA")})]},g.id)})})]})})]})]})}const u3=async(t={})=>{try{let e=ee.from("products").select(`
        *,
        vendor:vendor_id(store_name),
        category:category_id(name)
      `);t.status&&(e=e.eq("status",t.status)),t.vendorId&&(e=e.eq("vendor_id",t.vendorId)),t.categoryId&&(e=e.eq("category_id",t.categoryId)),t.search&&(e=e.ilike("name",`%${t.search}%`)),e=e.order("created_at",{ascending:!1});const{data:n,error:r}=await e;if(r)throw r;return n||[]}catch(e){throw console.error("Error fetching products:",e),e}};function h3(){const[t,e]=w.useState([]),[n,r]=w.useState(!0),[s,a]=w.useState("grid");w.useEffect(()=>{o()},[]);const o=async()=>{try{r(!0);const f=await u3();e(f)}catch(f){console.error("Error fetching products:",f),z.error("فشل في تحميل المنتجات"),e([{id:1,name:"قهوة تركية",description:"قهوة تركية أصلية مطحونة ناعمة",price:15,image_url:"https://images.unsplash.com/photo-1514432324607-a09d9b4aefdd?q=80&w=200&auto=format&fit=crop",category:{name:"مشروبات ساخنة"},vendor:{store_name:"متجر كوفي"},status:"active",stock:100},{id:2,name:"شاي أخضر",description:"شاي أخضر صيني عالي الجودة",price:12,image_url:"https://images.unsplash.com/photo-1627435601361-ec25f5b1d0e5?q=80&w=200&auto=format&fit=crop",category:{name:"مشروبات ساخنة"},vendor:{store_name:"متجر الشاي"},status:"active",stock:75},{id:3,name:"عصير برتقال",description:"عصير برتقال طازج 100%",price:10,image_url:"https://images.unsplash.com/photo-1600271886742-f049cd451bba?q=80&w=200&auto=format&fit=crop",category:{name:"عصائر"},vendor:{store_name:"متجر العصائر"},status:"active",stock:50},{id:4,name:"كيك شوكولاتة",description:"كيك شوكولاتة بلجيكية فاخرة",price:25,image_url:"https://images.unsplash.com/photo-1606313564200-e75d5e30476c?q=80&w=200&auto=format&fit=crop",category:{name:"حلويات"},vendor:{store_name:"متجر الحلويات"},status:"active",stock:30}])}finally{r(!1)}},l=f=>{switch(f){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"draft":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},d=f=>{switch(f){case"active":return"نشط";case"inactive":return"غير نشط";case"draft":return"مسودة";default:return f}},u=()=>i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map(f=>{var x,g;return i.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[f.image_url&&i.jsx("img",{src:f.image_url,alt:f.name,className:"w-full h-48 object-cover",onError:v=>{v.target.onerror=null,v.target.src="https://via.placeholder.com/300x200?text=No+Image"}}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold",children:f.name}),i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${l(f.status)}`,children:d(f.status)})]}),i.jsx("p",{className:"text-gray-600 text-sm mb-2",children:f.description}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"text-xl font-bold text-green-600",children:["₪",f.price.toFixed(2)]}),i.jsxs("p",{className:"text-sm text-gray-500",children:["المخزون: ",f.stock," قطعة"]}),i.jsxs("p",{className:"text-sm text-gray-500",children:["المتجر: ",(x=f.vendor)==null?void 0:x.store_name]}),i.jsxs("p",{className:"text-sm text-gray-500",children:["التصنيف: ",(g=f.category)==null?void 0:g.name]})]})]})]},f.id)})}),p=()=>i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المنتج"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"السعر"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المخزون"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المتجر"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التصنيف"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(f=>{var x,g;return i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[f.image_url&&i.jsx("img",{src:f.image_url,alt:f.name,className:"w-10 h-10 rounded-full object-cover ml-3",onError:v=>{v.target.onerror=null,v.target.src="https://via.placeholder.com/40?text=No+Image"}}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:f.name}),i.jsx("div",{className:"text-gray-500",children:f.description})]})]})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-lg font-semibold text-green-600",children:["₪",f.price.toFixed(2)]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:[f.stock," قطعة"]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:(x=f.vendor)==null?void 0:x.store_name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:(g=f.category)==null?void 0:g.name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${l(f.status)}`,children:d(f.status)})})]},f.id)})})]})})});return n?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"المنتجات"}),i.jsx("div",{className:"flex items-center space-x-4",children:i.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>a("grid"),className:`px-3 py-1 rounded ${s==="grid"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض شبكي"}),i.jsx("button",{onClick:()=>a("table"),className:`px-3 py-1 rounded ${s==="table"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض جدول"})]})})]}),s==="grid"?u():p()]})}var p3=Object.defineProperty,f3=(t,e,n)=>e in t?p3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cf=(t,e,n)=>(f3(t,typeof e!="symbol"?e+"":e,n),n);let m3=class{constructor(){Cf(this,"current",this.detect()),Cf(this,"handoffState","pending"),Cf(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},os=new m3,hs=(t,e)=>{os.isServer?w.useEffect(t,e):w.useLayoutEffect(t,e)};function tp(t){let e=w.useRef(t);return hs(()=>{e.current=t},[t]),e}let an=function(t){let e=tp(t);return q.useCallback((...n)=>e.current(...n),[e])};function np(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function rp(){let t=[],e={addEventListener(n,r,s,a){return n.addEventListener(r,s,a),e.add(()=>n.removeEventListener(r,s,a))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return np(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,s){let a=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:s}),this.add(()=>{Object.assign(n.style,{[r]:a})})},group(n){let r=rp();return n(r),this.add(()=>r.dispose())},add(n){return t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let s of t.splice(r,1))s()}},dispose(){for(let n of t.splice(0))n()}};return e}function g3(){let[t]=w.useState(rp);return w.useEffect(()=>()=>t.dispose(),[t]),t}function x3(){let t=typeof document>"u";return"useSyncExternalStore"in ro?(e=>e.useSyncExternalStore)(ro)(()=>()=>{},()=>!1,()=>!t):!1}function sp(){let t=x3(),[e,n]=w.useState(os.isHandoffComplete);return e&&os.isHandoffComplete===!1&&n(!1),w.useEffect(()=>{e!==!0&&n(!0)},[e]),w.useEffect(()=>os.handoff(),[]),t?!1:e}var ob;let Lo=(ob=q.useId)!=null?ob:function(){let t=sp(),[e,n]=q.useState(t?()=>os.nextId():null);return hs(()=>{e===null&&n(os.nextId())},[e]),e!=null?""+e:void 0};function ti(t,e,...n){if(t in e){let s=e[t];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,ti),r}function k2(t){return os.isServer?null:t instanceof Node?t.ownerDocument:t!=null&&t.hasOwnProperty("current")&&t.current instanceof Node?t.current.ownerDocument:document}let og=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Di=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(Di||{}),S2=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(S2||{}),v3=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(v3||{});function y3(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(og)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var C2=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(C2||{});function b3(t,e=0){var n;return t===((n=k2(t))==null?void 0:n.body)?!1:ti(e,{0(){return t.matches(og)},1(){let r=t;for(;r!==null;){if(r.matches(og))return!0;r=r.parentElement}return!1}})}var _3=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(_3||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Ui(t){t==null||t.focus({preventScroll:!0})}let w3=["textarea","input"].join(",");function j3(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,w3))!=null?n:!1}function N3(t,e=n=>n){return t.slice().sort((n,r)=>{let s=e(n),a=e(r);if(s===null||a===null)return 0;let o=s.compareDocumentPosition(a);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function xu(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){let a=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,o=Array.isArray(t)?n?N3(t):t:y3(t);s.length>0&&o.length>1&&(o=o.filter(g=>!s.includes(g))),r=r??a.activeElement;let l=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,o.indexOf(r))-1;if(e&4)return Math.max(0,o.indexOf(r))+1;if(e&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=e&32?{preventScroll:!0}:{},p=0,f=o.length,x;do{if(p>=f||p+f<=0)return 0;let g=d+p;if(e&16)g=(g+f)%f;else{if(g<0)return 3;if(g>=f)return 1}x=o[g],x==null||x.focus(u),p+=l}while(x!==a.activeElement);return e&6&&j3(x)&&x.select(),2}function E2(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function k3(){return/Android/gi.test(window.navigator.userAgent)}function S3(){return E2()||k3()}function Ad(t,e,n){let r=tp(e);w.useEffect(()=>{function s(a){r.current(a)}return document.addEventListener(t,s,n),()=>document.removeEventListener(t,s,n)},[t,n])}function T2(t,e,n){let r=tp(e);w.useEffect(()=>{function s(a){r.current(a)}return window.addEventListener(t,s,n),()=>window.removeEventListener(t,s,n)},[t,n])}function C3(t,e,n=!0){let r=w.useRef(!1);w.useEffect(()=>{requestAnimationFrame(()=>{r.current=n})},[n]);function s(o,l){if(!r.current||o.defaultPrevented)return;let d=l(o);if(d===null||!d.getRootNode().contains(d)||!d.isConnected)return;let u=function p(f){return typeof f=="function"?p(f()):Array.isArray(f)||f instanceof Set?f:[f]}(t);for(let p of u){if(p===null)continue;let f=p instanceof HTMLElement?p:p.current;if(f!=null&&f.contains(d)||o.composed&&o.composedPath().includes(f))return}return!b3(d,C2.Loose)&&d.tabIndex!==-1&&o.preventDefault(),e(o,d)}let a=w.useRef(null);Ad("pointerdown",o=>{var l,d;r.current&&(a.current=((d=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:d[0])||o.target)},!0),Ad("mousedown",o=>{var l,d;r.current&&(a.current=((d=(l=o.composedPath)==null?void 0:l.call(o))==null?void 0:d[0])||o.target)},!0),Ad("click",o=>{S3()||a.current&&(s(o,()=>a.current),a.current=null)},!0),Ad("touchend",o=>s(o,()=>o.target instanceof HTMLElement?o.target:null),!0),T2("blur",o=>s(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Uc(...t){return w.useMemo(()=>k2(...t),[...t])}let P2=Symbol();function E3(t,e=!0){return Object.assign(t,{[P2]:e})}function xs(...t){let e=w.useRef(t);w.useEffect(()=>{e.current=t},[t]);let n=an(r=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(r):s.current=r)});return t.every(r=>r==null||(r==null?void 0:r[P2]))?void 0:n}function qx(t,e){let n=w.useRef([]),r=an(t);w.useEffect(()=>{let s=[...n.current];for(let[a,o]of e.entries())if(n.current[a]!==o){let l=r(e,s);return n.current=e,l}},[r,...e])}function lb(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}var lg=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(lg||{}),T3=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(T3||{});function Ur({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:s,visible:a=!0,name:o,mergeRefs:l}){l=l??P3;let d=D2(e,t);if(a)return Id(d,n,r,o,l);let u=s??0;if(u&2){let{static:p=!1,...f}=d;if(p)return Id(f,n,r,o,l)}if(u&1){let{unmount:p=!0,...f}=d;return ti(p?0:1,{0(){return null},1(){return Id({...f,hidden:!0,style:{display:"none"}},n,r,o,l)}})}return Id(d,n,r,o,l)}function Id(t,e={},n,r,s){let{as:a=n,children:o,refName:l="ref",...d}=Ef(t,["unmount","static"]),u=t.ref!==void 0?{[l]:t.ref}:{},p=typeof o=="function"?o(e):o;"className"in d&&d.className&&typeof d.className=="function"&&(d.className=d.className(e));let f={};if(e){let x=!1,g=[];for(let[v,b]of Object.entries(e))typeof b=="boolean"&&(x=!0),b===!0&&g.push(v);x&&(f["data-headlessui-state"]=g.join(" "))}if(a===w.Fragment&&Object.keys(cb(d)).length>0){if(!w.isValidElement(p)||Array.isArray(p)&&p.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(d).map(b=>`  - ${b}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(b=>`  - ${b}`).join(`
`)].join(`
`));let x=p.props,g=typeof(x==null?void 0:x.className)=="function"?(...b)=>lb(x==null?void 0:x.className(...b),d.className):lb(x==null?void 0:x.className,d.className),v=g?{className:g}:{};return w.cloneElement(p,Object.assign({},D2(p.props,cb(Ef(d,["ref"]))),f,u,{ref:s(p.ref,u.ref)},v))}return w.createElement(a,Object.assign({},Ef(d,["ref"]),a!==w.Fragment&&u,a!==w.Fragment&&f),p)}function P3(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function D2(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):e[s]=r[s];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(e,{[r](s,...a){let o=n[r];for(let l of o){if((s instanceof Event||(s==null?void 0:s.nativeEvent)instanceof Event)&&s.defaultPrevented)return;l(s,...a)}}});return e}function Wr(t){var e;return Object.assign(w.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function cb(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function Ef(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}let D3="div";var eh=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(eh||{});function O3(t,e){var n;let{features:r=1,...s}=t,a={ref:e,"aria-hidden":(r&2)===2?!0:(n=s["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Ur({ourProps:a,theirProps:s,slot:{},defaultTag:D3,name:"Hidden"})}let cg=Wr(O3),O2=w.createContext(null);O2.displayName="OpenClosedContext";var Nl=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(Nl||{});function M3(){return w.useContext(O2)}function L3(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let Ls=[];L3(()=>{function t(e){e.target instanceof HTMLElement&&e.target!==document.body&&Ls[0]!==e.target&&(Ls.unshift(e.target),Ls=Ls.filter(n=>n!=null&&n.isConnected),Ls.splice(10))}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function A3(t){let e=t.parentElement,n=null;for(;e&&!(e instanceof HTMLFieldSetElement);)e instanceof HTMLLegendElement&&(n=e),e=e.parentElement;let r=(e==null?void 0:e.getAttribute("disabled"))==="";return r&&I3(n)?!1:r}function I3(t){if(!t)return!1;let e=t.previousElementSibling;for(;e!==null;){if(e instanceof HTMLLegendElement)return!1;e=e.previousElementSibling}return!0}var M2=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(M2||{});function L2(t,e,n,r){let s=tp(n);w.useEffect(()=>{t=t??window;function a(o){s.current(o)}return t.addEventListener(e,a,r),()=>t.removeEventListener(e,a,r)},[t,e,r])}function A2(){let t=w.useRef(!1);return hs(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function I2(t){let e=an(t),n=w.useRef(!1);w.useEffect(()=>(n.current=!1,()=>{n.current=!0,np(()=>{n.current&&e()})}),[e])}var kl=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(kl||{});function R3(){let t=w.useRef(0);return T2("keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function R2(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let e=new Set;for(let n of t.current)n.current instanceof HTMLElement&&e.add(n.current);return e}let F3="div";var F2=(t=>(t[t.None=1]="None",t[t.InitialFocus=2]="InitialFocus",t[t.TabLock=4]="TabLock",t[t.FocusLock=8]="FocusLock",t[t.RestoreFocus=16]="RestoreFocus",t[t.All=30]="All",t))(F2||{});function $3(t,e){let n=w.useRef(null),r=xs(n,e),{initialFocus:s,containers:a,features:o=30,...l}=t;sp()||(o=1);let d=Uc(n);U3({ownerDocument:d},!!(o&16));let u=W3({ownerDocument:d,container:n,initialFocus:s},!!(o&2));H3({ownerDocument:d,container:n,containers:a,previousActiveElement:u},!!(o&8));let p=R3(),f=an(b=>{let j=n.current;j&&(_=>_())(()=>{ti(p.current,{[kl.Forwards]:()=>{xu(j,Di.First,{skipElements:[b.relatedTarget]})},[kl.Backwards]:()=>{xu(j,Di.Last,{skipElements:[b.relatedTarget]})}})})}),x=g3(),g=w.useRef(!1),v={ref:r,onKeyDown(b){b.key=="Tab"&&(g.current=!0,x.requestAnimationFrame(()=>{g.current=!1}))},onBlur(b){let j=R2(a);n.current instanceof HTMLElement&&j.add(n.current);let _=b.relatedTarget;_ instanceof HTMLElement&&_.dataset.headlessuiFocusGuard!=="true"&&($2(j,_)||(g.current?xu(n.current,ti(p.current,{[kl.Forwards]:()=>Di.Next,[kl.Backwards]:()=>Di.Previous})|Di.WrapAround,{relativeTo:b.target}):b.target instanceof HTMLElement&&Ui(b.target)))}};return q.createElement(q.Fragment,null,!!(o&4)&&q.createElement(cg,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:eh.Focusable}),Ur({ourProps:v,theirProps:l,defaultTag:F3,name:"FocusTrap"}),!!(o&4)&&q.createElement(cg,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:eh.Focusable}))}let z3=Wr($3),ol=Object.assign(z3,{features:F2});function B3(t=!0){let e=w.useRef(Ls.slice());return qx(([n],[r])=>{r===!0&&n===!1&&np(()=>{e.current.splice(0)}),r===!1&&n===!0&&(e.current=Ls.slice())},[t,Ls,e]),an(()=>{var n;return(n=e.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function U3({ownerDocument:t},e){let n=B3(e);qx(()=>{e||(t==null?void 0:t.activeElement)===(t==null?void 0:t.body)&&Ui(n())},[e]),I2(()=>{e&&Ui(n())})}function W3({ownerDocument:t,container:e,initialFocus:n},r){let s=w.useRef(null),a=A2();return qx(()=>{if(!r)return;let o=e.current;o&&np(()=>{if(!a.current)return;let l=t==null?void 0:t.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===l){s.current=l;return}}else if(o.contains(l)){s.current=l;return}n!=null&&n.current?Ui(n.current):xu(o,Di.First)===S2.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),s.current=t==null?void 0:t.activeElement})},[r]),s}function H3({ownerDocument:t,container:e,containers:n,previousActiveElement:r},s){let a=A2();L2(t==null?void 0:t.defaultView,"focus",o=>{if(!s||!a.current)return;let l=R2(n);e.current instanceof HTMLElement&&l.add(e.current);let d=r.current;if(!d)return;let u=o.target;u&&u instanceof HTMLElement?$2(l,u)?(r.current=u,Ui(u)):(o.preventDefault(),o.stopPropagation(),Ui(d)):Ui(r.current)},!0)}function $2(t,e){for(let n of t)if(n.contains(e))return!0;return!1}let z2=w.createContext(!1);function Y3(){return w.useContext(z2)}function dg(t){return q.createElement(z2.Provider,{value:t.force},t.children)}function V3(t){let e=Y3(),n=w.useContext(B2),r=Uc(t),[s,a]=w.useState(()=>{if(!e&&n!==null||os.isServer)return null;let o=r==null?void 0:r.getElementById("headlessui-portal-root");if(o)return o;if(r===null)return null;let l=r.createElement("div");return l.setAttribute("id","headlessui-portal-root"),r.body.appendChild(l)});return w.useEffect(()=>{s!==null&&(r!=null&&r.body.contains(s)||r==null||r.body.appendChild(s))},[s,r]),w.useEffect(()=>{e||n!==null&&a(n.current)},[n,a,e]),s}let q3=w.Fragment;function Z3(t,e){let n=t,r=w.useRef(null),s=xs(E3(p=>{r.current=p}),e),a=Uc(r),o=V3(r),[l]=w.useState(()=>{var p;return os.isServer?null:(p=a==null?void 0:a.createElement("div"))!=null?p:null}),d=w.useContext(ug),u=sp();return hs(()=>{!o||!l||o.contains(l)||(l.setAttribute("data-headlessui-portal",""),o.appendChild(l))},[o,l]),hs(()=>{if(l&&d)return d.register(l)},[d,l]),I2(()=>{var p;!o||!l||(l instanceof Node&&o.contains(l)&&o.removeChild(l),o.childNodes.length<=0&&((p=o.parentElement)==null||p.removeChild(o)))}),u?!o||!l?null:$c.createPortal(Ur({ourProps:{ref:s},theirProps:n,defaultTag:q3,name:"Portal"}),l):null}let K3=w.Fragment,B2=w.createContext(null);function G3(t,e){let{target:n,...r}=t,s={ref:xs(e)};return q.createElement(B2.Provider,{value:n},Ur({ourProps:s,theirProps:r,defaultTag:K3,name:"Popover.Group"}))}let ug=w.createContext(null);function Q3(){let t=w.useContext(ug),e=w.useRef([]),n=an(a=>(e.current.push(a),t&&t.register(a),()=>r(a))),r=an(a=>{let o=e.current.indexOf(a);o!==-1&&e.current.splice(o,1),t&&t.unregister(a)}),s=w.useMemo(()=>({register:n,unregister:r,portals:e}),[n,r,e]);return[e,w.useMemo(()=>function({children:a}){return q.createElement(ug.Provider,{value:s},a)},[s])]}let X3=Wr(Z3),J3=Wr(G3),hg=Object.assign(X3,{Group:J3});function eO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}const tO=typeof Object.is=="function"?Object.is:eO,{useState:nO,useEffect:rO,useLayoutEffect:sO,useDebugValue:iO}=ro;function aO(t,e,n){const r=e(),[{inst:s},a]=nO({inst:{value:r,getSnapshot:e}});return sO(()=>{s.value=r,s.getSnapshot=e,Tf(s)&&a({inst:s})},[t,r,e]),rO(()=>(Tf(s)&&a({inst:s}),t(()=>{Tf(s)&&a({inst:s})})),[t]),iO(r),r}function Tf(t){const e=t.getSnapshot,n=t.value;try{const r=e();return!tO(n,r)}catch{return!0}}function oO(t,e,n){return e()}const lO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cO=!lO,dO=cO?oO:aO,uO="useSyncExternalStore"in ro?(t=>t.useSyncExternalStore)(ro):dO;function hO(t){return uO(t.subscribe,t.getSnapshot,t.getSnapshot)}function pO(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...a){let o=e[s].call(n,...a);o&&(n=o,r.forEach(l=>l()))}}}function fO(){let t;return{before({doc:e}){var n;let r=e.documentElement;t=((n=e.defaultView)!=null?n:window).innerWidth-r.clientWidth},after({doc:e,d:n}){let r=e.documentElement,s=r.clientWidth-r.offsetWidth,a=t-s;n.style(r,"paddingRight",`${a}px`)}}}function mO(){return E2()?{before({doc:t,d:e,meta:n}){function r(s){return n.containers.flatMap(a=>a()).some(a=>a.contains(s))}e.microTask(()=>{var s;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let l=rp();l.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>l.dispose()))}let a=(s=window.scrollY)!=null?s:window.pageYOffset,o=null;e.addEventListener(t,"click",l=>{if(l.target instanceof HTMLElement)try{let d=l.target.closest("a");if(!d)return;let{hash:u}=new URL(d.href),p=t.querySelector(u);p&&!r(p)&&(o=p)}catch{}},!0),e.addEventListener(t,"touchstart",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let d=l.target;for(;d.parentElement&&r(d.parentElement);)d=d.parentElement;e.style(d,"overscrollBehavior","contain")}else e.style(l.target,"touchAction","none")}),e.addEventListener(t,"touchmove",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let d=l.target;for(;d.parentElement&&d.dataset.headlessuiPortal!==""&&!(d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth);)d=d.parentElement;d.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()},{passive:!1}),e.add(()=>{var l;let d=(l=window.scrollY)!=null?l:window.pageYOffset;a!==d&&window.scrollTo(0,a),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function gO(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function xO(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let Ii=pO(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:rp(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:xO(n)},s=[mO(),fO(),gO()];s.forEach(({before:a})=>a==null?void 0:a(r)),s.forEach(({after:a})=>a==null?void 0:a(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});Ii.subscribe(()=>{let t=Ii.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",s=n.count!==0;(s&&!r||!s&&r)&&Ii.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&Ii.dispatch("TEARDOWN",n)}});function vO(t,e,n){let r=hO(Ii),s=t?r.get(t):void 0,a=s?s.count>0:!1;return hs(()=>{if(!(!t||!e))return Ii.dispatch("PUSH",t,n),()=>Ii.dispatch("POP",t,n)},[e,t]),a}let Pf=new Map,ll=new Map;function db(t,e=!0){hs(()=>{var n;if(!e)return;let r=typeof t=="function"?t():t.current;if(!r)return;function s(){var o;if(!r)return;let l=(o=ll.get(r))!=null?o:1;if(l===1?ll.delete(r):ll.set(r,l-1),l!==1)return;let d=Pf.get(r);d&&(d["aria-hidden"]===null?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden",d["aria-hidden"]),r.inert=d.inert,Pf.delete(r))}let a=(n=ll.get(r))!=null?n:0;return ll.set(r,a+1),a!==0||(Pf.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),r.setAttribute("aria-hidden","true"),r.inert=!0),s},[t,e])}function yO({defaultContainers:t=[],portals:e,mainTreeNodeRef:n}={}){var r;let s=w.useRef((r=n==null?void 0:n.current)!=null?r:null),a=Uc(s),o=an(()=>{var l,d,u;let p=[];for(let f of t)f!==null&&(f instanceof HTMLElement?p.push(f):"current"in f&&f.current instanceof HTMLElement&&p.push(f.current));if(e!=null&&e.current)for(let f of e.current)p.push(f);for(let f of(l=a==null?void 0:a.querySelectorAll("html > *, body > *"))!=null?l:[])f!==document.body&&f!==document.head&&f instanceof HTMLElement&&f.id!=="headlessui-portal-root"&&(f.contains(s.current)||f.contains((u=(d=s.current)==null?void 0:d.getRootNode())==null?void 0:u.host)||p.some(x=>f.contains(x))||p.push(f));return p});return{resolveContainers:o,contains:an(l=>o().some(d=>d.contains(l))),mainTreeNodeRef:s,MainTreeNode:w.useMemo(()=>function(){return n!=null?null:q.createElement(cg,{features:eh.Hidden,ref:s})},[s,n])}}let Zx=w.createContext(()=>{});Zx.displayName="StackContext";var pg=(t=>(t[t.Add=0]="Add",t[t.Remove=1]="Remove",t))(pg||{});function bO(){return w.useContext(Zx)}function _O({children:t,onUpdate:e,type:n,element:r,enabled:s}){let a=bO(),o=an((...l)=>{e==null||e(...l),a(...l)});return hs(()=>{let l=s===void 0||s===!0;return l&&o(0,n,r),()=>{l&&o(1,n,r)}},[o,n,r,s]),q.createElement(Zx.Provider,{value:o},t)}let U2=w.createContext(null);function W2(){let t=w.useContext(U2);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,W2),e}return t}function wO(){let[t,e]=w.useState([]);return[t.length>0?t.join(" "):void 0,w.useMemo(()=>function(n){let r=an(a=>(e(o=>[...o,a]),()=>e(o=>{let l=o.slice(),d=l.indexOf(a);return d!==-1&&l.splice(d,1),l}))),s=w.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props}),[r,n.slot,n.name,n.props]);return q.createElement(U2.Provider,{value:s},n.children)},[e])]}let jO="p";function NO(t,e){let n=Lo(),{id:r=`headlessui-description-${n}`,...s}=t,a=W2(),o=xs(e);hs(()=>a.register(r),[r,a.register]);let l={ref:o,...a.props,id:r};return Ur({ourProps:l,theirProps:s,slot:a.slot||{},defaultTag:jO,name:a.name||"Description"})}let kO=Wr(NO),SO=Object.assign(kO,{});var CO=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(CO||{}),EO=(t=>(t[t.SetTitleId=0]="SetTitleId",t))(EO||{});let TO={0(t,e){return t.titleId===e.id?t:{...t,titleId:e.id}}},th=w.createContext(null);th.displayName="DialogContext";function Wc(t){let e=w.useContext(th);if(e===null){let n=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Wc),n}return e}function PO(t,e,n=()=>[document.body]){vO(t,e,r=>{var s;return{containers:[...(s=r.containers)!=null?s:[],n]}})}function DO(t,e){return ti(e.type,TO,t,e)}let OO="div",MO=lg.RenderStrategy|lg.Static;function LO(t,e){let n=Lo(),{id:r=`headlessui-dialog-${n}`,open:s,onClose:a,initialFocus:o,role:l="dialog",__demoMode:d=!1,...u}=t,[p,f]=w.useState(0),x=w.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(x.current||(x.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let g=M3();s===void 0&&g!==null&&(s=(g&Nl.Open)===Nl.Open);let v=w.useRef(null),b=xs(v,e),j=Uc(v),_=t.hasOwnProperty("open")||g!==null,N=t.hasOwnProperty("onClose");if(!_&&!N)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!_)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!N)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof s!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${s}`);if(typeof a!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${a}`);let S=s?0:1,[P,M]=w.useReducer(DO,{titleId:null,descriptionId:null,panelRef:w.createRef()}),R=an(()=>a(!1)),A=an(fe=>M({type:0,id:fe})),T=sp()?d?!1:S===0:!1,Y=p>1,O=w.useContext(th)!==null,[H,te]=Q3(),G={get current(){var fe;return(fe=P.panelRef.current)!=null?fe:v.current}},{resolveContainers:B,mainTreeNodeRef:Z,MainTreeNode:C}=yO({portals:H,defaultContainers:[G]}),V=Y?"parent":"leaf",I=g!==null?(g&Nl.Closing)===Nl.Closing:!1,X=O||I?!1:T,E=w.useCallback(()=>{var fe,Ne;return(Ne=Array.from((fe=j==null?void 0:j.querySelectorAll("body > *"))!=null?fe:[]).find(Ce=>Ce.id==="headlessui-portal-root"?!1:Ce.contains(Z.current)&&Ce instanceof HTMLElement))!=null?Ne:null},[Z]);db(E,X);let K=Y?!0:T,re=w.useCallback(()=>{var fe,Ne;return(Ne=Array.from((fe=j==null?void 0:j.querySelectorAll("[data-headlessui-portal]"))!=null?fe:[]).find(Ce=>Ce.contains(Z.current)&&Ce instanceof HTMLElement))!=null?Ne:null},[Z]);db(re,K),C3(B,fe=>{fe.preventDefault(),R()},!(!T||Y));let ie=!(Y||S!==0);L2(j==null?void 0:j.defaultView,"keydown",fe=>{ie&&(fe.defaultPrevented||fe.key===M2.Escape&&(fe.preventDefault(),fe.stopPropagation(),R()))}),PO(j,!(I||S!==0||O),B),w.useEffect(()=>{if(S!==0||!v.current)return;let fe=new ResizeObserver(Ne=>{for(let Ce of Ne){let ct=Ce.target.getBoundingClientRect();ct.x===0&&ct.y===0&&ct.width===0&&ct.height===0&&R()}});return fe.observe(v.current),()=>fe.disconnect()},[S,v,R]);let[ae,se]=wO(),ue=w.useMemo(()=>[{dialogState:S,close:R,setTitleId:A},P],[S,P,R,A]),U=w.useMemo(()=>({open:S===0}),[S]),oe={ref:b,id:r,role:l,"aria-modal":S===0?!0:void 0,"aria-labelledby":P.titleId,"aria-describedby":ae};return q.createElement(_O,{type:"Dialog",enabled:S===0,element:v,onUpdate:an((fe,Ne)=>{Ne==="Dialog"&&ti(fe,{[pg.Add]:()=>f(Ce=>Ce+1),[pg.Remove]:()=>f(Ce=>Ce-1)})})},q.createElement(dg,{force:!0},q.createElement(hg,null,q.createElement(th.Provider,{value:ue},q.createElement(hg.Group,{target:v},q.createElement(dg,{force:!1},q.createElement(se,{slot:U,name:"Dialog.Description"},q.createElement(ol,{initialFocus:o,containers:B,features:T?ti(V,{parent:ol.features.RestoreFocus,leaf:ol.features.All&~ol.features.FocusLock}):ol.features.None},q.createElement(te,null,Ur({ourProps:oe,theirProps:u,slot:U,defaultTag:OO,features:MO,visible:S===0,name:"Dialog"}))))))))),q.createElement(C,null))}let AO="div";function IO(t,e){let n=Lo(),{id:r=`headlessui-dialog-overlay-${n}`,...s}=t,[{dialogState:a,close:o}]=Wc("Dialog.Overlay"),l=xs(e),d=an(p=>{if(p.target===p.currentTarget){if(A3(p.currentTarget))return p.preventDefault();p.preventDefault(),p.stopPropagation(),o()}}),u=w.useMemo(()=>({open:a===0}),[a]);return Ur({ourProps:{ref:l,id:r,"aria-hidden":!0,onClick:d},theirProps:s,slot:u,defaultTag:AO,name:"Dialog.Overlay"})}let RO="div";function FO(t,e){let n=Lo(),{id:r=`headlessui-dialog-backdrop-${n}`,...s}=t,[{dialogState:a},o]=Wc("Dialog.Backdrop"),l=xs(e);w.useEffect(()=>{if(o.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[o.panelRef]);let d=w.useMemo(()=>({open:a===0}),[a]);return q.createElement(dg,{force:!0},q.createElement(hg,null,Ur({ourProps:{ref:l,id:r,"aria-hidden":!0},theirProps:s,slot:d,defaultTag:RO,name:"Dialog.Backdrop"})))}let $O="div";function zO(t,e){let n=Lo(),{id:r=`headlessui-dialog-panel-${n}`,...s}=t,[{dialogState:a},o]=Wc("Dialog.Panel"),l=xs(e,o.panelRef),d=w.useMemo(()=>({open:a===0}),[a]),u=an(p=>{p.stopPropagation()});return Ur({ourProps:{ref:l,id:r,onClick:u},theirProps:s,slot:d,defaultTag:$O,name:"Dialog.Panel"})}let BO="h2";function UO(t,e){let n=Lo(),{id:r=`headlessui-dialog-title-${n}`,...s}=t,[{dialogState:a,setTitleId:o}]=Wc("Dialog.Title"),l=xs(e);w.useEffect(()=>(o(r),()=>o(null)),[r,o]);let d=w.useMemo(()=>({open:a===0}),[a]);return Ur({ourProps:{ref:l,id:r},theirProps:s,slot:d,defaultTag:BO,name:"Dialog.Title"})}let WO=Wr(LO),HO=Wr(FO),YO=Wr(zO),VO=Wr(IO),qO=Wr(UO),be=Object.assign(WO,{Backdrop:HO,Panel:YO,Overlay:VO,Title:qO,Description:SO});function Rn({filters:t,onFilterChange:e}){const n=(s,a)=>{e({...t,[s]:a})},r=(s,a)=>{switch(a.type){case"text":return i.jsx("input",{type:"text",value:t[s]||"",onChange:o=>n(s,o.target.value),placeholder:a.placeholder,className:"w-full border rounded-md px-3 py-2"});case"select":return i.jsxs("select",{value:t[s]||"",onChange:o=>n(s,o.target.value),className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"",children:a.placeholder}),a.options.map(o=>i.jsx("option",{value:o.value,children:o.label},o.value))]});case"number":return i.jsx("input",{type:"number",value:t[s]||"",onChange:o=>n(s,o.target.value),placeholder:a.placeholder,min:a.min,max:a.max,step:a.step,className:"w-full border rounded-md px-3 py-2"});case"date":return i.jsx("input",{type:"date",value:t[s]||"",onChange:o=>n(s,o.target.value),className:"w-full border rounded-md px-3 py-2"});case"dateRange":return i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"date",value:t[`${s}Start`]||"",onChange:o=>n(`${s}Start`,o.target.value),className:"w-full border rounded-md px-3 py-2"}),i.jsx("input",{type:"date",value:t[`${s}End`]||"",onChange:o=>n(`${s}End`,o.target.value),className:"w-full border rounded-md px-3 py-2"})]});default:return null}};return i.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6",children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Object.entries(t).map(([s,a])=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a.label}),r(s,a)]},s))})})}function Fn(t={},e=[]){const[n,r]=w.useState(t),s=w.useCallback(l=>l.filter(d=>Object.entries(n).every(([u,p])=>{if(!p.value&&p.value!==0)return!0;switch(p.type){case"text":const f=String(d[u]||""),x=String(p.value||"");return f.toLowerCase().includes(x.toLowerCase());case"select":return p.value===""||d[u]===p.value;case"number":return d[u]===Number(p.value);case"date":return new Date(d[u]).toISOString().split("T")[0]===p.value;case"dateRange":const v=new Date(d[u]),b=p.value.start?new Date(p.value.start):null,j=p.value.end?new Date(p.value.end):null;return b&&j?v>=b&&v<=j:b?v>=b:j?v<=j:!0;default:return!0}})),[n]),a=w.useCallback(l=>{r(d=>({...d,...Object.fromEntries(Object.entries(l).map(([u,p])=>[u,{...d[u],value:p}]))}))},[]),o=w.useCallback(()=>{r(t)},[t]);return{filters:n,filterData:s,handleFilterChange:a,resetFilters:o}}var H2={exports:{}},ZO="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",KO=ZO,GO=KO;function Y2(){}function V2(){}V2.resetWarningCache=Y2;var QO=function(){function t(r,s,a,o,l,d){if(d!==GO){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:V2,resetWarningCache:Y2};return n.PropTypes=n,n};H2.exports=QO();var XO=H2.exports;const Ge=ms(XO);function la(t,e,n,r){function s(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(p){try{u(r.next(p))}catch(f){o(f)}}function d(p){try{u(r.throw(p))}catch(f){o(f)}}function u(p){p.done?a(p.value):s(p.value).then(l,d)}u((r=r.apply(t,e||[])).next())})}const JO=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function po(t,e,n){const r=eM(t),{webkitRelativePath:s}=t,a=typeof e=="string"?e:typeof s=="string"&&s.length>0?s:`./${t.name}`;return typeof r.path!="string"&&ub(r,"path",a),ub(r,"relativePath",a),r}function eM(t){const{name:e}=t;if(e&&e.lastIndexOf(".")!==-1&&!t.type){const r=e.split(".").pop().toLowerCase(),s=JO.get(r);s&&Object.defineProperty(t,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return t}function ub(t,e,n){Object.defineProperty(t,e,{value:n,writable:!1,configurable:!1,enumerable:!0})}const tM=[".DS_Store","Thumbs.db"];function nM(t){return la(this,void 0,void 0,function*(){return nh(t)&&rM(t.dataTransfer)?oM(t.dataTransfer,t.type):sM(t)?iM(t):Array.isArray(t)&&t.every(e=>"getFile"in e&&typeof e.getFile=="function")?aM(t):[]})}function rM(t){return nh(t)}function sM(t){return nh(t)&&nh(t.target)}function nh(t){return typeof t=="object"&&t!==null}function iM(t){return fg(t.target.files).map(e=>po(e))}function aM(t){return la(this,void 0,void 0,function*(){return(yield Promise.all(t.map(n=>n.getFile()))).map(n=>po(n))})}function oM(t,e){return la(this,void 0,void 0,function*(){if(t.items){const n=fg(t.items).filter(s=>s.kind==="file");if(e!=="drop")return n;const r=yield Promise.all(n.map(lM));return hb(q2(r))}return hb(fg(t.files).map(n=>po(n)))})}function hb(t){return t.filter(e=>tM.indexOf(e.name)===-1)}function fg(t){if(t===null)return[];const e=[];for(let n=0;n<t.length;n++){const r=t[n];e.push(r)}return e}function lM(t){if(typeof t.webkitGetAsEntry!="function")return pb(t);const e=t.webkitGetAsEntry();return e&&e.isDirectory?Z2(e):pb(t,e)}function q2(t){return t.reduce((e,n)=>[...e,...Array.isArray(n)?q2(n):[n]],[])}function pb(t,e){return la(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof t.getAsFileSystemHandle=="function"){const a=yield t.getAsFileSystemHandle();if(a===null)throw new Error(`${t} is not a File`);if(a!==void 0){const o=yield a.getFile();return o.handle=a,po(o)}}const r=t.getAsFile();if(!r)throw new Error(`${t} is not a File`);return po(r,(n=e==null?void 0:e.fullPath)!==null&&n!==void 0?n:void 0)})}function cM(t){return la(this,void 0,void 0,function*(){return t.isDirectory?Z2(t):dM(t)})}function Z2(t){const e=t.createReader();return new Promise((n,r)=>{const s=[];function a(){e.readEntries(o=>la(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(cM));s.push(l),a()}else try{const l=yield Promise.all(s);n(l)}catch(l){r(l)}}),o=>{r(o)})}a()})}function dM(t){return la(this,void 0,void 0,function*(){return new Promise((e,n)=>{t.file(r=>{const s=po(r,t.fullPath);e(s)},r=>{n(r)})})})}var Df=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(",");if(n.length===0)return!0;var r=t.name||"",s=(t.type||"").toLowerCase(),a=s.replace(/\/.*$/,"");return n.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?r.toLowerCase().endsWith(l):l.endsWith("/*")?a===l.replace(/\/.*$/,""):s===l})}return!0};function fb(t){return pM(t)||hM(t)||G2(t)||uM()}function uM(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hM(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pM(t){if(Array.isArray(t))return mg(t)}function mb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function gb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mb(Object(n),!0).forEach(function(r){K2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function K2(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _c(t,e){return gM(t)||mM(t,e)||G2(t,e)||fM()}function fM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G2(t,e){if(t){if(typeof t=="string")return mg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mg(t,e)}}function mg(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mM(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],s=!0,a=!1,o,l;try{for(n=n.call(t);!(s=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));s=!0);}catch(d){a=!0,l=d}finally{try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}return r}}function gM(t){if(Array.isArray(t))return t}var xM=typeof Df=="function"?Df:Df.default,vM="file-invalid-type",yM="file-too-large",bM="file-too-small",_M="too-many-files",wM=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=e.split(","),r=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:vM,message:"File type must be ".concat(r)}},xb=function(e){return{code:yM,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},vb=function(e){return{code:bM,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},jM={code:_M,message:"Too many files"};function Q2(t,e){var n=t.type==="application/x-moz-file"||xM(t,e);return[n,n?null:wM(e)]}function X2(t,e,n){if(Oi(t.size))if(Oi(e)&&Oi(n)){if(t.size>n)return[!1,xb(n)];if(t.size<e)return[!1,vb(e)]}else{if(Oi(e)&&t.size<e)return[!1,vb(e)];if(Oi(n)&&t.size>n)return[!1,xb(n)]}return[!0,null]}function Oi(t){return t!=null}function NM(t){var e=t.files,n=t.accept,r=t.minSize,s=t.maxSize,a=t.multiple,o=t.maxFiles,l=t.validator;return!a&&e.length>1||a&&o>=1&&e.length>o?!1:e.every(function(d){var u=Q2(d,n),p=_c(u,1),f=p[0],x=X2(d,r,s),g=_c(x,1),v=g[0],b=l?l(d):null;return f&&v&&!b})}function rh(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function Rd(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function yb(t){t.preventDefault()}function kM(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function SM(t){return t.indexOf("Edge/")!==-1}function CM(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return kM(t)||SM(t)}function wr(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];return e.some(function(l){return!rh(r)&&l&&l.apply(void 0,[r].concat(a)),rh(r)})}}function EM(){return"showOpenFilePicker"in window}function TM(t){if(Oi(t)){var e=Object.entries(t).filter(function(n){var r=_c(n,2),s=r[0],a=r[1],o=!0;return J2(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(a)||!a.every(eN))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(n,r){var s=_c(r,2),a=s[0],o=s[1];return gb(gb({},n),{},K2({},a,o))},{});return[{description:"Files",accept:e}]}return t}function PM(t){if(Oi(t))return Object.entries(t).reduce(function(e,n){var r=_c(n,2),s=r[0],a=r[1];return[].concat(fb(e),[s],fb(a))},[]).filter(function(e){return J2(e)||eN(e)}).join(",")}function DM(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function OM(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}function J2(t){return t==="audio/*"||t==="video/*"||t==="image/*"||t==="text/*"||t==="application/*"||/\w+\/[-+.\w]+/g.test(t)}function eN(t){return/^.*\.[\w]+$/.test(t)}var MM=["children"],LM=["open"],AM=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],IM=["refKey","onChange","onClick"];function RM(t){return zM(t)||$M(t)||tN(t)||FM()}function FM(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $M(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zM(t){if(Array.isArray(t))return gg(t)}function Of(t,e){return WM(t)||UM(t,e)||tN(t,e)||BM()}function BM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tN(t,e){if(t){if(typeof t=="string")return gg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gg(t,e)}}function gg(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function UM(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],s=!0,a=!1,o,l;try{for(n=n.call(t);!(s=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));s=!0);}catch(d){a=!0,l=d}finally{try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}return r}}function WM(t){if(Array.isArray(t))return t}function bb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function ut(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bb(Object(n),!0).forEach(function(r){xg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sh(t,e){if(t==null)return{};var n=HM(t,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function HM(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}var Kx=w.forwardRef(function(t,e){var n=t.children,r=sh(t,MM),s=rN(r),a=s.open,o=sh(s,LM);return w.useImperativeHandle(e,function(){return{open:a}},[a]),q.createElement(w.Fragment,null,n(ut(ut({},o),{},{open:a})))});Kx.displayName="Dropzone";var nN={disabled:!1,getFilesFromEvent:nM,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Kx.defaultProps=nN;Kx.propTypes={children:Ge.func,accept:Ge.objectOf(Ge.arrayOf(Ge.string)),multiple:Ge.bool,preventDropOnDocument:Ge.bool,noClick:Ge.bool,noKeyboard:Ge.bool,noDrag:Ge.bool,noDragEventsBubbling:Ge.bool,minSize:Ge.number,maxSize:Ge.number,maxFiles:Ge.number,disabled:Ge.bool,getFilesFromEvent:Ge.func,onFileDialogCancel:Ge.func,onFileDialogOpen:Ge.func,useFsAccessApi:Ge.bool,autoFocus:Ge.bool,onDragEnter:Ge.func,onDragLeave:Ge.func,onDragOver:Ge.func,onDrop:Ge.func,onDropAccepted:Ge.func,onDropRejected:Ge.func,onError:Ge.func,validator:Ge.func};var vg={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function rN(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=ut(ut({},nN),t),n=e.accept,r=e.disabled,s=e.getFilesFromEvent,a=e.maxSize,o=e.minSize,l=e.multiple,d=e.maxFiles,u=e.onDragEnter,p=e.onDragLeave,f=e.onDragOver,x=e.onDrop,g=e.onDropAccepted,v=e.onDropRejected,b=e.onFileDialogCancel,j=e.onFileDialogOpen,_=e.useFsAccessApi,N=e.autoFocus,S=e.preventDropOnDocument,P=e.noClick,M=e.noKeyboard,R=e.noDrag,A=e.noDragEventsBubbling,T=e.onError,Y=e.validator,O=w.useMemo(function(){return PM(n)},[n]),H=w.useMemo(function(){return TM(n)},[n]),te=w.useMemo(function(){return typeof j=="function"?j:_b},[j]),G=w.useMemo(function(){return typeof b=="function"?b:_b},[b]),B=w.useRef(null),Z=w.useRef(null),C=w.useReducer(YM,vg),V=Of(C,2),I=V[0],X=V[1],E=I.isFocused,K=I.isFileDialogActive,re=w.useRef(typeof window<"u"&&window.isSecureContext&&_&&EM()),Q=function(){!re.current&&K&&setTimeout(function(){if(Z.current){var we=Z.current.files;we.length||(X({type:"closeDialog"}),G())}},300)};w.useEffect(function(){return window.addEventListener("focus",Q,!1),function(){window.removeEventListener("focus",Q,!1)}},[Z,K,G,re]);var ie=w.useRef([]),le=function(we){B.current&&B.current.contains(we.target)||(we.preventDefault(),ie.current=[])};w.useEffect(function(){return S&&(document.addEventListener("dragover",yb,!1),document.addEventListener("drop",le,!1)),function(){S&&(document.removeEventListener("dragover",yb),document.removeEventListener("drop",le))}},[B,S]),w.useEffect(function(){return!r&&N&&B.current&&B.current.focus(),function(){}},[B,N,r]);var ae=w.useCallback(function(he){T?T(he):console.error(he)},[T]),se=w.useCallback(function(he){he.preventDefault(),he.persist(),vt(he),ie.current=[].concat(RM(ie.current),[he.target]),Rd(he)&&Promise.resolve(s(he)).then(function(we){if(!(rh(he)&&!A)){var Ke=we.length,at=Ke>0&&NM({files:we,accept:O,minSize:o,maxSize:a,multiple:l,maxFiles:d,validator:Y}),Et=Ke>0&&!at;X({isDragAccept:at,isDragReject:Et,isDragActive:!0,type:"setDraggedFiles"}),u&&u(he)}}).catch(function(we){return ae(we)})},[s,u,ae,A,O,o,a,l,d,Y]),ue=w.useCallback(function(he){he.preventDefault(),he.persist(),vt(he);var we=Rd(he);if(we&&he.dataTransfer)try{he.dataTransfer.dropEffect="copy"}catch{}return we&&f&&f(he),!1},[f,A]),U=w.useCallback(function(he){he.preventDefault(),he.persist(),vt(he);var we=ie.current.filter(function(at){return B.current&&B.current.contains(at)}),Ke=we.indexOf(he.target);Ke!==-1&&we.splice(Ke,1),ie.current=we,!(we.length>0)&&(X({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Rd(he)&&p&&p(he))},[B,p,A]),oe=w.useCallback(function(he,we){var Ke=[],at=[];he.forEach(function(Et){var pi=Q2(Et,O),Hr=Of(pi,2),ha=Hr[0],Ro=Hr[1],pa=X2(Et,o,a),vs=Of(pa,2),fa=vs[0],Fo=vs[1],Yr=Y?Y(Et):null;if(ha&&fa&&!Yr)Ke.push(Et);else{var $o=[Ro,Fo];Yr&&($o=$o.concat(Yr)),at.push({file:Et,errors:$o.filter(function(mp){return mp})})}}),(!l&&Ke.length>1||l&&d>=1&&Ke.length>d)&&(Ke.forEach(function(Et){at.push({file:Et,errors:[jM]})}),Ke.splice(0)),X({acceptedFiles:Ke,fileRejections:at,isDragReject:at.length>0,type:"setFiles"}),x&&x(Ke,at,we),at.length>0&&v&&v(at,we),Ke.length>0&&g&&g(Ke,we)},[X,l,O,o,a,d,x,g,v,Y]),fe=w.useCallback(function(he){he.preventDefault(),he.persist(),vt(he),ie.current=[],Rd(he)&&Promise.resolve(s(he)).then(function(we){rh(he)&&!A||oe(we,he)}).catch(function(we){return ae(we)}),X({type:"reset"})},[s,oe,ae,A]),Ne=w.useCallback(function(){if(re.current){X({type:"openDialog"}),te();var he={multiple:l,types:H};window.showOpenFilePicker(he).then(function(we){return s(we)}).then(function(we){oe(we,null),X({type:"closeDialog"})}).catch(function(we){DM(we)?(G(we),X({type:"closeDialog"})):OM(we)?(re.current=!1,Z.current?(Z.current.value=null,Z.current.click()):ae(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):ae(we)});return}Z.current&&(X({type:"openDialog"}),te(),Z.current.value=null,Z.current.click())},[X,te,G,_,oe,ae,H,l]),Ce=w.useCallback(function(he){!B.current||!B.current.isEqualNode(he.target)||(he.key===" "||he.key==="Enter"||he.keyCode===32||he.keyCode===13)&&(he.preventDefault(),Ne())},[B,Ne]),ct=w.useCallback(function(){X({type:"focus"})},[]),Gt=w.useCallback(function(){X({type:"blur"})},[]),Qt=w.useCallback(function(){P||(CM()?setTimeout(Ne,0):Ne())},[P,Ne]),Dt=function(we){return r?null:we},Wt=function(we){return M?null:Dt(we)},Xt=function(we){return R?null:Dt(we)},vt=function(we){A&&we.stopPropagation()},En=w.useMemo(function(){return function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},we=he.refKey,Ke=we===void 0?"ref":we,at=he.role,Et=he.onKeyDown,pi=he.onFocus,Hr=he.onBlur,ha=he.onClick,Ro=he.onDragEnter,pa=he.onDragOver,vs=he.onDragLeave,fa=he.onDrop,Fo=sh(he,AM);return ut(ut(xg({onKeyDown:Wt(wr(Et,Ce)),onFocus:Wt(wr(pi,ct)),onBlur:Wt(wr(Hr,Gt)),onClick:Dt(wr(ha,Qt)),onDragEnter:Xt(wr(Ro,se)),onDragOver:Xt(wr(pa,ue)),onDragLeave:Xt(wr(vs,U)),onDrop:Xt(wr(fa,fe)),role:typeof at=="string"&&at!==""?at:"presentation"},Ke,B),!r&&!M?{tabIndex:0}:{}),Fo)}},[B,Ce,ct,Gt,Qt,se,ue,U,fe,M,R,r]),ui=w.useCallback(function(he){he.stopPropagation()},[]),hi=w.useMemo(function(){return function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},we=he.refKey,Ke=we===void 0?"ref":we,at=he.onChange,Et=he.onClick,pi=sh(he,IM),Hr=xg({accept:O,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Dt(wr(at,fe)),onClick:Dt(wr(Et,ui)),tabIndex:-1},Ke,Z);return ut(ut({},Hr),pi)}},[Z,n,l,fe,r]);return ut(ut({},I),{},{isFocused:E&&!r,getRootProps:En,getInputProps:hi,rootRef:B,inputRef:Z,open:Dt(Ne)})}function YM(t,e){switch(e.type){case"focus":return ut(ut({},t),{},{isFocused:!0});case"blur":return ut(ut({},t),{},{isFocused:!1});case"openDialog":return ut(ut({},vg),{},{isFileDialogActive:!0});case"closeDialog":return ut(ut({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":return ut(ut({},t),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return ut(ut({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return ut({},vg);default:return t}}function _b(){}const Lt={PRODUCTS:"products",VENDORS:"vendors",PROFILES:"profiles",ADVERTISEMENTS:"advertisements",GENERAL:"general"},VM=async(t,e=Lt.GENERAL,n="")=>{try{const r=t.name.split(".").pop(),s=`${Math.random().toString(36).substring(2,15)}_${Date.now()}.${r}`,a=n?`${n}/${s}`:s,{data:o,error:l}=await ee.storage.from(e).upload(a,t,{cacheControl:"3600",upsert:!1});if(l)throw l;const{data:{publicUrl:d}}=ee.storage.from(e).getPublicUrl(a);return{path:o.path,url:d}}catch(r){throw console.error("Error uploading file:",r),r}};function ps({onUpload:t,type:e="image",accept:n,maxSize:r=5242880,preview:s=null,bucket:a=Lt.GENERAL,folder:o="",storeInSupabase:l=!0}){const[d,u]=w.useState(s),[p,f]=w.useState(null),[x,g]=w.useState(!1);w.useEffect(()=>{u(s)},[s]);const v={image:{"image/*":[".jpg",".jpeg",".png",".gif",".webp"]},video:{"video/*":[".mp4",".webm"]}},b=w.useCallback(async R=>{f(null);const A=R[0];if(A){g(!0);try{if(l){const{url:T,path:Y}=await VM(A,a,o);u(T),t({file:A,preview:T,path:Y,bucket:a,isSupabaseFile:!0})}else z.error("يجب تفعيل storeInSupabase لتخزين الصورة")}catch(T){console.error("Error uploading to Supabase:",T),z.error("فشل رفع الملف إلى Supabase"),f("فشل رفع الملف"),t({file:null,preview:null,isSupabaseFile:!1})}g(!1)}},[t,a,o,l]),{getRootProps:j,getInputProps:_,isDragActive:N}=rN({onDrop:b,accept:n||v[e],maxSize:r,multiple:!1,onDropRejected:R=>{var T,Y;const A=(Y=(T=R[0])==null?void 0:T.errors[0])==null?void 0:Y.code;f(A==="file-too-large"?`حجم الملف كبير جدًا. الحد الأقصى هو ${Math.round(r/1024/1024)} ميجابايت`:A==="file-invalid-type"?"نوع الملف غير مدعوم":"الملف غير صالح")}}),S=()=>{u(null),t({file:null,preview:null})},P=R=>{f("فشل في تحميل الصورة"),R.target.onerror=null,R.target.src="https://placehold.co/200x200/e2e8f0/64748b?text=Image+Not+Found"},M=R=>{f("فشل في تحميل الفيديو"),R.target.onerror=null;const A=R.target.parentNode;A&&(A.innerHTML='<div class="h-48 flex items-center justify-center bg-gray-200 text-gray-500">فشل تحميل الفيديو</div>')};return i.jsxs("div",{className:"space-y-2",children:[p&&i.jsx("div",{className:"text-red-500 text-sm",children:p}),i.jsxs("div",{...j(),className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors ${N?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-blue-500"} ${x?"opacity-70 pointer-events-none":""}`,children:[i.jsx("input",{..._(),disabled:x}),d?i.jsxs("div",{className:"relative",children:[e==="image"?i.jsx("img",{src:d,alt:"Preview",className:"max-h-48 mx-auto rounded",onError:P}):i.jsx("video",{src:d,className:"max-h-48 mx-auto rounded",controls:!0,onError:M}),i.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:i.jsxs("p",{className:"text-white",children:["تغيير ",e==="image"?"الصورة":"الفيديو"]})})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),i.jsx("div",{className:"text-sm text-gray-600",children:x?i.jsx("p",{children:"جاري رفع الملف..."}):N?i.jsx("p",{children:"أفلت الملف هنا ..."}):i.jsxs(i.Fragment,{children:[i.jsxs("p",{children:["اسحب وأفلت ",e==="image"?"الصورة":"الفيديو"," هنا، أو"]}),i.jsx("p",{className:"text-blue-600",children:"اضغط للاختيار"})]})}),i.jsxs("p",{className:"text-xs text-gray-500",children:[e==="image"?"PNG, JPG, GIF, WEBP":"MP4, WebM"," حتى ",Math.round(r/1024/1024)," ميجابايت"]})]})]}),d&&i.jsx("div",{className:"flex justify-center",children:i.jsxs("button",{onClick:S,className:"text-red-600 hover:text-red-800 text-sm",children:["إزالة ",e==="image"?"الصورة":"الفيديو"]})}),l&&i.jsx("p",{className:"text-xs text-gray-500 text-center",children:"سيتم تخزين الملف في Supabase Storage"})]})}let Fd;const qM=new Uint8Array(16);function ZM(){if(!Fd&&(Fd=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Fd))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Fd(qM)}const Yt=[];for(let t=0;t<256;++t)Yt.push((t+256).toString(16).slice(1));function KM(t,e=0){return Yt[t[e+0]]+Yt[t[e+1]]+Yt[t[e+2]]+Yt[t[e+3]]+"-"+Yt[t[e+4]]+Yt[t[e+5]]+"-"+Yt[t[e+6]]+Yt[t[e+7]]+"-"+Yt[t[e+8]]+Yt[t[e+9]]+"-"+Yt[t[e+10]]+Yt[t[e+11]]+Yt[t[e+12]]+Yt[t[e+13]]+Yt[t[e+14]]+Yt[t[e+15]]}const GM=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),wb={randomUUID:GM};function zr(t,e,n){if(wb.randomUUID&&!t)return wb.randomUUID();t=t||{};const r=t.random||(t.rng||ZM)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,KM(r)}function QM({images:t=[],onUpdate:e}){const[n,r]=w.useState(null),s=({base64:o,preview:l,file:d})=>{r(null);try{e([...t,{id:zr(),file:o,preview:l,name:d.name,size:d.size,type:d.type,isNew:!0}])}catch(u){r("فشل في إضافة الصورة"),console.error("Error adding image:",u)}},a=o=>{e(t.filter(l=>l.id!==o))};return i.jsxs("div",{className:"space-y-4",children:[n&&i.jsx("div",{className:"text-red-500 text-sm",children:n}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:t.map(o=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:o.preview||o.url,alt:o.name||"Gallery image",className:"w-full h-32 object-cover rounded-lg",onError:l=>{l.target.onerror=null,l.target.src="https://via.placeholder.com/150?text=Image+Error"}}),i.jsx("button",{onClick:()=>a(o.id),className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]},o.id))}),i.jsx(ps,{onUpload:s,type:"image",accept:{"image/*":[".jpg",".jpeg",".png",".gif",".webp"]},maxSize:2*1024*1024}),i.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"يمكنك إضافة حتى 10 صور للمنتج. الحد الأقصى لحجم الصورة 2 ميجابايت."})]})}function XM({prices:t=[],onChange:e}){const[n]=w.useState([{id:1,name:"برونزي"},{id:2,name:"فضي"},{id:3,name:"ذهبي"},{id:4,name:"بلاتيني"}]),[r,s]=w.useState({tier_id:"",price:"",min_quantity:1}),a=()=>{if(!r.tier_id||!r.price){z.error("الرجاء إدخال المستوى والسعر");return}const u={id:zr(),...r};e([...t,u]),s({tier_id:"",price:"",min_quantity:1})},o=u=>{e(t.filter(p=>p.id!==u))},l=(u,p,f)=>{e(t.map(x=>x.id===u?{...x,[p]:f}:x))},d=u=>{const p=n.find(f=>f.id===Number(u));switch(p==null?void 0:p.name){case"برونزي":return"bg-amber-100 text-amber-800";case"فضي":return"bg-gray-100 text-gray-800";case"ذهبي":return"bg-yellow-100 text-yellow-800";case"بلاتيني":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"أسعار الجملة"}),t.length>0?i.jsx("div",{className:"space-y-4",children:t.map(u=>i.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المستوى"}),i.jsxs("select",{value:u.tier_id,onChange:p=>l(u.id,"tier_id",Number(p.target.value)),className:`w-full border rounded-md px-3 py-1.5 ${d(u.tier_id)}`,children:[i.jsx("option",{value:"",children:"اختر المستوى"}),n.map(p=>i.jsx("option",{value:p.id,children:p.name},p.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعر (₪)"}),i.jsx("input",{type:"number",value:u.price,onChange:p=>l(u.id,"price",parseFloat(p.target.value)),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحد الأدنى للكمية"}),i.jsx("input",{type:"number",value:u.min_quantity,onChange:p=>l(u.id,"min_quantity",parseInt(p.target.value)),className:"w-full border rounded-md px-3 py-1.5",min:"1"})]})]}),i.jsx("button",{type:"button",onClick:()=>o(u.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]},u.id))}):i.jsx("p",{className:"text-gray-500 text-center py-4",children:"لا توجد أسعار جملة"})]}),i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"إضافة سعر جديد"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المستوى"}),i.jsxs("select",{value:r.tier_id,onChange:u=>s({...r,tier_id:Number(u.target.value)}),className:`w-full border rounded-md px-3 py-1.5 ${d(r.tier_id)}`,children:[i.jsx("option",{value:"",children:"اختر المستوى"}),n.map(u=>i.jsx("option",{value:u.id,children:u.name},u.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعر (₪)"}),i.jsx("input",{type:"number",value:r.price,onChange:u=>s({...r,price:parseFloat(u.target.value)}),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحد الأدنى للكمية"}),i.jsx("input",{type:"number",value:r.min_quantity,onChange:u=>s({...r,min_quantity:parseInt(u.target.value)}),className:"w-full border rounded-md px-3 py-1.5",min:"1"})]})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{type:"button",onClick:a,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"إضافة السعر"})})]})]})}function JM({variants:t=[],onChange:e}){const[n,r]=w.useState({name:"",price:0,wholesale_price:0,discount_price:0,stock:0,image:"",sku:""}),s=()=>{if(!n.name){z.error("الرجاء إدخال اسم النوع");return}const l={id:zr(),...n};e([...t,l]),r({name:"",price:0,wholesale_price:0,discount_price:0,stock:0,image:"",sku:""})},a=l=>{e(t.filter(d=>d.id!==l))},o=(l,d,u)=>{e(t.map(p=>p.id===l?{...p,[d]:u}:p))};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"الأنواع المتوفرة"}),t.length>0?i.jsx("div",{className:"space-y-4",children:t.map(l=>i.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم النوع"}),i.jsx("input",{type:"text",value:l.name,onChange:d=>o(l.id,"name",d.target.value),className:"w-full border rounded-md px-3 py-1.5"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعر (₪)"}),i.jsx("input",{type:"number",value:l.price,onChange:d=>o(l.id,"price",parseFloat(d.target.value)),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"سعر الجملة (₪)"}),i.jsx("input",{type:"number",value:l.wholesale_price,onChange:d=>o(l.id,"wholesale_price",parseFloat(d.target.value)),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"سعر التخفيض (₪)"}),i.jsx("input",{type:"number",value:l.discount_price,onChange:d=>o(l.id,"discount_price",parseFloat(d.target.value)),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المخزون"}),i.jsx("input",{type:"number",value:l.stock,onChange:d=>o(l.id,"stock",parseInt(d.target.value)),className:"w-full border rounded-md px-3 py-1.5",min:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم المنتج (SKU)"}),i.jsx("input",{type:"text",value:l.sku,onChange:d=>o(l.id,"sku",d.target.value),className:"w-full border rounded-md px-3 py-1.5"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رابط الصورة"}),i.jsx("input",{type:"url",value:l.image,onChange:d=>o(l.id,"image",d.target.value),className:"w-full border rounded-md px-3 py-1.5",placeholder:"https://example.com/image.jpg"})]})]}),i.jsx("button",{type:"button",onClick:()=>a(l.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]},l.id))}):i.jsx("p",{className:"text-gray-500 text-center py-4",children:"لا توجد أنواع بعد"})]}),i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"إضافة نوع جديد"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم النوع"}),i.jsx("input",{type:"text",value:n.name,onChange:l=>r({...n,name:l.target.value}),className:"w-full border rounded-md px-3 py-1.5",placeholder:"مثال: أحمر كبير"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعر (₪)"}),i.jsx("input",{type:"number",value:n.price,onChange:l=>r({...n,price:parseFloat(l.target.value)}),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"سعر الجملة (₪)"}),i.jsx("input",{type:"number",value:n.wholesale_price,onChange:l=>r({...n,wholesale_price:parseFloat(l.target.value)}),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"سعر التخفيض (₪)"}),i.jsx("input",{type:"number",value:n.discount_price,onChange:l=>r({...n,discount_price:parseFloat(l.target.value)}),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المخزون"}),i.jsx("input",{type:"number",value:n.stock,onChange:l=>r({...n,stock:parseInt(l.target.value)}),className:"w-full border rounded-md px-3 py-1.5",min:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم المنتج (SKU)"}),i.jsx("input",{type:"text",value:n.sku,onChange:l=>r({...n,sku:l.target.value}),className:"w-full border rounded-md px-3 py-1.5",placeholder:"ABC123"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رابط الصورة"}),i.jsx("input",{type:"url",value:n.image,onChange:l=>r({...n,image:l.target.value}),className:"w-full border rounded-md px-3 py-1.5",placeholder:"https://example.com/image.jpg"})]})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{type:"button",onClick:s,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"إضافة النوع"})})]})]})}var sN={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var a="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(a=s(a,r(l)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var o="";for(var l in a)e.call(a,l)&&a[l]&&(o=s(o,l));return o}function s(a,o){return o?a?a+" "+o:a+o:a}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(sN);var eL=sN.exports;const Zt=ms(eL);function Jn(t){"@babel/helpers - typeof";return Jn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jn(t)}function pe(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function ip(t){return pe(1,arguments),t instanceof Date||Jn(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function ye(t){pe(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||Jn(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function wc(t){if(pe(1,arguments),!ip(t)&&typeof t!="number")return!1;var e=ye(t);return!isNaN(Number(e))}function De(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Gx(t,e){pe(2,arguments);var n=ye(t).getTime(),r=De(e);return new Date(n+r)}function iN(t,e){pe(2,arguments);var n=De(e);return Gx(t,-n)}var tL=864e5;function nL(t){pe(1,arguments);var e=ye(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),s=n-r;return Math.floor(s/tL)+1}function fo(t){pe(1,arguments);var e=1,n=ye(t),r=n.getUTCDay(),s=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function aN(t){pe(1,arguments);var e=ye(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=fo(r),a=new Date(0);a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0);var o=fo(a);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function rL(t){pe(1,arguments);var e=aN(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=fo(n);return r}var sL=6048e5;function oN(t){pe(1,arguments);var e=ye(t),n=fo(e).getTime()-rL(e).getTime();return Math.round(n/sL)+1}var iL={};function ca(){return iL}function ea(t,e){var n,r,s,a,o,l,d,u;pe(1,arguments);var p=ca(),f=De((n=(r=(s=(a=e==null?void 0:e.weekStartsOn)!==null&&a!==void 0?a:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:p.weekStartsOn)!==null&&r!==void 0?r:(d=p.locale)===null||d===void 0||(u=d.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var x=ye(t),g=x.getUTCDay(),v=(g<f?7:0)+g-f;return x.setUTCDate(x.getUTCDate()-v),x.setUTCHours(0,0,0,0),x}function Qx(t,e){var n,r,s,a,o,l,d,u;pe(1,arguments);var p=ye(t),f=p.getUTCFullYear(),x=ca(),g=De((n=(r=(s=(a=e==null?void 0:e.firstWeekContainsDate)!==null&&a!==void 0?a:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:x.firstWeekContainsDate)!==null&&r!==void 0?r:(d=x.locale)===null||d===void 0||(u=d.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(g>=1&&g<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var v=new Date(0);v.setUTCFullYear(f+1,0,g),v.setUTCHours(0,0,0,0);var b=ea(v,e),j=new Date(0);j.setUTCFullYear(f,0,g),j.setUTCHours(0,0,0,0);var _=ea(j,e);return p.getTime()>=b.getTime()?f+1:p.getTime()>=_.getTime()?f:f-1}function aL(t,e){var n,r,s,a,o,l,d,u;pe(1,arguments);var p=ca(),f=De((n=(r=(s=(a=e==null?void 0:e.firstWeekContainsDate)!==null&&a!==void 0?a:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:p.firstWeekContainsDate)!==null&&r!==void 0?r:(d=p.locale)===null||d===void 0||(u=d.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),x=Qx(t,e),g=new Date(0);g.setUTCFullYear(x,0,f),g.setUTCHours(0,0,0,0);var v=ea(g,e);return v}var oL=6048e5;function lN(t,e){pe(1,arguments);var n=ye(t),r=ea(n,e).getTime()-aL(n,e).getTime();return Math.round(r/oL)+1}function Ve(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var ws={y:function(e,n){var r=e.getUTCFullYear(),s=r>0?r:1-r;return Ve(n==="yy"?s%100:s,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):Ve(r+1,2)},d:function(e,n){return Ve(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return Ve(e.getUTCHours()%12||12,n.length)},H:function(e,n){return Ve(e.getUTCHours(),n.length)},m:function(e,n){return Ve(e.getUTCMinutes(),n.length)},s:function(e,n){return Ve(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,s=e.getUTCMilliseconds(),a=Math.floor(s*Math.pow(10,r-3));return Ve(a,n.length)}},Ea={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},lL={G:function(e,n,r){var s=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var s=e.getUTCFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return ws.y(e,n)},Y:function(e,n,r,s){var a=Qx(e,s),o=a>0?a:1-a;if(n==="YY"){var l=o%100;return Ve(l,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):Ve(o,n.length)},R:function(e,n){var r=aN(e);return Ve(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return Ve(r,n.length)},Q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return Ve(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return Ve(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,n,r){var s=e.getUTCMonth();switch(n){case"M":case"MM":return ws.M(e,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,n,r){var s=e.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return Ve(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,n,r,s){var a=lN(e,s);return n==="wo"?r.ordinalNumber(a,{unit:"week"}):Ve(a,n.length)},I:function(e,n,r){var s=oN(e);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):Ve(s,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):ws.d(e,n)},D:function(e,n,r){var s=nL(e);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):Ve(s,n.length)},E:function(e,n,r){var s=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,n,r,s){var a=e.getUTCDay(),o=(a-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return Ve(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,n,r,s){var a=e.getUTCDay(),o=(a-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return Ve(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,n,r){var s=e.getUTCDay(),a=s===0?7:s;switch(n){case"i":return String(a);case"ii":return Ve(a,n.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,n,r){var s=e.getUTCHours(),a=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,n,r){var s=e.getUTCHours(),a;switch(s===12?a=Ea.noon:s===0?a=Ea.midnight:a=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,n,r){var s=e.getUTCHours(),a;switch(s>=17?a=Ea.evening:s>=12?a=Ea.afternoon:s>=4?a=Ea.morning:a=Ea.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var s=e.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return ws.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):ws.H(e,n)},K:function(e,n,r){var s=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):Ve(s,n.length)},k:function(e,n,r){var s=e.getUTCHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):Ve(s,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):ws.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):ws.s(e,n)},S:function(e,n){return ws.S(e,n)},X:function(e,n,r,s){var a=s._originalDate||e,o=a.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return Nb(o);case"XXXX":case"XX":return Ci(o);case"XXXXX":case"XXX":default:return Ci(o,":")}},x:function(e,n,r,s){var a=s._originalDate||e,o=a.getTimezoneOffset();switch(n){case"x":return Nb(o);case"xxxx":case"xx":return Ci(o);case"xxxxx":case"xxx":default:return Ci(o,":")}},O:function(e,n,r,s){var a=s._originalDate||e,o=a.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+jb(o,":");case"OOOO":default:return"GMT"+Ci(o,":")}},z:function(e,n,r,s){var a=s._originalDate||e,o=a.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+jb(o,":");case"zzzz":default:return"GMT"+Ci(o,":")}},t:function(e,n,r,s){var a=s._originalDate||e,o=Math.floor(a.getTime()/1e3);return Ve(o,n.length)},T:function(e,n,r,s){var a=s._originalDate||e,o=a.getTime();return Ve(o,n.length)}};function jb(t,e){var n=t>0?"-":"+",r=Math.abs(t),s=Math.floor(r/60),a=r%60;if(a===0)return n+String(s);var o=e;return n+String(s)+o+Ve(a,2)}function Nb(t,e){if(t%60===0){var n=t>0?"-":"+";return n+Ve(Math.abs(t)/60,2)}return Ci(t,e)}function Ci(t,e){var n=e||"",r=t>0?"-":"+",s=Math.abs(t),a=Ve(Math.floor(s/60),2),o=Ve(s%60,2);return r+a+n+o}var kb=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},cN=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},cL=function(e,n){var r=e.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return kb(e,n);var o;switch(s){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",kb(s,n)).replace("{{time}}",cN(a,n))},yg={p:cN,P:cL};function ih(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}var dL=["D","DD"],uL=["YY","YYYY"];function dN(t){return dL.indexOf(t)!==-1}function uN(t){return uL.indexOf(t)!==-1}function ah(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var hL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},pL=function(e,n,r){var s,a=hL[e];return typeof a=="string"?s=a:n===1?s=a.one:s=a.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function Mf(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var fL={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},mL={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},gL={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},xL={date:Mf({formats:fL,defaultWidth:"full"}),time:Mf({formats:mL,defaultWidth:"full"}),dateTime:Mf({formats:gL,defaultWidth:"full"})},vL={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},yL=function(e,n,r,s){return vL[e]};function cl(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&t.formattingValues){var a=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):a;s=t.formattingValues[o]||t.formattingValues[a]}else{var l=t.defaultWidth,d=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[d]||t.values[l]}var u=t.argumentCallback?t.argumentCallback(e):e;return s[u]}}var bL={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},_L={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},wL={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},jL={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},NL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},kL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},SL=function(e,n){var r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},CL={ordinalNumber:SL,era:cl({values:bL,defaultWidth:"wide"}),quarter:cl({values:_L,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:cl({values:wL,defaultWidth:"wide"}),day:cl({values:jL,defaultWidth:"wide"}),dayPeriod:cl({values:NL,defaultWidth:"wide",formattingValues:kL,defaultFormattingWidth:"wide"})};function dl(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(s);if(!a)return null;var o=a[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(l)?TL(l,function(f){return f.test(o)}):EL(l,function(f){return f.test(o)}),u;u=t.valueCallback?t.valueCallback(d):d,u=n.valueCallback?n.valueCallback(u):u;var p=e.slice(o.length);return{value:u,rest:p}}}function EL(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function TL(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function PL(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var s=r[0],a=e.match(t.parsePattern);if(!a)return null;var o=t.valueCallback?t.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;var l=e.slice(s.length);return{value:o,rest:l}}}var DL=/^(\d+)(th|st|nd|rd)?/i,OL=/\d+/i,ML={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},LL={any:[/^b/i,/^(a|c)/i]},AL={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},IL={any:[/1/i,/2/i,/3/i,/4/i]},RL={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},FL={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},$L={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},zL={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},BL={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},UL={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},WL={ordinalNumber:PL({matchPattern:DL,parsePattern:OL,valueCallback:function(e){return parseInt(e,10)}}),era:dl({matchPatterns:ML,defaultMatchWidth:"wide",parsePatterns:LL,defaultParseWidth:"any"}),quarter:dl({matchPatterns:AL,defaultMatchWidth:"wide",parsePatterns:IL,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:dl({matchPatterns:RL,defaultMatchWidth:"wide",parsePatterns:FL,defaultParseWidth:"any"}),day:dl({matchPatterns:$L,defaultMatchWidth:"wide",parsePatterns:zL,defaultParseWidth:"any"}),dayPeriod:dl({matchPatterns:BL,defaultMatchWidth:"any",parsePatterns:UL,defaultParseWidth:"any"})},hN={code:"en-US",formatDistance:pL,formatLong:xL,formatRelative:yL,localize:CL,match:WL,options:{weekStartsOn:0,firstWeekContainsDate:1}},HL=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,YL=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,VL=/^'([^]*?)'?$/,qL=/''/g,ZL=/[a-zA-Z]/;function Sb(t,e,n){var r,s,a,o,l,d,u,p,f,x,g,v,b,j,_,N,S,P;pe(2,arguments);var M=String(e),R=ca(),A=(r=(s=n==null?void 0:n.locale)!==null&&s!==void 0?s:R.locale)!==null&&r!==void 0?r:hN,T=De((a=(o=(l=(d=n==null?void 0:n.firstWeekContainsDate)!==null&&d!==void 0?d:n==null||(u=n.locale)===null||u===void 0||(p=u.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&l!==void 0?l:R.firstWeekContainsDate)!==null&&o!==void 0?o:(f=R.locale)===null||f===void 0||(x=f.options)===null||x===void 0?void 0:x.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(T>=1&&T<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var Y=De((g=(v=(b=(j=n==null?void 0:n.weekStartsOn)!==null&&j!==void 0?j:n==null||(_=n.locale)===null||_===void 0||(N=_.options)===null||N===void 0?void 0:N.weekStartsOn)!==null&&b!==void 0?b:R.weekStartsOn)!==null&&v!==void 0?v:(S=R.locale)===null||S===void 0||(P=S.options)===null||P===void 0?void 0:P.weekStartsOn)!==null&&g!==void 0?g:0);if(!(Y>=0&&Y<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!A.localize)throw new RangeError("locale must contain localize property");if(!A.formatLong)throw new RangeError("locale must contain formatLong property");var O=ye(t);if(!wc(O))throw new RangeError("Invalid time value");var H=ih(O),te=iN(O,H),G={firstWeekContainsDate:T,weekStartsOn:Y,locale:A,_originalDate:O},B=M.match(YL).map(function(Z){var C=Z[0];if(C==="p"||C==="P"){var V=yg[C];return V(Z,A.formatLong)}return Z}).join("").match(HL).map(function(Z){if(Z==="''")return"'";var C=Z[0];if(C==="'")return KL(Z);var V=lL[C];if(V)return!(n!=null&&n.useAdditionalWeekYearTokens)&&uN(Z)&&ah(Z,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&dN(Z)&&ah(Z,e,String(t)),V(te,Z,A.localize,G);if(C.match(ZL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+C+"`");return Z}).join("");return B}function KL(t){var e=t.match(VL);return e?e[1].replace(qL,"'"):t}var GL=6e4;function bg(t,e){pe(2,arguments);var n=De(e);return Gx(t,n*GL)}var QL=36e5;function XL(t,e){pe(2,arguments);var n=De(e);return Gx(t,n*QL)}function Ao(t,e){pe(2,arguments);var n=ye(t),r=De(e);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function oh(t,e){pe(2,arguments);var n=De(e),r=n*7;return Ao(t,r)}function gr(t,e){pe(2,arguments);var n=ye(t),r=De(e);if(isNaN(r))return new Date(NaN);if(!r)return n;var s=n.getDate(),a=new Date(n.getTime());a.setMonth(n.getMonth()+r+1,0);var o=a.getDate();return s>=o?a:(n.setFullYear(a.getFullYear(),a.getMonth(),s),n)}function pN(t,e){pe(2,arguments);var n=De(e),r=n*3;return gr(t,r)}function mo(t,e){pe(2,arguments);var n=De(e);return gr(t,n*12)}function JL(t,e){pe(2,arguments);var n=De(e);return Ao(t,-n)}function Cb(t,e){pe(2,arguments);var n=De(e);return oh(t,-n)}function go(t,e){pe(2,arguments);var n=De(e);return gr(t,-n)}function e6(t,e){pe(2,arguments);var n=De(e);return pN(t,-n)}function jc(t,e){pe(2,arguments);var n=De(e);return mo(t,-n)}function Eb(t){pe(1,arguments);var e=ye(t),n=e.getSeconds();return n}function Lr(t){pe(1,arguments);var e=ye(t),n=e.getMinutes();return n}function Ar(t){pe(1,arguments);var e=ye(t),n=e.getHours();return n}function t6(t){pe(1,arguments);var e=ye(t),n=e.getDay();return n}function Tb(t){pe(1,arguments);var e=ye(t),n=e.getDate();return n}function fN(t,e){var n,r,s,a,o,l,d,u;pe(1,arguments);var p=ca(),f=De((n=(r=(s=(a=e==null?void 0:e.weekStartsOn)!==null&&a!==void 0?a:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:p.weekStartsOn)!==null&&r!==void 0?r:(d=p.locale)===null||d===void 0||(u=d.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var x=ye(t),g=x.getDay(),v=(g<f?7:0)+g-f;return x.setDate(x.getDate()-v),x.setHours(0,0,0,0),x}function lh(t){return pe(1,arguments),fN(t,{weekStartsOn:1})}function n6(t){pe(1,arguments);var e=ye(t),n=e.getFullYear(),r=new Date(0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);var s=lh(r),a=new Date(0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);var o=lh(a);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function r6(t){pe(1,arguments);var e=n6(t),n=new Date(0);n.setFullYear(e,0,4),n.setHours(0,0,0,0);var r=lh(n);return r}var s6=6048e5;function i6(t){pe(1,arguments);var e=ye(t),n=lh(e).getTime()-r6(e).getTime();return Math.round(n/s6)+1}function rn(t){pe(1,arguments);var e=ye(t),n=e.getMonth();return n}function Ha(t){pe(1,arguments);var e=ye(t),n=Math.floor(e.getMonth()/3)+1;return n}function Me(t){return pe(1,arguments),ye(t).getFullYear()}function _g(t){pe(1,arguments);var e=ye(t),n=e.getTime();return n}function a6(t,e){pe(2,arguments);var n=ye(t),r=De(e);return n.setSeconds(r),n}function vu(t,e){pe(2,arguments);var n=ye(t),r=De(e);return n.setMinutes(r),n}function yu(t,e){pe(2,arguments);var n=ye(t),r=De(e);return n.setHours(r),n}function o6(t){pe(1,arguments);var e=ye(t),n=e.getFullYear(),r=e.getMonth(),s=new Date(0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}function dn(t,e){pe(2,arguments);var n=ye(t),r=De(e),s=n.getFullYear(),a=n.getDate(),o=new Date(0);o.setFullYear(s,r,15),o.setHours(0,0,0,0);var l=o6(o);return n.setMonth(r,Math.min(a,l)),n}function Ta(t,e){pe(2,arguments);var n=ye(t),r=De(e),s=Math.floor(n.getMonth()/3)+1,a=r-s;return dn(n,n.getMonth()+a*3)}function ns(t,e){pe(2,arguments);var n=ye(t),r=De(e);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(r),n)}function Pb(t){pe(1,arguments);var e;if(t&&typeof t.forEach=="function")e=t;else if(Jn(t)==="object"&&t!==null)e=Array.prototype.slice.call(t);else return new Date(NaN);var n;return e.forEach(function(r){var s=ye(r);(n===void 0||n>s||isNaN(s.getDate()))&&(n=s)}),n||new Date(NaN)}function Db(t){pe(1,arguments);var e;if(t&&typeof t.forEach=="function")e=t;else if(Jn(t)==="object"&&t!==null)e=Array.prototype.slice.call(t);else return new Date(NaN);var n;return e.forEach(function(r){var s=ye(r);(n===void 0||n<s||isNaN(Number(s)))&&(n=s)}),n||new Date(NaN)}function Ir(t){pe(1,arguments);var e=ye(t);return e.setHours(0,0,0,0),e}var l6=864e5;function ch(t,e){pe(2,arguments);var n=Ir(t),r=Ir(e),s=n.getTime()-ih(n),a=r.getTime()-ih(r);return Math.round((s-a)/l6)}function dh(t,e){pe(2,arguments);var n=ye(t),r=ye(e),s=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return s*12+a}function uh(t,e){pe(2,arguments);var n=ye(t),r=ye(e);return n.getFullYear()-r.getFullYear()}function mN(t){pe(1,arguments);var e=ye(t);return e.setDate(1),e.setHours(0,0,0,0),e}function wg(t){pe(1,arguments);var e=ye(t),n=e.getMonth(),r=n-n%3;return e.setMonth(r,1),e.setHours(0,0,0,0),e}function gN(t){pe(1,arguments);var e=ye(t),n=new Date(0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function jg(t){pe(1,arguments);var e=ye(t);return e.setHours(23,59,59,999),e}function c6(t){pe(1,arguments);var e=ye(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function d6(t){pe(1,arguments);var e=ye(t),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}function u6(t,e){pe(2,arguments);var n=ye(t),r=ye(e);return n.getTime()===r.getTime()}function h6(t,e){pe(2,arguments);var n=Ir(t),r=Ir(e);return n.getTime()===r.getTime()}function p6(t,e){pe(2,arguments);var n=ye(t),r=ye(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function f6(t,e){pe(2,arguments);var n=ye(t),r=ye(e);return n.getFullYear()===r.getFullYear()}function m6(t,e){pe(2,arguments);var n=wg(t),r=wg(e);return n.getTime()===r.getTime()}function ni(t,e){pe(2,arguments);var n=ye(t),r=ye(e);return n.getTime()>r.getTime()}function $s(t,e){pe(2,arguments);var n=ye(t),r=ye(e);return n.getTime()<r.getTime()}function Nc(t,e){pe(2,arguments);var n=ye(t).getTime(),r=ye(e.start).getTime(),s=ye(e.end).getTime();if(!(r<=s))throw new RangeError("Invalid interval");return n>=r&&n<=s}function Ob(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function g6(t,e){if(t){if(typeof t=="string")return Ob(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ob(t,e):void 0}}function Mb(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=g6(t))||e){n&&(t=n);var r=0,s=function(){};return{s,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return o=u.done,u},e:function(u){l=!0,a=u},f:function(){try{o||n.return==null||n.return()}finally{if(l)throw a}}}}function x6(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function xe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ng(t,e){return Ng=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Ng(t,e)}function Be(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ng(t,e)}function hh(t){return hh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hh(t)}function xN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xN=function(){return!!t})()}function v6(t,e){if(e&&(Jn(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xe(t)}function Ue(t){var e=xN();return function(){var n,r=hh(t);if(e){var s=hh(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return v6(this,n)}}function Ie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y6(t,e){if(Jn(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jn(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vN(t){var e=y6(t,"string");return Jn(e)=="symbol"?e:e+""}function b6(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vN(r.key),r)}}function Re(t,e,n){return e&&b6(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function me(t,e,n){return(e=vN(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _6=10,yN=function(){function t(){Ie(this,t),me(this,"priority",void 0),me(this,"subPriority",0)}return Re(t,[{key:"validate",value:function(n,r){return!0}}]),t}(),w6=function(t){Be(n,t);var e=Ue(n);function n(r,s,a,o,l){var d;return Ie(this,n),d=e.call(this),d.value=r,d.validateValue=s,d.setValue=a,d.priority=o,l&&(d.subPriority=l),d}return Re(n,[{key:"validate",value:function(s,a){return this.validateValue(s,this.value,a)}},{key:"set",value:function(s,a,o){return this.setValue(s,a,this.value,o)}}]),n}(yN),j6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",_6),me(xe(r),"subPriority",-1),r}return Re(n,[{key:"set",value:function(s,a){if(a.timestampIsSet)return s;var o=new Date(0);return o.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),o.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),o}}]),n}(yN),Ye=function(){function t(){Ie(this,t),me(this,"incompatibleTokens",void 0),me(this,"priority",void 0),me(this,"subPriority",void 0)}return Re(t,[{key:"run",value:function(n,r,s,a){var o=this.parse(n,r,s,a);return o?{setter:new w6(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}},{key:"validate",value:function(n,r,s){return!0}}]),t}(),N6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",140),me(xe(r),"incompatibleTokens",["R","u","t","T"]),r}return Re(n,[{key:"parse",value:function(s,a,o){switch(a){case"G":case"GG":case"GGG":return o.era(s,{width:"abbreviated"})||o.era(s,{width:"narrow"});case"GGGGG":return o.era(s,{width:"narrow"});case"GGGG":default:return o.era(s,{width:"wide"})||o.era(s,{width:"abbreviated"})||o.era(s,{width:"narrow"})}}},{key:"set",value:function(s,a,o){return a.era=o,s.setUTCFullYear(o,0,1),s.setUTCHours(0,0,0,0),s}}]),n}(Ye),Xx=6e4,Jx=36e5,k6=1e3,_t={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Pr={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function wt(t,e){return t&&{value:e(t.value),rest:t.rest}}function pt(t,e){var n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function Dr(t,e){var n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};var r=n[1]==="+"?1:-1,s=n[2]?parseInt(n[2],10):0,a=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(s*Jx+a*Xx+o*k6),rest:e.slice(n[0].length)}}function bN(t){return pt(_t.anyDigitsSigned,t)}function xt(t,e){switch(t){case 1:return pt(_t.singleDigit,e);case 2:return pt(_t.twoDigits,e);case 3:return pt(_t.threeDigits,e);case 4:return pt(_t.fourDigits,e);default:return pt(new RegExp("^\\d{1,"+t+"}"),e)}}function ph(t,e){switch(t){case 1:return pt(_t.singleDigitSigned,e);case 2:return pt(_t.twoDigitsSigned,e);case 3:return pt(_t.threeDigitsSigned,e);case 4:return pt(_t.fourDigitsSigned,e);default:return pt(new RegExp("^-?\\d{1,"+t+"}"),e)}}function ev(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function _N(t,e){var n=e>0,r=n?e:1-e,s;if(r<=50)s=t||100;else{var a=r+50,o=Math.floor(a/100)*100,l=t>=a%100;s=t+o-(l?100:0)}return n?s:1-s}function wN(t){return t%400===0||t%4===0&&t%100!==0}var S6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",130),me(xe(r),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),r}return Re(n,[{key:"parse",value:function(s,a,o){var l=function(u){return{year:u,isTwoDigitYear:a==="yy"}};switch(a){case"y":return wt(xt(4,s),l);case"yo":return wt(o.ordinalNumber(s,{unit:"year"}),l);default:return wt(xt(a.length,s),l)}}},{key:"validate",value:function(s,a){return a.isTwoDigitYear||a.year>0}},{key:"set",value:function(s,a,o){var l=s.getUTCFullYear();if(o.isTwoDigitYear){var d=_N(o.year,l);return s.setUTCFullYear(d,0,1),s.setUTCHours(0,0,0,0),s}var u=!("era"in a)||a.era===1?o.year:1-o.year;return s.setUTCFullYear(u,0,1),s.setUTCHours(0,0,0,0),s}}]),n}(Ye),C6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",130),me(xe(r),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),r}return Re(n,[{key:"parse",value:function(s,a,o){var l=function(u){return{year:u,isTwoDigitYear:a==="YY"}};switch(a){case"Y":return wt(xt(4,s),l);case"Yo":return wt(o.ordinalNumber(s,{unit:"year"}),l);default:return wt(xt(a.length,s),l)}}},{key:"validate",value:function(s,a){return a.isTwoDigitYear||a.year>0}},{key:"set",value:function(s,a,o,l){var d=Qx(s,l);if(o.isTwoDigitYear){var u=_N(o.year,d);return s.setUTCFullYear(u,0,l.firstWeekContainsDate),s.setUTCHours(0,0,0,0),ea(s,l)}var p=!("era"in a)||a.era===1?o.year:1-o.year;return s.setUTCFullYear(p,0,l.firstWeekContainsDate),s.setUTCHours(0,0,0,0),ea(s,l)}}]),n}(Ye),E6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",130),me(xe(r),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),r}return Re(n,[{key:"parse",value:function(s,a){return ph(a==="R"?4:a.length,s)}},{key:"set",value:function(s,a,o){var l=new Date(0);return l.setUTCFullYear(o,0,4),l.setUTCHours(0,0,0,0),fo(l)}}]),n}(Ye),T6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",130),me(xe(r),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),r}return Re(n,[{key:"parse",value:function(s,a){return ph(a==="u"?4:a.length,s)}},{key:"set",value:function(s,a,o){return s.setUTCFullYear(o,0,1),s.setUTCHours(0,0,0,0),s}}]),n}(Ye),P6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",120),me(xe(r),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Re(n,[{key:"parse",value:function(s,a,o){switch(a){case"Q":case"QQ":return xt(a.length,s);case"Qo":return o.ordinalNumber(s,{unit:"quarter"});case"QQQ":return o.quarter(s,{width:"abbreviated",context:"formatting"})||o.quarter(s,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(s,{width:"wide",context:"formatting"})||o.quarter(s,{width:"abbreviated",context:"formatting"})||o.quarter(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,a){return a>=1&&a<=4}},{key:"set",value:function(s,a,o){return s.setUTCMonth((o-1)*3,1),s.setUTCHours(0,0,0,0),s}}]),n}(Ye),D6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",120),me(xe(r),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),r}return Re(n,[{key:"parse",value:function(s,a,o){switch(a){case"q":case"qq":return xt(a.length,s);case"qo":return o.ordinalNumber(s,{unit:"quarter"});case"qqq":return o.quarter(s,{width:"abbreviated",context:"standalone"})||o.quarter(s,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(s,{width:"wide",context:"standalone"})||o.quarter(s,{width:"abbreviated",context:"standalone"})||o.quarter(s,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(s,a){return a>=1&&a<=4}},{key:"set",value:function(s,a,o){return s.setUTCMonth((o-1)*3,1),s.setUTCHours(0,0,0,0),s}}]),n}(Ye),O6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),me(xe(r),"priority",110),r}return Re(n,[{key:"parse",value:function(s,a,o){var l=function(u){return u-1};switch(a){case"M":return wt(pt(_t.month,s),l);case"MM":return wt(xt(2,s),l);case"Mo":return wt(o.ordinalNumber(s,{unit:"month"}),l);case"MMM":return o.month(s,{width:"abbreviated",context:"formatting"})||o.month(s,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(s,{width:"wide",context:"formatting"})||o.month(s,{width:"abbreviated",context:"formatting"})||o.month(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,a){return a>=0&&a<=11}},{key:"set",value:function(s,a,o){return s.setUTCMonth(o,1),s.setUTCHours(0,0,0,0),s}}]),n}(Ye),M6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",110),me(xe(r),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),r}return Re(n,[{key:"parse",value:function(s,a,o){var l=function(u){return u-1};switch(a){case"L":return wt(pt(_t.month,s),l);case"LL":return wt(xt(2,s),l);case"Lo":return wt(o.ordinalNumber(s,{unit:"month"}),l);case"LLL":return o.month(s,{width:"abbreviated",context:"standalone"})||o.month(s,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(s,{width:"wide",context:"standalone"})||o.month(s,{width:"abbreviated",context:"standalone"})||o.month(s,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(s,a){return a>=0&&a<=11}},{key:"set",value:function(s,a,o){return s.setUTCMonth(o,1),s.setUTCHours(0,0,0,0),s}}]),n}(Ye);function L6(t,e,n){pe(2,arguments);var r=ye(t),s=De(e),a=lN(r,n)-s;return r.setUTCDate(r.getUTCDate()-a*7),r}var A6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",100),me(xe(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),r}return Re(n,[{key:"parse",value:function(s,a,o){switch(a){case"w":return pt(_t.week,s);case"wo":return o.ordinalNumber(s,{unit:"week"});default:return xt(a.length,s)}}},{key:"validate",value:function(s,a){return a>=1&&a<=53}},{key:"set",value:function(s,a,o,l){return ea(L6(s,o,l),l)}}]),n}(Ye);function I6(t,e){pe(2,arguments);var n=ye(t),r=De(e),s=oN(n)-r;return n.setUTCDate(n.getUTCDate()-s*7),n}var R6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",100),me(xe(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),r}return Re(n,[{key:"parse",value:function(s,a,o){switch(a){case"I":return pt(_t.week,s);case"Io":return o.ordinalNumber(s,{unit:"week"});default:return xt(a.length,s)}}},{key:"validate",value:function(s,a){return a>=1&&a<=53}},{key:"set",value:function(s,a,o){return fo(I6(s,o))}}]),n}(Ye),F6=[31,28,31,30,31,30,31,31,30,31,30,31],$6=[31,29,31,30,31,30,31,31,30,31,30,31],z6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",90),me(xe(r),"subPriority",1),me(xe(r),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),r}return Re(n,[{key:"parse",value:function(s,a,o){switch(a){case"d":return pt(_t.date,s);case"do":return o.ordinalNumber(s,{unit:"date"});default:return xt(a.length,s)}}},{key:"validate",value:function(s,a){var o=s.getUTCFullYear(),l=wN(o),d=s.getUTCMonth();return l?a>=1&&a<=$6[d]:a>=1&&a<=F6[d]}},{key:"set",value:function(s,a,o){return s.setUTCDate(o),s.setUTCHours(0,0,0,0),s}}]),n}(Ye),B6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",90),me(xe(r),"subpriority",1),me(xe(r),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),r}return Re(n,[{key:"parse",value:function(s,a,o){switch(a){case"D":case"DD":return pt(_t.dayOfYear,s);case"Do":return o.ordinalNumber(s,{unit:"date"});default:return xt(a.length,s)}}},{key:"validate",value:function(s,a){var o=s.getUTCFullYear(),l=wN(o);return l?a>=1&&a<=366:a>=1&&a<=365}},{key:"set",value:function(s,a,o){return s.setUTCMonth(0,o),s.setUTCHours(0,0,0,0),s}}]),n}(Ye);function tv(t,e,n){var r,s,a,o,l,d,u,p;pe(2,arguments);var f=ca(),x=De((r=(s=(a=(o=n==null?void 0:n.weekStartsOn)!==null&&o!==void 0?o:n==null||(l=n.locale)===null||l===void 0||(d=l.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&a!==void 0?a:f.weekStartsOn)!==null&&s!==void 0?s:(u=f.locale)===null||u===void 0||(p=u.options)===null||p===void 0?void 0:p.weekStartsOn)!==null&&r!==void 0?r:0);if(!(x>=0&&x<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=ye(t),v=De(e),b=g.getUTCDay(),j=v%7,_=(j+7)%7,N=(_<x?7:0)+v-b;return g.setUTCDate(g.getUTCDate()+N),g}var U6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",90),me(xe(r),"incompatibleTokens",["D","i","e","c","t","T"]),r}return Re(n,[{key:"parse",value:function(s,a,o){switch(a){case"E":case"EE":case"EEE":return o.day(s,{width:"abbreviated",context:"formatting"})||o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(s,{width:"wide",context:"formatting"})||o.day(s,{width:"abbreviated",context:"formatting"})||o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,a){return a>=0&&a<=6}},{key:"set",value:function(s,a,o,l){return s=tv(s,o,l),s.setUTCHours(0,0,0,0),s}}]),n}(Ye),W6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",90),me(xe(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),r}return Re(n,[{key:"parse",value:function(s,a,o,l){var d=function(p){var f=Math.floor((p-1)/7)*7;return(p+l.weekStartsOn+6)%7+f};switch(a){case"e":case"ee":return wt(xt(a.length,s),d);case"eo":return wt(o.ordinalNumber(s,{unit:"day"}),d);case"eee":return o.day(s,{width:"abbreviated",context:"formatting"})||o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"});case"eeeee":return o.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(s,{width:"wide",context:"formatting"})||o.day(s,{width:"abbreviated",context:"formatting"})||o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(s,a){return a>=0&&a<=6}},{key:"set",value:function(s,a,o,l){return s=tv(s,o,l),s.setUTCHours(0,0,0,0),s}}]),n}(Ye),H6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",90),me(xe(r),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),r}return Re(n,[{key:"parse",value:function(s,a,o,l){var d=function(p){var f=Math.floor((p-1)/7)*7;return(p+l.weekStartsOn+6)%7+f};switch(a){case"c":case"cc":return wt(xt(a.length,s),d);case"co":return wt(o.ordinalNumber(s,{unit:"day"}),d);case"ccc":return o.day(s,{width:"abbreviated",context:"standalone"})||o.day(s,{width:"short",context:"standalone"})||o.day(s,{width:"narrow",context:"standalone"});case"ccccc":return o.day(s,{width:"narrow",context:"standalone"});case"cccccc":return o.day(s,{width:"short",context:"standalone"})||o.day(s,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(s,{width:"wide",context:"standalone"})||o.day(s,{width:"abbreviated",context:"standalone"})||o.day(s,{width:"short",context:"standalone"})||o.day(s,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(s,a){return a>=0&&a<=6}},{key:"set",value:function(s,a,o,l){return s=tv(s,o,l),s.setUTCHours(0,0,0,0),s}}]),n}(Ye);function Y6(t,e){pe(2,arguments);var n=De(e);n%7===0&&(n=n-7);var r=1,s=ye(t),a=s.getUTCDay(),o=n%7,l=(o+7)%7,d=(l<r?7:0)+n-a;return s.setUTCDate(s.getUTCDate()+d),s}var V6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",90),me(xe(r),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),r}return Re(n,[{key:"parse",value:function(s,a,o){var l=function(u){return u===0?7:u};switch(a){case"i":case"ii":return xt(a.length,s);case"io":return o.ordinalNumber(s,{unit:"day"});case"iii":return wt(o.day(s,{width:"abbreviated",context:"formatting"})||o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"}),l);case"iiiii":return wt(o.day(s,{width:"narrow",context:"formatting"}),l);case"iiiiii":return wt(o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"}),l);case"iiii":default:return wt(o.day(s,{width:"wide",context:"formatting"})||o.day(s,{width:"abbreviated",context:"formatting"})||o.day(s,{width:"short",context:"formatting"})||o.day(s,{width:"narrow",context:"formatting"}),l)}}},{key:"validate",value:function(s,a){return a>=1&&a<=7}},{key:"set",value:function(s,a,o){return s=Y6(s,o),s.setUTCHours(0,0,0,0),s}}]),n}(Ye),q6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",80),me(xe(r),"incompatibleTokens",["b","B","H","k","t","T"]),r}return Re(n,[{key:"parse",value:function(s,a,o){switch(a){case"a":case"aa":case"aaa":return o.dayPeriod(s,{width:"abbreviated",context:"formatting"})||o.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(s,{width:"wide",context:"formatting"})||o.dayPeriod(s,{width:"abbreviated",context:"formatting"})||o.dayPeriod(s,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(s,a,o){return s.setUTCHours(ev(o),0,0,0),s}}]),n}(Ye),Z6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",80),me(xe(r),"incompatibleTokens",["a","B","H","k","t","T"]),r}return Re(n,[{key:"parse",value:function(s,a,o){switch(a){case"b":case"bb":case"bbb":return o.dayPeriod(s,{width:"abbreviated",context:"formatting"})||o.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(s,{width:"wide",context:"formatting"})||o.dayPeriod(s,{width:"abbreviated",context:"formatting"})||o.dayPeriod(s,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(s,a,o){return s.setUTCHours(ev(o),0,0,0),s}}]),n}(Ye),K6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",80),me(xe(r),"incompatibleTokens",["a","b","t","T"]),r}return Re(n,[{key:"parse",value:function(s,a,o){switch(a){case"B":case"BB":case"BBB":return o.dayPeriod(s,{width:"abbreviated",context:"formatting"})||o.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(s,{width:"wide",context:"formatting"})||o.dayPeriod(s,{width:"abbreviated",context:"formatting"})||o.dayPeriod(s,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(s,a,o){return s.setUTCHours(ev(o),0,0,0),s}}]),n}(Ye),G6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",70),me(xe(r),"incompatibleTokens",["H","K","k","t","T"]),r}return Re(n,[{key:"parse",value:function(s,a,o){switch(a){case"h":return pt(_t.hour12h,s);case"ho":return o.ordinalNumber(s,{unit:"hour"});default:return xt(a.length,s)}}},{key:"validate",value:function(s,a){return a>=1&&a<=12}},{key:"set",value:function(s,a,o){var l=s.getUTCHours()>=12;return l&&o<12?s.setUTCHours(o+12,0,0,0):!l&&o===12?s.setUTCHours(0,0,0,0):s.setUTCHours(o,0,0,0),s}}]),n}(Ye),Q6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",70),me(xe(r),"incompatibleTokens",["a","b","h","K","k","t","T"]),r}return Re(n,[{key:"parse",value:function(s,a,o){switch(a){case"H":return pt(_t.hour23h,s);case"Ho":return o.ordinalNumber(s,{unit:"hour"});default:return xt(a.length,s)}}},{key:"validate",value:function(s,a){return a>=0&&a<=23}},{key:"set",value:function(s,a,o){return s.setUTCHours(o,0,0,0),s}}]),n}(Ye),X6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",70),me(xe(r),"incompatibleTokens",["h","H","k","t","T"]),r}return Re(n,[{key:"parse",value:function(s,a,o){switch(a){case"K":return pt(_t.hour11h,s);case"Ko":return o.ordinalNumber(s,{unit:"hour"});default:return xt(a.length,s)}}},{key:"validate",value:function(s,a){return a>=0&&a<=11}},{key:"set",value:function(s,a,o){var l=s.getUTCHours()>=12;return l&&o<12?s.setUTCHours(o+12,0,0,0):s.setUTCHours(o,0,0,0),s}}]),n}(Ye),J6=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",70),me(xe(r),"incompatibleTokens",["a","b","h","H","K","t","T"]),r}return Re(n,[{key:"parse",value:function(s,a,o){switch(a){case"k":return pt(_t.hour24h,s);case"ko":return o.ordinalNumber(s,{unit:"hour"});default:return xt(a.length,s)}}},{key:"validate",value:function(s,a){return a>=1&&a<=24}},{key:"set",value:function(s,a,o){var l=o<=24?o%24:o;return s.setUTCHours(l,0,0,0),s}}]),n}(Ye),eA=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",60),me(xe(r),"incompatibleTokens",["t","T"]),r}return Re(n,[{key:"parse",value:function(s,a,o){switch(a){case"m":return pt(_t.minute,s);case"mo":return o.ordinalNumber(s,{unit:"minute"});default:return xt(a.length,s)}}},{key:"validate",value:function(s,a){return a>=0&&a<=59}},{key:"set",value:function(s,a,o){return s.setUTCMinutes(o,0,0),s}}]),n}(Ye),tA=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",50),me(xe(r),"incompatibleTokens",["t","T"]),r}return Re(n,[{key:"parse",value:function(s,a,o){switch(a){case"s":return pt(_t.second,s);case"so":return o.ordinalNumber(s,{unit:"second"});default:return xt(a.length,s)}}},{key:"validate",value:function(s,a){return a>=0&&a<=59}},{key:"set",value:function(s,a,o){return s.setUTCSeconds(o,0),s}}]),n}(Ye),nA=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",30),me(xe(r),"incompatibleTokens",["t","T"]),r}return Re(n,[{key:"parse",value:function(s,a){var o=function(d){return Math.floor(d*Math.pow(10,-a.length+3))};return wt(xt(a.length,s),o)}},{key:"set",value:function(s,a,o){return s.setUTCMilliseconds(o),s}}]),n}(Ye),rA=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",10),me(xe(r),"incompatibleTokens",["t","T","x"]),r}return Re(n,[{key:"parse",value:function(s,a){switch(a){case"X":return Dr(Pr.basicOptionalMinutes,s);case"XX":return Dr(Pr.basic,s);case"XXXX":return Dr(Pr.basicOptionalSeconds,s);case"XXXXX":return Dr(Pr.extendedOptionalSeconds,s);case"XXX":default:return Dr(Pr.extended,s)}}},{key:"set",value:function(s,a,o){return a.timestampIsSet?s:new Date(s.getTime()-o)}}]),n}(Ye),sA=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",10),me(xe(r),"incompatibleTokens",["t","T","X"]),r}return Re(n,[{key:"parse",value:function(s,a){switch(a){case"x":return Dr(Pr.basicOptionalMinutes,s);case"xx":return Dr(Pr.basic,s);case"xxxx":return Dr(Pr.basicOptionalSeconds,s);case"xxxxx":return Dr(Pr.extendedOptionalSeconds,s);case"xxx":default:return Dr(Pr.extended,s)}}},{key:"set",value:function(s,a,o){return a.timestampIsSet?s:new Date(s.getTime()-o)}}]),n}(Ye),iA=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",40),me(xe(r),"incompatibleTokens","*"),r}return Re(n,[{key:"parse",value:function(s){return bN(s)}},{key:"set",value:function(s,a,o){return[new Date(o*1e3),{timestampIsSet:!0}]}}]),n}(Ye),aA=function(t){Be(n,t);var e=Ue(n);function n(){var r;Ie(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return r=e.call.apply(e,[this].concat(a)),me(xe(r),"priority",20),me(xe(r),"incompatibleTokens","*"),r}return Re(n,[{key:"parse",value:function(s){return bN(s)}},{key:"set",value:function(s,a,o){return[new Date(o),{timestampIsSet:!0}]}}]),n}(Ye),oA={G:new N6,y:new S6,Y:new C6,R:new E6,u:new T6,Q:new P6,q:new D6,M:new O6,L:new M6,w:new A6,I:new R6,d:new z6,D:new B6,E:new U6,e:new W6,c:new H6,i:new V6,a:new q6,b:new Z6,B:new K6,h:new G6,H:new Q6,K:new X6,k:new J6,m:new eA,s:new tA,S:new nA,X:new rA,x:new sA,t:new iA,T:new aA},lA=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,cA=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,dA=/^'([^]*?)'?$/,uA=/''/g,hA=/\S/,pA=/[a-zA-Z]/;function Lf(t,e,n,r){var s,a,o,l,d,u,p,f,x,g,v,b,j,_,N,S,P,M;pe(3,arguments);var R=String(t),A=String(e),T=ca(),Y=(s=(a=r==null?void 0:r.locale)!==null&&a!==void 0?a:T.locale)!==null&&s!==void 0?s:hN;if(!Y.match)throw new RangeError("locale must contain match property");var O=De((o=(l=(d=(u=r==null?void 0:r.firstWeekContainsDate)!==null&&u!==void 0?u:r==null||(p=r.locale)===null||p===void 0||(f=p.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&d!==void 0?d:T.firstWeekContainsDate)!==null&&l!==void 0?l:(x=T.locale)===null||x===void 0||(g=x.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&o!==void 0?o:1);if(!(O>=1&&O<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var H=De((v=(b=(j=(_=r==null?void 0:r.weekStartsOn)!==null&&_!==void 0?_:r==null||(N=r.locale)===null||N===void 0||(S=N.options)===null||S===void 0?void 0:S.weekStartsOn)!==null&&j!==void 0?j:T.weekStartsOn)!==null&&b!==void 0?b:(P=T.locale)===null||P===void 0||(M=P.options)===null||M===void 0?void 0:M.weekStartsOn)!==null&&v!==void 0?v:0);if(!(H>=0&&H<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(A==="")return R===""?ye(n):new Date(NaN);var te={firstWeekContainsDate:O,weekStartsOn:H,locale:Y},G=[new j6],B=A.match(cA).map(function(ue){var U=ue[0];if(U in yg){var oe=yg[U];return oe(ue,Y.formatLong)}return ue}).join("").match(lA),Z=[],C=Mb(B),V;try{var I=function(){var U=V.value;!(r!=null&&r.useAdditionalWeekYearTokens)&&uN(U)&&ah(U,A,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&dN(U)&&ah(U,A,t);var oe=U[0],fe=oA[oe];if(fe){var Ne=fe.incompatibleTokens;if(Array.isArray(Ne)){var Ce=Z.find(function(Gt){return Ne.includes(Gt.token)||Gt.token===oe});if(Ce)throw new RangeError("The format string mustn't contain `".concat(Ce.fullToken,"` and `").concat(U,"` at the same time"))}else if(fe.incompatibleTokens==="*"&&Z.length>0)throw new RangeError("The format string mustn't contain `".concat(U,"` and any other token at the same time"));Z.push({token:oe,fullToken:U});var ct=fe.run(R,U,Y.match,te);if(!ct)return{v:new Date(NaN)};G.push(ct.setter),R=ct.rest}else{if(oe.match(pA))throw new RangeError("Format string contains an unescaped latin alphabet character `"+oe+"`");if(U==="''"?U="'":oe==="'"&&(U=fA(U)),R.indexOf(U)===0)R=R.slice(U.length);else return{v:new Date(NaN)}}};for(C.s();!(V=C.n()).done;){var X=I();if(Jn(X)==="object")return X.v}}catch(ue){C.e(ue)}finally{C.f()}if(R.length>0&&hA.test(R))return new Date(NaN);var E=G.map(function(ue){return ue.priority}).sort(function(ue,U){return U-ue}).filter(function(ue,U,oe){return oe.indexOf(ue)===U}).map(function(ue){return G.filter(function(U){return U.priority===ue}).sort(function(U,oe){return oe.subPriority-U.subPriority})}).map(function(ue){return ue[0]}),K=ye(n);if(isNaN(K.getTime()))return new Date(NaN);var re=iN(K,ih(K)),Q={},ie=Mb(E),le;try{for(ie.s();!(le=ie.n()).done;){var ae=le.value;if(!ae.validate(re,te))return new Date(NaN);var se=ae.set(re,Q,te);Array.isArray(se)?(re=se[0],x6(Q,se[1])):re=se}}catch(ue){ie.e(ue)}finally{ie.f()}return re}function fA(t){return t.match(dA)[1].replace(uA,"'")}function mA(t,e){var n;pe(1,arguments);var r=De((n=void 0)!==null&&n!==void 0?n:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var s=yA(t),a;if(s.date){var o=bA(s.date,r);a=_A(o.restDateString,o.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);var l=a.getTime(),d=0,u;if(s.time&&(d=wA(s.time),isNaN(d)))return new Date(NaN);if(s.timezone){if(u=jA(s.timezone),isNaN(u))return new Date(NaN)}else{var p=new Date(l+d),f=new Date(0);return f.setFullYear(p.getUTCFullYear(),p.getUTCMonth(),p.getUTCDate()),f.setHours(p.getUTCHours(),p.getUTCMinutes(),p.getUTCSeconds(),p.getUTCMilliseconds()),f}return new Date(l+d+u)}var $d={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},gA=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,xA=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,vA=/^([+-])(\d{2})(?::?(\d{2}))?$/;function yA(t){var e={},n=t.split($d.dateTimeDelimiter),r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],$d.timeZoneDelimiter.test(e.date)&&(e.date=t.split($d.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){var s=$d.timezone.exec(r);s?(e.time=r.replace(s[1],""),e.timezone=s[1]):e.time=r}return e}function bA(t,e){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};var s=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:a===null?s:a*100,restDateString:t.slice((r[1]||r[2]).length)}}function _A(t,e){if(e===null)return new Date(NaN);var n=t.match(gA);if(!n)return new Date(NaN);var r=!!n[4],s=ul(n[1]),a=ul(n[2])-1,o=ul(n[3]),l=ul(n[4]),d=ul(n[5])-1;if(r)return EA(e,l,d)?NA(e,l,d):new Date(NaN);var u=new Date(0);return!SA(e,a,o)||!CA(e,s)?new Date(NaN):(u.setUTCFullYear(e,a,Math.max(s,o)),u)}function ul(t){return t?parseInt(t):1}function wA(t){var e=t.match(xA);if(!e)return NaN;var n=Af(e[1]),r=Af(e[2]),s=Af(e[3]);return TA(n,r,s)?n*Jx+r*Xx+s*1e3:NaN}function Af(t){return t&&parseFloat(t.replace(",","."))||0}function jA(t){if(t==="Z")return 0;var e=t.match(vA);if(!e)return 0;var n=e[1]==="+"?-1:1,r=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return PA(r,s)?n*(r*Jx+s*Xx):NaN}function NA(t,e,n){var r=new Date(0);r.setUTCFullYear(t,0,4);var s=r.getUTCDay()||7,a=(e-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+a),r}var kA=[31,null,31,30,31,30,31,31,30,31,30,31];function jN(t){return t%400===0||t%4===0&&t%100!==0}function SA(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(kA[e]||(jN(t)?29:28))}function CA(t,e){return e>=1&&e<=(jN(t)?366:365)}function EA(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function TA(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function PA(t,e){return e>=0&&e<=59}function DA(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,kg(t,e)}function kg(t,e){return kg=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},kg(t,e)}function OA(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Lb(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MA(t,e,n){return t===e?!0:t.correspondingElement?t.correspondingElement.classList.contains(n):t.classList.contains(n)}function LA(t,e,n){if(t===e)return!0;for(;t.parentNode||t.host;){if(t.parentNode&&MA(t,e,n))return!0;t=t.parentNode||t.host}return t}function AA(t){return document.documentElement.clientWidth<=t.clientX||document.documentElement.clientHeight<=t.clientY}var IA=function(){if(!(typeof window>"u"||typeof window.addEventListener!="function")){var e=!1,n=Object.defineProperty({},"passive",{get:function(){e=!0}}),r=function(){};return window.addEventListener("testPassiveEventSupport",r,n),window.removeEventListener("testPassiveEventSupport",r,n),e}};function RA(t){return t===void 0&&(t=0),function(){return++t}}var FA=RA(),Sg,zd={},If={},$A=["touchstart","touchmove"],zA="ignore-react-onclickoutside";function Ab(t,e){var n={},r=$A.indexOf(e)!==-1;return r&&Sg&&(n.passive=!t.props.preventDefault),n}function ap(t,e){var n,r,s=t.displayName||t.name||"Component";return r=n=function(a){DA(o,a);function o(d){var u;return u=a.call(this,d)||this,u.__outsideClickHandler=function(p){if(typeof u.__clickOutsideHandlerProp=="function"){u.__clickOutsideHandlerProp(p);return}var f=u.getInstance();if(typeof f.props.handleClickOutside=="function"){f.props.handleClickOutside(p);return}if(typeof f.handleClickOutside=="function"){f.handleClickOutside(p);return}throw new Error("WrappedComponent: "+s+" lacks a handleClickOutside(event) function for processing outside click events.")},u.__getComponentNode=function(){var p=u.getInstance();return typeof p.setClickOutsideRef=="function"?p.setClickOutsideRef():$c.findDOMNode(p)},u.enableOnClickOutside=function(){if(!(typeof document>"u"||If[u._uid])){typeof Sg>"u"&&(Sg=IA()),If[u._uid]=!0;var p=u.props.eventTypes;p.forEach||(p=[p]),zd[u._uid]=function(f){if(u.componentNode!==null&&!(u.initTimeStamp>f.timeStamp)&&(u.props.preventDefault&&f.preventDefault(),u.props.stopPropagation&&f.stopPropagation(),!(u.props.excludeScrollbar&&AA(f)))){var x=f.composed&&f.composedPath&&f.composedPath().shift()||f.target;LA(x,u.componentNode,u.props.outsideClickIgnoreClass)===document&&u.__outsideClickHandler(f)}},p.forEach(function(f){document.addEventListener(f,zd[u._uid],Ab(Lb(u),f))})}},u.disableOnClickOutside=function(){delete If[u._uid];var p=zd[u._uid];if(p&&typeof document<"u"){var f=u.props.eventTypes;f.forEach||(f=[f]),f.forEach(function(x){return document.removeEventListener(x,p,Ab(Lb(u),x))}),delete zd[u._uid]}},u.getRef=function(p){return u.instanceRef=p},u._uid=FA(),u.initTimeStamp=performance.now(),u}var l=o.prototype;return l.getInstance=function(){if(t.prototype&&!t.prototype.isReactComponent)return this;var u=this.instanceRef;return u.getInstance?u.getInstance():u},l.componentDidMount=function(){typeof document>"u"||!document.createElement||(this.getInstance(),this.componentNode=this.__getComponentNode(),!this.props.disableOnClickOutside&&this.enableOnClickOutside())},l.componentDidUpdate=function(){this.componentNode=this.__getComponentNode()},l.componentWillUnmount=function(){this.disableOnClickOutside()},l.render=function(){var u=this.props;u.excludeScrollbar;var p=OA(u,["excludeScrollbar"]);return t.prototype&&t.prototype.isReactComponent?p.ref=this.getRef:p.wrappedRef=this.getRef,p.disableOnClickOutside=this.disableOnClickOutside,p.enableOnClickOutside=this.enableOnClickOutside,w.createElement(t,p)},o}(w.Component),n.displayName="OnClickOutside("+s+")",n.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:!1,outsideClickIgnoreClass:zA,preventDefault:!1,stopPropagation:!1},n.getClass=function(){return t.getClass?t.getClass():t},r}var NN=w.createContext(),kN=w.createContext();function BA(t){var e=t.children,n=w.useState(null),r=n[0],s=n[1],a=w.useRef(!1);w.useEffect(function(){return function(){a.current=!0}},[]);var o=w.useCallback(function(l){a.current||s(l)},[]);return w.createElement(NN.Provider,{value:r},w.createElement(kN.Provider,{value:o},e))}var SN=function(e){return Array.isArray(e)?e[0]:e},CN=function(e){if(typeof e=="function"){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return e.apply(void 0,r)}},Cg=function(e,n){if(typeof e=="function")return CN(e,n);e!=null&&(e.current=n)},Ib=function(e){return e.reduce(function(n,r){var s=r[0],a=r[1];return n[s]=a,n},{})},Rb=typeof window<"u"&&window.document&&window.document.createElement?w.useLayoutEffect:w.useEffect,Sn="top",er="bottom",tr="right",Cn="left",nv="auto",Hc=[Sn,er,tr,Cn],xo="start",kc="end",UA="clippingParents",EN="viewport",hl="popper",WA="reference",Fb=Hc.reduce(function(t,e){return t.concat([e+"-"+xo,e+"-"+kc])},[]),TN=[].concat(Hc,[nv]).reduce(function(t,e){return t.concat([e,e+"-"+xo,e+"-"+kc])},[]),HA="beforeRead",YA="read",VA="afterRead",qA="beforeMain",ZA="main",KA="afterMain",GA="beforeWrite",QA="write",XA="afterWrite",JA=[HA,YA,VA,qA,ZA,KA,GA,QA,XA];function Br(t){return t?(t.nodeName||"").toLowerCase():null}function Ln(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ta(t){var e=Ln(t).Element;return t instanceof e||t instanceof Element}function Gn(t){var e=Ln(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function rv(t){if(typeof ShadowRoot>"u")return!1;var e=Ln(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function eI(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},s=e.attributes[n]||{},a=e.elements[n];!Gn(a)||!Br(a)||(Object.assign(a.style,r),Object.keys(s).forEach(function(o){var l=s[o];l===!1?a.removeAttribute(o):a.setAttribute(o,l===!0?"":l)}))})}function tI(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],a=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),l=o.reduce(function(d,u){return d[u]="",d},{});!Gn(s)||!Br(s)||(Object.assign(s.style,l),Object.keys(a).forEach(function(d){s.removeAttribute(d)}))})}}const nI={name:"applyStyles",enabled:!0,phase:"write",fn:eI,effect:tI,requires:["computeStyles"]};function Rr(t){return t.split("-")[0]}var Wi=Math.max,fh=Math.min,vo=Math.round;function Eg(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function PN(){return!/^((?!chrome|android).)*safari/i.test(Eg())}function yo(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),s=1,a=1;e&&Gn(t)&&(s=t.offsetWidth>0&&vo(r.width)/t.offsetWidth||1,a=t.offsetHeight>0&&vo(r.height)/t.offsetHeight||1);var o=ta(t)?Ln(t):window,l=o.visualViewport,d=!PN()&&n,u=(r.left+(d&&l?l.offsetLeft:0))/s,p=(r.top+(d&&l?l.offsetTop:0))/a,f=r.width/s,x=r.height/a;return{width:f,height:x,top:p,right:u+f,bottom:p+x,left:u,x:u,y:p}}function sv(t){var e=yo(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function DN(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&rv(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function fs(t){return Ln(t).getComputedStyle(t)}function rI(t){return["table","td","th"].indexOf(Br(t))>=0}function di(t){return((ta(t)?t.ownerDocument:t.document)||window.document).documentElement}function op(t){return Br(t)==="html"?t:t.assignedSlot||t.parentNode||(rv(t)?t.host:null)||di(t)}function $b(t){return!Gn(t)||fs(t).position==="fixed"?null:t.offsetParent}function sI(t){var e=/firefox/i.test(Eg()),n=/Trident/i.test(Eg());if(n&&Gn(t)){var r=fs(t);if(r.position==="fixed")return null}var s=op(t);for(rv(s)&&(s=s.host);Gn(s)&&["html","body"].indexOf(Br(s))<0;){var a=fs(s);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return s;s=s.parentNode}return null}function Yc(t){for(var e=Ln(t),n=$b(t);n&&rI(n)&&fs(n).position==="static";)n=$b(n);return n&&(Br(n)==="html"||Br(n)==="body"&&fs(n).position==="static")?e:n||sI(t)||e}function iv(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Yl(t,e,n){return Wi(t,fh(e,n))}function iI(t,e,n){var r=Yl(t,e,n);return r>n?n:r}function ON(){return{top:0,right:0,bottom:0,left:0}}function MN(t){return Object.assign({},ON(),t)}function LN(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var aI=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,MN(typeof e!="number"?e:LN(e,Hc))};function oI(t){var e,n=t.state,r=t.name,s=t.options,a=n.elements.arrow,o=n.modifiersData.popperOffsets,l=Rr(n.placement),d=iv(l),u=[Cn,tr].indexOf(l)>=0,p=u?"height":"width";if(!(!a||!o)){var f=aI(s.padding,n),x=sv(a),g=d==="y"?Sn:Cn,v=d==="y"?er:tr,b=n.rects.reference[p]+n.rects.reference[d]-o[d]-n.rects.popper[p],j=o[d]-n.rects.reference[d],_=Yc(a),N=_?d==="y"?_.clientHeight||0:_.clientWidth||0:0,S=b/2-j/2,P=f[g],M=N-x[p]-f[v],R=N/2-x[p]/2+S,A=Yl(P,R,M),T=d;n.modifiersData[r]=(e={},e[T]=A,e.centerOffset=A-R,e)}}function lI(t){var e=t.state,n=t.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||DN(e.elements.popper,s)&&(e.elements.arrow=s))}const cI={name:"arrow",enabled:!0,phase:"main",fn:oI,effect:lI,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function bo(t){return t.split("-")[1]}var dI={top:"auto",right:"auto",bottom:"auto",left:"auto"};function uI(t,e){var n=t.x,r=t.y,s=e.devicePixelRatio||1;return{x:vo(n*s)/s||0,y:vo(r*s)/s||0}}function zb(t){var e,n=t.popper,r=t.popperRect,s=t.placement,a=t.variation,o=t.offsets,l=t.position,d=t.gpuAcceleration,u=t.adaptive,p=t.roundOffsets,f=t.isFixed,x=o.x,g=x===void 0?0:x,v=o.y,b=v===void 0?0:v,j=typeof p=="function"?p({x:g,y:b}):{x:g,y:b};g=j.x,b=j.y;var _=o.hasOwnProperty("x"),N=o.hasOwnProperty("y"),S=Cn,P=Sn,M=window;if(u){var R=Yc(n),A="clientHeight",T="clientWidth";if(R===Ln(n)&&(R=di(n),fs(R).position!=="static"&&l==="absolute"&&(A="scrollHeight",T="scrollWidth")),R=R,s===Sn||(s===Cn||s===tr)&&a===kc){P=er;var Y=f&&R===M&&M.visualViewport?M.visualViewport.height:R[A];b-=Y-r.height,b*=d?1:-1}if(s===Cn||(s===Sn||s===er)&&a===kc){S=tr;var O=f&&R===M&&M.visualViewport?M.visualViewport.width:R[T];g-=O-r.width,g*=d?1:-1}}var H=Object.assign({position:l},u&&dI),te=p===!0?uI({x:g,y:b},Ln(n)):{x:g,y:b};if(g=te.x,b=te.y,d){var G;return Object.assign({},H,(G={},G[P]=N?"0":"",G[S]=_?"0":"",G.transform=(M.devicePixelRatio||1)<=1?"translate("+g+"px, "+b+"px)":"translate3d("+g+"px, "+b+"px, 0)",G))}return Object.assign({},H,(e={},e[P]=N?b+"px":"",e[S]=_?g+"px":"",e.transform="",e))}function hI(t){var e=t.state,n=t.options,r=n.gpuAcceleration,s=r===void 0?!0:r,a=n.adaptive,o=a===void 0?!0:a,l=n.roundOffsets,d=l===void 0?!0:l,u={placement:Rr(e.placement),variation:bo(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,zb(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:d})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,zb(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const pI={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:hI,data:{}};var Bd={passive:!0};function fI(t){var e=t.state,n=t.instance,r=t.options,s=r.scroll,a=s===void 0?!0:s,o=r.resize,l=o===void 0?!0:o,d=Ln(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&u.forEach(function(p){p.addEventListener("scroll",n.update,Bd)}),l&&d.addEventListener("resize",n.update,Bd),function(){a&&u.forEach(function(p){p.removeEventListener("scroll",n.update,Bd)}),l&&d.removeEventListener("resize",n.update,Bd)}}const mI={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:fI,data:{}};var gI={left:"right",right:"left",bottom:"top",top:"bottom"};function bu(t){return t.replace(/left|right|bottom|top/g,function(e){return gI[e]})}var xI={start:"end",end:"start"};function Bb(t){return t.replace(/start|end/g,function(e){return xI[e]})}function av(t){var e=Ln(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function ov(t){return yo(di(t)).left+av(t).scrollLeft}function vI(t,e){var n=Ln(t),r=di(t),s=n.visualViewport,a=r.clientWidth,o=r.clientHeight,l=0,d=0;if(s){a=s.width,o=s.height;var u=PN();(u||!u&&e==="fixed")&&(l=s.offsetLeft,d=s.offsetTop)}return{width:a,height:o,x:l+ov(t),y:d}}function yI(t){var e,n=di(t),r=av(t),s=(e=t.ownerDocument)==null?void 0:e.body,a=Wi(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=Wi(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),l=-r.scrollLeft+ov(t),d=-r.scrollTop;return fs(s||n).direction==="rtl"&&(l+=Wi(n.clientWidth,s?s.clientWidth:0)-a),{width:a,height:o,x:l,y:d}}function lv(t){var e=fs(t),n=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function AN(t){return["html","body","#document"].indexOf(Br(t))>=0?t.ownerDocument.body:Gn(t)&&lv(t)?t:AN(op(t))}function Vl(t,e){var n;e===void 0&&(e=[]);var r=AN(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),a=Ln(r),o=s?[a].concat(a.visualViewport||[],lv(r)?r:[]):r,l=e.concat(o);return s?l:l.concat(Vl(op(o)))}function Tg(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function bI(t,e){var n=yo(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Ub(t,e,n){return e===EN?Tg(vI(t,n)):ta(e)?bI(e,n):Tg(yI(di(t)))}function _I(t){var e=Vl(op(t)),n=["absolute","fixed"].indexOf(fs(t).position)>=0,r=n&&Gn(t)?Yc(t):t;return ta(r)?e.filter(function(s){return ta(s)&&DN(s,r)&&Br(s)!=="body"}):[]}function wI(t,e,n,r){var s=e==="clippingParents"?_I(t):[].concat(e),a=[].concat(s,[n]),o=a[0],l=a.reduce(function(d,u){var p=Ub(t,u,r);return d.top=Wi(p.top,d.top),d.right=fh(p.right,d.right),d.bottom=fh(p.bottom,d.bottom),d.left=Wi(p.left,d.left),d},Ub(t,o,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function IN(t){var e=t.reference,n=t.element,r=t.placement,s=r?Rr(r):null,a=r?bo(r):null,o=e.x+e.width/2-n.width/2,l=e.y+e.height/2-n.height/2,d;switch(s){case Sn:d={x:o,y:e.y-n.height};break;case er:d={x:o,y:e.y+e.height};break;case tr:d={x:e.x+e.width,y:l};break;case Cn:d={x:e.x-n.width,y:l};break;default:d={x:e.x,y:e.y}}var u=s?iv(s):null;if(u!=null){var p=u==="y"?"height":"width";switch(a){case xo:d[u]=d[u]-(e[p]/2-n[p]/2);break;case kc:d[u]=d[u]+(e[p]/2-n[p]/2);break}}return d}function Sc(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=r===void 0?t.placement:r,a=n.strategy,o=a===void 0?t.strategy:a,l=n.boundary,d=l===void 0?UA:l,u=n.rootBoundary,p=u===void 0?EN:u,f=n.elementContext,x=f===void 0?hl:f,g=n.altBoundary,v=g===void 0?!1:g,b=n.padding,j=b===void 0?0:b,_=MN(typeof j!="number"?j:LN(j,Hc)),N=x===hl?WA:hl,S=t.rects.popper,P=t.elements[v?N:x],M=wI(ta(P)?P:P.contextElement||di(t.elements.popper),d,p,o),R=yo(t.elements.reference),A=IN({reference:R,element:S,placement:s}),T=Tg(Object.assign({},S,A)),Y=x===hl?T:R,O={top:M.top-Y.top+_.top,bottom:Y.bottom-M.bottom+_.bottom,left:M.left-Y.left+_.left,right:Y.right-M.right+_.right},H=t.modifiersData.offset;if(x===hl&&H){var te=H[s];Object.keys(O).forEach(function(G){var B=[tr,er].indexOf(G)>=0?1:-1,Z=[Sn,er].indexOf(G)>=0?"y":"x";O[G]+=te[Z]*B})}return O}function jI(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=n.boundary,a=n.rootBoundary,o=n.padding,l=n.flipVariations,d=n.allowedAutoPlacements,u=d===void 0?TN:d,p=bo(r),f=p?l?Fb:Fb.filter(function(v){return bo(v)===p}):Hc,x=f.filter(function(v){return u.indexOf(v)>=0});x.length===0&&(x=f);var g=x.reduce(function(v,b){return v[b]=Sc(t,{placement:b,boundary:s,rootBoundary:a,padding:o})[Rr(b)],v},{});return Object.keys(g).sort(function(v,b){return g[v]-g[b]})}function NI(t){if(Rr(t)===nv)return[];var e=bu(t);return[Bb(t),e,Bb(e)]}function kI(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var s=n.mainAxis,a=s===void 0?!0:s,o=n.altAxis,l=o===void 0?!0:o,d=n.fallbackPlacements,u=n.padding,p=n.boundary,f=n.rootBoundary,x=n.altBoundary,g=n.flipVariations,v=g===void 0?!0:g,b=n.allowedAutoPlacements,j=e.options.placement,_=Rr(j),N=_===j,S=d||(N||!v?[bu(j)]:NI(j)),P=[j].concat(S).reduce(function(ie,le){return ie.concat(Rr(le)===nv?jI(e,{placement:le,boundary:p,rootBoundary:f,padding:u,flipVariations:v,allowedAutoPlacements:b}):le)},[]),M=e.rects.reference,R=e.rects.popper,A=new Map,T=!0,Y=P[0],O=0;O<P.length;O++){var H=P[O],te=Rr(H),G=bo(H)===xo,B=[Sn,er].indexOf(te)>=0,Z=B?"width":"height",C=Sc(e,{placement:H,boundary:p,rootBoundary:f,altBoundary:x,padding:u}),V=B?G?tr:Cn:G?er:Sn;M[Z]>R[Z]&&(V=bu(V));var I=bu(V),X=[];if(a&&X.push(C[te]<=0),l&&X.push(C[V]<=0,C[I]<=0),X.every(function(ie){return ie})){Y=H,T=!1;break}A.set(H,X)}if(T)for(var E=v?3:1,K=function(le){var ae=P.find(function(se){var ue=A.get(se);if(ue)return ue.slice(0,le).every(function(U){return U})});if(ae)return Y=ae,"break"},re=E;re>0;re--){var Q=K(re);if(Q==="break")break}e.placement!==Y&&(e.modifiersData[r]._skip=!0,e.placement=Y,e.reset=!0)}}const SI={name:"flip",enabled:!0,phase:"main",fn:kI,requiresIfExists:["offset"],data:{_skip:!1}};function Wb(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Hb(t){return[Sn,tr,er,Cn].some(function(e){return t[e]>=0})}function CI(t){var e=t.state,n=t.name,r=e.rects.reference,s=e.rects.popper,a=e.modifiersData.preventOverflow,o=Sc(e,{elementContext:"reference"}),l=Sc(e,{altBoundary:!0}),d=Wb(o,r),u=Wb(l,s,a),p=Hb(d),f=Hb(u);e.modifiersData[n]={referenceClippingOffsets:d,popperEscapeOffsets:u,isReferenceHidden:p,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":f})}const EI={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:CI};function TI(t,e,n){var r=Rr(t),s=[Cn,Sn].indexOf(r)>=0?-1:1,a=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=a[0],l=a[1];return o=o||0,l=(l||0)*s,[Cn,tr].indexOf(r)>=0?{x:l,y:o}:{x:o,y:l}}function PI(t){var e=t.state,n=t.options,r=t.name,s=n.offset,a=s===void 0?[0,0]:s,o=TN.reduce(function(p,f){return p[f]=TI(f,e.rects,a),p},{}),l=o[e.placement],d=l.x,u=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=d,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=o}const DI={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:PI};function OI(t){var e=t.state,n=t.name;e.modifiersData[n]=IN({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const MI={name:"popperOffsets",enabled:!0,phase:"read",fn:OI,data:{}};function LI(t){return t==="x"?"y":"x"}function AI(t){var e=t.state,n=t.options,r=t.name,s=n.mainAxis,a=s===void 0?!0:s,o=n.altAxis,l=o===void 0?!1:o,d=n.boundary,u=n.rootBoundary,p=n.altBoundary,f=n.padding,x=n.tether,g=x===void 0?!0:x,v=n.tetherOffset,b=v===void 0?0:v,j=Sc(e,{boundary:d,rootBoundary:u,padding:f,altBoundary:p}),_=Rr(e.placement),N=bo(e.placement),S=!N,P=iv(_),M=LI(P),R=e.modifiersData.popperOffsets,A=e.rects.reference,T=e.rects.popper,Y=typeof b=="function"?b(Object.assign({},e.rects,{placement:e.placement})):b,O=typeof Y=="number"?{mainAxis:Y,altAxis:Y}:Object.assign({mainAxis:0,altAxis:0},Y),H=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,te={x:0,y:0};if(R){if(a){var G,B=P==="y"?Sn:Cn,Z=P==="y"?er:tr,C=P==="y"?"height":"width",V=R[P],I=V+j[B],X=V-j[Z],E=g?-T[C]/2:0,K=N===xo?A[C]:T[C],re=N===xo?-T[C]:-A[C],Q=e.elements.arrow,ie=g&&Q?sv(Q):{width:0,height:0},le=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:ON(),ae=le[B],se=le[Z],ue=Yl(0,A[C],ie[C]),U=S?A[C]/2-E-ue-ae-O.mainAxis:K-ue-ae-O.mainAxis,oe=S?-A[C]/2+E+ue+se+O.mainAxis:re+ue+se+O.mainAxis,fe=e.elements.arrow&&Yc(e.elements.arrow),Ne=fe?P==="y"?fe.clientTop||0:fe.clientLeft||0:0,Ce=(G=H==null?void 0:H[P])!=null?G:0,ct=V+U-Ce-Ne,Gt=V+oe-Ce,Qt=Yl(g?fh(I,ct):I,V,g?Wi(X,Gt):X);R[P]=Qt,te[P]=Qt-V}if(l){var Dt,Wt=P==="x"?Sn:Cn,Xt=P==="x"?er:tr,vt=R[M],En=M==="y"?"height":"width",ui=vt+j[Wt],hi=vt-j[Xt],he=[Sn,Cn].indexOf(_)!==-1,we=(Dt=H==null?void 0:H[M])!=null?Dt:0,Ke=he?ui:vt-A[En]-T[En]-we+O.altAxis,at=he?vt+A[En]+T[En]-we-O.altAxis:hi,Et=g&&he?iI(Ke,vt,at):Yl(g?Ke:ui,vt,g?at:hi);R[M]=Et,te[M]=Et-vt}e.modifiersData[r]=te}}const II={name:"preventOverflow",enabled:!0,phase:"main",fn:AI,requiresIfExists:["offset"]};function RI(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function FI(t){return t===Ln(t)||!Gn(t)?av(t):RI(t)}function $I(t){var e=t.getBoundingClientRect(),n=vo(e.width)/t.offsetWidth||1,r=vo(e.height)/t.offsetHeight||1;return n!==1||r!==1}function zI(t,e,n){n===void 0&&(n=!1);var r=Gn(e),s=Gn(e)&&$I(e),a=di(e),o=yo(t,s,n),l={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(r||!r&&!n)&&((Br(e)!=="body"||lv(a))&&(l=FI(e)),Gn(e)?(d=yo(e,!0),d.x+=e.clientLeft,d.y+=e.clientTop):a&&(d.x=ov(a))),{x:o.left+l.scrollLeft-d.x,y:o.top+l.scrollTop-d.y,width:o.width,height:o.height}}function BI(t){var e=new Map,n=new Set,r=[];t.forEach(function(a){e.set(a.name,a)});function s(a){n.add(a.name);var o=[].concat(a.requires||[],a.requiresIfExists||[]);o.forEach(function(l){if(!n.has(l)){var d=e.get(l);d&&s(d)}}),r.push(a)}return t.forEach(function(a){n.has(a.name)||s(a)}),r}function UI(t){var e=BI(t);return JA.reduce(function(n,r){return n.concat(e.filter(function(s){return s.phase===r}))},[])}function WI(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function HI(t){var e=t.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var Yb={placement:"bottom",modifiers:[],strategy:"absolute"};function Vb(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function YI(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,s=e.defaultOptions,a=s===void 0?Yb:s;return function(l,d,u){u===void 0&&(u=a);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},Yb,a),modifiersData:{},elements:{reference:l,popper:d},attributes:{},styles:{}},f=[],x=!1,g={state:p,setOptions:function(_){var N=typeof _=="function"?_(p.options):_;b(),p.options=Object.assign({},a,p.options,N),p.scrollParents={reference:ta(l)?Vl(l):l.contextElement?Vl(l.contextElement):[],popper:Vl(d)};var S=UI(HI([].concat(r,p.options.modifiers)));return p.orderedModifiers=S.filter(function(P){return P.enabled}),v(),g.update()},forceUpdate:function(){if(!x){var _=p.elements,N=_.reference,S=_.popper;if(Vb(N,S)){p.rects={reference:zI(N,Yc(S),p.options.strategy==="fixed"),popper:sv(S)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(O){return p.modifiersData[O.name]=Object.assign({},O.data)});for(var P=0;P<p.orderedModifiers.length;P++){if(p.reset===!0){p.reset=!1,P=-1;continue}var M=p.orderedModifiers[P],R=M.fn,A=M.options,T=A===void 0?{}:A,Y=M.name;typeof R=="function"&&(p=R({state:p,options:T,name:Y,instance:g})||p)}}}},update:WI(function(){return new Promise(function(j){g.forceUpdate(),j(p)})}),destroy:function(){b(),x=!0}};if(!Vb(l,d))return g;g.setOptions(u).then(function(j){!x&&u.onFirstUpdate&&u.onFirstUpdate(j)});function v(){p.orderedModifiers.forEach(function(j){var _=j.name,N=j.options,S=N===void 0?{}:N,P=j.effect;if(typeof P=="function"){var M=P({state:p,name:_,instance:g,options:S}),R=function(){};f.push(M||R)}})}function b(){f.forEach(function(j){return j()}),f=[]}return g}}var VI=[mI,MI,pI,nI,DI,SI,II,cI,EI],qI=YI({defaultModifiers:VI}),ZI=typeof Element<"u",KI=typeof Map=="function",GI=typeof Set=="function",QI=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function _u(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!_u(t[r],e[r]))return!1;return!0}var a;if(KI&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(a=t.entries();!(r=a.next()).done;)if(!e.has(r.value[0]))return!1;for(a=t.entries();!(r=a.next()).done;)if(!_u(r.value[1],e.get(r.value[0])))return!1;return!0}if(GI&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(a=t.entries();!(r=a.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(QI&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;if(ZI&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((s[r]==="_owner"||s[r]==="__v"||s[r]==="__o")&&t.$$typeof)&&!_u(t[s[r]],e[s[r]]))return!1;return!0}return t!==t&&e!==e}var XI=function(e,n){try{return _u(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const JI=ms(XI);var eR=[],tR=function(e,n,r){r===void 0&&(r={});var s=w.useRef(null),a={onFirstUpdate:r.onFirstUpdate,placement:r.placement||"bottom",strategy:r.strategy||"absolute",modifiers:r.modifiers||eR},o=w.useState({styles:{popper:{position:a.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),l=o[0],d=o[1],u=w.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(g){var v=g.state,b=Object.keys(v.elements);$c.flushSync(function(){d({styles:Ib(b.map(function(j){return[j,v.styles[j]||{}]})),attributes:Ib(b.map(function(j){return[j,v.attributes[j]]}))})})},requires:["computeStyles"]}},[]),p=w.useMemo(function(){var x={onFirstUpdate:a.onFirstUpdate,placement:a.placement,strategy:a.strategy,modifiers:[].concat(a.modifiers,[u,{name:"applyStyles",enabled:!1}])};return JI(s.current,x)?s.current||x:(s.current=x,x)},[a.onFirstUpdate,a.placement,a.strategy,a.modifiers,u]),f=w.useRef();return Rb(function(){f.current&&f.current.setOptions(p)},[p]),Rb(function(){if(!(e==null||n==null)){var x=r.createPopper||qI,g=x(e,n,p);return f.current=g,function(){g.destroy(),f.current=null}}},[e,n,r.createPopper]),{state:f.current?f.current.state:null,styles:l.styles,attributes:l.attributes,update:f.current?f.current.update:null,forceUpdate:f.current?f.current.forceUpdate:null}},nR=function(){},rR=function(){return Promise.resolve(null)},sR=[];function iR(t){var e=t.placement,n=e===void 0?"bottom":e,r=t.strategy,s=r===void 0?"absolute":r,a=t.modifiers,o=a===void 0?sR:a,l=t.referenceElement,d=t.onFirstUpdate,u=t.innerRef,p=t.children,f=w.useContext(NN),x=w.useState(null),g=x[0],v=x[1],b=w.useState(null),j=b[0],_=b[1];w.useEffect(function(){Cg(u,g)},[u,g]);var N=w.useMemo(function(){return{placement:n,strategy:s,onFirstUpdate:d,modifiers:[].concat(o,[{name:"arrow",enabled:j!=null,options:{element:j}}])}},[n,s,d,o,j]),S=tR(l||f,g,N),P=S.state,M=S.styles,R=S.forceUpdate,A=S.update,T=w.useMemo(function(){return{ref:v,style:M.popper,placement:P?P.placement:n,hasPopperEscaped:P&&P.modifiersData.hide?P.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:P&&P.modifiersData.hide?P.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:M.arrow,ref:_},forceUpdate:R||nR,update:A||rR}},[v,_,n,P,M,A,R]);return SN(p)(T)}var aR=function(){},oR=aR;const lR=ms(oR);function cR(t){var e=t.children,n=t.innerRef,r=w.useContext(kN),s=w.useCallback(function(a){Cg(n,a),CN(r,a)},[n,r]);return w.useEffect(function(){return function(){return Cg(n,null)}},[]),w.useEffect(function(){lR(!!r,"`Reference` should not be used outside of a `Manager` component.")},[r]),SN(e)({ref:s})}function dR(t,e){if(pe(2,arguments),Jn(e)!=="object"||e===null)throw new RangeError("values parameter must be an object");var n=ye(t);return isNaN(n.getTime())?new Date(NaN):(e.year!=null&&n.setFullYear(e.year),e.month!=null&&(n=dn(n,e.month)),e.date!=null&&n.setDate(De(e.date)),e.hours!=null&&n.setHours(De(e.hours)),e.minutes!=null&&n.setMinutes(De(e.minutes)),e.seconds!=null&&n.setSeconds(De(e.seconds)),e.milliseconds!=null&&n.setMilliseconds(De(e.milliseconds)),n)}function qb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function mh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qb(Object(n),!0).forEach(function(r){F(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pg(t){return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(t)}function $t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,RN(r.key),r)}}function zt(t,e,n){return e&&Zb(t.prototype,e),n&&Zb(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function F(t,e,n){return(e=RN(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _o(){return _o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_o.apply(this,arguments)}function Bt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dg(t,e)}function gh(t){return gh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gh(t)}function Dg(t,e){return Dg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Dg(t,e)}function $(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ut(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=gh(t);if(e){var s=gh(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return function(a,o){if(o&&(typeof o=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $(a)}(this,n)}}function Cc(t){return function(e){if(Array.isArray(e))return Rf(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(e){if(typeof e=="string")return Rf(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rf(e,n)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Rf(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function RN(t){var e=function(n,r){if(typeof n!="object"||n===null)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var a=s.call(n,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}(t,"string");return typeof e=="symbol"?e:String(e)}var Kb=function(t,e){switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},Gb=function(t,e){switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},uR={p:Gb,P:function(t,e){var n,r=t.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return Kb(t,e);switch(s){case"P":n=e.dateTime({width:"short"});break;case"PP":n=e.dateTime({width:"medium"});break;case"PPP":n=e.dateTime({width:"long"});break;default:n=e.dateTime({width:"full"})}return n.replace("{{date}}",Kb(s,e)).replace("{{time}}",Gb(a,e))}},ql=12,hR=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;function Qe(t){var e=t?typeof t=="string"||t instanceof String?mA(t):ye(t):new Date;return Ps(e)?e:null}function Ps(t,e){return e=e||new Date("1/1/1000"),wc(t)&&!$s(t,e)}function lt(t,e,n){if(n==="en")return Sb(t,e,{awareOfUnicodeTokens:!0});var r=Yi(n);return n&&!r&&console.warn('A locale object was not found for the provided string ["'.concat(n,'"].')),!r&&Hi()&&Yi(Hi())&&(r=Yi(Hi())),Sb(t,e,{locale:r||null,awareOfUnicodeTokens:!0})}function jr(t,e){var n=e.dateFormat,r=e.locale;return t&&lt(t,Array.isArray(n)?n[0]:n,r)||""}function Qb(t,e){var n=e.hour,r=n===void 0?0:n,s=e.minute,a=s===void 0?0:s,o=e.second;return yu(vu(a6(t,o===void 0?0:o),a),r)}function Fr(t,e,n){var r=Yi(e||Hi());return fN(t,{locale:r,weekStartsOn:n})}function Qs(t){return mN(t)}function Sl(t){return gN(t)}function Xb(t){return wg(t)}function Jb(){return Ir(Qe())}function zs(t,e){return t&&e?f6(t,e):!t&&!e}function ur(t,e){return t&&e?p6(t,e):!t&&!e}function xh(t,e){return t&&e?m6(t,e):!t&&!e}function et(t,e){return t&&e?h6(t,e):!t&&!e}function Ri(t,e){return t&&e?u6(t,e):!t&&!e}function wu(t,e,n){var r,s=Ir(e),a=jg(n);try{r=Nc(t,{start:s,end:a})}catch{r=!1}return r}function Hi(){return(typeof window<"u"?window:globalThis).__localeId__}function Yi(t){if(typeof t=="string"){var e=typeof window<"u"?window:globalThis;return e.__localeData__?e.__localeData__[t]:null}return t}function cv(t,e){return lt(dn(Qe(),t),"LLLL",e)}function FN(t,e){return lt(dn(Qe(),t),"LLL",e)}function lp(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.maxDate,s=e.excludeDates,a=e.excludeDateIntervals,o=e.includeDates,l=e.includeDateIntervals,d=e.filterDate;return cp(t,{minDate:n,maxDate:r})||s&&s.some(function(u){return et(t,u)})||a&&a.some(function(u){var p=u.start,f=u.end;return Nc(t,{start:p,end:f})})||o&&!o.some(function(u){return et(t,u)})||l&&!l.some(function(u){var p=u.start,f=u.end;return Nc(t,{start:p,end:f})})||d&&!d(Qe(t))||!1}function dv(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.excludeDates,r=e.excludeDateIntervals;return r&&r.length>0?r.some(function(s){var a=s.start,o=s.end;return Nc(t,{start:a,end:o})}):n&&n.some(function(s){return et(t,s)})||!1}function $N(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.maxDate,s=e.excludeDates,a=e.includeDates,o=e.filterDate;return cp(t,{minDate:mN(n),maxDate:c6(r)})||s&&s.some(function(l){return ur(t,l)})||a&&!a.some(function(l){return ur(t,l)})||o&&!o(Qe(t))||!1}function Ff(t,e,n,r){var s=Me(t),a=rn(t),o=Me(e),l=rn(e),d=Me(r);return s===o&&s===d?a<=n&&n<=l:s<o?d===s&&a<=n||d===o&&l>=n||d<o&&d>s:void 0}function pR(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.maxDate,s=e.excludeDates,a=e.includeDates,o=e.filterDate;return cp(t,{minDate:n,maxDate:r})||s&&s.some(function(l){return xh(t,l)})||a&&!a.some(function(l){return xh(t,l)})||o&&!o(Qe(t))||!1}function $f(t,e,n){if(!wc(e)||!wc(n))return!1;var r=Me(e),s=Me(n);return r<=t&&s>=t}function zN(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.maxDate,s=e.excludeDates,a=e.includeDates,o=e.filterDate,l=new Date(t,0,1);return cp(l,{minDate:gN(n),maxDate:d6(r)})||s&&s.some(function(d){return zs(l,d)})||a&&!a.some(function(d){return zs(l,d)})||o&&!o(Qe(l))||!1}function zf(t,e,n,r){var s=Me(t),a=Ha(t),o=Me(e),l=Ha(e),d=Me(r);return s===o&&s===d?a<=n&&n<=l:s<o?d===s&&a<=n||d===o&&l>=n||d<o&&d>s:void 0}function cp(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.maxDate;return n&&ch(t,n)<0||r&&ch(t,r)>0}function e_(t,e){return e.some(function(n){return Ar(n)===Ar(t)&&Lr(n)===Lr(t)})}function t_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.excludeTimes,r=e.includeTimes,s=e.filterTime;return n&&e_(t,n)||r&&!e_(t,r)||s&&!s(t)||!1}function n_(t,e){var n=e.minTime,r=e.maxTime;if(!n||!r)throw new Error("Both minTime and maxTime props required");var s,a=Qe(),o=yu(vu(a,Lr(t)),Ar(t)),l=yu(vu(a,Lr(n)),Ar(n)),d=yu(vu(a,Lr(r)),Ar(r));try{s=!Nc(o,{start:l,end:d})}catch{s=!1}return s}function r_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.includeDates,s=go(t,1);return n&&dh(n,s)>0||r&&r.every(function(a){return dh(a,s)>0})||!1}function s_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.maxDate,r=e.includeDates,s=gr(t,1);return n&&dh(s,n)>0||r&&r.every(function(a){return dh(s,a)>0})||!1}function i_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.minDate,r=e.includeDates,s=jc(t,1);return n&&uh(n,s)>0||r&&r.every(function(a){return uh(a,s)>0})||!1}function a_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.maxDate,r=e.includeDates,s=mo(t,1);return n&&uh(s,n)>0||r&&r.every(function(a){return uh(s,a)>0})||!1}function BN(t){var e=t.minDate,n=t.includeDates;if(n&&e){var r=n.filter(function(s){return ch(s,e)>=0});return Pb(r)}return n?Pb(n):e}function UN(t){var e=t.maxDate,n=t.includeDates;if(n&&e){var r=n.filter(function(s){return ch(s,e)<=0});return Db(r)}return n?Db(n):e}function o_(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"react-datepicker__day--highlighted",n=new Map,r=0,s=t.length;r<s;r++){var a=t[r];if(ip(a)){var o=lt(a,"MM.dd.yyyy"),l=n.get(o)||[];l.includes(e)||(l.push(e),n.set(o,l))}else if(Pg(a)==="object"){var d=Object.keys(a),u=d[0],p=a[d[0]];if(typeof u=="string"&&p.constructor===Array)for(var f=0,x=p.length;f<x;f++){var g=lt(p[f],"MM.dd.yyyy"),v=n.get(g)||[];v.includes(u)||(v.push(u),n.set(g,v))}}}return n}function fR(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"react-datepicker__day--holidays",n=new Map;return t.forEach(function(r){var s=r.date,a=r.holidayName;if(ip(s)){var o=lt(s,"MM.dd.yyyy"),l=n.get(o)||{};if(!("className"in l)||l.className!==e||(d=l.holidayNames,u=[a],d.length!==u.length||!d.every(function(f,x){return f===u[x]}))){var d,u;l.className=e;var p=l.holidayNames;l.holidayNames=p?[].concat(Cc(p),[a]):[a],n.set(o,l)}}}),n}function mR(t,e,n,r,s){for(var a=s.length,o=[],l=0;l<a;l++){var d=bg(XL(t,Ar(s[l])),Lr(s[l])),u=bg(t,(n+1)*r);ni(d,e)&&$s(d,u)&&o.push(s[l])}return o}function l_(t){return t<10?"0".concat(t):"".concat(t)}function Ya(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ql,n=Math.ceil(Me(t)/e)*e;return{startPeriod:n-(e-1),endPeriod:n}}function c_(t){var e=t.getSeconds(),n=t.getMilliseconds();return ye(t.getTime()-1e3*e-n)}function gR(t,e,n,r){for(var s=[],a=0;a<2*e+1;a++){var o=t+e-a,l=!0;n&&(l=Me(n)<=o),r&&l&&(l=Me(r)>=o),l&&s.push(o)}return s}var xR=ap(function(t){Bt(n,q.Component);var e=Ut(n);function n(r){var s;$t(this,n),F($(s=e.call(this,r)),"renderOptions",function(){var d=s.props.year,u=s.state.yearsList.map(function(x){return q.createElement("div",{className:d===x?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:x,onClick:s.onChange.bind($(s),x),"aria-selected":d===x?"true":void 0},d===x?q.createElement("span",{className:"react-datepicker__year-option--selected"},"✓"):"",x)}),p=s.props.minDate?Me(s.props.minDate):null,f=s.props.maxDate?Me(s.props.maxDate):null;return f&&s.state.yearsList.find(function(x){return x===f})||u.unshift(q.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:s.incrementYears},q.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),p&&s.state.yearsList.find(function(x){return x===p})||u.push(q.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:s.decrementYears},q.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),u}),F($(s),"onChange",function(d){s.props.onChange(d)}),F($(s),"handleClickOutside",function(){s.props.onCancel()}),F($(s),"shiftYears",function(d){var u=s.state.yearsList.map(function(p){return p+d});s.setState({yearsList:u})}),F($(s),"incrementYears",function(){return s.shiftYears(1)}),F($(s),"decrementYears",function(){return s.shiftYears(-1)});var a=r.yearDropdownItemNumber,o=r.scrollableYearDropdown,l=a||(o?10:5);return s.state={yearsList:gR(s.props.year,l,s.props.minDate,s.props.maxDate)},s.dropdownRef=w.createRef(),s}return zt(n,[{key:"componentDidMount",value:function(){var r=this.dropdownRef.current;if(r){var s=r.children?Array.from(r.children):null,a=s?s.find(function(o){return o.ariaSelected}):null;r.scrollTop=a?a.offsetTop+(a.clientHeight-r.clientHeight)/2:(r.scrollHeight-r.clientHeight)/2}}},{key:"render",value:function(){var r=Zt({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return q.createElement("div",{className:r,ref:this.dropdownRef},this.renderOptions())}}]),n}()),vR=function(t){Bt(n,q.Component);var e=Ut(n);function n(){var r;$t(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return F($(r=e.call.apply(e,[this].concat(a))),"state",{dropdownVisible:!1}),F($(r),"renderSelectOptions",function(){for(var l=r.props.minDate?Me(r.props.minDate):1900,d=r.props.maxDate?Me(r.props.maxDate):2100,u=[],p=l;p<=d;p++)u.push(q.createElement("option",{key:p,value:p},p));return u}),F($(r),"onSelectChange",function(l){r.onChange(l.target.value)}),F($(r),"renderSelectMode",function(){return q.createElement("select",{value:r.props.year,className:"react-datepicker__year-select",onChange:r.onSelectChange},r.renderSelectOptions())}),F($(r),"renderReadView",function(l){return q.createElement("div",{key:"read",style:{visibility:l?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(d){return r.toggleDropdown(d)}},q.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),q.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},r.props.year))}),F($(r),"renderDropdown",function(){return q.createElement(xR,{key:"dropdown",year:r.props.year,onChange:r.onChange,onCancel:r.toggleDropdown,minDate:r.props.minDate,maxDate:r.props.maxDate,scrollableYearDropdown:r.props.scrollableYearDropdown,yearDropdownItemNumber:r.props.yearDropdownItemNumber})}),F($(r),"renderScrollMode",function(){var l=r.state.dropdownVisible,d=[r.renderReadView(!l)];return l&&d.unshift(r.renderDropdown()),d}),F($(r),"onChange",function(l){r.toggleDropdown(),l!==r.props.year&&r.props.onChange(l)}),F($(r),"toggleDropdown",function(l){r.setState({dropdownVisible:!r.state.dropdownVisible},function(){r.props.adjustDateOnChange&&r.handleYearChange(r.props.date,l)})}),F($(r),"handleYearChange",function(l,d){r.onSelect(l,d),r.setOpen()}),F($(r),"onSelect",function(l,d){r.props.onSelect&&r.props.onSelect(l,d)}),F($(r),"setOpen",function(){r.props.setOpen&&r.props.setOpen(!0)}),r}return zt(n,[{key:"render",value:function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode()}return q.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},r)}}]),n}(),yR=ap(function(t){Bt(n,q.Component);var e=Ut(n);function n(){var r;$t(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return F($(r=e.call.apply(e,[this].concat(a))),"isSelectedMonth",function(l){return r.props.month===l}),F($(r),"renderOptions",function(){return r.props.monthNames.map(function(l,d){return q.createElement("div",{className:r.isSelectedMonth(d)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:l,onClick:r.onChange.bind($(r),d),"aria-selected":r.isSelectedMonth(d)?"true":void 0},r.isSelectedMonth(d)?q.createElement("span",{className:"react-datepicker__month-option--selected"},"✓"):"",l)})}),F($(r),"onChange",function(l){return r.props.onChange(l)}),F($(r),"handleClickOutside",function(){return r.props.onCancel()}),r}return zt(n,[{key:"render",value:function(){return q.createElement("div",{className:"react-datepicker__month-dropdown"},this.renderOptions())}}]),n}()),bR=function(t){Bt(n,q.Component);var e=Ut(n);function n(){var r;$t(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return F($(r=e.call.apply(e,[this].concat(a))),"state",{dropdownVisible:!1}),F($(r),"renderSelectOptions",function(l){return l.map(function(d,u){return q.createElement("option",{key:u,value:u},d)})}),F($(r),"renderSelectMode",function(l){return q.createElement("select",{value:r.props.month,className:"react-datepicker__month-select",onChange:function(d){return r.onChange(d.target.value)}},r.renderSelectOptions(l))}),F($(r),"renderReadView",function(l,d){return q.createElement("div",{key:"read",style:{visibility:l?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:r.toggleDropdown},q.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),q.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},d[r.props.month]))}),F($(r),"renderDropdown",function(l){return q.createElement(yR,{key:"dropdown",month:r.props.month,monthNames:l,onChange:r.onChange,onCancel:r.toggleDropdown})}),F($(r),"renderScrollMode",function(l){var d=r.state.dropdownVisible,u=[r.renderReadView(!d,l)];return d&&u.unshift(r.renderDropdown(l)),u}),F($(r),"onChange",function(l){r.toggleDropdown(),l!==r.props.month&&r.props.onChange(l)}),F($(r),"toggleDropdown",function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})}),r}return zt(n,[{key:"render",value:function(){var r,s=this,a=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(o){return FN(o,s.props.locale)}:function(o){return cv(o,s.props.locale)});switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode(a);break;case"select":r=this.renderSelectMode(a)}return q.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},r)}}]),n}();function _R(t,e){for(var n=[],r=Qs(t),s=Qs(e);!ni(r,s);)n.push(Qe(r)),r=gr(r,1);return n}var wR=ap(function(t){Bt(n,q.Component);var e=Ut(n);function n(r){var s;return $t(this,n),F($(s=e.call(this,r)),"renderOptions",function(){return s.state.monthYearsList.map(function(a){var o=_g(a),l=zs(s.props.date,a)&&ur(s.props.date,a);return q.createElement("div",{className:l?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:o,onClick:s.onChange.bind($(s),o),"aria-selected":l?"true":void 0},l?q.createElement("span",{className:"react-datepicker__month-year-option--selected"},"✓"):"",lt(a,s.props.dateFormat,s.props.locale))})}),F($(s),"onChange",function(a){return s.props.onChange(a)}),F($(s),"handleClickOutside",function(){s.props.onCancel()}),s.state={monthYearsList:_R(s.props.minDate,s.props.maxDate)},s}return zt(n,[{key:"render",value:function(){var r=Zt({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return q.createElement("div",{className:r},this.renderOptions())}}]),n}()),jR=function(t){Bt(n,q.Component);var e=Ut(n);function n(){var r;$t(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return F($(r=e.call.apply(e,[this].concat(a))),"state",{dropdownVisible:!1}),F($(r),"renderSelectOptions",function(){for(var l=Qs(r.props.minDate),d=Qs(r.props.maxDate),u=[];!ni(l,d);){var p=_g(l);u.push(q.createElement("option",{key:p,value:p},lt(l,r.props.dateFormat,r.props.locale))),l=gr(l,1)}return u}),F($(r),"onSelectChange",function(l){r.onChange(l.target.value)}),F($(r),"renderSelectMode",function(){return q.createElement("select",{value:_g(Qs(r.props.date)),className:"react-datepicker__month-year-select",onChange:r.onSelectChange},r.renderSelectOptions())}),F($(r),"renderReadView",function(l){var d=lt(r.props.date,r.props.dateFormat,r.props.locale);return q.createElement("div",{key:"read",style:{visibility:l?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:function(u){return r.toggleDropdown(u)}},q.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),q.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},d))}),F($(r),"renderDropdown",function(){return q.createElement(wR,{key:"dropdown",date:r.props.date,dateFormat:r.props.dateFormat,onChange:r.onChange,onCancel:r.toggleDropdown,minDate:r.props.minDate,maxDate:r.props.maxDate,scrollableMonthYearDropdown:r.props.scrollableMonthYearDropdown,locale:r.props.locale})}),F($(r),"renderScrollMode",function(){var l=r.state.dropdownVisible,d=[r.renderReadView(!l)];return l&&d.unshift(r.renderDropdown()),d}),F($(r),"onChange",function(l){r.toggleDropdown();var d=Qe(parseInt(l));zs(r.props.date,d)&&ur(r.props.date,d)||r.props.onChange(d)}),F($(r),"toggleDropdown",function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})}),r}return zt(n,[{key:"render",value:function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode()}return q.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},r)}}]),n}(),NR=function(t){Bt(n,q.Component);var e=Ut(n);function n(){var r;$t(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return F($(r=e.call.apply(e,[this].concat(a))),"dayEl",q.createRef()),F($(r),"handleClick",function(l){!r.isDisabled()&&r.props.onClick&&r.props.onClick(l)}),F($(r),"handleMouseEnter",function(l){!r.isDisabled()&&r.props.onMouseEnter&&r.props.onMouseEnter(l)}),F($(r),"handleOnKeyDown",function(l){l.key===" "&&(l.preventDefault(),l.key="Enter"),r.props.handleOnKeyDown(l)}),F($(r),"isSameDay",function(l){return et(r.props.day,l)}),F($(r),"isKeyboardSelected",function(){return!r.props.disabledKeyboardNavigation&&!(r.isSameDay(r.props.selected)||r.isSameWeek(r.props.selected))&&(r.isSameDay(r.props.preSelection)||r.isSameWeek(r.props.preSelection))}),F($(r),"isDisabled",function(){return lp(r.props.day,r.props)}),F($(r),"isExcluded",function(){return dv(r.props.day,r.props)}),F($(r),"isStartOfWeek",function(){return et(r.props.day,Fr(r.props.day,r.props.locale,r.props.calendarStartDay))}),F($(r),"isSameWeek",function(l){return r.props.showWeekPicker&&et(l,Fr(r.props.day,r.props.locale,r.props.calendarStartDay))}),F($(r),"getHighLightedClass",function(){var l=r.props,d=l.day,u=l.highlightDates;if(!u)return!1;var p=lt(d,"MM.dd.yyyy");return u.get(p)}),F($(r),"getHolidaysClass",function(){var l=r.props,d=l.day,u=l.holidays;if(!u)return!1;var p=lt(d,"MM.dd.yyyy");return u.has(p)?[u.get(p).className]:void 0}),F($(r),"isInRange",function(){var l=r.props,d=l.day,u=l.startDate,p=l.endDate;return!(!u||!p)&&wu(d,u,p)}),F($(r),"isInSelectingRange",function(){var l,d=r.props,u=d.day,p=d.selectsStart,f=d.selectsEnd,x=d.selectsRange,g=d.selectsDisabledDaysInRange,v=d.startDate,b=d.endDate,j=(l=r.props.selectingDate)!==null&&l!==void 0?l:r.props.preSelection;return!(!(p||f||x)||!j||!g&&r.isDisabled())&&(p&&b&&($s(j,b)||Ri(j,b))?wu(u,j,b):(f&&v&&(ni(j,v)||Ri(j,v))||!(!x||!v||b||!ni(j,v)&&!Ri(j,v)))&&wu(u,v,j))}),F($(r),"isSelectingRangeStart",function(){var l;if(!r.isInSelectingRange())return!1;var d=r.props,u=d.day,p=d.startDate,f=d.selectsStart,x=(l=r.props.selectingDate)!==null&&l!==void 0?l:r.props.preSelection;return et(u,f?x:p)}),F($(r),"isSelectingRangeEnd",function(){var l;if(!r.isInSelectingRange())return!1;var d=r.props,u=d.day,p=d.endDate,f=d.selectsEnd,x=d.selectsRange,g=(l=r.props.selectingDate)!==null&&l!==void 0?l:r.props.preSelection;return et(u,f||x?g:p)}),F($(r),"isRangeStart",function(){var l=r.props,d=l.day,u=l.startDate,p=l.endDate;return!(!u||!p)&&et(u,d)}),F($(r),"isRangeEnd",function(){var l=r.props,d=l.day,u=l.startDate,p=l.endDate;return!(!u||!p)&&et(p,d)}),F($(r),"isWeekend",function(){var l=t6(r.props.day);return l===0||l===6}),F($(r),"isAfterMonth",function(){return r.props.month!==void 0&&(r.props.month+1)%12===rn(r.props.day)}),F($(r),"isBeforeMonth",function(){return r.props.month!==void 0&&(rn(r.props.day)+1)%12===r.props.month}),F($(r),"isCurrentDay",function(){return r.isSameDay(Qe())}),F($(r),"isSelected",function(){return r.isSameDay(r.props.selected)||r.isSameWeek(r.props.selected)}),F($(r),"getClassNames",function(l){var d,u=r.props.dayClassName?r.props.dayClassName(l):void 0;return Zt("react-datepicker__day",u,"react-datepicker__day--"+lt(r.props.day,"ddd",d),{"react-datepicker__day--disabled":r.isDisabled(),"react-datepicker__day--excluded":r.isExcluded(),"react-datepicker__day--selected":r.isSelected(),"react-datepicker__day--keyboard-selected":r.isKeyboardSelected(),"react-datepicker__day--range-start":r.isRangeStart(),"react-datepicker__day--range-end":r.isRangeEnd(),"react-datepicker__day--in-range":r.isInRange(),"react-datepicker__day--in-selecting-range":r.isInSelectingRange(),"react-datepicker__day--selecting-range-start":r.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":r.isSelectingRangeEnd(),"react-datepicker__day--today":r.isCurrentDay(),"react-datepicker__day--weekend":r.isWeekend(),"react-datepicker__day--outside-month":r.isAfterMonth()||r.isBeforeMonth()},r.getHighLightedClass("react-datepicker__day--highlighted"),r.getHolidaysClass())}),F($(r),"getAriaLabel",function(){var l=r.props,d=l.day,u=l.ariaLabelPrefixWhenEnabled,p=u===void 0?"Choose":u,f=l.ariaLabelPrefixWhenDisabled,x=f===void 0?"Not available":f,g=r.isDisabled()||r.isExcluded()?x:p;return"".concat(g," ").concat(lt(d,"PPPP",r.props.locale))}),F($(r),"getTitle",function(){var l=r.props,d=l.day,u=l.holidays,p=u===void 0?new Map:u,f=lt(d,"MM.dd.yyyy");return p.has(f)&&p.get(f).holidayNames.length>0?p.get(f).holidayNames.join(", "):""}),F($(r),"getTabIndex",function(l,d){var u=l||r.props.selected,p=d||r.props.preSelection;return(!r.props.showWeekPicker||!r.props.showWeekNumber&&r.isStartOfWeek())&&(r.isKeyboardSelected()||r.isSameDay(u)&&et(p,u))?0:-1}),F($(r),"handleFocusDay",function(){var l,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=!1;r.getTabIndex()===0&&!d.isInputFocused&&r.isSameDay(r.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(u=!0),r.props.inline&&!r.props.shouldFocusDayInline&&(u=!1),r.props.containerRef&&r.props.containerRef.current&&r.props.containerRef.current.contains(document.activeElement)&&document.activeElement.classList.contains("react-datepicker__day")&&(u=!0),r.props.monthShowsDuplicateDaysEnd&&r.isAfterMonth()&&(u=!1),r.props.monthShowsDuplicateDaysStart&&r.isBeforeMonth()&&(u=!1)),u&&((l=r.dayEl.current)===null||l===void 0||l.focus({preventScroll:!0}))}),F($(r),"renderDayContents",function(){return r.props.monthShowsDuplicateDaysEnd&&r.isAfterMonth()||r.props.monthShowsDuplicateDaysStart&&r.isBeforeMonth()?null:r.props.renderDayContents?r.props.renderDayContents(Tb(r.props.day),r.props.day):Tb(r.props.day)}),F($(r),"render",function(){return q.createElement("div",{ref:r.dayEl,className:r.getClassNames(r.props.day),onKeyDown:r.handleOnKeyDown,onClick:r.handleClick,onMouseEnter:r.handleMouseEnter,tabIndex:r.getTabIndex(),"aria-label":r.getAriaLabel(),role:"option",title:r.getTitle(),"aria-disabled":r.isDisabled(),"aria-current":r.isCurrentDay()?"date":void 0,"aria-selected":r.isSelected()||r.isInRange()},r.renderDayContents(),r.getTitle()!==""&&q.createElement("span",{className:"holiday-overlay"},r.getTitle()))}),r}return zt(n,[{key:"componentDidMount",value:function(){this.handleFocusDay()}},{key:"componentDidUpdate",value:function(r){this.handleFocusDay(r)}}]),n}(),kR=function(t){Bt(n,q.Component);var e=Ut(n);function n(){var r;$t(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return F($(r=e.call.apply(e,[this].concat(a))),"weekNumberEl",q.createRef()),F($(r),"handleClick",function(l){r.props.onClick&&r.props.onClick(l)}),F($(r),"handleOnKeyDown",function(l){l.key===" "&&(l.preventDefault(),l.key="Enter"),r.props.handleOnKeyDown(l)}),F($(r),"isKeyboardSelected",function(){return!r.props.disabledKeyboardNavigation&&!et(r.props.date,r.props.selected)&&et(r.props.date,r.props.preSelection)}),F($(r),"getTabIndex",function(){return r.props.showWeekPicker&&r.props.showWeekNumber&&(r.isKeyboardSelected()||et(r.props.date,r.props.selected)&&et(r.props.preSelection,r.props.selected))?0:-1}),F($(r),"handleFocusWeekNumber",function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=!1;r.getTabIndex()===0&&!l.isInputFocused&&et(r.props.date,r.props.preSelection)&&(document.activeElement&&document.activeElement!==document.body||(d=!0),r.props.inline&&!r.props.shouldFocusDayInline&&(d=!1),r.props.containerRef&&r.props.containerRef.current&&r.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(d=!0)),d&&r.weekNumberEl.current&&r.weekNumberEl.current.focus({preventScroll:!0})}),r}return zt(n,[{key:"componentDidMount",value:function(){this.handleFocusWeekNumber()}},{key:"componentDidUpdate",value:function(r){this.handleFocusWeekNumber(r)}},{key:"render",value:function(){var r=this.props,s=r.weekNumber,a=r.ariaLabelPrefix,o=a===void 0?"week ":a,l={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!r.onClick,"react-datepicker__week-number--selected":et(this.props.date,this.props.selected),"react-datepicker__week-number--keyboard-selected":this.isKeyboardSelected()};return q.createElement("div",{ref:this.weekNumberEl,className:Zt(l),"aria-label":"".concat(o," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},s)}}],[{key:"defaultProps",get:function(){return{ariaLabelPrefix:"week "}}}]),n}(),SR=function(t){Bt(n,q.Component);var e=Ut(n);function n(){var r;$t(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return F($(r=e.call.apply(e,[this].concat(a))),"handleDayClick",function(l,d){r.props.onDayClick&&r.props.onDayClick(l,d)}),F($(r),"handleDayMouseEnter",function(l){r.props.onDayMouseEnter&&r.props.onDayMouseEnter(l)}),F($(r),"handleWeekClick",function(l,d,u){if(typeof r.props.onWeekSelect=="function"&&r.props.onWeekSelect(l,d,u),r.props.showWeekPicker){var p=Fr(l,r.props.locale,r.props.calendarStartDay);r.handleDayClick(p,u)}r.props.shouldCloseOnSelect&&r.props.setOpen(!1)}),F($(r),"formatWeekNumber",function(l){return r.props.formatWeekNumber?r.props.formatWeekNumber(l):function(d,u){var p=Hi()&&Yi(Hi());return i6(d,p?{locale:p}:null)}(l)}),F($(r),"renderDays",function(){var l=Fr(r.props.day,r.props.locale,r.props.calendarStartDay),d=[],u=r.formatWeekNumber(l);if(r.props.showWeekNumber){var p=r.props.onWeekSelect||r.props.showWeekPicker?r.handleWeekClick.bind($(r),l,u):void 0;d.push(q.createElement(kR,{key:"W",weekNumber:u,date:l,onClick:p,selected:r.props.selected,preSelection:r.props.preSelection,ariaLabelPrefix:r.props.ariaLabelPrefix,showWeekPicker:r.props.showWeekPicker,showWeekNumber:r.props.showWeekNumber,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,handleOnKeyDown:r.props.handleOnKeyDown,isInputFocused:r.props.isInputFocused,containerRef:r.props.containerRef}))}return d.concat([0,1,2,3,4,5,6].map(function(f){var x=Ao(l,f);return q.createElement(NR,{ariaLabelPrefixWhenEnabled:r.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:r.props.disabledDayAriaLabelPrefix,key:x.valueOf(),day:x,month:r.props.month,onClick:r.handleDayClick.bind($(r),x),onMouseEnter:r.handleDayMouseEnter.bind($(r),x),minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,highlightDates:r.props.highlightDates,holidays:r.props.holidays,selectingDate:r.props.selectingDate,filterDate:r.props.filterDate,preSelection:r.props.preSelection,selected:r.props.selected,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,showWeekPicker:r.props.showWeekPicker,showWeekNumber:r.props.showWeekNumber,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,startDate:r.props.startDate,endDate:r.props.endDate,dayClassName:r.props.dayClassName,renderDayContents:r.props.renderDayContents,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,handleOnKeyDown:r.props.handleOnKeyDown,isInputFocused:r.props.isInputFocused,containerRef:r.props.containerRef,inline:r.props.inline,shouldFocusDayInline:r.props.shouldFocusDayInline,monthShowsDuplicateDaysEnd:r.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:r.props.monthShowsDuplicateDaysStart,locale:r.props.locale})}))}),F($(r),"startOfWeek",function(){return Fr(r.props.day,r.props.locale,r.props.calendarStartDay)}),F($(r),"isKeyboardSelected",function(){return!r.props.disabledKeyboardNavigation&&!et(r.startOfWeek(),r.props.selected)&&et(r.startOfWeek(),r.props.preSelection)}),r}return zt(n,[{key:"render",value:function(){var r={"react-datepicker__week":!0,"react-datepicker__week--selected":et(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return q.createElement("div",{className:Zt(r)},this.renderDays())}}],[{key:"defaultProps",get:function(){return{shouldCloseOnSelect:!0}}}]),n}(),WN="two_columns",HN="three_columns",YN="four_columns",Bf=F(F(F({},WN,{grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2}),HN,{grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3}),YN,{grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4});function d_(t,e){return t?YN:e?WN:HN}var CR=function(t){Bt(n,q.Component);var e=Ut(n);function n(){var r;$t(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return F($(r=e.call.apply(e,[this].concat(a))),"MONTH_REFS",Cc(Array(12)).map(function(){return q.createRef()})),F($(r),"QUARTER_REFS",Cc(Array(4)).map(function(){return q.createRef()})),F($(r),"isDisabled",function(l){return lp(l,r.props)}),F($(r),"isExcluded",function(l){return dv(l,r.props)}),F($(r),"handleDayClick",function(l,d){r.props.onDayClick&&r.props.onDayClick(l,d,r.props.orderInDisplay)}),F($(r),"handleDayMouseEnter",function(l){r.props.onDayMouseEnter&&r.props.onDayMouseEnter(l)}),F($(r),"handleMouseLeave",function(){r.props.onMouseLeave&&r.props.onMouseLeave()}),F($(r),"isRangeStartMonth",function(l){var d=r.props,u=d.day,p=d.startDate,f=d.endDate;return!(!p||!f)&&ur(dn(u,l),p)}),F($(r),"isRangeStartQuarter",function(l){var d=r.props,u=d.day,p=d.startDate,f=d.endDate;return!(!p||!f)&&xh(Ta(u,l),p)}),F($(r),"isRangeEndMonth",function(l){var d=r.props,u=d.day,p=d.startDate,f=d.endDate;return!(!p||!f)&&ur(dn(u,l),f)}),F($(r),"isRangeEndQuarter",function(l){var d=r.props,u=d.day,p=d.startDate,f=d.endDate;return!(!p||!f)&&xh(Ta(u,l),f)}),F($(r),"isInSelectingRangeMonth",function(l){var d,u=r.props,p=u.day,f=u.selectsStart,x=u.selectsEnd,g=u.selectsRange,v=u.startDate,b=u.endDate,j=(d=r.props.selectingDate)!==null&&d!==void 0?d:r.props.preSelection;return!(!(f||x||g)||!j)&&(f&&b?Ff(j,b,l,p):(x&&v||!(!g||!v||b))&&Ff(v,j,l,p))}),F($(r),"isSelectingMonthRangeStart",function(l){var d;if(!r.isInSelectingRangeMonth(l))return!1;var u=r.props,p=u.day,f=u.startDate,x=u.selectsStart,g=dn(p,l),v=(d=r.props.selectingDate)!==null&&d!==void 0?d:r.props.preSelection;return ur(g,x?v:f)}),F($(r),"isSelectingMonthRangeEnd",function(l){var d;if(!r.isInSelectingRangeMonth(l))return!1;var u=r.props,p=u.day,f=u.endDate,x=u.selectsEnd,g=u.selectsRange,v=dn(p,l),b=(d=r.props.selectingDate)!==null&&d!==void 0?d:r.props.preSelection;return ur(v,x||g?b:f)}),F($(r),"isInSelectingRangeQuarter",function(l){var d,u=r.props,p=u.day,f=u.selectsStart,x=u.selectsEnd,g=u.selectsRange,v=u.startDate,b=u.endDate,j=(d=r.props.selectingDate)!==null&&d!==void 0?d:r.props.preSelection;return!(!(f||x||g)||!j)&&(f&&b?zf(j,b,l,p):(x&&v||!(!g||!v||b))&&zf(v,j,l,p))}),F($(r),"isWeekInMonth",function(l){var d=r.props.day,u=Ao(l,6);return ur(l,d)||ur(u,d)}),F($(r),"isCurrentMonth",function(l,d){return Me(l)===Me(Qe())&&d===rn(Qe())}),F($(r),"isCurrentQuarter",function(l,d){return Me(l)===Me(Qe())&&d===Ha(Qe())}),F($(r),"isSelectedMonth",function(l,d,u){return rn(u)===d&&Me(l)===Me(u)}),F($(r),"isSelectedQuarter",function(l,d,u){return Ha(l)===d&&Me(l)===Me(u)}),F($(r),"renderWeeks",function(){for(var l=[],d=r.props.fixedHeight,u=0,p=!1,f=Fr(Qs(r.props.day),r.props.locale,r.props.calendarStartDay);l.push(q.createElement(SR,{ariaLabelPrefix:r.props.weekAriaLabelPrefix,chooseDayAriaLabelPrefix:r.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:r.props.disabledDayAriaLabelPrefix,key:u,day:f,month:rn(r.props.day),onDayClick:r.handleDayClick,onDayMouseEnter:r.handleDayMouseEnter,onWeekSelect:r.props.onWeekSelect,formatWeekNumber:r.props.formatWeekNumber,locale:r.props.locale,minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDates:r.props.includeDates,includeDateIntervals:r.props.includeDateIntervals,inline:r.props.inline,shouldFocusDayInline:r.props.shouldFocusDayInline,highlightDates:r.props.highlightDates,holidays:r.props.holidays,selectingDate:r.props.selectingDate,filterDate:r.props.filterDate,preSelection:r.props.preSelection,selected:r.props.selected,selectsStart:r.props.selectsStart,selectsEnd:r.props.selectsEnd,selectsRange:r.props.selectsRange,selectsDisabledDaysInRange:r.props.selectsDisabledDaysInRange,showWeekNumber:r.props.showWeekNumbers,showWeekPicker:r.props.showWeekPicker,startDate:r.props.startDate,endDate:r.props.endDate,dayClassName:r.props.dayClassName,setOpen:r.props.setOpen,shouldCloseOnSelect:r.props.shouldCloseOnSelect,disabledKeyboardNavigation:r.props.disabledKeyboardNavigation,renderDayContents:r.props.renderDayContents,handleOnKeyDown:r.props.handleOnKeyDown,isInputFocused:r.props.isInputFocused,containerRef:r.props.containerRef,calendarStartDay:r.props.calendarStartDay,monthShowsDuplicateDaysEnd:r.props.monthShowsDuplicateDaysEnd,monthShowsDuplicateDaysStart:r.props.monthShowsDuplicateDaysStart})),!p;){u++,f=oh(f,1);var x=d&&u>=6,g=!d&&!r.isWeekInMonth(f);if(x||g){if(!r.props.peekNextMonth)break;p=!0}}return l}),F($(r),"onMonthClick",function(l,d){r.handleDayClick(Qs(dn(r.props.day,d)),l)}),F($(r),"onMonthMouseEnter",function(l){r.handleDayMouseEnter(Qs(dn(r.props.day,l)))}),F($(r),"handleMonthNavigation",function(l,d){r.isDisabled(d)||r.isExcluded(d)||(r.props.setPreSelection(d),r.MONTH_REFS[l].current&&r.MONTH_REFS[l].current.focus())}),F($(r),"onMonthKeyDown",function(l,d){var u=r.props,p=u.selected,f=u.preSelection,x=u.disabledKeyboardNavigation,g=u.showTwoColumnMonthYearPicker,v=u.showFourColumnMonthYearPicker,b=u.setPreSelection,j=l.key;if(j!=="Tab"&&l.preventDefault(),!x){var _=d_(v,g),N=Bf[_].verticalNavigationOffset,S=Bf[_].grid;switch(j){case"Enter":r.onMonthClick(l,d),b(p);break;case"ArrowRight":r.handleMonthNavigation(d===11?0:d+1,gr(f,1));break;case"ArrowLeft":r.handleMonthNavigation(d===0?11:d-1,go(f,1));break;case"ArrowUp":r.handleMonthNavigation(S[0].includes(d)?d+12-N:d-N,go(f,N));break;case"ArrowDown":r.handleMonthNavigation(S[S.length-1].includes(d)?d-12+N:d+N,gr(f,N))}}}),F($(r),"onQuarterClick",function(l,d){r.handleDayClick(Xb(Ta(r.props.day,d)),l)}),F($(r),"onQuarterMouseEnter",function(l){r.handleDayMouseEnter(Xb(Ta(r.props.day,l)))}),F($(r),"handleQuarterNavigation",function(l,d){r.isDisabled(d)||r.isExcluded(d)||(r.props.setPreSelection(d),r.QUARTER_REFS[l-1].current&&r.QUARTER_REFS[l-1].current.focus())}),F($(r),"onQuarterKeyDown",function(l,d){var u=l.key;if(!r.props.disabledKeyboardNavigation)switch(u){case"Enter":r.onQuarterClick(l,d),r.props.setPreSelection(r.props.selected);break;case"ArrowRight":r.handleQuarterNavigation(d===4?1:d+1,pN(r.props.preSelection,1));break;case"ArrowLeft":r.handleQuarterNavigation(d===1?4:d-1,e6(r.props.preSelection,1))}}),F($(r),"getMonthClassNames",function(l){var d=r.props,u=d.day,p=d.startDate,f=d.endDate,x=d.selected,g=d.minDate,v=d.maxDate,b=d.preSelection,j=d.monthClassName,_=d.excludeDates,N=d.includeDates,S=j?j(dn(u,l)):void 0,P=dn(u,l);return Zt("react-datepicker__month-text","react-datepicker__month-".concat(l),S,{"react-datepicker__month-text--disabled":(g||v||_||N)&&$N(P,r.props),"react-datepicker__month-text--selected":r.isSelectedMonth(u,l,x),"react-datepicker__month-text--keyboard-selected":!r.props.disabledKeyboardNavigation&&rn(b)===l,"react-datepicker__month-text--in-selecting-range":r.isInSelectingRangeMonth(l),"react-datepicker__month-text--in-range":Ff(p,f,l,u),"react-datepicker__month-text--range-start":r.isRangeStartMonth(l),"react-datepicker__month-text--range-end":r.isRangeEndMonth(l),"react-datepicker__month-text--selecting-range-start":r.isSelectingMonthRangeStart(l),"react-datepicker__month-text--selecting-range-end":r.isSelectingMonthRangeEnd(l),"react-datepicker__month-text--today":r.isCurrentMonth(u,l)})}),F($(r),"getTabIndex",function(l){var d=rn(r.props.preSelection);return r.props.disabledKeyboardNavigation||l!==d?"-1":"0"}),F($(r),"getQuarterTabIndex",function(l){var d=Ha(r.props.preSelection);return r.props.disabledKeyboardNavigation||l!==d?"-1":"0"}),F($(r),"getAriaLabel",function(l){var d=r.props,u=d.chooseDayAriaLabelPrefix,p=u===void 0?"Choose":u,f=d.disabledDayAriaLabelPrefix,x=f===void 0?"Not available":f,g=d.day,v=dn(g,l),b=r.isDisabled(v)||r.isExcluded(v)?x:p;return"".concat(b," ").concat(lt(v,"MMMM yyyy"))}),F($(r),"getQuarterClassNames",function(l){var d=r.props,u=d.day,p=d.startDate,f=d.endDate,x=d.selected,g=d.minDate,v=d.maxDate,b=d.preSelection,j=d.disabledKeyboardNavigation;return Zt("react-datepicker__quarter-text","react-datepicker__quarter-".concat(l),{"react-datepicker__quarter-text--disabled":(g||v)&&pR(Ta(u,l),r.props),"react-datepicker__quarter-text--selected":r.isSelectedQuarter(u,l,x),"react-datepicker__quarter-text--keyboard-selected":!j&&Ha(b)===l,"react-datepicker__quarter-text--in-selecting-range":r.isInSelectingRangeQuarter(l),"react-datepicker__quarter-text--in-range":zf(p,f,l,u),"react-datepicker__quarter-text--range-start":r.isRangeStartQuarter(l),"react-datepicker__quarter-text--range-end":r.isRangeEndQuarter(l)})}),F($(r),"getMonthContent",function(l){var d=r.props,u=d.showFullMonthYearPicker,p=d.renderMonthContent,f=d.locale,x=d.day,g=FN(l,f),v=cv(l,f);return p?p(l,g,v,x):u?v:g}),F($(r),"getQuarterContent",function(l){var d=r.props,u=d.renderQuarterContent,p=function(f,x){return lt(Ta(Qe(),f),"QQQ",x)}(l,d.locale);return u?u(l,p):p}),F($(r),"renderMonths",function(){var l=r.props,d=l.showTwoColumnMonthYearPicker,u=l.showFourColumnMonthYearPicker,p=l.day,f=l.selected;return Bf[d_(u,d)].grid.map(function(x,g){return q.createElement("div",{className:"react-datepicker__month-wrapper",key:g},x.map(function(v,b){return q.createElement("div",{ref:r.MONTH_REFS[v],key:b,onClick:function(j){r.onMonthClick(j,v)},onKeyDown:function(j){r.onMonthKeyDown(j,v)},onMouseEnter:function(){return r.onMonthMouseEnter(v)},tabIndex:r.getTabIndex(v),className:r.getMonthClassNames(v),role:"option","aria-label":r.getAriaLabel(v),"aria-current":r.isCurrentMonth(p,v)?"date":void 0,"aria-selected":r.isSelectedMonth(p,v,f)},r.getMonthContent(v))}))})}),F($(r),"renderQuarters",function(){var l=r.props,d=l.day,u=l.selected;return q.createElement("div",{className:"react-datepicker__quarter-wrapper"},[1,2,3,4].map(function(p,f){return q.createElement("div",{key:f,ref:r.QUARTER_REFS[f],role:"option",onClick:function(x){r.onQuarterClick(x,p)},onKeyDown:function(x){r.onQuarterKeyDown(x,p)},onMouseEnter:function(){return r.onQuarterMouseEnter(p)},className:r.getQuarterClassNames(p),"aria-selected":r.isSelectedQuarter(d,p,u),tabIndex:r.getQuarterTabIndex(p),"aria-current":r.isCurrentQuarter(d,p)?"date":void 0},r.getQuarterContent(p))}))}),F($(r),"getClassNames",function(){var l=r.props,d=l.selectingDate,u=l.selectsStart,p=l.selectsEnd,f=l.showMonthYearPicker,x=l.showQuarterYearPicker,g=l.showWeekPicker;return Zt("react-datepicker__month",{"react-datepicker__month--selecting-range":d&&(u||p)},{"react-datepicker__monthPicker":f},{"react-datepicker__quarterPicker":x},{"react-datepicker__weekPicker":g})}),r}return zt(n,[{key:"render",value:function(){var r=this.props,s=r.showMonthYearPicker,a=r.showQuarterYearPicker,o=r.day,l=r.ariaLabelPrefix,d=l===void 0?"month ":l;return q.createElement("div",{className:this.getClassNames(),onMouseLeave:this.handleMouseLeave,"aria-label":"".concat(d," ").concat(lt(o,"yyyy-MM")),role:"listbox"},s?this.renderMonths():a?this.renderQuarters():this.renderWeeks())}}]),n}(),VN=function(t){Bt(n,q.Component);var e=Ut(n);function n(){var r;$t(this,n);for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return F($(r=e.call.apply(e,[this].concat(a))),"state",{height:null}),F($(r),"scrollToTheSelectedTime",function(){requestAnimationFrame(function(){r.list&&(r.list.scrollTop=r.centerLi&&n.calcCenterPosition(r.props.monthRef?r.props.monthRef.clientHeight-r.header.clientHeight:r.list.clientHeight,r.centerLi))})}),F($(r),"handleClick",function(l){(r.props.minTime||r.props.maxTime)&&n_(l,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&t_(l,r.props)||r.props.onChange(l)}),F($(r),"isSelectedTime",function(l){return r.props.selected&&(d=r.props.selected,u=l,c_(d).getTime()===c_(u).getTime());var d,u}),F($(r),"isDisabledTime",function(l){return(r.props.minTime||r.props.maxTime)&&n_(l,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&t_(l,r.props)}),F($(r),"liClasses",function(l){var d=["react-datepicker__time-list-item",r.props.timeClassName?r.props.timeClassName(l):void 0];return r.isSelectedTime(l)&&d.push("react-datepicker__time-list-item--selected"),r.isDisabledTime(l)&&d.push("react-datepicker__time-list-item--disabled"),r.props.injectTimes&&(60*Ar(l)+Lr(l))%r.props.intervals!=0&&d.push("react-datepicker__time-list-item--injected"),d.join(" ")}),F($(r),"handleOnKeyDown",function(l,d){l.key===" "&&(l.preventDefault(),l.key="Enter"),l.key!=="ArrowUp"&&l.key!=="ArrowLeft"||!l.target.previousSibling||(l.preventDefault(),l.target.previousSibling.focus()),l.key!=="ArrowDown"&&l.key!=="ArrowRight"||!l.target.nextSibling||(l.preventDefault(),l.target.nextSibling.focus()),l.key==="Enter"&&r.handleClick(d),r.props.handleOnKeyDown(l)}),F($(r),"renderTimes",function(){for(var l=[],d=r.props.format?r.props.format:"p",u=r.props.intervals,p=r.props.selected||r.props.openToDate||Qe(),f=Ir(p),x=r.props.injectTimes&&r.props.injectTimes.sort(function(S,P){return S-P}),g=60*function(S){var P=new Date(S.getFullYear(),S.getMonth(),S.getDate()),M=new Date(S.getFullYear(),S.getMonth(),S.getDate(),24);return Math.round((+M-+P)/36e5)}(p),v=g/u,b=0;b<v;b++){var j=bg(f,b*u);if(l.push(j),x){var _=mR(f,j,b,u,x);l=l.concat(_)}}var N=l.reduce(function(S,P){return P.getTime()<=p.getTime()?P:S},l[0]);return l.map(function(S,P){return q.createElement("li",{key:P,onClick:r.handleClick.bind($(r),S),className:r.liClasses(S),ref:function(M){S===N&&(r.centerLi=M)},onKeyDown:function(M){r.handleOnKeyDown(M,S)},tabIndex:S===N?0:-1,role:"option","aria-selected":r.isSelectedTime(S)?"true":void 0,"aria-disabled":r.isDisabledTime(S)?"true":void 0},lt(S,d,r.props.locale))})}),r}return zt(n,[{key:"componentDidMount",value:function(){this.scrollToTheSelectedTime(),this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})}},{key:"render",value:function(){var r=this,s=this.state.height;return q.createElement("div",{className:"react-datepicker__time-container ".concat(this.props.todayButton?"react-datepicker__time-container--with-today-button":"")},q.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(this.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(a){r.header=a}},q.createElement("div",{className:"react-datepicker-time__header"},this.props.timeCaption)),q.createElement("div",{className:"react-datepicker__time"},q.createElement("div",{className:"react-datepicker__time-box"},q.createElement("ul",{className:"react-datepicker__time-list",ref:function(a){r.list=a},style:s?{height:s}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))}}],[{key:"defaultProps",get:function(){return{intervals:30,onTimeChange:function(){},todayButton:null,timeCaption:"Time"}}}]),n}();F(VN,"calcCenterPosition",function(t,e){return e.offsetTop-(t/2-e.clientHeight/2)});var ER=function(t){Bt(n,q.Component);var e=Ut(n);function n(r){var s;return $t(this,n),F($(s=e.call(this,r)),"YEAR_REFS",Cc(Array(s.props.yearItemNumber)).map(function(){return q.createRef()})),F($(s),"isDisabled",function(a){return lp(a,s.props)}),F($(s),"isExcluded",function(a){return dv(a,s.props)}),F($(s),"selectingDate",function(){var a;return(a=s.props.selectingDate)!==null&&a!==void 0?a:s.props.preSelection}),F($(s),"updateFocusOnPaginate",function(a){var o=(function(){this.YEAR_REFS[a].current.focus()}).bind($(s));window.requestAnimationFrame(o)}),F($(s),"handleYearClick",function(a,o){s.props.onDayClick&&s.props.onDayClick(a,o)}),F($(s),"handleYearNavigation",function(a,o){var l=s.props,d=l.date,u=l.yearItemNumber,p=Ya(d,u).startPeriod;s.isDisabled(o)||s.isExcluded(o)||(s.props.setPreSelection(o),a-p==-1?s.updateFocusOnPaginate(u-1):a-p===u?s.updateFocusOnPaginate(0):s.YEAR_REFS[a-p].current.focus())}),F($(s),"isSameDay",function(a,o){return et(a,o)}),F($(s),"isCurrentYear",function(a){return a===Me(Qe())}),F($(s),"isRangeStart",function(a){return s.props.startDate&&s.props.endDate&&zs(ns(Qe(),a),s.props.startDate)}),F($(s),"isRangeEnd",function(a){return s.props.startDate&&s.props.endDate&&zs(ns(Qe(),a),s.props.endDate)}),F($(s),"isInRange",function(a){return $f(a,s.props.startDate,s.props.endDate)}),F($(s),"isInSelectingRange",function(a){var o=s.props,l=o.selectsStart,d=o.selectsEnd,u=o.selectsRange,p=o.startDate,f=o.endDate;return!(!(l||d||u)||!s.selectingDate())&&(l&&f?$f(a,s.selectingDate(),f):(d&&p||!(!u||!p||f))&&$f(a,p,s.selectingDate()))}),F($(s),"isSelectingRangeStart",function(a){if(!s.isInSelectingRange(a))return!1;var o=s.props,l=o.startDate,d=o.selectsStart,u=ns(Qe(),a);return zs(u,d?s.selectingDate():l)}),F($(s),"isSelectingRangeEnd",function(a){if(!s.isInSelectingRange(a))return!1;var o=s.props,l=o.endDate,d=o.selectsEnd,u=o.selectsRange,p=ns(Qe(),a);return zs(p,d||u?s.selectingDate():l)}),F($(s),"isKeyboardSelected",function(a){var o=Sl(ns(s.props.date,a));return!s.props.disabledKeyboardNavigation&&!s.props.inline&&!et(o,Sl(s.props.selected))&&et(o,Sl(s.props.preSelection))}),F($(s),"onYearClick",function(a,o){var l=s.props.date;s.handleYearClick(Sl(ns(l,o)),a)}),F($(s),"onYearKeyDown",function(a,o){var l=a.key;if(!s.props.disabledKeyboardNavigation)switch(l){case"Enter":s.onYearClick(a,o),s.props.setPreSelection(s.props.selected);break;case"ArrowRight":s.handleYearNavigation(o+1,mo(s.props.preSelection,1));break;case"ArrowLeft":s.handleYearNavigation(o-1,jc(s.props.preSelection,1))}}),F($(s),"getYearClassNames",function(a){var o=s.props,l=o.minDate,d=o.maxDate,u=o.selected,p=o.excludeDates,f=o.includeDates,x=o.filterDate;return Zt("react-datepicker__year-text",{"react-datepicker__year-text--selected":a===Me(u),"react-datepicker__year-text--disabled":(l||d||p||f||x)&&zN(a,s.props),"react-datepicker__year-text--keyboard-selected":s.isKeyboardSelected(a),"react-datepicker__year-text--range-start":s.isRangeStart(a),"react-datepicker__year-text--range-end":s.isRangeEnd(a),"react-datepicker__year-text--in-range":s.isInRange(a),"react-datepicker__year-text--in-selecting-range":s.isInSelectingRange(a),"react-datepicker__year-text--selecting-range-start":s.isSelectingRangeStart(a),"react-datepicker__year-text--selecting-range-end":s.isSelectingRangeEnd(a),"react-datepicker__year-text--today":s.isCurrentYear(a)})}),F($(s),"getYearTabIndex",function(a){return s.props.disabledKeyboardNavigation?"-1":a===Me(s.props.preSelection)?"0":"-1"}),F($(s),"getYearContainerClassNames",function(){var a=s.props,o=a.selectingDate,l=a.selectsStart,d=a.selectsEnd,u=a.selectsRange;return Zt("react-datepicker__year",{"react-datepicker__year--selecting-range":o&&(l||d||u)})}),F($(s),"getYearContent",function(a){return s.props.renderYearContent?s.props.renderYearContent(a):a}),s}return zt(n,[{key:"render",value:function(){for(var r=this,s=[],a=this.props,o=a.date,l=a.yearItemNumber,d=a.onYearMouseEnter,u=a.onYearMouseLeave,p=Ya(o,l),f=p.startPeriod,x=p.endPeriod,g=function(b){s.push(q.createElement("div",{ref:r.YEAR_REFS[b-f],onClick:function(j){r.onYearClick(j,b)},onKeyDown:function(j){r.onYearKeyDown(j,b)},tabIndex:r.getYearTabIndex(b),className:r.getYearClassNames(b),onMouseEnter:function(j){return d(j,b)},onMouseLeave:function(j){return u(j,b)},key:b,"aria-current":r.isCurrentYear(b)?"date":void 0},r.getYearContent(b)))},v=f;v<=x;v++)g(v);return q.createElement("div",{className:this.getYearContainerClassNames()},q.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.clearSelectingDate},s))}}]),n}(),TR=function(t){Bt(n,q.Component);var e=Ut(n);function n(r){var s;return $t(this,n),F($(s=e.call(this,r)),"onTimeChange",function(a){s.setState({time:a});var o=s.props.date,l=o instanceof Date&&!isNaN(o)?o:new Date;l.setHours(a.split(":")[0]),l.setMinutes(a.split(":")[1]),s.props.onChange(l)}),F($(s),"renderTimeInput",function(){var a=s.state.time,o=s.props,l=o.date,d=o.timeString,u=o.customTimeInput;return u?q.cloneElement(u,{date:l,value:a,onChange:s.onTimeChange}):q.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",required:!0,value:a,onChange:function(p){s.onTimeChange(p.target.value||d)}})}),s.state={time:s.props.timeString},s}return zt(n,[{key:"render",value:function(){return q.createElement("div",{className:"react-datepicker__input-time-container"},q.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),q.createElement("div",{className:"react-datepicker-time__input-container"},q.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.timeString!==s.time?{time:r.timeString}:null}}]),n}();function PR(t){var e=t.className,n=t.children,r=t.showPopperArrow,s=t.arrowProps,a=s===void 0?{}:s;return q.createElement("div",{className:e},r&&q.createElement("div",_o({className:"react-datepicker__triangle"},a)),n)}var DR=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],OR=function(t){Bt(n,q.Component);var e=Ut(n);function n(r){var s;return $t(this,n),F($(s=e.call(this,r)),"handleClickOutside",function(a){s.props.onClickOutside(a)}),F($(s),"setClickOutsideRef",function(){return s.containerRef.current}),F($(s),"handleDropdownFocus",function(a){(function(){var o=((arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).className||"").split(/\s+/);return DR.some(function(l){return o.indexOf(l)>=0})})(a.target)&&s.props.onDropdownFocus()}),F($(s),"getDateInView",function(){var a=s.props,o=a.preSelection,l=a.selected,d=a.openToDate,u=BN(s.props),p=UN(s.props),f=Qe(),x=d||l||o;return x||(u&&$s(f,u)?u:p&&ni(f,p)?p:f)}),F($(s),"increaseMonth",function(){s.setState(function(a){var o=a.date;return{date:gr(o,1)}},function(){return s.handleMonthChange(s.state.date)})}),F($(s),"decreaseMonth",function(){s.setState(function(a){var o=a.date;return{date:go(o,1)}},function(){return s.handleMonthChange(s.state.date)})}),F($(s),"handleDayClick",function(a,o,l){s.props.onSelect(a,o,l),s.props.setPreSelection&&s.props.setPreSelection(a)}),F($(s),"handleDayMouseEnter",function(a){s.setState({selectingDate:a}),s.props.onDayMouseEnter&&s.props.onDayMouseEnter(a)}),F($(s),"handleMonthMouseLeave",function(){s.setState({selectingDate:null}),s.props.onMonthMouseLeave&&s.props.onMonthMouseLeave()}),F($(s),"handleYearMouseEnter",function(a,o){s.setState({selectingDate:ns(Qe(),o)}),s.props.onYearMouseEnter&&s.props.onYearMouseEnter(a,o)}),F($(s),"handleYearMouseLeave",function(a,o){s.props.onYearMouseLeave&&s.props.onYearMouseLeave(a,o)}),F($(s),"handleYearChange",function(a){s.props.onYearChange&&(s.props.onYearChange(a),s.setState({isRenderAriaLiveMessage:!0})),s.props.adjustDateOnChange&&(s.props.onSelect&&s.props.onSelect(a),s.props.setOpen&&s.props.setOpen(!0)),s.props.setPreSelection&&s.props.setPreSelection(a)}),F($(s),"handleMonthChange",function(a){s.handleCustomMonthChange(a),s.props.adjustDateOnChange&&(s.props.onSelect&&s.props.onSelect(a),s.props.setOpen&&s.props.setOpen(!0)),s.props.setPreSelection&&s.props.setPreSelection(a)}),F($(s),"handleCustomMonthChange",function(a){s.props.onMonthChange&&(s.props.onMonthChange(a),s.setState({isRenderAriaLiveMessage:!0}))}),F($(s),"handleMonthYearChange",function(a){s.handleYearChange(a),s.handleMonthChange(a)}),F($(s),"changeYear",function(a){s.setState(function(o){var l=o.date;return{date:ns(l,a)}},function(){return s.handleYearChange(s.state.date)})}),F($(s),"changeMonth",function(a){s.setState(function(o){var l=o.date;return{date:dn(l,a)}},function(){return s.handleMonthChange(s.state.date)})}),F($(s),"changeMonthYear",function(a){s.setState(function(o){var l=o.date;return{date:ns(dn(l,rn(a)),Me(a))}},function(){return s.handleMonthYearChange(s.state.date)})}),F($(s),"header",function(){var a=Fr(arguments.length>0&&arguments[0]!==void 0?arguments[0]:s.state.date,s.props.locale,s.props.calendarStartDay),o=[];return s.props.showWeekNumbers&&o.push(q.createElement("div",{key:"W",className:"react-datepicker__day-name"},s.props.weekLabel||"#")),o.concat([0,1,2,3,4,5,6].map(function(l){var d=Ao(a,l),u=s.formatWeekday(d,s.props.locale),p=s.props.weekDayClassName?s.props.weekDayClassName(d):void 0;return q.createElement("div",{key:l,className:Zt("react-datepicker__day-name",p)},u)}))}),F($(s),"formatWeekday",function(a,o){return s.props.formatWeekDay?function(l,d,u){return d(lt(l,"EEEE",u))}(a,s.props.formatWeekDay,o):s.props.useWeekdaysShort?function(l,d){return lt(l,"EEE",d)}(a,o):function(l,d){return lt(l,"EEEEEE",d)}(a,o)}),F($(s),"decreaseYear",function(){s.setState(function(a){var o=a.date;return{date:jc(o,s.props.showYearPicker?s.props.yearItemNumber:1)}},function(){return s.handleYearChange(s.state.date)})}),F($(s),"clearSelectingDate",function(){s.setState({selectingDate:null})}),F($(s),"renderPreviousButton",function(){if(!s.props.renderCustomHeader){var a;switch(!0){case s.props.showMonthYearPicker:a=i_(s.state.date,s.props);break;case s.props.showYearPicker:a=function(_){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},S=N.minDate,P=N.yearItemNumber,M=P===void 0?ql:P,R=Ya(Sl(jc(_,M)),M).endPeriod,A=S&&Me(S);return A&&A>R||!1}(s.state.date,s.props);break;default:a=r_(s.state.date,s.props)}if((s.props.forceShowMonthNavigation||s.props.showDisabledMonthNavigation||!a)&&!s.props.showTimeSelectOnly){var o=["react-datepicker__navigation","react-datepicker__navigation--previous"],l=s.decreaseMonth;(s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker)&&(l=s.decreaseYear),a&&s.props.showDisabledMonthNavigation&&(o.push("react-datepicker__navigation--previous--disabled"),l=null);var d=s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker,u=s.props,p=u.previousMonthButtonLabel,f=u.previousYearButtonLabel,x=s.props,g=x.previousMonthAriaLabel,v=g===void 0?typeof p=="string"?p:"Previous Month":g,b=x.previousYearAriaLabel,j=b===void 0?typeof f=="string"?f:"Previous Year":b;return q.createElement("button",{type:"button",className:o.join(" "),onClick:l,onKeyDown:s.props.handleOnKeyDown,"aria-label":d?j:v},q.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"].join(" ")},d?s.props.previousYearButtonLabel:s.props.previousMonthButtonLabel))}}}),F($(s),"increaseYear",function(){s.setState(function(a){var o=a.date;return{date:mo(o,s.props.showYearPicker?s.props.yearItemNumber:1)}},function(){return s.handleYearChange(s.state.date)})}),F($(s),"renderNextButton",function(){if(!s.props.renderCustomHeader){var a;switch(!0){case s.props.showMonthYearPicker:a=a_(s.state.date,s.props);break;case s.props.showYearPicker:a=function(_){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},S=N.maxDate,P=N.yearItemNumber,M=P===void 0?ql:P,R=Ya(mo(_,M),M).startPeriod,A=S&&Me(S);return A&&A<R||!1}(s.state.date,s.props);break;default:a=s_(s.state.date,s.props)}if((s.props.forceShowMonthNavigation||s.props.showDisabledMonthNavigation||!a)&&!s.props.showTimeSelectOnly){var o=["react-datepicker__navigation","react-datepicker__navigation--next"];s.props.showTimeSelect&&o.push("react-datepicker__navigation--next--with-time"),s.props.todayButton&&o.push("react-datepicker__navigation--next--with-today-button");var l=s.increaseMonth;(s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker)&&(l=s.increaseYear),a&&s.props.showDisabledMonthNavigation&&(o.push("react-datepicker__navigation--next--disabled"),l=null);var d=s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker,u=s.props,p=u.nextMonthButtonLabel,f=u.nextYearButtonLabel,x=s.props,g=x.nextMonthAriaLabel,v=g===void 0?typeof p=="string"?p:"Next Month":g,b=x.nextYearAriaLabel,j=b===void 0?typeof f=="string"?f:"Next Year":b;return q.createElement("button",{type:"button",className:o.join(" "),onClick:l,onKeyDown:s.props.handleOnKeyDown,"aria-label":d?j:v},q.createElement("span",{className:["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"].join(" ")},d?s.props.nextYearButtonLabel:s.props.nextMonthButtonLabel))}}}),F($(s),"renderCurrentMonth",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s.state.date,o=["react-datepicker__current-month"];return s.props.showYearDropdown&&o.push("react-datepicker__current-month--hasYearDropdown"),s.props.showMonthDropdown&&o.push("react-datepicker__current-month--hasMonthDropdown"),s.props.showMonthYearDropdown&&o.push("react-datepicker__current-month--hasMonthYearDropdown"),q.createElement("div",{className:o.join(" ")},lt(a,s.props.dateFormat,s.props.locale))}),F($(s),"renderYearDropdown",function(){var a=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(s.props.showYearDropdown&&!a)return q.createElement(vR,{adjustDateOnChange:s.props.adjustDateOnChange,date:s.state.date,onSelect:s.props.onSelect,setOpen:s.props.setOpen,dropdownMode:s.props.dropdownMode,onChange:s.changeYear,minDate:s.props.minDate,maxDate:s.props.maxDate,year:Me(s.state.date),scrollableYearDropdown:s.props.scrollableYearDropdown,yearDropdownItemNumber:s.props.yearDropdownItemNumber})}),F($(s),"renderMonthDropdown",function(){var a=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(s.props.showMonthDropdown&&!a)return q.createElement(bR,{dropdownMode:s.props.dropdownMode,locale:s.props.locale,onChange:s.changeMonth,month:rn(s.state.date),useShortMonthInDropdown:s.props.useShortMonthInDropdown})}),F($(s),"renderMonthYearDropdown",function(){var a=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(s.props.showMonthYearDropdown&&!a)return q.createElement(jR,{dropdownMode:s.props.dropdownMode,locale:s.props.locale,dateFormat:s.props.dateFormat,onChange:s.changeMonthYear,minDate:s.props.minDate,maxDate:s.props.maxDate,date:s.state.date,scrollableMonthYearDropdown:s.props.scrollableMonthYearDropdown})}),F($(s),"handleTodayButtonClick",function(a){s.props.onSelect(Jb(),a),s.props.setPreSelection&&s.props.setPreSelection(Jb())}),F($(s),"renderTodayButton",function(){if(s.props.todayButton&&!s.props.showTimeSelectOnly)return q.createElement("div",{className:"react-datepicker__today-button",onClick:function(a){return s.handleTodayButtonClick(a)}},s.props.todayButton)}),F($(s),"renderDefaultHeader",function(a){var o=a.monthDate,l=a.i;return q.createElement("div",{className:"react-datepicker__header ".concat(s.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},s.renderCurrentMonth(o),q.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(s.props.dropdownMode),onFocus:s.handleDropdownFocus},s.renderMonthDropdown(l!==0),s.renderMonthYearDropdown(l!==0),s.renderYearDropdown(l!==0)),q.createElement("div",{className:"react-datepicker__day-names"},s.header(o)))}),F($(s),"renderCustomHeader",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=a.monthDate,l=a.i;if(s.props.showTimeSelect&&!s.state.monthContainer||s.props.showTimeSelectOnly)return null;var d=r_(s.state.date,s.props),u=s_(s.state.date,s.props),p=i_(s.state.date,s.props),f=a_(s.state.date,s.props),x=!s.props.showMonthYearPicker&&!s.props.showQuarterYearPicker&&!s.props.showYearPicker;return q.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:s.props.onDropdownFocus},s.props.renderCustomHeader(mh(mh({},s.state),{},{customHeaderCount:l,monthDate:o,changeMonth:s.changeMonth,changeYear:s.changeYear,decreaseMonth:s.decreaseMonth,increaseMonth:s.increaseMonth,decreaseYear:s.decreaseYear,increaseYear:s.increaseYear,prevMonthButtonDisabled:d,nextMonthButtonDisabled:u,prevYearButtonDisabled:p,nextYearButtonDisabled:f})),x&&q.createElement("div",{className:"react-datepicker__day-names"},s.header(o)))}),F($(s),"renderYearHeader",function(){var a=s.state.date,o=s.props,l=o.showYearPicker,d=Ya(a,o.yearItemNumber),u=d.startPeriod,p=d.endPeriod;return q.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},l?"".concat(u," - ").concat(p):Me(a))}),F($(s),"renderHeader",function(a){switch(!0){case s.props.renderCustomHeader!==void 0:return s.renderCustomHeader(a);case(s.props.showMonthYearPicker||s.props.showQuarterYearPicker||s.props.showYearPicker):return s.renderYearHeader(a);default:return s.renderDefaultHeader(a)}}),F($(s),"renderMonths",function(){var a;if(!s.props.showTimeSelectOnly&&!s.props.showYearPicker){for(var o=[],l=s.props.showPreviousMonths?s.props.monthsShown-1:0,d=go(s.state.date,l),u=(a=s.props.monthSelectedIn)!==null&&a!==void 0?a:l,p=0;p<s.props.monthsShown;++p){var f=gr(d,p-u+l),x="month-".concat(p),g=p<s.props.monthsShown-1,v=p>0;o.push(q.createElement("div",{key:x,ref:function(b){s.monthContainer=b},className:"react-datepicker__month-container"},s.renderHeader({monthDate:f,i:p}),q.createElement(CR,{chooseDayAriaLabelPrefix:s.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:s.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:s.props.weekAriaLabelPrefix,ariaLabelPrefix:s.props.monthAriaLabelPrefix,onChange:s.changeMonthYear,day:f,dayClassName:s.props.dayClassName,calendarStartDay:s.props.calendarStartDay,monthClassName:s.props.monthClassName,onDayClick:s.handleDayClick,handleOnKeyDown:s.props.handleOnDayKeyDown,onDayMouseEnter:s.handleDayMouseEnter,onMouseLeave:s.handleMonthMouseLeave,onWeekSelect:s.props.onWeekSelect,orderInDisplay:p,formatWeekNumber:s.props.formatWeekNumber,locale:s.props.locale,minDate:s.props.minDate,maxDate:s.props.maxDate,excludeDates:s.props.excludeDates,excludeDateIntervals:s.props.excludeDateIntervals,highlightDates:s.props.highlightDates,holidays:s.props.holidays,selectingDate:s.state.selectingDate,includeDates:s.props.includeDates,includeDateIntervals:s.props.includeDateIntervals,inline:s.props.inline,shouldFocusDayInline:s.props.shouldFocusDayInline,fixedHeight:s.props.fixedHeight,filterDate:s.props.filterDate,preSelection:s.props.preSelection,setPreSelection:s.props.setPreSelection,selected:s.props.selected,selectsStart:s.props.selectsStart,selectsEnd:s.props.selectsEnd,selectsRange:s.props.selectsRange,selectsDisabledDaysInRange:s.props.selectsDisabledDaysInRange,showWeekNumbers:s.props.showWeekNumbers,startDate:s.props.startDate,endDate:s.props.endDate,peekNextMonth:s.props.peekNextMonth,setOpen:s.props.setOpen,shouldCloseOnSelect:s.props.shouldCloseOnSelect,renderDayContents:s.props.renderDayContents,renderMonthContent:s.props.renderMonthContent,renderQuarterContent:s.props.renderQuarterContent,renderYearContent:s.props.renderYearContent,disabledKeyboardNavigation:s.props.disabledKeyboardNavigation,showMonthYearPicker:s.props.showMonthYearPicker,showFullMonthYearPicker:s.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:s.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:s.props.showFourColumnMonthYearPicker,showYearPicker:s.props.showYearPicker,showQuarterYearPicker:s.props.showQuarterYearPicker,showWeekPicker:s.props.showWeekPicker,isInputFocused:s.props.isInputFocused,containerRef:s.containerRef,monthShowsDuplicateDaysEnd:g,monthShowsDuplicateDaysStart:v})))}return o}}),F($(s),"renderYears",function(){if(!s.props.showTimeSelectOnly)return s.props.showYearPicker?q.createElement("div",{className:"react-datepicker__year--container"},s.renderHeader(),q.createElement(ER,_o({onDayClick:s.handleDayClick,selectingDate:s.state.selectingDate,clearSelectingDate:s.clearSelectingDate,date:s.state.date},s.props,{onYearMouseEnter:s.handleYearMouseEnter,onYearMouseLeave:s.handleYearMouseLeave}))):void 0}),F($(s),"renderTimeSection",function(){if(s.props.showTimeSelect&&(s.state.monthContainer||s.props.showTimeSelectOnly))return q.createElement(VN,{selected:s.props.selected,openToDate:s.props.openToDate,onChange:s.props.onTimeChange,timeClassName:s.props.timeClassName,format:s.props.timeFormat,includeTimes:s.props.includeTimes,intervals:s.props.timeIntervals,minTime:s.props.minTime,maxTime:s.props.maxTime,excludeTimes:s.props.excludeTimes,filterTime:s.props.filterTime,timeCaption:s.props.timeCaption,todayButton:s.props.todayButton,showMonthDropdown:s.props.showMonthDropdown,showMonthYearDropdown:s.props.showMonthYearDropdown,showYearDropdown:s.props.showYearDropdown,withPortal:s.props.withPortal,monthRef:s.state.monthContainer,injectTimes:s.props.injectTimes,locale:s.props.locale,handleOnKeyDown:s.props.handleOnKeyDown,showTimeSelectOnly:s.props.showTimeSelectOnly})}),F($(s),"renderInputTimeSection",function(){var a=new Date(s.props.selected),o=Ps(a)&&s.props.selected?"".concat(l_(a.getHours()),":").concat(l_(a.getMinutes())):"";if(s.props.showTimeInput)return q.createElement(TR,{date:a,timeString:o,timeInputLabel:s.props.timeInputLabel,onChange:s.props.onTimeChange,customTimeInput:s.props.customTimeInput})}),F($(s),"renderAriaLiveRegion",function(){var a,o=Ya(s.state.date,s.props.yearItemNumber),l=o.startPeriod,d=o.endPeriod;return a=s.props.showYearPicker?"".concat(l," - ").concat(d):s.props.showMonthYearPicker||s.props.showQuarterYearPicker?Me(s.state.date):"".concat(cv(rn(s.state.date),s.props.locale)," ").concat(Me(s.state.date)),q.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},s.state.isRenderAriaLiveMessage&&a)}),F($(s),"renderChildren",function(){if(s.props.children)return q.createElement("div",{className:"react-datepicker__children-container"},s.props.children)}),s.containerRef=q.createRef(),s.state={date:s.getDateInView(),selectingDate:null,monthContainer:null,isRenderAriaLiveMessage:!1},s}return zt(n,[{key:"componentDidMount",value:function(){var r=this;this.props.showTimeSelect&&(this.assignMonthContainer=void r.setState({monthContainer:r.monthContainer}))}},{key:"componentDidUpdate",value:function(r){var s=this;if(!this.props.preSelection||et(this.props.preSelection,r.preSelection)&&this.props.monthSelectedIn===r.monthSelectedIn)this.props.openToDate&&!et(this.props.openToDate,r.openToDate)&&this.setState({date:this.props.openToDate});else{var a=!ur(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return a&&s.handleCustomMonthChange(s.state.date)})}}},{key:"render",value:function(){var r=this.props.container||PR;return q.createElement("div",{style:{display:"contents"},ref:this.containerRef},q.createElement(r,{className:Zt("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showPopperArrow:this.props.showPopperArrow,arrowProps:this.props.arrowProps},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren()))}}],[{key:"defaultProps",get:function(){return{onDropdownFocus:function(){},monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",customTimeInput:null,yearItemNumber:ql}}}]),n}(),MR=function(t){var e=t.icon,n=t.className,r=n===void 0?"":n,s=t.onClick,a="react-datepicker__calendar-icon";return q.isValidElement(e)?q.cloneElement(e,{className:"".concat(e.props.className||""," ").concat(a," ").concat(r),onClick:function(o){typeof e.props.onClick=="function"&&e.props.onClick(o),typeof s=="function"&&s(o)}}):typeof e=="string"?q.createElement("i",{className:"".concat(a," ").concat(e," ").concat(r),"aria-hidden":"true",onClick:s}):q.createElement("svg",{className:"".concat(a," ").concat(r),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},q.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},qN=function(t){Bt(n,q.Component);var e=Ut(n);function n(r){var s;return $t(this,n),(s=e.call(this,r)).el=document.createElement("div"),s}return zt(n,[{key:"componentDidMount",value:function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){this.portalRoot.removeChild(this.el)}},{key:"render",value:function(){return qT.createPortal(this.props.children,this.el)}}]),n}(),LR=function(t){return!t.disabled&&t.tabIndex!==-1},ZN=function(t){Bt(n,q.Component);var e=Ut(n);function n(r){var s;return $t(this,n),F($(s=e.call(this,r)),"getTabChildren",function(){return Array.prototype.slice.call(s.tabLoopRef.current.querySelectorAll("[tabindex], a, button, input, select, textarea"),1,-1).filter(LR)}),F($(s),"handleFocusStart",function(){var a=s.getTabChildren();a&&a.length>1&&a[a.length-1].focus()}),F($(s),"handleFocusEnd",function(){var a=s.getTabChildren();a&&a.length>1&&a[0].focus()}),s.tabLoopRef=q.createRef(),s}return zt(n,[{key:"render",value:function(){return this.props.enableTabLoop?q.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},q.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:"0",onFocus:this.handleFocusStart}),this.props.children,q.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:"0",onFocus:this.handleFocusEnd})):this.props.children}}],[{key:"defaultProps",get:function(){return{enableTabLoop:!0}}}]),n}(),AR=function(t){Bt(n,q.Component);var e=Ut(n);function n(){return $t(this,n),e.apply(this,arguments)}return zt(n,[{key:"render",value:function(){var r,s=this.props,a=s.className,o=s.wrapperClassName,l=s.hidePopper,d=s.popperComponent,u=s.popperModifiers,p=s.popperPlacement,f=s.popperProps,x=s.targetComponent,g=s.enableTabLoop,v=s.popperOnKeyDown,b=s.portalId,j=s.portalHost;if(!l){var _=Zt("react-datepicker-popper",a);r=q.createElement(iR,_o({modifiers:u,placement:p},f),function(S){var P=S.ref,M=S.style,R=S.placement,A=S.arrowProps;return q.createElement(ZN,{enableTabLoop:g},q.createElement("div",{ref:P,style:M,className:_,"data-placement":R,onKeyDown:v},q.cloneElement(d,{arrowProps:A})))})}this.props.popperContainer&&(r=q.createElement(this.props.popperContainer,{},r)),b&&!l&&(r=q.createElement(qN,{portalId:b,portalHost:j},r));var N=Zt("react-datepicker-wrapper",o);return q.createElement(BA,{className:"react-datepicker-manager"},q.createElement(cR,null,function(S){var P=S.ref;return q.createElement("div",{ref:P,className:N},x)}),r)}}],[{key:"defaultProps",get:function(){return{hidePopper:!0,popperModifiers:[],popperProps:{},popperPlacement:"bottom-start"}}}]),n}(),u_="react-datepicker-ignore-onclickoutside",IR=ap(OR),Uf="Date input not valid.",Ud=function(t){Bt(n,q.Component);var e=Ut(n);function n(r){var s;return $t(this,n),F($(s=e.call(this,r)),"getPreSelection",function(){return s.props.openToDate?s.props.openToDate:s.props.selectsEnd&&s.props.startDate?s.props.startDate:s.props.selectsStart&&s.props.endDate?s.props.endDate:Qe()}),F($(s),"modifyHolidays",function(){var a;return(a=s.props.holidays)===null||a===void 0?void 0:a.reduce(function(o,l){var d=new Date(l.date);return wc(d)?[].concat(Cc(o),[mh(mh({},l),{},{date:d})]):o},[])}),F($(s),"calcInitialState",function(){var a,o=s.getPreSelection(),l=BN(s.props),d=UN(s.props),u=l&&$s(o,Ir(l))?l:d&&ni(o,jg(d))?d:o;return{open:s.props.startOpen||!1,preventFocus:!1,preSelection:(a=s.props.selectsRange?s.props.startDate:s.props.selected)!==null&&a!==void 0?a:u,highlightDates:o_(s.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1}}),F($(s),"clearPreventFocusTimeout",function(){s.preventFocusTimeout&&clearTimeout(s.preventFocusTimeout)}),F($(s),"setFocus",function(){s.input&&s.input.focus&&s.input.focus({preventScroll:!0})}),F($(s),"setBlur",function(){s.input&&s.input.blur&&s.input.blur(),s.cancelFocusInput()}),F($(s),"setOpen",function(a){var o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];s.setState({open:a,preSelection:a&&s.state.open?s.state.preSelection:s.calcInitialState().preSelection,lastPreSelectChange:Wf},function(){a||s.setState(function(l){return{focused:!!o&&l.focused}},function(){!o&&s.setBlur(),s.setState({inputValue:null})})})}),F($(s),"inputOk",function(){return ip(s.state.preSelection)}),F($(s),"isCalendarOpen",function(){return s.props.open===void 0?s.state.open&&!s.props.disabled&&!s.props.readOnly:s.props.open}),F($(s),"handleFocus",function(a){s.state.preventFocus||(s.props.onFocus(a),s.props.preventOpenOnFocus||s.props.readOnly||s.setOpen(!0)),s.setState({focused:!0})}),F($(s),"sendFocusBackToInput",function(){s.preventFocusTimeout&&s.clearPreventFocusTimeout(),s.setState({preventFocus:!0},function(){s.preventFocusTimeout=setTimeout(function(){s.setFocus(),s.setState({preventFocus:!1})})})}),F($(s),"cancelFocusInput",function(){clearTimeout(s.inputFocusTimeout),s.inputFocusTimeout=null}),F($(s),"deferFocusInput",function(){s.cancelFocusInput(),s.inputFocusTimeout=setTimeout(function(){return s.setFocus()},1)}),F($(s),"handleDropdownFocus",function(){s.cancelFocusInput()}),F($(s),"handleBlur",function(a){(!s.state.open||s.props.withPortal||s.props.showTimeInput)&&s.props.onBlur(a),s.setState({focused:!1})}),F($(s),"handleCalendarClickOutside",function(a){s.props.inline||s.setOpen(!1),s.props.onClickOutside(a),s.props.withPortal&&a.preventDefault()}),F($(s),"handleChange",function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var d=o[0];if(!s.props.onChangeRaw||(s.props.onChangeRaw.apply($(s),o),typeof d.isDefaultPrevented=="function"&&!d.isDefaultPrevented())){s.setState({inputValue:d.target.value,lastPreSelectChange:RR});var u,p,f,x,g,v,b,j,_=(u=d.target.value,p=s.props.dateFormat,f=s.props.locale,x=s.props.strictParsing,g=s.props.minDate,v=null,b=Yi(f)||Yi(Hi()),j=!0,Array.isArray(p)?(p.forEach(function(N){var S=Lf(u,N,new Date,{locale:b});x&&(j=Ps(S,g)&&u===lt(S,N,f)),Ps(S,g)&&j&&(v=S)}),v):(v=Lf(u,p,new Date,{locale:b}),x?j=Ps(v)&&u===lt(v,p,f):Ps(v)||(p=p.match(hR).map(function(N){var S=N[0];return S==="p"||S==="P"?b?(0,uR[S])(N,b.formatLong):S:N}).join(""),u.length>0&&(v=Lf(u,p.slice(0,u.length),new Date)),Ps(v)||(v=new Date(u))),Ps(v)&&j?v:null));s.props.showTimeSelectOnly&&s.props.selected&&_&&!et(_,s.props.selected)&&(_=dR(s.props.selected,{hours:Ar(_),minutes:Lr(_),seconds:Eb(_)})),!_&&d.target.value||(s.props.showWeekPicker&&(_=Fr(_,s.props.locale,s.props.calendarStartDay)),s.setSelected(_,d,!0))}}),F($(s),"handleSelect",function(a,o,l){if(s.props.shouldCloseOnSelect&&!s.props.showTimeSelect&&s.sendFocusBackToInput(),s.props.onChangeRaw&&s.props.onChangeRaw(o),s.props.showWeekPicker&&(a=Fr(a,s.props.locale,s.props.calendarStartDay)),s.setSelected(a,o,!1,l),s.props.showDateSelect&&s.setState({isRenderAriaLiveMessage:!0}),!s.props.shouldCloseOnSelect||s.props.showTimeSelect)s.setPreSelection(a);else if(!s.props.inline){s.props.selectsRange||s.setOpen(!1);var d=s.props,u=d.startDate,p=d.endDate;!u||p||$s(a,u)||s.setOpen(!1)}}),F($(s),"setSelected",function(a,o,l,d){var u=a;if(s.props.showYearPicker){if(u!==null&&zN(Me(u),s.props))return}else if(s.props.showMonthYearPicker){if(u!==null&&$N(u,s.props))return}else if(u!==null&&lp(u,s.props))return;var p=s.props,f=p.onChange,x=p.selectsRange,g=p.startDate,v=p.endDate;if(!Ri(s.props.selected,u)||s.props.allowSameDay||x)if(u!==null&&(!s.props.selected||l&&(s.props.showTimeSelect||s.props.showTimeSelectOnly||s.props.showTimeInput)||(u=Qb(u,{hour:Ar(s.props.selected),minute:Lr(s.props.selected),second:Eb(s.props.selected)})),s.props.inline||s.setState({preSelection:u}),s.props.focusSelectedMonth||s.setState({monthSelectedIn:d})),x){var b=g&&!v,j=g&&v;!g&&!v?f([u,null],o):b&&($s(u,g)?f([u,null],o):f([g,u],o)),j&&f([u,null],o)}else f(u,o);l||(s.props.onSelect(u,o),s.setState({inputValue:null}))}),F($(s),"setPreSelection",function(a){var o=s.props.minDate!==void 0,l=s.props.maxDate!==void 0,d=!0;if(a){s.props.showWeekPicker&&(a=Fr(a,s.props.locale,s.props.calendarStartDay));var u=Ir(a);if(o&&l)d=wu(a,s.props.minDate,s.props.maxDate);else if(o){var p=Ir(s.props.minDate);d=ni(a,p)||Ri(u,p)}else if(l){var f=jg(s.props.maxDate);d=$s(a,f)||Ri(u,f)}}d&&s.setState({preSelection:a})}),F($(s),"toggleCalendar",function(){s.setOpen(!s.state.open)}),F($(s),"handleTimeChange",function(a){var o=s.props.selected?s.props.selected:s.getPreSelection(),l=s.props.selected?a:Qb(o,{hour:Ar(a),minute:Lr(a)});s.setState({preSelection:l}),s.props.onChange(l),s.props.shouldCloseOnSelect&&(s.sendFocusBackToInput(),s.setOpen(!1)),s.props.showTimeInput&&s.setOpen(!0),(s.props.showTimeSelectOnly||s.props.showTimeSelect)&&s.setState({isRenderAriaLiveMessage:!0}),s.setState({inputValue:null})}),F($(s),"onInputClick",function(){s.props.disabled||s.props.readOnly||s.setOpen(!0),s.props.onInputClick()}),F($(s),"onInputKeyDown",function(a){s.props.onKeyDown(a);var o=a.key;if(s.state.open||s.props.inline||s.props.preventOpenOnFocus){if(s.state.open){if(o==="ArrowDown"||o==="ArrowUp"){a.preventDefault();var l=s.props.showWeekPicker&&s.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',d=s.calendar.componentNode&&s.calendar.componentNode.querySelector(l);return void(d&&d.focus({preventScroll:!0}))}var u=Qe(s.state.preSelection);o==="Enter"?(a.preventDefault(),s.inputOk()&&s.state.lastPreSelectChange===Wf?(s.handleSelect(u,a),!s.props.shouldCloseOnSelect&&s.setPreSelection(u)):s.setOpen(!1)):o==="Escape"?(a.preventDefault(),s.sendFocusBackToInput(),s.setOpen(!1)):o==="Tab"&&s.setOpen(!1),s.inputOk()||s.props.onInputError({code:1,msg:Uf})}}else o!=="ArrowDown"&&o!=="ArrowUp"&&o!=="Enter"||s.onInputClick()}),F($(s),"onPortalKeyDown",function(a){a.key==="Escape"&&(a.preventDefault(),s.setState({preventFocus:!0},function(){s.setOpen(!1),setTimeout(function(){s.setFocus(),s.setState({preventFocus:!1})})}))}),F($(s),"onDayKeyDown",function(a){s.props.onKeyDown(a);var o=a.key,l=Qe(s.state.preSelection);if(o==="Enter")a.preventDefault(),s.handleSelect(l,a),!s.props.shouldCloseOnSelect&&s.setPreSelection(l);else if(o==="Escape")a.preventDefault(),s.setOpen(!1),s.inputOk()||s.props.onInputError({code:1,msg:Uf});else if(!s.props.disabledKeyboardNavigation){var d;switch(o){case"ArrowLeft":d=s.props.showWeekPicker?Cb(l,1):JL(l,1);break;case"ArrowRight":d=s.props.showWeekPicker?oh(l,1):Ao(l,1);break;case"ArrowUp":d=Cb(l,1);break;case"ArrowDown":d=oh(l,1);break;case"PageUp":d=go(l,1);break;case"PageDown":d=gr(l,1);break;case"Home":d=jc(l,1);break;case"End":d=mo(l,1);break;default:d=null}if(!d)return void(s.props.onInputError&&s.props.onInputError({code:1,msg:Uf}));if(a.preventDefault(),s.setState({lastPreSelectChange:Wf}),s.props.adjustDateOnChange&&s.setSelected(d),s.setPreSelection(d),s.props.inline){var u=rn(l),p=rn(d),f=Me(l),x=Me(d);u!==p||f!==x?s.setState({shouldFocusDayInline:!0}):s.setState({shouldFocusDayInline:!1})}}}),F($(s),"onPopperKeyDown",function(a){a.key==="Escape"&&(a.preventDefault(),s.sendFocusBackToInput())}),F($(s),"onClearClick",function(a){a&&a.preventDefault&&a.preventDefault(),s.sendFocusBackToInput(),s.props.selectsRange?s.props.onChange([null,null],a):s.props.onChange(null,a),s.setState({inputValue:null})}),F($(s),"clear",function(){s.onClearClick()}),F($(s),"onScroll",function(a){typeof s.props.closeOnScroll=="boolean"&&s.props.closeOnScroll?a.target!==document&&a.target!==document.documentElement&&a.target!==document.body||s.setOpen(!1):typeof s.props.closeOnScroll=="function"&&s.props.closeOnScroll(a)&&s.setOpen(!1)}),F($(s),"renderCalendar",function(){return s.props.inline||s.isCalendarOpen()?q.createElement(IR,{ref:function(a){s.calendar=a},locale:s.props.locale,calendarStartDay:s.props.calendarStartDay,chooseDayAriaLabelPrefix:s.props.chooseDayAriaLabelPrefix,disabledDayAriaLabelPrefix:s.props.disabledDayAriaLabelPrefix,weekAriaLabelPrefix:s.props.weekAriaLabelPrefix,monthAriaLabelPrefix:s.props.monthAriaLabelPrefix,adjustDateOnChange:s.props.adjustDateOnChange,setOpen:s.setOpen,shouldCloseOnSelect:s.props.shouldCloseOnSelect,dateFormat:s.props.dateFormatCalendar,useWeekdaysShort:s.props.useWeekdaysShort,formatWeekDay:s.props.formatWeekDay,dropdownMode:s.props.dropdownMode,selected:s.props.selected,preSelection:s.state.preSelection,onSelect:s.handleSelect,onWeekSelect:s.props.onWeekSelect,openToDate:s.props.openToDate,minDate:s.props.minDate,maxDate:s.props.maxDate,selectsStart:s.props.selectsStart,selectsEnd:s.props.selectsEnd,selectsRange:s.props.selectsRange,startDate:s.props.startDate,endDate:s.props.endDate,excludeDates:s.props.excludeDates,excludeDateIntervals:s.props.excludeDateIntervals,filterDate:s.props.filterDate,onClickOutside:s.handleCalendarClickOutside,formatWeekNumber:s.props.formatWeekNumber,highlightDates:s.state.highlightDates,holidays:fR(s.modifyHolidays()),includeDates:s.props.includeDates,includeDateIntervals:s.props.includeDateIntervals,includeTimes:s.props.includeTimes,injectTimes:s.props.injectTimes,inline:s.props.inline,shouldFocusDayInline:s.state.shouldFocusDayInline,peekNextMonth:s.props.peekNextMonth,showMonthDropdown:s.props.showMonthDropdown,showPreviousMonths:s.props.showPreviousMonths,useShortMonthInDropdown:s.props.useShortMonthInDropdown,showMonthYearDropdown:s.props.showMonthYearDropdown,showWeekNumbers:s.props.showWeekNumbers,showYearDropdown:s.props.showYearDropdown,withPortal:s.props.withPortal,forceShowMonthNavigation:s.props.forceShowMonthNavigation,showDisabledMonthNavigation:s.props.showDisabledMonthNavigation,scrollableYearDropdown:s.props.scrollableYearDropdown,scrollableMonthYearDropdown:s.props.scrollableMonthYearDropdown,todayButton:s.props.todayButton,weekLabel:s.props.weekLabel,outsideClickIgnoreClass:u_,fixedHeight:s.props.fixedHeight,monthsShown:s.props.monthsShown,monthSelectedIn:s.state.monthSelectedIn,onDropdownFocus:s.handleDropdownFocus,onMonthChange:s.props.onMonthChange,onYearChange:s.props.onYearChange,dayClassName:s.props.dayClassName,weekDayClassName:s.props.weekDayClassName,monthClassName:s.props.monthClassName,timeClassName:s.props.timeClassName,showDateSelect:s.props.showDateSelect,showTimeSelect:s.props.showTimeSelect,showTimeSelectOnly:s.props.showTimeSelectOnly,onTimeChange:s.handleTimeChange,timeFormat:s.props.timeFormat,timeIntervals:s.props.timeIntervals,minTime:s.props.minTime,maxTime:s.props.maxTime,excludeTimes:s.props.excludeTimes,filterTime:s.props.filterTime,timeCaption:s.props.timeCaption,className:s.props.calendarClassName,container:s.props.calendarContainer,yearItemNumber:s.props.yearItemNumber,yearDropdownItemNumber:s.props.yearDropdownItemNumber,previousMonthAriaLabel:s.props.previousMonthAriaLabel,previousMonthButtonLabel:s.props.previousMonthButtonLabel,nextMonthAriaLabel:s.props.nextMonthAriaLabel,nextMonthButtonLabel:s.props.nextMonthButtonLabel,previousYearAriaLabel:s.props.previousYearAriaLabel,previousYearButtonLabel:s.props.previousYearButtonLabel,nextYearAriaLabel:s.props.nextYearAriaLabel,nextYearButtonLabel:s.props.nextYearButtonLabel,timeInputLabel:s.props.timeInputLabel,disabledKeyboardNavigation:s.props.disabledKeyboardNavigation,renderCustomHeader:s.props.renderCustomHeader,popperProps:s.props.popperProps,renderDayContents:s.props.renderDayContents,renderMonthContent:s.props.renderMonthContent,renderQuarterContent:s.props.renderQuarterContent,renderYearContent:s.props.renderYearContent,onDayMouseEnter:s.props.onDayMouseEnter,onMonthMouseLeave:s.props.onMonthMouseLeave,onYearMouseEnter:s.props.onYearMouseEnter,onYearMouseLeave:s.props.onYearMouseLeave,selectsDisabledDaysInRange:s.props.selectsDisabledDaysInRange,showTimeInput:s.props.showTimeInput,showMonthYearPicker:s.props.showMonthYearPicker,showFullMonthYearPicker:s.props.showFullMonthYearPicker,showTwoColumnMonthYearPicker:s.props.showTwoColumnMonthYearPicker,showFourColumnMonthYearPicker:s.props.showFourColumnMonthYearPicker,showYearPicker:s.props.showYearPicker,showQuarterYearPicker:s.props.showQuarterYearPicker,showWeekPicker:s.props.showWeekPicker,showPopperArrow:s.props.showPopperArrow,excludeScrollbar:s.props.excludeScrollbar,handleOnKeyDown:s.props.onKeyDown,handleOnDayKeyDown:s.onDayKeyDown,isInputFocused:s.state.focused,customTimeInput:s.props.customTimeInput,setPreSelection:s.setPreSelection},s.props.children):null}),F($(s),"renderAriaLiveRegion",function(){var a,o=s.props,l=o.dateFormat,d=o.locale,u=s.props.showTimeInput||s.props.showTimeSelect?"PPPPp":"PPPP";return a=s.props.selectsRange?"Selected start date: ".concat(jr(s.props.startDate,{dateFormat:u,locale:d}),". ").concat(s.props.endDate?"End date: "+jr(s.props.endDate,{dateFormat:u,locale:d}):""):s.props.showTimeSelectOnly?"Selected time: ".concat(jr(s.props.selected,{dateFormat:l,locale:d})):s.props.showYearPicker?"Selected year: ".concat(jr(s.props.selected,{dateFormat:"yyyy",locale:d})):s.props.showMonthYearPicker?"Selected month: ".concat(jr(s.props.selected,{dateFormat:"MMMM yyyy",locale:d})):s.props.showQuarterYearPicker?"Selected quarter: ".concat(jr(s.props.selected,{dateFormat:"yyyy, QQQ",locale:d})):"Selected date: ".concat(jr(s.props.selected,{dateFormat:u,locale:d})),q.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},a)}),F($(s),"renderDateInput",function(){var a,o=Zt(s.props.className,F({},u_,s.state.open)),l=s.props.customInput||q.createElement("input",{type:"text"}),d=s.props.customInputRef||"ref",u=typeof s.props.value=="string"?s.props.value:typeof s.state.inputValue=="string"?s.state.inputValue:s.props.selectsRange?function(p,f,x){if(!p)return"";var g=jr(p,x),v=f?jr(f,x):"";return"".concat(g," - ").concat(v)}(s.props.startDate,s.props.endDate,s.props):jr(s.props.selected,s.props);return q.cloneElement(l,(F(F(F(F(F(F(F(F(F(F(a={},d,function(p){s.input=p}),"value",u),"onBlur",s.handleBlur),"onChange",s.handleChange),"onClick",s.onInputClick),"onFocus",s.handleFocus),"onKeyDown",s.onInputKeyDown),"id",s.props.id),"name",s.props.name),"form",s.props.form),F(F(F(F(F(F(F(F(F(F(a,"autoFocus",s.props.autoFocus),"placeholder",s.props.placeholderText),"disabled",s.props.disabled),"autoComplete",s.props.autoComplete),"className",Zt(l.props.className,o)),"title",s.props.title),"readOnly",s.props.readOnly),"required",s.props.required),"tabIndex",s.props.tabIndex),"aria-describedby",s.props.ariaDescribedBy),F(F(F(a,"aria-invalid",s.props.ariaInvalid),"aria-labelledby",s.props.ariaLabelledBy),"aria-required",s.props.ariaRequired)))}),F($(s),"renderClearButton",function(){var a=s.props,o=a.isClearable,l=a.disabled,d=a.selected,u=a.startDate,p=a.endDate,f=a.clearButtonTitle,x=a.clearButtonClassName,g=x===void 0?"":x,v=a.ariaLabelClose,b=v===void 0?"Close":v;return!o||d==null&&u==null&&p==null?null:q.createElement("button",{type:"button",className:Zt("react-datepicker__close-icon",g,{"react-datepicker__close-icon--disabled":l}),disabled:l,"aria-label":b,onClick:s.onClearClick,title:f,tabIndex:-1})}),s.state=s.calcInitialState(),s.preventFocusTimeout=null,s}return zt(n,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll,!0)}},{key:"componentDidUpdate",value:function(r,s){var a,o;r.inline&&(a=r.selected,o=this.props.selected,a&&o?rn(a)!==rn(o)||Me(a)!==Me(o):a!==o)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&r.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),r.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:o_(this.props.highlightDates)}),s.focused||Ri(r.selected,this.props.selected)||this.setState({inputValue:null}),s.open!==this.state.open&&(s.open===!1&&this.state.open===!0&&this.props.onCalendarOpen(),s.open===!0&&this.state.open===!1&&this.props.onCalendarClose())}},{key:"componentWillUnmount",value:function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0)}},{key:"renderInputContainer",value:function(){var r=this.props,s=r.showIcon,a=r.icon,o=r.calendarIconClassname,l=r.toggleCalendarOnIconClick,d=this.state.open;return q.createElement("div",{className:"react-datepicker__input-container".concat(s?" react-datepicker__view-calendar-icon":"")},s&&q.createElement(MR,_o({icon:a,className:"".concat(o," ").concat(d&&"react-datepicker-ignore-onclickoutside")},l?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())}},{key:"render",value:function(){var r=this.renderCalendar();if(this.props.inline)return r;if(this.props.withPortal){var s=this.state.open?q.createElement(ZN,{enableTabLoop:this.props.enableTabLoop},q.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},r)):null;return this.state.open&&this.props.portalId&&(s=q.createElement(qN,{portalId:this.props.portalId,portalHost:this.props.portalHost},s)),q.createElement("div",null,this.renderInputContainer(),s)}return q.createElement(AR,{className:this.props.popperClassName,wrapperClassName:this.props.wrapperClassName,hidePopper:!this.isCalendarOpen(),portalId:this.props.portalId,portalHost:this.props.portalHost,popperModifiers:this.props.popperModifiers,targetComponent:this.renderInputContainer(),popperContainer:this.props.popperContainer,popperComponent:r,popperPlacement:this.props.popperPlacement,popperProps:this.props.popperProps,popperOnKeyDown:this.onPopperKeyDown,enableTabLoop:this.props.enableTabLoop})}}],[{key:"defaultProps",get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",onChange:function(){},disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",onFocus:function(){},onBlur:function(){},onKeyDown:function(){},onInputClick:function(){},onSelect:function(){},onClickOutside:function(){},onMonthChange:function(){},onCalendarOpen:function(){},onCalendarClose:function(){},preventOpenOnFocus:!1,onYearChange:function(){},onInputError:function(){},monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:ql,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1}}}]),n}(),RR="input",Wf="navigate";function FR({discounts:t=[],onChange:e}){const[n,r]=w.useState({price:"",start_date:null,end_date:null,description:""}),s=()=>{if(!n.price||!n.start_date||!n.end_date){z.error("الرجاء إدخال السعر وتواريخ التخفيض");return}if(n.start_date>=n.end_date){z.error("تاريخ البداية يجب أن يكون قبل تاريخ النهاية");return}const l={id:zr(),...n};e([...t,l]),r({price:"",start_date:null,end_date:null,description:""})},a=l=>{e(t.filter(d=>d.id!==l))},o=(l,d,u)=>{e(t.map(p=>p.id===l?{...p,[d]:u}:p))};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"التخفيضات المجدولة"}),t.length>0?i.jsx("div",{className:"space-y-4",children:t.map(l=>i.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex-1 grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"سعر التخفيض (₪)"}),i.jsx("input",{type:"number",value:l.price,onChange:d=>o(l.id,"price",parseFloat(d.target.value)),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ البداية"}),i.jsx(Ud,{selected:new Date(l.start_date),onChange:d=>o(l.id,"start_date",d),className:"w-full border rounded-md px-3 py-1.5",dateFormat:"yyyy/MM/dd",minDate:new Date})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ النهاية"}),i.jsx(Ud,{selected:new Date(l.end_date),onChange:d=>o(l.id,"end_date",d),className:"w-full border rounded-md px-3 py-1.5",dateFormat:"yyyy/MM/dd",minDate:new Date(l.start_date)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الوصف"}),i.jsx("input",{type:"text",value:l.description,onChange:d=>o(l.id,"description",d.target.value),className:"w-full border rounded-md px-3 py-1.5",placeholder:"مثال: تخفيض العيد"})]})]}),i.jsx("button",{type:"button",onClick:()=>a(l.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]},l.id))}):i.jsx("p",{className:"text-gray-500 text-center py-4",children:"لا توجد تخفيضات مجدولة"})]}),i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"إضافة تخفيض جديد"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"سعر التخفيض (₪)"}),i.jsx("input",{type:"number",value:n.price,onChange:l=>r({...n,price:parseFloat(l.target.value)}),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ البداية"}),i.jsx(Ud,{selected:n.start_date,onChange:l=>r({...n,start_date:l}),className:"w-full border rounded-md px-3 py-1.5",dateFormat:"yyyy/MM/dd",minDate:new Date,placeholderText:"اختر تاريخ البداية"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ النهاية"}),i.jsx(Ud,{selected:n.end_date,onChange:l=>r({...n,end_date:l}),className:"w-full border rounded-md px-3 py-1.5",dateFormat:"yyyy/MM/dd",minDate:n.start_date||new Date,placeholderText:"اختر تاريخ النهاية"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الوصف"}),i.jsx("input",{type:"text",value:n.description,onChange:l=>r({...n,description:l.target.value}),className:"w-full border rounded-md px-3 py-1.5",placeholder:"مثال: تخفيض العيد"})]})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{type:"button",onClick:s,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"إضافة التخفيض"})})]})]})}function $R({attributes:t=[],onChange:e}){const[n,r]=w.useState({name:"",type:"select",required:!1,values:[]}),[s,a]=w.useState(""),o=()=>{if(!n.name){z.error("الرجاء إدخال اسم السمة");return}if(n.type==="select"&&n.values.length===0){z.error("الرجاء إضافة قيم للسمة");return}const f={id:zr(),...n};e([...t,f]),r({name:"",type:"select",required:!1,values:[]})},l=f=>{e(t.filter(x=>x.id!==f))},d=(f,x,g)=>{e(t.map(v=>v.id===f?{...v,[x]:g}:v))},u=()=>{if(!s){z.error("الرجاء إدخال قيمة");return}r({...n,values:[...n.values,{id:zr(),value:s}]}),a("")},p=(f,x)=>{e(t.map(g=>g.id===f?{...g,values:g.values.filter(v=>v.id!==x)}:g))};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"السمات العامة"}),t.length>0?i.jsx("div",{className:"space-y-4",children:t.map(f=>i.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex-1 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم السمة"}),i.jsx("input",{type:"text",value:f.name,onChange:x=>d(f.id,"name",x.target.value),className:"w-full border rounded-md px-3 py-1.5",placeholder:"مثال: المقاس"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع السمة"}),i.jsxs("select",{value:f.type,onChange:x=>d(f.id,"type",x.target.value),className:"w-full border rounded-md px-3 py-1.5",children:[i.jsx("option",{value:"select",children:"قائمة اختيار"}),i.jsx("option",{value:"text",children:"نص"}),i.jsx("option",{value:"number",children:"رقم"})]})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:f.required,onChange:x=>d(f.id,"required",x.target.checked),className:"ml-2"}),"إجباري"]})})]}),f.type==="select"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"القيم المتاحة"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:f.values.map(x=>i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[x.value,i.jsx("button",{type:"button",onClick:()=>p(f.id,x.id),className:"mr-1 text-blue-600 hover:text-blue-800",children:"×"})]},x.id))})]})]}),i.jsx("button",{type:"button",onClick:()=>l(f.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]},f.id))}):i.jsx("p",{className:"text-gray-500 text-center py-4",children:"لا توجد سمات بعد"})]}),i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"إضافة سمة جديدة"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم السمة"}),i.jsx("input",{type:"text",value:n.name,onChange:f=>r({...n,name:f.target.value}),className:"w-full border rounded-md px-3 py-1.5",placeholder:"مثال: المقاس"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع السمة"}),i.jsxs("select",{value:n.type,onChange:f=>r({...n,type:f.target.value}),className:"w-full border rounded-md px-3 py-1.5",children:[i.jsx("option",{value:"select",children:"قائمة اختيار"}),i.jsx("option",{value:"text",children:"نص"}),i.jsx("option",{value:"number",children:"رقم"})]})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:n.required,onChange:f=>r({...n,required:f.target.checked}),className:"ml-2"}),"إجباري"]})})]}),n.type==="select"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"القيم المتاحة"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:s,onChange:f=>a(f.target.value),className:"flex-1 border rounded-md px-3 py-1.5",placeholder:"أدخل قيمة"}),i.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:"إضافة"})]}),i.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:n.values.map(f=>i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[f.value,i.jsx("button",{type:"button",onClick:()=>r({...n,values:n.values.filter(x=>x.id!==f.id)}),className:"mr-1 text-blue-600 hover:text-blue-800",children:"×"})]},f.id))})]})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{type:"button",onClick:o,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"إضافة السمة"})})]})]})}function zR({addons:t=[],onChange:e}){const[n,r]=w.useState({name:"",price:0,is_default:!1,is_required:!1}),s=()=>{if(!n.name){z.error("الرجاء إدخال اسم الإضافة");return}const l={id:zr(),...n};e([...t,l]),r({name:"",price:0,is_default:!1,is_required:!1})},a=l=>{e(t.filter(d=>d.id!==l))},o=(l,d,u)=>{e(t.map(p=>p.id===l?{...p,[d]:u}:p))};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"الإضافات"}),t.length>0?i.jsx("div",{className:"space-y-4",children:t.map(l=>i.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex-1 grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الإضافة"}),i.jsx("input",{type:"text",value:l.name,onChange:d=>o(l.id,"name",d.target.value),className:"w-full border rounded-md px-3 py-1.5"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعر (₪)"}),i.jsx("input",{type:"number",value:l.price,onChange:d=>o(l.id,"price",parseFloat(d.target.value)),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:l.is_default,onChange:d=>o(l.id,"is_default",d.target.checked),className:"ml-2"}),"افتراضي"]})}),i.jsx("div",{className:"flex items-end",children:i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:l.is_required,onChange:d=>o(l.id,"is_required",d.target.checked),className:"ml-2"}),"إجباري"]})})]}),i.jsx("button",{type:"button",onClick:()=>a(l.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]},l.id))}):i.jsx("p",{className:"text-gray-500 text-center py-4",children:"لا توجد إضافات بعد"})]}),i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"إضافة إضافة جديدة"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الإضافة"}),i.jsx("input",{type:"text",value:n.name,onChange:l=>r({...n,name:l.target.value}),className:"w-full border rounded-md px-3 py-1.5",placeholder:"مثال: سكر إضافي"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعر (₪)"}),i.jsx("input",{type:"number",value:n.price,onChange:l=>r({...n,price:parseFloat(l.target.value)}),className:"w-full border rounded-md px-3 py-1.5",min:"0",step:"0.01"})]}),i.jsx("div",{className:"flex items-end",children:i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:n.is_default,onChange:l=>r({...n,is_default:l.target.checked}),className:"ml-2"}),"افتراضي"]})}),i.jsx("div",{className:"flex items-end",children:i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:n.is_required,onChange:l=>r({...n,is_required:l.target.checked}),className:"ml-2"}),"إجباري"]})})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{type:"button",onClick:s,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"إضافة"})})]})]})}function BR({onSubmit:t,initialData:e=null}){const[n,r]=w.useState({name:"",description:"",price:"",wholesale_price:"",discount_price:"",scheduled_discounts:[],vendor_id:"",category_id:"",status:"active",image:"",gallery:[],video:"",stock:0,addons:[],type:"regular",variants:[],wholesale_prices:[],attributes:[],...e}),[s,a]=w.useState([]),[o,l]=w.useState([]),[d,u]=w.useState(!0);w.useEffect(()=>{(async()=>{try{u(!0);const{data:x,error:g}=await ee.from("vendors").select("id, store_name").order("store_name");g?(console.error("Error fetching vendors:",g),a([{id:1,store_name:"متجر كوفي"},{id:2,store_name:"متجر الشاي"},{id:3,store_name:"متجر العصائر"}])):a(x||[]);const{data:v,error:b}=await ee.from("categories").select("id, name").order("name");b?(console.error("Error fetching categories:",b),l([{id:1,name:"مشروبات ساخنة"},{id:2,name:"عصائر"},{id:3,name:"حلويات"}])):l(v||[])}catch(x){console.error("Error fetching data:",x),a([{id:1,store_name:"متجر كوفي"},{id:2,store_name:"متجر الشاي"},{id:3,store_name:"متجر العصائر"}]),l([{id:1,name:"مشروبات ساخنة"},{id:2,name:"عصائر"},{id:3,name:"حلويات"}])}finally{u(!1)}})()},[]);const p=f=>{if(f.preventDefault(),!n.name||!n.price||!n.vendor_id||!n.category_id){z.error("الرجاء تعبئة جميع الحقول المطلوبة");return}t(n)};return i.jsxs("form",{onSubmit:p,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع المنتج"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",value:"regular",checked:n.type==="regular",onChange:f=>r({...n,type:f.target.value}),className:"ml-2"}),"منتج عادي"]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",value:"variant",checked:n.type==="variant",onChange:f=>r({...n,type:f.target.value}),className:"ml-2"}),"منتج متعدد الأنواع"]})]})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الصورة المميزة"}),i.jsx(ps,{type:"image",preview:n.image,onUpload:({preview:f})=>r({...n,image:f})})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"معرض الصور"}),i.jsx(QM,{images:n.gallery,onUpdate:f=>r({...n,gallery:f})})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"فيديو المنتج"}),i.jsx(ps,{type:"video",preview:n.video,onUpload:({preview:f})=>r({...n,video:f})})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم المنتج ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:n.name,onChange:f=>r({...n,name:f.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),i.jsx("textarea",{value:n.description,onChange:f=>r({...n,description:f.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),n.type==="regular"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["السعر (₪) ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:n.price,onChange:f=>r({...n,price:f.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"سعر الجملة (₪)"}),i.jsx("input",{type:"number",value:n.wholesale_price,onChange:f=>r({...n,wholesale_price:f.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"اختياري"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"سعر التخفيض الحالي (₪)"}),i.jsx("input",{type:"number",value:n.discount_price,onChange:f=>r({...n,discount_price:f.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"اختياري"})]})]}),i.jsx("div",{className:"col-span-1 md:col-span-2",children:i.jsx(FR,{discounts:n.scheduled_discounts,onChange:f=>r({...n,scheduled_discounts:f})})}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["المخزون ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:n.stock,onChange:f=>r({...n,stock:parseInt(f.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",required:!0})]})]}):i.jsx("div",{className:"col-span-1 md:col-span-2",children:i.jsx(JM,{variants:n.variants,onChange:f=>r({...n,variants:f})})}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["المتجر ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:n.vendor_id,onChange:f=>r({...n,vendor_id:f.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,disabled:d,children:[i.jsx("option",{value:"",children:"اختر المتجر"}),s.map(f=>i.jsx("option",{value:f.id,children:f.store_name},f.id))]}),d&&i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"جاري تحميل المتاجر..."})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["التصنيف ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:n.category_id,onChange:f=>r({...n,category_id:f.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,disabled:d,children:[i.jsx("option",{value:"",children:"اختر التصنيف"}),o.map(f=>i.jsx("option",{value:f.id,children:f.name},f.id))]}),d&&i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"جاري تحميل التصنيفات..."})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الحالة ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:n.status,onChange:f=>r({...n,status:f.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"active",children:"نشط"}),i.jsx("option",{value:"inactive",children:"غير نشط"}),i.jsx("option",{value:"draft",children:"مسودة"})]})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx(XM,{prices:n.wholesale_prices,onChange:f=>r({...n,wholesale_prices:f})}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"أسعار الجملة اختيارية"})]}),i.jsx("div",{className:"col-span-1 md:col-span-2",children:i.jsx($R,{attributes:n.attributes,onChange:f=>r({...n,attributes:f})})}),i.jsx("div",{className:"col-span-1 md:col-span-2",children:i.jsx(zR,{addons:n.addons,onChange:f=>r({...n,addons:f})})})]}),i.jsx("div",{className:"flex justify-end space-x-2 pt-4",children:i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:e?"تحديث":"إضافة"})})]})}function UR(){const[t,e]=w.useState([]),[n,r]=w.useState([]),[s,a]=w.useState([]),[o,l]=w.useState(!0),[d,u]=w.useState(null),[p,f]=w.useState(!1),[x,g]=w.useState(null),[v,b]=w.useState("grid"),[j,_]=w.useState(null),[N,S]=w.useState({});w.useEffect(()=>{P()},[]);const P=async()=>{try{l(!0),u(null);const{data:E,error:K}=await ee.from("products").select("*");if(K)throw K;const{data:re,error:Q}=await ee.from("categories").select("*").order("name");if(Q)throw Q;r(re||[]);const{data:ie,error:le}=await ee.from("vendors").select("id, store_name");if(le)throw le;a(ie||[]);const ae=await Promise.all((E||[]).map(async se=>{let ue=null;if(se.category_id){const{data:oe}=await ee.from("categories").select("name").eq("id",se.category_id).single();oe&&(ue=oe)}let U=null;if(se.vendor_id){const{data:oe}=await ee.from("vendors").select("store_name").eq("id",se.vendor_id).single();oe&&(U=oe)}return{...se,category:ue,vendor:U}}));e(ae)}catch(E){console.error("Error fetching data:",E),u("فشل في تحميل البيانات. الرجاء المحاولة مرة أخرى."),z.error("فشل في تحميل البيانات")}finally{l(!1)}},M={name:{type:"text",label:"اسم المنتج",placeholder:"البحث باسم المنتج",value:""},vendor_id:{type:"select",label:"المتجر",placeholder:"جميع المتاجر",options:s.map(E=>({value:E.id,label:E.store_name})),value:""},category_id:{type:"select",label:"التصنيف",placeholder:"جميع التصنيفات",options:n.map(E=>({value:E.id,label:E.name})),value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"active",label:"نشط"},{value:"inactive",label:"غير نشط"},{value:"draft",label:"مسودة"}],value:""}},{filters:R,filterData:A,handleFilterChange:T}=Fn(M),Y=async E=>{try{l(!0);const K={id:x?x.id:zr(),name:E.name,description:E.description,price:parseFloat(E.price),wholesale_price:E.wholesale_price?parseFloat(E.wholesale_price):null,discount_price:E.discount_price?parseFloat(E.discount_price):null,vendor_id:E.vendor_id,category_id:E.category_id,status:E.status,stock:parseInt(E.stock),image_url:E.image};if(x){const{data:re,error:Q}=await ee.from("products").update(K).eq("id",x.id).select();if(Q)throw Q;if(E.addons&&E.addons.length>0){await ee.from("product_addons").delete().eq("product_id",x.id);const ie=E.addons.map(ae=>({product_id:x.id,name:ae.name,price:parseFloat(ae.price),is_default:ae.is_default,is_required:ae.is_required})),{error:le}=await ee.from("product_addons").insert(ie);if(le)throw le}z.success("تم تحديث المنتج بنجاح")}else{const{data:re,error:Q}=await ee.from("products").insert([K]).select();if(Q)throw Q;if(E.addons&&E.addons.length>0&&re&&re.length>0){const ie=E.addons.map(ae=>({product_id:re[0].id,name:ae.name,price:parseFloat(ae.price),is_default:ae.is_default,is_required:ae.is_required})),{error:le}=await ee.from("product_addons").insert(ie);if(le)throw le}z.success("تم إضافة المنتج بنجاح")}P(),f(!1),g(null)}catch(K){console.error("Error saving product:",K),z.error(x?"فشل في تحديث المنتج":"فشل في إضافة المنتج")}finally{l(!1)}},O=async E=>{if(window.confirm("هل أنت متأكد من حذف هذا المنتج؟"))try{l(!0);const{error:K}=await ee.from("products").delete().eq("id",E);if(K)throw K;z.success("تم حذف المنتج بنجاح"),P()}catch(K){console.error("Error deleting product:",K),z.error("فشل في حذف المنتج")}finally{l(!1)}},H=(E,K)=>{_({id:E.id,field:K}),S({...N,[E.id]:{...N[E.id]||{},[K]:E[K]}})},te=(E,K,re)=>{S({...N,[E]:{...N[E]||{},[K]:re}})},G=async E=>{try{const K=N[E];if(!K)return;K.price!==void 0&&(K.price=parseFloat(K.price)),K.wholesale_price!==void 0&&(K.wholesale_price=parseFloat(K.wholesale_price)||null),K.discount_price!==void 0&&(K.discount_price=parseFloat(K.discount_price)||null),K.stock!==void 0&&(K.stock=parseInt(K.stock));const{error:re}=await ee.from("products").update(K).eq("id",E);if(re)throw re;z.success("تم تحديث المنتج بنجاح"),P(),_(null)}catch(K){console.error("Error updating product:",K),z.error("فشل في تحديث المنتج")}},B=()=>{_(null)},Z=E=>{switch(E){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"draft":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},C=E=>{switch(E){case"active":return"نشط";case"inactive":return"غير نشط";case"draft":return"مسودة";default:return E}},V=A(t),I=()=>i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6",children:V.length===0?i.jsx("div",{className:"col-span-full text-center py-12",children:i.jsx("p",{className:"text-gray-500",children:"لا توجد منتجات متطابقة مع معايير البحث"})}):V.map(E=>{var K,re;return i.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[E.image_url&&i.jsx("img",{src:E.image_url,alt:E.name,className:"w-full h-48 object-cover",onError:Q=>{Q.target.onerror=null,Q.target.src="https://via.placeholder.com/300x200?text=No+Image"}}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold",children:E.name}),i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Z(E.status)}`,children:C(E.status)})]}),i.jsx("p",{className:"text-gray-600 text-sm mb-2",children:E.description}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"text-xl font-bold text-green-600",children:["₪",E.price]}),E.wholesale_price&&i.jsxs("p",{className:"text-sm text-gray-500",children:["سعر الجملة: ₪",E.wholesale_price]}),E.discount_price&&i.jsxs("p",{className:"text-sm text-red-500",children:["سعر التخفيض: ₪",E.discount_price]}),i.jsxs("p",{className:"text-sm text-gray-500",children:["المخزون: ",E.stock," قطعة"]}),i.jsxs("p",{className:"text-sm text-gray-500",children:["المتجر: ",(K=E.vendor)==null?void 0:K.store_name]}),i.jsxs("p",{className:"text-sm text-gray-500",children:["التصنيف: ",(re=E.category)==null?void 0:re.name]})]}),i.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[i.jsx("button",{onClick:()=>{g(E),f(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),i.jsx("button",{onClick:()=>O(E.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]})]},E.id)})}),X=()=>i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المنتج"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"السعر"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"سعر الجملة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"سعر التخفيض"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المخزون"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المتجر"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التصنيف"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:V.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"9",className:"px-6 py-4 text-center text-gray-500",children:"لا توجد منتجات متطابقة مع معايير البحث"})}):V.map(E=>{var K,re,Q,ie,le,ae,se,ue,U;return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[E.image_url&&i.jsx("img",{src:E.image_url,alt:E.name,className:"w-10 h-10 rounded-full object-cover ml-3",onError:oe=>{oe.target.onerror=null,oe.target.src="https://via.placeholder.com/40?text=No+Image"}}),i.jsxs("div",{children:[(j==null?void 0:j.id)===E.id&&(j==null?void 0:j.field)==="name"?i.jsx("input",{type:"text",value:((K=N[E.id])==null?void 0:K.name)||E.name,onChange:oe=>te(E.id,"name",oe.target.value),className:"w-full border rounded-md px-2 py-1 text-sm",autoFocus:!0}):i.jsx("div",{className:"font-medium text-gray-900 cursor-pointer hover:text-blue-600",onClick:()=>H(E,"name"),children:E.name}),(j==null?void 0:j.id)===E.id&&(j==null?void 0:j.field)==="description"?i.jsx("textarea",{value:((re=N[E.id])==null?void 0:re.description)||E.description||"",onChange:oe=>te(E.id,"description",oe.target.value),className:"w-full border rounded-md px-2 py-1 text-sm mt-1",rows:"2",autoFocus:!0}):i.jsx("div",{className:"text-gray-500 cursor-pointer hover:text-blue-600",onClick:()=>H(E,"description"),children:E.description||"إضافة وصف"})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(j==null?void 0:j.id)===E.id&&(j==null?void 0:j.field)==="price"?i.jsx("input",{type:"number",value:((Q=N[E.id])==null?void 0:Q.price)||E.price,onChange:oe=>te(E.id,"price",oe.target.value),className:"w-24 border rounded-md px-2 py-1 text-sm",min:"0",step:"0.01",autoFocus:!0}):i.jsxs("div",{className:"text-lg font-semibold text-green-600 cursor-pointer hover:text-blue-600",onClick:()=>H(E,"price"),children:["₪",E.price]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(j==null?void 0:j.id)===E.id&&(j==null?void 0:j.field)==="wholesale_price"?i.jsx("input",{type:"number",value:((ie=N[E.id])==null?void 0:ie.wholesale_price)||E.wholesale_price||"",onChange:oe=>te(E.id,"wholesale_price",oe.target.value),className:"w-24 border rounded-md px-2 py-1 text-sm",min:"0",step:"0.01",autoFocus:!0}):i.jsx("div",{className:"text-gray-500 cursor-pointer hover:text-blue-600",onClick:()=>H(E,"wholesale_price"),children:E.wholesale_price?`₪${E.wholesale_price}`:"-"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(j==null?void 0:j.id)===E.id&&(j==null?void 0:j.field)==="discount_price"?i.jsx("input",{type:"number",value:((le=N[E.id])==null?void 0:le.discount_price)||E.discount_price||"",onChange:oe=>te(E.id,"discount_price",oe.target.value),className:"w-24 border rounded-md px-2 py-1 text-sm",min:"0",step:"0.01",autoFocus:!0}):i.jsx("div",{className:"text-red-500 cursor-pointer hover:text-blue-600",onClick:()=>H(E,"discount_price"),children:E.discount_price?`₪${E.discount_price}`:"-"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(j==null?void 0:j.id)===E.id&&(j==null?void 0:j.field)==="stock"?i.jsx("input",{type:"number",value:((ae=N[E.id])==null?void 0:ae.stock)||E.stock,onChange:oe=>te(E.id,"stock",oe.target.value),className:"w-24 border rounded-md px-2 py-1 text-sm",min:"0",autoFocus:!0}):i.jsxs("div",{className:"text-gray-500 cursor-pointer hover:text-blue-600",onClick:()=>H(E,"stock"),children:[E.stock," قطعة"]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:(se=E.vendor)==null?void 0:se.store_name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:(ue=E.category)==null?void 0:ue.name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(j==null?void 0:j.id)===E.id&&(j==null?void 0:j.field)==="status"?i.jsxs("select",{value:((U=N[E.id])==null?void 0:U.status)||E.status,onChange:oe=>te(E.id,"status",oe.target.value),className:"border rounded-md px-2 py-1 text-sm",autoFocus:!0,children:[i.jsx("option",{value:"active",children:"نشط"}),i.jsx("option",{value:"inactive",children:"غير نشط"}),i.jsx("option",{value:"draft",children:"مسودة"})]}):i.jsx("span",{className:`px-2 py-1 text-xs rounded-full cursor-pointer ${Z(E.status)}`,onClick:()=>H(E,"status"),children:C(E.status)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(j==null?void 0:j.id)===E.id?i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>G(E.id),className:"text-green-600 hover:text-green-800 ml-2",children:"حفظ"}),i.jsx("button",{onClick:B,className:"text-gray-600 hover:text-gray-800",children:"إلغاء"})]}):i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:()=>{g(E),f(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),i.jsx("button",{onClick:()=>O(E.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})})]},E.id)})})]})})});return o&&t.length===0?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):d?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:d}),i.jsx("button",{onClick:P,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"إدارة المنتجات"}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>b("grid"),className:`px-3 py-1 rounded ${v==="grid"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض شبكي"}),i.jsx("button",{onClick:()=>b("table"),className:`px-3 py-1 rounded ${v==="table"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض جدول"})]}),i.jsx("button",{onClick:()=>{g(null),f(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة منتج جديد"})]})]}),i.jsx(Rn,{filters:R,onFilterChange:T}),v==="grid"?I():X(),i.jsx(be,{open:p,onClose:()=>{f(!1),g(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-start justify-center min-h-screen",children:[i.jsx(be.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white w-full min-h-screen",children:[i.jsx("div",{className:"sticky top-0 bg-white border-b z-10",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[i.jsx(be.Title,{className:"text-2xl font-bold",children:x?"تعديل منتج":"إضافة منتج جديد"}),i.jsx("button",{onClick:()=>{f(!1),g(null)},className:"p-2 rounded-full hover:bg-gray-100",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:i.jsx(BR,{onSubmit:Y,initialData:x})})]})]})}),i.jsxs("div",{className:"fixed bottom-4 right-4 bg-blue-600 text-white p-4 rounded-lg shadow-lg max-w-xs",children:[i.jsx("h4",{className:"font-bold mb-2",children:"تلميح: التعديل السريع"}),i.jsx("p",{className:"text-sm",children:'يمكنك النقر مباشرة على أي حقل في العرض الجدولي للتعديل السريع، ثم الضغط على زر "حفظ" لتأكيد التغييرات.'})]})]})}function WR(){const[t,e]=w.useState([]),[n,r]=w.useState(!1),[s,a]=w.useState(!0),[o,l]=w.useState(null),[d,u]=w.useState({name:"",slug:"",description:"",parent_id:"",image_url:""});w.useEffect(()=>{b()},[]);const p={name:{type:"text",label:"اسم التصنيف",placeholder:"البحث باسم التصنيف",value:""},parent_id:{type:"select",label:"التصنيف الأب",placeholder:"جميع التصنيفات",options:t.map(M=>({value:M.id,label:M.name})),value:""}},{filters:f,filterData:x,handleFilterChange:g}=Fn(p),v=x(t),b=async()=>{try{a(!0),l(null);const{data:M,error:R}=await ee.from("categories").select("*").order("name");if(R)throw R;e(M||[])}catch(M){console.error("Error fetching categories:",M),l("فشل في تحميل التصنيفات. الرجاء المحاولة مرة أخرى."),z.error("فشل في تحميل التصنيفات")}finally{a(!1)}},j=async M=>{let R=M,A=1,T=!1;for(;!T;){const{data:Y,error:O}=await ee.from("categories").select("id").eq("slug",R).maybeSingle();if(O)throw O;!Y||d.id&&Y.id===d.id?T=!0:(R=`${M}-${A}`,A++)}return R},_=async M=>{M.preventDefault();try{const R=d.name.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""),A=await j(R),T={...d,slug:A,parent_id:d.parent_id||null};if(d.id||(T.id=zr()),d.id){const{error:Y}=await ee.from("categories").update(T).eq("id",d.id);if(Y)throw Y;z.success("تم تحديث التصنيف بنجاح")}else{const{error:Y}=await ee.from("categories").insert([T]);if(Y)throw Y;z.success("تم إضافة التصنيف بنجاح")}r(!1),u({name:"",slug:"",description:"",parent_id:"",image_url:""}),b()}catch(R){console.error("Error saving category:",R),z.error(d.id?"فشل في تحديث التصنيف":"فشل في إضافة التصنيف")}},N=async M=>{if(window.confirm("هل أنت متأكد من حذف هذا التصنيف؟"))try{const{error:R}=await ee.from("categories").delete().eq("id",M);if(R)throw R;z.success("تم حذف التصنيف بنجاح"),b()}catch(R){console.error("Error deleting category:",R),z.error("فشل في حذف التصنيف")}},S=({preview:M})=>{M&&u({...d,image_url:M})};if(s)return i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(o)return i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:o}),i.jsx("button",{onClick:b,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]});const P=(M,R=0)=>{var A,T;return i.jsxs(q.Fragment,{children:[i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{style:{marginRight:`${R*20}px`},children:[R>0&&"↳ ",M.name]})}),i.jsx("td",{className:"px-6 py-4",children:M.description}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:((A=t.find(Y=>Y.id===M.parent_id))==null?void 0:A.name)||"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:M.image_url?i.jsx("img",{src:M.image_url,alt:M.name,className:"w-10 h-10 object-cover rounded",onError:Y=>{Y.target.onerror=null,Y.target.src="https://via.placeholder.com/40?text=No+Image"}}):"-"}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[i.jsx("button",{onClick:()=>{u(M),r(!0)},className:"text-blue-600 hover:text-blue-900 ml-4",children:"تعديل"}),i.jsx("button",{onClick:()=>N(M.id),className:"text-red-600 hover:text-red-900",children:"حذف"})]})]}),(T=M.children)==null?void 0:T.map(Y=>P(Y,R+1))]},M.id)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"التصنيفات"}),i.jsx("button",{onClick:()=>{u({name:"",slug:"",description:"",parent_id:"",image_url:""}),r(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"إضافة تصنيف جديد"})]}),i.jsx(Rn,{filters:f,onFilterChange:g}),i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"p-6",children:t.length===0?i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-gray-500",children:"لا توجد تصنيفات. قم بإضافة تصنيف جديد."})}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الاسم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الوصف"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التصنيف الأب"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الصورة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(M=>P(M))})]})})})}),i.jsx(be,{open:n,onClose:()=>r(!1),className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(be.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx(be.Title,{className:"text-2xl font-bold mb-6",children:d.id?"تعديل تصنيف":"إضافة تصنيف جديد"}),i.jsxs("form",{onSubmit:_,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم التصنيف ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:d.name,onChange:M=>{u({...d,name:M.target.value})},className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),i.jsx("textarea",{value:d.description,onChange:M=>u({...d,description:M.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"التصنيف الأب"}),i.jsxs("select",{value:d.parent_id||"",onChange:M=>u({...d,parent_id:M.target.value||null}),className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"",children:"بدون تصنيف أب"}),t.filter(M=>M.id!==d.id).map(M=>i.jsx("option",{value:M.id,children:M.name},M.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"صورة التصنيف"}),i.jsx(ps,{type:"image",preview:d.image_url,onUpload:S,storeInSupabase:!0,bucket:Lt.GENERAL,folder:"categories"})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx("button",{type:"button",onClick:()=>{r(!1),u({name:"",slug:"",description:"",parent_id:"",image_url:""})},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:d.id?"تحديث":"إضافة"})]})]})]})]})})]})}function HR(t,e){const n=w.useRef(e);w.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const YR=1;function VR(t){return Object.freeze({__version:YR,map:t})}function qR(t,e){return Object.freeze({...t,...e})}const KN=w.createContext(null),GN=KN.Provider;function QN(){const t=w.useContext(KN);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function ZR(t){function e(n,r){const{instance:s,context:a}=t(n).current;return w.useImperativeHandle(r,()=>s),n.children==null?null:q.createElement(GN,{value:a},n.children)}return w.forwardRef(e)}function KR(t){function e(n,r){const{instance:s}=t(n).current;return w.useImperativeHandle(r,()=>s),null}return w.forwardRef(e)}function GR(t,e){const n=w.useRef();w.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function XN(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}var Og={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(hn,function(n){var r="1.9.4";function s(c){var h,m,y,k;for(m=1,y=arguments.length;m<y;m++){k=arguments[m];for(h in k)c[h]=k[h]}return c}var a=Object.create||function(){function c(){}return function(h){return c.prototype=h,new c}}();function o(c,h){var m=Array.prototype.slice;if(c.bind)return c.bind.apply(c,m.call(arguments,1));var y=m.call(arguments,2);return function(){return c.apply(h,y.length?y.concat(m.call(arguments)):arguments)}}var l=0;function d(c){return"_leaflet_id"in c||(c._leaflet_id=++l),c._leaflet_id}function u(c,h,m){var y,k,D,W;return W=function(){y=!1,k&&(D.apply(m,k),k=!1)},D=function(){y?k=arguments:(c.apply(m,arguments),setTimeout(W,h),y=!0)},D}function p(c,h,m){var y=h[1],k=h[0],D=y-k;return c===y&&m?c:((c-k)%D+D)%D+k}function f(){return!1}function x(c,h){if(h===!1)return c;var m=Math.pow(10,h===void 0?6:h);return Math.round(c*m)/m}function g(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}function v(c){return g(c).split(/\s+/)}function b(c,h){Object.prototype.hasOwnProperty.call(c,"options")||(c.options=c.options?a(c.options):{});for(var m in h)c.options[m]=h[m];return c.options}function j(c,h,m){var y=[];for(var k in c)y.push(encodeURIComponent(m?k.toUpperCase():k)+"="+encodeURIComponent(c[k]));return(!h||h.indexOf("?")===-1?"?":"&")+y.join("&")}var _=/\{ *([\w_ -]+) *\}/g;function N(c,h){return c.replace(_,function(m,y){var k=h[y];if(k===void 0)throw new Error("No value provided for variable "+m);return typeof k=="function"&&(k=k(h)),k})}var S=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"};function P(c,h){for(var m=0;m<c.length;m++)if(c[m]===h)return m;return-1}var M="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function R(c){return window["webkit"+c]||window["moz"+c]||window["ms"+c]}var A=0;function T(c){var h=+new Date,m=Math.max(0,16-(h-A));return A=h+m,window.setTimeout(c,m)}var Y=window.requestAnimationFrame||R("RequestAnimationFrame")||T,O=window.cancelAnimationFrame||R("CancelAnimationFrame")||R("CancelRequestAnimationFrame")||function(c){window.clearTimeout(c)};function H(c,h,m){if(m&&Y===T)c.call(h);else return Y.call(window,o(c,h))}function te(c){c&&O.call(window,c)}var G={__proto__:null,extend:s,create:a,bind:o,get lastId(){return l},stamp:d,throttle:u,wrapNum:p,falseFn:f,formatNum:x,trim:g,splitWords:v,setOptions:b,getParamString:j,template:N,isArray:S,indexOf:P,emptyImageUrl:M,requestFn:Y,cancelFn:O,requestAnimFrame:H,cancelAnimFrame:te};function B(){}B.extend=function(c){var h=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},m=h.__super__=this.prototype,y=a(m);y.constructor=h,h.prototype=y;for(var k in this)Object.prototype.hasOwnProperty.call(this,k)&&k!=="prototype"&&k!=="__super__"&&(h[k]=this[k]);return c.statics&&s(h,c.statics),c.includes&&(Z(c.includes),s.apply(null,[y].concat(c.includes))),s(y,c),delete y.statics,delete y.includes,y.options&&(y.options=m.options?a(m.options):{},s(y.options,c.options)),y._initHooks=[],y.callInitHooks=function(){if(!this._initHooksCalled){m.callInitHooks&&m.callInitHooks.call(this),this._initHooksCalled=!0;for(var D=0,W=y._initHooks.length;D<W;D++)y._initHooks[D].call(this)}},h},B.include=function(c){var h=this.prototype.options;return s(this.prototype,c),c.options&&(this.prototype.options=h,this.mergeOptions(c.options)),this},B.mergeOptions=function(c){return s(this.prototype.options,c),this},B.addInitHook=function(c){var h=Array.prototype.slice.call(arguments,1),m=typeof c=="function"?c:function(){this[c].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(m),this};function Z(c){if(!(typeof L>"u"||!L||!L.Mixin)){c=S(c)?c:[c];for(var h=0;h<c.length;h++)c[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var C={on:function(c,h,m){if(typeof c=="object")for(var y in c)this._on(y,c[y],h);else{c=v(c);for(var k=0,D=c.length;k<D;k++)this._on(c[k],h,m)}return this},off:function(c,h,m){if(!arguments.length)delete this._events;else if(typeof c=="object")for(var y in c)this._off(y,c[y],h);else{c=v(c);for(var k=arguments.length===1,D=0,W=c.length;D<W;D++)k?this._off(c[D]):this._off(c[D],h,m)}return this},_on:function(c,h,m,y){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(c,h,m)===!1){m===this&&(m=void 0);var k={fn:h,ctx:m};y&&(k.once=!0),this._events=this._events||{},this._events[c]=this._events[c]||[],this._events[c].push(k)}},_off:function(c,h,m){var y,k,D;if(this._events&&(y=this._events[c],!!y)){if(arguments.length===1){if(this._firingCount)for(k=0,D=y.length;k<D;k++)y[k].fn=f;delete this._events[c];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var W=this._listens(c,h,m);if(W!==!1){var J=y[W];this._firingCount&&(J.fn=f,this._events[c]=y=y.slice()),y.splice(W,1)}}},fire:function(c,h,m){if(!this.listens(c,m))return this;var y=s({},h,{type:c,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var k=this._events[c];if(k){this._firingCount=this._firingCount+1||1;for(var D=0,W=k.length;D<W;D++){var J=k[D],ne=J.fn;J.once&&this.off(c,ne,J.ctx),ne.call(J.ctx||this,y)}this._firingCount--}}return m&&this._propagateEvent(y),this},listens:function(c,h,m,y){typeof c!="string"&&console.warn('"string" type argument expected');var k=h;typeof h!="function"&&(y=!!h,k=void 0,m=void 0);var D=this._events&&this._events[c];if(D&&D.length&&this._listens(c,k,m)!==!1)return!0;if(y){for(var W in this._eventParents)if(this._eventParents[W].listens(c,h,m,y))return!0}return!1},_listens:function(c,h,m){if(!this._events)return!1;var y=this._events[c]||[];if(!h)return!!y.length;m===this&&(m=void 0);for(var k=0,D=y.length;k<D;k++)if(y[k].fn===h&&y[k].ctx===m)return k;return!1},once:function(c,h,m){if(typeof c=="object")for(var y in c)this._on(y,c[y],h,!0);else{c=v(c);for(var k=0,D=c.length;k<D;k++)this._on(c[k],h,m,!0)}return this},addEventParent:function(c){return this._eventParents=this._eventParents||{},this._eventParents[d(c)]=c,this},removeEventParent:function(c){return this._eventParents&&delete this._eventParents[d(c)],this},_propagateEvent:function(c){for(var h in this._eventParents)this._eventParents[h].fire(c.type,s({layer:c.target,propagatedFrom:c.target},c),!0)}};C.addEventListener=C.on,C.removeEventListener=C.clearAllEventListeners=C.off,C.addOneTimeEventListener=C.once,C.fireEvent=C.fire,C.hasEventListeners=C.listens;var V=B.extend(C);function I(c,h,m){this.x=m?Math.round(c):c,this.y=m?Math.round(h):h}var X=Math.trunc||function(c){return c>0?Math.floor(c):Math.ceil(c)};I.prototype={clone:function(){return new I(this.x,this.y)},add:function(c){return this.clone()._add(E(c))},_add:function(c){return this.x+=c.x,this.y+=c.y,this},subtract:function(c){return this.clone()._subtract(E(c))},_subtract:function(c){return this.x-=c.x,this.y-=c.y,this},divideBy:function(c){return this.clone()._divideBy(c)},_divideBy:function(c){return this.x/=c,this.y/=c,this},multiplyBy:function(c){return this.clone()._multiplyBy(c)},_multiplyBy:function(c){return this.x*=c,this.y*=c,this},scaleBy:function(c){return new I(this.x*c.x,this.y*c.y)},unscaleBy:function(c){return new I(this.x/c.x,this.y/c.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=X(this.x),this.y=X(this.y),this},distanceTo:function(c){c=E(c);var h=c.x-this.x,m=c.y-this.y;return Math.sqrt(h*h+m*m)},equals:function(c){return c=E(c),c.x===this.x&&c.y===this.y},contains:function(c){return c=E(c),Math.abs(c.x)<=Math.abs(this.x)&&Math.abs(c.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function E(c,h,m){return c instanceof I?c:S(c)?new I(c[0],c[1]):c==null?c:typeof c=="object"&&"x"in c&&"y"in c?new I(c.x,c.y):new I(c,h,m)}function K(c,h){if(c)for(var m=h?[c,h]:c,y=0,k=m.length;y<k;y++)this.extend(m[y])}K.prototype={extend:function(c){var h,m;if(!c)return this;if(c instanceof I||typeof c[0]=="number"||"x"in c)h=m=E(c);else if(c=re(c),h=c.min,m=c.max,!h||!m)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=m.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(m.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(m.y,this.max.y)),this},getCenter:function(c){return E((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,c)},getBottomLeft:function(){return E(this.min.x,this.max.y)},getTopRight:function(){return E(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(c){var h,m;return typeof c[0]=="number"||c instanceof I?c=E(c):c=re(c),c instanceof K?(h=c.min,m=c.max):h=m=c,h.x>=this.min.x&&m.x<=this.max.x&&h.y>=this.min.y&&m.y<=this.max.y},intersects:function(c){c=re(c);var h=this.min,m=this.max,y=c.min,k=c.max,D=k.x>=h.x&&y.x<=m.x,W=k.y>=h.y&&y.y<=m.y;return D&&W},overlaps:function(c){c=re(c);var h=this.min,m=this.max,y=c.min,k=c.max,D=k.x>h.x&&y.x<m.x,W=k.y>h.y&&y.y<m.y;return D&&W},isValid:function(){return!!(this.min&&this.max)},pad:function(c){var h=this.min,m=this.max,y=Math.abs(h.x-m.x)*c,k=Math.abs(h.y-m.y)*c;return re(E(h.x-y,h.y-k),E(m.x+y,m.y+k))},equals:function(c){return c?(c=re(c),this.min.equals(c.getTopLeft())&&this.max.equals(c.getBottomRight())):!1}};function re(c,h){return!c||c instanceof K?c:new K(c,h)}function Q(c,h){if(c)for(var m=h?[c,h]:c,y=0,k=m.length;y<k;y++)this.extend(m[y])}Q.prototype={extend:function(c){var h=this._southWest,m=this._northEast,y,k;if(c instanceof le)y=c,k=c;else if(c instanceof Q){if(y=c._southWest,k=c._northEast,!y||!k)return this}else return c?this.extend(ae(c)||ie(c)):this;return!h&&!m?(this._southWest=new le(y.lat,y.lng),this._northEast=new le(k.lat,k.lng)):(h.lat=Math.min(y.lat,h.lat),h.lng=Math.min(y.lng,h.lng),m.lat=Math.max(k.lat,m.lat),m.lng=Math.max(k.lng,m.lng)),this},pad:function(c){var h=this._southWest,m=this._northEast,y=Math.abs(h.lat-m.lat)*c,k=Math.abs(h.lng-m.lng)*c;return new Q(new le(h.lat-y,h.lng-k),new le(m.lat+y,m.lng+k))},getCenter:function(){return new le((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new le(this.getNorth(),this.getWest())},getSouthEast:function(){return new le(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(c){typeof c[0]=="number"||c instanceof le||"lat"in c?c=ae(c):c=ie(c);var h=this._southWest,m=this._northEast,y,k;return c instanceof Q?(y=c.getSouthWest(),k=c.getNorthEast()):y=k=c,y.lat>=h.lat&&k.lat<=m.lat&&y.lng>=h.lng&&k.lng<=m.lng},intersects:function(c){c=ie(c);var h=this._southWest,m=this._northEast,y=c.getSouthWest(),k=c.getNorthEast(),D=k.lat>=h.lat&&y.lat<=m.lat,W=k.lng>=h.lng&&y.lng<=m.lng;return D&&W},overlaps:function(c){c=ie(c);var h=this._southWest,m=this._northEast,y=c.getSouthWest(),k=c.getNorthEast(),D=k.lat>h.lat&&y.lat<m.lat,W=k.lng>h.lng&&y.lng<m.lng;return D&&W},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(c,h){return c?(c=ie(c),this._southWest.equals(c.getSouthWest(),h)&&this._northEast.equals(c.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ie(c,h){return c instanceof Q?c:new Q(c,h)}function le(c,h,m){if(isNaN(c)||isNaN(h))throw new Error("Invalid LatLng object: ("+c+", "+h+")");this.lat=+c,this.lng=+h,m!==void 0&&(this.alt=+m)}le.prototype={equals:function(c,h){if(!c)return!1;c=ae(c);var m=Math.max(Math.abs(this.lat-c.lat),Math.abs(this.lng-c.lng));return m<=(h===void 0?1e-9:h)},toString:function(c){return"LatLng("+x(this.lat,c)+", "+x(this.lng,c)+")"},distanceTo:function(c){return ue.distance(this,ae(c))},wrap:function(){return ue.wrapLatLng(this)},toBounds:function(c){var h=180*c/40075017,m=h/Math.cos(Math.PI/180*this.lat);return ie([this.lat-h,this.lng-m],[this.lat+h,this.lng+m])},clone:function(){return new le(this.lat,this.lng,this.alt)}};function ae(c,h,m){return c instanceof le?c:S(c)&&typeof c[0]!="object"?c.length===3?new le(c[0],c[1],c[2]):c.length===2?new le(c[0],c[1]):null:c==null?c:typeof c=="object"&&"lat"in c?new le(c.lat,"lng"in c?c.lng:c.lon,c.alt):h===void 0?null:new le(c,h,m)}var se={latLngToPoint:function(c,h){var m=this.projection.project(c),y=this.scale(h);return this.transformation._transform(m,y)},pointToLatLng:function(c,h){var m=this.scale(h),y=this.transformation.untransform(c,m);return this.projection.unproject(y)},project:function(c){return this.projection.project(c)},unproject:function(c){return this.projection.unproject(c)},scale:function(c){return 256*Math.pow(2,c)},zoom:function(c){return Math.log(c/256)/Math.LN2},getProjectedBounds:function(c){if(this.infinite)return null;var h=this.projection.bounds,m=this.scale(c),y=this.transformation.transform(h.min,m),k=this.transformation.transform(h.max,m);return new K(y,k)},infinite:!1,wrapLatLng:function(c){var h=this.wrapLng?p(c.lng,this.wrapLng,!0):c.lng,m=this.wrapLat?p(c.lat,this.wrapLat,!0):c.lat,y=c.alt;return new le(m,h,y)},wrapLatLngBounds:function(c){var h=c.getCenter(),m=this.wrapLatLng(h),y=h.lat-m.lat,k=h.lng-m.lng;if(y===0&&k===0)return c;var D=c.getSouthWest(),W=c.getNorthEast(),J=new le(D.lat-y,D.lng-k),ne=new le(W.lat-y,W.lng-k);return new Q(J,ne)}},ue=s({},se,{wrapLng:[-180,180],R:6371e3,distance:function(c,h){var m=Math.PI/180,y=c.lat*m,k=h.lat*m,D=Math.sin((h.lat-c.lat)*m/2),W=Math.sin((h.lng-c.lng)*m/2),J=D*D+Math.cos(y)*Math.cos(k)*W*W,ne=2*Math.atan2(Math.sqrt(J),Math.sqrt(1-J));return this.R*ne}}),U=6378137,oe={R:U,MAX_LATITUDE:85.0511287798,project:function(c){var h=Math.PI/180,m=this.MAX_LATITUDE,y=Math.max(Math.min(m,c.lat),-m),k=Math.sin(y*h);return new I(this.R*c.lng*h,this.R*Math.log((1+k)/(1-k))/2)},unproject:function(c){var h=180/Math.PI;return new le((2*Math.atan(Math.exp(c.y/this.R))-Math.PI/2)*h,c.x*h/this.R)},bounds:function(){var c=U*Math.PI;return new K([-c,-c],[c,c])}()};function fe(c,h,m,y){if(S(c)){this._a=c[0],this._b=c[1],this._c=c[2],this._d=c[3];return}this._a=c,this._b=h,this._c=m,this._d=y}fe.prototype={transform:function(c,h){return this._transform(c.clone(),h)},_transform:function(c,h){return h=h||1,c.x=h*(this._a*c.x+this._b),c.y=h*(this._c*c.y+this._d),c},untransform:function(c,h){return h=h||1,new I((c.x/h-this._b)/this._a,(c.y/h-this._d)/this._c)}};function Ne(c,h,m,y){return new fe(c,h,m,y)}var Ce=s({},ue,{code:"EPSG:3857",projection:oe,transformation:function(){var c=.5/(Math.PI*oe.R);return Ne(c,.5,-c,.5)}()}),ct=s({},Ce,{code:"EPSG:900913"});function Gt(c){return document.createElementNS("http://www.w3.org/2000/svg",c)}function Qt(c,h){var m="",y,k,D,W,J,ne;for(y=0,D=c.length;y<D;y++){for(J=c[y],k=0,W=J.length;k<W;k++)ne=J[k],m+=(k?"L":"M")+ne.x+" "+ne.y;m+=h?_e.svg?"z":"x":""}return m||"M0 0"}var Dt=document.documentElement.style,Wt="ActiveXObject"in window,Xt=Wt&&!document.addEventListener,vt="msLaunchUri"in navigator&&!("documentMode"in document),En=xr("webkit"),ui=xr("android"),hi=xr("android 2")||xr("android 3"),he=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),we=ui&&xr("Google")&&he<537&&!("AudioNode"in window),Ke=!!window.opera,at=!vt&&xr("chrome"),Et=xr("gecko")&&!En&&!Ke&&!Wt,pi=!at&&xr("safari"),Hr=xr("phantom"),ha="OTransition"in Dt,Ro=navigator.platform.indexOf("Win")===0,pa=Wt&&"transition"in Dt,vs="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!hi,fa="MozPerspective"in Dt,Fo=!window.L_DISABLE_3D&&(pa||vs||fa)&&!ha&&!Hr,Yr=typeof orientation<"u"||xr("mobile"),$o=Yr&&En,mp=Yr&&vs,Sv=!window.PointerEvent&&window.MSPointerEvent,Cv=!!(window.PointerEvent||Sv),Ev="ontouchstart"in window||!!window.TouchEvent,rS=!window.L_NO_TOUCH&&(Ev||Cv),sS=Yr&&Ke,iS=Yr&&Et,aS=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,oS=function(){var c=!1;try{var h=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("testPassiveEventSupport",f,h),window.removeEventListener("testPassiveEventSupport",f,h)}catch{}return c}(),lS=function(){return!!document.createElement("canvas").getContext}(),gp=!!(document.createElementNS&&Gt("svg").createSVGRect),cS=!!gp&&function(){var c=document.createElement("div");return c.innerHTML="<svg/>",(c.firstChild&&c.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),dS=!gp&&function(){try{var c=document.createElement("div");c.innerHTML='<v:shape adj="1"/>';var h=c.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}}(),uS=navigator.platform.indexOf("Mac")===0,hS=navigator.platform.indexOf("Linux")===0;function xr(c){return navigator.userAgent.toLowerCase().indexOf(c)>=0}var _e={ie:Wt,ielt9:Xt,edge:vt,webkit:En,android:ui,android23:hi,androidStock:we,opera:Ke,chrome:at,gecko:Et,safari:pi,phantom:Hr,opera12:ha,win:Ro,ie3d:pa,webkit3d:vs,gecko3d:fa,any3d:Fo,mobile:Yr,mobileWebkit:$o,mobileWebkit3d:mp,msPointer:Sv,pointer:Cv,touch:rS,touchNative:Ev,mobileOpera:sS,mobileGecko:iS,retina:aS,passiveEvents:oS,canvas:lS,svg:gp,vml:dS,inlineSvg:cS,mac:uS,linux:hS},Tv=_e.msPointer?"MSPointerDown":"pointerdown",Pv=_e.msPointer?"MSPointerMove":"pointermove",Dv=_e.msPointer?"MSPointerUp":"pointerup",Ov=_e.msPointer?"MSPointerCancel":"pointercancel",xp={touchstart:Tv,touchmove:Pv,touchend:Dv,touchcancel:Ov},Mv={touchstart:vS,touchmove:Zc,touchend:Zc,touchcancel:Zc},ma={},Lv=!1;function pS(c,h,m){return h==="touchstart"&&xS(),Mv[h]?(m=Mv[h].bind(this,m),c.addEventListener(xp[h],m,!1),m):(console.warn("wrong event specified:",h),f)}function fS(c,h,m){if(!xp[h]){console.warn("wrong event specified:",h);return}c.removeEventListener(xp[h],m,!1)}function mS(c){ma[c.pointerId]=c}function gS(c){ma[c.pointerId]&&(ma[c.pointerId]=c)}function Av(c){delete ma[c.pointerId]}function xS(){Lv||(document.addEventListener(Tv,mS,!0),document.addEventListener(Pv,gS,!0),document.addEventListener(Dv,Av,!0),document.addEventListener(Ov,Av,!0),Lv=!0)}function Zc(c,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var m in ma)h.touches.push(ma[m]);h.changedTouches=[h],c(h)}}function vS(c,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&Ht(h),Zc(c,h)}function yS(c){var h={},m,y;for(y in c)m=c[y],h[y]=m&&m.bind?m.bind(c):m;return c=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var bS=200;function _S(c,h){c.addEventListener("dblclick",h);var m=0,y;function k(D){if(D.detail!==1){y=D.detail;return}if(!(D.pointerType==="mouse"||D.sourceCapabilities&&!D.sourceCapabilities.firesTouchEvents)){var W=zv(D);if(!(W.some(function(ne){return ne instanceof HTMLLabelElement&&ne.attributes.for})&&!W.some(function(ne){return ne instanceof HTMLInputElement||ne instanceof HTMLSelectElement}))){var J=Date.now();J-m<=bS?(y++,y===2&&h(yS(D))):y=1,m=J}}}return c.addEventListener("click",k),{dblclick:h,simDblclick:k}}function wS(c,h){c.removeEventListener("dblclick",h.dblclick),c.removeEventListener("click",h.simDblclick)}var vp=Qc(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),zo=Qc(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Iv=zo==="webkitTransition"||zo==="OTransition"?zo+"End":"transitionend";function Rv(c){return typeof c=="string"?document.getElementById(c):c}function Bo(c,h){var m=c.style[h]||c.currentStyle&&c.currentStyle[h];if((!m||m==="auto")&&document.defaultView){var y=document.defaultView.getComputedStyle(c,null);m=y?y[h]:null}return m==="auto"?null:m}function We(c,h,m){var y=document.createElement(c);return y.className=h||"",m&&m.appendChild(y),y}function dt(c){var h=c.parentNode;h&&h.removeChild(c)}function Kc(c){for(;c.firstChild;)c.removeChild(c.firstChild)}function ga(c){var h=c.parentNode;h&&h.lastChild!==c&&h.appendChild(c)}function xa(c){var h=c.parentNode;h&&h.firstChild!==c&&h.insertBefore(c,h.firstChild)}function yp(c,h){if(c.classList!==void 0)return c.classList.contains(h);var m=Gc(c);return m.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(m)}function Ee(c,h){if(c.classList!==void 0)for(var m=v(h),y=0,k=m.length;y<k;y++)c.classList.add(m[y]);else if(!yp(c,h)){var D=Gc(c);bp(c,(D?D+" ":"")+h)}}function yt(c,h){c.classList!==void 0?c.classList.remove(h):bp(c,g((" "+Gc(c)+" ").replace(" "+h+" "," ")))}function bp(c,h){c.className.baseVal===void 0?c.className=h:c.className.baseVal=h}function Gc(c){return c.correspondingElement&&(c=c.correspondingElement),c.className.baseVal===void 0?c.className:c.className.baseVal}function $n(c,h){"opacity"in c.style?c.style.opacity=h:"filter"in c.style&&jS(c,h)}function jS(c,h){var m=!1,y="DXImageTransform.Microsoft.Alpha";try{m=c.filters.item(y)}catch{if(h===1)return}h=Math.round(h*100),m?(m.Enabled=h!==100,m.Opacity=h):c.style.filter+=" progid:"+y+"(opacity="+h+")"}function Qc(c){for(var h=document.documentElement.style,m=0;m<c.length;m++)if(c[m]in h)return c[m];return!1}function fi(c,h,m){var y=h||new I(0,0);c.style[vp]=(_e.ie3d?"translate("+y.x+"px,"+y.y+"px)":"translate3d("+y.x+"px,"+y.y+"px,0)")+(m?" scale("+m+")":"")}function kt(c,h){c._leaflet_pos=h,_e.any3d?fi(c,h):(c.style.left=h.x+"px",c.style.top=h.y+"px")}function mi(c){return c._leaflet_pos||new I(0,0)}var Uo,Wo,_p;if("onselectstart"in document)Uo=function(){ke(window,"selectstart",Ht)},Wo=function(){Xe(window,"selectstart",Ht)};else{var Ho=Qc(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Uo=function(){if(Ho){var c=document.documentElement.style;_p=c[Ho],c[Ho]="none"}},Wo=function(){Ho&&(document.documentElement.style[Ho]=_p,_p=void 0)}}function wp(){ke(window,"dragstart",Ht)}function jp(){Xe(window,"dragstart",Ht)}var Xc,Np;function kp(c){for(;c.tabIndex===-1;)c=c.parentNode;c.style&&(Jc(),Xc=c,Np=c.style.outlineStyle,c.style.outlineStyle="none",ke(window,"keydown",Jc))}function Jc(){Xc&&(Xc.style.outlineStyle=Np,Xc=void 0,Np=void 0,Xe(window,"keydown",Jc))}function Fv(c){do c=c.parentNode;while((!c.offsetWidth||!c.offsetHeight)&&c!==document.body);return c}function Sp(c){var h=c.getBoundingClientRect();return{x:h.width/c.offsetWidth||1,y:h.height/c.offsetHeight||1,boundingClientRect:h}}var NS={__proto__:null,TRANSFORM:vp,TRANSITION:zo,TRANSITION_END:Iv,get:Rv,getStyle:Bo,create:We,remove:dt,empty:Kc,toFront:ga,toBack:xa,hasClass:yp,addClass:Ee,removeClass:yt,setClass:bp,getClass:Gc,setOpacity:$n,testProp:Qc,setTransform:fi,setPosition:kt,getPosition:mi,get disableTextSelection(){return Uo},get enableTextSelection(){return Wo},disableImageDrag:wp,enableImageDrag:jp,preventOutline:kp,restoreOutline:Jc,getSizedParentNode:Fv,getScale:Sp};function ke(c,h,m,y){if(h&&typeof h=="object")for(var k in h)Ep(c,k,h[k],m);else{h=v(h);for(var D=0,W=h.length;D<W;D++)Ep(c,h[D],m,y)}return this}var vr="_leaflet_events";function Xe(c,h,m,y){if(arguments.length===1)$v(c),delete c[vr];else if(h&&typeof h=="object")for(var k in h)Tp(c,k,h[k],m);else if(h=v(h),arguments.length===2)$v(c,function(J){return P(h,J)!==-1});else for(var D=0,W=h.length;D<W;D++)Tp(c,h[D],m,y);return this}function $v(c,h){for(var m in c[vr]){var y=m.split(/\d/)[0];(!h||h(y))&&Tp(c,y,null,null,m)}}var Cp={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ep(c,h,m,y){var k=h+d(m)+(y?"_"+d(y):"");if(c[vr]&&c[vr][k])return this;var D=function(J){return m.call(y||c,J||window.event)},W=D;!_e.touchNative&&_e.pointer&&h.indexOf("touch")===0?D=pS(c,h,D):_e.touch&&h==="dblclick"?D=_S(c,D):"addEventListener"in c?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?c.addEventListener(Cp[h]||h,D,_e.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(D=function(J){J=J||window.event,Dp(c,J)&&W(J)},c.addEventListener(Cp[h],D,!1)):c.addEventListener(h,W,!1):c.attachEvent("on"+h,D),c[vr]=c[vr]||{},c[vr][k]=D}function Tp(c,h,m,y,k){k=k||h+d(m)+(y?"_"+d(y):"");var D=c[vr]&&c[vr][k];if(!D)return this;!_e.touchNative&&_e.pointer&&h.indexOf("touch")===0?fS(c,h,D):_e.touch&&h==="dblclick"?wS(c,D):"removeEventListener"in c?c.removeEventListener(Cp[h]||h,D,!1):c.detachEvent("on"+h,D),c[vr][k]=null}function gi(c){return c.stopPropagation?c.stopPropagation():c.originalEvent?c.originalEvent._stopped=!0:c.cancelBubble=!0,this}function Pp(c){return Ep(c,"wheel",gi),this}function Yo(c){return ke(c,"mousedown touchstart dblclick contextmenu",gi),c._leaflet_disable_click=!0,this}function Ht(c){return c.preventDefault?c.preventDefault():c.returnValue=!1,this}function xi(c){return Ht(c),gi(c),this}function zv(c){if(c.composedPath)return c.composedPath();for(var h=[],m=c.target;m;)h.push(m),m=m.parentNode;return h}function Bv(c,h){if(!h)return new I(c.clientX,c.clientY);var m=Sp(h),y=m.boundingClientRect;return new I((c.clientX-y.left)/m.x-h.clientLeft,(c.clientY-y.top)/m.y-h.clientTop)}var kS=_e.linux&&_e.chrome?window.devicePixelRatio:_e.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Uv(c){return _e.edge?c.wheelDeltaY/2:c.deltaY&&c.deltaMode===0?-c.deltaY/kS:c.deltaY&&c.deltaMode===1?-c.deltaY*20:c.deltaY&&c.deltaMode===2?-c.deltaY*60:c.deltaX||c.deltaZ?0:c.wheelDelta?(c.wheelDeltaY||c.wheelDelta)/2:c.detail&&Math.abs(c.detail)<32765?-c.detail*20:c.detail?c.detail/-32765*60:0}function Dp(c,h){var m=h.relatedTarget;if(!m)return!0;try{for(;m&&m!==c;)m=m.parentNode}catch{return!1}return m!==c}var SS={__proto__:null,on:ke,off:Xe,stopPropagation:gi,disableScrollPropagation:Pp,disableClickPropagation:Yo,preventDefault:Ht,stop:xi,getPropagationPath:zv,getMousePosition:Bv,getWheelDelta:Uv,isExternalTarget:Dp,addListener:ke,removeListener:Xe},Wv=V.extend({run:function(c,h,m,y){this.stop(),this._el=c,this._inProgress=!0,this._duration=m||.25,this._easeOutPower=1/Math.max(y||.5,.2),this._startPos=mi(c),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=H(this._animate,this),this._step()},_step:function(c){var h=+new Date-this._startTime,m=this._duration*1e3;h<m?this._runFrame(this._easeOut(h/m),c):(this._runFrame(1),this._complete())},_runFrame:function(c,h){var m=this._startPos.add(this._offset.multiplyBy(c));h&&m._round(),kt(this._el,m),this.fire("step")},_complete:function(){te(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(c){return 1-Math.pow(1-c,this._easeOutPower)}}),Fe=V.extend({options:{crs:Ce,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(c,h){h=b(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(c),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(ae(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=zo&&_e.any3d&&!_e.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ke(this._proxy,Iv,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(c,h,m){if(h=h===void 0?this._zoom:this._limitZoom(h),c=this._limitCenter(ae(c),h,this.options.maxBounds),m=m||{},this._stop(),this._loaded&&!m.reset&&m!==!0){m.animate!==void 0&&(m.zoom=s({animate:m.animate},m.zoom),m.pan=s({animate:m.animate,duration:m.duration},m.pan));var y=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(c,h,m.zoom):this._tryAnimatedPan(c,m.pan);if(y)return clearTimeout(this._sizeTimer),this}return this._resetView(c,h,m.pan&&m.pan.noMoveStart),this},setZoom:function(c,h){return this._loaded?this.setView(this.getCenter(),c,{zoom:h}):(this._zoom=c,this)},zoomIn:function(c,h){return c=c||(_e.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+c,h)},zoomOut:function(c,h){return c=c||(_e.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-c,h)},setZoomAround:function(c,h,m){var y=this.getZoomScale(h),k=this.getSize().divideBy(2),D=c instanceof I?c:this.latLngToContainerPoint(c),W=D.subtract(k).multiplyBy(1-1/y),J=this.containerPointToLatLng(k.add(W));return this.setView(J,h,{zoom:m})},_getBoundsCenterZoom:function(c,h){h=h||{},c=c.getBounds?c.getBounds():ie(c);var m=E(h.paddingTopLeft||h.padding||[0,0]),y=E(h.paddingBottomRight||h.padding||[0,0]),k=this.getBoundsZoom(c,!1,m.add(y));if(k=typeof h.maxZoom=="number"?Math.min(h.maxZoom,k):k,k===1/0)return{center:c.getCenter(),zoom:k};var D=y.subtract(m).divideBy(2),W=this.project(c.getSouthWest(),k),J=this.project(c.getNorthEast(),k),ne=this.unproject(W.add(J).divideBy(2).add(D),k);return{center:ne,zoom:k}},fitBounds:function(c,h){if(c=ie(c),!c.isValid())throw new Error("Bounds are not valid.");var m=this._getBoundsCenterZoom(c,h);return this.setView(m.center,m.zoom,h)},fitWorld:function(c){return this.fitBounds([[-90,-180],[90,180]],c)},panTo:function(c,h){return this.setView(c,this._zoom,{pan:h})},panBy:function(c,h){if(c=E(c).round(),h=h||{},!c.x&&!c.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(c))return this._resetView(this.unproject(this.project(this.getCenter()).add(c)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Wv,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){Ee(this._mapPane,"leaflet-pan-anim");var m=this._getMapPanePos().subtract(c).round();this._panAnim.run(this._mapPane,m,h.duration||.25,h.easeLinearity)}else this._rawPanBy(c),this.fire("move").fire("moveend");return this},flyTo:function(c,h,m){if(m=m||{},m.animate===!1||!_e.any3d)return this.setView(c,h,m);this._stop();var y=this.project(this.getCenter()),k=this.project(c),D=this.getSize(),W=this._zoom;c=ae(c),h=h===void 0?W:h;var J=Math.max(D.x,D.y),ne=J*this.getZoomScale(W,h),ce=k.distanceTo(y)||1,ge=1.42,je=ge*ge;function Oe(St){var ud=St?-1:1,fC=St?ne:J,mC=ne*ne-J*J+ud*je*je*ce*ce,gC=2*fC*je*ce,Up=mC/gC,j0=Math.sqrt(Up*Up+1)-Up,xC=j0<1e-9?-18:Math.log(j0);return xC}function ln(St){return(Math.exp(St)-Math.exp(-St))/2}function Ot(St){return(Math.exp(St)+Math.exp(-St))/2}function Bn(St){return ln(St)/Ot(St)}var mn=Oe(0);function ja(St){return J*(Ot(mn)/Ot(mn+ge*St))}function dC(St){return J*(Ot(mn)*Bn(mn+ge*St)-ln(mn))/je}function uC(St){return 1-Math.pow(1-St,1.5)}var hC=Date.now(),_0=(Oe(1)-mn)/ge,pC=m.duration?1e3*m.duration:1e3*_0*.8;function w0(){var St=(Date.now()-hC)/pC,ud=uC(St)*_0;St<=1?(this._flyToFrame=H(w0,this),this._move(this.unproject(y.add(k.subtract(y).multiplyBy(dC(ud)/ce)),W),this.getScaleZoom(J/ja(ud),W),{flyTo:!0})):this._move(c,h)._moveEnd(!0)}return this._moveStart(!0,m.noMoveStart),w0.call(this),this},flyToBounds:function(c,h){var m=this._getBoundsCenterZoom(c,h);return this.flyTo(m.center,m.zoom,h)},setMaxBounds:function(c){return c=ie(c),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),c.isValid()?(this.options.maxBounds=c,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(c){var h=this.options.minZoom;return this.options.minZoom=c,this._loaded&&h!==c&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(c):this},setMaxZoom:function(c){var h=this.options.maxZoom;return this.options.maxZoom=c,this._loaded&&h!==c&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(c):this},panInsideBounds:function(c,h){this._enforcingBounds=!0;var m=this.getCenter(),y=this._limitCenter(m,this._zoom,ie(c));return m.equals(y)||this.panTo(y,h),this._enforcingBounds=!1,this},panInside:function(c,h){h=h||{};var m=E(h.paddingTopLeft||h.padding||[0,0]),y=E(h.paddingBottomRight||h.padding||[0,0]),k=this.project(this.getCenter()),D=this.project(c),W=this.getPixelBounds(),J=re([W.min.add(m),W.max.subtract(y)]),ne=J.getSize();if(!J.contains(D)){this._enforcingBounds=!0;var ce=D.subtract(J.getCenter()),ge=J.extend(D).getSize().subtract(ne);k.x+=ce.x<0?-ge.x:ge.x,k.y+=ce.y<0?-ge.y:ge.y,this.panTo(this.unproject(k),h),this._enforcingBounds=!1}return this},invalidateSize:function(c){if(!this._loaded)return this;c=s({animate:!1,pan:!0},c===!0?{animate:!0}:c);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var m=this.getSize(),y=h.divideBy(2).round(),k=m.divideBy(2).round(),D=y.subtract(k);return!D.x&&!D.y?this:(c.animate&&c.pan?this.panBy(D):(c.pan&&this._rawPanBy(D),this.fire("move"),c.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:m}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(c){if(c=this._locateOptions=s({timeout:1e4,watch:!1},c),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=o(this._handleGeolocationResponse,this),m=o(this._handleGeolocationError,this);return c.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,m,c):navigator.geolocation.getCurrentPosition(h,m,c),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(c){if(this._container._leaflet_id){var h=c.code,m=c.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+m+"."})}},_handleGeolocationResponse:function(c){if(this._container._leaflet_id){var h=c.coords.latitude,m=c.coords.longitude,y=new le(h,m),k=y.toBounds(c.coords.accuracy*2),D=this._locateOptions;if(D.setView){var W=this.getBoundsZoom(k);this.setView(y,D.maxZoom?Math.min(W,D.maxZoom):W)}var J={latlng:y,bounds:k,timestamp:c.timestamp};for(var ne in c.coords)typeof c.coords[ne]=="number"&&(J[ne]=c.coords[ne]);this.fire("locationfound",J)}},addHandler:function(c,h){if(!h)return this;var m=this[c]=new h(this);return this._handlers.push(m),this.options[c]&&m.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),dt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(te(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var c;for(c in this._layers)this._layers[c].remove();for(c in this._panes)dt(this._panes[c]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(c,h){var m="leaflet-pane"+(c?" leaflet-"+c.replace("Pane","")+"-pane":""),y=We("div",m,h||this._mapPane);return c&&(this._panes[c]=y),y},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var c=this.getPixelBounds(),h=this.unproject(c.getBottomLeft()),m=this.unproject(c.getTopRight());return new Q(h,m)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(c,h,m){c=ie(c),m=E(m||[0,0]);var y=this.getZoom()||0,k=this.getMinZoom(),D=this.getMaxZoom(),W=c.getNorthWest(),J=c.getSouthEast(),ne=this.getSize().subtract(m),ce=re(this.project(J,y),this.project(W,y)).getSize(),ge=_e.any3d?this.options.zoomSnap:1,je=ne.x/ce.x,Oe=ne.y/ce.y,ln=h?Math.max(je,Oe):Math.min(je,Oe);return y=this.getScaleZoom(ln,y),ge&&(y=Math.round(y/(ge/100))*(ge/100),y=h?Math.ceil(y/ge)*ge:Math.floor(y/ge)*ge),Math.max(k,Math.min(D,y))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new I(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(c,h){var m=this._getTopLeftPoint(c,h);return new K(m,m.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(c){return this.options.crs.getProjectedBounds(c===void 0?this.getZoom():c)},getPane:function(c){return typeof c=="string"?this._panes[c]:c},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(c,h){var m=this.options.crs;return h=h===void 0?this._zoom:h,m.scale(c)/m.scale(h)},getScaleZoom:function(c,h){var m=this.options.crs;h=h===void 0?this._zoom:h;var y=m.zoom(c*m.scale(h));return isNaN(y)?1/0:y},project:function(c,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(ae(c),h)},unproject:function(c,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(E(c),h)},layerPointToLatLng:function(c){var h=E(c).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(c){var h=this.project(ae(c))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(c){return this.options.crs.wrapLatLng(ae(c))},wrapLatLngBounds:function(c){return this.options.crs.wrapLatLngBounds(ie(c))},distance:function(c,h){return this.options.crs.distance(ae(c),ae(h))},containerPointToLayerPoint:function(c){return E(c).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(c){return E(c).add(this._getMapPanePos())},containerPointToLatLng:function(c){var h=this.containerPointToLayerPoint(E(c));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(c){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ae(c)))},mouseEventToContainerPoint:function(c){return Bv(c,this._container)},mouseEventToLayerPoint:function(c){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(c))},mouseEventToLatLng:function(c){return this.layerPointToLatLng(this.mouseEventToLayerPoint(c))},_initContainer:function(c){var h=this._container=Rv(c);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ke(h,"scroll",this._onScroll,this),this._containerId=d(h)},_initLayout:function(){var c=this._container;this._fadeAnimated=this.options.fadeAnimation&&_e.any3d,Ee(c,"leaflet-container"+(_e.touch?" leaflet-touch":"")+(_e.retina?" leaflet-retina":"")+(_e.ielt9?" leaflet-oldie":"")+(_e.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=Bo(c,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(c.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var c=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),kt(this._mapPane,new I(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ee(c.markerPane,"leaflet-zoom-hide"),Ee(c.shadowPane,"leaflet-zoom-hide"))},_resetView:function(c,h,m){kt(this._mapPane,new I(0,0));var y=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var k=this._zoom!==h;this._moveStart(k,m)._move(c,h)._moveEnd(k),this.fire("viewreset"),y&&this.fire("load")},_moveStart:function(c,h){return c&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(c,h,m,y){h===void 0&&(h=this._zoom);var k=this._zoom!==h;return this._zoom=h,this._lastCenter=c,this._pixelOrigin=this._getNewPixelOrigin(c),y?m&&m.pinch&&this.fire("zoom",m):((k||m&&m.pinch)&&this.fire("zoom",m),this.fire("move",m)),this},_moveEnd:function(c){return c&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return te(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(c){kt(this._mapPane,this._getMapPanePos().subtract(c))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(c){this._targets={},this._targets[d(this._container)]=this;var h=c?Xe:ke;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),_e.any3d&&this.options.transform3DLimit&&(c?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){te(this._resizeRequest),this._resizeRequest=H(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var c=this._getMapPanePos();Math.max(Math.abs(c.x),Math.abs(c.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(c,h){for(var m=[],y,k=h==="mouseout"||h==="mouseover",D=c.target||c.srcElement,W=!1;D;){if(y=this._targets[d(D)],y&&(h==="click"||h==="preclick")&&this._draggableMoved(y)){W=!0;break}if(y&&y.listens(h,!0)&&(k&&!Dp(D,c)||(m.push(y),k))||D===this._container)break;D=D.parentNode}return!m.length&&!W&&!k&&this.listens(h,!0)&&(m=[this]),m},_isClickDisabled:function(c){for(;c&&c!==this._container;){if(c._leaflet_disable_click)return!0;c=c.parentNode}},_handleDOMEvent:function(c){var h=c.target||c.srcElement;if(!(!this._loaded||h._leaflet_disable_events||c.type==="click"&&this._isClickDisabled(h))){var m=c.type;m==="mousedown"&&kp(h),this._fireDOMEvent(c,m)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(c,h,m){if(c.type==="click"){var y=s({},c);y.type="preclick",this._fireDOMEvent(y,y.type,m)}var k=this._findEventTargets(c,h);if(m){for(var D=[],W=0;W<m.length;W++)m[W].listens(h,!0)&&D.push(m[W]);k=D.concat(k)}if(k.length){h==="contextmenu"&&Ht(c);var J=k[0],ne={originalEvent:c};if(c.type!=="keypress"&&c.type!=="keydown"&&c.type!=="keyup"){var ce=J.getLatLng&&(!J._radius||J._radius<=10);ne.containerPoint=ce?this.latLngToContainerPoint(J.getLatLng()):this.mouseEventToContainerPoint(c),ne.layerPoint=this.containerPointToLayerPoint(ne.containerPoint),ne.latlng=ce?J.getLatLng():this.layerPointToLatLng(ne.layerPoint)}for(W=0;W<k.length;W++)if(k[W].fire(h,ne,!0),ne.originalEvent._stopped||k[W].options.bubblingMouseEvents===!1&&P(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(c){return c=c.dragging&&c.dragging.enabled()?c:this,c.dragging&&c.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var c=0,h=this._handlers.length;c<h;c++)this._handlers[c].disable()},whenReady:function(c,h){return this._loaded?c.call(h||this,{target:this}):this.on("load",c,h),this},_getMapPanePos:function(){return mi(this._mapPane)||new I(0,0)},_moved:function(){var c=this._getMapPanePos();return c&&!c.equals([0,0])},_getTopLeftPoint:function(c,h){var m=c&&h!==void 0?this._getNewPixelOrigin(c,h):this.getPixelOrigin();return m.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(c,h){var m=this.getSize()._divideBy(2);return this.project(c,h)._subtract(m)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(c,h,m){var y=this._getNewPixelOrigin(m,h);return this.project(c,h)._subtract(y)},_latLngBoundsToNewLayerBounds:function(c,h,m){var y=this._getNewPixelOrigin(m,h);return re([this.project(c.getSouthWest(),h)._subtract(y),this.project(c.getNorthWest(),h)._subtract(y),this.project(c.getSouthEast(),h)._subtract(y),this.project(c.getNorthEast(),h)._subtract(y)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(c){return this.latLngToLayerPoint(c).subtract(this._getCenterLayerPoint())},_limitCenter:function(c,h,m){if(!m)return c;var y=this.project(c,h),k=this.getSize().divideBy(2),D=new K(y.subtract(k),y.add(k)),W=this._getBoundsOffset(D,m,h);return Math.abs(W.x)<=1&&Math.abs(W.y)<=1?c:this.unproject(y.add(W),h)},_limitOffset:function(c,h){if(!h)return c;var m=this.getPixelBounds(),y=new K(m.min.add(c),m.max.add(c));return c.add(this._getBoundsOffset(y,h))},_getBoundsOffset:function(c,h,m){var y=re(this.project(h.getNorthEast(),m),this.project(h.getSouthWest(),m)),k=y.min.subtract(c.min),D=y.max.subtract(c.max),W=this._rebound(k.x,-D.x),J=this._rebound(k.y,-D.y);return new I(W,J)},_rebound:function(c,h){return c+h>0?Math.round(c-h)/2:Math.max(0,Math.ceil(c))-Math.max(0,Math.floor(h))},_limitZoom:function(c){var h=this.getMinZoom(),m=this.getMaxZoom(),y=_e.any3d?this.options.zoomSnap:1;return y&&(c=Math.round(c/y)*y),Math.max(h,Math.min(m,c))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){yt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(c,h){var m=this._getCenterOffset(c)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(m)?!1:(this.panBy(m,h),!0)},_createAnimProxy:function(){var c=this._proxy=We("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(c),this.on("zoomanim",function(h){var m=vp,y=this._proxy.style[m];fi(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),y===this._proxy.style[m]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){dt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var c=this.getCenter(),h=this.getZoom();fi(this._proxy,this.project(c,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(c){this._animatingZoom&&c.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(c,h,m){if(this._animatingZoom)return!0;if(m=m||{},!this._zoomAnimated||m.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var y=this.getZoomScale(h),k=this._getCenterOffset(c)._divideBy(1-1/y);return m.animate!==!0&&!this.getSize().contains(k)?!1:(H(function(){this._moveStart(!0,m.noMoveStart||!1)._animateZoom(c,h,!0)},this),!0)},_animateZoom:function(c,h,m,y){this._mapPane&&(m&&(this._animatingZoom=!0,this._animateToCenter=c,this._animateToZoom=h,Ee(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:c,zoom:h,noUpdate:y}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&yt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function CS(c,h){return new Fe(c,h)}var sr=B.extend({options:{position:"topright"},initialize:function(c){b(this,c)},getPosition:function(){return this.options.position},setPosition:function(c){var h=this._map;return h&&h.removeControl(this),this.options.position=c,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(c){this.remove(),this._map=c;var h=this._container=this.onAdd(c),m=this.getPosition(),y=c._controlCorners[m];return Ee(h,"leaflet-control"),m.indexOf("bottom")!==-1?y.insertBefore(h,y.firstChild):y.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(dt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(c){this._map&&c&&c.screenX>0&&c.screenY>0&&this._map.getContainer().focus()}}),Vo=function(c){return new sr(c)};Fe.include({addControl:function(c){return c.addTo(this),this},removeControl:function(c){return c.remove(),this},_initControlPos:function(){var c=this._controlCorners={},h="leaflet-",m=this._controlContainer=We("div",h+"control-container",this._container);function y(k,D){var W=h+k+" "+h+D;c[k+D]=We("div",W,m)}y("top","left"),y("top","right"),y("bottom","left"),y("bottom","right")},_clearControlPos:function(){for(var c in this._controlCorners)dt(this._controlCorners[c]);dt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Hv=sr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(c,h,m,y){return m<y?-1:y<m?1:0}},initialize:function(c,h,m){b(this,m),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var y in c)this._addLayer(c[y],y);for(y in h)this._addLayer(h[y],y,!0)},onAdd:function(c){this._initLayout(),this._update(),this._map=c,c.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(c){return sr.prototype.addTo.call(this,c),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(c,h){return this._addLayer(c,h),this._map?this._update():this},addOverlay:function(c,h){return this._addLayer(c,h,!0),this._map?this._update():this},removeLayer:function(c){c.off("add remove",this._onLayerChange,this);var h=this._getLayer(d(c));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){Ee(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var c=this._map.getSize().y-(this._container.offsetTop+50);return c<this._section.clientHeight?(Ee(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=c+"px"):yt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return yt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var c="leaflet-control-layers",h=this._container=We("div",c),m=this.options.collapsed;h.setAttribute("aria-haspopup",!0),Yo(h),Pp(h);var y=this._section=We("section",c+"-list");m&&(this._map.on("click",this.collapse,this),ke(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var k=this._layersLink=We("a",c+"-toggle",h);k.href="#",k.title="Layers",k.setAttribute("role","button"),ke(k,{keydown:function(D){D.keyCode===13&&this._expandSafely()},click:function(D){Ht(D),this._expandSafely()}},this),m||this.expand(),this._baseLayersList=We("div",c+"-base",y),this._separator=We("div",c+"-separator",y),this._overlaysList=We("div",c+"-overlays",y),h.appendChild(y)},_getLayer:function(c){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&d(this._layers[h].layer)===c)return this._layers[h]},_addLayer:function(c,h,m){this._map&&c.on("add remove",this._onLayerChange,this),this._layers.push({layer:c,name:h,overlay:m}),this.options.sortLayers&&this._layers.sort(o(function(y,k){return this.options.sortFunction(y.layer,k.layer,y.name,k.name)},this)),this.options.autoZIndex&&c.setZIndex&&(this._lastZIndex++,c.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Kc(this._baseLayersList),Kc(this._overlaysList),this._layerControlInputs=[];var c,h,m,y,k=0;for(m=0;m<this._layers.length;m++)y=this._layers[m],this._addItem(y),h=h||y.overlay,c=c||!y.overlay,k+=y.overlay?0:1;return this.options.hideSingleBase&&(c=c&&k>1,this._baseLayersList.style.display=c?"":"none"),this._separator.style.display=h&&c?"":"none",this},_onLayerChange:function(c){this._handlingClick||this._update();var h=this._getLayer(d(c.target)),m=h.overlay?c.type==="add"?"overlayadd":"overlayremove":c.type==="add"?"baselayerchange":null;m&&this._map.fire(m,h)},_createRadioElement:function(c,h){var m='<input type="radio" class="leaflet-control-layers-selector" name="'+c+'"'+(h?' checked="checked"':"")+"/>",y=document.createElement("div");return y.innerHTML=m,y.firstChild},_addItem:function(c){var h=document.createElement("label"),m=this._map.hasLayer(c.layer),y;c.overlay?(y=document.createElement("input"),y.type="checkbox",y.className="leaflet-control-layers-selector",y.defaultChecked=m):y=this._createRadioElement("leaflet-base-layers_"+d(this),m),this._layerControlInputs.push(y),y.layerId=d(c.layer),ke(y,"click",this._onInputClick,this);var k=document.createElement("span");k.innerHTML=" "+c.name;var D=document.createElement("span");h.appendChild(D),D.appendChild(y),D.appendChild(k);var W=c.overlay?this._overlaysList:this._baseLayersList;return W.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var c=this._layerControlInputs,h,m,y=[],k=[];this._handlingClick=!0;for(var D=c.length-1;D>=0;D--)h=c[D],m=this._getLayer(h.layerId).layer,h.checked?y.push(m):h.checked||k.push(m);for(D=0;D<k.length;D++)this._map.hasLayer(k[D])&&this._map.removeLayer(k[D]);for(D=0;D<y.length;D++)this._map.hasLayer(y[D])||this._map.addLayer(y[D]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var c=this._layerControlInputs,h,m,y=this._map.getZoom(),k=c.length-1;k>=0;k--)h=c[k],m=this._getLayer(h.layerId).layer,h.disabled=m.options.minZoom!==void 0&&y<m.options.minZoom||m.options.maxZoom!==void 0&&y>m.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var c=this._section;this._preventClick=!0,ke(c,"click",Ht),this.expand();var h=this;setTimeout(function(){Xe(c,"click",Ht),h._preventClick=!1})}}),ES=function(c,h,m){return new Hv(c,h,m)},Op=sr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(c){var h="leaflet-control-zoom",m=We("div",h+" leaflet-bar"),y=this.options;return this._zoomInButton=this._createButton(y.zoomInText,y.zoomInTitle,h+"-in",m,this._zoomIn),this._zoomOutButton=this._createButton(y.zoomOutText,y.zoomOutTitle,h+"-out",m,this._zoomOut),this._updateDisabled(),c.on("zoomend zoomlevelschange",this._updateDisabled,this),m},onRemove:function(c){c.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(c){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(c.shiftKey?3:1))},_zoomOut:function(c){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(c.shiftKey?3:1))},_createButton:function(c,h,m,y,k){var D=We("a",m,y);return D.innerHTML=c,D.href="#",D.title=h,D.setAttribute("role","button"),D.setAttribute("aria-label",h),Yo(D),ke(D,"click",xi),ke(D,"click",k,this),ke(D,"click",this._refocusOnMap,this),D},_updateDisabled:function(){var c=this._map,h="leaflet-disabled";yt(this._zoomInButton,h),yt(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||c._zoom===c.getMinZoom())&&(Ee(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||c._zoom===c.getMaxZoom())&&(Ee(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});Fe.mergeOptions({zoomControl:!0}),Fe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Op,this.addControl(this.zoomControl))});var TS=function(c){return new Op(c)},Yv=sr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(c){var h="leaflet-control-scale",m=We("div",h),y=this.options;return this._addScales(y,h+"-line",m),c.on(y.updateWhenIdle?"moveend":"move",this._update,this),c.whenReady(this._update,this),m},onRemove:function(c){c.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(c,h,m){c.metric&&(this._mScale=We("div",h,m)),c.imperial&&(this._iScale=We("div",h,m))},_update:function(){var c=this._map,h=c.getSize().y/2,m=c.distance(c.containerPointToLatLng([0,h]),c.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(m)},_updateScales:function(c){this.options.metric&&c&&this._updateMetric(c),this.options.imperial&&c&&this._updateImperial(c)},_updateMetric:function(c){var h=this._getRoundNum(c),m=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,m,h/c)},_updateImperial:function(c){var h=c*3.2808399,m,y,k;h>5280?(m=h/5280,y=this._getRoundNum(m),this._updateScale(this._iScale,y+" mi",y/m)):(k=this._getRoundNum(h),this._updateScale(this._iScale,k+" ft",k/h))},_updateScale:function(c,h,m){c.style.width=Math.round(this.options.maxWidth*m)+"px",c.innerHTML=h},_getRoundNum:function(c){var h=Math.pow(10,(Math.floor(c)+"").length-1),m=c/h;return m=m>=10?10:m>=5?5:m>=3?3:m>=2?2:1,h*m}}),PS=function(c){return new Yv(c)},DS='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Mp=sr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(_e.inlineSvg?DS+" ":"")+"Leaflet</a>"},initialize:function(c){b(this,c),this._attributions={}},onAdd:function(c){c.attributionControl=this,this._container=We("div","leaflet-control-attribution"),Yo(this._container);for(var h in c._layers)c._layers[h].getAttribution&&this.addAttribution(c._layers[h].getAttribution());return this._update(),c.on("layeradd",this._addAttribution,this),this._container},onRemove:function(c){c.off("layeradd",this._addAttribution,this)},_addAttribution:function(c){c.layer.getAttribution&&(this.addAttribution(c.layer.getAttribution()),c.layer.once("remove",function(){this.removeAttribution(c.layer.getAttribution())},this))},setPrefix:function(c){return this.options.prefix=c,this._update(),this},addAttribution:function(c){return c?(this._attributions[c]||(this._attributions[c]=0),this._attributions[c]++,this._update(),this):this},removeAttribution:function(c){return c?(this._attributions[c]&&(this._attributions[c]--,this._update()),this):this},_update:function(){if(this._map){var c=[];for(var h in this._attributions)this._attributions[h]&&c.push(h);var m=[];this.options.prefix&&m.push(this.options.prefix),c.length&&m.push(c.join(", ")),this._container.innerHTML=m.join(' <span aria-hidden="true">|</span> ')}}});Fe.mergeOptions({attributionControl:!0}),Fe.addInitHook(function(){this.options.attributionControl&&new Mp().addTo(this)});var OS=function(c){return new Mp(c)};sr.Layers=Hv,sr.Zoom=Op,sr.Scale=Yv,sr.Attribution=Mp,Vo.layers=ES,Vo.zoom=TS,Vo.scale=PS,Vo.attribution=OS;var yr=B.extend({initialize:function(c){this._map=c},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});yr.addTo=function(c,h){return c.addHandler(h,this),this};var MS={Events:C},Vv=_e.touch?"touchstart mousedown":"mousedown",ys=V.extend({options:{clickTolerance:3},initialize:function(c,h,m,y){b(this,y),this._element=c,this._dragStartTarget=h||c,this._preventOutline=m},enable:function(){this._enabled||(ke(this._dragStartTarget,Vv,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ys._dragging===this&&this.finishDrag(!0),Xe(this._dragStartTarget,Vv,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(c){if(this._enabled&&(this._moved=!1,!yp(this._element,"leaflet-zoom-anim"))){if(c.touches&&c.touches.length!==1){ys._dragging===this&&this.finishDrag();return}if(!(ys._dragging||c.shiftKey||c.which!==1&&c.button!==1&&!c.touches)&&(ys._dragging=this,this._preventOutline&&kp(this._element),wp(),Uo(),!this._moving)){this.fire("down");var h=c.touches?c.touches[0]:c,m=Fv(this._element);this._startPoint=new I(h.clientX,h.clientY),this._startPos=mi(this._element),this._parentScale=Sp(m);var y=c.type==="mousedown";ke(document,y?"mousemove":"touchmove",this._onMove,this),ke(document,y?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(c){if(this._enabled){if(c.touches&&c.touches.length>1){this._moved=!0;return}var h=c.touches&&c.touches.length===1?c.touches[0]:c,m=new I(h.clientX,h.clientY)._subtract(this._startPoint);!m.x&&!m.y||Math.abs(m.x)+Math.abs(m.y)<this.options.clickTolerance||(m.x/=this._parentScale.x,m.y/=this._parentScale.y,Ht(c),this._moved||(this.fire("dragstart"),this._moved=!0,Ee(document.body,"leaflet-dragging"),this._lastTarget=c.target||c.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ee(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(m),this._moving=!0,this._lastEvent=c,this._updatePosition())}},_updatePosition:function(){var c={originalEvent:this._lastEvent};this.fire("predrag",c),kt(this._element,this._newPos),this.fire("drag",c)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(c){yt(document.body,"leaflet-dragging"),this._lastTarget&&(yt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Xe(document,"mousemove touchmove",this._onMove,this),Xe(document,"mouseup touchend touchcancel",this._onUp,this),jp(),Wo();var h=this._moved&&this._moving;this._moving=!1,ys._dragging=!1,h&&this.fire("dragend",{noInertia:c,distance:this._newPos.distanceTo(this._startPos)})}});function qv(c,h,m){var y,k=[1,4,2,8],D,W,J,ne,ce,ge,je,Oe;for(D=0,ge=c.length;D<ge;D++)c[D]._code=vi(c[D],h);for(J=0;J<4;J++){for(je=k[J],y=[],D=0,ge=c.length,W=ge-1;D<ge;W=D++)ne=c[D],ce=c[W],ne._code&je?ce._code&je||(Oe=ed(ce,ne,je,h,m),Oe._code=vi(Oe,h),y.push(Oe)):(ce._code&je&&(Oe=ed(ce,ne,je,h,m),Oe._code=vi(Oe,h),y.push(Oe)),y.push(ne));c=y}return c}function Zv(c,h){var m,y,k,D,W,J,ne,ce,ge;if(!c||c.length===0)throw new Error("latlngs not passed");zn(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var je=ae([0,0]),Oe=ie(c),ln=Oe.getNorthWest().distanceTo(Oe.getSouthWest())*Oe.getNorthEast().distanceTo(Oe.getNorthWest());ln<1700&&(je=Lp(c));var Ot=c.length,Bn=[];for(m=0;m<Ot;m++){var mn=ae(c[m]);Bn.push(h.project(ae([mn.lat-je.lat,mn.lng-je.lng])))}for(J=ne=ce=0,m=0,y=Ot-1;m<Ot;y=m++)k=Bn[m],D=Bn[y],W=k.y*D.x-D.y*k.x,ne+=(k.x+D.x)*W,ce+=(k.y+D.y)*W,J+=W*3;J===0?ge=Bn[0]:ge=[ne/J,ce/J];var ja=h.unproject(E(ge));return ae([ja.lat+je.lat,ja.lng+je.lng])}function Lp(c){for(var h=0,m=0,y=0,k=0;k<c.length;k++){var D=ae(c[k]);h+=D.lat,m+=D.lng,y++}return ae([h/y,m/y])}var LS={__proto__:null,clipPolygon:qv,polygonCenter:Zv,centroid:Lp};function Kv(c,h){if(!h||!c.length)return c.slice();var m=h*h;return c=RS(c,m),c=IS(c,m),c}function Gv(c,h,m){return Math.sqrt(qo(c,h,m,!0))}function AS(c,h,m){return qo(c,h,m)}function IS(c,h){var m=c.length,y=typeof Uint8Array<"u"?Uint8Array:Array,k=new y(m);k[0]=k[m-1]=1,Ap(c,k,h,0,m-1);var D,W=[];for(D=0;D<m;D++)k[D]&&W.push(c[D]);return W}function Ap(c,h,m,y,k){var D=0,W,J,ne;for(J=y+1;J<=k-1;J++)ne=qo(c[J],c[y],c[k],!0),ne>D&&(W=J,D=ne);D>m&&(h[W]=1,Ap(c,h,m,y,W),Ap(c,h,m,W,k))}function RS(c,h){for(var m=[c[0]],y=1,k=0,D=c.length;y<D;y++)FS(c[y],c[k])>h&&(m.push(c[y]),k=y);return k<D-1&&m.push(c[D-1]),m}var Qv;function Xv(c,h,m,y,k){var D=y?Qv:vi(c,m),W=vi(h,m),J,ne,ce;for(Qv=W;;){if(!(D|W))return[c,h];if(D&W)return!1;J=D||W,ne=ed(c,h,J,m,k),ce=vi(ne,m),J===D?(c=ne,D=ce):(h=ne,W=ce)}}function ed(c,h,m,y,k){var D=h.x-c.x,W=h.y-c.y,J=y.min,ne=y.max,ce,ge;return m&8?(ce=c.x+D*(ne.y-c.y)/W,ge=ne.y):m&4?(ce=c.x+D*(J.y-c.y)/W,ge=J.y):m&2?(ce=ne.x,ge=c.y+W*(ne.x-c.x)/D):m&1&&(ce=J.x,ge=c.y+W*(J.x-c.x)/D),new I(ce,ge,k)}function vi(c,h){var m=0;return c.x<h.min.x?m|=1:c.x>h.max.x&&(m|=2),c.y<h.min.y?m|=4:c.y>h.max.y&&(m|=8),m}function FS(c,h){var m=h.x-c.x,y=h.y-c.y;return m*m+y*y}function qo(c,h,m,y){var k=h.x,D=h.y,W=m.x-k,J=m.y-D,ne=W*W+J*J,ce;return ne>0&&(ce=((c.x-k)*W+(c.y-D)*J)/ne,ce>1?(k=m.x,D=m.y):ce>0&&(k+=W*ce,D+=J*ce)),W=c.x-k,J=c.y-D,y?W*W+J*J:new I(k,D)}function zn(c){return!S(c[0])||typeof c[0][0]!="object"&&typeof c[0][0]<"u"}function Jv(c){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),zn(c)}function e0(c,h){var m,y,k,D,W,J,ne,ce;if(!c||c.length===0)throw new Error("latlngs not passed");zn(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var ge=ae([0,0]),je=ie(c),Oe=je.getNorthWest().distanceTo(je.getSouthWest())*je.getNorthEast().distanceTo(je.getNorthWest());Oe<1700&&(ge=Lp(c));var ln=c.length,Ot=[];for(m=0;m<ln;m++){var Bn=ae(c[m]);Ot.push(h.project(ae([Bn.lat-ge.lat,Bn.lng-ge.lng])))}for(m=0,y=0;m<ln-1;m++)y+=Ot[m].distanceTo(Ot[m+1])/2;if(y===0)ce=Ot[0];else for(m=0,D=0;m<ln-1;m++)if(W=Ot[m],J=Ot[m+1],k=W.distanceTo(J),D+=k,D>y){ne=(D-y)/k,ce=[J.x-ne*(J.x-W.x),J.y-ne*(J.y-W.y)];break}var mn=h.unproject(E(ce));return ae([mn.lat+ge.lat,mn.lng+ge.lng])}var $S={__proto__:null,simplify:Kv,pointToSegmentDistance:Gv,closestPointOnSegment:AS,clipSegment:Xv,_getEdgeIntersection:ed,_getBitCode:vi,_sqClosestPointOnSegment:qo,isFlat:zn,_flat:Jv,polylineCenter:e0},Ip={project:function(c){return new I(c.lng,c.lat)},unproject:function(c){return new le(c.y,c.x)},bounds:new K([-180,-90],[180,90])},Rp={R:6378137,R_MINOR:6356752314245179e-9,bounds:new K([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(c){var h=Math.PI/180,m=this.R,y=c.lat*h,k=this.R_MINOR/m,D=Math.sqrt(1-k*k),W=D*Math.sin(y),J=Math.tan(Math.PI/4-y/2)/Math.pow((1-W)/(1+W),D/2);return y=-m*Math.log(Math.max(J,1e-10)),new I(c.lng*h*m,y)},unproject:function(c){for(var h=180/Math.PI,m=this.R,y=this.R_MINOR/m,k=Math.sqrt(1-y*y),D=Math.exp(-c.y/m),W=Math.PI/2-2*Math.atan(D),J=0,ne=.1,ce;J<15&&Math.abs(ne)>1e-7;J++)ce=k*Math.sin(W),ce=Math.pow((1-ce)/(1+ce),k/2),ne=Math.PI/2-2*Math.atan(D*ce)-W,W+=ne;return new le(W*h,c.x*h/m)}},zS={__proto__:null,LonLat:Ip,Mercator:Rp,SphericalMercator:oe},BS=s({},ue,{code:"EPSG:3395",projection:Rp,transformation:function(){var c=.5/(Math.PI*Rp.R);return Ne(c,.5,-c,.5)}()}),t0=s({},ue,{code:"EPSG:4326",projection:Ip,transformation:Ne(1/180,1,-1/180,.5)}),US=s({},se,{projection:Ip,transformation:Ne(1,0,-1,0),scale:function(c){return Math.pow(2,c)},zoom:function(c){return Math.log(c)/Math.LN2},distance:function(c,h){var m=h.lng-c.lng,y=h.lat-c.lat;return Math.sqrt(m*m+y*y)},infinite:!0});se.Earth=ue,se.EPSG3395=BS,se.EPSG3857=Ce,se.EPSG900913=ct,se.EPSG4326=t0,se.Simple=US;var ir=V.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(c){return c.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(c){return c&&c.removeLayer(this),this},getPane:function(c){return this._map.getPane(c?this.options[c]||c:this.options.pane)},addInteractiveTarget:function(c){return this._map._targets[d(c)]=this,this},removeInteractiveTarget:function(c){return delete this._map._targets[d(c)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(c){var h=c.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var m=this.getEvents();h.on(m,this),this.once("remove",function(){h.off(m,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});Fe.include({addLayer:function(c){if(!c._layerAdd)throw new Error("The provided object is not a Layer.");var h=d(c);return this._layers[h]?this:(this._layers[h]=c,c._mapToAdd=this,c.beforeAdd&&c.beforeAdd(this),this.whenReady(c._layerAdd,c),this)},removeLayer:function(c){var h=d(c);return this._layers[h]?(this._loaded&&c.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:c}),c.fire("remove")),c._map=c._mapToAdd=null,this):this},hasLayer:function(c){return d(c)in this._layers},eachLayer:function(c,h){for(var m in this._layers)c.call(h,this._layers[m]);return this},_addLayers:function(c){c=c?S(c)?c:[c]:[];for(var h=0,m=c.length;h<m;h++)this.addLayer(c[h])},_addZoomLimit:function(c){(!isNaN(c.options.maxZoom)||!isNaN(c.options.minZoom))&&(this._zoomBoundLayers[d(c)]=c,this._updateZoomLevels())},_removeZoomLimit:function(c){var h=d(c);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var c=1/0,h=-1/0,m=this._getZoomSpan();for(var y in this._zoomBoundLayers){var k=this._zoomBoundLayers[y].options;c=k.minZoom===void 0?c:Math.min(c,k.minZoom),h=k.maxZoom===void 0?h:Math.max(h,k.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=c===1/0?void 0:c,m!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var va=ir.extend({initialize:function(c,h){b(this,h),this._layers={};var m,y;if(c)for(m=0,y=c.length;m<y;m++)this.addLayer(c[m])},addLayer:function(c){var h=this.getLayerId(c);return this._layers[h]=c,this._map&&this._map.addLayer(c),this},removeLayer:function(c){var h=c in this._layers?c:this.getLayerId(c);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(c){var h=typeof c=="number"?c:this.getLayerId(c);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(c){var h=Array.prototype.slice.call(arguments,1),m,y;for(m in this._layers)y=this._layers[m],y[c]&&y[c].apply(y,h);return this},onAdd:function(c){this.eachLayer(c.addLayer,c)},onRemove:function(c){this.eachLayer(c.removeLayer,c)},eachLayer:function(c,h){for(var m in this._layers)c.call(h,this._layers[m]);return this},getLayer:function(c){return this._layers[c]},getLayers:function(){var c=[];return this.eachLayer(c.push,c),c},setZIndex:function(c){return this.invoke("setZIndex",c)},getLayerId:function(c){return d(c)}}),WS=function(c,h){return new va(c,h)},Vr=va.extend({addLayer:function(c){return this.hasLayer(c)?this:(c.addEventParent(this),va.prototype.addLayer.call(this,c),this.fire("layeradd",{layer:c}))},removeLayer:function(c){return this.hasLayer(c)?(c in this._layers&&(c=this._layers[c]),c.removeEventParent(this),va.prototype.removeLayer.call(this,c),this.fire("layerremove",{layer:c})):this},setStyle:function(c){return this.invoke("setStyle",c)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var c=new Q;for(var h in this._layers){var m=this._layers[h];c.extend(m.getBounds?m.getBounds():m.getLatLng())}return c}}),HS=function(c,h){return new Vr(c,h)},ya=B.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(c){b(this,c)},createIcon:function(c){return this._createIcon("icon",c)},createShadow:function(c){return this._createIcon("shadow",c)},_createIcon:function(c,h){var m=this._getIconUrl(c);if(!m){if(c==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var y=this._createImg(m,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(y,c),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),y},_setIconStyles:function(c,h){var m=this.options,y=m[h+"Size"];typeof y=="number"&&(y=[y,y]);var k=E(y),D=E(h==="shadow"&&m.shadowAnchor||m.iconAnchor||k&&k.divideBy(2,!0));c.className="leaflet-marker-"+h+" "+(m.className||""),D&&(c.style.marginLeft=-D.x+"px",c.style.marginTop=-D.y+"px"),k&&(c.style.width=k.x+"px",c.style.height=k.y+"px")},_createImg:function(c,h){return h=h||document.createElement("img"),h.src=c,h},_getIconUrl:function(c){return _e.retina&&this.options[c+"RetinaUrl"]||this.options[c+"Url"]}});function YS(c){return new ya(c)}var Zo=ya.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(c){return typeof Zo.imagePath!="string"&&(Zo.imagePath=this._detectIconPath()),(this.options.imagePath||Zo.imagePath)+ya.prototype._getIconUrl.call(this,c)},_stripUrl:function(c){var h=function(m,y,k){var D=y.exec(m);return D&&D[k]};return c=h(c,/^url\((['"])?(.+)\1\)$/,2),c&&h(c,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var c=We("div","leaflet-default-icon-path",document.body),h=Bo(c,"background-image")||Bo(c,"backgroundImage");if(document.body.removeChild(c),h=this._stripUrl(h),h)return h;var m=document.querySelector('link[href$="leaflet.css"]');return m?m.href.substring(0,m.href.length-11-1):""}}),n0=yr.extend({initialize:function(c){this._marker=c},addHooks:function(){var c=this._marker._icon;this._draggable||(this._draggable=new ys(c,c,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ee(c,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&yt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(c){var h=this._marker,m=h._map,y=this._marker.options.autoPanSpeed,k=this._marker.options.autoPanPadding,D=mi(h._icon),W=m.getPixelBounds(),J=m.getPixelOrigin(),ne=re(W.min._subtract(J).add(k),W.max._subtract(J).subtract(k));if(!ne.contains(D)){var ce=E((Math.max(ne.max.x,D.x)-ne.max.x)/(W.max.x-ne.max.x)-(Math.min(ne.min.x,D.x)-ne.min.x)/(W.min.x-ne.min.x),(Math.max(ne.max.y,D.y)-ne.max.y)/(W.max.y-ne.max.y)-(Math.min(ne.min.y,D.y)-ne.min.y)/(W.min.y-ne.min.y)).multiplyBy(y);m.panBy(ce,{animate:!1}),this._draggable._newPos._add(ce),this._draggable._startPos._add(ce),kt(h._icon,this._draggable._newPos),this._onDrag(c),this._panRequest=H(this._adjustPan.bind(this,c))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(c){this._marker.options.autoPan&&(te(this._panRequest),this._panRequest=H(this._adjustPan.bind(this,c)))},_onDrag:function(c){var h=this._marker,m=h._shadow,y=mi(h._icon),k=h._map.layerPointToLatLng(y);m&&kt(m,y),h._latlng=k,c.latlng=k,c.oldLatLng=this._oldLatLng,h.fire("move",c).fire("drag",c)},_onDragEnd:function(c){te(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",c)}}),td=ir.extend({options:{icon:new Zo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(c,h){b(this,h),this._latlng=ae(c)},onAdd:function(c){this._zoomAnimated=this._zoomAnimated&&c.options.markerZoomAnimation,this._zoomAnimated&&c.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(c){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&c.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(c){var h=this._latlng;return this._latlng=ae(c),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(c){return this.options.zIndexOffset=c,this.update()},getIcon:function(){return this.options.icon},setIcon:function(c){return this.options.icon=c,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var c=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(c)}return this},_initIcon:function(){var c=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),m=c.icon.createIcon(this._icon),y=!1;m!==this._icon&&(this._icon&&this._removeIcon(),y=!0,c.title&&(m.title=c.title),m.tagName==="IMG"&&(m.alt=c.alt||"")),Ee(m,h),c.keyboard&&(m.tabIndex="0",m.setAttribute("role","button")),this._icon=m,c.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ke(m,"focus",this._panOnFocus,this);var k=c.icon.createShadow(this._shadow),D=!1;k!==this._shadow&&(this._removeShadow(),D=!0),k&&(Ee(k,h),k.alt=""),this._shadow=k,c.opacity<1&&this._updateOpacity(),y&&this.getPane().appendChild(this._icon),this._initInteraction(),k&&D&&this.getPane(c.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Xe(this._icon,"focus",this._panOnFocus,this),dt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&dt(this._shadow),this._shadow=null},_setPos:function(c){this._icon&&kt(this._icon,c),this._shadow&&kt(this._shadow,c),this._zIndex=c.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(c){this._icon&&(this._icon.style.zIndex=this._zIndex+c)},_animateZoom:function(c){var h=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(Ee(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),n0)){var c=this.options.draggable;this.dragging&&(c=this.dragging.enabled(),this.dragging.disable()),this.dragging=new n0(this),c&&this.dragging.enable()}},setOpacity:function(c){return this.options.opacity=c,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var c=this.options.opacity;this._icon&&$n(this._icon,c),this._shadow&&$n(this._shadow,c)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var c=this._map;if(c){var h=this.options.icon.options,m=h.iconSize?E(h.iconSize):E(0,0),y=h.iconAnchor?E(h.iconAnchor):E(0,0);c.panInside(this._latlng,{paddingTopLeft:y,paddingBottomRight:m.subtract(y)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function VS(c,h){return new td(c,h)}var bs=ir.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(c){this._renderer=c.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(c){return b(this,c),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&c&&Object.prototype.hasOwnProperty.call(c,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),nd=bs.extend({options:{fill:!0,radius:10},initialize:function(c,h){b(this,h),this._latlng=ae(c),this._radius=this.options.radius},setLatLng:function(c){var h=this._latlng;return this._latlng=ae(c),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(c){return this.options.radius=this._radius=c,this.redraw()},getRadius:function(){return this._radius},setStyle:function(c){var h=c&&c.radius||this._radius;return bs.prototype.setStyle.call(this,c),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var c=this._radius,h=this._radiusY||c,m=this._clickTolerance(),y=[c+m,h+m];this._pxBounds=new K(this._point.subtract(y),this._point.add(y))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(c){return c.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function qS(c,h){return new nd(c,h)}var Fp=nd.extend({initialize:function(c,h,m){if(typeof h=="number"&&(h=s({},m,{radius:h})),b(this,h),this._latlng=ae(c),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(c){return this._mRadius=c,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var c=[this._radius,this._radiusY||this._radius];return new Q(this._map.layerPointToLatLng(this._point.subtract(c)),this._map.layerPointToLatLng(this._point.add(c)))},setStyle:bs.prototype.setStyle,_project:function(){var c=this._latlng.lng,h=this._latlng.lat,m=this._map,y=m.options.crs;if(y.distance===ue.distance){var k=Math.PI/180,D=this._mRadius/ue.R/k,W=m.project([h+D,c]),J=m.project([h-D,c]),ne=W.add(J).divideBy(2),ce=m.unproject(ne).lat,ge=Math.acos((Math.cos(D*k)-Math.sin(h*k)*Math.sin(ce*k))/(Math.cos(h*k)*Math.cos(ce*k)))/k;(isNaN(ge)||ge===0)&&(ge=D/Math.cos(Math.PI/180*h)),this._point=ne.subtract(m.getPixelOrigin()),this._radius=isNaN(ge)?0:ne.x-m.project([ce,c-ge]).x,this._radiusY=ne.y-W.y}else{var je=y.unproject(y.project(this._latlng).subtract([this._mRadius,0]));this._point=m.latLngToLayerPoint(this._latlng),this._radius=this._point.x-m.latLngToLayerPoint(je).x}this._updateBounds()}});function ZS(c,h,m){return new Fp(c,h,m)}var qr=bs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(c,h){b(this,h),this._setLatLngs(c)},getLatLngs:function(){return this._latlngs},setLatLngs:function(c){return this._setLatLngs(c),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(c){for(var h=1/0,m=null,y=qo,k,D,W=0,J=this._parts.length;W<J;W++)for(var ne=this._parts[W],ce=1,ge=ne.length;ce<ge;ce++){k=ne[ce-1],D=ne[ce];var je=y(c,k,D,!0);je<h&&(h=je,m=y(c,k,D))}return m&&(m.distance=Math.sqrt(h)),m},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return e0(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(c,h){return h=h||this._defaultShape(),c=ae(c),h.push(c),this._bounds.extend(c),this.redraw()},_setLatLngs:function(c){this._bounds=new Q,this._latlngs=this._convertLatLngs(c)},_defaultShape:function(){return zn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(c){for(var h=[],m=zn(c),y=0,k=c.length;y<k;y++)m?(h[y]=ae(c[y]),this._bounds.extend(h[y])):h[y]=this._convertLatLngs(c[y]);return h},_project:function(){var c=new K;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,c),this._bounds.isValid()&&c.isValid()&&(this._rawPxBounds=c,this._updateBounds())},_updateBounds:function(){var c=this._clickTolerance(),h=new I(c,c);this._rawPxBounds&&(this._pxBounds=new K([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(c,h,m){var y=c[0]instanceof le,k=c.length,D,W;if(y){for(W=[],D=0;D<k;D++)W[D]=this._map.latLngToLayerPoint(c[D]),m.extend(W[D]);h.push(W)}else for(D=0;D<k;D++)this._projectLatlngs(c[D],h,m)},_clipPoints:function(){var c=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,m,y,k,D,W,J,ne;for(m=0,k=0,D=this._rings.length;m<D;m++)for(ne=this._rings[m],y=0,W=ne.length;y<W-1;y++)J=Xv(ne[y],ne[y+1],c,y,!0),J&&(h[k]=h[k]||[],h[k].push(J[0]),(J[1]!==ne[y+1]||y===W-2)&&(h[k].push(J[1]),k++))}},_simplifyPoints:function(){for(var c=this._parts,h=this.options.smoothFactor,m=0,y=c.length;m<y;m++)c[m]=Kv(c[m],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(c,h){var m,y,k,D,W,J,ne=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(m=0,D=this._parts.length;m<D;m++)for(J=this._parts[m],y=0,W=J.length,k=W-1;y<W;k=y++)if(!(!h&&y===0)&&Gv(c,J[k],J[y])<=ne)return!0;return!1}});function KS(c,h){return new qr(c,h)}qr._flat=Jv;var ba=qr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Zv(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(c){var h=qr.prototype._convertLatLngs.call(this,c),m=h.length;return m>=2&&h[0]instanceof le&&h[0].equals(h[m-1])&&h.pop(),h},_setLatLngs:function(c){qr.prototype._setLatLngs.call(this,c),zn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return zn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var c=this._renderer._bounds,h=this.options.weight,m=new I(h,h);if(c=new K(c.min.subtract(m),c.max.add(m)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}for(var y=0,k=this._rings.length,D;y<k;y++)D=qv(this._rings[y],c,!0),D.length&&this._parts.push(D)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(c){var h=!1,m,y,k,D,W,J,ne,ce;if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(D=0,ne=this._parts.length;D<ne;D++)for(m=this._parts[D],W=0,ce=m.length,J=ce-1;W<ce;J=W++)y=m[W],k=m[J],y.y>c.y!=k.y>c.y&&c.x<(k.x-y.x)*(c.y-y.y)/(k.y-y.y)+y.x&&(h=!h);return h||qr.prototype._containsPoint.call(this,c,!0)}});function GS(c,h){return new ba(c,h)}var Zr=Vr.extend({initialize:function(c,h){b(this,h),this._layers={},c&&this.addData(c)},addData:function(c){var h=S(c)?c:c.features,m,y,k;if(h){for(m=0,y=h.length;m<y;m++)k=h[m],(k.geometries||k.geometry||k.features||k.coordinates)&&this.addData(k);return this}var D=this.options;if(D.filter&&!D.filter(c))return this;var W=rd(c,D);return W?(W.feature=ad(c),W.defaultOptions=W.options,this.resetStyle(W),D.onEachFeature&&D.onEachFeature(c,W),this.addLayer(W)):this},resetStyle:function(c){return c===void 0?this.eachLayer(this.resetStyle,this):(c.options=s({},c.defaultOptions),this._setLayerStyle(c,this.options.style),this)},setStyle:function(c){return this.eachLayer(function(h){this._setLayerStyle(h,c)},this)},_setLayerStyle:function(c,h){c.setStyle&&(typeof h=="function"&&(h=h(c.feature)),c.setStyle(h))}});function rd(c,h){var m=c.type==="Feature"?c.geometry:c,y=m?m.coordinates:null,k=[],D=h&&h.pointToLayer,W=h&&h.coordsToLatLng||$p,J,ne,ce,ge;if(!y&&!m)return null;switch(m.type){case"Point":return J=W(y),r0(D,c,J,h);case"MultiPoint":for(ce=0,ge=y.length;ce<ge;ce++)J=W(y[ce]),k.push(r0(D,c,J,h));return new Vr(k);case"LineString":case"MultiLineString":return ne=sd(y,m.type==="LineString"?0:1,W),new qr(ne,h);case"Polygon":case"MultiPolygon":return ne=sd(y,m.type==="Polygon"?1:2,W),new ba(ne,h);case"GeometryCollection":for(ce=0,ge=m.geometries.length;ce<ge;ce++){var je=rd({geometry:m.geometries[ce],type:"Feature",properties:c.properties},h);je&&k.push(je)}return new Vr(k);case"FeatureCollection":for(ce=0,ge=m.features.length;ce<ge;ce++){var Oe=rd(m.features[ce],h);Oe&&k.push(Oe)}return new Vr(k);default:throw new Error("Invalid GeoJSON object.")}}function r0(c,h,m,y){return c?c(h,m):new td(m,y&&y.markersInheritOptions&&y)}function $p(c){return new le(c[1],c[0],c[2])}function sd(c,h,m){for(var y=[],k=0,D=c.length,W;k<D;k++)W=h?sd(c[k],h-1,m):(m||$p)(c[k]),y.push(W);return y}function zp(c,h){return c=ae(c),c.alt!==void 0?[x(c.lng,h),x(c.lat,h),x(c.alt,h)]:[x(c.lng,h),x(c.lat,h)]}function id(c,h,m,y){for(var k=[],D=0,W=c.length;D<W;D++)k.push(h?id(c[D],zn(c[D])?0:h-1,m,y):zp(c[D],y));return!h&&m&&k.length>0&&k.push(k[0].slice()),k}function _a(c,h){return c.feature?s({},c.feature,{geometry:h}):ad(h)}function ad(c){return c.type==="Feature"||c.type==="FeatureCollection"?c:{type:"Feature",properties:{},geometry:c}}var Bp={toGeoJSON:function(c){return _a(this,{type:"Point",coordinates:zp(this.getLatLng(),c)})}};td.include(Bp),Fp.include(Bp),nd.include(Bp),qr.include({toGeoJSON:function(c){var h=!zn(this._latlngs),m=id(this._latlngs,h?1:0,!1,c);return _a(this,{type:(h?"Multi":"")+"LineString",coordinates:m})}}),ba.include({toGeoJSON:function(c){var h=!zn(this._latlngs),m=h&&!zn(this._latlngs[0]),y=id(this._latlngs,m?2:h?1:0,!0,c);return h||(y=[y]),_a(this,{type:(m?"Multi":"")+"Polygon",coordinates:y})}}),va.include({toMultiPoint:function(c){var h=[];return this.eachLayer(function(m){h.push(m.toGeoJSON(c).geometry.coordinates)}),_a(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(c){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(c);var m=h==="GeometryCollection",y=[];return this.eachLayer(function(k){if(k.toGeoJSON){var D=k.toGeoJSON(c);if(m)y.push(D.geometry);else{var W=ad(D);W.type==="FeatureCollection"?y.push.apply(y,W.features):y.push(W)}}}),m?_a(this,{geometries:y,type:"GeometryCollection"}):{type:"FeatureCollection",features:y}}});function s0(c,h){return new Zr(c,h)}var QS=s0,od=ir.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(c,h,m){this._url=c,this._bounds=ie(h),b(this,m)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ee(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){dt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(c){return this.options.opacity=c,this._image&&this._updateOpacity(),this},setStyle:function(c){return c.opacity&&this.setOpacity(c.opacity),this},bringToFront:function(){return this._map&&ga(this._image),this},bringToBack:function(){return this._map&&xa(this._image),this},setUrl:function(c){return this._url=c,this._image&&(this._image.src=c),this},setBounds:function(c){return this._bounds=ie(c),this._map&&this._reset(),this},getEvents:function(){var c={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var c=this._url.tagName==="IMG",h=this._image=c?this._url:We("img");if(Ee(h,"leaflet-image-layer"),this._zoomAnimated&&Ee(h,"leaflet-zoom-animated"),this.options.className&&Ee(h,this.options.className),h.onselectstart=f,h.onmousemove=f,h.onload=o(this.fire,this,"load"),h.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),c){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(c){var h=this._map.getZoomScale(c.zoom),m=this._map._latLngBoundsToNewLayerBounds(this._bounds,c.zoom,c.center).min;fi(this._image,m,h)},_reset:function(){var c=this._image,h=new K(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),m=h.getSize();kt(c,h.min),c.style.width=m.x+"px",c.style.height=m.y+"px"},_updateOpacity:function(){$n(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var c=this.options.errorOverlayUrl;c&&this._url!==c&&(this._url=c,this._image.src=c)},getCenter:function(){return this._bounds.getCenter()}}),XS=function(c,h,m){return new od(c,h,m)},i0=od.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var c=this._url.tagName==="VIDEO",h=this._image=c?this._url:We("video");if(Ee(h,"leaflet-image-layer"),this._zoomAnimated&&Ee(h,"leaflet-zoom-animated"),this.options.className&&Ee(h,this.options.className),h.onselectstart=f,h.onmousemove=f,h.onloadeddata=o(this.fire,this,"load"),c){for(var m=h.getElementsByTagName("source"),y=[],k=0;k<m.length;k++)y.push(m[k].src);this._url=m.length>0?y:[h.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var D=0;D<this._url.length;D++){var W=We("source");W.src=this._url[D],h.appendChild(W)}}});function JS(c,h,m){return new i0(c,h,m)}var a0=od.extend({_initImage:function(){var c=this._image=this._url;Ee(c,"leaflet-image-layer"),this._zoomAnimated&&Ee(c,"leaflet-zoom-animated"),this.options.className&&Ee(c,this.options.className),c.onselectstart=f,c.onmousemove=f}});function eC(c,h,m){return new a0(c,h,m)}var br=ir.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(c,h){c&&(c instanceof le||S(c))?(this._latlng=ae(c),b(this,h)):(b(this,c),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(c){return c=arguments.length?c:this._source._map,c.hasLayer(this)||c.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(c){return this._map?this.close():(arguments.length?this._source=c:c=this._source,this._prepareOpen(),this.openOn(c._map)),this},onAdd:function(c){this._zoomAnimated=c._zoomAnimated,this._container||this._initLayout(),c._fadeAnimated&&$n(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),c._fadeAnimated&&$n(this._container,1),this.bringToFront(),this.options.interactive&&(Ee(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(c){c._fadeAnimated?($n(this._container,0),this._removeTimeout=setTimeout(o(dt,void 0,this._container),200)):dt(this._container),this.options.interactive&&(yt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(c){return this._latlng=ae(c),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(c){return this._content=c,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var c={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ga(this._container),this},bringToBack:function(){return this._map&&xa(this._container),this},_prepareOpen:function(c){var h=this._source;if(!h._map)return!1;if(h instanceof Vr){h=null;var m=this._source._layers;for(var y in m)if(m[y]._map){h=m[y];break}if(!h)return!1;this._source=h}if(!c)if(h.getCenter)c=h.getCenter();else if(h.getLatLng)c=h.getLatLng();else if(h.getBounds)c=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(c),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var c=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")c.innerHTML=h;else{for(;c.hasChildNodes();)c.removeChild(c.firstChild);c.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var c=this._map.latLngToLayerPoint(this._latlng),h=E(this.options.offset),m=this._getAnchor();this._zoomAnimated?kt(this._container,c.add(m)):h=h.add(c).add(m);var y=this._containerBottom=-h.y,k=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=y+"px",this._container.style.left=k+"px"}},_getAnchor:function(){return[0,0]}});Fe.include({_initOverlay:function(c,h,m,y){var k=h;return k instanceof c||(k=new c(y).setContent(h)),m&&k.setLatLng(m),k}}),ir.include({_initOverlay:function(c,h,m,y){var k=m;return k instanceof c?(b(k,y),k._source=this):(k=h&&!y?h:new c(y,this),k.setContent(m)),k}});var ld=br.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(c){return c=arguments.length?c:this._source._map,!c.hasLayer(this)&&c._popup&&c._popup.options.autoClose&&c.removeLayer(c._popup),c._popup=this,br.prototype.openOn.call(this,c)},onAdd:function(c){br.prototype.onAdd.call(this,c),c.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof bs||this._source.on("preclick",gi))},onRemove:function(c){br.prototype.onRemove.call(this,c),c.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof bs||this._source.off("preclick",gi))},getEvents:function(){var c=br.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(c.preclick=this.close),this.options.keepInView&&(c.moveend=this._adjustPan),c},_initLayout:function(){var c="leaflet-popup",h=this._container=We("div",c+" "+(this.options.className||"")+" leaflet-zoom-animated"),m=this._wrapper=We("div",c+"-content-wrapper",h);if(this._contentNode=We("div",c+"-content",m),Yo(h),Pp(this._contentNode),ke(h,"contextmenu",gi),this._tipContainer=We("div",c+"-tip-container",h),this._tip=We("div",c+"-tip",this._tipContainer),this.options.closeButton){var y=this._closeButton=We("a",c+"-close-button",h);y.setAttribute("role","button"),y.setAttribute("aria-label","Close popup"),y.href="#close",y.innerHTML='<span aria-hidden="true">&#215;</span>',ke(y,"click",function(k){Ht(k),this.close()},this)}},_updateLayout:function(){var c=this._contentNode,h=c.style;h.width="",h.whiteSpace="nowrap";var m=c.offsetWidth;m=Math.min(m,this.options.maxWidth),m=Math.max(m,this.options.minWidth),h.width=m+1+"px",h.whiteSpace="",h.height="";var y=c.offsetHeight,k=this.options.maxHeight,D="leaflet-popup-scrolled";k&&y>k?(h.height=k+"px",Ee(c,D)):yt(c,D),this._containerWidth=this._container.offsetWidth},_animateZoom:function(c){var h=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center),m=this._getAnchor();kt(this._container,h.add(m))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var c=this._map,h=parseInt(Bo(this._container,"marginBottom"),10)||0,m=this._container.offsetHeight+h,y=this._containerWidth,k=new I(this._containerLeft,-m-this._containerBottom);k._add(mi(this._container));var D=c.layerPointToContainerPoint(k),W=E(this.options.autoPanPadding),J=E(this.options.autoPanPaddingTopLeft||W),ne=E(this.options.autoPanPaddingBottomRight||W),ce=c.getSize(),ge=0,je=0;D.x+y+ne.x>ce.x&&(ge=D.x+y-ce.x+ne.x),D.x-ge-J.x<0&&(ge=D.x-J.x),D.y+m+ne.y>ce.y&&(je=D.y+m-ce.y+ne.y),D.y-je-J.y<0&&(je=D.y-J.y),(ge||je)&&(this.options.keepInView&&(this._autopanning=!0),c.fire("autopanstart").panBy([ge,je]))}},_getAnchor:function(){return E(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),tC=function(c,h){return new ld(c,h)};Fe.mergeOptions({closePopupOnClick:!0}),Fe.include({openPopup:function(c,h,m){return this._initOverlay(ld,c,h,m).openOn(this),this},closePopup:function(c){return c=arguments.length?c:this._popup,c&&c.close(),this}}),ir.include({bindPopup:function(c,h){return this._popup=this._initOverlay(ld,this._popup,c,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(c){return this._popup&&(this instanceof Vr||(this._popup._source=this),this._popup._prepareOpen(c||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(c){return this._popup&&this._popup.setContent(c),this},getPopup:function(){return this._popup},_openPopup:function(c){if(!(!this._popup||!this._map)){xi(c);var h=c.layer||c.target;if(this._popup._source===h&&!(h instanceof bs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(c.latlng);return}this._popup._source=h,this.openPopup(c.latlng)}},_movePopup:function(c){this._popup.setLatLng(c.latlng)},_onKeyPress:function(c){c.originalEvent.keyCode===13&&this._openPopup(c)}});var cd=br.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(c){br.prototype.onAdd.call(this,c),this.setOpacity(this.options.opacity),c.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(c){br.prototype.onRemove.call(this,c),c.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var c=br.prototype.getEvents.call(this);return this.options.permanent||(c.preclick=this.close),c},_initLayout:function(){var c="leaflet-tooltip",h=c+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=We("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(c){var h,m,y=this._map,k=this._container,D=y.latLngToContainerPoint(y.getCenter()),W=y.layerPointToContainerPoint(c),J=this.options.direction,ne=k.offsetWidth,ce=k.offsetHeight,ge=E(this.options.offset),je=this._getAnchor();J==="top"?(h=ne/2,m=ce):J==="bottom"?(h=ne/2,m=0):J==="center"?(h=ne/2,m=ce/2):J==="right"?(h=0,m=ce/2):J==="left"?(h=ne,m=ce/2):W.x<D.x?(J="right",h=0,m=ce/2):(J="left",h=ne+(ge.x+je.x)*2,m=ce/2),c=c.subtract(E(h,m,!0)).add(ge).add(je),yt(k,"leaflet-tooltip-right"),yt(k,"leaflet-tooltip-left"),yt(k,"leaflet-tooltip-top"),yt(k,"leaflet-tooltip-bottom"),Ee(k,"leaflet-tooltip-"+J),kt(k,c)},_updatePosition:function(){var c=this._map.latLngToLayerPoint(this._latlng);this._setPosition(c)},setOpacity:function(c){this.options.opacity=c,this._container&&$n(this._container,c)},_animateZoom:function(c){var h=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center);this._setPosition(h)},_getAnchor:function(){return E(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),nC=function(c,h){return new cd(c,h)};Fe.include({openTooltip:function(c,h,m){return this._initOverlay(cd,c,h,m).openOn(this),this},closeTooltip:function(c){return c.close(),this}}),ir.include({bindTooltip:function(c,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(cd,this._tooltip,c,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(c){if(!(!c&&this._tooltipHandlersAdded)){var h=c?"off":"on",m={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?m.add=this._openTooltip:(m.mouseover=this._openTooltip,m.mouseout=this.closeTooltip,m.click=this._openTooltip,this._map?this._addFocusListeners():m.add=this._addFocusListeners),this._tooltip.options.sticky&&(m.mousemove=this._moveTooltip),this[h](m),this._tooltipHandlersAdded=!c}},openTooltip:function(c){return this._tooltip&&(this instanceof Vr||(this._tooltip._source=this),this._tooltip._prepareOpen(c)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(c){return this._tooltip&&this._tooltip.setContent(c),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(c){var h=typeof c.getElement=="function"&&c.getElement();h&&(ke(h,"focus",function(){this._tooltip._source=c,this.openTooltip()},this),ke(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(c){var h=typeof c.getElement=="function"&&c.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(c){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(c)});return}this._tooltip._source=c.layer||c.target,this.openTooltip(this._tooltip.options.sticky?c.latlng:void 0)}},_moveTooltip:function(c){var h=c.latlng,m,y;this._tooltip.options.sticky&&c.originalEvent&&(m=this._map.mouseEventToContainerPoint(c.originalEvent),y=this._map.containerPointToLayerPoint(m),h=this._map.layerPointToLatLng(y)),this._tooltip.setLatLng(h)}});var o0=ya.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(c){var h=c&&c.tagName==="DIV"?c:document.createElement("div"),m=this.options;if(m.html instanceof Element?(Kc(h),h.appendChild(m.html)):h.innerHTML=m.html!==!1?m.html:"",m.bgPos){var y=E(m.bgPos);h.style.backgroundPosition=-y.x+"px "+-y.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function rC(c){return new o0(c)}ya.Default=Zo;var Ko=ir.extend({options:{tileSize:256,opacity:1,updateWhenIdle:_e.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(c){b(this,c)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(c){c._addZoomLimit(this)},onRemove:function(c){this._removeAllTiles(),dt(this._container),c._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ga(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(xa(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(c){return this.options.opacity=c,this._updateOpacity(),this},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var c=this._clampZoom(this._map.getZoom());c!==this._tileZoom&&(this._tileZoom=c,this._updateLevels()),this._update()}return this},getEvents:function(){var c={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u(this._onMoveEnd,this.options.updateInterval,this)),c.move=this._onMove),this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},createTile:function(){return document.createElement("div")},getTileSize:function(){var c=this.options.tileSize;return c instanceof I?c:new I(c,c)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(c){for(var h=this.getPane().children,m=-c(-1/0,1/0),y=0,k=h.length,D;y<k;y++)D=h[y].style.zIndex,h[y]!==this._container&&D&&(m=c(m,+D));isFinite(m)&&(this.options.zIndex=m+c(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!_e.ielt9){$n(this._container,this.options.opacity);var c=+new Date,h=!1,m=!1;for(var y in this._tiles){var k=this._tiles[y];if(!(!k.current||!k.loaded)){var D=Math.min(1,(c-k.loaded)/200);$n(k.el,D),D<1?h=!0:(k.active?m=!0:this._onOpaqueTile(k),k.active=!0)}}m&&!this._noPrune&&this._pruneTiles(),h&&(te(this._fadeFrame),this._fadeFrame=H(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=We("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var c=this._tileZoom,h=this.options.maxZoom;if(c!==void 0){for(var m in this._levels)m=Number(m),this._levels[m].el.children.length||m===c?(this._levels[m].el.style.zIndex=h-Math.abs(c-m),this._onUpdateLevel(m)):(dt(this._levels[m].el),this._removeTilesAtZoom(m),this._onRemoveLevel(m),delete this._levels[m]);var y=this._levels[c],k=this._map;return y||(y=this._levels[c]={},y.el=We("div","leaflet-tile-container leaflet-zoom-animated",this._container),y.el.style.zIndex=h,y.origin=k.project(k.unproject(k.getPixelOrigin()),c).round(),y.zoom=c,this._setZoomTransform(y,k.getCenter(),k.getZoom()),f(y.el.offsetWidth),this._onCreateLevel(y)),this._level=y,y}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var c,h,m=this._map.getZoom();if(m>this.options.maxZoom||m<this.options.minZoom){this._removeAllTiles();return}for(c in this._tiles)h=this._tiles[c],h.retain=h.current;for(c in this._tiles)if(h=this._tiles[c],h.current&&!h.active){var y=h.coords;this._retainParent(y.x,y.y,y.z,y.z-5)||this._retainChildren(y.x,y.y,y.z,y.z+2)}for(c in this._tiles)this._tiles[c].retain||this._removeTile(c)}},_removeTilesAtZoom:function(c){for(var h in this._tiles)this._tiles[h].coords.z===c&&this._removeTile(h)},_removeAllTiles:function(){for(var c in this._tiles)this._removeTile(c)},_invalidateAll:function(){for(var c in this._levels)dt(this._levels[c].el),this._onRemoveLevel(Number(c)),delete this._levels[c];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(c,h,m,y){var k=Math.floor(c/2),D=Math.floor(h/2),W=m-1,J=new I(+k,+D);J.z=+W;var ne=this._tileCoordsToKey(J),ce=this._tiles[ne];return ce&&ce.active?(ce.retain=!0,!0):(ce&&ce.loaded&&(ce.retain=!0),W>y?this._retainParent(k,D,W,y):!1)},_retainChildren:function(c,h,m,y){for(var k=2*c;k<2*c+2;k++)for(var D=2*h;D<2*h+2;D++){var W=new I(k,D);W.z=m+1;var J=this._tileCoordsToKey(W),ne=this._tiles[J];if(ne&&ne.active){ne.retain=!0;continue}else ne&&ne.loaded&&(ne.retain=!0);m+1<y&&this._retainChildren(k,D,m+1,y)}},_resetView:function(c){var h=c&&(c.pinch||c.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(c){this._setView(c.center,c.zoom,!0,c.noUpdate)},_clampZoom:function(c){var h=this.options;return h.minNativeZoom!==void 0&&c<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<c?h.maxNativeZoom:c},_setView:function(c,h,m,y){var k=Math.round(h);this.options.maxZoom!==void 0&&k>this.options.maxZoom||this.options.minZoom!==void 0&&k<this.options.minZoom?k=void 0:k=this._clampZoom(k);var D=this.options.updateWhenZooming&&k!==this._tileZoom;(!y||D)&&(this._tileZoom=k,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),k!==void 0&&this._update(c),m||this._pruneTiles(),this._noPrune=!!m),this._setZoomTransforms(c,h)},_setZoomTransforms:function(c,h){for(var m in this._levels)this._setZoomTransform(this._levels[m],c,h)},_setZoomTransform:function(c,h,m){var y=this._map.getZoomScale(m,c.zoom),k=c.origin.multiplyBy(y).subtract(this._map._getNewPixelOrigin(h,m)).round();_e.any3d?fi(c.el,k,y):kt(c.el,k)},_resetGrid:function(){var c=this._map,h=c.options.crs,m=this._tileSize=this.getTileSize(),y=this._tileZoom,k=this._map.getPixelWorldBounds(this._tileZoom);k&&(this._globalTileRange=this._pxBoundsToTileRange(k)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(c.project([0,h.wrapLng[0]],y).x/m.x),Math.ceil(c.project([0,h.wrapLng[1]],y).x/m.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(c.project([h.wrapLat[0],0],y).y/m.x),Math.ceil(c.project([h.wrapLat[1],0],y).y/m.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(c){var h=this._map,m=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),y=h.getZoomScale(m,this._tileZoom),k=h.project(c,this._tileZoom).floor(),D=h.getSize().divideBy(y*2);return new K(k.subtract(D),k.add(D))},_update:function(c){var h=this._map;if(h){var m=this._clampZoom(h.getZoom());if(c===void 0&&(c=h.getCenter()),this._tileZoom!==void 0){var y=this._getTiledPixelBounds(c),k=this._pxBoundsToTileRange(y),D=k.getCenter(),W=[],J=this.options.keepBuffer,ne=new K(k.getBottomLeft().subtract([J,-J]),k.getTopRight().add([J,-J]));if(!(isFinite(k.min.x)&&isFinite(k.min.y)&&isFinite(k.max.x)&&isFinite(k.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ce in this._tiles){var ge=this._tiles[ce].coords;(ge.z!==this._tileZoom||!ne.contains(new I(ge.x,ge.y)))&&(this._tiles[ce].current=!1)}if(Math.abs(m-this._tileZoom)>1){this._setView(c,m);return}for(var je=k.min.y;je<=k.max.y;je++)for(var Oe=k.min.x;Oe<=k.max.x;Oe++){var ln=new I(Oe,je);if(ln.z=this._tileZoom,!!this._isValidTile(ln)){var Ot=this._tiles[this._tileCoordsToKey(ln)];Ot?Ot.current=!0:W.push(ln)}}if(W.sort(function(mn,ja){return mn.distanceTo(D)-ja.distanceTo(D)}),W.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Bn=document.createDocumentFragment();for(Oe=0;Oe<W.length;Oe++)this._addTile(W[Oe],Bn);this._level.el.appendChild(Bn)}}}},_isValidTile:function(c){var h=this._map.options.crs;if(!h.infinite){var m=this._globalTileRange;if(!h.wrapLng&&(c.x<m.min.x||c.x>m.max.x)||!h.wrapLat&&(c.y<m.min.y||c.y>m.max.y))return!1}if(!this.options.bounds)return!0;var y=this._tileCoordsToBounds(c);return ie(this.options.bounds).overlaps(y)},_keyToBounds:function(c){return this._tileCoordsToBounds(this._keyToTileCoords(c))},_tileCoordsToNwSe:function(c){var h=this._map,m=this.getTileSize(),y=c.scaleBy(m),k=y.add(m),D=h.unproject(y,c.z),W=h.unproject(k,c.z);return[D,W]},_tileCoordsToBounds:function(c){var h=this._tileCoordsToNwSe(c),m=new Q(h[0],h[1]);return this.options.noWrap||(m=this._map.wrapLatLngBounds(m)),m},_tileCoordsToKey:function(c){return c.x+":"+c.y+":"+c.z},_keyToTileCoords:function(c){var h=c.split(":"),m=new I(+h[0],+h[1]);return m.z=+h[2],m},_removeTile:function(c){var h=this._tiles[c];h&&(dt(h.el),delete this._tiles[c],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(c)}))},_initTile:function(c){Ee(c,"leaflet-tile");var h=this.getTileSize();c.style.width=h.x+"px",c.style.height=h.y+"px",c.onselectstart=f,c.onmousemove=f,_e.ielt9&&this.options.opacity<1&&$n(c,this.options.opacity)},_addTile:function(c,h){var m=this._getTilePos(c),y=this._tileCoordsToKey(c),k=this.createTile(this._wrapCoords(c),o(this._tileReady,this,c));this._initTile(k),this.createTile.length<2&&H(o(this._tileReady,this,c,null,k)),kt(k,m),this._tiles[y]={el:k,coords:c,current:!0},h.appendChild(k),this.fire("tileloadstart",{tile:k,coords:c})},_tileReady:function(c,h,m){h&&this.fire("tileerror",{error:h,tile:m,coords:c});var y=this._tileCoordsToKey(c);m=this._tiles[y],m&&(m.loaded=+new Date,this._map._fadeAnimated?($n(m.el,0),te(this._fadeFrame),this._fadeFrame=H(this._updateOpacity,this)):(m.active=!0,this._pruneTiles()),h||(Ee(m.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:m.el,coords:c})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),_e.ielt9||!this._map._fadeAnimated?H(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(c){return c.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(c){var h=new I(this._wrapX?p(c.x,this._wrapX):c.x,this._wrapY?p(c.y,this._wrapY):c.y);return h.z=c.z,h},_pxBoundsToTileRange:function(c){var h=this.getTileSize();return new K(c.min.unscaleBy(h).floor(),c.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var c in this._tiles)if(!this._tiles[c].loaded)return!1;return!0}});function sC(c){return new Ko(c)}var wa=Ko.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(c,h){this._url=c,h=b(this,h),h.detectRetina&&_e.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(c,h){return this._url===c&&h===void 0&&(h=!0),this._url=c,h||this.redraw(),this},createTile:function(c,h){var m=document.createElement("img");return ke(m,"load",o(this._tileOnLoad,this,h,m)),ke(m,"error",o(this._tileOnError,this,h,m)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(m.referrerPolicy=this.options.referrerPolicy),m.alt="",m.src=this.getTileUrl(c),m},getTileUrl:function(c){var h={r:_e.retina?"@2x":"",s:this._getSubdomain(c),x:c.x,y:c.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var m=this._globalTileRange.max.y-c.y;this.options.tms&&(h.y=m),h["-y"]=m}return N(this._url,s(h,this.options))},_tileOnLoad:function(c,h){_e.ielt9?setTimeout(o(c,this,null,h),0):c(null,h)},_tileOnError:function(c,h,m){var y=this.options.errorTileUrl;y&&h.getAttribute("src")!==y&&(h.src=y),c(m,h)},_onTileRemove:function(c){c.tile.onload=null},_getZoomForUrl:function(){var c=this._tileZoom,h=this.options.maxZoom,m=this.options.zoomReverse,y=this.options.zoomOffset;return m&&(c=h-c),c+y},_getSubdomain:function(c){var h=Math.abs(c.x+c.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var c,h;for(c in this._tiles)if(this._tiles[c].coords.z!==this._tileZoom&&(h=this._tiles[c].el,h.onload=f,h.onerror=f,!h.complete)){h.src=M;var m=this._tiles[c].coords;dt(h),delete this._tiles[c],this.fire("tileabort",{tile:h,coords:m})}},_removeTile:function(c){var h=this._tiles[c];if(h)return h.el.setAttribute("src",M),Ko.prototype._removeTile.call(this,c)},_tileReady:function(c,h,m){if(!(!this._map||m&&m.getAttribute("src")===M))return Ko.prototype._tileReady.call(this,c,h,m)}});function l0(c,h){return new wa(c,h)}var c0=wa.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(c,h){this._url=c;var m=s({},this.defaultWmsParams);for(var y in h)y in this.options||(m[y]=h[y]);h=b(this,h);var k=h.detectRetina&&_e.retina?2:1,D=this.getTileSize();m.width=D.x*k,m.height=D.y*k,this.wmsParams=m},onAdd:function(c){this._crs=this.options.crs||c.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,wa.prototype.onAdd.call(this,c)},getTileUrl:function(c){var h=this._tileCoordsToNwSe(c),m=this._crs,y=re(m.project(h[0]),m.project(h[1])),k=y.min,D=y.max,W=(this._wmsVersion>=1.3&&this._crs===t0?[k.y,k.x,D.y,D.x]:[k.x,k.y,D.x,D.y]).join(","),J=wa.prototype.getTileUrl.call(this,c);return J+j(this.wmsParams,J,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+W},setParams:function(c,h){return s(this.wmsParams,c),h||this.redraw(),this}});function iC(c,h){return new c0(c,h)}wa.WMS=c0,l0.wms=iC;var Kr=ir.extend({options:{padding:.1},initialize:function(c){b(this,c),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ee(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var c={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(c.zoomanim=this._onAnimZoom),c},_onAnimZoom:function(c){this._updateTransform(c.center,c.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(c,h){var m=this._map.getZoomScale(h,this._zoom),y=this._map.getSize().multiplyBy(.5+this.options.padding),k=this._map.project(this._center,h),D=y.multiplyBy(-m).add(k).subtract(this._map._getNewPixelOrigin(c,h));_e.any3d?fi(this._container,D,m):kt(this._container,D)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var c in this._layers)this._layers[c]._reset()},_onZoomEnd:function(){for(var c in this._layers)this._layers[c]._project()},_updatePaths:function(){for(var c in this._layers)this._layers[c]._update()},_update:function(){var c=this.options.padding,h=this._map.getSize(),m=this._map.containerPointToLayerPoint(h.multiplyBy(-c)).round();this._bounds=new K(m,m.add(h.multiplyBy(1+c*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),d0=Kr.extend({options:{tolerance:0},getEvents:function(){var c=Kr.prototype.getEvents.call(this);return c.viewprereset=this._onViewPreReset,c},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Kr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var c=this._container=document.createElement("canvas");ke(c,"mousemove",this._onMouseMove,this),ke(c,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ke(c,"mouseout",this._handleMouseOut,this),c._leaflet_disable_events=!0,this._ctx=c.getContext("2d")},_destroyContainer:function(){te(this._redrawRequest),delete this._ctx,dt(this._container),Xe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var c;this._redrawBounds=null;for(var h in this._layers)c=this._layers[h],c._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Kr.prototype._update.call(this);var c=this._bounds,h=this._container,m=c.getSize(),y=_e.retina?2:1;kt(h,c.min),h.width=y*m.x,h.height=y*m.y,h.style.width=m.x+"px",h.style.height=m.y+"px",_e.retina&&this._ctx.scale(2,2),this._ctx.translate(-c.min.x,-c.min.y),this.fire("update")}},_reset:function(){Kr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(c){this._updateDashArray(c),this._layers[d(c)]=c;var h=c._order={layer:c,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(c){this._requestRedraw(c)},_removePath:function(c){var h=c._order,m=h.next,y=h.prev;m?m.prev=y:this._drawLast=y,y?y.next=m:this._drawFirst=m,delete c._order,delete this._layers[d(c)],this._requestRedraw(c)},_updatePath:function(c){this._extendRedrawBounds(c),c._project(),c._update(),this._requestRedraw(c)},_updateStyle:function(c){this._updateDashArray(c),this._requestRedraw(c)},_updateDashArray:function(c){if(typeof c.options.dashArray=="string"){var h=c.options.dashArray.split(/[, ]+/),m=[],y,k;for(k=0;k<h.length;k++){if(y=Number(h[k]),isNaN(y))return;m.push(y)}c.options._dashArray=m}else c.options._dashArray=c.options.dashArray},_requestRedraw:function(c){this._map&&(this._extendRedrawBounds(c),this._redrawRequest=this._redrawRequest||H(this._redraw,this))},_extendRedrawBounds:function(c){if(c._pxBounds){var h=(c.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new K,this._redrawBounds.extend(c._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(c._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var c=this._redrawBounds;if(c){var h=c.getSize();this._ctx.clearRect(c.min.x,c.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var c,h=this._redrawBounds;if(this._ctx.save(),h){var m=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,m.x,m.y),this._ctx.clip()}this._drawing=!0;for(var y=this._drawFirst;y;y=y.next)c=y.layer,(!h||c._pxBounds&&c._pxBounds.intersects(h))&&c._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(c,h){if(this._drawing){var m,y,k,D,W=c._parts,J=W.length,ne=this._ctx;if(J){for(ne.beginPath(),m=0;m<J;m++){for(y=0,k=W[m].length;y<k;y++)D=W[m][y],ne[y?"lineTo":"moveTo"](D.x,D.y);h&&ne.closePath()}this._fillStroke(ne,c)}}},_updateCircle:function(c){if(!(!this._drawing||c._empty())){var h=c._point,m=this._ctx,y=Math.max(Math.round(c._radius),1),k=(Math.max(Math.round(c._radiusY),1)||y)/y;k!==1&&(m.save(),m.scale(1,k)),m.beginPath(),m.arc(h.x,h.y/k,y,0,Math.PI*2,!1),k!==1&&m.restore(),this._fillStroke(m,c)}},_fillStroke:function(c,h){var m=h.options;m.fill&&(c.globalAlpha=m.fillOpacity,c.fillStyle=m.fillColor||m.color,c.fill(m.fillRule||"evenodd")),m.stroke&&m.weight!==0&&(c.setLineDash&&c.setLineDash(h.options&&h.options._dashArray||[]),c.globalAlpha=m.opacity,c.lineWidth=m.weight,c.strokeStyle=m.color,c.lineCap=m.lineCap,c.lineJoin=m.lineJoin,c.stroke())},_onClick:function(c){for(var h=this._map.mouseEventToLayerPoint(c),m,y,k=this._drawFirst;k;k=k.next)m=k.layer,m.options.interactive&&m._containsPoint(h)&&(!(c.type==="click"||c.type==="preclick")||!this._map._draggableMoved(m))&&(y=m);this._fireEvent(y?[y]:!1,c)},_onMouseMove:function(c){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(c);this._handleMouseHover(c,h)}},_handleMouseOut:function(c){var h=this._hoveredLayer;h&&(yt(this._container,"leaflet-interactive"),this._fireEvent([h],c,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(c,h){if(!this._mouseHoverThrottled){for(var m,y,k=this._drawFirst;k;k=k.next)m=k.layer,m.options.interactive&&m._containsPoint(h)&&(y=m);y!==this._hoveredLayer&&(this._handleMouseOut(c),y&&(Ee(this._container,"leaflet-interactive"),this._fireEvent([y],c,"mouseover"),this._hoveredLayer=y)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,c),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(c,h,m){this._map._fireDOMEvent(h,m||h.type,c)},_bringToFront:function(c){var h=c._order;if(h){var m=h.next,y=h.prev;if(m)m.prev=y;else return;y?y.next=m:m&&(this._drawFirst=m),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(c)}},_bringToBack:function(c){var h=c._order;if(h){var m=h.next,y=h.prev;if(y)y.next=m;else return;m?m.prev=y:y&&(this._drawLast=y),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(c)}}});function u0(c){return _e.canvas?new d0(c):null}var Go=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(c){return document.createElement("<lvml:"+c+' class="lvml">')}}catch{}return function(c){return document.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),aC={_initContainer:function(){this._container=We("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Kr.prototype._update.call(this),this.fire("update"))},_initPath:function(c){var h=c._container=Go("shape");Ee(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",c._path=Go("path"),h.appendChild(c._path),this._updateStyle(c),this._layers[d(c)]=c},_addPath:function(c){var h=c._container;this._container.appendChild(h),c.options.interactive&&c.addInteractiveTarget(h)},_removePath:function(c){var h=c._container;dt(h),c.removeInteractiveTarget(h),delete this._layers[d(c)]},_updateStyle:function(c){var h=c._stroke,m=c._fill,y=c.options,k=c._container;k.stroked=!!y.stroke,k.filled=!!y.fill,y.stroke?(h||(h=c._stroke=Go("stroke")),k.appendChild(h),h.weight=y.weight+"px",h.color=y.color,h.opacity=y.opacity,y.dashArray?h.dashStyle=S(y.dashArray)?y.dashArray.join(" "):y.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=y.lineCap.replace("butt","flat"),h.joinstyle=y.lineJoin):h&&(k.removeChild(h),c._stroke=null),y.fill?(m||(m=c._fill=Go("fill")),k.appendChild(m),m.color=y.fillColor||y.color,m.opacity=y.fillOpacity):m&&(k.removeChild(m),c._fill=null)},_updateCircle:function(c){var h=c._point.round(),m=Math.round(c._radius),y=Math.round(c._radiusY||m);this._setPath(c,c._empty()?"M0 0":"AL "+h.x+","+h.y+" "+m+","+y+" 0,"+65535*360)},_setPath:function(c,h){c._path.v=h},_bringToFront:function(c){ga(c._container)},_bringToBack:function(c){xa(c._container)}},dd=_e.vml?Go:Gt,Qo=Kr.extend({_initContainer:function(){this._container=dd("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=dd("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){dt(this._container),Xe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Kr.prototype._update.call(this);var c=this._bounds,h=c.getSize(),m=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,m.setAttribute("width",h.x),m.setAttribute("height",h.y)),kt(m,c.min),m.setAttribute("viewBox",[c.min.x,c.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(c){var h=c._path=dd("path");c.options.className&&Ee(h,c.options.className),c.options.interactive&&Ee(h,"leaflet-interactive"),this._updateStyle(c),this._layers[d(c)]=c},_addPath:function(c){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(c._path),c.addInteractiveTarget(c._path)},_removePath:function(c){dt(c._path),c.removeInteractiveTarget(c._path),delete this._layers[d(c)]},_updatePath:function(c){c._project(),c._update()},_updateStyle:function(c){var h=c._path,m=c.options;h&&(m.stroke?(h.setAttribute("stroke",m.color),h.setAttribute("stroke-opacity",m.opacity),h.setAttribute("stroke-width",m.weight),h.setAttribute("stroke-linecap",m.lineCap),h.setAttribute("stroke-linejoin",m.lineJoin),m.dashArray?h.setAttribute("stroke-dasharray",m.dashArray):h.removeAttribute("stroke-dasharray"),m.dashOffset?h.setAttribute("stroke-dashoffset",m.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),m.fill?(h.setAttribute("fill",m.fillColor||m.color),h.setAttribute("fill-opacity",m.fillOpacity),h.setAttribute("fill-rule",m.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(c,h){this._setPath(c,Qt(c._parts,h))},_updateCircle:function(c){var h=c._point,m=Math.max(Math.round(c._radius),1),y=Math.max(Math.round(c._radiusY),1)||m,k="a"+m+","+y+" 0 1,0 ",D=c._empty()?"M0 0":"M"+(h.x-m)+","+h.y+k+m*2+",0 "+k+-m*2+",0 ";this._setPath(c,D)},_setPath:function(c,h){c._path.setAttribute("d",h)},_bringToFront:function(c){ga(c._path)},_bringToBack:function(c){xa(c._path)}});_e.vml&&Qo.include(aC);function h0(c){return _e.svg||_e.vml?new Qo(c):null}Fe.include({getRenderer:function(c){var h=c.options.renderer||this._getPaneRenderer(c.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(c){if(c==="overlayPane"||c===void 0)return!1;var h=this._paneRenderers[c];return h===void 0&&(h=this._createRenderer({pane:c}),this._paneRenderers[c]=h),h},_createRenderer:function(c){return this.options.preferCanvas&&u0(c)||h0(c)}});var p0=ba.extend({initialize:function(c,h){ba.prototype.initialize.call(this,this._boundsToLatLngs(c),h)},setBounds:function(c){return this.setLatLngs(this._boundsToLatLngs(c))},_boundsToLatLngs:function(c){return c=ie(c),[c.getSouthWest(),c.getNorthWest(),c.getNorthEast(),c.getSouthEast()]}});function oC(c,h){return new p0(c,h)}Qo.create=dd,Qo.pointsToPath=Qt,Zr.geometryToLayer=rd,Zr.coordsToLatLng=$p,Zr.coordsToLatLngs=sd,Zr.latLngToCoords=zp,Zr.latLngsToCoords=id,Zr.getFeature=_a,Zr.asFeature=ad,Fe.mergeOptions({boxZoom:!0});var f0=yr.extend({initialize:function(c){this._map=c,this._container=c._container,this._pane=c._panes.overlayPane,this._resetStateTimeout=0,c.on("unload",this._destroy,this)},addHooks:function(){ke(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Xe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){dt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(c){if(!c.shiftKey||c.which!==1&&c.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Uo(),wp(),this._startPoint=this._map.mouseEventToContainerPoint(c),ke(document,{contextmenu:xi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(c){this._moved||(this._moved=!0,this._box=We("div","leaflet-zoom-box",this._container),Ee(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(c);var h=new K(this._point,this._startPoint),m=h.getSize();kt(this._box,h.min),this._box.style.width=m.x+"px",this._box.style.height=m.y+"px"},_finish:function(){this._moved&&(dt(this._box),yt(this._container,"leaflet-crosshair")),Wo(),jp(),Xe(document,{contextmenu:xi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(c){if(!(c.which!==1&&c.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var h=new Q(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(c){c.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Fe.addInitHook("addHandler","boxZoom",f0),Fe.mergeOptions({doubleClickZoom:!0});var m0=yr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(c){var h=this._map,m=h.getZoom(),y=h.options.zoomDelta,k=c.originalEvent.shiftKey?m-y:m+y;h.options.doubleClickZoom==="center"?h.setZoom(k):h.setZoomAround(c.containerPoint,k)}});Fe.addInitHook("addHandler","doubleClickZoom",m0),Fe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var g0=yr.extend({addHooks:function(){if(!this._draggable){var c=this._map;this._draggable=new ys(c._mapPane,c._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),c.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),c.on("zoomend",this._onZoomEnd,this),c.whenReady(this._onZoomEnd,this))}Ee(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){yt(this._map._container,"leaflet-grab"),yt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var c=this._map;if(c._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=ie(this._map.options.maxBounds);this._offsetLimit=re(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;c.fire("movestart").fire("dragstart"),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(c){if(this._map.options.inertia){var h=this._lastTime=+new Date,m=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(m),this._times.push(h),this._prunePositions(h)}this._map.fire("move",c).fire("drag",c)},_prunePositions:function(c){for(;this._positions.length>1&&c-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var c=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(c).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(c,h){return c-(c-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var c=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;c.x<h.min.x&&(c.x=this._viscousLimit(c.x,h.min.x)),c.y<h.min.y&&(c.y=this._viscousLimit(c.y,h.min.y)),c.x>h.max.x&&(c.x=this._viscousLimit(c.x,h.max.x)),c.y>h.max.y&&(c.y=this._viscousLimit(c.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(c)}},_onPreDragWrap:function(){var c=this._worldWidth,h=Math.round(c/2),m=this._initialWorldOffset,y=this._draggable._newPos.x,k=(y-h+m)%c+h-m,D=(y+h+m)%c-h-m,W=Math.abs(k+m)<Math.abs(D+m)?k:D;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=W},_onDragEnd:function(c){var h=this._map,m=h.options,y=!m.inertia||c.noInertia||this._times.length<2;if(h.fire("dragend",c),y)h.fire("moveend");else{this._prunePositions(+new Date);var k=this._lastPos.subtract(this._positions[0]),D=(this._lastTime-this._times[0])/1e3,W=m.easeLinearity,J=k.multiplyBy(W/D),ne=J.distanceTo([0,0]),ce=Math.min(m.inertiaMaxSpeed,ne),ge=J.multiplyBy(ce/ne),je=ce/(m.inertiaDeceleration*W),Oe=ge.multiplyBy(-je/2).round();!Oe.x&&!Oe.y?h.fire("moveend"):(Oe=h._limitOffset(Oe,h.options.maxBounds),H(function(){h.panBy(Oe,{duration:je,easeLinearity:W,noMoveStart:!0,animate:!0})}))}}});Fe.addInitHook("addHandler","dragging",g0),Fe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var x0=yr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(c){this._map=c,this._setPanDelta(c.options.keyboardPanDelta),this._setZoomDelta(c.options.zoomDelta)},addHooks:function(){var c=this._map._container;c.tabIndex<=0&&(c.tabIndex="0"),ke(c,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Xe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=document.body,h=document.documentElement,m=c.scrollTop||h.scrollTop,y=c.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(y,m)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(c){var h=this._panKeys={},m=this.keyCodes,y,k;for(y=0,k=m.left.length;y<k;y++)h[m.left[y]]=[-1*c,0];for(y=0,k=m.right.length;y<k;y++)h[m.right[y]]=[c,0];for(y=0,k=m.down.length;y<k;y++)h[m.down[y]]=[0,c];for(y=0,k=m.up.length;y<k;y++)h[m.up[y]]=[0,-1*c]},_setZoomDelta:function(c){var h=this._zoomKeys={},m=this.keyCodes,y,k;for(y=0,k=m.zoomIn.length;y<k;y++)h[m.zoomIn[y]]=c;for(y=0,k=m.zoomOut.length;y<k;y++)h[m.zoomOut[y]]=-c},_addHooks:function(){ke(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Xe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(c){if(!(c.altKey||c.ctrlKey||c.metaKey)){var h=c.keyCode,m=this._map,y;if(h in this._panKeys){if(!m._panAnim||!m._panAnim._inProgress)if(y=this._panKeys[h],c.shiftKey&&(y=E(y).multiplyBy(3)),m.options.maxBounds&&(y=m._limitOffset(E(y),m.options.maxBounds)),m.options.worldCopyJump){var k=m.wrapLatLng(m.unproject(m.project(m.getCenter()).add(y)));m.panTo(k)}else m.panBy(y)}else if(h in this._zoomKeys)m.setZoom(m.getZoom()+(c.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&m._popup&&m._popup.options.closeOnEscapeKey)m.closePopup();else return;xi(c)}}});Fe.addInitHook("addHandler","keyboard",x0),Fe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var v0=yr.extend({addHooks:function(){ke(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Xe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(c){var h=Uv(c),m=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(c),this._startTime||(this._startTime=+new Date);var y=Math.max(m-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),y),xi(c)},_performZoom:function(){var c=this._map,h=c.getZoom(),m=this._map.options.zoomSnap||0;c._stop();var y=this._delta/(this._map.options.wheelPxPerZoomLevel*4),k=4*Math.log(2/(1+Math.exp(-Math.abs(y))))/Math.LN2,D=m?Math.ceil(k/m)*m:k,W=c._limitZoom(h+(this._delta>0?D:-D))-h;this._delta=0,this._startTime=null,W&&(c.options.scrollWheelZoom==="center"?c.setZoom(h+W):c.setZoomAround(this._lastMousePos,h+W))}});Fe.addInitHook("addHandler","scrollWheelZoom",v0);var lC=600;Fe.mergeOptions({tapHold:_e.touchNative&&_e.safari&&_e.mobile,tapTolerance:15});var y0=yr.extend({addHooks:function(){ke(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Xe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(c){if(clearTimeout(this._holdTimeout),c.touches.length===1){var h=c.touches[0];this._startPos=this._newPos=new I(h.clientX,h.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(ke(document,"touchend",Ht),ke(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),lC),ke(document,"touchend touchcancel contextmenu",this._cancel,this),ke(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function c(){Xe(document,"touchend",Ht),Xe(document,"touchend touchcancel",c)},_cancel:function(){clearTimeout(this._holdTimeout),Xe(document,"touchend touchcancel contextmenu",this._cancel,this),Xe(document,"touchmove",this._onMove,this)},_onMove:function(c){var h=c.touches[0];this._newPos=new I(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(c,h){var m=new MouseEvent(c,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});m._simulated=!0,h.target.dispatchEvent(m)}});Fe.addInitHook("addHandler","tapHold",y0),Fe.mergeOptions({touchZoom:_e.touch,bounceAtZoomLimits:!0});var b0=yr.extend({addHooks:function(){Ee(this._map._container,"leaflet-touch-zoom"),ke(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){yt(this._map._container,"leaflet-touch-zoom"),Xe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(c){var h=this._map;if(!(!c.touches||c.touches.length!==2||h._animatingZoom||this._zooming)){var m=h.mouseEventToContainerPoint(c.touches[0]),y=h.mouseEventToContainerPoint(c.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(m.add(y)._divideBy(2))),this._startDist=m.distanceTo(y),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),ke(document,"touchmove",this._onTouchMove,this),ke(document,"touchend touchcancel",this._onTouchEnd,this),Ht(c)}},_onTouchMove:function(c){if(!(!c.touches||c.touches.length!==2||!this._zooming)){var h=this._map,m=h.mouseEventToContainerPoint(c.touches[0]),y=h.mouseEventToContainerPoint(c.touches[1]),k=m.distanceTo(y)/this._startDist;if(this._zoom=h.getScaleZoom(k,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&k<1||this._zoom>h.getMaxZoom()&&k>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,k===1)return}else{var D=m._add(y)._divideBy(2)._subtract(this._centerPoint);if(k===1&&D.x===0&&D.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(D),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),te(this._animRequest);var W=o(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=H(W,this,!0),Ht(c)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,te(this._animRequest),Xe(document,"touchmove",this._onTouchMove,this),Xe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Fe.addInitHook("addHandler","touchZoom",b0),Fe.BoxZoom=f0,Fe.DoubleClickZoom=m0,Fe.Drag=g0,Fe.Keyboard=x0,Fe.ScrollWheelZoom=v0,Fe.TapHold=y0,Fe.TouchZoom=b0,n.Bounds=K,n.Browser=_e,n.CRS=se,n.Canvas=d0,n.Circle=Fp,n.CircleMarker=nd,n.Class=B,n.Control=sr,n.DivIcon=o0,n.DivOverlay=br,n.DomEvent=SS,n.DomUtil=NS,n.Draggable=ys,n.Evented=V,n.FeatureGroup=Vr,n.GeoJSON=Zr,n.GridLayer=Ko,n.Handler=yr,n.Icon=ya,n.ImageOverlay=od,n.LatLng=le,n.LatLngBounds=Q,n.Layer=ir,n.LayerGroup=va,n.LineUtil=$S,n.Map=Fe,n.Marker=td,n.Mixin=MS,n.Path=bs,n.Point=I,n.PolyUtil=LS,n.Polygon=ba,n.Polyline=qr,n.Popup=ld,n.PosAnimation=Wv,n.Projection=zS,n.Rectangle=p0,n.Renderer=Kr,n.SVG=Qo,n.SVGOverlay=a0,n.TileLayer=wa,n.Tooltip=cd,n.Transformation=fe,n.Util=G,n.VideoOverlay=i0,n.bind=o,n.bounds=re,n.canvas=u0,n.circle=ZS,n.circleMarker=qS,n.control=Vo,n.divIcon=rC,n.extend=s,n.featureGroup=HS,n.geoJSON=s0,n.geoJson=QS,n.gridLayer=sC,n.icon=YS,n.imageOverlay=XS,n.latLng=ae,n.latLngBounds=ie,n.layerGroup=WS,n.map=CS,n.marker=VS,n.point=E,n.polygon=GS,n.polyline=KS,n.popup=tC,n.rectangle=oC,n.setOptions=b,n.stamp=d,n.svg=h0,n.svgOverlay=eC,n.tileLayer=l0,n.tooltip=nC,n.transformation=Ne,n.version=r,n.videoOverlay=JS;var cC=window.L;n.noConflict=function(){return window.L=cC,this},window.L=n})})(Og,Og.exports);var dp=Og.exports;const JN=ms(dp);function ek(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function tk(t,e){return e==null?function(r,s){const a=w.useRef();return a.current||(a.current=t(r,s)),a}:function(r,s){const a=w.useRef();a.current||(a.current=t(r,s));const o=w.useRef(r),{instance:l}=a.current;return w.useEffect(function(){o.current!==r&&(e(l,r,o.current),o.current=r)},[l,r,s]),a}}function QR(t,e){w.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var a;(a=e.layerContainer)==null||a.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function nk(t){return function(n){const r=QN(),s=t(XN(n,r),r);return HR(r.map,n.attribution),GR(s.current,n.eventHandlers),QR(s.current,r),s}}function XR(t,e){const n=tk(t,e),r=nk(n);return ZR(r)}function JR(t,e){const n=tk(t,e),r=nk(n);return KR(r)}function eF(t,e,n){const{opacity:r,zIndex:s}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),s!=null&&s!==n.zIndex&&t.setZIndex(s)}function tF(){return QN().map}function Mg(){return Mg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mg.apply(this,arguments)}function nF({bounds:t,boundsOptions:e,center:n,children:r,className:s,id:a,placeholder:o,style:l,whenReady:d,zoom:u,...p},f){const[x]=w.useState({className:s,id:a,style:l}),[g,v]=w.useState(null);w.useImperativeHandle(f,()=>(g==null?void 0:g.map)??null,[g]);const b=w.useCallback(_=>{if(_!==null&&g===null){const N=new dp.Map(_,p);n!=null&&u!=null?N.setView(n,u):t!=null&&N.fitBounds(t,e),d!=null&&N.whenReady(d),v(VR(N))}},[]);w.useEffect(()=>()=>{g==null||g.map.remove()},[g]);const j=g?q.createElement(GN,{value:g},r):o??null;return q.createElement("div",Mg({},x,{ref:b}),j)}const rF=w.forwardRef(nF),sF=XR(function({position:e,...n},r){const s=new dp.Marker(e,n);return ek(s,qR(r,{overlayContainer:s}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),iF=JR(function({url:e,...n},r){const s=new dp.TileLayer(e,XN(n,r));return ek(s,r)},function(e,n,r){eF(e,n,r);const{url:s}=n;s!=null&&s!==r.url&&e.setUrl(s)});delete JN.Icon.Default.prototype._getIconUrl;JN.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function aF({position:t,onPositionChange:e}){return tF(),i.jsx(sF,{position:t,draggable:!0,eventHandlers:{dragend:n=>{const s=n.target.getLatLng();e(s.lat,s.lng)}}})}function oF({initialLat:t,initialLng:e,onLocationSelect:n}){const a=[t||31.5017,e||34.4668],o=l=>{n(l.latlng.lat,l.latlng.lng)};return i.jsx("div",{className:"w-full h-96 rounded-lg overflow-hidden border border-gray-300",children:i.jsxs(rF,{center:a,zoom:10,style:{height:"100%",width:"100%"},onClick:o,children:[i.jsx(iF,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),i.jsx(aF,{position:a,onPositionChange:n})]})})}function lF({availableAreas:t,selectedAreas:e,onChange:n}){const[r,s]=w.useState(""),[a,o]=w.useState(""),[l,d]=w.useState(!1),u=r?t.filter(v=>v.toLowerCase().includes(r.toLowerCase())):t,p=v=>{const b=e.includes(v)?e.filter(j=>j!==v):[...e,v];n(b)},f=()=>{n(t)},x=()=>{n([])},g=()=>{if(a.trim()){if(t.includes(a.trim())||e.includes(a.trim())){alert("هذه المنطقة موجودة بالفعل");return}n([...e,a.trim()]),o(""),d(!1)}};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[i.jsx("input",{type:"text",value:r,onChange:v=>s(v.target.value),placeholder:"بحث عن منطقة...",className:"flex-1 border rounded-md px-3 py-2"}),i.jsx("button",{type:"button",onClick:f,className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200",children:"تحديد الكل"}),i.jsx("button",{type:"button",onClick:x,className:"px-3 py-2 bg-red-100 text-red-700 rounded-md hover:bg-red-200",children:"إلغاء الكل"})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 max-h-60 overflow-y-auto border rounded-md p-4",children:u.length>0?u.map(v=>i.jsxs("label",{className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded",children:[i.jsx("input",{type:"checkbox",checked:e.includes(v),onChange:()=>p(v),className:"rounded text-blue-600"}),i.jsx("span",{children:v})]},v)):i.jsxs("div",{className:"col-span-full text-center py-4 text-gray-500",children:["لا توجد مناطق متطابقة مع البحث",i.jsx("button",{type:"button",onClick:()=>d(!0),className:"block mx-auto mt-2 text-blue-600 hover:text-blue-800",children:"إضافة منطقة جديدة"})]})}),l&&i.jsxs("div",{className:"mt-4 p-4 border rounded-md bg-gray-50",children:[i.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"إضافة منطقة خدمة جديدة"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:a,onChange:v=>o(v.target.value),placeholder:"اسم المنطقة الجديدة...",className:"flex-1 border rounded-md px-3 py-2"}),i.jsx("button",{type:"button",onClick:g,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"إضافة"}),i.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"إلغاء"})]})]}),!l&&i.jsx("div",{className:"flex justify-center",children:i.jsxs("button",{type:"button",onClick:()=>d(!0),className:"px-4 py-2 text-blue-600 hover:text-blue-800 flex items-center",children:[i.jsx("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"إضافة منطقة خدمة جديدة"]})}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("h4",{className:"font-medium text-gray-700 mb-2",children:["المناطق المحددة (",e.length,")"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:e.length>0?e.map(v=>i.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm flex items-center",children:[v,i.jsx("button",{type:"button",onClick:()=>p(v),className:"ml-1 text-blue-600 hover:text-blue-800",children:"×"})]},v)):i.jsx("span",{className:"text-gray-500",children:"لم يتم تحديد أي منطقة"})})]})]})}function cF({availableCategories:t,selectedCategories:e,onChange:n,loading:r}){const[s,a]=w.useState(""),o=s?t.filter(d=>d.name.toLowerCase().includes(s.toLowerCase())):t,l=d=>{const u=e.includes(d)?e.filter(p=>p!==d):[...e,d];n(u)};return i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"flex items-center space-x-2 mb-4",children:i.jsx("input",{type:"text",value:s,onChange:d=>a(d.target.value),placeholder:"بحث عن تصنيف...",className:"flex-1 border rounded-md px-3 py-2"})}),r?i.jsx("div",{className:"flex justify-center items-center h-40",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-60 overflow-y-auto border rounded-md p-4",children:o.length>0?o.map(d=>i.jsxs("label",{className:"flex items-center space-x-2 p-2 hover:bg-gray-50 rounded",children:[i.jsx("input",{type:"checkbox",checked:e.includes(d.id),onChange:()=>l(d.id),className:"rounded text-blue-600"}),i.jsx("span",{children:d.name})]},d.id)):i.jsx("div",{className:"col-span-full text-center py-4 text-gray-500",children:"لا توجد تصنيفات متطابقة مع البحث"})}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("h4",{className:"font-medium text-gray-700 mb-2",children:["التصنيفات المحددة (",e.length,")"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:e.length>0?e.map(d=>{const u=t.find(p=>p.id===d);return i.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm flex items-center",children:[u?u.name:"تصنيف غير معروف",i.jsx("button",{type:"button",onClick:()=>l(d),className:"ml-1 text-blue-600 hover:text-blue-800",children:"×"})]},d)}):i.jsx("span",{className:"text-gray-500",children:"لم يتم تحديد أي تصنيف"})})]})]})]})}function rk({onSubmit:t,initialData:e=null}){const[n,r]=w.useState({store_name:"",phone:"",address:"",description:"",delivery_type:"distance",delivery_radius:5,price_per_km:2,min_delivery_fee:5,delivery_fee_per_km:1,status:"active",logo_url:"",banner_url:"",commission_rate:10,wallet_enabled:!1,auto_charge:!1,service_areas:[],categories:[],latitude:null,longitude:null,membership:{type:"basic",expires_at:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString().split("T")[0],commission_rate:10},featured:!1,featured_until:new Date(new Date().setMonth(new Date().getMonth()+1)).toISOString().split("T")[0],featured_order:1,...e}),[s,a]=w.useState([]),[o,l]=w.useState(!0),[d,u]=w.useState(Date.now()),p=["رام الله","البيرة","نابلس","جنين","طولكرم","قلقيلية","طوباس","سلفيت","أريحا","بيت لحم","الخليل","بيت جالا","بيت ساحور","بيرزيت","الظاهرية","دورا","يطا","عنبتا","بيت فجار","بديا","عزون","بيت أمر","حلحول","سعير","ترقوميا","عرابة","يعبد","قباطية","طمون","عقابا","بيت فوريك","عصيرة الشمالية","بيتا","حوارة","سبسطية","عقربا"];w.useEffect(()=>{(async()=>{try{l(!0);const{data:N,error:S}=await ee.from("categories").select("*").order("name");if(S)throw S;a(N||[])}catch(N){console.error("Error fetching categories:",N),z.error("فشل في تحميل التصنيفات")}finally{l(!1)}})()},[]);const f=async _=>{_.preventDefault();try{if(!n.store_name||!n.phone||!n.address){z.error("الرجاء تعبئة جميع الحقول المطلوبة");return}if(n.delivery_type==="distance"&&(!n.delivery_radius||!n.price_per_km)){z.error("الرجاء تعبئة نطاق التوصيل وسعر الكيلومتر");return}if(!n.membership.expires_at){z.error("الرجاء تحديد تاريخ انتهاء العضوية");return}if(n.categories.length===0){z.error("الرجاء اختيار تصنيف واحد على الأقل");return}const N={...n};n.featured?(N.featured_until=n.featured_until,N.featured_order=n.featured_order):(N.featured_until=null,N.featured_order=null),t(_,N)}catch(N){console.error("Error submitting form:",N),z.error("حدث خطأ أثناء حفظ البيانات")}},x=(_,N)=>{r({...n,latitude:_,longitude:N}),u(Date.now())},g=_=>{r({...n,service_areas:_})},v=_=>{r({...n,categories:_})},b=({preview:_})=>{_&&r({...n,logo_url:_})},j=({preview:_})=>{_&&r({...n,banner_url:_})};return i.jsxs("form",{onSubmit:f,className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"بيانات المتجر"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم المتجر ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:n.store_name,onChange:_=>r({...n,store_name:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["رقم الهاتف ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"tel",value:n.phone,onChange:_=>r({...n,phone:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["العنوان ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:n.address,onChange:_=>r({...n,address:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"وصف المتجر"}),i.jsx("textarea",{value:n.description,onChange:_=>r({...n,description:_.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"صورة اللوجو"}),i.jsx(ps,{type:"image",preview:n.logo_url,onUpload:b,storeInSupabase:!0,bucket:Lt.VENDORS,folder:"logos"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"صورة الغلاف"}),i.jsx(ps,{type:"image",preview:n.banner_url,onUpload:j,storeInSupabase:!0,bucket:Lt.VENDORS,folder:"banners"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"تصنيف المتجر"}),i.jsx("div",{className:"mb-4",children:i.jsx(cF,{availableCategories:s,selectedCategories:n.categories,onChange:v,loading:o})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"حالة المتجر"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الحالة ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:n.status,onChange:_=>r({...n,status:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"active",children:"نشط"}),i.jsx("option",{value:"inactive",children:"غير نشط"}),i.jsx("option",{value:"pending",children:"معلق"}),i.jsx("option",{value:"suspended",children:"موقوف"}),i.jsx("option",{value:"busy",children:"مشغول"})]})]}),i.jsx("div",{children:i.jsxs("label",{className:"flex items-center space-x-2 mt-8",children:[i.jsx("input",{type:"checkbox",checked:n.featured,onChange:_=>r({...n,featured:_.target.checked}),className:"rounded text-blue-600"}),i.jsx("span",{children:"متجر مميز"})]})}),n.featured&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ انتهاء التمييز"}),i.jsx("input",{type:"date",value:n.featured_until,onChange:_=>r({...n,featured_until:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:n.featured})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ترتيب العرض (الأقل = الأعلى)"}),i.jsx("input",{type:"number",value:n.featured_order,onChange:_=>r({...n,featured_order:parseInt(_.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"1",required:n.featured})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"موقع المتجر"}),i.jsxs("div",{className:"mb-4",children:[i.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"حدد موقع المتجر على الخريطة بالنقر على المكان المناسب"}),i.jsx(oF,{initialLat:n.latitude,initialLng:n.longitude,onLocationSelect:x},d)]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"خط العرض"}),i.jsx("input",{type:"text",value:n.latitude||"",onChange:_=>r({...n,latitude:parseFloat(_.target.value)}),className:"w-full border rounded-md px-3 py-2",placeholder:"مثال: 31.5017"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"خط الطول"}),i.jsx("input",{type:"text",value:n.longitude||"",onChange:_=>r({...n,longitude:parseFloat(_.target.value)}),className:"w-full border rounded-md px-3 py-2",placeholder:"مثال: 34.4668"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"إعدادات التوصيل"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نوع التوصيل ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:n.delivery_type,onChange:_=>r({...n,delivery_type:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"distance",children:"حسب المسافة"}),i.jsx("option",{value:"fixed",children:"سعر ثابت"}),i.jsx("option",{value:"zones",children:"مناطق"})]})]}),n.delivery_type==="distance"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نطاق التوصيل (كم) ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:n.delivery_radius,onChange:_=>r({...n,delivery_radius:Number(_.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.1",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["سعر الكيلومتر (₪) ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:n.price_per_km,onChange:_=>r({...n,price_per_km:Number(_.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.1",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأدنى لتكلفة التوصيل (₪)"}),i.jsx("input",{type:"number",value:n.min_delivery_fee,onChange:_=>r({...n,min_delivery_fee:Number(_.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تكلفة التوصيل لكل كيلومتر (₪)"}),i.jsx("input",{type:"number",value:n.delivery_fee_per_km,onChange:_=>r({...n,delivery_fee_per_km:Number(_.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.1"})]})]}),n.delivery_type==="fixed"&&i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["سعر التوصيل الثابت (₪) ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:n.min_delivery_fee,onChange:_=>r({...n,min_delivery_fee:Number(_.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.1",required:!0})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"مناطق الخدمة"}),i.jsx(lF,{availableAreas:p,selectedAreas:n.service_areas,onChange:g})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"إعدادات العضوية"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نوع العضوية ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:n.membership.type,onChange:_=>r({...n,membership:{...n.membership,type:_.target.value}}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"basic",children:"أساسية"}),i.jsx("option",{value:"premium",children:"مميزة"}),i.jsx("option",{value:"gold",children:"ذهبية"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نسبة العمولة (%) ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:n.membership.commission_rate,onChange:_=>r({...n,membership:{...n.membership,commission_rate:Number(_.target.value)}}),className:"w-full border rounded-md px-3 py-2",min:"0",max:"100",step:"0.1",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["تاريخ انتهاء العضوية ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"date",value:n.membership.expires_at,onChange:_=>r({...n,membership:{...n.membership,expires_at:_.target.value}}),className:"w-full border rounded-md px-3 py-2",required:!0})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"إعدادات إضافية"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نسبة العمولة (%) ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:n.commission_rate,onChange:_=>r({...n,commission_rate:Number(_.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",max:"100",step:"0.1",required:!0})]}),i.jsx("div",{children:i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",checked:n.wallet_enabled,onChange:_=>r({...n,wallet_enabled:_.target.checked}),className:"rounded text-blue-600"}),i.jsx("span",{children:"تفعيل المحفظة"})]})}),n.wallet_enabled&&i.jsx("div",{children:i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",checked:n.auto_charge,onChange:_=>r({...n,auto_charge:_.target.checked}),className:"rounded text-blue-600"}),i.jsx("span",{children:"تفعيل الشحن التلقائي"})]})})]})]}),i.jsx("div",{className:"flex justify-end space-x-2",children:i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:e?"تحديث":"إضافة"})})]})}const dF=async()=>{try{const{data:t,error:e}=await ee.from("vendors").select("*").order("created_at",{ascending:!1});if(e)throw e;return t||[]}catch(t){throw console.error("Error fetching vendors:",t),t}},uF=async(t,e)=>{try{const{data:n,error:r}=await ee.from("vendors").update({store_name:e.store_name,phone:e.phone,address:e.address,description:e.description,delivery_type:e.delivery_type,delivery_radius:e.delivery_radius,price_per_km:e.price_per_km,min_delivery_fee:e.min_delivery_fee,delivery_fee_per_km:e.delivery_fee_per_km,latitude:e.latitude,longitude:e.longitude,status:e.status,logo_url:e.logo_url,banner_url:e.banner_url,commission_rate:e.commission_rate,wallet_enabled:e.wallet_enabled,auto_charge:e.auto_charge,service_areas:e.service_areas,membership:e.membership,updated_at:new Date().toISOString()}).eq("id",t).select();if(r)throw r;return n[0]}catch(n){throw console.error("Error updating vendor:",n),n}},hF=async t=>{try{const{error:e}=await ee.from("vendors").delete().eq("id",t);if(e)throw e;return!0}catch(e){throw console.error("Error deleting vendor:",e),e}};function pF(){const[t,e]=w.useState([]),[n,r]=w.useState([]),[s,a]=w.useState(!0),[o,l]=w.useState(null),[d,u]=w.useState(!1),[p,f]=w.useState(null),[x,g]=w.useState("grid"),[v,b]=w.useState({store_name:"",phone:"",address:"",delivery_type:"distance",delivery_radius:5,price_per_km:2,status:"active",logo_url:"",banner_url:"",categories:[],wallet_enabled:!1,auto_charge:!1,service_areas:[],latitude:null,longitude:null,membership:{type:"basic",expires_at:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString().split("T")[0],commission_rate:10},featured:!1,featured_until:new Date(new Date().setMonth(new Date().getMonth()+1)).toISOString().split("T")[0],featured_order:1});w.useEffect(()=>{j()},[]);const j=async()=>{try{a(!0),l(null);const{data:C,error:V}=await ee.from("vendors").select("*").order("created_at",{ascending:!1});if(V)throw V;e(C||[]);const{data:I,error:X}=await ee.from("categories").select("*").order("name");if(X)throw X;r(I||[])}catch(C){console.error("Error fetching data:",C),l("فشل في تحميل البيانات. الرجاء المحاولة مرة أخرى."),z.error("فشل في تحميل البيانات")}finally{a(!1)}},_={store_name:{type:"text",label:"اسم المتجر",placeholder:"البحث باسم المتجر",value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"active",label:"مفتوح"},{value:"inactive",label:"مغلق"},{value:"busy",label:"مشغول"},{value:"pending",label:"معلق"},{value:"suspended",label:"موقوف"}],value:""},delivery_type:{type:"select",label:"نوع التوصيل",placeholder:"جميع الأنواع",options:[{value:"distance",label:"حسب المسافة"},{value:"fixed",label:"سعر ثابت"},{value:"zones",label:"مناطق"}],value:""},featured:{type:"select",label:"التمييز",placeholder:"الكل",options:[{value:"true",label:"مميز"},{value:"false",label:"غير مميز"}],value:""}},{filters:N,filterData:S,handleFilterChange:P}=Fn(_),M=async(C,V)=>{C.preventDefault();try{if(!V.store_name||!V.phone||!V.address){z.error("الرجاء تعبئة جميع الحقول المطلوبة");return}if(V.delivery_type==="distance"&&(!V.delivery_radius||!V.price_per_km)){z.error("الرجاء تعبئة نطاق التوصيل وسعر الكيلومتر");return}if(V.categories.length===0){z.error("الرجاء اختيار تصنيف واحد على الأقل");return}if(!V.membership.expires_at){z.error("الرجاء تحديد تاريخ انتهاء العضوية");return}if(p)await uF(p.id,V),z.success("تم تحديث البائع بنجاح");else{const{data:I,error:X}=await ee.from("vendors").insert([V]).select();if(X)throw X;z.success("تم إضافة البائع بنجاح")}j(),u(!1),f(null),b({store_name:"",phone:"",address:"",delivery_type:"distance",delivery_radius:5,price_per_km:2,status:"active",logo_url:"",banner_url:"",categories:[],wallet_enabled:!1,auto_charge:!1,service_areas:[],latitude:null,longitude:null,membership:{type:"basic",expires_at:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString().split("T")[0],commission_rate:10},featured:!1,featured_until:new Date(new Date().setMonth(new Date().getMonth()+1)).toISOString().split("T")[0],featured_order:1})}catch(I){console.error("Error saving vendor:",I),z.error(p?"فشل في تحديث البائع":"فشل في إضافة البائع")}},R=async C=>{if(window.confirm("هل أنت متأكد من حذف هذا البائع؟"))try{a(!0),await hF(C),e(t.filter(V=>V.id!==C)),z.success("تم حذف البائع بنجاح"),j()}catch(V){console.error("Error deleting vendor:",V),z.error("فشل في حذف البائع")}finally{a(!1)}},A=async(C,V)=>{try{a(!0);const{error:I}=await ee.rpc("update_vendor_status",{p_vendor_id:C,p_status:V});if(I)throw I;e(t.map(X=>X.id===C?{...X,status:V}:X)),z.success(`تم تغيير حالة البائع إلى ${Y(V)}`)}catch(I){console.error("Error updating vendor status:",I),z.error("فشل في تحديث حالة البائع")}finally{a(!1)}},T=C=>{switch(C){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"busy":return"bg-yellow-100 text-yellow-800";case"pending":return"bg-blue-100 text-blue-800";case"suspended":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},Y=C=>{switch(C){case"active":return"مفتوح";case"inactive":return"مغلق";case"busy":return"مشغول";case"pending":return"معلق";case"suspended":return"موقوف";default:return C}},O=C=>{switch(C){case"distance":return"حسب المسافة";case"fixed":return"سعر ثابت";case"zones":return"مناطق";default:return C}},H=C=>{if(!C)return"bg-gray-100 text-gray-800";switch(C){case"gold":return"bg-yellow-100 text-yellow-800";case"premium":return"bg-purple-100 text-purple-800";case"basic":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},te=C=>{if(!C)return"أساسية";switch(C){case"gold":return"ذهبية";case"premium":return"مميزة";case"basic":return"أساسية";default:return C}},G=S(t),B=()=>i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:G.map(C=>{var V,I,X;return i.jsxs("div",{className:`bg-white rounded-lg shadow-md overflow-hidden ${C.featured?"ring-2 ring-yellow-500":""}`,children:[C.featured&&i.jsxs("div",{className:"bg-yellow-500 text-white px-4 py-1 text-sm text-center",children:["متجر مميز حتى ",new Date(C.featured_until).toLocaleDateString("ar-SA")]}),C.banner_url&&i.jsx("img",{src:C.banner_url,alt:`${C.store_name} banner`,className:"w-full h-32 object-cover",onError:E=>{E.target.onerror=null,E.target.src="https://via.placeholder.com/400x150?text=Banner"}}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[C.logo_url&&i.jsx("img",{src:C.logo_url,alt:`${C.store_name} logo`,className:"w-16 h-16 rounded-full object-cover",onError:E=>{E.target.onerror=null,E.target.src="https://via.placeholder.com/80?text=Logo"}}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold",children:C.store_name}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsxs("div",{className:"relative inline-block",children:[i.jsxs("select",{value:C.status,onChange:E=>A(C.id,E.target.value),className:`px-2 py-1 text-sm rounded-full ${T(C.status)} appearance-none pr-8 cursor-pointer`,children:[i.jsx("option",{value:"active",children:"مفتوح"}),i.jsx("option",{value:"inactive",children:"مغلق"}),i.jsx("option",{value:"busy",children:"مشغول"}),i.jsx("option",{value:"pending",children:"معلق"}),i.jsx("option",{value:"suspended",children:"موقوف"})]}),i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-2",children:i.jsx("svg",{className:"h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),i.jsx("span",{className:`px-2 py-1 text-sm rounded-full ${H((V=C.membership)==null?void 0:V.type)}`,children:te((I=C.membership)==null?void 0:I.type)}),i.jsxs("span",{className:"text-yellow-500",children:["★ ",C.rating]}),i.jsxs("span",{className:"text-gray-500",children:["(",C.rating_count,")"]})]})]})]}),i.jsxs("div",{className:"mt-4 space-y-2",children:[i.jsx("p",{className:"text-gray-600",children:C.address}),i.jsx("p",{className:"text-gray-600",children:C.phone}),i.jsx("div",{className:"flex flex-wrap gap-2",children:(X=C.categories)==null?void 0:X.map(E=>{const K=n.find(re=>re.id===E);return K?i.jsx("span",{className:"bg-blue-100 text-blue-800 text-sm px-2 py-1 rounded-full",children:K.name},K.id):null})})]}),i.jsx("div",{className:"mt-4 pt-4 border-t",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500",children:"نوع التوصيل"}),i.jsx("p",{className:"font-medium",children:O(C.delivery_type)})]}),C.delivery_type==="distance"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500",children:"سعر الكيلومتر"}),i.jsxs("p",{className:"font-medium",children:["₪",C.price_per_km]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500",children:"نطاق التوصيل"}),i.jsxs("p",{className:"font-medium",children:[C.delivery_radius," كم"]})]})]})]})}),i.jsx("div",{className:"mt-4 pt-4 border-t",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500",children:"المحفظة"}),i.jsx("p",{className:"font-medium",children:C.wallet_enabled?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-green-600",children:"مفعلة"}),i.jsxs("span",{className:"text-gray-600 mr-2",children:["(₪",C.wallet_balance||0,")"]})]}):i.jsx("span",{className:"text-red-600",children:"غير مفعلة"})})]}),C.wallet_enabled&&i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500",children:"الشحن التلقائي"}),i.jsx("p",{className:"font-medium",children:C.auto_charge?i.jsx("span",{className:"text-green-600",children:"مفعل"}):i.jsx("span",{className:"text-red-600",children:"غير مفعل"})})]})]})}),i.jsxs("div",{className:"mt-4 pt-4 border-t",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"مناطق الخدمة"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:C.service_areas&&C.service_areas.length>0?C.service_areas.map((E,K)=>i.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:E},K)):i.jsx("span",{className:"text-gray-500",children:"لا توجد مناطق خدمة محددة"})})]}),i.jsxs("div",{className:"mt-4 pt-4 border-t flex justify-end space-x-2",children:[i.jsx("button",{onClick:()=>{f(C),b({...C,categories:C.categories||[]}),u(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),i.jsx("button",{onClick:()=>R(C.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]})]},C.id)})}),Z=()=>i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المتجر"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التقييم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العنوان"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التصنيفات"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التوصيل"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المحفظة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العضوية"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"مناطق الخدمة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:G.map(C=>{var V,I,X,E;return i.jsxs("tr",{className:C.featured?"bg-yellow-50":"",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[C.logo_url&&i.jsx("img",{src:C.logo_url,alt:C.store_name,className:"w-10 h-10 rounded-full object-cover ml-3",onError:K=>{K.target.onerror=null,K.target.src="https://via.placeholder.com/40?text=Logo"}}),i.jsxs("div",{children:[i.jsxs("div",{className:"font-medium text-gray-900",children:[C.store_name,C.featured&&i.jsx("span",{className:"mr-2 text-yellow-500 text-sm",children:"(مميز)"})]}),i.jsx("div",{className:"text-gray-500",children:C.phone})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-yellow-500",children:"★"}),i.jsx("span",{className:"ml-1",children:C.rating}),i.jsxs("span",{className:"text-gray-500 ml-1",children:["(",C.rating_count,")"]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:C.address}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"flex flex-wrap gap-1",children:(V=C.categories)==null?void 0:V.map(K=>{const re=n.find(Q=>Q.id===K);return re?i.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:re.name},re.id):null})})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:O(C.delivery_type)}),C.delivery_type==="distance"&&i.jsxs("div",{className:"text-sm text-gray-500",children:[C.delivery_radius," كم - ₪",C.price_per_km,"/كم"]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{children:i.jsx("div",{className:"text-sm font-medium",children:C.wallet_enabled?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-green-600",children:"مفعلة"}),i.jsxs("div",{className:"text-sm text-gray-500",children:["₪",C.wallet_balance||0]})]}):i.jsx("span",{className:"text-red-600",children:"غير مفعلة"})})})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{children:[i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${H((I=C.membership)==null?void 0:I.type)}`,children:te((X=C.membership)==null?void 0:X.type)}),i.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[((E=C.membership)==null?void 0:E.commission_rate)||10,"%"]})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"flex flex-wrap gap-1",children:[C.service_areas&&C.service_areas.length>0?C.service_areas.slice(0,3).map((K,re)=>i.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:K},re)):i.jsx("span",{className:"text-gray-500",children:"-"}),C.service_areas&&C.service_areas.length>3&&i.jsxs("span",{className:"text-gray-500 text-xs",children:["+",C.service_areas.length-3]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"relative inline-block",children:[i.jsxs("select",{value:C.status,onChange:K=>A(C.id,K.target.value),className:`px-2 py-1 text-xs rounded-full ${T(C.status)} appearance-none pr-8 cursor-pointer`,children:[i.jsx("option",{value:"active",children:"مفتوح"}),i.jsx("option",{value:"inactive",children:"مغلق"}),i.jsx("option",{value:"busy",children:"مشغول"}),i.jsx("option",{value:"pending",children:"معلق"}),i.jsx("option",{value:"suspended",children:"موقوف"})]}),i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-2",children:i.jsx("svg",{className:"h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[i.jsx("button",{onClick:()=>{f(C),b({...C,categories:C.categories||[]}),u(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),i.jsx("button",{onClick:()=>R(C.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},C.id)})})]})})});return s?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:o}),i.jsx("button",{onClick:j,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"البائعين"}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>g("grid"),className:`px-3 py-1 rounded ${x==="grid"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض شبكي"}),i.jsx("button",{onClick:()=>g("table"),className:`px-3 py-1 rounded ${x==="table"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض جدول"})]}),i.jsx("button",{onClick:()=>{f(null),b({store_name:"",phone:"",address:"",delivery_type:"distance",delivery_radius:5,price_per_km:2,status:"active",logo_url:"",banner_url:"",categories:[],wallet_enabled:!1,auto_charge:!1,service_areas:[],latitude:null,longitude:null,membership:{type:"basic",expires_at:new Date(new Date().setFullYear(new Date().getFullYear()+1)).toISOString().split("T")[0],commission_rate:10},featured:!1,featured_until:new Date(new Date().setMonth(new Date().getMonth()+1)).toISOString().split("T")[0],featured_order:1}),u(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة بائع جديد"})]})]}),i.jsx(Rn,{filters:N,onFilterChange:P}),x==="grid"?B():Z(),d&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-start justify-center min-h-screen",children:[i.jsx("div",{className:"fixed inset-0 bg-black opacity-30",onClick:()=>u(!1)}),i.jsxs("div",{className:"relative bg-white w-full min-h-screen",children:[i.jsx("div",{className:"sticky top-0 bg-white border-b z-10",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:p?"تعديل بائع":"إضافة بائع جديد"}),i.jsx("button",{onClick:()=>{u(!1),f(null)},className:"p-2 rounded-full hover:bg-gray-100",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:i.jsx(rk,{onSubmit:M,initialData:p})})]})]})})]})}function fF(){const[t,e]=w.useState(!1),n=async(a,o)=>{a.preventDefault();try{e(!0);const l=await r({username:o.store_name.replace(/\s+/g,"_").toLowerCase(),password:"password123",name:o.store_name,email:o.email||null,phone:o.phone,role:"vendor"});if(!l)throw new Error("فشل في إنشاء المستخدم المخصص");const{data:d,error:u}=await ee.from("vendors").insert([{user_id:l,store_name:o.store_name,phone:o.phone,address:o.address,description:o.description,delivery_type:o.delivery_type,delivery_radius:o.delivery_radius,price_per_km:o.price_per_km,min_delivery_fee:o.min_delivery_fee,delivery_fee_per_km:o.delivery_fee_per_km,latitude:o.latitude,longitude:o.longitude,status:o.status,logo_url:o.logo_url,banner_url:o.banner_url,commission_rate:o.commission_rate,wallet_enabled:o.wallet_enabled,auto_charge:o.auto_charge,service_areas:o.service_areas,membership:o.membership}]).select();if(u)throw u;if(o.categories.length>0){const p=d[0].id,f=o.categories.map(g=>({vendor_id:p,category_id:g})),{error:x}=await ee.from("vendor_categories").insert(f);x&&console.error("Error linking categories:",x)}z.success("تم إضافة البائع بنجاح")}catch(l){console.error("Error adding vendor:",l),z.error(l.message||"فشل في إضافة البائع")}finally{e(!1)}},r=async a=>{try{const{data:o,error:l}=await ee.from("custom_users").select("id").eq("username",a.username).maybeSingle();if(l)throw l;o&&(a.username=`${a.username}_${Math.floor(Math.random()*1e3)}`);const{data:d,error:u}=await ee.rpc("add_custom_user",{p_username:a.username,p_password:a.password,p_name:a.name,p_email:a.email,p_phone:a.phone,p_role:a.role});if(u)throw u;return d}catch(o){console.error("Error adding custom user:",o);try{const l=zr(),{error:d}=await ee.from("custom_users").insert([{id:l,username:a.username,password:a.password,password_hash:await s(a.password),name:a.name,email:a.email,phone:a.phone,role:a.role,status:"active"}]);if(d)throw d;return l}catch(l){throw console.error("Fallback error adding custom user:",l),l}}},s=async a=>{const l=new TextEncoder().encode(a),d=await crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(d)).map(f=>f.toString(16).padStart(2,"0")).join("")};return i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"إضافة بائع جديد"}),i.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:i.jsx(rk,{onSubmit:n})}),i.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-6 rounded-lg",children:[i.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-4",children:"ملاحظات هامة"}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-blue-700",children:[i.jsx("li",{children:"سيتم إنشاء حساب مستخدم مخصص للبائع تلقائيًا."}),i.jsx("li",{children:'كلمة المرور الافتراضية هي "password123" ويجب تغييرها بعد الإنشاء.'}),i.jsx("li",{children:"تأكد من تحديد موقع المتجر بدقة على الخريطة لضمان دقة حسابات التوصيل."}),i.jsx("li",{children:"يمكن للبائع تحديث بياناته لاحقًا من خلال لوحة التحكم الخاصة به."}),i.jsx("li",{children:"تأكد من اختيار مناطق الخدمة المناسبة للبائع."}),i.jsx("li",{children:"يجب اختيار تصنيف واحد على الأقل للبائع."})]})]})]})}function mF(){const[t,e]=w.useState([]),[n,r]=w.useState(!0),[s,a]=w.useState(null),[o,l]=w.useState(!1),[d,u]=w.useState(null),[p,f]=w.useState({name:"",phone:"",email:"",status:"offline",commission_rate:15,vehicle_type:"motorcycle",vehicle_model:"",vehicle_year:"",vehicle_plate:"",working_areas:[]}),x=["رام الله","البيرة","نابلس","جنين","طولكرم","قلقيلية","طوباس","سلفيت","أريحا","بيت لحم","الخليل","بيت جالا","بيت ساحور","بيرزيت","الظاهرية","دورا","يطا","عنبتا","بيت فجار","بديا","عزون"];w.useEffect(()=>{g()},[]);const g=async()=>{try{r(!0),a(null);const{data:T,error:Y}=await ee.from("drivers").select(`
          *,
          user:user_id(*)
        `).order("created_at",{ascending:!1});if(Y)throw Y;e(T||[])}catch(T){console.error("Error fetching drivers:",T),a("فشل في تحميل بيانات السائقين. الرجاء المحاولة مرة أخرى."),z.error("فشل في تحميل بيانات السائقين"),e([{id:1,name:"خالد أحمد",phone:"0599123456",email:"khaled@example.com",status:"active",rating:4.8,rating_count:156,total_orders:230,completed_orders:220,cancelled_orders:10,commission_rate:15,wallet_balance:450,vehicle:{type:"motorcycle",model:"هوندا",year:"2022",plate_number:"1234-H"},working_areas:["رام الله","البيرة","نابلس"]},{id:2,name:"محمد علي",phone:"0599234567",email:"mohammad@example.com",status:"active",rating:4.5,rating_count:98,total_orders:180,completed_orders:170,cancelled_orders:10,commission_rate:15,wallet_balance:320,vehicle:{type:"car",model:"تويوتا",year:"2020",plate_number:"5678-T"},working_areas:["جنين","طولكرم","قلقيلية"]},{id:3,name:"أحمد محمود",phone:"0599345678",email:"ahmad@example.com",status:"inactive",rating:4.2,rating_count:75,total_orders:120,completed_orders:110,cancelled_orders:10,commission_rate:15,wallet_balance:200,vehicle:{type:"motorcycle",model:"سوزوكي",year:"2021",plate_number:"9012-S"},working_areas:["بيت لحم","الخليل"]}])}finally{r(!1)}},v={name:{type:"text",label:"اسم السائق",placeholder:"البحث باسم السائق",value:""},phone:{type:"text",label:"رقم الهاتف",placeholder:"البحث برقم الهاتف",value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"offline",label:"غير متصل"},{value:"available",label:"متاح"},{value:"busy",label:"مشغول"}],value:""},vehicle_type:{type:"select",label:"نوع المركبة",placeholder:"جميع الأنواع",options:[{value:"motorcycle",label:"دراجة نارية"},{value:"car",label:"سيارة"},{value:"bicycle",label:"دراجة هوائية"}],value:""}},{filters:b,filterData:j,handleFilterChange:_}=Fn(v),N=async T=>{T.preventDefault();try{if(!p.name||!p.phone){z.error("الرجاء تعبئة جميع الحقول المطلوبة");return}if(d){const{error:Y}=await ee.from("drivers").update({name:p.name,phone:p.phone,email:p.email,status:p.status,commission_rate:p.commission_rate,vehicle_type:p.vehicle_type,vehicle_model:p.vehicle_model,vehicle_year:p.vehicle_year,vehicle_plate:p.vehicle_plate,working_areas:p.working_areas}).eq("id",d.id);if(Y)throw Y;z.success("تم تحديث السائق بنجاح")}else{const{error:Y}=await ee.from("drivers").insert([{name:p.name,phone:p.phone,email:p.email,status:p.status,commission_rate:p.commission_rate,vehicle_type:p.vehicle_type,vehicle_model:p.vehicle_model,vehicle_year:p.vehicle_year,vehicle_plate:p.vehicle_plate,working_areas:p.working_areas}]);if(Y)throw Y;z.success("تم إضافة السائق بنجاح")}g(),l(!1),u(null),f({name:"",phone:"",email:"",status:"offline",commission_rate:15,vehicle_type:"motorcycle",vehicle_model:"",vehicle_year:"",vehicle_plate:"",working_areas:[]})}catch(Y){console.error("Error saving driver:",Y),z.error(d?"فشل في تحديث السائق":"فشل في إضافة السائق")}},S=async T=>{if(window.confirm("هل أنت متأكد من حذف هذا السائق؟"))try{const{error:Y}=await ee.from("drivers").delete().eq("id",T);if(Y)throw Y;z.success("تم حذف السائق بنجاح"),g()}catch(Y){console.error("Error deleting driver:",Y),z.error("فشل في حذف السائق")}},P=T=>{switch(T){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"available":return"bg-green-100 text-green-800";case"busy":return"bg-yellow-100 text-yellow-800";case"offline":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},M=T=>{switch(T){case"active":return"نشط";case"inactive":return"غير نشط";case"available":return"متاح";case"busy":return"مشغول";case"offline":return"غير متصل";default:return T}},R=T=>{switch(T){case"motorcycle":return"دراجة نارية";case"car":return"سيارة";case"bicycle":return"دراجة هوائية";default:return T}},A=j(t);return n&&t.length===0?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:s}),i.jsx("button",{onClick:g,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"السائقين"}),i.jsx("button",{onClick:()=>{u(null),f({name:"",phone:"",email:"",status:"offline",commission_rate:15,vehicle_type:"motorcycle",vehicle_model:"",vehicle_year:"",vehicle_plate:"",working_areas:[]}),l(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة سائق جديد"})]}),i.jsx(Rn,{filters:b,onFilterChange:_}),i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"السائق"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التقييم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الطلبات"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العمولة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المركبة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"مناطق العمل"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:"لا يوجد سائقين متطابقين مع معايير البحث"})}):A.map(T=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:T.name}),i.jsxs("div",{className:"text-sm text-gray-500",children:[i.jsx("div",{children:T.phone}),i.jsx("div",{children:T.email})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-yellow-500",children:"★"}),i.jsx("span",{className:"ml-1",children:T.rating}),i.jsxs("span",{className:"text-gray-500 ml-1",children:["(",T.rating_count,")"]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{children:[i.jsxs("div",{className:"text-sm",children:["الكل: ",T.total_orders||0]}),i.jsxs("div",{className:"text-sm text-green-600",children:["مكتمل: ",T.completed_orders||0]}),i.jsxs("div",{className:"text-sm text-red-600",children:["ملغي: ",T.cancelled_orders||0]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{children:[i.jsxs("div",{className:"text-sm font-medium",children:[T.commission_rate,"%"]}),i.jsxs("div",{className:"text-sm text-gray-500",children:["الرصيد: ₪",T.wallet_balance||0]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium",children:R(T.vehicle_type)}),i.jsxs("div",{className:"text-sm text-gray-500",children:[T.vehicle_model," ",T.vehicle_year]}),i.jsx("div",{className:"text-sm text-gray-500",children:T.vehicle_plate})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"flex flex-wrap gap-1",children:T.working_areas&&T.working_areas.length>0?T.working_areas.map((Y,O)=>i.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:Y},O)):i.jsx("span",{className:"text-gray-500",children:"-"})})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${P(T.status)}`,children:M(T.status)})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[i.jsx("button",{onClick:()=>{u(T),f({name:T.name,phone:T.phone,email:T.email,status:T.status,commission_rate:T.commission_rate,vehicle_type:T.vehicle_type,vehicle_model:T.vehicle_model,vehicle_year:T.vehicle_year,vehicle_plate:T.vehicle_plate,working_areas:T.working_areas||[]}),l(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),i.jsx("button",{onClick:()=>S(T.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},T.id))})]})})}),o&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx("div",{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-3xl w-full mx-4",children:[i.jsx("h2",{className:"text-2xl font-bold mb-6",children:d?"تعديل سائق":"إضافة سائق جديد"}),i.jsxs("form",{onSubmit:N,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم السائق"}),i.jsx("input",{type:"text",value:p.name,onChange:T=>f({...p,name:T.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم الهاتف"}),i.jsx("input",{type:"tel",value:p.phone,onChange:T=>f({...p,phone:T.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),i.jsx("input",{type:"email",value:p.email,onChange:T=>f({...p,email:T.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحالة"}),i.jsxs("select",{value:p.status,onChange:T=>f({...p,status:T.target.value}),className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"offline",children:"غير متصل"}),i.jsx("option",{value:"available",children:"متاح"}),i.jsx("option",{value:"busy",children:"مشغول"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نسبة العمولة (%)"}),i.jsx("input",{type:"number",value:p.commission_rate,onChange:T=>f({...p,commission_rate:Number(T.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",max:"100",step:"0.1"})]})]}),i.jsxs("div",{className:"border-t pt-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"معلومات المركبة"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع المركبة"}),i.jsxs("select",{value:p.vehicle_type,onChange:T=>f({...p,vehicle_type:T.target.value}),className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"motorcycle",children:"دراجة نارية"}),i.jsx("option",{value:"car",children:"سيارة"}),i.jsx("option",{value:"bicycle",children:"دراجة هوائية"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الموديل"}),i.jsx("input",{type:"text",value:p.vehicle_model,onChange:T=>f({...p,vehicle_model:T.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"سنة الصنع"}),i.jsx("input",{type:"text",value:p.vehicle_year,onChange:T=>f({...p,vehicle_year:T.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم اللوحة"}),i.jsx("input",{type:"text",value:p.vehicle_plate,onChange:T=>f({...p,vehicle_plate:T.target.value}),className:"w-full border rounded-md px-3 py-2"})]})]})]}),i.jsxs("div",{className:"border-t pt-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"مناطق العمل"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-60 overflow-y-auto",children:x.map(T=>i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",checked:p.working_areas.includes(T),onChange:Y=>{const O=Y.target.checked?[...p.working_areas,T]:p.working_areas.filter(H=>H!==T);f({...p,working_areas:O})},className:"rounded text-blue-600"}),i.jsx("span",{children:T})]},T))})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{l(!1),u(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:d?"تحديث":"إضافة"})]})]})]})]})})]})}function gF(){const[t,e]=w.useState(!1),[n,r]=w.useState({name:"",phone:"",email:"",password:"",status:"offline",commission_rate:15,vehicle_type:"motorcycle",vehicle_model:"",vehicle_year:"",vehicle_plate:"",working_areas:[]}),s=["رام الله","البيرة","نابلس","جنين","طولكرم","قلقيلية","طوباس","سلفيت","أريحا","بيت لحم","الخليل","بيت جالا","بيت ساحور","بيرزيت","الظاهرية","دورا","يطا","عنبتا","بيت فجار","بديا","عزون"],a=async o=>{o.preventDefault();try{if(e(!0),!n.name||!n.phone||!n.password){z.error("الرجاء تعبئة جميع الحقول المطلوبة"),e(!1);return}const l=n.phone.replace(/\s+/g,""),{data:d,error:u}=await supabase.rpc("add_custom_user",{p_username:l,p_password:n.password,p_name:n.name,p_email:n.email||null,p_phone:n.phone,p_role:"driver"});if(u){console.error("Error creating custom user:",u),z.error("فشل في إنشاء حساب المستخدم: "+u.message),e(!1);return}const{data:p,error:f}=await supabase.from("drivers").insert([{user_id:d,name:n.name,phone:n.phone,email:n.email,status:n.status,commission_rate:n.commission_rate,vehicle_type:n.vehicle_type,vehicle_model:n.vehicle_model,vehicle_year:n.vehicle_year,vehicle_plate:n.vehicle_plate,working_areas:n.working_areas}]).select();if(f){console.error("Error creating driver:",f),z.error("فشل في إنشاء بيانات السائق: "+f.message),e(!1);return}const{error:x}=await supabase.rpc("register_driver_in_auth",{p_driver_id:p[0].id});x&&console.error("Error registering driver in auth system:",x),z.success("تم إضافة السائق بنجاح"),r({name:"",phone:"",email:"",password:"",status:"offline",commission_rate:15,vehicle_type:"motorcycle",vehicle_model:"",vehicle_year:"",vehicle_plate:"",working_areas:[]})}catch(l){console.error("Error adding driver:",l),z.error(l.message||"فشل في إضافة السائق")}finally{e(!1)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"إضافة سائق جديد"}),i.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:i.jsxs("form",{onSubmit:a,className:"space-y-6",children:[i.jsxs("div",{className:"border-b pb-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"بيانات السائق"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الاسم ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:n.name,onChange:o=>r({...n,name:o.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["رقم الهاتف ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"tel",value:n.phone,onChange:o=>r({...n,phone:o.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),i.jsx("input",{type:"email",value:n.email,onChange:o=>r({...n,email:o.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["كلمة المرور ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"password",value:n.password,onChange:o=>r({...n,password:o.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الحالة ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:n.status,onChange:o=>r({...n,status:o.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"offline",children:"غير متصل"}),i.jsx("option",{value:"available",children:"متاح"}),i.jsx("option",{value:"busy",children:"مشغول"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نسبة العمولة (%) ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:n.commission_rate,onChange:o=>r({...n,commission_rate:Number(o.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"0",max:"100",step:"0.1",required:!0})]})]})]}),i.jsxs("div",{className:"border-b pb-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"معلومات المركبة"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نوع المركبة ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:n.vehicle_type,onChange:o=>r({...n,vehicle_type:o.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"motorcycle",children:"دراجة نارية"}),i.jsx("option",{value:"car",children:"سيارة"}),i.jsx("option",{value:"bicycle",children:"دراجة هوائية"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الموديل"}),i.jsx("input",{type:"text",value:n.vehicle_model,onChange:o=>r({...n,vehicle_model:o.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"سنة الصنع"}),i.jsx("input",{type:"text",value:n.vehicle_year,onChange:o=>r({...n,vehicle_year:o.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم اللوحة"}),i.jsx("input",{type:"text",value:n.vehicle_plate,onChange:o=>r({...n,vehicle_plate:o.target.value}),className:"w-full border rounded-md px-3 py-2"})]})]})]}),i.jsxs("div",{className:"border-b pb-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"مناطق العمل"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 max-h-60 overflow-y-auto",children:s.map(o=>i.jsxs("label",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",checked:n.working_areas.includes(o),onChange:l=>{const d=l.target.checked?[...n.working_areas,o]:n.working_areas.filter(u=>u!==o);r({...n,working_areas:d})},className:"rounded text-blue-600"}),i.jsx("span",{children:o})]},o))})]}),i.jsx("div",{className:"flex justify-end space-x-2",children:i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:t,children:t?"جاري الإضافة...":"إضافة سائق جديد"})})]})})]})}function xF(){const{user:t}=Do(),[e,n]=w.useState([]),[r,s]=w.useState([]),[a,o]=w.useState(!0),[l,d]=w.useState(null),[u,p]=w.useState(!1),[f,x]=w.useState(null),[g,v]=w.useState({name:"",zone_id:"",cost:0,min_amount:null,max_amount:null,delivery_type:"distance",settings:{distance:{min_distance:1,max_distance:20,base_fee:5,price_per_km:2},fixed:{fixed_price:10},zones:{zones:[{name:"المنطقة أ",price:10},{name:"المنطقة ب",price:15},{name:"المنطقة ج",price:20}]}}});w.useEffect(()=>{b()},[]);const b=async()=>{try{o(!0),d(null);const{data:O,error:H}=await ee.from("shipping_zones").select("*").order("name");if(H)throw H;s(O||[]);const{data:te,error:G}=await ee.from("shipping_methods").select(`
          *,
          zone:zone_id(name)
        `).order("name");if(G)throw G;n(te||[])}catch(O){console.error("Error fetching data:",O),d("فشل في تحميل البيانات. الرجاء المحاولة مرة أخرى."),z.error("فشل في تحميل البيانات")}finally{o(!1)}},j={name:{type:"text",label:"اسم الطريقة",placeholder:"البحث باسم طريقة الشحن",value:""},zone_id:{type:"select",label:"منطقة الشحن",placeholder:"جميع المناطق",options:r.map(O=>({value:O.id,label:O.name})),value:""},delivery_type:{type:"select",label:"نوع التوصيل",placeholder:"جميع الأنواع",options:[{value:"distance",label:"حسب المسافة"},{value:"fixed",label:"سعر ثابت"},{value:"zones",label:"مناطق"}],value:""},cost:{type:"number",label:"التكلفة",placeholder:"البحث بالتكلفة",min:0,value:""}},{filters:_,filterData:N,handleFilterChange:S}=Fn(j),P=async O=>{O.preventDefault();try{if(!g.name||g.cost===""){z.error("الرجاء تعبئة جميع الحقول المطلوبة");return}if(g.min_amount!==null&&g.max_amount!==null&&parseFloat(g.min_amount)>parseFloat(g.max_amount)){z.error("الحد الأدنى يجب أن يكون أقل من أو يساوي الحد الأقصى");return}const H={name:g.name,zone_id:g.zone_id||null,cost:parseFloat(g.cost),min_amount:g.min_amount!==""?parseFloat(g.min_amount):null,max_amount:g.max_amount!==""?parseFloat(g.max_amount):null,delivery_type:g.delivery_type,settings:g.settings[g.delivery_type]};if(f){const{error:te}=await ee.from("shipping_methods").update(H).eq("id",f.id);if(te)throw te;z.success("تم تحديث طريقة الشحن بنجاح")}else{const{error:te}=await ee.from("shipping_methods").insert([H]);if(te)throw te;z.success("تم إضافة طريقة الشحن بنجاح")}b(),p(!1),x(null),v({name:"",zone_id:"",cost:0,min_amount:null,max_amount:null,delivery_type:"distance",settings:{distance:{min_distance:1,max_distance:20,base_fee:5,price_per_km:2},fixed:{fixed_price:10},zones:{zones:[{name:"المنطقة أ",price:10},{name:"المنطقة ب",price:15},{name:"المنطقة ج",price:20}]}}})}catch(H){console.error("Error saving shipping method:",H),z.error(f?"فشل في تحديث طريقة الشحن":"فشل في إضافة طريقة الشحن")}},M=async O=>{if(window.confirm("هل أنت متأكد من حذف طريقة الشحن هذه؟"))try{const{error:H}=await ee.from("shipping_methods").delete().eq("id",O);if(H)throw H;z.success("تم حذف طريقة الشحن بنجاح"),b()}catch(H){console.error("Error deleting shipping method:",H),z.error("فشل في حذف طريقة الشحن")}},R=async()=>{const O=prompt("أدخل اسم منطقة الشحن الجديدة:");if(O)try{const H=t==null?void 0:t.id;if(!H){z.error("يجب تسجيل الدخول لإضافة منطقة شحن");return}const{data:te,error:G}=await ee.from("shipping_zones").insert([{name:O,vendor_id:H}]).select();if(G){console.error("Error adding shipping zone:",G);const{data:B,error:Z}=await ee.from("shipping_zones").insert([{name:O,vendor_id:null}]).select();if(Z)throw Z;z.success("تم إضافة منطقة الشحن بنجاح (بدون ربط بالبائع)")}else z.success("تم إضافة منطقة الشحن بنجاح");b()}catch(H){console.error("Error adding shipping zone:",H),z.error("فشل في إضافة منطقة الشحن")}},A=async O=>{if(window.confirm("هل أنت متأكد من حذف منطقة الشحن هذه؟ سيتم حذف جميع طرق الشحن المرتبطة بها."))try{const{error:H}=await ee.from("shipping_zones").delete().eq("id",O);if(H)throw H;z.success("تم حذف منطقة الشحن بنجاح"),b()}catch(H){console.error("Error deleting shipping zone:",H),z.error("فشل في حذف منطقة الشحن")}},T=O=>{switch(O){case"distance":return"حسب المسافة";case"fixed":return"سعر ثابت";case"zones":return"مناطق";default:return O}},Y=N(e);return a?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):l?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:l}),i.jsx("button",{onClick:b,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"طرق التوصيل"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:R,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"إضافة منطقة شحن"}),i.jsx("button",{onClick:()=>{x(null),v({name:"",zone_id:"",cost:0,min_amount:null,max_amount:null,delivery_type:"distance",settings:{distance:{min_distance:1,max_distance:20,base_fee:5,price_per_km:2},fixed:{fixed_price:10},zones:{zones:[{name:"المنطقة أ",price:10},{name:"المنطقة ب",price:15},{name:"المنطقة ج",price:20}]}}}),p(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة طريقة توصيل"})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"مناطق الشحن"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:r.length===0?i.jsx("div",{className:"col-span-full text-center py-4 text-gray-500",children:"لا توجد مناطق شحن. قم بإضافة منطقة شحن جديدة."}):r.map(O=>i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h4",{className:"font-medium",children:O.name}),i.jsx("button",{onClick:()=>A(O.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]}),i.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:[e.filter(H=>H.zone_id===O.id).length," طريقة توصيل"]})]},O.id))})]}),i.jsx(Rn,{filters:_,onFilterChange:S}),i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"اسم الطريقة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"نوع التوصيل"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"منطقة الشحن"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التكلفة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحد الأدنى للطلب"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحد الأقصى للطلب"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإعدادات"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Y.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:"لا توجد طرق شحن متطابقة مع معايير البحث"})}):Y.map(O=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"font-medium text-gray-900",children:O.name})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:T(O.delivery_type)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:O.zone?O.zone:"جميع المناطق"}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",O.cost]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:O.min_amount!==null?`₪${O.min_amount}`:"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:O.max_amount!==null?`₪${O.max_amount}`:"-"}),i.jsxs("td",{className:"px-6 py-4",children:[O.delivery_type==="distance"&&O.settings&&i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{children:["السعر الأساسي: ₪",O.settings.base_fee]}),i.jsxs("div",{children:["سعر الكيلومتر: ₪",O.settings.price_per_km]}),i.jsxs("div",{children:["نطاق التوصيل: ",O.settings.min_distance," - ",O.settings.max_distance," كم"]})]}),O.delivery_type==="fixed"&&O.settings&&i.jsx("div",{className:"text-sm",children:i.jsxs("div",{children:["السعر الثابت: ₪",O.settings.fixed_price]})}),O.delivery_type==="zones"&&O.settings&&O.settings.zones&&i.jsx("div",{className:"text-sm",children:O.settings.zones.map((H,te)=>i.jsxs("div",{children:[H.name,": ₪",H.price]},te))})]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[i.jsx("button",{onClick:()=>{x(O),v({name:O.name,zone_id:O.zone_id||"",cost:O.cost,min_amount:O.min_amount,max_amount:O.max_amount,delivery_type:O.delivery_type||"distance",settings:{distance:O.delivery_type==="distance"?O.settings:{min_distance:1,max_distance:20,base_fee:5,price_per_km:2},fixed:O.delivery_type==="fixed"?O.settings:{fixed_price:10},zones:O.delivery_type==="zones"?O.settings:{zones:[{name:"المنطقة أ",price:10},{name:"المنطقة ب",price:15},{name:"المنطقة ج",price:20}]}}}),p(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),i.jsx("button",{onClick:()=>M(O.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},O.id))})]})})}),i.jsx(be,{open:u,onClose:()=>{p(!1),x(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(be.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-3xl w-full mx-4",children:[i.jsx(be.Title,{className:"text-2xl font-bold mb-6",children:f?"تعديل طريقة التوصيل":"إضافة طريقة توصيل جديدة"}),i.jsxs("form",{onSubmit:P,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم الطريقة ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:g.name,onChange:O=>v({...g,name:O.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"منطقة الشحن"}),i.jsxs("select",{value:g.zone_id,onChange:O=>v({...g,zone_id:O.target.value}),className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"",children:"جميع المناطق"}),r.map(O=>i.jsx("option",{value:O.id,children:O.name},O.id))]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نوع التوصيل ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:g.delivery_type,onChange:O=>v({...g,delivery_type:O.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"distance",children:"حسب المسافة"}),i.jsx("option",{value:"fixed",children:"سعر ثابت"}),i.jsx("option",{value:"zones",children:"مناطق"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["التكلفة (₪) ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:g.cost,onChange:O=>v({...g,cost:O.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأدنى للطلب (₪)"}),i.jsx("input",{type:"number",value:g.min_amount!==null?g.min_amount:"",onChange:O=>v({...g,min_amount:O.target.value===""?null:O.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01",placeholder:"اتركه فارغاً إذا لم يكن هناك حد أدنى"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأقصى للطلب (₪)"}),i.jsx("input",{type:"number",value:g.max_amount!==null?g.max_amount:"",onChange:O=>v({...g,max_amount:O.target.value===""?null:O.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01",placeholder:"اتركه فارغاً إذا لم يكن هناك حد أقصى"})]})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["إعدادات ",T(g.delivery_type)]}),g.delivery_type==="distance"&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"السعر الأساسي (₪)"}),i.jsx("input",{type:"number",value:g.settings.distance.base_fee,onChange:O=>v({...g,settings:{...g.settings,distance:{...g.settings.distance,base_fee:parseFloat(O.target.value)}}}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"سعر الكيلومتر (₪)"}),i.jsx("input",{type:"number",value:g.settings.distance.price_per_km,onChange:O=>v({...g,settings:{...g.settings,distance:{...g.settings.distance,price_per_km:parseFloat(O.target.value)}}}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأدنى للمسافة (كم)"}),i.jsx("input",{type:"number",value:g.settings.distance.min_distance,onChange:O=>v({...g,settings:{...g.settings,distance:{...g.settings.distance,min_distance:parseFloat(O.target.value)}}}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأقصى للمسافة (كم)"}),i.jsx("input",{type:"number",value:g.settings.distance.max_distance,onChange:O=>v({...g,settings:{...g.settings,distance:{...g.settings.distance,max_distance:parseFloat(O.target.value)}}}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.1"})]})]}),g.delivery_type==="fixed"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"السعر الثابت (₪)"}),i.jsx("input",{type:"number",value:g.settings.fixed.fixed_price,onChange:O=>v({...g,settings:{...g.settings,fixed:{fixed_price:parseFloat(O.target.value)}}}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01"})]}),g.delivery_type==="zones"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المناطق"}),i.jsxs("div",{className:"space-y-2",children:[g.settings.zones.zones.map((O,H)=>i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:O.name,onChange:te=>{const G=[...g.settings.zones.zones];G[H]={...O,name:te.target.value},v({...g,settings:{...g.settings,zones:{zones:G}}})},className:"flex-1 border rounded-md px-3 py-2",placeholder:"اسم المنطقة"}),i.jsx("input",{type:"number",value:O.price,onChange:te=>{const G=[...g.settings.zones.zones];G[H]={...O,price:parseFloat(te.target.value)},v({...g,settings:{...g.settings,zones:{zones:G}}})},className:"w-32 border rounded-md px-3 py-2",min:"0",step:"0.01",placeholder:"السعر"}),i.jsx("button",{type:"button",onClick:()=>{const te=g.settings.zones.zones.filter((G,B)=>B!==H);v({...g,settings:{...g.settings,zones:{zones:te}}})},className:"text-red-600 hover:text-red-800",children:"حذف"})]},H)),i.jsx("button",{type:"button",onClick:()=>{const O=[...g.settings.zones.zones,{name:"",price:0}];v({...g,settings:{...g.settings,zones:{zones:O}}})},className:"text-blue-600 hover:text-blue-800 text-sm",children:"إضافة منطقة"})]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{p(!1),x(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:f?"تحديث":"إضافة"})]})]})]})]})})]})}function vF(){const[t,e]=w.useState([]),[n,r]=w.useState(!0),[s,a]=w.useState(null),[o,l]=w.useState(!1),[d,u]=w.useState(null),[p,f]=w.useState({name:"",phone:"",address:"",email:"",notes:""});w.useEffect(()=>{x()},[]);const x=async()=>{try{r(!0),a(null);const{data:A,error:T}=await ee.from("customers").select("*").order("created_at",{ascending:!1});if(T)throw console.error("Error fetching customers:",T),new Error(`فشل في جلب بيانات الزبائن: ${T.message}`);e(A||[])}catch(A){console.error("Error fetching customers:",A),a(A.message||"فشل في تحميل بيانات العملاء. الرجاء المحاولة مرة أخرى."),z.error("فشل في تحميل بيانات العملاء"),e([])}finally{r(!1)}},g={name:{type:"text",label:"اسم العميل",placeholder:"البحث باسم العميل",value:""},phone:{type:"text",label:"رقم الهاتف",placeholder:"البحث برقم الهاتف",value:""},address:{type:"text",label:"العنوان",placeholder:"البحث بالعنوان",value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"active",label:"نشط"},{value:"blocked",label:"محظور"}],value:""},orders_count:{type:"number",label:"عدد الطلبات",placeholder:"الحد الأدنى للطلبات",min:0,value:""},total_spent:{type:"number",label:"إجمالي الإنفاق",placeholder:"الحد الأدنى للإنفاق",min:0,value:""}},{filters:v,filterData:b,handleFilterChange:j}=Fn(g),_=async A=>{if(A.preventDefault(),!p.name||!p.phone){z.error("الرجاء إدخال الاسم ورقم الهاتف");return}try{if(r(!0),d){const{error:T}=await ee.from("customers").update({name:p.name,phone:p.phone,address:p.address,email:p.email,notes:p.notes,updated_at:new Date().toISOString()}).eq("id",d.id);if(T)throw T;z.success("تم تحديث بيانات العميل بنجاح")}else{const{error:T}=await ee.from("customers").insert([{name:p.name,phone:p.phone,address:p.address,email:p.email,notes:p.notes}]);if(T)throw T;z.success("تم إضافة العميل بنجاح")}f({name:"",phone:"",address:"",email:"",notes:""}),u(null),l(!1),x()}catch(T){console.error("Error saving customer:",T),z.error(d?"فشل في تحديث بيانات العميل":"فشل في إضافة العميل")}finally{r(!1)}},N=A=>{u(A),f({name:A.name,phone:A.phone,address:A.address||"",email:A.email||"",notes:A.notes||""}),l(!0)},S=async A=>{try{const T=t.find(H=>H.id===A);if(!T)return;const Y=T.status==="active"?"blocked":"active",{error:O}=await ee.from("customers").update({status:Y}).eq("id",A);if(O)throw O;e(t.map(H=>H.id===A?{...H,status:Y}:H)),z.success(`تم ${Y==="active"?"إلغاء حظر":"حظر"} العميل بنجاح`)}catch(T){console.error("Error updating customer status:",T),z.error("فشل في تحديث حالة العميل")}},P=A=>{switch(A){case"active":return"bg-green-100 text-green-800";case"blocked":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},M=A=>{switch(A){case"active":return"نشط";case"blocked":return"محظور";default:return A}},R=b(t);return n&&t.length===0?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:s}),i.jsx("button",{onClick:x,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"bg-white rounded-lg shadow",children:[i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"الزبائن"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{u(null),f({name:"",phone:"",address:"",email:"",notes:""}),l(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة زبون جديد"}),i.jsx("button",{className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"تصدير البيانات"})]})]}),i.jsx(Rn,{filters:v,onFilterChange:j}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الاسم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"رقم الهاتف"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العنوان"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"عدد الطلبات"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"إجمالي الإنفاق"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"آخر طلب"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:"لا يوجد زبائن متطابقين مع معايير البحث"})}):R.map(A=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A.name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A.phone}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A.address||"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A.orders_count||0}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",(A.total_spent||0).toFixed(2)]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A.last_order?new Date(A.last_order).toLocaleDateString("ar-SA"):"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${P(A.status||"active")}`,children:M(A.status||"active")})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[i.jsx("button",{onClick:()=>N(A),className:"text-blue-600 hover:text-blue-900 ml-4",children:"تعديل"}),i.jsx("button",{onClick:()=>S(A.id),className:`${(A.status||"active")==="blocked"?"text-green-600 hover:text-green-900":"text-red-600 hover:text-red-900"}`,children:(A.status||"active")==="blocked"?"إلغاء الحظر":"حظر"})]})]},A.id))})]})})]}),i.jsx(be,{open:o,onClose:()=>{l(!1),u(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(be.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx(be.Title,{className:"text-2xl font-bold mb-6",children:d?"تعديل بيانات الزبون":"إضافة زبون جديد"}),i.jsxs("form",{onSubmit:_,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الاسم ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:p.name,onChange:A=>f({...p,name:A.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["رقم الهاتف ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"tel",value:p.phone,onChange:A=>f({...p,phone:A.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),i.jsx("input",{type:"email",value:p.email,onChange:A=>f({...p,email:A.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"العنوان"}),i.jsx("input",{type:"text",value:p.address,onChange:A=>f({...p,address:A.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ملاحظات"}),i.jsx("textarea",{value:p.notes,onChange:A=>f({...p,notes:A.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{l(!1),u(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:n,children:n?"جاري الحفظ...":d?"تحديث":"إضافة"})]})]})]})]})})]})}function yF(){const[t,e]=w.useState(!1),[n,r]=w.useState({name:"",phone:"",email:"",password:"",address:"",notes:""}),[s,a]=w.useState(!1),[o,l]=w.useState(null);w.useEffect(()=>{const u=localStorage.getItem("customerToEdit");if(u)try{const p=JSON.parse(u);r({name:p.name||"",phone:p.phone||"",email:p.email||"",password:"",address:p.address||"",notes:p.notes||""}),l(p.id),a(!0),localStorage.removeItem("customerToEdit")}catch(p){console.error("Error parsing customer data:",p)}},[]);const d=async u=>{u.preventDefault();try{if(e(!0),!n.name||!n.phone){z.error("الرجاء تعبئة جميع الحقول المطلوبة"),e(!1);return}if(s){const p={name:n.name,phone:n.phone,email:n.email||null,address:n.address||null,notes:n.notes||null},{error:f}=await ee.from("customers").update(p).eq("id",o);if(f)throw f;if(n.password){const{data:x,error:g}=await ee.from("customers").select("user_id").eq("id",o).single();if(g)throw g;if(x.user_id){const{error:v}=await ee.rpc("change_custom_user_password",{p_user_id:x.user_id,p_new_password:n.password});if(v)throw v}}z.success("تم تحديث بيانات الزبون بنجاح")}else{if(!n.password){z.error("الرجاء إدخال كلمة مرور للزبون"),e(!1);return}const{data:p,error:f}=await ee.auth.signUp({email:n.email||`${n.phone}@example.com`,password:n.password,options:{data:{name:n.name,phone:n.phone,role:"customer"}}});if(f){console.error("Error creating user:",f),z.error("خطأ في إنشاء المستخدم: "+f.message),e(!1);return}const{data:x,error:g}=await ee.from("customers").insert([{user_id:p.user.id,name:n.name,phone:n.phone,email:n.email,address:n.address,notes:n.notes}]).select();if(g)throw g;z.success("تم إضافة الزبون بنجاح")}r({name:"",phone:"",email:"",password:"",address:"",notes:""}),a(!1),l(null)}catch(p){console.error("Error adding/updating customer:",p),z.error(p.message||"فشل في إضافة/تحديث الزبون")}finally{e(!1)}};return i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:s?"تعديل بيانات الزبون":"إضافة زبون جديد"}),i.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:i.jsxs("form",{onSubmit:d,className:"space-y-6",children:[i.jsxs("div",{className:"border-b pb-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"بيانات الزبون"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الاسم ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:n.name,onChange:u=>r({...n,name:u.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["رقم الهاتف ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"tel",value:n.phone,onChange:u=>r({...n,phone:u.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),i.jsx("input",{type:"email",value:n.email,onChange:u=>r({...n,email:u.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["كلمة المرور ",s?"":i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"password",value:n.password,onChange:u=>r({...n,password:u.target.value}),className:"w-full border rounded-md px-3 py-2",required:!s,placeholder:s?"اتركه فارغاً للاحتفاظ بكلمة المرور الحالية":""}),s&&i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"اتركه فارغاً للاحتفاظ بكلمة المرور الحالية"})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"العنوان"}),i.jsx("input",{type:"text",value:n.address,onChange:u=>r({...n,address:u.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ملاحظات"}),i.jsx("textarea",{value:n.notes,onChange:u=>r({...n,notes:u.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]})]})]}),i.jsx("div",{className:"flex justify-end space-x-2",children:i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:t,children:t?"جاري الحفظ...":s?"تحديث الزبون":"إضافة زبون جديد"})})]})})]})}function bF(){const[t,e]=w.useState([]),[n,r]=w.useState(!0),[s,a]=w.useState(null),[o,l]=w.useState(!1),[d,u]=w.useState(!1),[p,f]=w.useState(null),[x,g]=w.useState({name:"",email:"",role:"customer",password:"",confirm_password:""}),[v,b]=w.useState({password:"",confirm_password:""});w.useEffect(()=>{j()},[]);const j=async()=>{try{r(!0),a(null);const{data:B,error:Z}=await ee.from("custom_users").select("*").order("created_at",{ascending:!1});if(Z)throw Z;e(B||[])}catch(B){console.error("Error fetching users:",B),a("فشل في تحميل المستخدمين. الرجاء المحاولة مرة أخرى."),z.error("فشل في تحميل المستخدمين"),e([])}finally{r(!1)}},_={username:{type:"text",label:"اسم المستخدم",placeholder:"البحث باسم المستخدم",value:""},name:{type:"text",label:"الاسم",placeholder:"البحث بالاسم",value:""},email:{type:"text",label:"البريد الإلكتروني",placeholder:"البحث بالبريد الإلكتروني",value:""},role:{type:"select",label:"الدور",placeholder:"جميع الأدوار",options:[{value:"admin",label:"مدير"},{value:"vendor",label:"بائع"},{value:"driver",label:"سائق"},{value:"customer",label:"زبون"}],value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"active",label:"نشط"},{value:"inactive",label:"غير نشط"},{value:"blocked",label:"محظور"}],value:""}},{filters:N,filterData:S,handleFilterChange:P}=Fn(_),M=async B=>{if(B.preventDefault(),x.password!==x.confirm_password){z.error("كلمة المرور غير متطابقة");return}try{if(r(!0),p){const Z={name:x.name,email:x.email,role:x.role,status:x.status,updated_at:new Date().toISOString()};if(x.password){const{data:V,error:I}=await ee.rpc("hash_password",{password:x.password});if(I)throw I;Z.password_hash=V}const{error:C}=await ee.from("custom_users").update(Z).eq("id",p.id);if(C)throw C;z.success("تم تحديث المستخدم بنجاح")}else{const{data:Z,error:C}=await ee.rpc("add_custom_user",{p_username:x.username,p_password:x.password,p_name:x.name,p_email:x.email,p_phone:x.phone||"",p_role:x.role});if(C)throw C;z.success("تم إضافة المستخدم بنجاح")}j(),l(!1),f(null),g({username:"",password:"",name:"",email:"",role:"customer",confirm_password:""})}catch(Z){console.error("Error saving user:",Z),z.error(p?"فشل في تحديث المستخدم":"فشل في إضافة المستخدم")}finally{r(!1)}},R=B=>{if(B.preventDefault(),!p){z.error("لم يتم تحديد المستخدم");return}if(v.password!==v.confirm_password){z.error("كلمة المرور غير متطابقة");return}A(p.id,v.password)},A=async(B,Z)=>{try{r(!0);const{data:C,error:V}=await ee.rpc("hash_password",{password:Z});if(V)throw V;const{error:I}=await ee.from("custom_users").update({password_hash:C,updated_at:new Date().toISOString()}).eq("id",B);if(I)throw I;z.success("تم تحديث كلمة المرور بنجاح"),u(!1),f(null),b({password:"",confirm_password:""})}catch(C){console.error("Error updating password:",C),z.error("فشل في تحديث كلمة المرور")}finally{r(!1)}},T=async(B,Z)=>{try{r(!0);const{error:C}=await ee.from("custom_users").update({status:Z,updated_at:new Date().toISOString()}).eq("id",B);if(C)throw C;e(t.map(V=>V.id===B?{...V,status:Z}:V)),z.success("تم تحديث حالة المستخدم بنجاح")}catch(C){console.error("Error updating user status:",C),z.error("فشل في تحديث حالة المستخدم")}finally{r(!1)}},Y=async B=>{if(window.confirm("هل أنت متأكد من حذف هذا المستخدم؟"))try{r(!0);const{error:Z}=await ee.from("custom_users").delete().eq("id",B);if(Z)throw Z;e(t.filter(C=>C.id!==B)),z.success("تم حذف المستخدم بنجاح")}catch(Z){console.error("Error deleting user:",Z),z.error("فشل في حذف المستخدم")}finally{r(!1)}},O=B=>{switch(B){case"admin":return"مدير";case"vendor":return"بائع";case"driver":return"سائق";case"customer":return"زبون";default:return B}},H=B=>{switch(B){case"admin":return"bg-purple-100 text-purple-800";case"vendor":return"bg-blue-100 text-blue-800";case"driver":return"bg-green-100 text-green-800";case"customer":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},te=B=>{switch(B){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-yellow-100 text-yellow-800";case"blocked":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},G=S(t);return n&&t.length===0?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:s}),i.jsx("button",{onClick:j,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"إدارة المستخدمين"}),i.jsx("button",{onClick:()=>{f(null),g({username:"",password:"",name:"",email:"",role:"customer",confirm_password:""}),l(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة مستخدم جديد"})]}),i.jsx(Rn,{filters:N,onFilterChange:P}),i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"اسم المستخدم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الاسم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"البريد الإلكتروني"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"رقم الهاتف"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الدور"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"تاريخ الإنشاء"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:G.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500",children:"لا يوجد مستخدمين متطابقين مع معايير البحث"})}):G.map(B=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:B.username}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:B.name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:B.email}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:B.phone}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${H(B.role)}`,children:O(B.role)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("select",{value:B.status,onChange:Z=>T(B.id,Z.target.value),className:`px-2 py-1 rounded-full text-xs ${te(B.status)}`,children:[i.jsx("option",{value:"active",children:"نشط"}),i.jsx("option",{value:"inactive",children:"غير نشط"}),i.jsx("option",{value:"blocked",children:"محظور"})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(B.created_at).toLocaleDateString("ar-SA")}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[i.jsx("button",{onClick:()=>{f(B),g({username:B.username,password:"",name:B.name,email:B.email||"",phone:B.phone||"",role:B.role,status:B.status}),l(!0)},className:"text-blue-600 hover:text-blue-800 ml-4",children:"تعديل"}),i.jsx("button",{onClick:()=>{f(B),b({password:"",confirm_password:""}),u(!0)},className:"text-yellow-600 hover:text-yellow-800 ml-4",children:"كلمة المرور"}),i.jsx("button",{onClick:()=>Y(B.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},B.id))})]})})}),i.jsx(be,{open:o,onClose:()=>{l(!1),f(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(be.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx(be.Title,{className:"text-2xl font-bold mb-6",children:p?"تعديل مستخدم":"إضافة مستخدم جديد"}),i.jsxs("form",{onSubmit:M,className:"space-y-4",children:[!p&&i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم المستخدم ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:x.username,onChange:B=>g({...x,username:B.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[p?"كلمة المرور الجديدة":"كلمة المرور"," ",!p&&i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"password",value:x.password,onChange:B=>g({...x,password:B.target.value}),className:"w-full border rounded-md px-3 py-2",required:!p,placeholder:p?"اتركه فارغًا للاحتفاظ بكلمة المرور الحالية":""})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["تأكيد كلمة المرور ",!p&&i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"password",value:x.confirm_password,onChange:B=>g({...x,confirm_password:B.target.value}),className:"w-full border rounded-md px-3 py-2",required:!p||x.password!=="",placeholder:p?"اتركه فارغًا للاحتفاظ بكلمة المرور الحالية":""})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الاسم ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:x.name,onChange:B=>g({...x,name:B.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),i.jsx("input",{type:"email",value:x.email,onChange:B=>g({...x,email:B.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم الهاتف"}),i.jsx("input",{type:"tel",value:x.phone,onChange:B=>g({...x,phone:B.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الدور ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:x.role,onChange:B=>g({...x,role:B.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"admin",children:"مدير"}),i.jsx("option",{value:"vendor",children:"بائع"}),i.jsx("option",{value:"driver",children:"سائق"}),i.jsx("option",{value:"customer",children:"زبون"})]})]}),p&&i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الحالة ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:x.status,onChange:B=>g({...x,status:B.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"active",children:"نشط"}),i.jsx("option",{value:"inactive",children:"غير نشط"}),i.jsx("option",{value:"blocked",children:"محظور"})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{l(!1),f(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:n,children:n?"جاري الحفظ...":p?"تحديث":"إضافة"})]})]})]})]})}),i.jsx(be,{open:d,onClose:()=>{u(!1),f(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(be.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx(be.Title,{className:"text-2xl font-bold mb-6",children:"تغيير كلمة المرور"}),i.jsxs("form",{onSubmit:R,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"كلمة المرور الجديدة"}),i.jsx("input",{type:"password",value:v.password,onChange:B=>b({...v,password:B.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تأكيد كلمة المرور"}),i.jsx("input",{type:"password",value:v.confirm_password,onChange:B=>b({...v,confirm_password:B.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{u(!1),f(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"تحديث كلمة المرور"})]})]})]})]})})]})}var sk={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(hn,function(){var n=1e3,r=6e4,s=36e5,a="millisecond",o="second",l="minute",d="hour",u="day",p="week",f="month",x="quarter",g="year",v="date",b="Invalid Date",j=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,N={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(B){var Z=["th","st","nd","rd"],C=B%100;return"["+B+(Z[(C-20)%10]||Z[C]||Z[0])+"]"}},S=function(B,Z,C){var V=String(B);return!V||V.length>=Z?B:""+Array(Z+1-V.length).join(C)+B},P={s:S,z:function(B){var Z=-B.utcOffset(),C=Math.abs(Z),V=Math.floor(C/60),I=C%60;return(Z<=0?"+":"-")+S(V,2,"0")+":"+S(I,2,"0")},m:function B(Z,C){if(Z.date()<C.date())return-B(C,Z);var V=12*(C.year()-Z.year())+(C.month()-Z.month()),I=Z.clone().add(V,f),X=C-I<0,E=Z.clone().add(V+(X?-1:1),f);return+(-(V+(C-I)/(X?I-E:E-I))||0)},a:function(B){return B<0?Math.ceil(B)||0:Math.floor(B)},p:function(B){return{M:f,y:g,w:p,d:u,D:v,h:d,m:l,s:o,ms:a,Q:x}[B]||String(B||"").toLowerCase().replace(/s$/,"")},u:function(B){return B===void 0}},M="en",R={};R[M]=N;var A="$isDayjsObject",T=function(B){return B instanceof te||!(!B||!B[A])},Y=function B(Z,C,V){var I;if(!Z)return M;if(typeof Z=="string"){var X=Z.toLowerCase();R[X]&&(I=X),C&&(R[X]=C,I=X);var E=Z.split("-");if(!I&&E.length>1)return B(E[0])}else{var K=Z.name;R[K]=Z,I=K}return!V&&I&&(M=I),I||!V&&M},O=function(B,Z){if(T(B))return B.clone();var C=typeof Z=="object"?Z:{};return C.date=B,C.args=arguments,new te(C)},H=P;H.l=Y,H.i=T,H.w=function(B,Z){return O(B,{locale:Z.$L,utc:Z.$u,x:Z.$x,$offset:Z.$offset})};var te=function(){function B(C){this.$L=Y(C.locale,null,!0),this.parse(C),this.$x=this.$x||C.x||{},this[A]=!0}var Z=B.prototype;return Z.parse=function(C){this.$d=function(V){var I=V.date,X=V.utc;if(I===null)return new Date(NaN);if(H.u(I))return new Date;if(I instanceof Date)return new Date(I);if(typeof I=="string"&&!/Z$/i.test(I)){var E=I.match(j);if(E){var K=E[2]-1||0,re=(E[7]||"0").substring(0,3);return X?new Date(Date.UTC(E[1],K,E[3]||1,E[4]||0,E[5]||0,E[6]||0,re)):new Date(E[1],K,E[3]||1,E[4]||0,E[5]||0,E[6]||0,re)}}return new Date(I)}(C),this.init()},Z.init=function(){var C=this.$d;this.$y=C.getFullYear(),this.$M=C.getMonth(),this.$D=C.getDate(),this.$W=C.getDay(),this.$H=C.getHours(),this.$m=C.getMinutes(),this.$s=C.getSeconds(),this.$ms=C.getMilliseconds()},Z.$utils=function(){return H},Z.isValid=function(){return this.$d.toString()!==b},Z.isSame=function(C,V){var I=O(C);return this.startOf(V)<=I&&I<=this.endOf(V)},Z.isAfter=function(C,V){return O(C)<this.startOf(V)},Z.isBefore=function(C,V){return this.endOf(V)<O(C)},Z.$g=function(C,V,I){return H.u(C)?this[V]:this.set(I,C)},Z.unix=function(){return Math.floor(this.valueOf()/1e3)},Z.valueOf=function(){return this.$d.getTime()},Z.startOf=function(C,V){var I=this,X=!!H.u(V)||V,E=H.p(C),K=function(U,oe){var fe=H.w(I.$u?Date.UTC(I.$y,oe,U):new Date(I.$y,oe,U),I);return X?fe:fe.endOf(u)},re=function(U,oe){return H.w(I.toDate()[U].apply(I.toDate("s"),(X?[0,0,0,0]:[23,59,59,999]).slice(oe)),I)},Q=this.$W,ie=this.$M,le=this.$D,ae="set"+(this.$u?"UTC":"");switch(E){case g:return X?K(1,0):K(31,11);case f:return X?K(1,ie):K(0,ie+1);case p:var se=this.$locale().weekStart||0,ue=(Q<se?Q+7:Q)-se;return K(X?le-ue:le+(6-ue),ie);case u:case v:return re(ae+"Hours",0);case d:return re(ae+"Minutes",1);case l:return re(ae+"Seconds",2);case o:return re(ae+"Milliseconds",3);default:return this.clone()}},Z.endOf=function(C){return this.startOf(C,!1)},Z.$set=function(C,V){var I,X=H.p(C),E="set"+(this.$u?"UTC":""),K=(I={},I[u]=E+"Date",I[v]=E+"Date",I[f]=E+"Month",I[g]=E+"FullYear",I[d]=E+"Hours",I[l]=E+"Minutes",I[o]=E+"Seconds",I[a]=E+"Milliseconds",I)[X],re=X===u?this.$D+(V-this.$W):V;if(X===f||X===g){var Q=this.clone().set(v,1);Q.$d[K](re),Q.init(),this.$d=Q.set(v,Math.min(this.$D,Q.daysInMonth())).$d}else K&&this.$d[K](re);return this.init(),this},Z.set=function(C,V){return this.clone().$set(C,V)},Z.get=function(C){return this[H.p(C)]()},Z.add=function(C,V){var I,X=this;C=Number(C);var E=H.p(V),K=function(ie){var le=O(X);return H.w(le.date(le.date()+Math.round(ie*C)),X)};if(E===f)return this.set(f,this.$M+C);if(E===g)return this.set(g,this.$y+C);if(E===u)return K(1);if(E===p)return K(7);var re=(I={},I[l]=r,I[d]=s,I[o]=n,I)[E]||1,Q=this.$d.getTime()+C*re;return H.w(Q,this)},Z.subtract=function(C,V){return this.add(-1*C,V)},Z.format=function(C){var V=this,I=this.$locale();if(!this.isValid())return I.invalidDate||b;var X=C||"YYYY-MM-DDTHH:mm:ssZ",E=H.z(this),K=this.$H,re=this.$m,Q=this.$M,ie=I.weekdays,le=I.months,ae=I.meridiem,se=function(oe,fe,Ne,Ce){return oe&&(oe[fe]||oe(V,X))||Ne[fe].slice(0,Ce)},ue=function(oe){return H.s(K%12||12,oe,"0")},U=ae||function(oe,fe,Ne){var Ce=oe<12?"AM":"PM";return Ne?Ce.toLowerCase():Ce};return X.replace(_,function(oe,fe){return fe||function(Ne){switch(Ne){case"YY":return String(V.$y).slice(-2);case"YYYY":return H.s(V.$y,4,"0");case"M":return Q+1;case"MM":return H.s(Q+1,2,"0");case"MMM":return se(I.monthsShort,Q,le,3);case"MMMM":return se(le,Q);case"D":return V.$D;case"DD":return H.s(V.$D,2,"0");case"d":return String(V.$W);case"dd":return se(I.weekdaysMin,V.$W,ie,2);case"ddd":return se(I.weekdaysShort,V.$W,ie,3);case"dddd":return ie[V.$W];case"H":return String(K);case"HH":return H.s(K,2,"0");case"h":return ue(1);case"hh":return ue(2);case"a":return U(K,re,!0);case"A":return U(K,re,!1);case"m":return String(re);case"mm":return H.s(re,2,"0");case"s":return String(V.$s);case"ss":return H.s(V.$s,2,"0");case"SSS":return H.s(V.$ms,3,"0");case"Z":return E}return null}(oe)||E.replace(":","")})},Z.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Z.diff=function(C,V,I){var X,E=this,K=H.p(V),re=O(C),Q=(re.utcOffset()-this.utcOffset())*r,ie=this-re,le=function(){return H.m(E,re)};switch(K){case g:X=le()/12;break;case f:X=le();break;case x:X=le()/3;break;case p:X=(ie-Q)/6048e5;break;case u:X=(ie-Q)/864e5;break;case d:X=ie/s;break;case l:X=ie/r;break;case o:X=ie/n;break;default:X=ie}return I?X:H.a(X)},Z.daysInMonth=function(){return this.endOf(f).$D},Z.$locale=function(){return R[this.$L]},Z.locale=function(C,V){if(!C)return this.$L;var I=this.clone(),X=Y(C,V,!0);return X&&(I.$L=X),I},Z.clone=function(){return H.w(this.$d,this)},Z.toDate=function(){return new Date(this.valueOf())},Z.toJSON=function(){return this.isValid()?this.toISOString():null},Z.toISOString=function(){return this.$d.toISOString()},Z.toString=function(){return this.$d.toUTCString()},B}(),G=te.prototype;return O.prototype=G,[["$ms",a],["$s",o],["$m",l],["$H",d],["$W",u],["$M",f],["$y",g],["$D",v]].forEach(function(B){G[B[1]]=function(Z){return this.$g(Z,B[0],B[1])}}),O.extend=function(B,Z){return B.$i||(B(Z,te,O),B.$i=!0),O},O.locale=Y,O.isDayjs=T,O.unix=function(B){return O(1e3*B)},O.en=R[M],O.Ls=R,O.p={},O})})(sk);var ik=sk.exports;const ak=ms(ik);var _F={exports:{}};(function(t,e){(function(n,r){t.exports=r(ik)})(hn,function(n){function r(u){return u&&typeof u=="object"&&"default"in u?u:{default:u}}var s=r(n),a="يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),o={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},l={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},d={name:"ar",weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),months:a,monthsShort:a,weekStart:6,meridiem:function(u){return u>12?"م":"ص"},relativeTime:{future:"بعد %s",past:"منذ %s",s:"ثانية واحدة",m:"دقيقة واحدة",mm:"%d دقائق",h:"ساعة واحدة",hh:"%d ساعات",d:"يوم واحد",dd:"%d أيام",M:"شهر واحد",MM:"%d أشهر",y:"عام واحد",yy:"%d أعوام"},preparse:function(u){return u.replace(/[١٢٣٤٥٦٧٨٩٠]/g,function(p){return l[p]}).replace(/،/g,",")},postformat:function(u){return u.replace(/\d/g,function(p){return o[p]}).replace(/,/g,"،")},ordinal:function(u){return u},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/‏M/‏YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"}};return s.default.locale(d,null,!0),d})})(_F);ak.locale("ar");const wF=t=>{if(!t||t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return`${parseFloat((t/Math.pow(e,r)).toFixed(2))} ${n[r]}`},jF=t=>t?ak(t).format("D MMMM YYYY"):"",h_=t=>{const e=["محرم","صفر","ربيع الأول","ربيع الثاني","جمادى الأولى","جمادى الآخرة","رجب","شعبان","رمضان","شوال","ذو القعدة","ذو الحجة"];return t>=1&&t<=12?e[t-1]:""};function NF({media:t,onClose:e,onDelete:n,onUpdate:r}){const[s,a]=w.useState(!1),[o,l]=w.useState({alt_text:t.alt_text||"",title:t.title||"",description:t.description||""}),d=u=>{u.preventDefault(),r(t.id,o),a(!1)};return t?i.jsxs("div",{className:"bg-white p-6 rounded-lg",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"تفاصيل الملف"}),i.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden",children:t.type==="image"?i.jsx("img",{src:t.url,alt:t.alt_text||t.name,className:"w-full h-full object-contain",onError:u=>{u.target.onerror=null,u.target.src="data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22600%22%20height%3D%22400%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Crect%20width%3D%22600%22%20height%3D%22400%22%20fill%3D%22%23e2e8f0%22%3E%3C%2Frect%3E%3Ctext%20x%3D%22300%22%20y%3D%22200%22%20font-size%3D%2220%22%20text-anchor%3D%22middle%22%20alignment-baseline%3D%22middle%22%20font-family%3D%22Arial%2C%20sans-serif%22%20fill%3D%22%2364748b%22%3EImage%20Not%20Found%3C%2Ftext%3E%3C%2Fsvg%3E"}}):t.type==="video"?i.jsx("video",{src:t.url,controls:!0,className:"w-full h-full",onError:u=>{u.target.onerror=null;const p=u.target.parentNode;p&&(p.innerHTML='<div class="w-full h-full flex items-center justify-center bg-gray-200 text-gray-500">فشل تحميل الفيديو</div>')}}):t.type==="audio"?i.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gray-100 p-4",children:[i.jsx("svg",{className:"w-16 h-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"})}),i.jsx("audio",{src:t.url,controls:!0,className:"w-full"})]}):i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:i.jsx("svg",{className:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),s?i.jsxs("form",{onSubmit:d,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"النص البديل"}),i.jsx("input",{type:"text",value:o.alt_text,onChange:u=>l({...o,alt_text:u.target.value}),className:"w-full border rounded-md px-3 py-2",placeholder:"وصف الصورة للقراء الشاشة"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"العنوان"}),i.jsx("input",{type:"text",value:o.title,onChange:u=>l({...o,title:u.target.value}),className:"w-full border rounded-md px-3 py-2",placeholder:"عنوان الملف"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الوصف"}),i.jsx("textarea",{value:o.description,onChange:u=>l({...o,description:u.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3",placeholder:"وصف الملف"})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"حفظ"})]})]}):i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"اسم الملف"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.original_filename||t.filename||t.name})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"نوع الملف"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.type==="image"?"صورة":t.type==="video"?"فيديو":t.type==="audio"?"صوت":"مستند"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"حجم الملف"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:wF(t.file_size||t.size)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"المجلد"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.bucket||"عام"})]}),t.width&&t.height&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الأبعاد"}),i.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[t.width,"×",t.height]})]}),t.duration&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"المدة"}),i.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[t.duration," ثانية"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"تاريخ الرفع"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:jF(t.created_at||t.uploaded_at)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"عدد الاستخدامات"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.usage_count||0})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"النص البديل"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.alt_text||"لا يوجد نص بديل"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"العنوان"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.title||"لا يوجد عنوان"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الوصف"}),i.jsx("p",{className:"mt-1 text-sm text-gray-900",children:t.description||"لا يوجد وصف"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الرابط"}),i.jsx("p",{className:"mt-1 text-sm text-blue-600 truncate",children:i.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",children:t.url})})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[!s&&i.jsx("button",{onClick:()=>a(!0),className:"px-4 py-2 bg-gray-100 text-gray-800 rounded hover:bg-gray-200",children:"تعديل"}),i.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إغلاق"}),i.jsx("button",{onClick:()=>n(t.id),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"حذف"})]})]})]}):null}function kF(){const[t,e]=w.useState([]),[n,r]=w.useState(!0),[s,a]=w.useState(null),[o,l]=w.useState("grid"),[d,u]=w.useState(!1),[p,f]=w.useState(!1),[x,g]=w.useState(null),[v,b]=w.useState(null),[j,_]=w.useState("general"),[N,S]=w.useState(""),[P,M]=w.useState(1),[R,A]=w.useState(0),[T,Y]=w.useState(!1),O=20;w.useEffect(()=>{H()},[P,N]);const H=async()=>{try{r(!0);const Q=(P-1)*O,ie=Q+O-1;let le=ee.from("media_files").select("*",{count:"exact"});N&&(le=le.or(`filename.ilike.%${N}%,original_filename.ilike.%${N}%,alt_text.ilike.%${N}%,title.ilike.%${N}%`));const{data:ae,error:se,count:ue}=await le.order("created_at",{ascending:!1}).range(Q,ie);if(se)throw se;const U=ae.map(oe=>{const{publicUrl:fe}=ee.storage.from(oe.bucket).getPublicUrl(oe.file_path);return{...oe,url:fe,type:oe.mime_type.startsWith("image/")?"image":oe.mime_type.startsWith("video/")?"video":oe.mime_type.startsWith("audio/")?"audio":"document"}});e(U),A(ue||0)}catch(Q){console.error("Error fetching media:",Q),a("فشل في تحميل ملفات الوسائط"),e([{id:1,name:"product-image-1.jpg",filename:"product-image-1.jpg",original_filename:"product-image-1.jpg",type:"image",file_size:1024*1024*2,url:"https://images.unsplash.com/photo-1514432324607-a09d9b4aefdd?q=80&w=200&auto=format&fit=crop",bucket:"products",created_at:"2025-04-15T10:30:00Z",width:1200,height:800,usage_count:3},{id:2,name:"banner-1.jpg",filename:"banner-1.jpg",original_filename:"banner-1.jpg",type:"image",file_size:1024*1024*3,url:"https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?q=80&w=200&auto=format&fit=crop",bucket:"vendors",created_at:"2025-04-10T14:20:00Z",width:1920,height:600,usage_count:1},{id:3,name:"product-video-1.mp4",filename:"product-video-1.mp4",original_filename:"product-video-1.mp4",type:"video",file_size:1024*1024*15,url:"https://example.com/video.mp4",bucket:"products",created_at:"2025-04-05T09:15:00Z",duration:"00:30",usage_count:2},{id:4,name:"logo.png",filename:"logo.png",original_filename:"logo.png",type:"image",file_size:1024*512,url:"https://images.unsplash.com/photo-1559925393-8be0ec4767c8?q=80&w=200&auto=format&fit=crop",bucket:"general",created_at:"2025-03-20T11:45:00Z",width:400,height:400,usage_count:5}])}finally{r(!1)}},te=Q=>{Q.target.files&&Q.target.files[0]&&b(Q.target.files[0])},G=async()=>{if(!v){z.error("الرجاء اختيار ملف");return}try{Y(!0);const Q=v.name.split(".").pop(),ie=`${Math.random().toString(36).substring(2,15)}_${Date.now()}.${Q}`,le=ie,{data:ae,error:se}=await ee.storage.from(j).upload(le,v,{cacheControl:"3600",upsert:!1});if(se)throw se;const{data:{publicUrl:ue}}=ee.storage.from(j).getPublicUrl(le),{data:U,error:oe}=await ee.from("media_files").insert([{filename:ie,original_filename:v.name,file_path:le,file_size:v.size,mime_type:v.type,bucket:j,is_public:!0,width:v.type.startsWith("image/")?1200:null,height:v.type.startsWith("image/")?800:null}]).select();if(oe)throw oe;z.success("تم رفع الملف بنجاح");const fe={id:U[0].id,name:v.name,filename:ie,original_filename:v.name,file_path:le,mime_type:v.type,type:v.type.startsWith("image/")?"image":v.type.startsWith("video/")?"video":v.type.startsWith("audio/")?"audio":"document",file_size:v.size,url:ue,bucket:j,created_at:new Date().toISOString(),width:v.type.startsWith("image/")?1200:null,height:v.type.startsWith("image/")?800:null,duration:v.type.startsWith("video/")?"00:30":null,usage_count:0};e([fe,...t]),u(!1),b(null)}catch(Q){console.error("Error uploading file:",Q),z.error("فشل في رفع الملف")}finally{Y(!1)}},B=async Q=>{if(window.confirm("هل أنت متأكد من حذف هذا الملف؟"))try{r(!0);const{data:ie,error:le}=await ee.from("media_files").select("*").eq("id",Q).single();if(le)throw le;const{error:ae}=await ee.storage.from(ie.bucket).remove([ie.file_path]);ae&&console.error("Error deleting from storage:",ae);const{error:se}=await ee.from("media_files").delete().eq("id",Q);if(se)throw se;e(t.filter(ue=>ue.id!==Q)),x&&x.id===Q&&(f(!1),g(null)),z.success("تم حذف الملف بنجاح")}catch(ie){console.error("Error deleting media:",ie),z.error("فشل في حذف الملف")}finally{r(!1)}},Z=async(Q,ie)=>{try{const{data:le,error:ae}=await ee.from("media_files").update({alt_text:ie.alt_text,title:ie.title,description:ie.description,updated_at:new Date().toISOString()}).eq("id",Q).select();if(ae)throw ae;e(t.map(se=>se.id===Q?{...se,...ie}:se)),x&&x.id===Q&&g({...x,...ie}),z.success("تم تحديث الملف بنجاح")}catch(le){console.error("Error updating media:",le),z.error("فشل في تحديث الملف")}},C=Q=>{if(Q===0)return"0 Bytes";const ie=1024,le=["Bytes","KB","MB","GB"],ae=Math.floor(Math.log(Q)/Math.log(ie));return parseFloat((Q/Math.pow(ie,ae)).toFixed(2))+" "+le[ae]},V=Q=>new Date(Q).toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric"}),I=Q=>{Q.preventDefault(),M(1),H()},X=Q=>{M(Q)},E=Math.ceil(R/O),K=()=>i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:t.map(Q=>i.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden group",children:[i.jsxs("div",{className:"relative aspect-square",children:[Q.type==="image"?i.jsx("img",{src:Q.url,alt:Q.name,className:"w-full h-full object-cover",onError:ie=>{ie.target.onerror=null,ie.target.src="https://via.placeholder.com/300x300?text=Image+Not+Found"}}):Q.type==="video"?i.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:i.jsxs("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}):i.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:i.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),i.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center space-x-2",children:[i.jsx("button",{onClick:()=>{g(Q),f(!0)},className:"p-2 bg-white rounded-full hover:bg-gray-100",children:i.jsxs("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),i.jsx("button",{onClick:()=>B(Q.id),className:"p-2 bg-white rounded-full hover:bg-gray-100",children:i.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),Q.type==="image"&&i.jsx("button",{onClick:()=>{navigator.clipboard.writeText(Q.url),z.success("تم نسخ رابط الصورة")},className:"p-2 bg-white rounded-full hover:bg-gray-100",children:i.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})]})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"font-medium text-gray-900 truncate",children:Q.original_filename||Q.filename}),i.jsxs("div",{className:"flex justify-between items-center mt-1",children:[i.jsx("p",{className:"text-sm text-gray-500",children:C(Q.file_size||Q.size)}),i.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded-full",children:Q.bucket})]}),Q.usage_count>0&&i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["استخدم ",Q.usage_count," مرة"]})]})]},Q.id))}),re=()=>i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الملف"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"النوع"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحجم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المجلد"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الاستخدامات"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"تاريخ الرفع"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(Q=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:Q.type==="image"?i.jsx("img",{src:Q.url,alt:Q.name,className:"h-10 w-10 rounded object-cover",onError:ie=>{ie.target.onerror=null,ie.target.src="https://via.placeholder.com/40?text=Error"}}):Q.type==="video"?i.jsx("div",{className:"h-10 w-10 rounded bg-gray-200 flex items-center justify-center text-gray-500",children:i.jsxs("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}):i.jsx("div",{className:"h-10 w-10 rounded bg-gray-200 flex items-center justify-center text-gray-500",children:i.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),i.jsxs("div",{className:"mr-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:Q.original_filename||Q.filename}),i.jsxs("div",{className:"text-sm text-gray-500",children:[Q.width&&Q.height&&`${Q.width}×${Q.height}`,Q.duration&&` • ${Q.duration}`]})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${Q.type==="image"?"bg-blue-100 text-blue-800":Q.type==="video"?"bg-purple-100 text-purple-800":Q.type==="audio"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:Q.type==="image"?"صورة":Q.type==="video"?"فيديو":Q.type==="audio"?"صوت":"مستند"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C(Q.file_size||Q.size)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Q.bucket}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Q.usage_count||0}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:V(Q.created_at||Q.uploaded_at)}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[i.jsx("button",{onClick:()=>{g(Q),f(!0)},className:"text-blue-600 hover:text-blue-900 ml-4",children:"عرض"}),i.jsx("button",{onClick:()=>B(Q.id),className:"text-red-600 hover:text-red-900",children:"حذف"})]})]},Q.id))})]})})});return n&&t.length===0?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:s}),i.jsx("button",{onClick:H,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"إدارة الوسائط"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>l("grid"),className:`px-3 py-1 rounded ${o==="grid"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض شبكي"}),i.jsx("button",{onClick:()=>l("table"),className:`px-3 py-1 rounded ${o==="table"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض جدول"})]}),i.jsx("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"رفع ملف جديد"})]})]}),i.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:i.jsxs("form",{onSubmit:I,className:"flex items-stretch gap-2",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx("input",{type:"text",value:N,onChange:Q=>S(Q.target.value),className:"w-full border rounded-lg px-3 py-2 pr-10",placeholder:"البحث عن الملفات..."}),i.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:i.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})})]}),i.jsx("div",{children:i.jsxs("select",{value:j,onChange:Q=>_(Q.target.value),className:"border rounded-lg px-3 py-2",children:[i.jsx("option",{value:Lt.GENERAL,children:"عام"}),i.jsx("option",{value:Lt.PRODUCTS,children:"المنتجات"}),i.jsx("option",{value:Lt.VENDORS,children:"البائعين"}),i.jsx("option",{value:Lt.PROFILES,children:"الملفات الشخصية"}),i.jsx("option",{value:Lt.ADVERTISEMENTS,children:"الإعلانات"})]})}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"بحث"})]})}),n?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:s}),i.jsx("button",{onClick:H,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):t.length===0?i.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md text-center",children:[i.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"لا توجد وسائط"}),i.jsx("p",{className:"text-gray-500 mb-4",children:"لم يتم العثور على أي وسائط. بدء بالرفع للاستفادة من مكتبة الوسائط."}),i.jsx("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"رفع ملف جديد"})]}):i.jsxs(i.Fragment,{children:[o==="grid"?K():re(),E>1&&i.jsx("div",{className:"flex justify-center mt-6",children:i.jsxs("nav",{className:"inline-flex bg-white rounded-md shadow",children:[i.jsx("button",{onClick:()=>X(P-1),disabled:P===1,className:`px-3 py-2 rounded-l-md border border-gray-300 ${P===1?"opacity-50 cursor-not-allowed":"hover:bg-gray-50"}`,children:"السابق"}),[...Array(E).keys()].map(Q=>i.jsx("button",{onClick:()=>X(Q+1),className:`px-3 py-2 border-t border-b border-gray-300 ${P===Q+1?"bg-blue-50 text-blue-600 font-bold":"hover:bg-gray-50"}`,children:Q+1},Q+1)),i.jsx("button",{onClick:()=>X(P+1),disabled:P===E,className:`px-3 py-2 rounded-r-md border border-gray-300 ${P===E?"opacity-50 cursor-not-allowed":"hover:bg-gray-50"}`,children:"التالي"})]})})]}),d&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx("div",{className:"fixed inset-0 bg-black opacity-30",onClick:()=>u(!1)}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx("h2",{className:"text-2xl font-bold mb-6",children:"رفع ملف جديد"}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المجلد"}),i.jsxs("select",{value:j,onChange:Q=>_(Q.target.value),className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:Lt.GENERAL,children:"عام"}),i.jsx("option",{value:Lt.PRODUCTS,children:"المنتجات"}),i.jsx("option",{value:Lt.VENDORS,children:"البائعين"}),i.jsx("option",{value:Lt.PROFILES,children:"الملفات الشخصية"}),i.jsx("option",{value:Lt.ADVERTISEMENTS,children:"الإعلانات"})]})]}),i.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-blue-500 transition-colors",children:[i.jsx("input",{type:"file",onChange:te,className:"hidden",id:"file-upload"}),i.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[i.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:i.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),i.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[i.jsx("p",{children:"اسحب وأفلت الملف هنا، أو"}),i.jsx("p",{className:"text-blue-600",children:"اضغط للاختيار"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, GIF, PDF, MP4 حتى 10 ميجابايت"})]})]}),v&&i.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("svg",{className:"h-5 w-5 text-gray-400 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:v.name}),i.jsx("p",{className:"text-xs text-gray-500",children:C(v.size)})]})]}),i.jsx("button",{onClick:()=>b(null),className:"text-red-600 hover:text-red-800",children:"حذف"})]})}),i.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[i.jsx("button",{onClick:()=>{u(!1),b(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800 ml-2",children:"إلغاء"}),i.jsx("button",{onClick:G,disabled:!v||T,className:`px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 ${!v||T?"opacity-50 cursor-not-allowed":""}`,children:T?"جاري الرفع...":"رفع"})]})]})]})}),p&&x&&i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx("div",{className:"fixed inset-0 bg-black opacity-30",onClick:()=>{f(!1),g(null)}}),i.jsx("div",{className:"relative bg-white rounded-lg p-8 max-w-4xl w-full mx-4",children:i.jsx(NF,{media:x,onClose:()=>{f(!1),g(null)},onDelete:B,onUpdate:Z})})]})})]})}const SF=async()=>{try{const{data:t,error:e}=await ee.rpc("get_all_vendor_wallets");if(e){console.error("Error using RPC function:",e);const{data:n,error:r}=await ee.from("vendor_wallets").select("*");if(r)throw r;return n||[]}return t||[]}catch(t){throw console.error("Error fetching vendor wallets:",t),t}},CF=async(t,e,n="شحن رصيد")=>{try{const{data:r,error:s}=await ee.rpc("charge_vendor_wallet",{p_vendor_id:t,p_amount:e,p_description:n});if(s)throw s;return r}catch(r){throw console.error("Error charging vendor wallet:",r),r}},ok=async()=>{try{const{data:t,error:e}=await ee.from("app_settings").select("settings").single();if(e)throw e;return t.settings.payment||{}}catch(t){throw console.error("Error fetching payment settings:",t),t}},lk=async t=>{try{const{data:e,error:n}=await ee.from("app_settings").select("settings").single();if(n)throw n;const r={...e.settings,payment:t},{error:s}=await ee.from("app_settings").update({settings:r}).eq("id",e.id);if(s)throw s;return!0}catch(e){throw console.error("Error updating payment settings:",e),e}};function EF(){const[t,e]=w.useState({total:0,pending:0}),[n,r]=w.useState([]),[s,a]=w.useState([]),[o,l]=w.useState(!0),[d,u]=w.useState(null),[p,f]=w.useState(!1),[x,g]=w.useState(""),[v,b]=w.useState(null),[j,_]=w.useState(!1),N={name:{type:"text",label:"اسم المتجر",placeholder:"البحث باسم المتجر",value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"active",label:"نشط"},{value:"inactive",label:"غير نشط"}],value:""},wallet_enabled:{type:"select",label:"المحفظة",placeholder:"الكل",options:[{value:"true",label:"مفعلة"},{value:"false",label:"غير مفعلة"}],value:""}},{filters:S,filterData:P,handleFilterChange:M}=Fn(N),R=w.useCallback(async()=>{try{l(!0),u(null);const O=await SF(),H=O.reduce((B,Z)=>B+(Z.balance||0),0),te=O.reduce((B,Z)=>B+(Z.pending_balance||0),0);e({total:H,pending:te});const G=O.map(B=>{var Z,C;return{id:B.vendor_id,name:((Z=B.vendor)==null?void 0:Z.store_name)||"متجر بدون اسم",balance:B.balance||0,wallet_enabled:!0,auto_charge:B.auto_charge||!1,total_orders:B.total_orders||0,total_sales:B.total_earnings||0,status:((C=B.vendor)==null?void 0:C.status)||"inactive"}});a(G);try{const{data:B,error:Z}=await ee.from("wallet_transactions").select(`
            *,
            wallet:wallet_id(user_id),
            order:order_id(*)
          `).order("created_at",{ascending:!1}).limit(10);if(Z)throw Z;r(B||[])}catch(B){console.error("Error fetching transactions:",B),r([{id:1,order_id:"123",amount:500,type:"debit",payment_type:"withdrawal",status:"completed",description:"سحب رصيد",created_at:new Date().toISOString()},{id:2,order_id:"124",amount:150,type:"credit",payment_type:"cash",status:"completed",description:"مبلغ طلب + توصيل",created_at:new Date(Date.now()-864e5).toISOString()}])}}catch(O){console.error("Error fetching wallet data:",O),u("فشل في تحميل بيانات المحفظة. الرجاء المحاولة مرة أخرى."),z.error("فشل في تحميل بيانات المحفظة")}finally{l(!1)}},[]);w.useEffect(()=>{R()},[R]);const A=async()=>{if(!v||!x||x<=0){z.error("الرجاء اختيار المتجر وإدخال المبلغ");return}try{_(!0),await CF(v.id,parseFloat(x),`شحن رصيد بواسطة المدير: ${x} شيكل`),z.success(`تم شحن ${x} شيكل بنجاح لحساب ${v.name}`),f(!1),g(""),b(null),R()}catch(O){console.error("Error charging wallet:",O),z.error("فشل في عملية الشحن")}finally{_(!1)}},T=O=>{switch(O.type){case"credit":return{color:"text-green-600",prefix:"+",text:O.payment_type==="cash"?"إيداع نقدي":O.payment_type==="admin_charge"?"شحن بواسطة المدير":"إيداع محفظة"};case"debit":return{color:"text-red-600",prefix:"-",text:O.payment_type==="withdrawal"?"سحب رصيد":O.payment_type==="commission"?"عمولة":"خصم"};default:return{color:"text-gray-600",prefix:"",text:"معاملة"}}},Y=P(s);return o&&s.length===0?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):d?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:d}),i.jsx("button",{onClick:R,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"الرصيد المتاح"}),i.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["₪",t.total-t.pending]}),i.jsxs("p",{className:"text-gray-500 mt-2",children:["الرصيد الكلي: ₪",t.total]}),i.jsx("button",{onClick:()=>f(!0),className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"شحن رصيد"})]}),i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"الرصيد المعلق"}),i.jsxs("div",{className:"text-3xl font-bold text-orange-600",children:["₪",t.pending]}),i.jsx("p",{className:"text-gray-500 mt-2",children:"سيتم تحويله خلال 24 ساعة"})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"محافظ البائعين"}),i.jsx("button",{onClick:()=>f(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"شحن رصيد"})]}),i.jsx(Rn,{filters:S,onFilterChange:M}),i.jsx("div",{className:"overflow-x-auto mt-4",children:i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-right py-3 px-4 bg-gray-50",children:"المتجر"}),i.jsx("th",{className:"text-right py-3 px-4 bg-gray-50",children:"الرصيد"}),i.jsx("th",{className:"text-right py-3 px-4 bg-gray-50",children:"المحفظة"}),i.jsx("th",{className:"text-right py-3 px-4 bg-gray-50",children:"الشحن التلقائي"}),i.jsx("th",{className:"text-right py-3 px-4 bg-gray-50",children:"عدد الطلبات"}),i.jsx("th",{className:"text-right py-3 px-4 bg-gray-50",children:"إجمالي المبيعات"}),i.jsx("th",{className:"text-right py-3 px-4 bg-gray-50",children:"الحالة"}),i.jsx("th",{className:"text-right py-3 px-4 bg-gray-50",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:Y.map(O=>i.jsxs("tr",{children:[i.jsx("td",{className:"py-3 px-4",children:O.name}),i.jsxs("td",{className:"py-3 px-4 font-semibold",children:["₪",O.balance]}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${O.wallet_enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:O.wallet_enabled?"مفعلة":"غير مفعلة"})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${O.auto_charge?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:O.auto_charge?"مفعل":"غير مفعل"})}),i.jsx("td",{className:"py-3 px-4",children:O.total_orders}),i.jsxs("td",{className:"py-3 px-4",children:["₪",O.total_sales]}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${O.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:O.status==="active"?"نشط":"غير نشط"})}),i.jsxs("td",{className:"py-3 px-4",children:[i.jsx("button",{onClick:()=>{b(O),f(!0)},className:"text-blue-600 hover:text-blue-800 ml-3",children:"شحن رصيد"}),i.jsx("button",{onClick:()=>{},className:"text-gray-600 hover:text-gray-800",children:"السجل"})]})]},O.id))})]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"آخر المعاملات"}),i.jsxs("table",{className:"min-w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-right py-2",children:"التاريخ"}),i.jsx("th",{className:"text-right py-2",children:"النوع"}),i.jsx("th",{className:"text-right py-2",children:"المبلغ"}),i.jsx("th",{className:"text-right py-2",children:"الحالة"})]})}),i.jsx("tbody",{children:n.map(O=>{const H=T(O);return i.jsxs("tr",{children:[i.jsx("td",{className:"py-2",children:new Date(O.created_at).toLocaleDateString("ar-SA")}),i.jsx("td",{className:"py-2",children:H.text}),i.jsxs("td",{className:`py-2 ${H.color}`,children:[H.prefix,"₪",Math.abs(O.amount)]}),i.jsx("td",{className:"py-2",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-sm ${O.status==="completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:O.status==="completed"?"مكتمل":"معلق"})})]},O.id)})})]})]}),i.jsx(be,{open:p,onClose:()=>{f(!1),b(null),g("")},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(be.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx(be.Title,{className:"text-2xl font-bold mb-6",children:"شحن رصيد"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اختر المتجر"}),i.jsxs("select",{value:(v==null?void 0:v.id)||"",onChange:O=>{const H=s.find(te=>te.id===O.target.value);b(H)},className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"",children:"اختر المتجر"}),s.map(O=>i.jsxs("option",{value:O.id,children:[O.name," (رصيد: ₪",O.balance,")"]},O.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المبلغ (₪)"}),i.jsx("input",{type:"number",value:x,onChange:O=>g(O.target.value),className:"w-full border rounded-md px-3 py-2",min:"1",step:"0.01",placeholder:"أدخل المبلغ"})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{onClick:()=>{f(!1),b(null),g("")},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{onClick:A,disabled:j,className:`px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 ${j?"opacity-70 cursor-not-allowed":""}`,children:j?"جاري الشحن...":"شحن الرصيد"})]})]})]})]})})]})}function TF(){const[t,e]=w.useState(!1),[n,r]=w.useState({deliveryCommission:15,autoDeductFromDriver:!0,autoChargeVendor:!0,wallet:{enabled:!0,name:"توصيل محفظة (الدفع المسبق)",description:"عند تفعيل هذا الخيار، يتم التعامل مع الطلبات المدفوعة مسبقًا (عبر المحفظة أو الدفع الإلكتروني)",steps:["يُعتبر التوصيل في هذه الحالة مدفوعًا مسبقًا","يتم شحن محفظة البائع بالكامل بقيمة الطلب + التوصيل","يتم خصم نفس القيمة من محفظة السائق تلقائيًا","السائق يستلم من الزبون فقط أجرة التوصيل يدًا بيد"],note:"✅ هذا النظام مناسب لتطبيقات الدفع المسبق والطلبات التي تُدفع أونلاين"},traditional:{enabled:!0,name:"المحفظة التقليدية (الدفع عند الاستلام)",description:"في هذا النظام، يتم تقسيم المبلغ مباشرة عند التسليم",steps:["الزبون يدفع كامل المبلغ (الطلب + التوصيل) للسائق","يتم تحويل قيمة الطلب إلى محفظة البائع","ويتم إضافة قيمة التوصيل إلى محفظة السائق"],note:"✅ هذا الخيار مناسب للطلبات التي يتم دفعها نقدًا عند التسليم"}});w.useEffect(()=>{(async()=>{try{e(!0);const l=await ok();l&&l.wallet&&r(l.wallet)}catch(l){console.error("Error loading wallet settings:",l),z.error("فشل في تحميل إعدادات المحفظة")}finally{e(!1)}})()},[]);const s=()=>{try{e(!0);const o={...n};lk(o),z.success("تم حفظ إعدادات المحفظة بنجاح")}catch(o){console.error("Error saving wallet settings:",o),z.error("فشل في حفظ إعدادات المحفظة")}finally{e(!1)}},a=({type:o,method:l})=>i.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-lg shadow-md p-6 border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`p-2 rounded-full ${o==="wallet"?"bg-blue-100 text-blue-600":"bg-green-100 text-green-600"}`,children:o==="wallet"?"💳":"💰"}),i.jsx("h3",{className:"text-xl font-bold",children:l.name})]}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:l.enabled,onChange:d=>r({...n,[o]:{...l,enabled:d.target.checked}}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-100",children:i.jsx("p",{className:"text-gray-600",children:l.description})}),i.jsxs("div",{children:[i.jsxs("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[i.jsx("span",{className:"text-blue-600",children:"📝"}),"خطوات العمل"]}),i.jsxs("div",{className:"space-y-2",children:[l.steps.map((d,u)=>i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:d,onChange:p=>{const f=[...l.steps];f[u]=p.target.value,r({...n,[o]:{...l,steps:f}})},className:"flex-1 border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"}),i.jsx("button",{onClick:()=>{const p=l.steps.filter((f,x)=>x!==u);r({...n,[o]:{...l,steps:p}})},className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:"✕"})]},u)),i.jsxs("button",{onClick:()=>{const d=[...l.steps,""];r({...n,[o]:{...l,steps:d}})},className:"text-blue-600 hover:text-blue-800 text-sm flex items-center gap-1 px-3 py-2 rounded-lg hover:bg-blue-50 transition-colors",children:[i.jsx("span",{children:"+"}),"إضافة خطوة"]})]})]}),i.jsx("div",{className:`p-4 rounded-lg ${o==="wallet"?"bg-blue-50 text-blue-800":"bg-green-50 text-green-800"}`,children:i.jsx("p",{children:l.note})})]})]});return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:"⚙️"}),i.jsx("h2",{className:"text-2xl font-bold",children:"إعدادات المحفظة"})]}),i.jsxs("button",{onClick:s,disabled:t,className:`bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 ${t?"opacity-70 cursor-not-allowed":""}`,children:[i.jsx("span",{children:"💾"}),t?"جاري الحفظ...":"حفظ التغييرات"]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-lg shadow-md p-6 border border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-full",children:"💰"}),i.jsx("h3",{className:"text-xl font-bold",children:"إعدادات العمولة والخصومات"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-100",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نسبة عمولة التوصيل (في الدفع المسبق)"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"number",value:n.deliveryCommission,onChange:o=>r({...n,deliveryCommission:Number(o.target.value)}),className:"w-32 border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",min:"0",max:"100"}),i.jsx("span",{className:"text-gray-600",children:"%"})]})]}),i.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-100 space-y-3",children:[i.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg transition-colors cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:n.autoDeductFromDriver,onChange:o=>r({...n,autoDeductFromDriver:o.target.checked}),className:"rounded text-blue-600 focus:ring-blue-500 w-5 h-5"}),i.jsx("span",{children:"خصم تلقائي من السائق (الدفع المسبق)"})]}),i.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg transition-colors cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:n.autoChargeVendor,onChange:o=>r({...n,autoChargeVendor:o.target.checked}),className:"rounded text-blue-600 focus:ring-blue-500 w-5 h-5"}),i.jsx("span",{children:"شحن محفظة البائع تلقائيًا"})]})]}),i.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-lg",children:[i.jsxs("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[i.jsx("span",{children:"🧪"}),"مثال توضيحي"]}),i.jsx("p",{className:"text-gray-600 mb-4",children:"الطلب: 70 شيكل (60 للمنتج + 10 توصيل)"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-blue-600 bg-white px-4 py-2 rounded-lg shadow-sm",children:"🔹 محفظة البائع = +70 شيكل"}),i.jsx("p",{className:"text-red-600 bg-white px-4 py-2 rounded-lg shadow-sm",children:"🔹 محفظة السائق = -70 شيكل"}),i.jsx("p",{className:"text-green-600 bg-white px-4 py-2 rounded-lg shadow-sm",children:"🔹 السائق يستلم فقط 10 شيكل من الزبون مباشرة"})]})]})]})]}),i.jsx(a,{type:"wallet",method:n.wallet}),i.jsx(a,{type:"traditional",method:n.traditional})]})}function PF(){const[t]=w.useState([{id:1,title:"طلب جديد",message:"تم استلام طلب جديد من متجر كوفي",time:"10:30",read:!1},{id:2,title:"اكتمال طلب",message:"تم اكتمال الطلب رقم #123",time:"09:45",read:!0},{id:3,title:"تسجيل سائق",message:"سائق جديد بحاجة للموافقة",time:"09:00",read:!1}]);return i.jsx("div",{className:"bg-white rounded-lg shadow",children:i.jsxs("div",{className:"p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"الإشعارات"}),i.jsx("div",{className:"space-y-4",children:t.map(e=>i.jsx("div",{className:`p-4 rounded-lg border ${e.read?"bg-gray-50":"bg-blue-50 border-blue-200"}`,children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:e.title}),i.jsx("p",{className:"text-gray-600 mt-1",children:e.message})]}),i.jsx("span",{className:"text-sm text-gray-500",children:e.time})]})},e.id))})]})})}const DF=q.lazy(()=>Ji(()=>import("./UserSettings-AP2irocd.js"),[]));function OF(){const{settings:t,saveSettings:e}=qh(),[n,r]=w.useState({store:{...t.store},social:{...t.social},notifications:{...t.notifications},login:{...t.login}}),[s,a]=w.useState("general"),o=async()=>{try{await e(n)&&(document.title=`لوحة تحكم ${n.store.name}`,z.success("تم حفظ الإعدادات بنجاح"))}catch{z.error("فشل في حفظ الإعدادات")}},l=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"معلومات المتجر"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم المتجر"}),i.jsx("input",{type:"text",value:n.store.name,onChange:f=>r({...n,store:{...n.store,name:f.target.value}}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),i.jsx("input",{type:"email",value:n.store.email,onChange:f=>r({...n,store:{...n.store,email:f.target.value}}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم الهاتف"}),i.jsx("input",{type:"tel",value:n.store.phone,onChange:f=>r({...n,store:{...n.store,phone:f.target.value}}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"العملة"}),i.jsxs("select",{value:n.store.currency,onChange:f=>r({...n,store:{...n.store,currency:f.target.value}}),className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"ILS",children:"₪ شيكل"}),i.jsx("option",{value:"USD",children:"$ دولار"}),i.jsx("option",{value:"JOD",children:"د.أ دينار"})]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"العنوان"}),i.jsx("input",{type:"text",value:n.store.address,onChange:f=>r({...n,store:{...n.store,address:f.target.value}}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"وصف المتجر"}),i.jsx("textarea",{value:n.store.description,onChange:f=>r({...n,store:{...n.store,description:f.target.value}}),rows:"3",className:"w-full border rounded-md px-3 py-2"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"روابط التواصل الاجتماعي"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"فيسبوك"}),i.jsx("input",{type:"url",value:n.social.facebook,onChange:f=>r({...n,social:{...n.social,facebook:f.target.value}}),className:"w-full border rounded-md px-3 py-2",placeholder:"https://facebook.com/..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تويتر"}),i.jsx("input",{type:"url",value:n.social.twitter,onChange:f=>r({...n,social:{...n.social,twitter:f.target.value}}),className:"w-full border rounded-md px-3 py-2",placeholder:"https://twitter.com/..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"انستغرام"}),i.jsx("input",{type:"url",value:n.social.instagram,onChange:f=>r({...n,social:{...n.social,instagram:f.target.value}}),className:"w-full border rounded-md px-3 py-2",placeholder:"https://instagram.com/..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"واتساب"}),i.jsx("input",{type:"tel",value:n.social.whatsapp,onChange:f=>r({...n,social:{...n.social,whatsapp:f.target.value}}),className:"w-full border rounded-md px-3 py-2",placeholder:"رقم الواتساب"})]})]})]})]}),d=()=>i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"إعدادات الإشعارات"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("label",{className:"flex items-center space-x-3",children:[i.jsx("input",{type:"checkbox",checked:n.notifications.email,onChange:f=>r({...n,notifications:{...n.notifications,email:f.target.checked}}),className:"rounded text-blue-600 focus:ring-blue-500"}),i.jsx("span",{children:"إشعارات البريد الإلكتروني"})]}),i.jsxs("label",{className:"flex items-center space-x-3",children:[i.jsx("input",{type:"checkbox",checked:n.notifications.sms,onChange:f=>r({...n,notifications:{...n.notifications,sms:f.target.checked}}),className:"rounded text-blue-600 focus:ring-blue-500"}),i.jsx("span",{children:"إشعارات الرسائل النصية"})]}),i.jsxs("label",{className:"flex items-center space-x-3",children:[i.jsx("input",{type:"checkbox",checked:n.notifications.push,onChange:f=>r({...n,notifications:{...n.notifications,push:f.target.checked}}),className:"rounded text-blue-600 focus:ring-blue-500"}),i.jsx("span",{children:"إشعارات التطبيق"})]})]})]}),u=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"إعدادات صفحة تسجيل الدخول"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رابط شعار صفحة تسجيل الدخول"}),i.jsx("input",{type:"url",value:n.login.logo,onChange:f=>r({...n,login:{...n.login,logo:f.target.value}}),className:"w-full border rounded-md px-3 py-2",placeholder:"https://example.com/logo.png"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رابط خلفية صفحة تسجيل الدخول"}),i.jsx("input",{type:"url",value:n.login.background,onChange:f=>r({...n,login:{...n.login,background:f.target.value}}),className:"w-full border rounded-md px-3 py-2",placeholder:"https://example.com/background.jpg"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"معاينة صفحة تسجيل الدخول"}),i.jsx("div",{className:"border rounded-lg overflow-hidden",children:i.jsx("div",{className:"relative",style:{background:n.login.background?`url(${n.login.background}) center/cover no-repeat`:"linear-gradient(135deg, #1e293b 0%, #0f172a 100%)",padding:"2rem",minHeight:"400px"},children:i.jsx("div",{className:"relative z-10 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white bg-opacity-95 backdrop-blur-sm p-8 rounded-lg shadow-2xl w-full max-w-md border border-gray-200",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"flex justify-center mb-4",children:n.login.logo?i.jsx("img",{src:n.login.logo,alt:"Logo",className:"h-20 w-20 rounded-lg shadow-lg"}):i.jsx("div",{className:"h-20 w-20 rounded-lg shadow-lg bg-blue-600 text-white flex items-center justify-center text-3xl",children:"🛒"})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"تسجيل الدخول"}),i.jsxs("p",{className:"text-gray-600 mt-2",children:["مرحباً بك في نظام ",n.store.name]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"البريد الإلكتروني"}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"email",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-yellow-500 focus:border-yellow-500 shadow-sm",placeholder:"أدخل البريد الإلكتروني",disabled:!0})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"كلمة المرور"}),i.jsx("div",{className:"relative",children:i.jsx("input",{type:"password",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-yellow-500 focus:border-yellow-500 shadow-sm",placeholder:"أدخل كلمة المرور",disabled:!0})})]}),i.jsx("div",{children:i.jsx("button",{className:"w-full bg-gradient-to-r from-yellow-500 to-yellow-600 text-slate-900 py-2 rounded-md hover:from-yellow-600 hover:to-yellow-700 transition-colors shadow-md font-bold opacity-70 cursor-not-allowed",disabled:!0,children:"تسجيل الدخول"})})]})]})})})})]})]}),p=()=>i.jsx("div",{id:"userSettings",children:i.jsx(w.Suspense,{fallback:i.jsx("div",{children:"جاري التحميل..."}),children:i.jsx(DF,{})})});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"الإعدادات"}),i.jsx("button",{onClick:o,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"حفظ التغييرات"})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[i.jsx("div",{className:"border-b",children:i.jsxs("nav",{className:"flex gap-4 px-6","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>a("general"),className:`py-4 px-4 text-sm font-medium border-b-2 -mb-px ${s==="general"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"إعدادات عامة"}),i.jsx("button",{onClick:()=>a("notifications"),className:`py-4 px-4 text-sm font-medium border-b-2 -mb-px ${s==="notifications"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"إعدادات الإشعارات"}),i.jsx("button",{onClick:()=>a("login"),className:`py-4 px-4 text-sm font-medium border-b-2 -mb-px ${s==="login"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"إعدادات تسجيل الدخول"}),i.jsx("button",{onClick:()=>a("user"),className:`py-4 px-4 text-sm font-medium border-b-2 -mb-px ${s==="user"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"إعدادات المستخدم"})]})}),i.jsxs("div",{className:"p-6",children:[s==="general"&&l(),s==="notifications"&&d(),s==="login"&&u(),s==="user"&&p()]})]})]})}function MF(){const[t,e]=w.useState([]),[n,r]=w.useState([]),[s,a]=w.useState([]),[o,l]=w.useState(!0),[d,u]=w.useState(null),[p,f]=w.useState(!1),[x,g]=w.useState(null),[v,b]=w.useState({title:"",description:"",vendor_id:"",vendor_category_id:"",image_url:"",link:"",start_date:"",end_date:"",status:"draft",type:"banner",position:"home",priority:1});w.useEffect(()=>{j()},[]);const j=async()=>{try{l(!0),u(null);const{data:G,error:B}=await ee.from("vendors").select("id, store_name").order("store_name");if(B)throw B;r(G||[]);const{data:Z,error:C}=await ee.from("vendor_categories_table").select("id, name").order("name");if(C)throw C;a(Z||[]);const{data:V,error:I}=await ee.from("advertisements").select(`
          *,
          vendor:vendor_id(store_name),
          vendor_category:vendor_category_id(name)
        `).order("created_at",{ascending:!1});if(I)throw I;e(V||[])}catch(G){console.error("Error fetching data:",G),u("فشل في تحميل البيانات. الرجاء المحاولة مرة أخرى."),z.error("فشل في تحميل البيانات")}finally{l(!1)}},_={title:{type:"text",label:"العنوان",placeholder:"البحث بالعنوان",value:""},type:{type:"select",label:"النوع",placeholder:"جميع الأنواع",options:[{value:"banner",label:"بانر"},{value:"popup",label:"نافذة منبثقة"},{value:"slider",label:"شريحة عرض"}],value:""},position:{type:"select",label:"الموقع",placeholder:"جميع المواقع",options:[{value:"home",label:"الرئيسية"},{value:"category",label:"التصنيفات"},{value:"product",label:"المنتجات"},{value:"checkout",label:"الدفع"},{value:"vendor_category",label:"قسم البائعين"}],value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"draft",label:"مسودة"},{value:"pending",label:"معلق"},{value:"active",label:"نشط"},{value:"expired",label:"منتهي"}],value:""}},{filters:N,filterData:S,handleFilterChange:P}=Fn(_),M=async G=>{if(G.preventDefault(),!v.title||!v.image_url){z.error("الرجاء تعبئة جميع الحقول المطلوبة");return}try{if(v.position==="vendor_category"&&!v.vendor_category_id){z.error("الرجاء اختيار قسم البائعين");return}if(x){const{data:B,error:Z}=await ee.from("advertisements").update({title:v.title,description:v.description,vendor_id:v.vendor_id||null,vendor_category_id:v.position==="vendor_category"?v.vendor_category_id:null,image_url:v.image_url,link:v.link,start_date:v.start_date,end_date:v.end_date,status:v.status,type:v.type,position:v.position,priority:parseInt(v.priority)}).eq("id",x.id).select();if(Z)throw Z;e(C=>C.map(V=>V.id===x.id?{...B[0],vendor:n.find(I=>I.id===B[0].vendor_id)||null,vendor_category:s.find(I=>I.id===B[0].vendor_category_id)||null}:V)),z.success("تم تحديث الإعلان بنجاح"),f(!1),g(null)}else{const{data:B,error:Z}=await ee.from("advertisements").insert([{title:v.title,description:v.description,vendor_id:v.vendor_id||null,vendor_category_id:v.position==="vendor_category"?v.vendor_category_id:null,image_url:v.image_url,link:v.link,start_date:v.start_date,end_date:v.end_date,status:v.status,type:v.type,position:v.position,priority:parseInt(v.priority)}]).select();if(Z)throw Z;e(C=>[{...B[0],vendor:n.find(V=>V.id===B[0].vendor_id)||null,vendor_category:s.find(V=>V.id===B[0].vendor_category_id)||null},...C]),z.success("تم إضافة الإعلان بنجاح"),f(!1)}b({title:"",description:"",vendor_id:"",vendor_category_id:"",image_url:"",link:"",start_date:"",end_date:"",status:"draft",type:"banner",position:"home",priority:1})}catch(B){console.error("Error saving advertisement:",B),z.error("فشل في حفظ الإعلان")}},R=async G=>{if(window.confirm("هل أنت متأكد من حذف هذا الإعلان؟"))try{const{error:B}=await ee.from("advertisements").delete().eq("id",G);if(B)throw B;e(t.filter(Z=>Z.id!==G)),z.success("تم حذف الإعلان بنجاح")}catch(B){console.error("Error deleting advertisement:",B),z.error("فشل في حذف الإعلان")}},A=G=>{switch(G){case"banner":return"بانر";case"popup":return"نافذة منبثقة";case"slider":return"شريحة عرض";default:return G}},T=G=>{switch(G){case"home":return"الرئيسية";case"category":return"التصنيفات";case"product":return"المنتجات";case"checkout":return"الدفع";case"vendor_category":return"قسم البائعين";default:return G}},Y=G=>{switch(G){case"draft":return"مسودة";case"pending":return"معلق";case"active":return"نشط";case"expired":return"منتهي";default:return G}},O=G=>{switch(G){case"draft":return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800";case"active":return"bg-green-100 text-green-800";case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},H=({preview:G})=>{G&&b({...v,image_url:G})},te=S(t);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"الإعلانات"}),i.jsx("button",{onClick:()=>{g(null),b({title:"",description:"",vendor_id:"",vendor_category_id:"",image_url:"",link:"",start_date:"",end_date:"",status:"draft",type:"banner",position:"home",priority:1}),f(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة إعلان جديد"})]}),i.jsx(Rn,{filters:N,onFilterChange:P}),o?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):d?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:d}),i.jsx("button",{onClick:j,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):te.length===0?i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-100 text-blue-600 rounded-full mx-auto flex items-center justify-center mb-4",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"لا توجد إعلانات"}),i.jsx("p",{className:"text-gray-500 mb-6",children:"لم يتم العثور على أي إعلانات متطابقة مع معايير البحث المحددة."}),i.jsx("button",{onClick:()=>{g(null),b({title:"",description:"",vendor_id:"",vendor_category_id:"",image_url:"",link:"",start_date:"",end_date:"",status:"draft",type:"banner",position:"home",priority:1}),f(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة أول إعلان"})]}):i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الصورة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العنوان"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المتجر"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"قسم البائعين"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"النوع"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الموقع"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الفترة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإحصائيات"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:te.map(G=>{var B,Z;return i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"h-16 w-24 bg-gray-200 rounded overflow-hidden",children:G.image_url?i.jsx("img",{src:G.image_url,alt:G.title,className:"h-full w-full object-cover",onError:C=>{C.target.onerror=null,C.target.src="data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22100%22%20height%3D%2280%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Crect%20width%3D%22100%22%20height%3D%2280%22%20fill%3D%22%23e2e8f0%22%3E%3C%2Frect%3E%3Ctext%20x%3D%2250%22%20y%3D%2240%22%20font-size%3D%2210%22%20text-anchor%3D%22middle%22%20alignment-baseline%3D%22middle%22%20font-family%3D%22Arial%2C%20sans-serif%22%20fill%3D%22%2364748b%22%3E%D8%A5%D8%B9%D9%84%D8%A7%D9%86%3C%2Ftext%3E%3C%2Fsvg%3E"}}):i.jsx("div",{className:"h-full w-full flex items-center justify-center text-gray-400",children:"لا توجد صورة"})})}),i.jsxs("td",{className:"px-6 py-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:G.title}),G.description&&i.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:G.description})]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm text-gray-900",children:((B=G.vendor)==null?void 0:B.store_name)||"-"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm text-gray-900",children:((Z=G.vendor_category)==null?void 0:Z.name)||"-"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm text-gray-900",children:A(G.type)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm text-gray-900",children:T(G.position)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"text-sm text-gray-900",children:[new Date(G.start_date).toLocaleDateString("ar-SA"),i.jsx("br",{}),new Date(G.end_date).toLocaleDateString("ar-SA")]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${O(G.status)}`,children:Y(G.status)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i.jsxs("div",{className:"flex flex-col",children:[i.jsxs("span",{children:["المشاهدات: ",G.views||0]}),i.jsxs("span",{children:["النقرات: ",G.clicks||0]}),i.jsx("span",{className:"text-xs",children:G.views>0?`${(G.clicks/G.views*100).toFixed(1)}% معدل النقر`:"0% معدل النقر"})]})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[i.jsx("button",{onClick:()=>{g(G),b({title:G.title,description:G.description||"",vendor_id:G.vendor_id||"",vendor_category_id:G.vendor_category_id||"",image_url:G.image_url,link:G.link||"",start_date:G.start_date||"",end_date:G.end_date||"",status:G.status,type:G.type,position:G.position,priority:G.priority}),f(!0)},className:"text-blue-600 hover:text-blue-800 ml-4",children:"تعديل"}),i.jsx("button",{onClick:()=>R(G.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},G.id)})})]})})}),i.jsx(be,{open:p,onClose:()=>f(!1),className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(be.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-6 w-full max-w-2xl mx-4",children:[i.jsx(be.Title,{className:"text-2xl font-bold mb-4",children:x?"تعديل الإعلان":"إضافة إعلان جديد"}),i.jsxs("form",{onSubmit:M,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["العنوان ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:v.title,onChange:G=>b({...v,title:G.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الوصف"}),i.jsx("textarea",{value:v.description,onChange:G=>b({...v,description:G.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المتجر"}),i.jsxs("select",{value:v.vendor_id,onChange:G=>b({...v,vendor_id:G.target.value}),className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"",children:"اختر المتجر"}),n.map(G=>i.jsx("option",{value:G.id,children:G.store_name},G.id))]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["الموقع ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:v.position,onChange:G=>b({...v,position:G.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"home",children:"الرئيسية"}),i.jsx("option",{value:"category",children:"التصنيفات"}),i.jsx("option",{value:"product",children:"المنتجات"}),i.jsx("option",{value:"checkout",children:"الدفع"}),i.jsx("option",{value:"vendor_category",children:"قسم البائعين"})]})]}),v.position==="vendor_category"&&i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["قسم البائعين ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:v.vendor_category_id,onChange:G=>b({...v,vendor_category_id:G.target.value}),className:"w-full border rounded-md px-3 py-2",required:v.position==="vendor_category",children:[i.jsx("option",{value:"",children:"اختر قسم البائعين"}),s.map(G=>i.jsx("option",{value:G.id,children:G.name},G.id))]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["صورة الإعلان ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx(ps,{type:"image",preview:v.image_url,onUpload:H,storeInSupabase:!0,bucket:Lt.ADVERTISEMENTS})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رابط الإعلان"}),i.jsx("input",{type:"text",value:v.link,onChange:G=>b({...v,link:G.target.value}),className:"w-full border rounded-md px-3 py-2",placeholder:"https://example.com"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["تاريخ البداية ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"date",value:v.start_date,onChange:G=>b({...v,start_date:G.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["تاريخ النهاية ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"date",value:v.end_date,onChange:G=>b({...v,end_date:G.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["نوع الإعلان ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:v.type,onChange:G=>b({...v,type:G.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"banner",children:"بانر"}),i.jsx("option",{value:"popup",children:"نافذة منبثقة"}),i.jsx("option",{value:"slider",children:"شريحة عرض"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["الأولوية ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:v.priority,onChange:G=>b({...v,priority:parseInt(G.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"1",required:!0}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"الإعلانات ذات الأرقام الأقل تظهر أولاً"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["الحالة ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:v.status,onChange:G=>b({...v,status:G.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"draft",children:"مسودة"}),i.jsx("option",{value:"pending",children:"معلق"}),i.jsx("option",{value:"active",children:"نشط"}),i.jsx("option",{value:"expired",children:"منتهي"})]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:x?"تحديث الإعلان":"إضافة الإعلان"})]})]})]})]})})]})}function LF(){var ue;const[t,e]=w.useState({points_value:.1,min_points_redeem:100,points_expiry_days:365,points_per_currency:1,min_order_points:10}),[n,r]=w.useState([{id:1,name:"برونزي",icon:"🥉",min_points:0,max_points:999,benefits:["كسب نقاط × 1","خصم 5% على التوصيل"],color:"bg-amber-100 text-amber-800"},{id:2,name:"فضي",icon:"🥈",min_points:1e3,max_points:4999,benefits:["كسب نقاط × 1.5","خصم 10% على التوصيل","أولوية في الدعم"],color:"bg-gray-100 text-gray-800"},{id:3,name:"ذهبي",icon:"🥇",min_points:5e3,max_points:9999,benefits:["كسب نقاط × 2","خصم 15% على التوصيل","أولوية في الدعم","عروض حصرية"],color:"bg-yellow-100 text-yellow-800"},{id:4,name:"بلاتيني",icon:"👑",min_points:1e4,max_points:null,benefits:["كسب نقاط × 3","خصم 20% على التوصيل","أولوية قصوى في الدعم","عروض حصرية","هدية عيد ميلاد"],color:"bg-purple-100 text-purple-800"}]),[s,a]=w.useState([]),[o,l]=w.useState([]),[d,u]=w.useState([]),[p,f]=w.useState([]),[x,g]=w.useState(!0),[v,b]=w.useState(null),[j,_]=w.useState(!1),[N,S]=w.useState(!1),[P,M]=w.useState(!1),[R,A]=w.useState(null),[T,Y]=w.useState(null),[O,H]=w.useState({name:"",description:"",points_cost:"",reward_type:"free_delivery",discount_type:"",discount_value:"",min_order_amount:"",max_discount:"",usage_limit:"",start_date:"",end_date:"",status:"active"}),te=w.useCallback(async()=>{var U;try{g(!0),b(null);const{data:oe,error:fe}=await ee.from("points_rewards").select("*").order("points_cost",{ascending:!0});if(fe)throw fe;a(oe||[]);try{const{data:Wt,error:Xt}=await ee.rpc("get_customers_with_points");if(Xt)throw Xt;l(Wt||[])}catch(Wt){console.error("Error fetching customers with points:",Wt);const{data:Xt,error:vt}=await ee.from("customers").select("id, name, phone, email");if(vt)throw vt;l(Xt||[])}const{data:Ne,error:Ce}=await ee.from("points_transactions").select(`
          *,
          account:account_id(
            customer:customer_id(name)
          )
        `).order("created_at",{ascending:!1}).limit(10);if(Ce)throw Ce;u(Ne||[]);const{data:ct,error:Gt}=await ee.from("points_redemptions").select(`
          *,
          account:account_id(
            customer:customer_id(name)
          ),
          reward:reward_id(name)
        `).order("created_at",{ascending:!1}).limit(10);if(Gt)throw Gt;f(ct||[]);const{data:Qt,error:Dt}=await ee.from("app_settings").select("settings").single();!Dt&&((U=Qt==null?void 0:Qt.settings)!=null&&U.points)&&e(Qt.settings.points)}catch(oe){console.error("Error fetching data:",oe),b("فشل في تحميل البيانات. الرجاء المحاولة مرة أخرى."),z.error("فشل في تحميل البيانات")}finally{g(!1)}},[]);w.useEffect(()=>{te()},[te]);const G={name:{type:"text",label:"اسم المكافأة",placeholder:"البحث باسم المكافأة",value:""},reward_type:{type:"select",label:"نوع المكافأة",placeholder:"جميع الأنواع",options:[{value:"free_delivery",label:"توصيل مجاني"},{value:"order_discount",label:"خصم على الطلب"},{value:"delivery_discount",label:"خصم على التوصيل"},{value:"product_discount",label:"خصم على منتج"},{value:"gift",label:"هدية"}],value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"active",label:"نشط"},{value:"inactive",label:"غير نشط"}],value:""}},{filters:B,filterData:Z,handleFilterChange:C}=Fn(G),V=async()=>{try{g(!0);const{data:U,error:oe}=await ee.from("app_settings").select("settings, id").single();if(oe&&oe.code!=="PGRST116")throw oe;let fe,Ne;if(U){fe={...U.settings,points:t},Ne=U.id;const{error:Ce}=await ee.from("app_settings").update({settings:fe}).eq("id",Ne);if(Ce)throw Ce}else{fe={points:t};const{data:Ce,error:ct}=await ee.from("app_settings").insert([{settings:fe}]).select();if(ct)throw ct}z.success("تم حفظ الإعدادات بنجاح"),_(!1)}catch(U){console.error("Error saving settings:",U),z.error("فشل في حفظ الإعدادات")}finally{g(!1)}},I=async()=>{try{if(g(!0),!O.name||!O.points_cost||!O.reward_type||!O.start_date||!O.end_date){z.error("الرجاء تعبئة جميع الحقول المطلوبة"),g(!1);return}const U={name:O.name,description:O.description,points_cost:parseInt(O.points_cost),reward_type:O.reward_type,discount_type:O.discount_type||null,discount_value:O.discount_value?parseFloat(O.discount_value):null,min_order_amount:O.min_order_amount?parseFloat(O.min_order_amount):null,max_discount:O.max_discount?parseFloat(O.max_discount):null,usage_limit:O.usage_limit?parseInt(O.usage_limit):null,start_date:O.start_date,end_date:O.end_date,status:O.status};if(R){const{error:oe}=await ee.from("points_rewards").update(U).eq("id",R.id);if(oe)throw oe;z.success("تم تحديث المكافأة بنجاح")}else{const{error:oe}=await ee.from("points_rewards").insert([U]);if(oe)throw oe;z.success("تم إضافة المكافأة بنجاح")}te(),S(!1),A(null),H({name:"",description:"",points_cost:"",reward_type:"free_delivery",discount_type:"",discount_value:"",min_order_amount:"",max_discount:"",usage_limit:"",start_date:"",end_date:"",status:"active"})}catch(U){console.error("Error saving reward:",U),z.error("فشل في حفظ المكافأة")}finally{g(!1)}},X=async()=>{try{if(T)r(n.map(U=>U.id===T.id?{...T}:U)),z.success("تم تحديث المستوى بنجاح");else{const U={id:Math.max(...n.map(oe=>oe.id))+1,...T};r([...n,U]),z.success("تم إضافة المستوى بنجاح")}M(!1),Y(null)}catch(U){console.error("Error saving level:",U),z.error("فشل في حفظ المستوى")}},E=async U=>{if(window.confirm("هل أنت متأكد من حذف هذه المكافأة؟"))try{g(!0);const{error:oe}=await ee.from("points_rewards").delete().eq("id",U);if(oe)throw oe;z.success("تم حذف المكافأة بنجاح"),te()}catch(oe){console.error("Error deleting reward:",oe),z.error("فشل في حذف المكافأة")}finally{g(!1)}},K=U=>{switch(U){case"free_delivery":return"توصيل مجاني";case"order_discount":return"خصم على الطلب";case"delivery_discount":return"خصم على التوصيل";case"product_discount":return"خصم على منتج";case"gift":return"هدية";default:return U}},re=U=>U.reward_type==="free_delivery"?"توصيل مجاني":U.discount_type==="percentage"?`${U.discount_value}%`:`₪${U.discount_value}`,Q=U=>{switch(U){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"used":return"bg-blue-100 text-blue-800";case"expired":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},ie=U=>{switch(U){case"active":return"نشط";case"inactive":return"غير نشط";case"used":return"مستخدم";case"expired":return"منتهي";default:return U}},le=U=>{switch(U){case"earn":return"كسب نقاط";case"spend":return"استخدام نقاط";case"expire":return"انتهاء صلاحية";case"adjust":return"تعديل";default:return U}},ae=U=>{switch(U){case"earn":return"text-green-600";case"spend":return"text-red-600";case"expire":return"text-gray-600";case"adjust":return"text-blue-600";default:return"text-gray-600"}},se=Z(s);return x&&s.length===0?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):v?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:v}),i.jsx("button",{onClick:te,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"إعدادات النقاط"}),i.jsx("button",{onClick:()=>_(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"تعديل الإعدادات"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"قيمة النقطة"}),i.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["₪",t.points_value]})]}),i.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"الحد الأدنى للاستبدال"}),i.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t.min_points_redeem," نقطة"]})]}),i.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"مدة صلاحية النقاط"}),i.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t.points_expiry_days," يوم"]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"مستويات العملاء"}),i.jsx("button",{onClick:()=>{Y(null),M(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة مستوى جديد"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map(U=>i.jsxs("div",{className:`rounded-lg p-6 ${U.color}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-3xl",children:U.icon}),i.jsx("h3",{className:"text-xl font-semibold mt-2",children:U.name})]}),i.jsxs("div",{className:"text-sm",children:[U.min_points.toLocaleString()," - ",U.max_points?U.max_points.toLocaleString():"∞"," نقطة"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-medium",children:"المميزات:"}),i.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm",children:U.benefits.map((oe,fe)=>i.jsx("li",{children:oe},fe))})]}),i.jsx("div",{className:"flex justify-end mt-4",children:i.jsx("button",{onClick:()=>{Y(U),M(!0)},className:"text-sm hover:underline",children:"تعديل"})})]},U.id))})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("div",{className:"flex justify-between items-center mb-6",children:i.jsx("h2",{className:"text-xl font-semibold",children:"آخر معاملات النقاط"})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العميل"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العملية"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"النقاط"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الوصف"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التاريخ"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"لا توجد معاملات"})}):d.map(U=>{var oe,fe;return i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:((fe=(oe=U.account)==null?void 0:oe.customer)==null?void 0:fe.name)||"غير معروف"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:ae(U.type),children:le(U.type)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("span",{className:ae(U.type),children:[U.type==="earn"?"+":U.type==="spend"||U.type==="expire"?"-":"",U.amount]})}),i.jsx("td",{className:"px-6 py-4",children:U.description}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(U.created_at).toLocaleString("ar-SA")})]},U.id)})})]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("div",{className:"flex justify-between items-center mb-6",children:i.jsx("h2",{className:"text-xl font-semibold",children:"آخر عمليات استبدال النقاط"})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العميل"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المكافأة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"النقاط"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الرمز"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"تاريخ الانتهاء"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"لا توجد عمليات استبدال"})}):p.map(U=>{var oe,fe,Ne;return i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:((fe=(oe=U.account)==null?void 0:oe.customer)==null?void 0:fe.name)||"غير معروف"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:((Ne=U.reward)==null?void 0:Ne.name)||"غير معروف"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("span",{className:"text-red-600",children:["-",U.points_spent]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:U.code})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Q(U.status)}`,children:ie(U.status)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(U.expires_at).toLocaleDateString("ar-SA")})]},U.id)})})]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"المكافآت"}),i.jsx("button",{onClick:()=>{A(null),H({name:"",description:"",points_cost:"",reward_type:"free_delivery",discount_type:"",discount_value:"",min_order_amount:"",max_discount:"",usage_limit:"",start_date:"",end_date:"",status:"active"}),S(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة مكافأة جديدة"})]}),i.jsx(Rn,{filters:B,onFilterChange:C}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6",children:se.length===0?i.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:"لا توجد مكافآت متطابقة مع معايير البحث"}):se.map(U=>i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg",children:U.name}),i.jsx("p",{className:"text-gray-600 text-sm",children:U.description})]}),i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${U.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:U.status==="active"?"نشط":"غير نشط"})]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"النقاط المطلوبة:"})," ",U.points_cost]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"نوع المكافأة:"})," ",K(U.reward_type)]}),U.discount_value&&i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"قيمة الخصم:"})," ",re(U)]}),U.min_order_amount&&i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"الحد الأدنى للطلب:"})," ₪",U.min_order_amount]}),U.max_discount&&i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"أقصى خصم:"})," ₪",U.max_discount]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"الاستخدام:"})," ",U.used_count||0,"/",U.usage_limit||"∞"]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"الصلاحية:"})," ",new Date(U.start_date).toLocaleDateString("ar-SA")," -"," ",new Date(U.end_date).toLocaleDateString("ar-SA")]})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx("button",{onClick:()=>{A(U),H({name:U.name,description:U.description||"",points_cost:U.points_cost.toString(),reward_type:U.reward_type,discount_type:U.discount_type||"",discount_value:U.discount_value?U.discount_value.toString():"",min_order_amount:U.min_order_amount?U.min_order_amount.toString():"",max_discount:U.max_discount?U.max_discount.toString():"",usage_limit:U.usage_limit?U.usage_limit.toString():"",start_date:U.start_date,end_date:U.end_date,status:U.status}),S(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),i.jsx("button",{onClick:()=>E(U.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},U.id))})]}),i.jsx(be,{open:j,onClose:()=>_(!1),className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(be.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx(be.Title,{className:"text-2xl font-semibold mb-6",children:"إعدادات النقاط"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"قيمة النقطة (₪)"}),i.jsx("input",{type:"number",step:"0.01",value:t.points_value,onChange:U=>e({...t,points_value:parseFloat(U.target.value)}),className:"w-full p-2 border rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحد الأدنى للاستبدال (نقاط)"}),i.jsx("input",{type:"number",value:t.min_points_redeem,onChange:U=>e({...t,min_points_redeem:parseInt(U.target.value)}),className:"w-full p-2 border rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"مدة صلاحية النقاط (أيام)"}),i.jsx("input",{type:"number",value:t.points_expiry_days,onChange:U=>e({...t,points_expiry_days:parseInt(U.target.value)}),className:"w-full p-2 border rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"النقاط لكل ₪1"}),i.jsx("input",{type:"number",step:"0.01",value:t.points_per_currency,onChange:U=>e({...t,points_per_currency:parseFloat(U.target.value)}),className:"w-full p-2 border rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحد الأدنى للطلب لكسب النقاط (₪)"}),i.jsx("input",{type:"number",step:"0.01",value:t.min_order_points,onChange:U=>e({...t,min_order_points:parseFloat(U.target.value)}),className:"w-full p-2 border rounded-lg"})]})]}),i.jsxs("div",{className:"flex justify-end mt-6 space-x-2",children:[i.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{onClick:V,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",disabled:x,children:x?"جارٍ الحفظ...":"حفظ"})]})]})]})}),i.jsx(be,{open:N,onClose:()=>S(!1),className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(be.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx(be.Title,{className:"text-2xl font-semibold mb-6",children:R?"تعديل المكافأة":"إضافة مكافأة جديدة"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم المكافأة"}),i.jsx("input",{type:"text",value:O.name,onChange:U=>H({...O,name:U.target.value}),className:"w-full p-2 border rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الوصف"}),i.jsx("textarea",{value:O.description,onChange:U=>H({...O,description:U.target.value}),className:"w-full p-2 border rounded-lg",rows:3})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"النقاط المطلوبة"}),i.jsx("input",{type:"number",value:O.points_cost,onChange:U=>H({...O,points_cost:U.target.value}),className:"w-full p-2 border rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع المكافأة"}),i.jsxs("select",{value:O.reward_type,onChange:U=>H({...O,reward_type:U.target.value}),className:"w-full p-2 border rounded-lg",children:[i.jsx("option",{value:"free_delivery",children:"توصيل مجاني"}),i.jsx("option",{value:"order_discount",children:"خصم على الطلب"}),i.jsx("option",{value:"delivery_discount",children:"خصم على التوصيل"}),i.jsx("option",{value:"product_discount",children:"خصم على منتج"}),i.jsx("option",{value:"gift",children:"هدية"})]})]}),O.reward_type!=="free_delivery"&&O.reward_type!=="gift"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع الخصم"}),i.jsxs("select",{value:O.discount_type,onChange:U=>H({...O,discount_type:U.target.value}),className:"w-full p-2 border rounded-lg",children:[i.jsx("option",{value:"",children:"اختر نوع الخصم"}),i.jsx("option",{value:"percentage",children:"نسبة مئوية"}),i.jsx("option",{value:"fixed",children:"مبلغ ثابت"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"قيمة الخصم"}),i.jsx("input",{type:"number",step:O.discount_type==="percentage"?"1":"0.01",value:O.discount_value,onChange:U=>H({...O,discount_value:U.target.value}),className:"w-full p-2 border rounded-lg",min:"0",step:"0.01"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحد الأدنى للطلب"}),i.jsx("input",{type:"number",step:"0.01",value:O.min_order_amount,onChange:U=>H({...O,min_order_amount:U.target.value}),className:"w-full p-2 border rounded-lg"})]}),O.reward_type!=="free_delivery"&&O.reward_type!=="gift"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"أقصى خصم"}),i.jsx("input",{type:"number",step:"0.01",value:O.max_discount,onChange:U=>H({...O,max_discount:U.target.value}),className:"w-full p-2 border rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"حد الاستخدام"}),i.jsx("input",{type:"number",value:O.usage_limit,onChange:U=>H({...O,usage_limit:U.target.value}),className:"w-full p-2 border rounded-lg",placeholder:"اتركه فارغاً لعدم وجود حد"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ البداية"}),i.jsx("input",{type:"date",value:O.start_date,onChange:U=>H({...O,start_date:U.target.value}),className:"w-full p-2 border rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ الانتهاء"}),i.jsx("input",{type:"date",value:O.end_date,onChange:U=>H({...O,end_date:U.target.value}),className:"w-full p-2 border rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحالة"}),i.jsxs("select",{value:O.status,onChange:U=>H({...O,status:U.target.value}),className:"w-full p-2 border rounded-lg",children:[i.jsx("option",{value:"active",children:"نشط"}),i.jsx("option",{value:"inactive",children:"غير نشط"})]})]})]}),i.jsxs("div",{className:"flex justify-end mt-6 space-x-2",children:[i.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{onClick:I,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",disabled:x,children:x?"جارٍ الحفظ...":"حفظ"})]})]})]})}),i.jsx(be,{open:P,onClose:()=>M(!1),className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(be.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx(be.Title,{className:"text-2xl font-bold mb-6",children:T?"تعديل المستوى":"إضافة مستوى جديد"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم المستوى"}),i.jsx("input",{type:"text",value:(T==null?void 0:T.name)||"",onChange:U=>Y({...T,name:U.target.value}),className:"w-full p-2 border rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الأيقونة"}),i.jsx("input",{type:"text",value:(T==null?void 0:T.icon)||"",onChange:U=>Y({...T,icon:U.target.value}),className:"w-full p-2 border rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحد الأدنى للنقاط"}),i.jsx("input",{type:"number",value:(T==null?void 0:T.min_points)||"",onChange:U=>Y({...T,min_points:parseInt(U.target.value)}),className:"w-full p-2 border rounded-lg"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحد الأقصى للنقاط"}),i.jsx("input",{type:"number",value:(T==null?void 0:T.max_points)||"",onChange:U=>Y({...T,max_points:parseInt(U.target.value)}),className:"w-full p-2 border rounded-lg",placeholder:"اتركه فارغاً لعدم وجود حد"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المميزات (كل سطر ميزة)"}),i.jsx("textarea",{value:((ue=T==null?void 0:T.benefits)==null?void 0:ue.join(`
`))||"",onChange:U=>Y({...T,benefits:U.target.value.split(`
`)}),className:"w-full p-2 border rounded-lg",rows:5})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"لون الخلفية"}),i.jsxs("select",{value:(T==null?void 0:T.color)||"",onChange:U=>Y({...T,color:U.target.value}),className:"w-full p-2 border rounded-lg",children:[i.jsx("option",{value:"bg-amber-100 text-amber-800",children:"برونزي"}),i.jsx("option",{value:"bg-gray-100 text-gray-800",children:"فضي"}),i.jsx("option",{value:"bg-yellow-100 text-yellow-800",children:"ذهبي"}),i.jsx("option",{value:"bg-purple-100 text-purple-800",children:"بلاتيني"})]})]})]}),i.jsxs("div",{className:"flex justify-end mt-6 space-x-2",children:[i.jsx("button",{onClick:()=>M(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{onClick:X,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",disabled:x,children:x?"جارٍ الحفظ...":"حفظ"})]})]})]})})]})}function AF(){const[t,e]=w.useState([{id:1,name:"مكافأة إحالة المستخدم",description:"احصل على نقاط عند دعوة صديق",type:"user",points_reward:100,points_referrer:50,usage_limit:null,status:"active"},{id:2,name:"مكافأة إحالة المشاهير",description:"برنامج إحالة خاص للمشاهير",type:"influencer",points_reward:200,points_referrer:100,usage_limit:null,status:"active"}]),[n,r]=w.useState([{id:1,user_id:"123",code:"ABC123",type:"user",status:"active",usage_limit:10,used_count:5,points_reward:100,points_referrer:50,expires_at:"2025-12-31"},{id:2,user_id:"456",code:"INF789XYZ",type:"influencer",status:"active",usage_limit:100,used_count:45,points_reward:200,points_referrer:100,expires_at:"2025-12-31"}]),[s,a]=w.useState(!1),[o,l]=w.useState(!1),[d,u]=w.useState(null),[p,f]=w.useState(null),x={code:{type:"text",label:"كود الإحالة",placeholder:"البحث بكود الإحالة",value:""},type:{type:"select",label:"نوع الكود",placeholder:"جميع الأنواع",options:[{value:"user",label:"مستخدم"},{value:"influencer",label:"مشهور"}],value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"active",label:"نشط"},{value:"inactive",label:"غير نشط"}],value:""}},{filters:g,filterData:v,handleFilterChange:b}=Fn(x),j=async()=>{try{z.success(d?"تم تحديث المكافأة بنجاح":"تم إضافة المكافأة بنجاح"),a(!1),u(null)}catch{z.error("فشل في حفظ المكافأة")}},_=async()=>{try{z.success(p?"تم تحديث الكود بنجاح":"تم إضافة الكود بنجاح"),l(!1),f(null)}catch{z.error("فشل في حفظ الكود")}},N=async A=>{if(window.confirm("هل أنت متأكد من حذف هذا الكود؟"))try{z.success("تم حذف الكود بنجاح")}catch{z.error("فشل في حذف الكود")}},S=A=>{switch(A){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},P=A=>{switch(A){case"active":return"نشط";case"inactive":return"غير نشط";default:return A}},M=A=>{switch(A){case"user":return"مستخدم";case"influencer":return"مشهور";default:return A}},R=v(n);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"مكافآت الإحالة"}),i.jsx("button",{onClick:()=>{u(null),a(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة مكافأة جديدة"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(A=>i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg",children:A.name}),i.jsx("p",{className:"text-gray-600 text-sm",children:A.description})]}),i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${S(A.status)}`,children:P(A.status)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"نوع الإحالة:"})," ",M(A.type)]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"نقاط المستخدم الجديد:"})," ",A.points_reward]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"نقاط صاحب الإحالة:"})," ",A.points_referrer]}),A.usage_limit&&i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"الحد الأقصى للاستخدام:"})," ",A.usage_limit]})]}),i.jsx("div",{className:"flex justify-end mt-4",children:i.jsx("button",{onClick:()=>{u(A),a(!0)},className:"text-blue-600 hover:text-blue-800",children:"تعديل"})})]},A.id))})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"أكواد الإحالة"}),i.jsx("button",{onClick:()=>{f(null),l(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إنشاء كود جديد"})]}),i.jsx(Rn,{filters:g,onFilterChange:b}),i.jsx("div",{className:"mt-6 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الكود"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"النوع"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الاستخدام"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"النقاط"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"تاريخ الانتهاء"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(A=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:A.code}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:M(A.type)}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[A.used_count,"/",A.usage_limit||"∞"]}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{children:["المستخدم: ",A.points_reward]}),i.jsxs("div",{children:["المُحيل: ",A.points_referrer]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:A.expires_at?new Date(A.expires_at).toLocaleDateString("ar-SA"):"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${S(A.status)}`,children:P(A.status)})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[i.jsx("button",{onClick:()=>{f(A),l(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),i.jsx("button",{onClick:()=>N(A.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},A.id))})]})})]}),i.jsx(be,{open:s,onClose:()=>{a(!1),u(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(be.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx(be.Title,{className:"text-2xl font-bold mb-6",children:d?"تعديل مكافأة":"إضافة مكافأة جديدة"}),i.jsxs("form",{onSubmit:A=>{A.preventDefault(),j()},className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم المكافأة"}),i.jsx("input",{type:"text",className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),i.jsx("textarea",{className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع الإحالة"}),i.jsxs("select",{className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"user",children:"مستخدم"}),i.jsx("option",{value:"influencer",children:"مشهور"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نقاط المستخدم الجديد"}),i.jsx("input",{type:"number",className:"w-full border rounded-md px-3 py-2",min:"0",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نقاط صاحب الإحالة"}),i.jsx("input",{type:"number",className:"w-full border rounded-md px-3 py-2",min:"0",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأقصى للاستخدام"}),i.jsx("input",{type:"number",className:"w-full border rounded-md px-3 py-2",min:"0",placeholder:"اتركه فارغاً لعدم وجود حد"})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx("button",{type:"button",onClick:()=>{a(!1),u(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:d?"تحديث":"إضافة"})]})]})]})]})}),i.jsx(be,{open:o,onClose:()=>{l(!1),f(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(be.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx(be.Title,{className:"text-2xl font-bold mb-6",children:p?"تعديل كود":"إنشاء كود جديد"}),i.jsxs("form",{onSubmit:A=>{A.preventDefault(),_()},className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع الكود"}),i.jsxs("select",{className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"user",children:"مستخدم"}),i.jsx("option",{value:"influencer",children:"مشهور"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأقصى للاستخدام"}),i.jsx("input",{type:"number",className:"w-full border rounded-md px-3 py-2",min:"0",placeholder:"اتركه فارغاً لعدم وجود حد"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ الانتهاء"}),i.jsx("input",{type:"date",className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx("button",{type:"button",onClick:()=>{l(!1),f(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:p?"تحديث":"إنشاء"})]})]})]})]})})]})}function IF(){const[t,e]=w.useState([{id:1,code:"WELCOME10",type:"percentage",value:10,min_order:50,max_discount:20,usage_limit:100,used_count:45,start_date:"2025-01-01",end_date:"2025-12-31",status:"active",description:"خصم 10% للطلب الأول"},{id:2,code:"FREEDEL",type:"fixed",value:15,min_order:100,usage_limit:50,used_count:20,start_date:"2025-01-01",end_date:"2025-06-30",status:"active",description:"توصيل مجاني"}]),[n,r]=w.useState(!1),[s,a]=w.useState(null),[o,l]=w.useState({code:"",type:"percentage",value:"",min_order:"",max_discount:"",usage_limit:"",start_date:"",end_date:"",description:""}),d={code:{type:"text",label:"كود الخصم",placeholder:"البحث بكود الخصم",value:""},type:{type:"select",label:"نوع الخصم",placeholder:"جميع الأنواع",options:[{value:"percentage",label:"نسبة مئوية"},{value:"fixed",label:"مبلغ ثابت"}],value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"active",label:"نشط"},{value:"inactive",label:"غير نشط"},{value:"expired",label:"منتهي"}],value:""}},{filters:u,filterData:p,handleFilterChange:f}=Fn(d),x=async _=>{_.preventDefault();try{z.success(s?"تم تحديث الكوبون بنجاح":"تم إضافة الكوبون بنجاح"),r(!1),a(null),l({code:"",type:"percentage",value:"",min_order:"",max_discount:"",usage_limit:"",start_date:"",end_date:"",description:""})}catch{z.error("فشل في حفظ الكوبون")}},g=async _=>{if(window.confirm("هل أنت متأكد من حذف هذا الكوبون؟"))try{z.success("تم حذف الكوبون بنجاح")}catch{z.error("فشل في حذف الكوبون")}},v=_=>{switch(_){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},b=_=>{switch(_){case"active":return"نشط";case"inactive":return"غير نشط";case"expired":return"منتهي";default:return _}},j=p(t);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"كوبونات الخصم"}),i.jsx("button",{onClick:()=>{a(null),r(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة كوبون جديد"})]}),i.jsx(Rn,{filters:u,onFilterChange:f}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(_=>i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold",children:_.code}),i.jsx("p",{className:"text-gray-600 text-sm",children:_.description})]}),i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${v(_.status)}`,children:b(_.status)})]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"نوع الخصم:"})," ",_.type==="percentage"?`${_.value}%`:`₪${_.value}`]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"الحد الأدنى للطلب:"})," ₪",_.min_order]}),_.max_discount&&i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"أقصى خصم:"})," ₪",_.max_discount]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"الاستخدام:"})," ",_.used_count,"/",_.usage_limit]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"font-medium",children:"الصلاحية:"})," ",new Date(_.start_date).toLocaleDateString("ar-SA")," -"," ",new Date(_.end_date).toLocaleDateString("ar-SA")]})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx("button",{onClick:()=>{a(_),l(_),r(!0)},className:"text-blue-600 hover:text-blue-800 ml-2",children:"تعديل"}),i.jsx("button",{onClick:()=>g(_.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},_.id))}),i.jsx(be,{open:n,onClose:()=>{r(!1),a(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(be.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx(be.Title,{className:"text-2xl font-bold mb-6",children:s?"تعديل كوبون":"إضافة كوبون جديد"}),i.jsxs("form",{onSubmit:x,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"كود الخصم"}),i.jsx("input",{type:"text",value:o.code,onChange:_=>l({...o,code:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع الخصم"}),i.jsxs("select",{value:o.type,onChange:_=>l({...o,type:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"percentage",children:"نسبة مئوية"}),i.jsx("option",{value:"fixed",children:"مبلغ ثابت"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:o.type==="percentage"?"نسبة الخصم (%)":"قيمة الخصم (₪)"}),i.jsx("input",{type:"number",value:o.value,onChange:_=>l({...o,value:_.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:o.type==="percentage"?"1":"0.01",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأدنى للطلب (₪)"}),i.jsx("input",{type:"number",value:o.min_order,onChange:_=>l({...o,min_order:_.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01",required:!0})]}),o.type==="percentage"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"أقصى خصم (₪)"}),i.jsx("input",{type:"number",value:o.max_discount,onChange:_=>l({...o,max_discount:_.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",step:"0.01"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأقصى للاستخدام"}),i.jsx("input",{type:"number",value:o.usage_limit,onChange:_=>l({...o,usage_limit:_.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ البداية"}),i.jsx("input",{type:"date",value:o.start_date,onChange:_=>l({...o,start_date:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ النهاية"}),i.jsx("input",{type:"date",value:o.end_date,onChange:_=>l({...o,end_date:_.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),i.jsx("textarea",{value:o.description,onChange:_=>l({...o,description:_.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx("button",{type:"button",onClick:()=>{r(!1),a(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:s?"تحديث":"إضافة"})]})]})]})]})})]})}function RF(){const[t,e]=w.useState([{id:1,name:"برونزي",description:"المستوى الأساسي للتجار",min_purchase_amount:5e3,discount_percentage:5,min_order_amount:500,benefits:["خصم 5% على جميع المنتجات","دعم أولوية للتجار","تقارير شهرية"],status:"active"},{id:2,name:"فضي",description:"المستوى المتوسط للتجار",min_purchase_amount:1e4,discount_percentage:10,min_order_amount:1e3,benefits:["خصم 10% على جميع المنتجات","دعم أولوية للتجار","تقارير أسبوعية","شحن مجاني للطلبات فوق 2000₪"],status:"active"},{id:3,name:"ذهبي",description:"المستوى المتقدم للتجار",min_purchase_amount:25e3,discount_percentage:15,min_order_amount:2e3,benefits:["خصم 15% على جميع المنتجات","دعم أولوية قصوى","تقارير يومية","شحن مجاني لجميع الطلبات","مدير حساب مخصص"],status:"active"},{id:4,name:"بلاتيني",description:"المستوى الأعلى للتجار",min_purchase_amount:5e4,discount_percentage:20,min_order_amount:5e3,benefits:["خصم 20% على جميع المنتجات","دعم على مدار الساعة","تقارير مخصصة","شحن مجاني وسريع لجميع الطلبات","مدير حساب مخصص","أسعار خاصة للمنتجات الجديدة"],status:"active"}]),[n,r]=w.useState([]),[s,a]=w.useState(!0),[o,l]=w.useState(null),[d,u]=w.useState(!1),[p,f]=w.useState(!1),[x,g]=w.useState(null),[v,b]=w.useState(null),[j,_]=w.useState({company_name:"",tier_id:"",tax_number:"",contact_name:"",contact_phone:"",contact_email:"",billing_address:"",shipping_address:"",status:"pending",notes:""}),[N,S]=w.useState({name:"",description:"",min_purchase_amount:"",discount_percentage:"",min_order_amount:"",benefits:[],status:"active"});w.useEffect(()=>{P()},[]);const P=async()=>{try{a(!0),l(null);const{data:C,error:V}=await ee.from("customer_wholesale_tiers").select(`
          customer_id,
          tier_id,
          status,
          approved_at,
          created_at,
          customer:customer_id(*),
          tier:tier_id(*)
        `);if(V)throw V;const I=C.map(K=>{var re,Q,ie,le,ae,se,ue,U,oe,fe,Ne,Ce,ct,Gt,Qt,Dt,Wt,Xt,vt,En;return{id:K.customer_id,company_name:((Q=(re=K.customer)==null?void 0:re.wholesale_info)==null?void 0:Q.company_name)||"شركة بدون اسم",tier_id:K.tier_id,tax_number:((le=(ie=K.customer)==null?void 0:ie.wholesale_info)==null?void 0:le.tax_number)||"",contact_name:(ae=K.customer)==null?void 0:ae.name,contact_phone:(se=K.customer)==null?void 0:se.phone,contact_email:((ue=K.customer)==null?void 0:ue.email)||"",total_purchases:((oe=(U=K.customer)==null?void 0:U.wholesale_info)==null?void 0:oe.total_purchases)||0,status:K.status,approval_date:K.approved_at,last_purchase_date:(Ne=(fe=K.customer)==null?void 0:fe.wholesale_info)==null?void 0:Ne.last_purchase_date,billing_address:((ct=(Ce=K.customer)==null?void 0:Ce.wholesale_info)==null?void 0:ct.billing_address)||((Gt=K.customer)==null?void 0:Gt.address)||"",shipping_address:((Dt=(Qt=K.customer)==null?void 0:Qt.wholesale_info)==null?void 0:Dt.shipping_address)||((Wt=K.customer)==null?void 0:Wt.address)||"",notes:((vt=(Xt=K.customer)==null?void 0:Xt.wholesale_info)==null?void 0:vt.notes)||((En=K.customer)==null?void 0:En.notes)||"",tier:K.tier}});r(I);const{data:X,error:E}=await ee.from("wholesale_tiers").select("*").order("min_purchase_amount",{ascending:!0});E?console.error("Error fetching tiers:",E):X&&X.length>0&&e(X)}catch(C){console.error("Error fetching data:",C),l("فشل في تحميل البيانات. الرجاء المحاولة مرة أخرى."),z.error("فشل في تحميل البيانات")}finally{a(!1)}},M={company_name:{type:"text",label:"اسم الشركة",placeholder:"البحث باسم الشركة",value:""},tier_id:{type:"select",label:"المستوى",placeholder:"جميع المستويات",options:t.map(C=>({value:C.id,label:C.name})),value:""},status:{type:"select",label:"الحالة",placeholder:"جميع الحالات",options:[{value:"pending",label:"قيد المراجعة"},{value:"approved",label:"معتمد"},{value:"rejected",label:"مرفوض"}],value:""}},{filters:R,filterData:A,handleFilterChange:T}=Fn(M),Y=async C=>{C.preventDefault();try{if(!j.company_name||!j.tier_id||!j.tax_number){z.error("الرجاء تعبئة جميع الحقول المطلوبة");return}if(x){const{error:V}=await ee.from("customers").update({name:j.contact_name,phone:j.contact_phone,email:j.contact_email,address:j.shipping_address,notes:j.notes,wholesale_info:{company_name:j.company_name,tax_number:j.tax_number,billing_address:j.billing_address,shipping_address:j.shipping_address},updated_at:new Date().toISOString()}).eq("id",x.id);if(V)throw V;const{error:I}=await ee.rpc("convert_to_wholesale_customer",{p_customer_id:x.id,p_tier_id:j.tier_id,p_status:j.status});if(I)throw I;z.success("تم تحديث العميل بنجاح")}else{const{data:V,error:I}=await ee.from("customers").insert([{name:j.contact_name,phone:j.contact_phone,email:j.contact_email,address:j.shipping_address,notes:j.notes,wholesale_info:{company_name:j.company_name,tax_number:j.tax_number,billing_address:j.billing_address,shipping_address:j.shipping_address}}]).select();if(I)throw I;const{error:X}=await ee.rpc("convert_to_wholesale_customer",{p_customer_id:V[0].id,p_tier_id:j.tier_id,p_status:j.status});if(X)throw X;z.success("تم إضافة العميل بنجاح")}P(),u(!1),g(null),_({company_name:"",tier_id:"",tax_number:"",contact_name:"",contact_phone:"",contact_email:"",billing_address:"",shipping_address:"",status:"pending",notes:""})}catch(V){console.error("Error saving customer:",V),z.error(x?"فشل تحديث العميل":"فشل إضافة العميل")}},O=async C=>{C.preventDefault();try{if(!N.name||!N.min_purchase_amount||!N.discount_percentage){z.error("الرجاء تعبئة جميع الحقول المطلوبة");return}const V={name:N.name,description:N.description,min_purchase_amount:parseFloat(N.min_purchase_amount),discount_percentage:parseFloat(N.discount_percentage),min_order_amount:parseFloat(N.min_order_amount)||0,benefits:N.benefits,status:N.status};if(v){const{error:I}=await ee.from("wholesale_tiers").update(V).eq("id",v.id);if(I)throw I;z.success("تم تحديث المستوى بنجاح")}else{const{error:I}=await ee.from("wholesale_tiers").insert([V]);if(I)throw I;z.success("تم إضافة المستوى بنجاح")}P(),f(!1),b(null),S({name:"",description:"",min_purchase_amount:"",discount_percentage:"",min_order_amount:"",benefits:[],status:"active"})}catch(V){console.error("Error saving tier:",V),z.error(v?"فشل تحديث المستوى":"فشل إضافة المستوى")}},H=async(C,V)=>{try{const{error:I}=await ee.rpc("update_wholesale_customer_status",{p_customer_id:C,p_status:V});if(I)throw I;r(n.map(X=>X.id===C?{...X,status:V,approval_date:V==="approved"?new Date().toISOString():X.approval_date}:X)),z.success("تم تحديث حالة العميل بنجاح")}catch(I){console.error("Error updating customer status:",I),z.error("فشل في تحديث حالة العميل")}},te=async C=>{if(window.confirm("هل أنت متأكد من حذف هذا العميل؟"))try{const{error:V}=await ee.from("customer_wholesale_tiers").delete().eq("customer_id",C);if(V)throw V;const{error:I}=await ee.from("customers").update({wholesale_info:null,updated_at:new Date().toISOString()}).eq("id",C);if(I)throw I;r(n.filter(X=>X.id!==C)),z.success("تم حذف العميل بنجاح")}catch(V){console.error("Error deleting customer:",V),z.error("فشل في حذف العميل")}},G=C=>{switch(C){case"approved":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},B=C=>{const V=t.find(I=>I.id===C);switch(V==null?void 0:V.name){case"برونزي":return"bg-amber-100 text-amber-800";case"فضي":return"bg-gray-100 text-gray-800";case"ذهبي":return"bg-yellow-100 text-yellow-800";case"بلاتيني":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},Z=A(n);return s?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:o}),i.jsx("button",{onClick:P,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"عملاء الجملة"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{b(null),S({name:"",description:"",min_purchase_amount:"",discount_percentage:"",min_order_amount:"",benefits:[],status:"active"}),f(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة مستوى"}),i.jsx("button",{onClick:()=>{g(null),_({company_name:"",tier_id:"",tax_number:"",contact_name:"",contact_phone:"",contact_email:"",billing_address:"",shipping_address:"",status:"pending",notes:""}),u(!0)},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"إضافة عميل"})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"مستويات العملاء"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:t.map(C=>i.jsxs("div",{className:`rounded-lg p-6 ${B(C.id)}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold",children:C.name}),i.jsx("p",{className:"text-sm mt-1",children:C.description})]}),C.status==="active"?i.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:"نشط"}):i.jsx("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded-full",children:"غير نشط"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"الحد الأدنى للمشتريات السنوية"}),i.jsxs("p",{className:"text-lg font-bold",children:["₪",C.min_purchase_amount.toLocaleString()]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"نسبة الخصم"}),i.jsxs("p",{className:"text-lg font-bold",children:[C.discount_percentage,"%"]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"الحد الأدنى للطلب"}),i.jsxs("p",{className:"text-lg font-bold",children:["₪",C.min_order_amount.toLocaleString()]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:"المميزات"}),i.jsx("ul",{className:"mt-1 space-y-1",children:C.benefits.map((V,I)=>i.jsxs("li",{className:"text-sm",children:["• ",V]},I))})]})]}),i.jsx("div",{className:"mt-4 flex justify-end",children:i.jsx("button",{onClick:()=>{b(C),S({name:C.name,description:C.description,min_purchase_amount:C.min_purchase_amount,discount_percentage:C.discount_percentage,min_order_amount:C.min_order_amount,benefits:C.benefits,status:C.status}),f(!0)},className:"text-blue-600 hover:text-blue-800",children:"تعديل"})})]},C.id))})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"قائمة العملاء"}),i.jsx(Rn,{filters:R,onFilterChange:T}),i.jsx("div",{className:"mt-6 overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الشركة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المستوى"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"معلومات الاتصال"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"إجمالي المشتريات"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"آخر طلب"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Z.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"لا يوجد عملاء جملة متطابقين مع معايير البحث"})}):Z.map(C=>{var V;return i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:C.company_name}),i.jsxs("div",{className:"text-sm text-gray-500",children:["رقم ضريبي: ",C.tax_number]})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`px-2 py-1 text-sm rounded-full ${B(C.tier_id)}`,children:((V=C.tier)==null?void 0:V.name)||"غير محدد"})}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{children:C.contact_name}),i.jsx("div",{className:"text-gray-500",children:C.contact_phone}),i.jsx("div",{className:"text-gray-500",children:C.contact_email})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"text-sm",children:i.jsxs("div",{className:"font-medium",children:["₪",C.total_purchases.toLocaleString()]})})}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:C.last_purchase_date?new Date(C.last_purchase_date).toLocaleDateString("ar-SA"):"-"}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("select",{value:C.status,onChange:I=>H(C.id,I.target.value),className:`px-2 py-1 text-sm rounded-full ${G(C.status)}`,children:[i.jsx("option",{value:"pending",children:"قيد المراجعة"}),i.jsx("option",{value:"approved",children:"معتمد"}),i.jsx("option",{value:"rejected",children:"مرفوض"})]})}),i.jsxs("td",{className:"px-6 py-4 text-sm font-medium",children:[i.jsx("button",{onClick:()=>{g(C),_({company_name:C.company_name,tier_id:C.tier_id,tax_number:C.tax_number,contact_name:C.contact_name,contact_phone:C.contact_phone,contact_email:C.contact_email,billing_address:C.billing_address,shipping_address:C.shipping_address,status:C.status,notes:C.notes}),u(!0)},className:"text-blue-600 hover:text-blue-800 ml-4",children:"تعديل"}),i.jsx("button",{onClick:()=>te(C.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},C.id)})})]})})]}),i.jsx(be,{open:d,onClose:()=>{u(!1),g(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(be.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-2xl w-full mx-4",children:[i.jsx(be.Title,{className:"text-2xl font-bold mb-6",children:x?"تعديل عميل":"إضافة عميل جديد"}),i.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم الشركة ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:j.company_name,onChange:C=>_({...j,company_name:C.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الرقم الضريبي ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:j.tax_number,onChange:C=>_({...j,tax_number:C.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["المستوى ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:j.tier_id,onChange:C=>_({...j,tier_id:C.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"",children:"اختر المستوى"}),t.map(C=>i.jsx("option",{value:C.id,children:C.name},C.id))]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم جهة الاتصال ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:j.contact_name,onChange:C=>_({...j,contact_name:C.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["رقم الهاتف ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"tel",value:j.contact_phone,onChange:C=>_({...j,contact_phone:C.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),i.jsx("input",{type:"email",value:j.contact_email,onChange:C=>_({...j,contact_email:C.target.value}),className:"w-full border rounded-md px-3 py-2"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"عنوان الفواتير"}),i.jsx("textarea",{value:j.billing_address,onChange:C=>_({...j,billing_address:C.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"2"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"عنوان الشحن"}),i.jsx("textarea",{value:j.shipping_address,onChange:C=>_({...j,shipping_address:C.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"2"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ملاحظات"}),i.jsx("textarea",{value:j.notes,onChange:C=>_({...j,notes:C.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحالة"}),i.jsxs("select",{value:j.status,onChange:C=>_({...j,status:C.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"pending",children:"قيد المراجعة"}),i.jsx("option",{value:"approved",children:"معتمد"}),i.jsx("option",{value:"rejected",children:"مرفوض"})]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{u(!1),g(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:x?"تحديث":"إضافة"})]})]})]})]})}),i.jsx(be,{open:p,onClose:()=>{f(!1),b(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(be.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-2xl w-full mx-4",children:[i.jsx(be.Title,{className:"text-2xl font-bold mb-6",children:v?"تعديل مستوى":"إضافة مستوى جديد"}),i.jsxs("form",{onSubmit:O,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم المستوى ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:N.name,onChange:C=>S({...N,name:C.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),i.jsx("textarea",{value:N.description,onChange:C=>S({...N,description:C.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"2"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الحد الأدنى للمشتريات السنوية (₪) ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:N.min_purchase_amount,onChange:C=>S({...N,min_purchase_amount:C.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نسبة الخصم (%) ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:N.discount_percentage,onChange:C=>S({...N,discount_percentage:C.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",max:"100",step:"0.01",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الحد الأدنى للطلب (₪) ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:N.min_order_amount,onChange:C=>S({...N,min_order_amount:C.target.value}),className:"w-full border rounded-md px-3 py-2",min:"0",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحالة"}),i.jsxs("select",{value:N.status,onChange:C=>S({...N,status:C.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"active",children:"نشط"}),i.jsx("option",{value:"inactive",children:"غير نشط"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المميزات"}),i.jsxs("div",{className:"space-y-2",children:[N.benefits.map((C,V)=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"text",value:C,onChange:I=>{const X=[...N.benefits];X[V]=I.target.value,S({...N,benefits:X})},className:"flex-1 border rounded-md px-3 py-2"}),i.jsx("button",{type:"button",onClick:()=>{const I=N.benefits.filter((X,E)=>E!==V);S({...N,benefits:I})},className:"text-red-600 hover:text-red-800",children:"حذف"})]},V)),i.jsx("button",{type:"button",onClick:()=>S({...N,benefits:[...N.benefits,""]}),className:"text-blue-600 hover:text-blue-800 text-sm",children:"إضافة ميزة"})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{f(!1),b(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:v?"تحديث":"إضافة"})]})]})]})]})})]})}function FF(){const[t,e]=w.useState(!1),[n,r]=w.useState([]),[s,a]=w.useState({deliveryCommission:15,autoDeductFromDriver:!0,autoChargeVendor:!0,wallet:{enabled:!0,name:"توصيل محفظة (الدفع المسبق)",description:"عند تفعيل هذا الخيار، يتم التعامل مع الطلبات المدفوعة مسبقًا (عبر المحفظة أو الدفع الإلكتروني)",steps:["يُعتبر التوصيل في هذه الحالة مدفوعًا مسبقًا","يتم شحن محفظة البائع بالكامل بقيمة الطلب + التوصيل","يتم خصم نفس القيمة من محفظة السائق تلقائيًا","السائق يستلم من الزبون فقط أجرة التوصيل يدًا بيد"],note:"✅ هذا النظام مناسب لتطبيقات الدفع المسبق والطلبات التي تُدفع أونلاين"},traditional:{enabled:!0,name:"المحفظة التقليدية (الدفع عند الاستلام)",description:"في هذا النظام، يتم تقسيم المبلغ مباشرة عند التسليم",steps:["الزبون يدفع كامل المبلغ (الطلب + التوصيل) للسائق","يتم تحويل قيمة الطلب إلى محفظة البائع","ويتم إضافة قيمة التوصيل إلى محفظة السائق"],note:"✅ هذا الخيار مناسب للطلبات التي يتم دفعها نقدًا عند التسليم"},cash:{enabled:!0,name:"الدفع عند الاستلام",description:"الدفع نقداً عند استلام الطلب",steps:["الزبون يطلب من المتجر","السائق يستلم الطلب من المتجر","السائق يوصل الطلب للزبون","الزبون يدفع المبلغ كاملاً (قيمة الطلب + التوصيل) للسائق"],balanceNotes:["رصيد البائع = 0 (حتى يتم التحصيل)","رصيد السائق = 0 (حتى يتم التحصيل)"],icon:"💰",color:"green"},electronic:{enabled:!0,name:"الدفع الإلكتروني",description:"الدفع المسبق عبر بطاقة الائتمان أو المحفظة الإلكترونية",steps:["الزبون يدفع كامل المبلغ إلكترونياً (قيمة الطلب + التوصيل)","البائع يستلم قيمة الطلب مباشرة","السائق يستلم قيمة التوصيل مباشرة","السائق يوصل الطلب للزبون"],balanceNotes:["رصيد البائع = قيمة الطلب (فوراً)","رصيد السائق = قيمة التوصيل (فوراً)"],icon:"💳",color:"blue"}});w.useEffect(()=>{(async()=>{try{const{data:p,error:f}=await ee.from("payment_methods").select("*").eq("status","active").order("id");if(f)throw f;r(p||[])}catch(p){console.error("Error fetching payment methods:",p),z.error("فشل في تحميل طرق الدفع")}})()},[]),w.useEffect(()=>{(async()=>{try{e(!0);const p=await ok();p&&p.wallet&&a(p)}catch(p){console.error("Error loading wallet settings:",p),z.error("فشل في تحميل إعدادات المحفظة")}finally{e(!1)}})()},[]);const o=async()=>{try{e(!0);const u={...s};await lk(u),z.success("تم حفظ إعدادات المحفظة بنجاح")}catch(u){console.error("Error saving wallet settings:",u),z.error("فشل في حفظ إعدادات المحفظة")}finally{e(!1)}},l=async(u,p)=>{try{e(!0);const{error:f}=await ee.from("payment_methods").update(p).eq("id",u);if(f)throw f;z.success("تم تحديث طريقة الدفع بنجاح"),r(x=>x.map(g=>g.id===u?{...g,...p}:g))}catch(f){console.error("Error updating payment method:",f),z.error("فشل في تحديث طريقة الدفع")}finally{e(!1)}},d=({method:u})=>{var p,f;return i.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-lg shadow-md p-6 border border-gray-100",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`p-2 rounded-full ${u.type==="wallet"?"bg-purple-100 text-purple-600":u.type==="electronic"?"bg-blue-100 text-blue-600":"bg-green-100 text-green-600"}`,children:u.icon||(u.type==="wallet"?"👛":u.type==="electronic"?"💳":"💰")}),i.jsx("h3",{className:"text-xl font-bold",children:u.name||"طريقة دفع"})]}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:u.status==="active",onChange:x=>l(u.id,{status:x.target.checked?"active":"inactive"}),className:"sr-only peer"}),i.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-100",children:i.jsx("p",{className:"text-gray-600",children:u.description||"لا يوجد وصف"})}),i.jsxs("div",{children:[i.jsxs("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[i.jsx("span",{className:"text-blue-600",children:"📝"}),"خطوات العمل"]}),i.jsxs("div",{className:"space-y-2",children:[(((p=u.settings)==null?void 0:p.steps)||[]).map((x,g)=>i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:x,onChange:v=>{var j;const b=[...((j=u.settings)==null?void 0:j.steps)||[]];b[g]=v.target.value,l(u.id,{settings:{...u.settings,steps:b}})},className:"flex-1 border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"}),i.jsx("button",{onClick:()=>{var b;const v=(((b=u.settings)==null?void 0:b.steps)||[]).filter((j,_)=>_!==g);l(u.id,{settings:{...u.settings,steps:v}})},className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:"✕"})]},g)),i.jsxs("button",{onClick:()=>{var g;const x=[...((g=u.settings)==null?void 0:g.steps)||[],""];l(u.id,{settings:{...u.settings,steps:x}})},className:"text-blue-600 hover:text-blue-800 text-sm flex items-center gap-1 px-3 py-2 rounded-lg hover:bg-blue-50 transition-colors",children:[i.jsx("span",{children:"+"}),"إضافة خطوة"]})]})]}),((f=u.settings)==null?void 0:f.note)&&i.jsx("div",{className:`p-4 rounded-lg ${u.type==="wallet"?"bg-purple-50 text-purple-800":u.type==="electronic"?"bg-blue-50 text-blue-800":"bg-green-50 text-green-800"}`,children:i.jsx("p",{children:u.settings.note})})]})]})};return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-lg shadow-sm border border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:"⚙️"}),i.jsx("h2",{className:"text-2xl font-bold",children:"إعدادات طرق الدفع"})]}),i.jsxs("button",{onClick:o,disabled:t,className:`bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 ${t?"opacity-70 cursor-not-allowed":""}`,children:[i.jsx("span",{children:"💾"}),t?"جاري الحفظ...":"حفظ التغييرات"]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 rounded-lg shadow-md p-6 border border-gray-100",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-full",children:"💰"}),i.jsx("h3",{className:"text-xl font-bold",children:"إعدادات العمولة والخصومات"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-100",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نسبة عمولة البائع (%)"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"number",value:s.deliveryCommission,onChange:u=>a({...s,deliveryCommission:Number(u.target.value)}),className:"w-32 border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",min:"0",max:"100"}),i.jsx("span",{className:"text-gray-600",children:"%"})]})]}),i.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-100 space-y-3",children:[i.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg transition-colors cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:s.autoDeductFromDriver,onChange:u=>a({...s,autoDeductFromDriver:u.target.checked}),className:"rounded text-blue-600 focus:ring-blue-500 w-5 h-5"}),i.jsx("span",{children:"خصم تلقائي من السائق (الدفع المسبق)"})]}),i.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg transition-colors cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:s.autoChargeVendor,onChange:u=>a({...s,autoChargeVendor:u.target.checked}),className:"rounded text-blue-600 focus:ring-blue-500 w-5 h-5"}),i.jsx("span",{children:"شحن محفظة البائع تلقائيًا"})]})]}),i.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-lg",children:[i.jsxs("h4",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[i.jsx("span",{children:"🧪"}),"مثال توضيحي"]}),i.jsx("p",{className:"text-gray-600 mb-4",children:"الطلب: 70 شيكل (60 للمنتج + 10 توصيل)"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{className:"text-blue-600 bg-white px-4 py-2 rounded-lg shadow-sm",children:["🔹 عمولة البائع = ",s.deliveryCommission,"% من 60 شيكل = ",(60*s.deliveryCommission/100).toFixed(2)," شيكل"]}),i.jsxs("p",{className:"text-red-600 bg-white px-4 py-2 rounded-lg shadow-sm",children:["🔹 عمولة السائق = ",s.deliveryCommission,"% من 10 شيكل = ",(10*s.deliveryCommission/100).toFixed(2)," شيكل"]}),i.jsxs("p",{className:"text-green-600 bg-white px-4 py-2 rounded-lg shadow-sm",children:["🔹 إجمالي العمولة للنظام = ",(60*s.deliveryCommission/100+10*s.deliveryCommission/100).toFixed(2)," شيكل"]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 gap-8 mt-8",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"طرق الدفع المتاحة"}),n.length===0?i.jsx("div",{className:"bg-white p-8 rounded-lg shadow-md text-center",children:i.jsx("p",{className:"text-gray-500",children:"لا توجد طرق دفع متاحة"})}):n.map(u=>i.jsx(d,{method:u},u.id))]})]})}function $F(){const[t,e]=w.useState("settings"),[n,r]=w.useState([]),[s,a]=w.useState(!1),[o,l]=w.useState(null);w.useEffect(()=>{t==="transactions"&&d()},[t]);const d=async()=>{try{a(!0),l(null);const{data:g,error:v}=await ee.from("wallets").select("id");if(v)throw v;if(g&&g.length>0){const b=g.map(N=>N.id),{data:j,error:_}=await ee.from("wallet_transactions").select(`
            *,
            wallet:wallet_id(user_id),
            order:order_id(*)
          `).in("wallet_id",b).order("created_at",{ascending:!1}).limit(100);if(_)throw _;r(j||[])}else r([{id:1,amount:150,type:"credit",payment_type:"electronic",status:"completed",description:"دفع إلكتروني للطلب #123",created_at:new Date().toISOString(),order:{id:123,total:150}},{id:2,amount:200,type:"credit",payment_type:"cash",status:"completed",description:"دفع نقدي للطلب #124",created_at:new Date(Date.now()-864e5).toISOString(),order:{id:124,total:200}},{id:3,amount:500,type:"debit",payment_type:"withdrawal",status:"pending",description:"طلب سحب رصيد",created_at:new Date(Date.now()-1728e5).toISOString()}])}catch(g){console.error("Error fetching transactions:",g),l("فشل في تحميل المعاملات. الرجاء المحاولة مرة أخرى."),z.error("فشل في تحميل المعاملات")}finally{a(!1)}},u=(g,v)=>g==="credit"?v==="electronic"?"دفع إلكتروني":v==="cash"?"دفع نقدي":v==="wallet"?"دفع من المحفظة":"إيداع":v==="withdrawal"?"سحب رصيد":v==="commission"?"عمولة":"خصم",p=g=>g==="credit"?"text-green-600":"text-red-600",f=g=>{switch(g){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},x=g=>{switch(g){case"completed":return"مكتمل";case"pending":return"معلق";case"failed":return"فشل";default:return g}};return i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[i.jsx("div",{className:"border-b",children:i.jsxs("nav",{className:"flex space-x-4 px-6","aria-label":"Tabs",children:[i.jsx("button",{onClick:()=>e("settings"),className:`py-4 px-4 text-sm font-medium border-b-2 -mb-px ${t==="settings"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"إعدادات طرق الدفع"}),i.jsx("button",{onClick:()=>e("transactions"),className:`py-4 px-4 text-sm font-medium border-b-2 -mb-px ${t==="transactions"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"سجل المعاملات"})]})}),i.jsxs("div",{className:"p-6",children:[t==="settings"&&i.jsx(FF,{}),t==="transactions"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-2xl font-bold mb-6",children:"سجل المعاملات"}),s?i.jsx("div",{className:"flex justify-center items-center py-12",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:o}),i.jsx("button",{onClick:d,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):n.length===0?i.jsx("div",{className:"text-center py-12",children:i.jsx("p",{className:"text-gray-500",children:"لا توجد معاملات"})}):i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التاريخ"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الوصف"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"رقم الطلب"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"النوع"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المبلغ"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(g=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(g.created_at).toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.description}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:g.order?`#${g.order.id}`:"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:i.jsx("span",{className:p(g.type),children:u(g.type,g.payment_type)})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:i.jsxs("span",{className:p(g.type),children:[g.type==="credit"?"+":"-","₪",Math.abs(g.amount)]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${f(g.status)}`,children:x(g.status)})})]},g.id))})]})})})]})]})]})})}const zF=async(t,e=null)=>{try{const{data:n,error:r}=await ee.rpc("get_ratings_by_type",{p_type:t,p_id:e});if(r)throw r;return n||[]}catch(n){throw console.error("Error fetching ratings:",n),n}},BF=async(t,e=null)=>{try{const{data:n,error:r}=await ee.rpc("get_ratings_stats",{p_type:t,p_id:e});if(r)throw r;return n||{average:0,total:0,distribution:{}}}catch(n){throw console.error("Error fetching ratings stats:",n),n}},UF=async t=>{try{if(!t.order_id||!t.from_type||!t.from_id||!t.to_type||!t.to_id||!t.rating)throw new Error("جميع الحقول المطلوبة غير متوفرة");if(!["customer","vendor","driver"].includes(t.from_type)||!["customer","vendor","driver"].includes(t.to_type))throw new Error("نوع المرسل أو المستقبل غير صالح");if(t.rating<1||t.rating>5)throw new Error("التقييم يجب أن يكون بين 1 و 5");const{data:e,error:n}=await ee.from("ratings").insert([{order_id:t.order_id,from_type:t.from_type,from_id:t.from_id,to_type:t.to_type,to_id:t.to_id,rating:t.rating,comment:t.comment}]).select();if(n)throw n;return e[0]}catch(e){throw console.error("Error adding rating:",e),e}},WF=async(t,e)=>{try{const{data:n,error:r}=await ee.rpc("get_ratings_report",{p_type:t,p_year:e});if(r)throw r;return n||[]}catch(n){throw console.error("Error fetching ratings report:",n),n}};function Va({rating:t,size:e="md",interactive:n=!1,onChange:r}){const s=(a,o)=>{const l={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};return i.jsx("button",{onClick:()=>n&&(r==null?void 0:r(o+1)),className:`${n?"cursor-pointer":"cursor-default"}`,disabled:!n,type:"button",children:i.jsx("svg",{className:`${l[e]} ${a?"text-yellow-400 fill-yellow-400":"text-gray-300"} transition-colors`,fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},o)};return i.jsx("div",{className:"flex items-center space-x-1",children:[...Array(5)].map((a,o)=>s(o<t,o))})}function HF({orderId:t,driverId:e,customerId:n,onComplete:r}){const[s,a]=w.useState(5),[o,l]=w.useState(""),[d,u]=w.useState(!1),[p,f]=w.useState(!1),x=async g=>{g.preventDefault(),u(!0);try{await UF({order_id:t,from_type:"driver",from_id:e,to_type:"customer",to_id:n,rating:s,comment:o}),z.success("تم إرسال تقييم الزبون بنجاح"),f(!0),r==null||r()}catch(v){console.error("خطأ في إرسال التقييم:",v),z.error("فشل في إرسال تقييم الزبون")}finally{u(!1)}};return p?i.jsxs("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[i.jsx("div",{className:"text-green-600 text-xl mb-2",children:"✓"}),i.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-2",children:"تم إرسال التقييم بنجاح"}),i.jsx("p",{className:"text-green-700",children:"شكراً لك على تقييم الزبون"})]}):i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"تقييم الزبون"}),i.jsxs("form",{onSubmit:x,children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-gray-700 mb-2",children:"التقييم"}),i.jsx("div",{className:"flex justify-center",children:i.jsx(Va,{rating:s,size:"lg",interactive:!0,onChange:a})})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-gray-700 mb-2",children:"ملاحظات (اختياري)"}),i.jsx("textarea",{value:o,onChange:g=>l(g.target.value),className:"w-full border rounded-md px-3 py-2 focus:ring-blue-500 focus:border-blue-500",rows:"3",placeholder:"أضف ملاحظاتك حول الزبون هنا..."})]}),i.jsx("button",{type:"submit",disabled:d,className:`w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors ${d?"opacity-50 cursor-not-allowed":""}`,children:d?"جاري الإرسال...":"إرسال التقييم"})]})]})}function Hf({type:t="vendor"}){const[e,n]=w.useState([]),[r,s]=w.useState({average:0,total:0,distribution:{}}),[a,o]=w.useState(!0),[l,d]=w.useState(null),[u,p]=w.useState("grid");w.useEffect(()=>{f()},[t]);const f=async()=>{try{o(!0),d(null);const _=await zF(t);n(_||[]);const N=await BF(t);s(N||{average:0,total:0,distribution:{}})}catch(_){console.error("Error fetching ratings data:",_),d("فشل في تحميل بيانات التقييمات. الرجاء المحاولة مرة أخرى."),z.error("فشل في تحميل بيانات التقييمات")}finally{o(!1)}},x=async _=>{if(window.confirm("هل أنت متأكد من حذف هذا التقييم؟"))try{const{error:N}=await supabase.from("ratings").delete().eq("id",_);if(N)throw N;z.success("تم حذف التقييم بنجاح"),f()}catch(N){console.error("Error deleting rating:",N),z.error("فشل في حذف التقييم")}},g=_=>r.total>0?_/r.total*100:0,v=_=>new Date(_).toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"col-span-1 flex flex-col items-center justify-center",children:[i.jsx("div",{className:"text-5xl font-bold text-yellow-500",children:r.average.toFixed(1)}),i.jsx("div",{className:"mt-2",children:i.jsx(Va,{rating:r.average})}),i.jsxs("div",{className:"text-gray-500 mt-2",children:["من ",r.total," تقييم"]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"توزيع التقييمات"}),i.jsx("div",{className:"space-y-3",children:[5,4,3,2,1].map(_=>i.jsxs("div",{className:"flex items-center",children:[i.jsxs("div",{className:"w-12 text-sm text-gray-600",children:[_," نجوم"]}),i.jsx("div",{className:"flex-1 mx-4",children:i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:i.jsx("div",{className:"bg-yellow-500 h-2.5 rounded-full",style:{width:`${g(r.distribution[_]||0)}%`}})})}),i.jsxs("div",{className:"w-12 text-sm text-gray-600",children:[r.distribution[_]||0," (",g(r.distribution[_]||0).toFixed(0),"%)"]})]},_))})]})]})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(_=>i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold",children:[t==="vendor"?"متجر":t==="driver"?"سائق":"زبون",_.to_name&&`: ${_.to_name}`]}),i.jsxs("p",{className:"text-gray-500 text-sm",children:["تقييم من ",_.from_name||"مستخدم"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Va,{rating:_.rating}),i.jsx("span",{className:"text-lg font-semibold",children:_.rating})]})]}),_.comment&&i.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:i.jsx("p",{className:"text-gray-700",children:_.comment})}),i.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-gray-500",children:v(_.created_at)}),i.jsx("button",{onClick:()=>x(_.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},_.id))})]}),j=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"col-span-1 flex flex-col items-center justify-center",children:[i.jsx("div",{className:"text-5xl font-bold text-yellow-500",children:r.average.toFixed(1)}),i.jsx("div",{className:"mt-2",children:i.jsx(Va,{rating:r.average})}),i.jsxs("div",{className:"text-gray-500 mt-2",children:["من ",r.total," تقييم"]})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"توزيع التقييمات"}),i.jsx("div",{className:"space-y-3",children:[5,4,3,2,1].map(_=>i.jsxs("div",{className:"flex items-center",children:[i.jsxs("div",{className:"w-12 text-sm text-gray-600",children:[_," نجوم"]}),i.jsx("div",{className:"flex-1 mx-4",children:i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:i.jsx("div",{className:"bg-yellow-500 h-2.5 rounded-full",style:{width:`${g(r.distribution[_]||0)}%`}})})}),i.jsxs("div",{className:"w-12 text-sm text-gray-600",children:[r.distribution[_]||0," (",g(r.distribution[_]||0).toFixed(0),"%)"]})]},_))})]})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:t==="vendor"?"المتجر":t==="driver"?"السائق":"الزبون"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المقيم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التقييم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التعليق"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التاريخ"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(_=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.to_name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.from_name}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Va,{rating:_.rating}),i.jsx("span",{className:"ml-2",children:_.rating})]})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"max-w-xs truncate",children:_.comment||"-"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:v(_.created_at)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:i.jsx("button",{onClick:()=>x(_.id),className:"text-red-600 hover:text-red-800",children:"حذف"})})]},_.id))})]})})})]});return a?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):l?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:l}),i.jsx("button",{onClick:f,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:t==="vendor"?"تقييمات البائعين":t==="driver"?"تقييمات السائقين":"تقييمات الزبائن"}),i.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>p("grid"),className:`px-4 py-2 rounded-lg transition-colors ${u==="grid"?"bg-white shadow text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"عرض شبكي"}),i.jsx("button",{onClick:()=>p("table"),className:`px-4 py-2 rounded-lg transition-colors ${u==="table"?"bg-white shadow text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:"عرض جدول"})]})]}),u==="grid"?b():j()]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Vc(t){return t+.5|0}const Bs=(t,e,n)=>Math.max(Math.min(t,n),e);function Cl(t){return Bs(Vc(t*2.55),0,255)}function Xs(t){return Bs(Vc(t*255),0,255)}function rs(t){return Bs(Vc(t/2.55)/100,0,1)}function p_(t){return Bs(Vc(t*100),0,100)}const Un={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Lg=[..."0123456789ABCDEF"],YF=t=>Lg[t&15],VF=t=>Lg[(t&240)>>4]+Lg[t&15],Wd=t=>(t&240)>>4===(t&15),qF=t=>Wd(t.r)&&Wd(t.g)&&Wd(t.b)&&Wd(t.a);function ZF(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Un[t[1]]*17,g:255&Un[t[2]]*17,b:255&Un[t[3]]*17,a:e===5?Un[t[4]]*17:255}:(e===7||e===9)&&(n={r:Un[t[1]]<<4|Un[t[2]],g:Un[t[3]]<<4|Un[t[4]],b:Un[t[5]]<<4|Un[t[6]],a:e===9?Un[t[7]]<<4|Un[t[8]]:255})),n}const KF=(t,e)=>t<255?e(t):"";function GF(t){var e=qF(t)?YF:VF;return t?"#"+e(t.r)+e(t.g)+e(t.b)+KF(t.a,e):void 0}const QF=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ck(t,e,n){const r=e*Math.min(n,1-n),s=(a,o=(a+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function XF(t,e,n){const r=(s,a=(s+t/60)%6)=>n-n*e*Math.max(Math.min(a,4-a,1),0);return[r(5),r(3),r(1)]}function JF(t,e,n){const r=ck(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function e8(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function uv(t){const n=t.r/255,r=t.g/255,s=t.b/255,a=Math.max(n,r,s),o=Math.min(n,r,s),l=(a+o)/2;let d,u,p;return a!==o&&(p=a-o,u=l>.5?p/(2-a-o):p/(a+o),d=e8(n,r,s,p,a),d=d*60+.5),[d|0,u||0,l]}function hv(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Xs)}function pv(t,e,n){return hv(ck,t,e,n)}function t8(t,e,n){return hv(JF,t,e,n)}function n8(t,e,n){return hv(XF,t,e,n)}function dk(t){return(t%360+360)%360}function r8(t){const e=QF.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Cl(+e[5]):Xs(+e[5]));const s=dk(+e[2]),a=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=t8(s,a,o):e[1]==="hsv"?r=n8(s,a,o):r=pv(s,a,o),{r:r[0],g:r[1],b:r[2],a:n}}function s8(t,e){var n=uv(t);n[0]=dk(n[0]+e),n=pv(n),t.r=n[0],t.g=n[1],t.b=n[2]}function i8(t){if(!t)return;const e=uv(t),n=e[0],r=p_(e[1]),s=p_(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${rs(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const f_={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},m_={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function a8(){const t={},e=Object.keys(m_),n=Object.keys(f_);let r,s,a,o,l;for(r=0;r<e.length;r++){for(o=l=e[r],s=0;s<n.length;s++)a=n[s],l=l.replace(a,f_[a]);a=parseInt(m_[o],16),t[l]=[a>>16&255,a>>8&255,a&255]}return t}let Hd;function o8(t){Hd||(Hd=a8(),Hd.transparent=[0,0,0,0]);const e=Hd[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const l8=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function c8(t){const e=l8.exec(t);let n=255,r,s,a;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Cl(o):Bs(o*255,0,255)}return r=+e[1],s=+e[3],a=+e[5],r=255&(e[2]?Cl(r):Bs(r,0,255)),s=255&(e[4]?Cl(s):Bs(s,0,255)),a=255&(e[6]?Cl(a):Bs(a,0,255)),{r,g:s,b:a,a:n}}}function d8(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${rs(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Yf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Pa=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function u8(t,e,n){const r=Pa(rs(t.r)),s=Pa(rs(t.g)),a=Pa(rs(t.b));return{r:Xs(Yf(r+n*(Pa(rs(e.r))-r))),g:Xs(Yf(s+n*(Pa(rs(e.g))-s))),b:Xs(Yf(a+n*(Pa(rs(e.b))-a))),a:t.a+n*(e.a-t.a)}}function Yd(t,e,n){if(t){let r=uv(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=pv(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function uk(t,e){return t&&Object.assign(e||{},t)}function g_(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Xs(t[3]))):(e=uk(t,{r:0,g:0,b:0,a:1}),e.a=Xs(e.a)),e}function h8(t){return t.charAt(0)==="r"?c8(t):r8(t)}class Ec{constructor(e){if(e instanceof Ec)return e;const n=typeof e;let r;n==="object"?r=g_(e):n==="string"&&(r=ZF(e)||o8(e)||h8(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=uk(this._rgb);return e&&(e.a=rs(e.a)),e}set rgb(e){this._rgb=g_(e)}rgbString(){return this._valid?d8(this._rgb):void 0}hexString(){return this._valid?GF(this._rgb):void 0}hslString(){return this._valid?i8(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let a;const o=n===a?.5:n,l=2*o-1,d=r.a-s.a,u=((l*d===-1?l:(l+d)/(1+l*d))+1)/2;a=1-u,r.r=255&u*r.r+a*s.r+.5,r.g=255&u*r.g+a*s.g+.5,r.b=255&u*r.b+a*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=u8(this._rgb,e._rgb,n)),this}clone(){return new Ec(this.rgb)}alpha(e){return this._rgb.a=Xs(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Vc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Yd(this._rgb,2,e),this}darken(e){return Yd(this._rgb,2,-e),this}saturate(e){return Yd(this._rgb,1,e),this}desaturate(e){return Yd(this._rgb,1,-e),this}rotate(e){return s8(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Gr(){}const p8=(()=>{let t=0;return()=>t++})();function nt(t){return t==null}function It(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function He(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function nr(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Nr(t,e){return nr(t)?t:e}function $e(t,e){return typeof t>"u"?e:t}const f8=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function st(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function qe(t,e,n,r){let s,a,o;if(It(t))for(a=t.length,s=0;s<a;s++)e.call(n,t[s],s);else if(He(t))for(o=Object.keys(t),a=o.length,s=0;s<a;s++)e.call(n,t[o[s]],o[s])}function vh(t,e){let n,r,s,a;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],a=e[n],s.datasetIndex!==a.datasetIndex||s.index!==a.index)return!1;return!0}function yh(t){if(It(t))return t.map(yh);if(He(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=yh(t[n[s]]);return e}return t}function hk(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function m8(t,e,n,r){if(!hk(t))return;const s=e[t],a=n[t];He(s)&&He(a)?Tc(s,a,r):e[t]=yh(a)}function Tc(t,e,n){const r=It(e)?e:[e],s=r.length;if(!He(t))return t;n=n||{};const a=n.merger||m8;let o;for(let l=0;l<s;++l){if(o=r[l],!He(o))continue;const d=Object.keys(o);for(let u=0,p=d.length;u<p;++u)a(d[u],t,o,n)}return t}function Zl(t,e){return Tc(t,e,{merger:g8})}function g8(t,e,n){if(!hk(t))return;const r=e[t],s=n[t];He(r)&&He(s)?Zl(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=yh(s))}const x_={"":t=>t,x:t=>t.x,y:t=>t.y};function x8(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function v8(t){const e=x8(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function bh(t,e){return(x_[e]||(x_[e]=v8(e)))(t)}function fv(t){return t.charAt(0).toUpperCase()+t.slice(1)}const _h=t=>typeof t<"u",ri=t=>typeof t=="function",v_=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function y8(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ft=Math.PI,$r=2*Ft,b8=$r+Ft,wh=Number.POSITIVE_INFINITY,_8=Ft/180,hr=Ft/2,bi=Ft/4,y_=Ft*2/3,pk=Math.log10,wo=Math.sign;function Kl(t,e,n){return Math.abs(t-e)<n}function b_(t){const e=Math.round(t);t=Kl(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(pk(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function w8(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,a)=>s-a).pop(),e}function j8(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Pc(t){return!j8(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function N8(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function k8(t,e,n){let r,s,a;for(r=0,s=t.length;r<s;r++)a=t[r][n],isNaN(a)||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function Fi(t){return t*(Ft/180)}function S8(t){return t*(180/Ft)}function __(t){if(!nr(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function C8(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let a=Math.atan2(r,n);return a<-.5*Ft&&(a+=$r),{angle:a,distance:s}}function Ag(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function E8(t,e){return(t-e+b8)%$r-Ft}function Ss(t){return(t%$r+$r)%$r}function fk(t,e,n,r){const s=Ss(t),a=Ss(e),o=Ss(n),l=Ss(a-s),d=Ss(o-s),u=Ss(s-a),p=Ss(s-o);return s===a||s===o||r&&a===o||l>d&&u<p}function qn(t,e,n){return Math.max(e,Math.min(n,t))}function T8(t){return qn(t,-32768,32767)}function El(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function mv(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,a;for(;r-s>1;)a=s+r>>1,n(a)?s=a:r=a;return{lo:s,hi:r}}const $i=(t,e,n,r)=>mv(t,n,r?s=>{const a=t[s][e];return a<n||a===n&&t[s+1][e]===n}:s=>t[s][e]<n),P8=(t,e,n)=>mv(t,n,r=>t[r][e]>=n);function D8(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const mk=["push","pop","shift","splice","unshift"];function O8(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),mk.forEach(n=>{const r="_onData"+fv(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...a){const o=s.apply(this,a);return t._chartjs.listeners.forEach(l=>{typeof l[r]=="function"&&l[r](...a)}),o}})})}function w_(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(mk.forEach(a=>{delete t[a]}),delete t._chartjs)}function M8(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const gk=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function xk(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,gk.call(window,()=>{r=!1,t.apply(e,n)}))}}function L8(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const gv=t=>t==="start"?"left":t==="end"?"right":"center",tn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,A8=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function I8(t,e,n){const r=e.length;let s=0,a=r;if(t._sorted){const{iScale:o,vScale:l,_parsed:d}=t,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,p=o.axis,{min:f,max:x,minDefined:g,maxDefined:v}=o.getUserBounds();if(g){if(s=Math.min($i(d,p,f).lo,n?r:$i(e,p,o.getPixelForValue(f)).lo),u){const b=d.slice(0,s+1).reverse().findIndex(j=>!nt(j[l.axis]));s-=Math.max(0,b)}s=qn(s,0,r-1)}if(v){let b=Math.max($i(d,o.axis,x,!0).hi+1,n?0:$i(e,p,o.getPixelForValue(x),!0).hi+1);if(u){const j=d.slice(b-1).findIndex(_=>!nt(_[l.axis]));b+=Math.max(0,j)}a=qn(b,s,r)-s}else a=r-s}return{start:s,count:a}}function R8(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const a=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),a}const Vd=t=>t===0||t===1,j_=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*$r/n)),N_=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*$r/n)+1,Gl={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*hr)+1,easeOutSine:t=>Math.sin(t*hr),easeInOutSine:t=>-.5*(Math.cos(Ft*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Vd(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Vd(t)?t:j_(t,.075,.3),easeOutElastic:t=>Vd(t)?t:N_(t,.075,.3),easeInOutElastic(t){return Vd(t)?t:t<.5?.5*j_(t*2,.1125,.45):.5+.5*N_(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Gl.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Gl.easeInBounce(t*2)*.5:Gl.easeOutBounce(t*2-1)*.5+.5};function xv(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function k_(t){return xv(t)?t:new Ec(t)}function Vf(t){return xv(t)?t:new Ec(t).saturate(.5).darken(.1).hexString()}const F8=["x","y","borderWidth","radius","tension"],$8=["color","borderColor","backgroundColor"];function z8(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:$8},numbers:{type:"number",properties:F8}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function B8(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const S_=new Map;function U8(t,e){e=e||{};const n=t+JSON.stringify(e);let r=S_.get(n);return r||(r=new Intl.NumberFormat(t,e),S_.set(n,r)),r}function vk(t,e,n){return U8(e,n).format(t)}const W8={values(t){return It(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,a=t;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(s="scientific"),a=H8(t,n)}const o=pk(Math.abs(a)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),d={notation:s,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(d,this.options.ticks.format),vk(t,r,d)}};function H8(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var yk={formatters:W8};function Y8(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:yk.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const na=Object.create(null),Ig=Object.create(null);function Ql(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const a=n[r];t=t[a]||(t[a]=Object.create(null))}return t}function qf(t,e,n){return typeof e=="string"?Tc(Ql(t,e),n):Tc(Ql(t,""),e)}class V8{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>Vf(s.backgroundColor),this.hoverBorderColor=(r,s)=>Vf(s.borderColor),this.hoverColor=(r,s)=>Vf(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return qf(this,e,n)}get(e){return Ql(this,e)}describe(e,n){return qf(Ig,e,n)}override(e,n){return qf(na,e,n)}route(e,n,r,s){const a=Ql(this,e),o=Ql(this,r),l="_"+n;Object.defineProperties(a,{[l]:{value:a[n],writable:!0},[n]:{enumerable:!0,get(){const d=this[l],u=o[s];return He(d)?Object.assign({},u,d):$e(d,u)},set(d){this[l]=d}}})}apply(e){e.forEach(n=>n(this))}}var jt=new V8({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[z8,B8,Y8]);function q8(t){return!t||nt(t.size)||nt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function C_(t,e,n,r,s){let a=e[s];return a||(a=e[s]=t.measureText(s).width,n.push(s)),a>r&&(r=a),r}function _i(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function E_(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Rg(t,e,n,r){bk(t,e,n,r,null)}function bk(t,e,n,r,s){let a,o,l,d,u,p,f,x;const g=e.pointStyle,v=e.rotation,b=e.radius;let j=(v||0)*_8;if(g&&typeof g=="object"&&(a=g.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(j),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(b)||b<=0)){switch(t.beginPath(),g){default:s?t.ellipse(n,r,s/2,b,0,0,$r):t.arc(n,r,b,0,$r),t.closePath();break;case"triangle":p=s?s/2:b,t.moveTo(n+Math.sin(j)*p,r-Math.cos(j)*b),j+=y_,t.lineTo(n+Math.sin(j)*p,r-Math.cos(j)*b),j+=y_,t.lineTo(n+Math.sin(j)*p,r-Math.cos(j)*b),t.closePath();break;case"rectRounded":u=b*.516,d=b-u,o=Math.cos(j+bi)*d,f=Math.cos(j+bi)*(s?s/2-u:d),l=Math.sin(j+bi)*d,x=Math.sin(j+bi)*(s?s/2-u:d),t.arc(n-f,r-l,u,j-Ft,j-hr),t.arc(n+x,r-o,u,j-hr,j),t.arc(n+f,r+l,u,j,j+hr),t.arc(n-x,r+o,u,j+hr,j+Ft),t.closePath();break;case"rect":if(!v){d=Math.SQRT1_2*b,p=s?s/2:d,t.rect(n-p,r-d,2*p,2*d);break}j+=bi;case"rectRot":f=Math.cos(j)*(s?s/2:b),o=Math.cos(j)*b,l=Math.sin(j)*b,x=Math.sin(j)*(s?s/2:b),t.moveTo(n-f,r-l),t.lineTo(n+x,r-o),t.lineTo(n+f,r+l),t.lineTo(n-x,r+o),t.closePath();break;case"crossRot":j+=bi;case"cross":f=Math.cos(j)*(s?s/2:b),o=Math.cos(j)*b,l=Math.sin(j)*b,x=Math.sin(j)*(s?s/2:b),t.moveTo(n-f,r-l),t.lineTo(n+f,r+l),t.moveTo(n+x,r-o),t.lineTo(n-x,r+o);break;case"star":f=Math.cos(j)*(s?s/2:b),o=Math.cos(j)*b,l=Math.sin(j)*b,x=Math.sin(j)*(s?s/2:b),t.moveTo(n-f,r-l),t.lineTo(n+f,r+l),t.moveTo(n+x,r-o),t.lineTo(n-x,r+o),j+=bi,f=Math.cos(j)*(s?s/2:b),o=Math.cos(j)*b,l=Math.sin(j)*b,x=Math.sin(j)*(s?s/2:b),t.moveTo(n-f,r-l),t.lineTo(n+f,r+l),t.moveTo(n+x,r-o),t.lineTo(n-x,r+o);break;case"line":o=s?s/2:Math.cos(j)*b,l=Math.sin(j)*b,t.moveTo(n-o,r-l),t.lineTo(n+o,r+l);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(j)*(s?s/2:b),r+Math.sin(j)*b);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Dc(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function vv(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function yv(t){t.restore()}function Z8(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const a=(e.x+n.x)/2;t.lineTo(a,e.y),t.lineTo(a,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function K8(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function G8(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),nt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Q8(t,e,n,r,s){if(s.strikethrough||s.underline){const a=t.measureText(r),o=e-a.actualBoundingBoxLeft,l=e+a.actualBoundingBoxRight,d=n-a.actualBoundingBoxAscent,u=n+a.actualBoundingBoxDescent,p=s.strikethrough?(d+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,p),t.lineTo(l,p),t.stroke()}}function X8(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Oc(t,e,n,r,s,a={}){const o=It(e)?e:[e],l=a.strokeWidth>0&&a.strokeColor!=="";let d,u;for(t.save(),t.font=s.string,G8(t,a),d=0;d<o.length;++d)u=o[d],a.backdrop&&X8(t,a.backdrop),l&&(a.strokeColor&&(t.strokeStyle=a.strokeColor),nt(a.strokeWidth)||(t.lineWidth=a.strokeWidth),t.strokeText(u,n,r,a.maxWidth)),t.fillText(u,n,r,a.maxWidth),Q8(t,n,r,u,a),r+=Number(s.lineHeight);t.restore()}function Fg(t,e){const{x:n,y:r,w:s,h:a,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Ft,Ft,!0),t.lineTo(n,r+a-o.bottomLeft),t.arc(n+o.bottomLeft,r+a-o.bottomLeft,o.bottomLeft,Ft,hr,!0),t.lineTo(n+s-o.bottomRight,r+a),t.arc(n+s-o.bottomRight,r+a-o.bottomRight,o.bottomRight,hr,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-hr,!0),t.lineTo(n+o.topLeft,r)}const J8=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,e$=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function t$(t,e){const n=(""+t).match(J8);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const n$=t=>+t||0;function _k(t,e){const n={},r=He(e),s=r?Object.keys(e):e,a=He(t)?r?o=>$e(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=n$(a(o));return n}function r$(t){return _k(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Xl(t){return _k(t,["topLeft","topRight","bottomLeft","bottomRight"])}function rr(t){const e=r$(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function sn(t,e){t=t||{},e=e||jt.font;let n=$e(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=$e(t.style,e.style);r&&!(""+r).match(e$)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:$e(t.family,e.family),lineHeight:t$($e(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:$e(t.weight,e.weight),string:""};return s.string=q8(s),s}function qd(t,e,n,r){let s,a,o;for(s=0,a=t.length;s<a;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function s$(t,e,n){const{min:r,max:s}=t,a=f8(e,(s-r)/2),o=(l,d)=>n&&l===0?0:l+d;return{min:o(r,-Math.abs(a)),max:o(s,a)}}function da(t,e){return Object.assign(Object.create(t),e)}function bv(t,e=[""],n,r,s=()=>t[0]){const a=n||t;typeof r>"u"&&(r=kk("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:a,_fallback:r,_getTarget:s,override:l=>bv([l,...t],e,a,r)};return new Proxy(o,{deleteProperty(l,d){return delete l[d],delete l._keys,delete t[0][d],!0},get(l,d){return jk(l,d,()=>h$(d,e,t,l))},getOwnPropertyDescriptor(l,d){return Reflect.getOwnPropertyDescriptor(l._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,d){return P_(l).includes(d)},ownKeys(l){return P_(l)},set(l,d,u){const p=l._storage||(l._storage=s());return l[d]=p[d]=u,delete l._keys,!0}})}function jo(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:wk(t,r),setContext:a=>jo(t,a,n,r),override:a=>jo(t.override(a),e,n,r)};return new Proxy(s,{deleteProperty(a,o){return delete a[o],delete t[o],!0},get(a,o,l){return jk(a,o,()=>a$(a,o,l))},getOwnPropertyDescriptor(a,o){return a._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(a,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(a,o,l){return t[o]=l,delete a[o],!0}})}function wk(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:ri(n)?n:()=>n,isIndexable:ri(r)?r:()=>r}}const i$=(t,e)=>t?t+fv(e):e,_v=(t,e)=>He(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function jk(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function a$(t,e,n){const{_proxy:r,_context:s,_subProxy:a,_descriptors:o}=t;let l=r[e];return ri(l)&&o.isScriptable(e)&&(l=o$(e,l,t,n)),It(l)&&l.length&&(l=l$(e,l,t,o.isIndexable)),_v(e,l)&&(l=jo(l,s,a&&a[e],o)),l}function o$(t,e,n,r){const{_proxy:s,_context:a,_subProxy:o,_stack:l}=n;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let d=e(a,o||r);return l.delete(t),_v(t,d)&&(d=wv(s._scopes,s,t,d)),d}function l$(t,e,n,r){const{_proxy:s,_context:a,_subProxy:o,_descriptors:l}=n;if(typeof a.index<"u"&&r(t))return e[a.index%e.length];if(He(e[0])){const d=e,u=s._scopes.filter(p=>p!==d);e=[];for(const p of d){const f=wv(u,s,t,p);e.push(jo(f,a,o&&o[t],l))}}return e}function Nk(t,e,n){return ri(t)?t(e,n):t}const c$=(t,e)=>t===!0?e:typeof t=="string"?bh(e,t):void 0;function d$(t,e,n,r,s){for(const a of e){const o=c$(n,a);if(o){t.add(o);const l=Nk(o._fallback,n,s);if(typeof l<"u"&&l!==n&&l!==r)return l}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function wv(t,e,n,r){const s=e._rootScopes,a=Nk(e._fallback,n,r),o=[...t,...s],l=new Set;l.add(r);let d=T_(l,o,n,a||n,r);return d===null||typeof a<"u"&&a!==n&&(d=T_(l,o,a,d,r),d===null)?!1:bv(Array.from(l),[""],s,a,()=>u$(e,n,r))}function T_(t,e,n,r,s){for(;n;)n=d$(t,e,n,r,s);return n}function u$(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return It(s)&&He(n)?n:s||{}}function h$(t,e,n,r){let s;for(const a of e)if(s=kk(i$(a,t),n),typeof s<"u")return _v(t,s)?wv(n,r,t,s):s}function kk(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function P_(t){let e=t._keys;return e||(e=t._keys=p$(t._scopes)),e}function p$(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const f$=Number.EPSILON||1e-14,No=(t,e)=>e<t.length&&!t[e].skip&&t[e],Sk=t=>t==="x"?"y":"x";function m$(t,e,n,r){const s=t.skip?e:t,a=e,o=n.skip?e:n,l=Ag(a,s),d=Ag(o,a);let u=l/(l+d),p=d/(l+d);u=isNaN(u)?0:u,p=isNaN(p)?0:p;const f=r*u,x=r*p;return{previous:{x:a.x-f*(o.x-s.x),y:a.y-f*(o.y-s.y)},next:{x:a.x+x*(o.x-s.x),y:a.y+x*(o.y-s.y)}}}function g$(t,e,n){const r=t.length;let s,a,o,l,d,u=No(t,0);for(let p=0;p<r-1;++p)if(d=u,u=No(t,p+1),!(!d||!u)){if(Kl(e[p],0,f$)){n[p]=n[p+1]=0;continue}s=n[p]/e[p],a=n[p+1]/e[p],l=Math.pow(s,2)+Math.pow(a,2),!(l<=9)&&(o=3/Math.sqrt(l),n[p]=s*o*e[p],n[p+1]=a*o*e[p])}}function x$(t,e,n="x"){const r=Sk(n),s=t.length;let a,o,l,d=No(t,0);for(let u=0;u<s;++u){if(o=l,l=d,d=No(t,u+1),!l)continue;const p=l[n],f=l[r];o&&(a=(p-o[n])/3,l[`cp1${n}`]=p-a,l[`cp1${r}`]=f-a*e[u]),d&&(a=(d[n]-p)/3,l[`cp2${n}`]=p+a,l[`cp2${r}`]=f+a*e[u])}}function v$(t,e="x"){const n=Sk(e),r=t.length,s=Array(r).fill(0),a=Array(r);let o,l,d,u=No(t,0);for(o=0;o<r;++o)if(l=d,d=u,u=No(t,o+1),!!d){if(u){const p=u[e]-d[e];s[o]=p!==0?(u[n]-d[n])/p:0}a[o]=l?u?wo(s[o-1])!==wo(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}g$(t,s,a),x$(t,a,e)}function Zd(t,e,n){return Math.max(Math.min(t,n),e)}function y$(t,e){let n,r,s,a,o,l=Dc(t[0],e);for(n=0,r=t.length;n<r;++n)o=a,a=l,l=n<r-1&&Dc(t[n+1],e),a&&(s=t[n],o&&(s.cp1x=Zd(s.cp1x,e.left,e.right),s.cp1y=Zd(s.cp1y,e.top,e.bottom)),l&&(s.cp2x=Zd(s.cp2x,e.left,e.right),s.cp2y=Zd(s.cp2y,e.top,e.bottom)))}function b$(t,e,n,r,s){let a,o,l,d;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")v$(t,s);else{let u=r?t[t.length-1]:t[0];for(a=0,o=t.length;a<o;++a)l=t[a],d=m$(u,l,t[Math.min(a+1,o-(r?0:1))%o],e.tension),l.cp1x=d.previous.x,l.cp1y=d.previous.y,l.cp2x=d.next.x,l.cp2y=d.next.y,u=l}e.capBezierPoints&&y$(t,n)}function jv(){return typeof window<"u"&&typeof document<"u"}function Nv(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function jh(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const up=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function _$(t,e){return up(t).getPropertyValue(e)}const w$=["top","right","bottom","left"];function Vi(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const a=w$[s];r[a]=parseFloat(t[e+"-"+a+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const j$=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function N$(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:a}=r;let o=!1,l,d;if(j$(s,a,t.target))l=s,d=a;else{const u=e.getBoundingClientRect();l=r.clientX-u.left,d=r.clientY-u.top,o=!0}return{x:l,y:d,box:o}}function Ei(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=up(n),a=s.boxSizing==="border-box",o=Vi(s,"padding"),l=Vi(s,"border","width"),{x:d,y:u,box:p}=N$(t,n),f=o.left+(p&&l.left),x=o.top+(p&&l.top);let{width:g,height:v}=e;return a&&(g-=o.width+l.width,v-=o.height+l.height),{x:Math.round((d-f)/g*n.width/r),y:Math.round((u-x)/v*n.height/r)}}function k$(t,e,n){let r,s;if(e===void 0||n===void 0){const a=t&&Nv(t);if(!a)e=t.clientWidth,n=t.clientHeight;else{const o=a.getBoundingClientRect(),l=up(a),d=Vi(l,"border","width"),u=Vi(l,"padding");e=o.width-u.width-d.width,n=o.height-u.height-d.height,r=jh(l.maxWidth,a,"clientWidth"),s=jh(l.maxHeight,a,"clientHeight")}}return{width:e,height:n,maxWidth:r||wh,maxHeight:s||wh}}const Kd=t=>Math.round(t*10)/10;function S$(t,e,n,r){const s=up(t),a=Vi(s,"margin"),o=jh(s.maxWidth,t,"clientWidth")||wh,l=jh(s.maxHeight,t,"clientHeight")||wh,d=k$(t,e,n);let{width:u,height:p}=d;if(s.boxSizing==="content-box"){const x=Vi(s,"border","width"),g=Vi(s,"padding");u-=g.width+x.width,p-=g.height+x.height}return u=Math.max(0,u-a.width),p=Math.max(0,r?u/r:p-a.height),u=Kd(Math.min(u,o,d.maxWidth)),p=Kd(Math.min(p,l,d.maxHeight)),u&&!p&&(p=Kd(u/2)),(e!==void 0||n!==void 0)&&r&&d.height&&p>d.height&&(p=d.height,u=Kd(Math.floor(p*r))),{width:u,height:p}}function D_(t,e,n){const r=e||1,s=Math.floor(t.height*r),a=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==a?(t.currentDevicePixelRatio=r,o.height=s,o.width=a,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const C$=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};jv()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function O_(t,e){const n=_$(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Ti(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function E$(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function T$(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},a={x:e.cp1x,y:e.cp1y},o=Ti(t,s,n),l=Ti(s,a,n),d=Ti(a,e,n),u=Ti(o,l,n),p=Ti(l,d,n);return Ti(u,p,n)}const P$=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},D$=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function no(t,e,n){return t?P$(e,n):D$()}function Ck(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function Ek(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Tk(t){return t==="angle"?{between:fk,compare:E8,normalize:Ss}:{between:El,compare:(e,n)=>e-n,normalize:e=>e}}function M_({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function O$(t,e,n){const{property:r,start:s,end:a}=n,{between:o,normalize:l}=Tk(r),d=e.length;let{start:u,end:p,loop:f}=t,x,g;if(f){for(u+=d,p+=d,x=0,g=d;x<g&&o(l(e[u%d][r]),s,a);++x)u--,p--;u%=d,p%=d}return p<u&&(p+=d),{start:u,end:p,loop:f,style:t.style}}function M$(t,e,n){if(!n)return[t];const{property:r,start:s,end:a}=n,o=e.length,{compare:l,between:d,normalize:u}=Tk(r),{start:p,end:f,loop:x,style:g}=O$(t,e,n),v=[];let b=!1,j=null,_,N,S;const P=()=>d(s,S,_)&&l(s,S)!==0,M=()=>l(a,_)===0||d(a,S,_),R=()=>b||P(),A=()=>!b||M();for(let T=p,Y=p;T<=f;++T)N=e[T%o],!N.skip&&(_=u(N[r]),_!==S&&(b=d(_,s,a),j===null&&R()&&(j=l(_,s)===0?T:Y),j!==null&&A()&&(v.push(M_({start:j,end:T,loop:x,count:o,style:g})),j=null),Y=T,S=_));return j!==null&&v.push(M_({start:j,end:f,loop:x,count:o,style:g})),v}function L$(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const a=M$(r[s],t.points,e);a.length&&n.push(...a)}return n}function A$(t,e,n,r){let s=0,a=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(a+=s);a>s&&t[a%e].skip;)a--;return a%=e,{start:s,end:a}}function I$(t,e,n,r){const s=t.length,a=[];let o=e,l=t[e],d;for(d=e+1;d<=n;++d){const u=t[d%s];u.skip||u.stop?l.skip||(r=!1,a.push({start:e%s,end:(d-1)%s,loop:r}),e=o=u.stop?d:null):(o=d,l.skip&&(e=d)),l=u}return o!==null&&a.push({start:e%s,end:o%s,loop:r}),a}function R$(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const a=!!t._loop,{start:o,end:l}=A$(n,s,a,r);if(r===!0)return L_(t,[{start:o,end:l,loop:a}],n,e);const d=l<o?l+s:l,u=!!t._fullLoop&&o===0&&l===s-1;return L_(t,I$(n,o,d,u),n,e)}function L_(t,e,n,r){return!r||!r.setContext||!n?e:F$(t,e,n,r)}function F$(t,e,n,r){const s=t._chart.getContext(),a=A_(t.options),{_datasetIndex:o,options:{spanGaps:l}}=t,d=n.length,u=[];let p=a,f=e[0].start,x=f;function g(v,b,j,_){const N=l?-1:1;if(v!==b){for(v+=d;n[v%d].skip;)v-=N;for(;n[b%d].skip;)b+=N;v%d!==b%d&&(u.push({start:v%d,end:b%d,loop:j,style:_}),p=_,f=b%d)}}for(const v of e){f=l?f:v.start;let b=n[f%d],j;for(x=f+1;x<=v.end;x++){const _=n[x%d];j=A_(r.setContext(da(s,{type:"segment",p0:b,p1:_,p0DataIndex:(x-1)%d,p1DataIndex:x%d,datasetIndex:o}))),$$(j,p)&&g(f,x-1,v.loop,p),b=_,p=j}f<x-1&&g(f,x-1,v.loop,p)}return u}function A_(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function $$(t,e){if(!e)return!1;const n=[],r=function(s,a){return xv(a)?(n.includes(a)||n.push(a),n.indexOf(a)):a};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Gd(t,e,n){return t.options.clip?t[n]:e[n]}function z$(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Gd(n,e,"left"),right:Gd(n,e,"right"),top:Gd(r,e,"top"),bottom:Gd(r,e,"bottom")}:e}function B$(t,e){const n=e._clip;if(n.disabled)return!1;const r=z$(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class U${constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const a=n.listeners[s],o=n.duration;a.forEach(l=>l({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=gk.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const a=r.items;let o=a.length-1,l=!1,d;for(;o>=0;--o)d=a[o],d._active?(d._total>r.duration&&(r.duration=d._total),d.tick(e),l=!0):(a[o]=a[a.length-1],a.pop());l&&(s.draw(),this._notify(s,r,e,"progress")),a.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=a.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Qr=new U$;const I_="transparent",W$={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=k_(t||I_),s=r.valid&&k_(e||I_);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class H${constructor(e,n,r,s){const a=n[r];s=qd([e.to,s,a,e.from]);const o=qd([e.from,a,s]);this._active=!0,this._fn=e.fn||W$[e.type||typeof o],this._easing=Gl[e.easing]||Gl.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],a=r-this._start,o=this._duration-a;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=qd([e.to,n,s,e.from]),this._from=qd([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,a=this._from,o=this._loop,l=this._to;let d;if(this._active=a!==l&&(o||n<r),!this._active){this._target[s]=l,this._notify(!0);return}if(n<0){this._target[s]=a;return}d=n/r%2,d=o&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[s]=this._fn(a,l,d)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class Pk{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!He(e))return;const n=Object.keys(jt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const a=e[s];if(!He(a))return;const o={};for(const l of n)o[l]=a[l];(It(a.properties)&&a.properties||[s]).forEach(l=>{(l===s||!r.has(l))&&r.set(l,o)})})}_animateOptions(e,n){const r=n.options,s=V$(e,r);if(!s)return[];const a=this._createAnimations(s,r);return r.$shared&&Y$(e.options.$animations,r).then(()=>{e.options=r},()=>{}),a}_createAnimations(e,n){const r=this._properties,s=[],a=e.$animations||(e.$animations={}),o=Object.keys(n),l=Date.now();let d;for(d=o.length-1;d>=0;--d){const u=o[d];if(u.charAt(0)==="$")continue;if(u==="options"){s.push(...this._animateOptions(e,n));continue}const p=n[u];let f=a[u];const x=r.get(u);if(f)if(x&&f.active()){f.update(x,p,l);continue}else f.cancel();if(!x||!x.duration){e[u]=p;continue}a[u]=f=new H$(x,e,u,p),s.push(f)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Qr.add(this._chart,r),!0}}function Y$(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const a=t[r[s]];a&&a.active()&&n.push(a.wait())}return Promise.all(n)}function V$(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function R_(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,a=n.max===void 0?e:0;return{start:r?a:s,end:r?s:a}}function q$(t,e,n){if(n===!1)return!1;const r=R_(t,n),s=R_(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function Z$(t){let e,n,r,s;return He(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function Dk(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,a;for(s=0,a=r.length;s<a;++s)n.push(r[s].index);return n}function F_(t,e,n,r={}){const s=t.keys,a=r.mode==="single";let o,l,d,u;if(e===null)return;let p=!1;for(o=0,l=s.length;o<l;++o){if(d=+s[o],d===n){if(p=!0,r.all)continue;break}u=t.values[d],nr(u)&&(a||e===0||wo(e)===wo(u))&&(e+=u)}return!p&&!r.all?0:e}function K$(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",a=r.axis==="x"?"x":"y",o=Object.keys(t),l=new Array(o.length);let d,u,p;for(d=0,u=o.length;d<u;++d)p=o[d],l[d]={[s]:p,[a]:t[p]};return l}function Zf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function G$(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function Q$(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function X$(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function $_(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const a=t[s.index];if(n&&a>0||!n&&a<0)return s.index}return null}function z_(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:a,vScale:o,index:l}=r,d=a.axis,u=o.axis,p=G$(a,o,r),f=e.length;let x;for(let g=0;g<f;++g){const v=e[g],{[d]:b,[u]:j}=v,_=v._stacks||(v._stacks={});x=_[u]=X$(s,p,b),x[l]=j,x._top=$_(x,o,!0,r.type),x._bottom=$_(x,o,!1,r.type);const N=x._visualValues||(x._visualValues={});N[l]=j}}function Kf(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function J$(t,e){return da(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function ez(t,e,n){return da(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function pl(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const a=s._stacks;if(!a||a[r]===void 0||a[r][n]===void 0)return;delete a[r][n],a[r]._visualValues!==void 0&&a[r]._visualValues[n]!==void 0&&delete a[r]._visualValues[n]}}}const Gf=t=>t==="reset"||t==="none",B_=(t,e)=>e?t:Object.assign({},t),tz=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Dk(n,!0),values:null};class Jl{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Zf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&pl(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(f,x,g,v)=>f==="x"?x:f==="r"?v:g,a=n.xAxisID=$e(r.xAxisID,Kf(e,"x")),o=n.yAxisID=$e(r.yAxisID,Kf(e,"y")),l=n.rAxisID=$e(r.rAxisID,Kf(e,"r")),d=n.indexAxis,u=n.iAxisID=s(d,a,o,l),p=n.vAxisID=s(d,o,a,l);n.xScale=this.getScaleForId(a),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(p)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&w_(this._data,this),e._stacked&&pl(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(He(n)){const s=this._cachedMeta;this._data=K$(n,s)}else if(r!==n){if(r){w_(r,this);const s=this._cachedMeta;pl(s),s._parsed=[]}n&&Object.isExtensible(n)&&O8(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const a=n._stacked;n._stacked=Zf(n.vScale,n),n.stack!==r.stack&&(s=!0,pl(n),n.stack=r.stack),this._resyncElements(e),(s||a!==n._stacked)&&(z_(this,n._parsed),n._stacked=Zf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:a,_stacked:o}=r,l=a.axis;let d=e===0&&n===s.length?!0:r._sorted,u=e>0&&r._parsed[e-1],p,f,x;if(this._parsing===!1)r._parsed=s,r._sorted=!0,x=s;else{It(s[e])?x=this.parseArrayData(r,s,e,n):He(s[e])?x=this.parseObjectData(r,s,e,n):x=this.parsePrimitiveData(r,s,e,n);const g=()=>f[l]===null||u&&f[l]<u[l];for(p=0;p<n;++p)r._parsed[p+e]=f=x[p],d&&(g()&&(d=!1),u=f);r._sorted=d}o&&z_(this,x)}parsePrimitiveData(e,n,r,s){const{iScale:a,vScale:o}=e,l=a.axis,d=o.axis,u=a.getLabels(),p=a===o,f=new Array(s);let x,g,v;for(x=0,g=s;x<g;++x)v=x+r,f[x]={[l]:p||a.parse(u[v],v),[d]:o.parse(n[v],v)};return f}parseArrayData(e,n,r,s){const{xScale:a,yScale:o}=e,l=new Array(s);let d,u,p,f;for(d=0,u=s;d<u;++d)p=d+r,f=n[p],l[d]={x:a.parse(f[0],p),y:o.parse(f[1],p)};return l}parseObjectData(e,n,r,s){const{xScale:a,yScale:o}=e,{xAxisKey:l="x",yAxisKey:d="y"}=this._parsing,u=new Array(s);let p,f,x,g;for(p=0,f=s;p<f;++p)x=p+r,g=n[x],u[p]={x:a.parse(bh(g,l),x),y:o.parse(bh(g,d),x)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,a=this._cachedMeta,o=n[e.axis],l={keys:Dk(s,!0),values:n._stacks[e.axis]._visualValues};return F_(l,o,a.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const a=r[n.axis];let o=a===null?NaN:a;const l=s&&r._stacks[n.axis];s&&l&&(s.values=l,o=F_(s,a,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,a=r._sorted&&e===r.iScale,o=s.length,l=this._getOtherScale(e),d=tz(n,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:p,max:f}=Q$(l);let x,g;function v(){g=s[x];const b=g[l.axis];return!nr(g[e.axis])||p>b||f<b}for(x=0;x<o&&!(!v()&&(this.updateRangeFromParsed(u,e,g,d),a));++x);if(a){for(x=o-1;x>=0;--x)if(!v()){this.updateRangeFromParsed(u,e,g,d);break}}return u}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,a,o;for(s=0,a=n.length;s<a;++s)o=n[s][e.axis],nr(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,a=this.getParsed(e);return{label:r?""+r.getLabelForValue(a[r.axis]):"",value:s?""+s.getLabelForValue(a[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=Z$($e(this.options.clip,q$(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],a=n.chartArea,o=[],l=this._drawStart||0,d=this._drawCount||s.length-l,u=this.options.drawActiveElementsOnTop;let p;for(r.dataset&&r.dataset.draw(e,a,l,d),p=l;p<l+d;++p){const f=s[p];f.hidden||(f.active&&u?o.push(f):f.draw(e,a))}for(p=0;p<o.length;++p)o[p].draw(e,a)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];a=o.$context||(o.$context=ez(this.getContext(),e,o)),a.parsed=this.getParsed(e),a.raw=s.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=J$(this.chart.getContext(),this.index)),a.dataset=s,a.index=a.datasetIndex=this.index;return a.active=!!n,a.mode=r,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",a=this._cachedDataOpts,o=e+"-"+n,l=a[o],d=this.enableOptionSharing&&_h(r);if(l)return B_(l,d);const u=this.chart.config,p=u.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],x=u.getOptionScopes(this.getDataset(),p),g=Object.keys(jt.elements[e]),v=()=>this.getContext(r,s,n),b=u.resolveNamedOptions(x,g,v,f);return b.$shared&&(b.$shared=d,a[o]=Object.freeze(B_(b,d))),b}_resolveAnimations(e,n,r){const s=this.chart,a=this._cachedDataOpts,o=`animation-${n}`,l=a[o];if(l)return l;let d;if(s.options.animation!==!1){const p=this.chart.config,f=p.datasetAnimationScopeKeys(this._type,n),x=p.getOptionScopes(this.getDataset(),f);d=p.createResolver(x,this.getContext(e,r,n))}const u=new Pk(s,d&&d.animations);return d&&d._cacheable&&(a[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Gf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,a=this.getSharedOptions(r),o=this.includeOptions(n,a)||a!==s;return this.updateSharedOptions(a,n,r),{sharedOptions:a,includeOptions:o}}updateElement(e,n,r,s){Gf(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!Gf(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const a=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(a)||a})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[l,d,u]of this._syncList)this[l](d,u);this._syncList=[];const s=r.length,a=n.length,o=Math.min(a,s);o&&this.parse(0,o),a>s?this._insertElements(s,a-s,e):a<s&&this._removeElements(a,s-a)}_insertElements(e,n,r=!0){const s=this._cachedMeta,a=s.data,o=e+n;let l;const d=u=>{for(u.length+=n,l=u.length-1;l>=o;l--)u[l]=u[l-n]};for(d(a),l=e;l<o;++l)a[l]=new this.dataElementType;this._parsing&&d(s._parsed),this.parse(e,n),r&&this.updateElements(a,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&pl(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Te(Jl,"defaults",{}),Te(Jl,"datasetElementType",null),Te(Jl,"dataElementType",null);class ju extends Jl{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:a}=n,o=this.chart._animationsDisabled;let{start:l,count:d}=I8(n,s,o);this._drawStart=l,this._drawCount=d,R8(n)&&(l=0,d=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!a._decimated,r.points=s;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:u},e),this.updateElements(s,l,d,e)}updateElements(e,n,r,s){const a=s==="reset",{iScale:o,vScale:l,_stacked:d,_dataset:u}=this._cachedMeta,{sharedOptions:p,includeOptions:f}=this._getSharedOptions(n,s),x=o.axis,g=l.axis,{spanGaps:v,segment:b}=this.options,j=Pc(v)?v:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||a||s==="none",N=n+r,S=e.length;let P=n>0&&this.getParsed(n-1);for(let M=0;M<S;++M){const R=e[M],A=_?R:{};if(M<n||M>=N){A.skip=!0;continue}const T=this.getParsed(M),Y=nt(T[g]),O=A[x]=o.getPixelForValue(T[x],M),H=A[g]=a||Y?l.getBasePixel():l.getPixelForValue(d?this.applyStack(l,T,d):T[g],M);A.skip=isNaN(O)||isNaN(H)||Y,A.stop=M>0&&Math.abs(T[x]-P[x])>j,b&&(A.parsed=T,A.raw=u.data[M]),f&&(A.options=p||this.resolveDataElementOptions(M,R.active?"active":s)),_||this.updateElement(R,M,A,s),P=T}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const a=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,a,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Te(ju,"id","line"),Te(ju,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Te(ju,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function wi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class kv{constructor(e){Te(this,"options");this.options=e||{}}static override(e){Object.assign(kv.prototype,e)}init(){}formats(){return wi()}parse(){return wi()}format(){return wi()}add(){return wi()}diff(){return wi()}startOf(){return wi()}endOf(){return wi()}}var nz={_date:kv};function rz(t,e,n,r){const{controller:s,data:a,_sorted:o}=t,l=s._cachedMeta.iScale,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&a.length){const u=l._reversePixels?P8:$i;if(r){if(s._sharedOptions){const p=a[0],f=typeof p.getRange=="function"&&p.getRange(e);if(f){const x=u(a,e,n-f),g=u(a,e,n+f);return{lo:x.lo,hi:g.hi}}}}else{const p=u(a,e,n);if(d){const{vScale:f}=s._cachedMeta,{_parsed:x}=t,g=x.slice(0,p.lo+1).reverse().findIndex(b=>!nt(b[f.axis]));p.lo-=Math.max(0,g);const v=x.slice(p.hi).findIndex(b=>!nt(b[f.axis]));p.hi+=Math.max(0,v)}return p}}return{lo:0,hi:a.length-1}}function hp(t,e,n,r,s){const a=t.getSortedVisibleDatasetMetas(),o=n[e];for(let l=0,d=a.length;l<d;++l){const{index:u,data:p}=a[l],{lo:f,hi:x}=rz(a[l],e,o,s);for(let g=f;g<=x;++g){const v=p[g];v.skip||r(v,u,g)}}}function sz(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const a=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(o,2))}}function Qf(t,e,n,r,s){const a=[];return!s&&!t.isPointInArea(e)||hp(t,n,e,function(l,d,u){!s&&!Dc(l,t.chartArea,0)||l.inRange(e.x,e.y,r)&&a.push({element:l,datasetIndex:d,index:u})},!0),a}function iz(t,e,n,r){let s=[];function a(o,l,d){const{startAngle:u,endAngle:p}=o.getProps(["startAngle","endAngle"],r),{angle:f}=C8(o,{x:e.x,y:e.y});fk(f,u,p)&&s.push({element:o,datasetIndex:l,index:d})}return hp(t,n,e,a),s}function az(t,e,n,r,s,a){let o=[];const l=sz(n);let d=Number.POSITIVE_INFINITY;function u(p,f,x){const g=p.inRange(e.x,e.y,s);if(r&&!g)return;const v=p.getCenterPoint(s);if(!(!!a||t.isPointInArea(v))&&!g)return;const j=l(e,v);j<d?(o=[{element:p,datasetIndex:f,index:x}],d=j):j===d&&o.push({element:p,datasetIndex:f,index:x})}return hp(t,n,e,u),o}function Xf(t,e,n,r,s,a){return!a&&!t.isPointInArea(e)?[]:n==="r"&&!r?iz(t,e,n,s):az(t,e,n,r,s,a)}function U_(t,e,n,r,s){const a=[],o=n==="x"?"inXRange":"inYRange";let l=!1;return hp(t,n,e,(d,u,p)=>{d[o]&&d[o](e[n],s)&&(a.push({element:d,datasetIndex:u,index:p}),l=l||d.inRange(e.x,e.y,s))}),r&&!l?[]:a}var oz={modes:{index(t,e,n,r){const s=Ei(e,t),a=n.axis||"x",o=n.includeInvisible||!1,l=n.intersect?Qf(t,s,a,r,o):Xf(t,s,a,!1,r,o),d=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const p=l[0].index,f=u.data[p];f&&!f.skip&&d.push({element:f,datasetIndex:u.index,index:p})}),d):[]},dataset(t,e,n,r){const s=Ei(e,t),a=n.axis||"xy",o=n.includeInvisible||!1;let l=n.intersect?Qf(t,s,a,r,o):Xf(t,s,a,!1,r,o);if(l.length>0){const d=l[0].datasetIndex,u=t.getDatasetMeta(d).data;l=[];for(let p=0;p<u.length;++p)l.push({element:u[p],datasetIndex:d,index:p})}return l},point(t,e,n,r){const s=Ei(e,t),a=n.axis||"xy",o=n.includeInvisible||!1;return Qf(t,s,a,r,o)},nearest(t,e,n,r){const s=Ei(e,t),a=n.axis||"xy",o=n.includeInvisible||!1;return Xf(t,s,a,n.intersect,r,o)},x(t,e,n,r){const s=Ei(e,t);return U_(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=Ei(e,t);return U_(t,s,"y",n.intersect,r)}}};const Ok=["left","top","right","bottom"];function fl(t,e){return t.filter(n=>n.pos===e)}function W_(t,e){return t.filter(n=>Ok.indexOf(n.pos)===-1&&n.box.axis===e)}function ml(t,e){return t.sort((n,r)=>{const s=e?r:n,a=e?n:r;return s.weight===a.weight?s.index-a.index:s.weight-a.weight})}function lz(t){const e=[];let n,r,s,a,o,l;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:a,options:{stack:o,stackWeight:l=1}}=s,e.push({index:n,box:s,pos:a,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&a+o,stackWeight:l});return e}function cz(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:a}=n;if(!r||!Ok.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=a}return e}function dz(t,e){const n=cz(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let a,o,l;for(a=0,o=t.length;a<o;++a){l=t[a];const{fullSize:d}=l.box,u=n[l.stack],p=u&&l.stackWeight/u.weight;l.horizontal?(l.width=p?p*r:d&&e.availableWidth,l.height=s):(l.width=r,l.height=p?p*s:d&&e.availableHeight)}return n}function uz(t){const e=lz(t),n=ml(e.filter(u=>u.box.fullSize),!0),r=ml(fl(e,"left"),!0),s=ml(fl(e,"right")),a=ml(fl(e,"top"),!0),o=ml(fl(e,"bottom")),l=W_(e,"x"),d=W_(e,"y");return{fullSize:n,leftAndTop:r.concat(a),rightAndBottom:s.concat(d).concat(o).concat(l),chartArea:fl(e,"chartArea"),vertical:r.concat(s).concat(d),horizontal:a.concat(o).concat(l)}}function H_(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function Mk(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function hz(t,e,n,r){const{pos:s,box:a}=n,o=t.maxPadding;if(!He(s)){n.size&&(t[s]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?a.height:a.width),n.size=f.size/f.count,t[s]+=n.size}a.getPadding&&Mk(o,a.getPadding());const l=Math.max(0,e.outerWidth-H_(o,t,"left","right")),d=Math.max(0,e.outerHeight-H_(o,t,"top","bottom")),u=l!==t.w,p=d!==t.h;return t.w=l,t.h=d,n.horizontal?{same:u,other:p}:{same:p,other:u}}function pz(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function fz(t,e){const n=e.maxPadding;function r(s){const a={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{a[o]=Math.max(e[o],n[o])}),a}return r(t?["left","right"]:["top","bottom"])}function Tl(t,e,n,r){const s=[];let a,o,l,d,u,p;for(a=0,o=t.length,u=0;a<o;++a){l=t[a],d=l.box,d.update(l.width||e.w,l.height||e.h,fz(l.horizontal,e));const{same:f,other:x}=hz(e,n,l,r);u|=f&&s.length,p=p||x,d.fullSize||s.push(l)}return u&&Tl(s,e,n,r)||p}function Qd(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function Y_(t,e,n,r){const s=n.padding;let{x:a,y:o}=e;for(const l of t){const d=l.box,u=r[l.stack]||{placed:0,weight:1},p=l.stackWeight/u.weight||1;if(l.horizontal){const f=e.w*p,x=u.size||d.height;_h(u.start)&&(o=u.start),d.fullSize?Qd(d,s.left,o,n.outerWidth-s.right-s.left,x):Qd(d,e.left+u.placed,o,f,x),u.start=o,u.placed+=f,o=d.bottom}else{const f=e.h*p,x=u.size||d.width;_h(u.start)&&(a=u.start),d.fullSize?Qd(d,a,s.top,x,n.outerHeight-s.bottom-s.top):Qd(d,a,e.top+u.placed,x,f),u.start=a,u.placed+=f,a=d.right}}e.x=a,e.y=o}var Zn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=rr(t.options.layout.padding),a=Math.max(e-s.width,0),o=Math.max(n-s.height,0),l=uz(t.boxes),d=l.vertical,u=l.horizontal;qe(t.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const p=d.reduce((b,j)=>j.box.options&&j.box.options.display===!1?b:b+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:a,availableHeight:o,vBoxMaxWidth:a/2/p,hBoxMaxHeight:o/2}),x=Object.assign({},s);Mk(x,rr(r));const g=Object.assign({maxPadding:x,w:a,h:o,x:s.left,y:s.top},s),v=dz(d.concat(u),f);Tl(l.fullSize,g,f,v),Tl(d,g,f,v),Tl(u,g,f,v)&&Tl(d,g,f,v),pz(g),Y_(l.leftAndTop,g,f,v),g.x+=g.w,g.y+=g.h,Y_(l.rightAndBottom,g,f,v),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},qe(l.chartArea,b=>{const j=b.box;Object.assign(j,t.chartArea),j.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class Lk{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class mz extends Lk{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Nu="$chartjs",gz={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},V_=t=>t===null||t==="";function xz(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[Nu]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",V_(s)){const a=O_(t,"width");a!==void 0&&(t.width=a)}if(V_(r))if(t.style.height==="")t.height=t.width/(e||2);else{const a=O_(t,"height");a!==void 0&&(t.height=a)}return t}const Ak=C$?{passive:!0}:!1;function vz(t,e,n){t&&t.addEventListener(e,n,Ak)}function yz(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Ak)}function bz(t,e){const n=gz[t.type]||t.type,{x:r,y:s}=Ei(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function Nh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function _z(t,e,n){const r=t.canvas,s=new MutationObserver(a=>{let o=!1;for(const l of a)o=o||Nh(l.addedNodes,r),o=o&&!Nh(l.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function wz(t,e,n){const r=t.canvas,s=new MutationObserver(a=>{let o=!1;for(const l of a)o=o||Nh(l.removedNodes,r),o=o&&!Nh(l.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Mc=new Map;let q_=0;function Ik(){const t=window.devicePixelRatio;t!==q_&&(q_=t,Mc.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function jz(t,e){Mc.size||window.addEventListener("resize",Ik),Mc.set(t,e)}function Nz(t){Mc.delete(t),Mc.size||window.removeEventListener("resize",Ik)}function kz(t,e,n){const r=t.canvas,s=r&&Nv(r);if(!s)return;const a=xk((l,d)=>{const u=s.clientWidth;n(l,d),u<s.clientWidth&&n()},window),o=new ResizeObserver(l=>{const d=l[0],u=d.contentRect.width,p=d.contentRect.height;u===0&&p===0||a(u,p)});return o.observe(s),jz(t,a),o}function Jf(t,e,n){n&&n.disconnect(),e==="resize"&&Nz(t)}function Sz(t,e,n){const r=t.canvas,s=xk(a=>{t.ctx!==null&&n(bz(a,t))},t);return vz(r,e,s),s}class Cz extends Lk{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(xz(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Nu])return!1;const r=n[Nu].initial;["height","width"].forEach(a=>{const o=r[a];nt(o)?n.removeAttribute(a):n.setAttribute(a,o)});const s=r.style||{};return Object.keys(s).forEach(a=>{n.style[a]=s[a]}),n.width=n.width,delete n[Nu],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:_z,detach:wz,resize:kz}[n]||Sz;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:Jf,detach:Jf,resize:Jf}[n]||yz)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return S$(e,n,r,s)}isAttached(e){const n=e&&Nv(e);return!!(n&&n.isConnected)}}function Ez(t){return!jv()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?mz:Cz}var ru;let ua=(ru=class{constructor(){Te(this,"x");Te(this,"y");Te(this,"active",!1);Te(this,"options");Te(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Pc(this.x)&&Pc(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(a=>{s[a]=r[a]&&r[a].active()?r[a]._to:this[a]}),s}},Te(ru,"defaults",{}),Te(ru,"defaultRoutes"),ru);function Tz(t,e){const n=t.options.ticks,r=Pz(t),s=Math.min(n.maxTicksLimit||r,r),a=n.major.enabled?Oz(e):[],o=a.length,l=a[0],d=a[o-1],u=[];if(o>s)return Mz(e,u,a,o/s),u;const p=Dz(a,e,s);if(o>0){let f,x;const g=o>1?Math.round((d-l)/(o-1)):null;for(Xd(e,u,p,nt(g)?0:l-g,l),f=0,x=o-1;f<x;f++)Xd(e,u,p,a[f],a[f+1]);return Xd(e,u,p,d,nt(g)?e.length:d+g),u}return Xd(e,u,p),u}function Pz(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function Dz(t,e,n){const r=Lz(t),s=e.length/n;if(!r)return Math.max(s,1);const a=w8(r);for(let o=0,l=a.length-1;o<l;o++){const d=a[o];if(d>s)return d}return Math.max(s,1)}function Oz(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function Mz(t,e,n,r){let s=0,a=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===a&&(e.push(t[o]),s++,a=n[s*r])}function Xd(t,e,n,r,s){const a=$e(r,0),o=Math.min($e(s,t.length),t.length);let l=0,d,u,p;for(n=Math.ceil(n),s&&(d=s-r,n=d/Math.floor(d/n)),p=a;p<0;)l++,p=Math.round(a+l*n);for(u=Math.max(a,0);u<o;u++)u===p&&(e.push(t[u]),l++,p=Math.round(a+l*n))}function Lz(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const Az=t=>t==="left"?"right":t==="right"?"left":t,Z_=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,K_=(t,e)=>Math.min(e||t,t);function G_(t,e){const n=[],r=t.length/e,s=t.length;let a=0;for(;a<s;a+=r)n.push(t[Math.floor(a)]);return n}function Iz(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),a=t._startPixel,o=t._endPixel,l=1e-6;let d=t.getPixelForTick(s),u;if(!(n&&(r===1?u=Math.max(d-a,o-d):e===0?u=(t.getPixelForTick(1)-d)/2:u=(d-t.getPixelForTick(s-1))/2,d+=s<e?u:-u,d<a-l||d>o+l)))return d}function Rz(t,e){qe(t,n=>{const r=n.gc,s=r.length/2;let a;if(s>e){for(a=0;a<s;++a)delete n.data[r[a]];r.splice(0,s)}})}function gl(t){return t.drawTicks?t.tickLength:0}function Q_(t,e){if(!t.display)return 0;const n=sn(t.font,e),r=rr(t.padding);return(It(t.text)?t.text.length:1)*n.lineHeight+r.height}function Fz(t,e){return da(t,{scale:e,type:"scale"})}function $z(t,e,n){return da(t,{tick:n,index:e,type:"tick"})}function zz(t,e,n){let r=gv(t);return(n&&e!=="right"||!n&&e==="right")&&(r=Az(r)),r}function Bz(t,e,n,r){const{top:s,left:a,bottom:o,right:l,chart:d}=t,{chartArea:u,scales:p}=d;let f=0,x,g,v;const b=o-s,j=l-a;if(t.isHorizontal()){if(g=tn(r,a,l),He(n)){const _=Object.keys(n)[0],N=n[_];v=p[_].getPixelForValue(N)+b-e}else n==="center"?v=(u.bottom+u.top)/2+b-e:v=Z_(t,n,e);x=l-a}else{if(He(n)){const _=Object.keys(n)[0],N=n[_];g=p[_].getPixelForValue(N)-j+e}else n==="center"?g=(u.left+u.right)/2-j+e:g=Z_(t,n,e);v=tn(r,o,s),f=n==="left"?-hr:hr}return{titleX:g,titleY:v,maxWidth:x,rotation:f}}class Io extends ua{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=Nr(e,Number.POSITIVE_INFINITY),n=Nr(n,Number.NEGATIVE_INFINITY),r=Nr(r,Number.POSITIVE_INFINITY),s=Nr(s,Number.NEGATIVE_INFINITY),{min:Nr(e,r),max:Nr(n,s),minDefined:nr(e),maxDefined:nr(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:a}=this.getUserBounds(),o;if(s&&a)return{min:n,max:r};const l=this.getMatchingVisibleMetas();for(let d=0,u=l.length;d<u;++d)o=l[d].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),a||(r=Math.max(r,o.max));return n=a&&n>r?r:n,r=s&&n>r?n:r,{min:Nr(n,Nr(r,n)),max:Nr(r,Nr(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){st(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:a,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=s$(this,a,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=l<this.ticks.length;this._convertTicksToLabels(d?G_(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Tz(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){st(this.options.afterUpdate,[this])}beforeSetDimensions(){st(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){st(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),st(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){st(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,a;for(r=0,s=e.length;r<s;r++)a=e[r],a.label=st(n.callback,[a.value,r,e],this)}afterTickToLabelConversion(){st(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){st(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=K_(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,a=n.maxRotation;let o=s,l,d,u;if(!this._isVisible()||!n.display||s>=a||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const p=this._getLabelSizes(),f=p.widest.width,x=p.highest.height,g=qn(this.chart.width-f,0,this.maxWidth);l=e.offset?this.maxWidth/r:g/(r-1),f+6>l&&(l=g/(r-(e.offset?.5:1)),d=this.maxHeight-gl(e.grid)-n.padding-Q_(e.title,this.chart.options.font),u=Math.sqrt(f*f+x*x),o=S8(Math.min(Math.asin(qn((p.highest.height+6)/l,-1,1)),Math.asin(qn(d/u,-1,1))-Math.asin(qn(x/u,-1,1)))),o=Math.max(s,Math.min(a,o))),this.labelRotation=o}afterCalculateLabelRotation(){st(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){st(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:a}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const d=Q_(s,n.options.font);if(l?(e.width=this.maxWidth,e.height=gl(a)+d):(e.height=this.maxHeight,e.width=gl(a)+d),r.display&&this.ticks.length){const{first:u,last:p,widest:f,highest:x}=this._getLabelSizes(),g=r.padding*2,v=Fi(this.labelRotation),b=Math.cos(v),j=Math.sin(v);if(l){const _=r.mirror?0:j*f.width+b*x.height;e.height=Math.min(this.maxHeight,e.height+_+g)}else{const _=r.mirror?0:b*f.width+j*x.height;e.width=Math.min(this.maxWidth,e.width+_+g)}this._calculatePadding(u,p,j,b)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:a,padding:o},position:l}=this.options,d=this.labelRotation!==0,u=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const p=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let x=0,g=0;d?u?(x=s*e.width,g=r*n.height):(x=r*e.height,g=s*n.width):a==="start"?g=n.width:a==="end"?x=e.width:a!=="inner"&&(x=e.width/2,g=n.width/2),this.paddingLeft=Math.max((x-p+o)*this.width/(this.width-p),0),this.paddingRight=Math.max((g-f+o)*this.width/(this.width-f),0)}else{let p=n.height/2,f=e.height/2;a==="start"?(p=0,f=e.height):a==="end"&&(p=n.height,f=0),this.paddingTop=p+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){st(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)nt(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=G_(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:a}=this,o=[],l=[],d=Math.floor(n/K_(n,r));let u=0,p=0,f,x,g,v,b,j,_,N,S,P,M;for(f=0;f<n;f+=d){if(v=e[f].label,b=this._resolveTickFontOptions(f),s.font=j=b.string,_=a[j]=a[j]||{data:{},gc:[]},N=b.lineHeight,S=P=0,!nt(v)&&!It(v))S=C_(s,_.data,_.gc,S,v),P=N;else if(It(v))for(x=0,g=v.length;x<g;++x)M=v[x],!nt(M)&&!It(M)&&(S=C_(s,_.data,_.gc,S,M),P+=N);o.push(S),l.push(P),u=Math.max(S,u),p=Math.max(P,p)}Rz(a,n);const R=o.indexOf(u),A=l.indexOf(p),T=Y=>({width:o[Y]||0,height:l[Y]||0});return{first:T(0),last:T(n-1),widest:T(R),highest:T(A),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return T8(this._alignToPixels?_i(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=$z(this.getContext(),e,r))}return this.$context||(this.$context=Fz(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Fi(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),a=this._getLabelSizes(),o=e.autoSkipPadding||0,l=a?a.widest.width+o:0,d=a?a.highest.height+o:0;return this.isHorizontal()?d*r>l*s?l/r:d/s:d*s<l*r?d/r:l/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:a,position:o,border:l}=s,d=a.offset,u=this.isHorizontal(),f=this.ticks.length+(d?1:0),x=gl(a),g=[],v=l.setContext(this.getContext()),b=v.display?v.width:0,j=b/2,_=function(C){return _i(r,C,b)};let N,S,P,M,R,A,T,Y,O,H,te,G;if(o==="top")N=_(this.bottom),A=this.bottom-x,Y=N-j,H=_(e.top)+j,G=e.bottom;else if(o==="bottom")N=_(this.top),H=e.top,G=_(e.bottom)-j,A=N+j,Y=this.top+x;else if(o==="left")N=_(this.right),R=this.right-x,T=N-j,O=_(e.left)+j,te=e.right;else if(o==="right")N=_(this.left),O=e.left,te=_(e.right)-j,R=N+j,T=this.left+x;else if(n==="x"){if(o==="center")N=_((e.top+e.bottom)/2+.5);else if(He(o)){const C=Object.keys(o)[0],V=o[C];N=_(this.chart.scales[C].getPixelForValue(V))}H=e.top,G=e.bottom,A=N+j,Y=A+x}else if(n==="y"){if(o==="center")N=_((e.left+e.right)/2);else if(He(o)){const C=Object.keys(o)[0],V=o[C];N=_(this.chart.scales[C].getPixelForValue(V))}R=N-j,T=R-x,O=e.left,te=e.right}const B=$e(s.ticks.maxTicksLimit,f),Z=Math.max(1,Math.ceil(f/B));for(S=0;S<f;S+=Z){const C=this.getContext(S),V=a.setContext(C),I=l.setContext(C),X=V.lineWidth,E=V.color,K=I.dash||[],re=I.dashOffset,Q=V.tickWidth,ie=V.tickColor,le=V.tickBorderDash||[],ae=V.tickBorderDashOffset;P=Iz(this,S,d),P!==void 0&&(M=_i(r,P,X),u?R=T=O=te=M:A=Y=H=G=M,g.push({tx1:R,ty1:A,tx2:T,ty2:Y,x1:O,y1:H,x2:te,y2:G,width:X,color:E,borderDash:K,borderDashOffset:re,tickWidth:Q,tickColor:ie,tickBorderDash:le,tickBorderDashOffset:ae}))}return this._ticksLength=f,this._borderValue=N,g}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:a}=r,o=this.isHorizontal(),l=this.ticks,{align:d,crossAlign:u,padding:p,mirror:f}=a,x=gl(r.grid),g=x+p,v=f?-p:g,b=-Fi(this.labelRotation),j=[];let _,N,S,P,M,R,A,T,Y,O,H,te,G="middle";if(s==="top")R=this.bottom-v,A=this._getXAxisLabelAlignment();else if(s==="bottom")R=this.top+v,A=this._getXAxisLabelAlignment();else if(s==="left"){const Z=this._getYAxisLabelAlignment(x);A=Z.textAlign,M=Z.x}else if(s==="right"){const Z=this._getYAxisLabelAlignment(x);A=Z.textAlign,M=Z.x}else if(n==="x"){if(s==="center")R=(e.top+e.bottom)/2+g;else if(He(s)){const Z=Object.keys(s)[0],C=s[Z];R=this.chart.scales[Z].getPixelForValue(C)+g}A=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")M=(e.left+e.right)/2-g;else if(He(s)){const Z=Object.keys(s)[0],C=s[Z];M=this.chart.scales[Z].getPixelForValue(C)}A=this._getYAxisLabelAlignment(x).textAlign}n==="y"&&(d==="start"?G="top":d==="end"&&(G="bottom"));const B=this._getLabelSizes();for(_=0,N=l.length;_<N;++_){S=l[_],P=S.label;const Z=a.setContext(this.getContext(_));T=this.getPixelForTick(_)+a.labelOffset,Y=this._resolveTickFontOptions(_),O=Y.lineHeight,H=It(P)?P.length:1;const C=H/2,V=Z.color,I=Z.textStrokeColor,X=Z.textStrokeWidth;let E=A;o?(M=T,A==="inner"&&(_===N-1?E=this.options.reverse?"left":"right":_===0?E=this.options.reverse?"right":"left":E="center"),s==="top"?u==="near"||b!==0?te=-H*O+O/2:u==="center"?te=-B.highest.height/2-C*O+O:te=-B.highest.height+O/2:u==="near"||b!==0?te=O/2:u==="center"?te=B.highest.height/2-C*O:te=B.highest.height-H*O,f&&(te*=-1),b!==0&&!Z.showLabelBackdrop&&(M+=O/2*Math.sin(b))):(R=T,te=(1-H)*O/2);let K;if(Z.showLabelBackdrop){const re=rr(Z.backdropPadding),Q=B.heights[_],ie=B.widths[_];let le=te-re.top,ae=0-re.left;switch(G){case"middle":le-=Q/2;break;case"bottom":le-=Q;break}switch(A){case"center":ae-=ie/2;break;case"right":ae-=ie;break;case"inner":_===N-1?ae-=ie:_>0&&(ae-=ie/2);break}K={left:ae,top:le,width:ie+re.width,height:Q+re.height,color:Z.backdropColor}}j.push({label:P,font:Y,textOffset:te,options:{rotation:b,color:V,strokeColor:I,strokeWidth:X,textAlign:E,textBaseline:G,translation:[M,R],backdrop:K}})}return j}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Fi(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:a}}=this.options,o=this._getLabelSizes(),l=e+a,d=o.widest.width;let u,p;return n==="left"?s?(p=this.right+a,r==="near"?u="left":r==="center"?(u="center",p+=d/2):(u="right",p+=d)):(p=this.right-l,r==="near"?u="right":r==="center"?(u="center",p-=d/2):(u="left",p=this.left)):n==="right"?s?(p=this.left+a,r==="near"?u="right":r==="center"?(u="center",p-=d/2):(u="left",p-=d)):(p=this.left+l,r==="near"?u="left":r==="center"?(u="center",p+=d/2):(u="right",p=this.right)):u="right",{textAlign:u,x:p}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:a,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,a,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(a=>a.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,o;const l=(d,u,p)=>{!p.width||!p.color||(r.save(),r.lineWidth=p.width,r.strokeStyle=p.color,r.setLineDash(p.borderDash||[]),r.lineDashOffset=p.borderDashOffset,r.beginPath(),r.moveTo(d.x,d.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(n.display)for(a=0,o=s.length;a<o;++a){const d=s[a];n.drawOnChartArea&&l({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),n.drawTicks&&l({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,a=r.setContext(this.getContext()),o=r.display?a.width:0;if(!o)return;const l=s.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let u,p,f,x;this.isHorizontal()?(u=_i(e,this.left,o)-o/2,p=_i(e,this.right,l)+l/2,f=x=d):(f=_i(e,this.top,o)-o/2,x=_i(e,this.bottom,l)+l/2,u=p=d),n.save(),n.lineWidth=a.width,n.strokeStyle=a.color,n.beginPath(),n.moveTo(u,f),n.lineTo(p,x),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&vv(r,s);const a=this.getLabelItems(e);for(const o of a){const l=o.options,d=o.font,u=o.label,p=o.textOffset;Oc(r,u,0,p,d,l)}s&&yv(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const a=sn(r.font),o=rr(r.padding),l=r.align;let d=a.lineHeight/2;n==="bottom"||n==="center"||He(n)?(d+=o.bottom,It(r.text)&&(d+=a.lineHeight*(r.text.length-1))):d+=o.top;const{titleX:u,titleY:p,maxWidth:f,rotation:x}=Bz(this,d,n,l);Oc(e,r.text,0,0,a,{color:r.color,maxWidth:f,rotation:x,textAlign:zz(l,n,s),textBaseline:"middle",translation:[u,p]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=$e(e.grid&&e.grid.z,-1),s=$e(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Io.prototype.draw?[{z:n,draw:a=>{this.draw(a)}}]:[{z:r,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let a,o;for(a=0,o=n.length;a<o;++a){const l=n[a];l[r]===this.id&&(!e||l.type===e)&&s.push(l)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return sn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Jd{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;Hz(n)&&(r=this.register(n));const s=this.items,a=e.id,o=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in s||(s[a]=e,Uz(e,o,r),this.override&&jt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in jt[s]&&(delete jt[s][r],this.override&&delete na[r])}}function Uz(t,e,n){const r=Tc(Object.create(null),[n?jt.get(n):{},jt.get(e),t.defaults]);jt.set(e,r),t.defaultRoutes&&Wz(e,t.defaultRoutes),t.descriptors&&jt.describe(e,t.descriptors)}function Wz(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),a=[t].concat(r).join("."),o=e[n].split("."),l=o.pop(),d=o.join(".");jt.route(a,s,d,l)})}function Hz(t){return"id"in t&&"defaults"in t}class Yz{constructor(){this.controllers=new Jd(Jl,"datasets",!0),this.elements=new Jd(ua,"elements"),this.plugins=new Jd(Object,"plugins"),this.scales=new Jd(Io,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const a=r||this._getRegistryForType(s);r||a.isForType(s)||a===this.plugins&&s.id?this._exec(e,a,s):qe(s,o=>{const l=r||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,n,r){const s=fv(e);st(r["before"+s],[],r),n[e](r),st(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var Er=new Yz;class Vz{constructor(){this._init=[]}notify(e,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const a=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(a,e,n,r);return n==="afterDestroy"&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,s){s=s||{};for(const a of e){const o=a.plugin,l=o[r],d=[n,s,a.options];if(st(l,d,o)===!1&&s.cancelable)return!1}return!0}invalidate(){nt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=$e(r.options&&r.options.plugins,{}),a=qz(r);return s===!1&&!n?[]:Kz(e,a,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(a,o)=>a.filter(l=>!o.some(d=>l.plugin.id===d.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function qz(t){const e={},n=[],r=Object.keys(Er.plugins.items);for(let a=0;a<r.length;a++)n.push(Er.getPlugin(r[a]));const s=t.plugins||[];for(let a=0;a<s.length;a++){const o=s[a];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function Zz(t,e){return!e&&t===!1?null:t===!0?{}:t}function Kz(t,{plugins:e,localIds:n},r,s){const a=[],o=t.getContext();for(const l of e){const d=l.id,u=Zz(r[d],s);u!==null&&a.push({plugin:l,options:Gz(t.config,{plugin:l,local:n[d]},u,o)})}return a}function Gz(t,{plugin:e,local:n},r,s){const a=t.pluginScopeKeys(e),o=t.getOptionScopes(r,a);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function $g(t,e){const n=jt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Qz(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Xz(t,e){return t===e?"_index_":"_value_"}function X_(t){if(t==="x"||t==="y"||t==="r")return t}function Jz(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function zg(t,...e){if(X_(t))return t;for(const n of e){const r=n.axis||Jz(n.position)||t.length>1&&X_(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function J_(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function e7(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return J_(t,"x",n[0])||J_(t,"y",n[0])}return{}}function t7(t,e){const n=na[t.type]||{scales:{}},r=e.scales||{},s=$g(t.type,e),a=Object.create(null);return Object.keys(r).forEach(o=>{const l=r[o];if(!He(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const d=zg(o,l,e7(o,t),jt.scales[l.type]),u=Xz(d,s),p=n.scales||{};a[o]=Zl(Object.create(null),[{axis:d},l,p[d],p[u]])}),t.data.datasets.forEach(o=>{const l=o.type||t.type,d=o.indexAxis||$g(l,e),p=(na[l]||{}).scales||{};Object.keys(p).forEach(f=>{const x=Qz(f,d),g=o[x+"AxisID"]||x;a[g]=a[g]||Object.create(null),Zl(a[g],[{axis:x},r[g],p[f]])})}),Object.keys(a).forEach(o=>{const l=a[o];Zl(l,[jt.scales[l.type],jt.scale])}),a}function Rk(t){const e=t.options||(t.options={});e.plugins=$e(e.plugins,{}),e.scales=t7(t,e)}function Fk(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function n7(t){return t=t||{},t.data=Fk(t.data),Rk(t),t}const ew=new Map,$k=new Set;function eu(t,e){let n=ew.get(t);return n||(n=e(),ew.set(t,n),$k.add(n)),n}const xl=(t,e,n)=>{const r=bh(e,n);r!==void 0&&t.add(r)};class r7{constructor(e){this._config=n7(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Fk(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Rk(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return eu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return eu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return eu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return eu(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:a}=this,o=this._cachedScopes(e,r),l=o.get(n);if(l)return l;const d=new Set;n.forEach(p=>{e&&(d.add(e),p.forEach(f=>xl(d,e,f))),p.forEach(f=>xl(d,s,f)),p.forEach(f=>xl(d,na[a]||{},f)),p.forEach(f=>xl(d,jt,f)),p.forEach(f=>xl(d,Ig,f))});const u=Array.from(d);return u.length===0&&u.push(Object.create(null)),$k.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:e,type:n}=this;return[e,na[n]||{},jt.datasets[n]||{},{type:n},jt,Ig]}resolveNamedOptions(e,n,r,s=[""]){const a={$shared:!0},{resolver:o,subPrefixes:l}=tw(this._resolverCache,e,s);let d=o;if(i7(o,n)){a.$shared=!1,r=ri(r)?r():r;const u=this.createResolver(e,r,l);d=jo(o,r,u)}for(const u of n)a[u]=d[u];return a}createResolver(e,n,r=[""],s){const{resolver:a}=tw(this._resolverCache,e,r);return He(n)?jo(a,n,void 0,s):a}}function tw(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let a=r.get(s);return a||(a={resolver:bv(e,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},r.set(s,a)),a}const s7=t=>He(t)&&Object.getOwnPropertyNames(t).some(e=>ri(t[e]));function i7(t,e){const{isScriptable:n,isIndexable:r}=wk(t);for(const s of e){const a=n(s),o=r(s),l=(o||a)&&t[s];if(a&&(ri(l)||s7(l))||o&&It(l))return!0}return!1}var a7="4.4.9";const o7=["top","bottom","left","right","chartArea"];function nw(t,e){return t==="top"||t==="bottom"||o7.indexOf(t)===-1&&e==="x"}function rw(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function sw(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),st(n&&n.onComplete,[t],e)}function l7(t){const e=t.chart,n=e.options.animation;st(n&&n.onProgress,[t],e)}function zk(t){return jv()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const ku={},iw=t=>{const e=zk(t);return Object.values(ku).filter(n=>n.canvas===e).pop()};function c7(t,e,n){const r=Object.keys(t);for(const s of r){const a=+s;if(a>=e){const o=t[s];delete t[s],(n>0||a>e)&&(t[a+n]=o)}}}function d7(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var js;let qc=(js=class{static register(...e){Er.add(...e),aw()}static unregister(...e){Er.remove(...e),aw()}constructor(e,n){const r=this.config=new r7(n),s=zk(e),a=iw(s);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||Ez(s)),this.platform.updateConfig(r);const l=this.platform.acquireContext(s,o.aspectRatio),d=l&&l.canvas,u=d&&d.height,p=d&&d.width;if(this.id=p8(),this.ctx=l,this.canvas=d,this.width=p,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Vz,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=L8(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],ku[this.id]=this,!l||!d){console.error("Failed to create chart: can't acquire context from the given item");return}Qr.listen(this,"complete",sw),Qr.listen(this,"progress",l7),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:a}=this;return nt(e)?n&&a?a:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Er}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():D_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return E_(this.canvas,this.ctx),this}stop(){return Qr.stop(this),this}resize(e,n){Qr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,a=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,a),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,D_(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),st(r.onResize,[this,o],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};qe(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,l)=>(o[l]=!1,o),{});let a=[];n&&(a=a.concat(Object.keys(n).map(o=>{const l=n[o],d=zg(o,l),u=d==="r",p=d==="x";return{options:l,dposition:u?"chartArea":p?"bottom":"left",dtype:u?"radialLinear":p?"category":"linear"}}))),qe(a,o=>{const l=o.options,d=l.id,u=zg(d,l),p=$e(l.type,o.dtype);(l.position===void 0||nw(l.position,u)!==nw(o.dposition))&&(l.position=o.dposition),s[d]=!0;let f=null;if(d in r&&r[d].type===p)f=r[d];else{const x=Er.getScale(p);f=new x({id:d,type:p,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(l,e)}),qe(s,(o,l)=>{o||delete r[l]}),qe(r,o=>{Zn.configure(this,o,o.options),Zn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,a)=>s.index-a.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(rw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(a=>a===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const a=n[r];let o=this.getDatasetMeta(r);const l=a.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=l,o.indexAxis=a.indexAxis||$g(l,this.options),o.order=a.order||0,o.index=r,o.label=""+a.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const d=Er.getController(l),{datasetElementType:u,dataElementType:p}=jt.datasets[l];Object.assign(d,{dataElementType:Er.getElement(p),datasetElementType:u&&Er.getElement(u)}),o.controller=new d(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){qe(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,p=this.data.datasets.length;u<p;u++){const{controller:f}=this.getDatasetMeta(u),x=!s&&a.indexOf(f)===-1;f.buildOrUpdateElements(x),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||qe(a,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(rw("z","_idx"));const{_active:l,_lastEvent:d}=this;d?this._eventHandler(d,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){qe(this.scales,e=>{Zn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!v_(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:a}of n){const o=r==="_removeElements"?-a:a;c7(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=a=>new Set(e.filter(o=>o[0]===a).map((o,l)=>l+","+o.splice(1).join(","))),s=r(0);for(let a=1;a<n;a++)if(!v_(s,r(a)))return;return Array.from(s).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Zn.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],qe(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,a)=>{s._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,ri(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Qr.has(this)?this.attached&&!Qr.running(this)&&Qr.start(this):(this.draw(),sw({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,a;for(s=0,a=n.length;s<a;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=B$(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&vv(n,s),e.controller.draw(),s&&yv(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Dc(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const a=oz.modes[n];return typeof a=="function"?a(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(a=>a&&a._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=da(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",a=this.getDatasetMeta(e),o=a.controller._resolveAnimations(void 0,s);_h(n)?(a.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(a,{visible:r}),this.update(l=>l.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Qr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),E_(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete ku[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(a,o)=>{n.addEventListener(this,a,o),e[a]=o},s=(a,o,l)=>{a.offsetX=o,a.offsetY=l,this._eventHandler(a)};qe(this.options.events,a=>r(a,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(d,u)=>{n.addEventListener(this,d,u),e[d]=u},s=(d,u)=>{e[d]&&(n.removeEventListener(this,d,u),delete e[d])},a=(d,u)=>{this.canvas&&this.resize(d,u)};let o;const l=()=>{s("attach",l),this.attached=!0,this.resize(),r("resize",a),r("detach",o)};o=()=>{this.attached=!1,s("resize",a),this._stop(),this._resize(0,0),r("attach",l)},n.isAttached(this.canvas)?l():o()}unbindEvents(){qe(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},qe(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let a,o,l,d;for(n==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+s+"DatasetHoverStyle"]()),l=0,d=e.length;l<d;++l){o=e[l];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:a,index:o})=>{const l=this.getDatasetMeta(a);if(!l)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:l.data[o],index:o}});!vh(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,a=(d,u)=>d.filter(p=>!u.some(f=>p.datasetIndex===f.datasetIndex&&p.index===f.index)),o=a(n,e),l=r?e:a(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const a=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(a||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:a}=this,o=n,l=this._getActiveElements(e,s,r,o),d=y8(e),u=d7(e,this._lastEvent,r,d);r&&(this._lastEvent=null,st(a.onHover,[e,l,this],this),d&&st(a.onClick,[e,l,this],this));const p=!vh(l,s);return(p||n)&&(this._active=l,this._updateHoverStyles(l,s,n)),this._lastEvent=u,p}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,s)}},Te(js,"defaults",jt),Te(js,"instances",ku),Te(js,"overrides",na),Te(js,"registry",Er),Te(js,"version",a7),Te(js,"getChart",iw),js);function aw(){return qe(qc.instances,t=>t._plugins.invalidate())}function Bk(t,e,n=e){t.lineCap=$e(n.borderCapStyle,e.borderCapStyle),t.setLineDash($e(n.borderDash,e.borderDash)),t.lineDashOffset=$e(n.borderDashOffset,e.borderDashOffset),t.lineJoin=$e(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=$e(n.borderWidth,e.borderWidth),t.strokeStyle=$e(n.borderColor,e.borderColor)}function u7(t,e,n){t.lineTo(n.x,n.y)}function h7(t){return t.stepped?Z8:t.tension||t.cubicInterpolationMode==="monotone"?K8:u7}function Uk(t,e,n={}){const r=t.length,{start:s=0,end:a=r-1}=n,{start:o,end:l}=e,d=Math.max(s,o),u=Math.min(a,l),p=s<o&&a<o||s>l&&a>l;return{count:r,start:d,loop:e.loop,ilen:u<d&&!p?r+u-d:u-d}}function p7(t,e,n,r){const{points:s,options:a}=e,{count:o,start:l,loop:d,ilen:u}=Uk(s,n,r),p=h7(a);let{move:f=!0,reverse:x}=r||{},g,v,b;for(g=0;g<=u;++g)v=s[(l+(x?u-g:g))%o],!v.skip&&(f?(t.moveTo(v.x,v.y),f=!1):p(t,b,v,x,a.stepped),b=v);return d&&(v=s[(l+(x?u:0))%o],p(t,b,v,x,a.stepped)),!!d}function f7(t,e,n,r){const s=e.points,{count:a,start:o,ilen:l}=Uk(s,n,r),{move:d=!0,reverse:u}=r||{};let p=0,f=0,x,g,v,b,j,_;const N=P=>(o+(u?l-P:P))%a,S=()=>{b!==j&&(t.lineTo(p,j),t.lineTo(p,b),t.lineTo(p,_))};for(d&&(g=s[N(0)],t.moveTo(g.x,g.y)),x=0;x<=l;++x){if(g=s[N(x)],g.skip)continue;const P=g.x,M=g.y,R=P|0;R===v?(M<b?b=M:M>j&&(j=M),p=(f*p+P)/++f):(S(),t.lineTo(P,M),v=R,f=0,b=j=M),_=M}S()}function Bg(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?f7:p7}function m7(t){return t.stepped?E$:t.tension||t.cubicInterpolationMode==="monotone"?T$:Ti}function g7(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),Bk(t,e.options),t.stroke(s)}function x7(t,e,n,r){const{segments:s,options:a}=e,o=Bg(e);for(const l of s)Bk(t,a,l.style),t.beginPath(),o(t,e,l,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const v7=typeof Path2D=="function";function y7(t,e,n,r){v7&&!e.options.segment?g7(t,e,n,r):x7(t,e,n,r)}class qa extends ua{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;b$(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=R$(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],a=this.points,o=L$(this,{property:n,start:s,end:s});if(!o.length)return;const l=[],d=m7(r);let u,p;for(u=0,p=o.length;u<p;++u){const{start:f,end:x}=o[u],g=a[f],v=a[x];if(g===v){l.push(g);continue}const b=Math.abs((s-g[n])/(v[n]-g[n])),j=d(g,v,b,r.stepped);j[n]=e[n],l.push(j)}return l.length===1?l[0]:l}pathSegment(e,n,r){return Bg(this)(e,this,n,r)}path(e,n,r){const s=this.segments,a=Bg(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const l of s)o&=a(e,this,l,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),y7(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Te(qa,"id","line"),Te(qa,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Te(qa,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Te(qa,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function ow(t,e,n,r){const s=t.options,{[n]:a}=t.getProps([n],r);return Math.abs(e-a)<s.radius+s.hitRadius}class ec extends ua{constructor(n){super();Te(this,"parsed");Te(this,"skip");Te(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,s){const a=this.options,{x:o,y:l}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(r-l,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(n,r){return ow(this,n,"x",r)}inYRange(n,r){return ow(this,n,"y",r)}getCenterPoint(n){const{x:r,y:s}=this.getProps(["x","y"],n);return{x:r,y:s}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const s=r&&n.borderWidth||0;return(r+s)*2}draw(n,r){const s=this.options;this.skip||s.radius<.1||!Dc(this,r,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,Rg(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Te(ec,"id","point"),Te(ec,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Te(ec,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const lw=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},b7=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class cw extends ua{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=st(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=sn(r.font),a=s.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:d}=lw(r,a);let u,p;n.font=s.string,this.isHorizontal()?(u=this.maxWidth,p=this._fitRows(o,a,l,d)+10):(p=this.maxHeight,u=this._fitCols(o,s,l,d)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(p,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:a,maxWidth:o,options:{labels:{padding:l}}}=this,d=this.legendHitBoxes=[],u=this.lineWidths=[0],p=s+l;let f=e;a.textAlign="left",a.textBaseline="middle";let x=-1,g=-p;return this.legendItems.forEach((v,b)=>{const j=r+n/2+a.measureText(v.text).width;(b===0||u[u.length-1]+j+2*l>o)&&(f+=p,u[u.length-(b>0?0:1)]=0,g+=p,x++),d[b]={left:0,top:g,row:x,width:j,height:s},u[u.length-1]+=j+l}),f}_fitCols(e,n,r,s){const{ctx:a,maxHeight:o,options:{labels:{padding:l}}}=this,d=this.legendHitBoxes=[],u=this.columnSizes=[],p=o-e;let f=l,x=0,g=0,v=0,b=0;return this.legendItems.forEach((j,_)=>{const{itemWidth:N,itemHeight:S}=_7(r,n,a,j,s);_>0&&g+S+2*l>p&&(f+=x+l,u.push({width:x,height:g}),v+=x+l,b++,x=g=0),d[_]={left:v,top:g,col:b,width:N,height:S},x=Math.max(x,N),g+=S+l}),f+=x,u.push({width:x,height:g}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:a}}=this,o=no(a,this.left,this.width);if(this.isHorizontal()){let l=0,d=tn(r,this.left+s,this.right-this.lineWidths[l]);for(const u of n)l!==u.row&&(l=u.row,d=tn(r,this.left+s,this.right-this.lineWidths[l])),u.top+=this.top+e+s,u.left=o.leftForLtr(o.x(d),u.width),d+=u.width+s}else{let l=0,d=tn(r,this.top+e+s,this.bottom-this.columnSizes[l].height);for(const u of n)u.col!==l&&(l=u.col,d=tn(r,this.top+e+s,this.bottom-this.columnSizes[l].height)),u.top=d,u.left+=this.left+s,u.left=o.leftForLtr(o.x(u.left),u.width),d+=u.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;vv(e,this),this._draw(),yv(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:a,labels:o}=e,l=jt.color,d=no(e.rtl,this.left,this.width),u=sn(o.font),{padding:p}=o,f=u.size,x=f/2;let g;this.drawTitle(),s.textAlign=d.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=u.string;const{boxWidth:v,boxHeight:b,itemHeight:j}=lw(o,f),_=function(R,A,T){if(isNaN(v)||v<=0||isNaN(b)||b<0)return;s.save();const Y=$e(T.lineWidth,1);if(s.fillStyle=$e(T.fillStyle,l),s.lineCap=$e(T.lineCap,"butt"),s.lineDashOffset=$e(T.lineDashOffset,0),s.lineJoin=$e(T.lineJoin,"miter"),s.lineWidth=Y,s.strokeStyle=$e(T.strokeStyle,l),s.setLineDash($e(T.lineDash,[])),o.usePointStyle){const O={radius:b*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:Y},H=d.xPlus(R,v/2),te=A+x;bk(s,O,H,te,o.pointStyleWidth&&v)}else{const O=A+Math.max((f-b)/2,0),H=d.leftForLtr(R,v),te=Xl(T.borderRadius);s.beginPath(),Object.values(te).some(G=>G!==0)?Fg(s,{x:H,y:O,w:v,h:b,radius:te}):s.rect(H,O,v,b),s.fill(),Y!==0&&s.stroke()}s.restore()},N=function(R,A,T){Oc(s,T.text,R,A+j/2,u,{strikethrough:T.hidden,textAlign:d.textAlign(T.textAlign)})},S=this.isHorizontal(),P=this._computeTitleHeight();S?g={x:tn(a,this.left+p,this.right-r[0]),y:this.top+p+P,line:0}:g={x:this.left+p,y:tn(a,this.top+P+p,this.bottom-n[0].height),line:0},Ck(this.ctx,e.textDirection);const M=j+p;this.legendItems.forEach((R,A)=>{s.strokeStyle=R.fontColor,s.fillStyle=R.fontColor;const T=s.measureText(R.text).width,Y=d.textAlign(R.textAlign||(R.textAlign=o.textAlign)),O=v+x+T;let H=g.x,te=g.y;d.setWidth(this.width),S?A>0&&H+O+p>this.right&&(te=g.y+=M,g.line++,H=g.x=tn(a,this.left+p,this.right-r[g.line])):A>0&&te+M>this.bottom&&(H=g.x=H+n[g.line].width+p,g.line++,te=g.y=tn(a,this.top+P+p,this.bottom-n[g.line].height));const G=d.x(H);if(_(G,te,R),H=A8(Y,H+v+x,S?H+O:this.right,e.rtl),N(d.x(H),te,R),S)g.x+=O+p;else if(typeof R.text!="string"){const B=u.lineHeight;g.y+=Wk(R,B)+p}else g.y+=M}),Ek(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=sn(n.font),s=rr(n.padding);if(!n.display)return;const a=no(e.rtl,this.left,this.width),o=this.ctx,l=n.position,d=r.size/2,u=s.top+d;let p,f=this.left,x=this.width;if(this.isHorizontal())x=Math.max(...this.lineWidths),p=this.top+u,f=tn(e.align,f,this.right-x);else{const v=this.columnSizes.reduce((b,j)=>Math.max(b,j.height),0);p=u+tn(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const g=tn(l,f,f+x);o.textAlign=a.textAlign(gv(l)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Oc(o,n.text,g,p,r)}_computeTitleHeight(){const e=this.options.title,n=sn(e.font),r=rr(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,a;if(El(e,this.left,this.right)&&El(n,this.top,this.bottom)){for(a=this.legendHitBoxes,r=0;r<a.length;++r)if(s=a[r],El(e,s.left,s.left+s.width)&&El(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!N7(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,a=b7(s,r);s&&!a&&st(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!a&&st(n.onHover,[e,r,this],this)}else r&&st(n.onClick,[e,r,this],this)}}function _7(t,e,n,r,s){const a=w7(r,t,e,n),o=j7(s,r,e.lineHeight);return{itemWidth:a,itemHeight:o}}function w7(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((a,o)=>a.length>o.length?a:o)),e+n.size/2+r.measureText(s).width}function j7(t,e,n){let r=t;return typeof e.text!="string"&&(r=Wk(e,n)),r}function Wk(t,e){const n=t.text?t.text.length:0;return e*n}function N7(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Hk={id:"legend",_element:cw,start(t,e,n){const r=t.legend=new cw({ctx:t.ctx,options:n,chart:t});Zn.configure(t,r,n),Zn.addBox(t,r)},stop(t){Zn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Zn.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:a,useBorderRadius:o,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(d=>{const u=d.controller.getStyle(n?0:void 0),p=rr(u.borderWidth);return{text:e[d.index].label,fillStyle:u.backgroundColor,fontColor:a,hidden:!d.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(p.width+p.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:s||u.textAlign,borderRadius:o&&(l||u.borderRadius),datasetIndex:d.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Yk extends ua{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=It(r.text)?r.text.length:1;this._padding=rr(r.padding);const a=s*sn(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:a,options:o}=this,l=o.align;let d=0,u,p,f;return this.isHorizontal()?(p=tn(l,r,a),f=n+e,u=a-r):(o.position==="left"?(p=r+e,f=tn(l,s,n),d=Ft*-.5):(p=a-e,f=tn(l,n,s),d=Ft*.5),u=s-n),{titleX:p,titleY:f,maxWidth:u,rotation:d}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=sn(n.font),a=r.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:d,rotation:u}=this._drawArgs(a);Oc(e,n.text,0,0,r,{color:n.color,maxWidth:d,rotation:u,textAlign:gv(n.align),textBaseline:"middle",translation:[o,l]})}}function k7(t,e){const n=new Yk({ctx:t.ctx,options:e,chart:t});Zn.configure(t,n,e),Zn.addBox(t,n),t.titleBlock=n}var Vk={id:"title",_element:Yk,start(t,e,n){k7(t,n)},stop(t){const e=t.titleBlock;Zn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Zn.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Pl={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,a=0;for(e=0,n=t.length;e<n;++e){const l=t[e].element;if(l&&l.hasValue()){const d=l.tooltipPosition();r.add(d.x),s+=d.y,++a}}return a===0||r.size===0?!1:{x:[...r].reduce((l,d)=>l+d)/r.size,y:s/a}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,a,o,l;for(a=0,o=t.length;a<o;++a){const d=t[a].element;if(d&&d.hasValue()){const u=d.getCenterPoint(),p=Ag(e,u);p<s&&(s=p,l=d)}}if(l){const d=l.tooltipPosition();n=d.x,r=d.y}return{x:n,y:r}}};function Sr(t,e){return e&&(It(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Xr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function S7(t,e){const{element:n,datasetIndex:r,index:s}=e,a=t.getDatasetMeta(r).controller,{label:o,value:l}=a.getLabelAndValue(s);return{chart:t,label:o,parsed:a.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:l,dataset:a.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function dw(t,e){const n=t.chart.ctx,{body:r,footer:s,title:a}=t,{boxWidth:o,boxHeight:l}=e,d=sn(e.bodyFont),u=sn(e.titleFont),p=sn(e.footerFont),f=a.length,x=s.length,g=r.length,v=rr(e.padding);let b=v.height,j=0,_=r.reduce((P,M)=>P+M.before.length+M.lines.length+M.after.length,0);if(_+=t.beforeBody.length+t.afterBody.length,f&&(b+=f*u.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),_){const P=e.displayColors?Math.max(l,d.lineHeight):d.lineHeight;b+=g*P+(_-g)*d.lineHeight+(_-1)*e.bodySpacing}x&&(b+=e.footerMarginTop+x*p.lineHeight+(x-1)*e.footerSpacing);let N=0;const S=function(P){j=Math.max(j,n.measureText(P).width+N)};return n.save(),n.font=u.string,qe(t.title,S),n.font=d.string,qe(t.beforeBody.concat(t.afterBody),S),N=e.displayColors?o+2+e.boxPadding:0,qe(r,P=>{qe(P.before,S),qe(P.lines,S),qe(P.after,S)}),N=0,n.font=p.string,qe(t.footer,S),n.restore(),j+=v.width,{width:j,height:b}}function C7(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function E7(t,e,n,r){const{x:s,width:a}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+a+o>e.width||t==="right"&&s-a-o<0)return!0}function T7(t,e,n,r){const{x:s,width:a}=n,{width:o,chartArea:{left:l,right:d}}=t;let u="center";return r==="center"?u=s<=(l+d)/2?"left":"right":s<=a/2?u="left":s>=o-a/2&&(u="right"),E7(u,t,e,n)&&(u="center"),u}function uw(t,e,n){const r=n.yAlign||e.yAlign||C7(t,n);return{xAlign:n.xAlign||e.xAlign||T7(t,e,n,r),yAlign:r}}function P7(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function D7(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function hw(t,e,n,r){const{caretSize:s,caretPadding:a,cornerRadius:o}=t,{xAlign:l,yAlign:d}=n,u=s+a,{topLeft:p,topRight:f,bottomLeft:x,bottomRight:g}=Xl(o);let v=P7(e,l);const b=D7(e,d,u);return d==="center"?l==="left"?v+=u:l==="right"&&(v-=u):l==="left"?v-=Math.max(p,x)+s:l==="right"&&(v+=Math.max(f,g)+s),{x:qn(v,0,r.width-e.width),y:qn(b,0,r.height-e.height)}}function tu(t,e,n){const r=rr(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function pw(t){return Sr([],Xr(t))}function O7(t,e,n){return da(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function fw(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const qk={beforeTitle:Gr,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Gr,beforeBody:Gr,beforeLabel:Gr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return nt(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Gr,afterBody:Gr,beforeFooter:Gr,footer:Gr,afterFooter:Gr};function xn(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?qk[e].call(n,r):s}class Ug extends ua{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,a=new Pk(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=O7(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=xn(r,"beforeTitle",this,e),a=xn(r,"title",this,e),o=xn(r,"afterTitle",this,e);let l=[];return l=Sr(l,Xr(s)),l=Sr(l,Xr(a)),l=Sr(l,Xr(o)),l}getBeforeBody(e,n){return pw(xn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return qe(e,a=>{const o={before:[],lines:[],after:[]},l=fw(r,a);Sr(o.before,Xr(xn(l,"beforeLabel",this,a))),Sr(o.lines,xn(l,"label",this,a)),Sr(o.after,Xr(xn(l,"afterLabel",this,a))),s.push(o)}),s}getAfterBody(e,n){return pw(xn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=xn(r,"beforeFooter",this,e),a=xn(r,"footer",this,e),o=xn(r,"afterFooter",this,e);let l=[];return l=Sr(l,Xr(s)),l=Sr(l,Xr(a)),l=Sr(l,Xr(o)),l}_createItems(e){const n=this._active,r=this.chart.data,s=[],a=[],o=[];let l=[],d,u;for(d=0,u=n.length;d<u;++d)l.push(S7(this.chart,n[d]));return e.filter&&(l=l.filter((p,f,x)=>e.filter(p,f,x,r))),e.itemSort&&(l=l.sort((p,f)=>e.itemSort(p,f,r))),qe(l,p=>{const f=fw(e.callbacks,p);s.push(xn(f,"labelColor",this,p)),a.push(xn(f,"labelPointStyle",this,p)),o.push(xn(f,"labelTextColor",this,p))}),this.labelColors=s,this.labelPointStyles=a,this.labelTextColors=o,this.dataPoints=l,l}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let a,o=[];if(!s.length)this.opacity!==0&&(a={opacity:0});else{const l=Pl[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const d=this._size=dw(this,r),u=Object.assign({},l,d),p=uw(this.chart,r,u),f=hw(r,u,p,this.chart);this.xAlign=p.xAlign,this.yAlign=p.yAlign,a={opacity:1,x:f.x,y:f.y,width:d.width,height:d.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const a=this.getCaretPosition(e,r,s);n.lineTo(a.x1,a.y1),n.lineTo(a.x2,a.y2),n.lineTo(a.x3,a.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:a}=this,{caretSize:o,cornerRadius:l}=r,{topLeft:d,topRight:u,bottomLeft:p,bottomRight:f}=Xl(l),{x,y:g}=e,{width:v,height:b}=n;let j,_,N,S,P,M;return a==="center"?(P=g+b/2,s==="left"?(j=x,_=j-o,S=P+o,M=P-o):(j=x+v,_=j+o,S=P-o,M=P+o),N=j):(s==="left"?_=x+Math.max(d,p)+o:s==="right"?_=x+v-Math.max(u,f)-o:_=this.caretX,a==="top"?(S=g,P=S-o,j=_-o,N=_+o):(S=g+b,P=S+o,j=_+o,N=_-o),M=S),{x1:j,x2:_,x3:N,y1:S,y2:P,y3:M}}drawTitle(e,n,r){const s=this.title,a=s.length;let o,l,d;if(a){const u=no(r.rtl,this.x,this.width);for(e.x=tu(this,r.titleAlign,r),n.textAlign=u.textAlign(r.titleAlign),n.textBaseline="middle",o=sn(r.titleFont),l=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,d=0;d<a;++d)n.fillText(s[d],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,d+1===a&&(e.y+=r.titleMarginBottom-l)}}_drawColorBox(e,n,r,s,a){const o=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:d,boxWidth:u}=a,p=sn(a.bodyFont),f=tu(this,"left",a),x=s.x(f),g=d<p.lineHeight?(p.lineHeight-d)/2:0,v=n.y+g;if(a.usePointStyle){const b={radius:Math.min(u,d)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},j=s.leftForLtr(x,u)+u/2,_=v+d/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,Rg(e,b,j,_),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Rg(e,b,j,_)}else{e.lineWidth=He(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const b=s.leftForLtr(x,u),j=s.leftForLtr(s.xPlus(x,1),u-2),_=Xl(o.borderRadius);Object.values(_).some(N=>N!==0)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,Fg(e,{x:b,y:v,w:u,h:d,radius:_}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Fg(e,{x:j,y:v+1,w:u-2,h:d-2,radius:_}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(b,v,u,d),e.strokeRect(b,v,u,d),e.fillStyle=o.backgroundColor,e.fillRect(j,v+1,u-2,d-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:a,bodyAlign:o,displayColors:l,boxHeight:d,boxWidth:u,boxPadding:p}=r,f=sn(r.bodyFont);let x=f.lineHeight,g=0;const v=no(r.rtl,this.x,this.width),b=function(T){n.fillText(T,v.x(e.x+g),e.y+x/2),e.y+=x+a},j=v.textAlign(o);let _,N,S,P,M,R,A;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=tu(this,j,r),n.fillStyle=r.bodyColor,qe(this.beforeBody,b),g=l&&j!=="right"?o==="center"?u/2+p:u+2+p:0,P=0,R=s.length;P<R;++P){for(_=s[P],N=this.labelTextColors[P],n.fillStyle=N,qe(_.before,b),S=_.lines,l&&S.length&&(this._drawColorBox(n,e,P,v,r),x=Math.max(f.lineHeight,d)),M=0,A=S.length;M<A;++M)b(S[M]),x=f.lineHeight;qe(_.after,b)}g=0,x=f.lineHeight,qe(this.afterBody,b),e.y-=a}drawFooter(e,n,r){const s=this.footer,a=s.length;let o,l;if(a){const d=no(r.rtl,this.x,this.width);for(e.x=tu(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=d.textAlign(r.footerAlign),n.textBaseline="middle",o=sn(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,l=0;l<a;++l)n.fillText(s[l],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:a,yAlign:o}=this,{x:l,y:d}=e,{width:u,height:p}=r,{topLeft:f,topRight:x,bottomLeft:g,bottomRight:v}=Xl(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(l+f,d),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(l+u-x,d),n.quadraticCurveTo(l+u,d,l+u,d+x),o==="center"&&a==="right"&&this.drawCaret(e,n,r,s),n.lineTo(l+u,d+p-v),n.quadraticCurveTo(l+u,d+p,l+u-v,d+p),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(l+g,d+p),n.quadraticCurveTo(l,d+p,l,d+p-g),o==="center"&&a==="left"&&this.drawCaret(e,n,r,s),n.lineTo(l,d+f),n.quadraticCurveTo(l,d,l+f,d),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,a=r&&r.y;if(s||a){const o=Pl[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=dw(this,e),d=Object.assign({},o,this._size),u=uw(n,e,d),p=hw(e,d,u,n);(s._to!==p.x||a._to!==p.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,p))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},a={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=rr(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(e.save(),e.globalAlpha=r,this.drawBackground(a,e,s,n),Ck(e,n.textDirection),a.y+=o.top,this.drawTitle(a,e,n),this.drawBody(a,e,n),this.drawFooter(a,e,n),Ek(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:l,index:d})=>{const u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[d],index:d}}),a=!vh(r,s),o=this._positionChanged(s,n);(a||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,a=this._active||[],o=this._getActiveElements(e,a,n,r),l=this._positionChanged(o,e),d=n||!vh(o,a)||l;return d&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),d}_getActiveElements(e,n,r,s){const a=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,a.mode,a,r);return a.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:a}=this,o=Pl[a.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}Te(Ug,"positioners",Pl);var Zk={id:"tooltip",_element:Ug,positioners:Pl,afterInit(t,e,n){n&&(t.tooltip=new Ug({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:qk},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const M7=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function L7(t,e,n,r){const s=t.indexOf(e);if(s===-1)return M7(t,e,n,r);const a=t.lastIndexOf(e);return s!==a?n:s}const A7=(t,e)=>t===null?null:qn(Math.round(t),0,e);function mw(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class kh extends Io{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:a}of n)r[s]===a&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(nt(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:L7(r,e,$e(n,e),this._addedLabels),A7(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let a=this.getLabels();a=e===0&&n===a.length-1?a:a.slice(e,n+1),this._valueRange=Math.max(a.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return mw.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Te(kh,"id","category"),Te(kh,"defaults",{ticks:{callback:mw}});function I7(t,e){const n=[],{bounds:s,step:a,min:o,max:l,precision:d,count:u,maxTicks:p,maxDigits:f,includeBounds:x}=t,g=a||1,v=p-1,{min:b,max:j}=e,_=!nt(o),N=!nt(l),S=!nt(u),P=(j-b)/(f+1);let M=b_((j-b)/v/g)*g,R,A,T,Y;if(M<1e-14&&!_&&!N)return[{value:b},{value:j}];Y=Math.ceil(j/M)-Math.floor(b/M),Y>v&&(M=b_(Y*M/v/g)*g),nt(d)||(R=Math.pow(10,d),M=Math.ceil(M*R)/R),s==="ticks"?(A=Math.floor(b/M)*M,T=Math.ceil(j/M)*M):(A=b,T=j),_&&N&&a&&N8((l-o)/a,M/1e3)?(Y=Math.round(Math.min((l-o)/M,p)),M=(l-o)/Y,A=o,T=l):S?(A=_?o:A,T=N?l:T,Y=u-1,M=(T-A)/Y):(Y=(T-A)/M,Kl(Y,Math.round(Y),M/1e3)?Y=Math.round(Y):Y=Math.ceil(Y));const O=Math.max(__(M),__(A));R=Math.pow(10,nt(d)?O:d),A=Math.round(A*R)/R,T=Math.round(T*R)/R;let H=0;for(_&&(x&&A!==o?(n.push({value:o}),A<o&&H++,Kl(Math.round((A+H*M)*R)/R,o,gw(o,P,t))&&H++):A<o&&H++);H<Y;++H){const te=Math.round((A+H*M)*R)/R;if(N&&te>l)break;n.push({value:te})}return N&&x&&T!==l?n.length&&Kl(n[n.length-1].value,l,gw(l,P,t))?n[n.length-1].value=l:n.push({value:l}):(!N||T===l)&&n.push({value:T}),n}function gw(t,e,{horizontal:n,minRotation:r}){const s=Fi(r),a=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/a,o)}class R7 extends Io{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return nt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:a}=this;const o=d=>s=n?s:d,l=d=>a=r?a:d;if(e){const d=wo(s),u=wo(a);d<0&&u<0?l(0):d>0&&u>0&&o(0)}if(s===a){let d=a===0?1:Math.abs(a*.05);l(a+d),e||o(s-d)}this.min=s,this.max=a}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},a=this._range||this,o=I7(s,a);return e.bounds==="ticks"&&k8(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return vk(e,this.chart.options.locale,this.options.ticks.format)}}class Sh extends R7{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=nr(e)?e:0,this.max=nr(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Fi(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,a.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Te(Sh,"id","linear"),Te(Sh,"defaults",{ticks:{callback:yk.formatters.numeric}});const pp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},bn=Object.keys(pp);function xw(t,e){return t-e}function vw(t,e){if(nt(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:a}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),nr(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(Pc(a)||a===!0)?n.startOf(o,"isoWeek",a):n.startOf(o,s)),+o)}function yw(t,e,n,r){const s=bn.length;for(let a=bn.indexOf(t);a<s-1;++a){const o=pp[bn[a]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(l*o.size))<=r)return bn[a]}return bn[s-1]}function F7(t,e,n,r,s){for(let a=bn.length-1;a>=bn.indexOf(n);a--){const o=bn[a];if(pp[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return bn[n?bn.indexOf(n):0]}function $7(t){for(let e=bn.indexOf(t)+1,n=bn.length;e<n;++e)if(pp[bn[e]].common)return bn[e]}function bw(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=mv(n,e),a=n[r]>=e?n[r]:n[s];t[a]=!0}}function z7(t,e,n,r){const s=t._adapter,a=+s.startOf(e[0].value,r),o=e[e.length-1].value;let l,d;for(l=a;l<=o;l=+s.add(l,1,r))d=n[l],d>=0&&(e[d].major=!0);return e}function _w(t,e,n){const r=[],s={},a=e.length;let o,l;for(o=0;o<a;++o)l=e[o],s[l]=o,r.push({value:l,major:!1});return a===0||!n?r:z7(t,r,s,n)}class Ch extends Io{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new nz._date(e.adapters.date);s.init(n),Zl(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:vw(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:a,minDefined:o,maxDefined:l}=this.getUserBounds();function d(u){!o&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!l&&!isNaN(u.max)&&(a=Math.max(a,u.max))}(!o||!l)&&(d(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&d(this.getMinMax(!1))),s=nr(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),a=nr(a)&&!isNaN(a)?a:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,a-1),this.max=Math.max(s+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const a=this.min,o=this.max,l=D8(s,a,o);return this._unit=n.unit||(r.autoSkip?yw(n.minUnit,this.min,this.max,this._getLabelCapacity(a)):F7(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:$7(this._unit),this.initOffsets(s),e.reverse&&l.reverse(),_w(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,a;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?r=a:r=(a-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=qn(n,0,o),r=qn(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,a=s.time,o=a.unit||yw(a.minUnit,n,r,this._getLabelCapacity(n)),l=$e(s.ticks.stepSize,1),d=o==="week"?a.isoWeekday:!1,u=Pc(d)||d===!0,p={};let f=n,x,g;if(u&&(f=+e.startOf(f,"isoWeek",d)),f=+e.startOf(f,u?"day":o),e.diff(r,n,o)>1e5*l)throw new Error(n+" and "+r+" are too far apart with stepSize of "+l+" "+o);const v=s.ticks.source==="data"&&this.getDataTimestamps();for(x=f,g=0;x<r;x=+e.add(x,l,o),g++)bw(p,x,v);return(x===r||s.bounds==="ticks"||g===1)&&bw(p,x,v),Object.keys(p).sort(xw).map(b=>+b)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,a=this._unit,o=n||s[a];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const a=this.options,o=a.ticks.callback;if(o)return st(o,[e,n,r],this);const l=a.time.displayFormats,d=this._unit,u=this._majorUnit,p=d&&l[d],f=u&&l[u],x=r[n],g=u&&f&&x&&x.major;return this._adapter.format(e,s||(g?f:p))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=Fi(this.isHorizontal()?n.maxRotation:n.minRotation),a=Math.cos(s),o=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:r*a+l*o,h:r*o+l*a}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,a=this._tickFormatFunction(e,0,_w(this,[e],this._majorUnit),s),o=this._getLabelSize(a),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(vw(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return M8(e.sort(xw))}}Te(Ch,"id","time"),Te(Ch,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function nu(t,e,n){let r=0,s=t.length-1,a,o,l,d;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=$i(t,"pos",e)),{pos:a,time:l}=t[r],{pos:o,time:d}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=$i(t,"time",e)),{time:a,pos:l}=t[r],{time:o,pos:d}=t[s]);const u=o-a;return u?l+(d-l)*(e-a)/u:l}class ww extends Ch{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=nu(n,this.min),this._tableRange=nu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],a=[];let o,l,d,u,p;for(o=0,l=e.length;o<l;++o)u=e[o],u>=n&&u<=r&&s.push(u);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,l=s.length;o<l;++o)p=s[o+1],d=s[o-1],u=s[o],Math.round((p+d)/2)!==u&&a.push({time:u,pos:o/(l-1)});return a}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,a)=>s-a)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(nu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return nu(this._table,r*this._tableRange+this._minPos,!0)}}Te(ww,"id","timeseries"),Te(ww,"defaults",Ch.defaults);const Kk="label";function jw(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function B7(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function Gk(t,e){t.labels=e}function Qk(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Kk;const r=[];t.datasets=e.map(s=>{const a=t.datasets.find(o=>o[n]===s[n]);return!a||!s.data||r.includes(a)?{...s}:(r.push(a),Object.assign(a,s),a)})}function U7(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Kk;const n={labels:[],datasets:[]};return Gk(n,t.labels),Qk(n,t.datasets,e),n}function W7(t,e){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:a,type:o,data:l,options:d,plugins:u=[],fallbackContent:p,updateMode:f,...x}=t,g=w.useRef(null),v=w.useRef(null),b=()=>{g.current&&(v.current=new qc(g.current,{type:o,data:U7(l,a),options:d&&{...d},plugins:u}),jw(e,v.current))},j=()=>{jw(e,null),v.current&&(v.current.destroy(),v.current=null)};return w.useEffect(()=>{!s&&v.current&&d&&B7(v.current,d)},[s,d]),w.useEffect(()=>{!s&&v.current&&Gk(v.current.config.data,l.labels)},[s,l.labels]),w.useEffect(()=>{!s&&v.current&&l.datasets&&Qk(v.current.config.data,l.datasets,a)},[s,l.datasets]),w.useEffect(()=>{v.current&&(s?(j(),setTimeout(b)):v.current.update(f))},[s,d,l.labels,l.datasets,f]),w.useEffect(()=>{v.current&&(j(),setTimeout(b))},[o]),w.useEffect(()=>(b(),()=>j()),[]),q.createElement("canvas",{ref:g,role:"img",height:n,width:r,...x},p)}const H7=w.forwardRef(W7);function Y7(t,e){return qc.register(e),w.forwardRef((n,r)=>q.createElement(H7,{...n,ref:r,type:t}))}const Wg=Y7("line",ju);qc.register(kh,Sh,ec,qa,Vk,Zk,Hk);function V7(){const[t,e]=w.useState(new Date().getFullYear()),[n,r]=w.useState("vendor"),[s,a]=w.useState([]),[o,l]=w.useState(!0),[d,u]=w.useState(null),p=[{id:"vendor",label:"البائعين"},{id:"driver",label:"السائقين"}],f=[t,t-1,t-2];w.useEffect(()=>{x()},[t,n]);const x=async()=>{try{l(!0),u(null);const b=await WF(n,t),j=[];for(let _=1;_<=12;_++){const N=b.find(S=>S.month===_);N?j.push(N):j.push({month:_,avg_rating:0,count:0})}a(j)}catch(b){console.error("Error fetching ratings report:",b),u("فشل في تحميل تقرير التقييمات. الرجاء المحاولة مرة أخرى.")}finally{l(!1)}},g={labels:s.map(b=>h_(b.month)),datasets:[{label:"متوسط التقييم",data:s.map(b=>b.count>0?b.avg_rating:null),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.5)",tension:.4,pointBackgroundColor:"rgb(59, 130, 246)",pointRadius:5,pointHoverRadius:7}]},v={responsive:!0,scales:{y:{min:0,max:5,ticks:{stepSize:1}}},plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(b){const j=s[b.dataIndex];return[`متوسط التقييم: ${b.parsed.y}`,`عدد التقييمات: ${j.count}`]}}}}};return o?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):d?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:d}),i.jsx("button",{onClick:x,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"تقرير التقييمات الشهري"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"flex bg-gray-100 rounded-lg p-1",children:p.map(b=>i.jsx("button",{onClick:()=>r(b.id),className:`px-4 py-2 rounded-lg transition-colors ${n===b.id?"bg-white shadow text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:b.label},b.id))}),i.jsx("select",{value:t,onChange:b=>e(Number(b.target.value)),className:"border rounded-lg px-3 py-2",children:f.map(b=>i.jsx("option",{value:b,children:b},b))})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["متوسط التقييمات الشهرية لعام ",t]}),i.jsx("div",{className:"h-80",children:i.jsx(Wg,{data:g,options:v})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[i.jsx("div",{className:"px-6 py-4 border-b",children:i.jsx("h3",{className:"text-lg font-semibold",children:"تفاصيل التقييمات الشهرية"})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الشهر"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"متوسط التقييم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"عدد التقييمات"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التقييم"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(b=>i.jsxs("tr",{className:b.count===0?"bg-gray-50 text-gray-400":"",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:h_(b.month)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.count>0?b.avg_rating.toFixed(1):"-"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.count}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b.count>0?i.jsx("div",{className:"flex items-center",children:i.jsx(Va,{rating:b.avg_rating})}):i.jsx("span",{children:"-"})})]},b.month))})]})})]})]})}const q7=async(t=new Date().getFullYear())=>{try{const{data:e,error:n}=await ee.from("orders").select("total, created_at");if(n)throw n;const r=Array(12).fill(0),s=Array(12).fill(0);return e.forEach(a=>{const o=new Date(a.created_at);if(o.getFullYear()===t){const l=o.getMonth();r[l]+=parseFloat(a.total||0),s[l]+=1}}),{monthlySales:r,monthlyOrders:s}}catch(e){throw console.error("Error fetching monthly sales stats:",e),e}},Z7=async()=>{try{const{data:t,error:e}=await ee.rpc("get_financial_summary");if(e)throw e;return t||{total_sales:0,electronic_payments:0,cash_payments:0,admin_commissions:0,vendor_balances:0,driver_balances:0}}catch(t){throw console.error("Error fetching financial stats:",t),t}};qc.register(kh,Sh,ec,qa,Vk,Zk,Hk);function K7(){const[t,e]=w.useState({adminCommissions:{total:0,fromVendors:0,fromDrivers:0,pendingFromVendors:0,pendingFromDrivers:0,byPaymentType:{electronic:0,cash:0},monthly:[0,0,0,0,0,0,0,0,0,0,0,0]},vendorBalances:{total:0,available:0,pending:0,byPaymentType:{electronic:0,cash:0},monthly:[0,0,0,0,0,0,0,0,0,0,0,0]},driverBalances:{total:0,available:0,pending:0,byPaymentType:{electronic:0,cash:0},monthly:[0,0,0,0,0,0,0,0,0,0,0,0]},totalSales:{amount:0,electronic:0,cash:0,monthly:[0,0,0,0,0,0,0,0,0,0,0,0]}}),[n,r]=w.useState(!0),[s,a]=w.useState(null);w.useEffect(()=>{o()},[]);const o=async()=>{try{r(!0),a(null);const p=await Z7(),{monthlySales:f}=await q7(),x=f.map(g=>Math.round(g*.15));e({adminCommissions:{total:p.admin_commissions||0,fromVendors:p.admin_commissions_vendors||0,fromDrivers:p.admin_commissions_drivers||0,pendingFromVendors:p.pending_commissions_vendors||0,pendingFromDrivers:p.pending_commissions_drivers||0,byPaymentType:{electronic:p.admin_commissions_electronic||0,cash:p.admin_commissions_cash||0},monthly:x},vendorBalances:{total:p.vendor_balances||0,available:p.vendor_available_balances||0,pending:p.vendor_pending_balances||0,byPaymentType:{electronic:p.vendor_balances_electronic||0,cash:p.vendor_balances_cash||0},monthly:f.map(g=>Math.round(g*.7))},driverBalances:{total:p.driver_balances||0,available:p.driver_available_balances||0,pending:p.driver_pending_balances||0,byPaymentType:{electronic:p.driver_balances_electronic||0,cash:p.driver_balances_cash||0},monthly:f.map(g=>Math.round(g*.3))},totalSales:{amount:p.total_sales||0,electronic:p.electronic_payments||0,cash:p.cash_payments||0,monthly:f}})}catch(p){console.error("Error fetching financial data:",p),a("فشل في تحميل البيانات المالية. الرجاء المحاولة مرة أخرى.")}finally{r(!1)}},l=["يناير","فبراير","مارس","إبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],d={labels:l,datasets:[{label:"المبيعات الكلية",data:t.totalSales.monthly,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.5)",tension:.4},{label:"عمولات الإدارة",data:t.adminCommissions.monthly,borderColor:"rgb(16, 185, 129)",backgroundColor:"rgba(16, 185, 129, 0.5)",tension:.4}]},u={labels:l,datasets:[{label:"أرصدة البائعين",data:t.vendorBalances.monthly,borderColor:"rgb(245, 158, 11)",backgroundColor:"rgba(245, 158, 11, 0.5)",tension:.4},{label:"أرصدة السائقين",data:t.driverBalances.monthly,borderColor:"rgb(139, 92, 246)",backgroundColor:"rgba(139, 92, 246, 0.5)",tension:.4}]};return n?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:s}),i.jsx("button",{onClick:()=>o(),className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"لوحة المعلومات المالية"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"عمولات الإدارة"}),i.jsxs("div",{className:"text-3xl font-bold text-green-600",children:["₪",t.adminCommissions.total.toLocaleString()]}),i.jsxs("p",{className:"text-gray-500 mt-2",children:["الرصيد الكلي: ₪",t.adminCommissions.total.toLocaleString()]}),i.jsxs("div",{className:"mt-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"من البائعين:"}),i.jsxs("span",{className:"font-medium",children:["₪",t.adminCommissions.fromVendors.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"من السائقين:"}),i.jsxs("span",{className:"font-medium",children:["₪",t.adminCommissions.fromDrivers.toLocaleString()]})]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"العمولات حسب طريقة الدفع"}),i.jsxs("div",{className:"mt-2",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{children:"الدفع الإلكتروني:"}),i.jsxs("span",{className:"font-bold",children:["₪",t.adminCommissions.byPaymentType.electronic.toLocaleString()]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:i.jsx("div",{className:"bg-green-600 h-2.5 rounded-full",style:{width:`${t.adminCommissions.byPaymentType.electronic/t.adminCommissions.total*100}%`}})})]}),i.jsxs("div",{className:"mt-3",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{children:"الدفع النقدي:"}),i.jsxs("span",{className:"font-bold",children:["₪",t.adminCommissions.byPaymentType.cash.toLocaleString()]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:i.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${t.adminCommissions.byPaymentType.cash/t.adminCommissions.total*100}%`}})})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"العمولات المعلقة"}),i.jsxs("div",{className:"text-3xl font-bold text-yellow-600",children:["₪",(t.adminCommissions.pendingFromVendors+t.adminCommissions.pendingFromDrivers).toLocaleString()]}),i.jsxs("div",{className:"mt-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"من البائعين:"}),i.jsxs("span",{className:"font-medium",children:["₪",t.adminCommissions.pendingFromVendors.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"من السائقين:"}),i.jsxs("span",{className:"font-medium",children:["₪",t.adminCommissions.pendingFromDrivers.toLocaleString()]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"أرصدة البائعين"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-600",children:"الرصيد الكلي:"}),i.jsxs("span",{className:"text-xl font-bold",children:["₪",t.vendorBalances.total.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-600",children:"الرصيد المتاح:"}),i.jsxs("span",{className:"text-lg font-semibold text-green-600",children:["₪",t.vendorBalances.available.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-600",children:"الرصيد المعلق:"}),i.jsxs("span",{className:"text-lg font-semibold text-yellow-600",children:["₪",t.vendorBalances.pending.toLocaleString()]})]}),i.jsxs("div",{className:"pt-4 border-t",children:[i.jsx("p",{className:"text-sm font-medium mb-2",children:"حسب طريقة الدفع:"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"الدفع الإلكتروني"}),i.jsxs("p",{className:"text-lg font-semibold",children:["₪",t.vendorBalances.byPaymentType.electronic.toLocaleString()]})]}),i.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"الدفع النقدي"}),i.jsxs("p",{className:"text-lg font-semibold",children:["₪",t.vendorBalances.byPaymentType.cash.toLocaleString()]})]})]})]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"أرصدة السائقين"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-600",children:"الرصيد الكلي:"}),i.jsxs("span",{className:"text-xl font-bold",children:["₪",t.driverBalances.total.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-600",children:"الرصيد المتاح:"}),i.jsxs("span",{className:"text-lg font-semibold text-green-600",children:["₪",t.driverBalances.available.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-600",children:"الرصيد المعلق:"}),i.jsxs("span",{className:"text-lg font-semibold text-yellow-600",children:["₪",t.driverBalances.pending.toLocaleString()]})]}),i.jsxs("div",{className:"pt-4 border-t",children:[i.jsx("p",{className:"text-sm font-medium mb-2",children:"حسب طريقة الدفع:"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"الدفع الإلكتروني"}),i.jsxs("p",{className:"text-lg font-semibold",children:["₪",t.driverBalances.byPaymentType.electronic.toLocaleString()]})]}),i.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"الدفع النقدي"}),i.jsxs("p",{className:"text-lg font-semibold",children:["₪",t.driverBalances.byPaymentType.cash.toLocaleString()]})]})]})]})]})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"إجمالي المبيعات"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"إجمالي المبيعات"}),i.jsxs("p",{className:"text-2xl font-bold",children:["₪",t.totalSales.amount.toLocaleString()]})]}),i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"الدفع الإلكتروني"}),i.jsxs("p",{className:"text-2xl font-bold",children:["₪",t.totalSales.electronic.toLocaleString()]}),i.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[(t.totalSales.electronic/t.totalSales.amount*100).toFixed(1),"% من المبيعات"]})]}),i.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[i.jsx("p",{className:"text-sm text-green-600 font-medium",children:"الدفع النقدي"}),i.jsxs("p",{className:"text-2xl font-bold",children:["₪",t.totalSales.cash.toLocaleString()]}),i.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[(t.totalSales.cash/t.totalSales.amount*100).toFixed(1),"% من المبيعات"]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"المبيعات والعمولات الشهرية"}),i.jsx("div",{className:"h-80",children:i.jsx(Wg,{data:d})})]}),i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"أرصدة البائعين والسائقين"}),i.jsx("div",{className:"h-80",children:i.jsx(Wg,{data:u})})]})]}),i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"تفاصيل المدفوعات حسب طريقة الدفع"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"طريقة الدفع"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"إجمالي المبيعات"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"عمولات الإدارة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"أرصدة البائعين"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"أرصدة السائقين"})]})}),i.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:"الدفع الإلكتروني"}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.totalSales.electronic.toLocaleString()]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.adminCommissions.byPaymentType.electronic.toLocaleString()]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.vendorBalances.byPaymentType.electronic.toLocaleString()]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.driverBalances.byPaymentType.electronic.toLocaleString()]})]}),i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:"الدفع النقدي"}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.totalSales.cash.toLocaleString()]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.adminCommissions.byPaymentType.cash.toLocaleString()]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.vendorBalances.byPaymentType.cash.toLocaleString()]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.driverBalances.byPaymentType.cash.toLocaleString()]})]}),i.jsxs("tr",{className:"bg-gray-50 font-semibold",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:"الإجمالي"}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.totalSales.amount.toLocaleString()]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.adminCommissions.total.toLocaleString()]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.vendorBalances.total.toLocaleString()]}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:["₪",t.driverBalances.total.toLocaleString()]})]})]})]})})]})]})}function G7(){const[t,e]=w.useState([{id:1,consumer_key:"ck_1234567890abcdef1234567890abcdef",description:"مفتاح API للتطبيق",permissions:["read","write"],created_at:"2025-01-15T10:30:00Z",last_used:"2025-04-17T14:20:00Z",status:"active"},{id:2,consumer_key:"ck_abcdef1234567890abcdef1234567890",description:"مفتاح API للموقع",permissions:["read"],created_at:"2025-02-10T09:15:00Z",last_used:"2025-04-15T11:45:00Z",status:"active"},{id:3,consumer_key:"ck_0987654321fedcba0987654321fedcba",description:"مفتاح API للتطبيق الجوال",permissions:["read","write","delete"],created_at:"2025-03-05T14:30:00Z",last_used:null,status:"revoked"}]),[n,r]=w.useState(!1),[s,a]=w.useState(!1),[o,l]=w.useState(null),[d,u]=w.useState({description:"",permissions:["read"]}),p=()=>{if(!d.description){z.error("الرجاء إدخال وصف للمفتاح");return}const b="ck_"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),j="cs_"+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),_={id:Math.max(...t.map(N=>N.id))+1,consumer_key:b,description:d.description,permissions:d.permissions,created_at:new Date().toISOString(),last_used:null,status:"active"};e([...t,_]),l({consumer_key:b,consumer_secret:j}),a(!0),r(!1),u({description:"",permissions:["read"]}),z.success("تم إنشاء مفتاح API بنجاح")},f=b=>{e(t.map(j=>j.id===b?{...j,status:"revoked"}:j)),z.success("تم تعطيل المفتاح بنجاح")},x=b=>{e(t.map(j=>j.id===b?{...j,status:"active"}:j)),z.success("تم تفعيل المفتاح بنجاح")},g=b=>{u(j=>{const _=j.permissions.includes(b)?j.permissions.filter(N=>N!==b):[...j.permissions,b];return{...j,permissions:_}})},v=b=>b?new Date(b).toLocaleString("ar-SA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"لم يستخدم بعد";return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"مفاتيح API"}),i.jsx("button",{onClick:()=>r(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إنشاء مفتاح جديد"})]}),s&&i.jsxs("div",{className:"bg-green-50 border border-green-200 p-6 rounded-lg",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"تم إنشاء مفتاح API جديد"}),i.jsx("button",{onClick:()=>a(!1),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"مفتاح المستهلك (Consumer Key):"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("code",{className:"bg-white p-2 rounded border flex-1 text-sm font-mono overflow-x-auto",children:o.consumer_key}),i.jsx("button",{onClick:()=>{navigator.clipboard.writeText(o.consumer_key),z.success("تم نسخ مفتاح المستهلك")},className:"mr-2 p-2 text-blue-600 hover:text-blue-800",children:"نسخ"})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"سر المستهلك (Consumer Secret):"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("code",{className:"bg-white p-2 rounded border flex-1 text-sm font-mono overflow-x-auto",children:o.consumer_secret}),i.jsx("button",{onClick:()=>{navigator.clipboard.writeText(o.consumer_secret),z.success("تم نسخ سر المستهلك")},className:"mr-2 p-2 text-blue-600 hover:text-blue-800",children:"نسخ"})]})]}),i.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[i.jsx("p",{className:"text-yellow-800 font-medium",children:"تنبيه هام!"}),i.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:"هذه هي المرة الوحيدة التي سيتم فيها عرض سر المستهلك. يرجى حفظه في مكان آمن."})]})]})]}),n?i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"إنشاء مفتاح API جديد"}),i.jsxs("form",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),i.jsx("input",{type:"text",value:d.description,onChange:b=>u({...d,description:b.target.value}),className:"w-full border rounded-md px-3 py-2",placeholder:"مثال: تطبيق الجوال، موقع الويب، إلخ",required:!0}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"أدخل وصفًا يساعدك على تذكر الغرض من هذا المفتاح"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الصلاحيات"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:d.permissions.includes("read"),onChange:()=>g("read"),className:"rounded text-blue-600 focus:ring-blue-500 ml-2"}),i.jsx("span",{children:"قراءة (Read)"}),i.jsx("span",{className:"mr-2 text-sm text-gray-500",children:"- الوصول للقراءة فقط"})]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:d.permissions.includes("write"),onChange:()=>g("write"),className:"rounded text-blue-600 focus:ring-blue-500 ml-2"}),i.jsx("span",{children:"كتابة (Write)"}),i.jsx("span",{className:"mr-2 text-sm text-gray-500",children:"- إنشاء وتحديث البيانات"})]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",checked:d.permissions.includes("delete"),onChange:()=>g("delete"),className:"rounded text-blue-600 focus:ring-blue-500 ml-2"}),i.jsx("span",{children:"حذف (Delete)"}),i.jsx("span",{className:"mr-2 text-sm text-gray-500",children:"- حذف البيانات"})]})]}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"حدد الصلاحيات التي تريد منحها لهذا المفتاح"})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>r(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"إنشاء مفتاح"})]})]})]}):i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الوصف"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المفتاح"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الصلاحيات"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"تاريخ الإنشاء"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"آخر استخدام"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(b=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.description})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("code",{className:"text-sm font-mono bg-gray-100 px-2 py-1 rounded",children:b.consumer_key}),i.jsx("button",{onClick:()=>{navigator.clipboard.writeText(b.consumer_key),z.success("تم نسخ المفتاح")},className:"mr-2 text-blue-600 hover:text-blue-800",children:"نسخ"})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex flex-wrap gap-1",children:[b.permissions.includes("read")&&i.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800",children:"قراءة"}),b.permissions.includes("write")&&i.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800",children:"كتابة"}),b.permissions.includes("delete")&&i.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-red-100 text-red-800",children:"حذف"})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:v(b.created_at)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:v(b.last_used)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${b.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:b.status==="active"?"نشط":"معطل"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:b.status==="active"?i.jsx("button",{onClick:()=>f(b.id),className:"text-red-600 hover:text-red-800",children:"تعطيل"}):i.jsx("button",{onClick:()=>x(b.id),className:"text-green-600 hover:text-green-800",children:"تفعيل"})})]},b.id))})]})})}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"كيفية استخدام مفاتيح API"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"المصادقة الأساسية"}),i.jsx("p",{className:"text-gray-600 mb-2",children:"يمكنك استخدام المصادقة الأساسية (Basic Authentication) مع مفتاح المستهلك وسر المستهلك:"}),i.jsx("pre",{className:"bg-gray-100 p-3 rounded-lg overflow-x-auto text-sm",children:i.jsx("code",{children:"const credentials = btoa(`${consumerKey}:${consumerSecret}`);\n\nfetch('https://api.example.com/endpoint', {\n  headers: {\n    'Authorization': `Basic ${credentials}`,\n    'Content-Type': 'application/json'\n  }\n})"})})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"معلمات URL"}),i.jsx("p",{className:"text-gray-600 mb-2",children:"يمكنك أيضًا تمرير المفاتيح كمعلمات URL:"}),i.jsx("pre",{className:"bg-gray-100 p-3 rounded-lg overflow-x-auto text-sm",children:i.jsx("code",{children:"fetch('https://api.example.com/endpoint?consumer_key=ck_xxxx&consumer_secret=cs_xxxx')"})})]}),i.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[i.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"ملاحظة أمنية"}),i.jsx("p",{className:"text-blue-700 text-sm",children:"يفضل استخدام المصادقة الأساسية عبر HTTPS لضمان أمان المفاتيح. تجنب استخدام معلمات URL في بيئة الإنتاج."})]})]})]})]})}const Q7={},Nw=t=>{let e;const n=new Set,r=(p,f)=>{const x=typeof p=="function"?p(e):p;if(!Object.is(x,e)){const g=e;e=f??(typeof x!="object"||x===null)?x:Object.assign({},e,x),n.forEach(v=>v(e,g))}},s=()=>e,d={setState:r,getState:s,getInitialState:()=>u,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(Q7?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=e=t(r,s,d);return d},X7=t=>t?Nw(t):Nw;var Xk={exports:{}},Jk={},eS={exports:{}},tS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ko=w;function J7(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var eB=typeof Object.is=="function"?Object.is:J7,tB=ko.useState,nB=ko.useEffect,rB=ko.useLayoutEffect,sB=ko.useDebugValue;function iB(t,e){var n=e(),r=tB({inst:{value:n,getSnapshot:e}}),s=r[0].inst,a=r[1];return rB(function(){s.value=n,s.getSnapshot=e,em(s)&&a({inst:s})},[t,n,e]),nB(function(){return em(s)&&a({inst:s}),t(function(){em(s)&&a({inst:s})})},[t]),sB(n),n}function em(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!eB(t,n)}catch{return!0}}function aB(t,e){return e()}var oB=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?aB:iB;tS.useSyncExternalStore=ko.useSyncExternalStore!==void 0?ko.useSyncExternalStore:oB;eS.exports=tS;var lB=eS.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fp=w,cB=lB;function dB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var uB=typeof Object.is=="function"?Object.is:dB,hB=cB.useSyncExternalStore,pB=fp.useRef,fB=fp.useEffect,mB=fp.useMemo,gB=fp.useDebugValue;Jk.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var a=pB(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=mB(function(){function d(g){if(!u){if(u=!0,p=g,g=r(g),s!==void 0&&o.hasValue){var v=o.value;if(s(v,g))return f=v}return f=g}if(v=f,uB(p,g))return v;var b=r(g);return s!==void 0&&s(v,b)?(p=g,v):(p=g,f=b)}var u=!1,p,f,x=n===void 0?null:n;return[function(){return d(e())},x===null?void 0:function(){return d(x())}]},[e,n,r,s]);var l=hB(t,a[0],a[1]);return fB(function(){o.hasValue=!0,o.value=l},[l]),gB(l),l};Xk.exports=Jk;var xB=Xk.exports;const vB=ms(xB),nS={},{useDebugValue:yB}=q,{useSyncExternalStoreWithSelector:bB}=vB;let kw=!1;const _B=t=>t;function wB(t,e=_B,n){(nS?"production":void 0)!=="production"&&n&&!kw&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),kw=!0);const r=bB(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return yB(r),r}const Sw=t=>{(nS?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?X7(t):t,n=(r,s)=>wB(e,r,s);return Object.assign(n,e),n},jB=t=>t?Sw(t):Sw,NB=jB(t=>({user:null,loading:!0,error:null,init:async()=>{try{t({loading:!0});const{data:{session:e},error:n}=await ee.auth.getSession();if(n)throw n;if(e!=null&&e.user){const{data:r,error:s}=await ee.from("profiles").select("*").eq("id",e.user.id).single();s&&s.code!=="PGRST116"&&console.error("Error fetching profile:",s),t({user:{...e.user,...r},loading:!1})}else t({user:null,loading:!1})}catch(e){console.error("Auth initialization error:",e),t({error:e,loading:!1})}},signIn:async(e,n)=>{try{t({loading:!0});const{data:r,error:s}=await ee.auth.signInWithPassword({email:e,password:n});if(s)throw s;const{data:a,error:o}=await ee.from("profiles").select("*").eq("id",r.user.id).single();return o&&o.code!=="PGRST116"&&console.error("Error fetching profile:",o),t({user:{...r.user,...a},loading:!1}),r.user}catch(r){throw console.error("Sign in error:",r),t({error:r,loading:!1}),r}},signOut:async()=>{try{t({loading:!0});const{error:e}=await ee.auth.signOut();if(e)throw e;t({user:null,loading:!1})}catch(e){throw console.error("Sign out error:",e),t({error:e,loading:!1}),e}},updateUser:e=>{t({user:{...e}})}})),kB=async t=>{try{const{data:e,error:n}=await ee.from("order_status_history").select(`
        *,
        user:created_by(*)
      `).eq("order_id",t).order("created_at",{ascending:!0});if(n)throw n;return e}catch(e){throw console.error("Error fetching order status history:",e),e}};function SB({order:t,onClose:e,onStatusUpdate:n}){var ie,le,ae;const{user:r}=NB(),[s,a]=w.useState([]),[o,l]=w.useState(null),[d,u]=w.useState("15"),[p,f]=w.useState(t.status),[x,g]=w.useState([]),[v,b]=w.useState("specific"),[j,_]=w.useState(!1),[N,S]=w.useState(!0),[P,M]=w.useState(!0),[R,A]=w.useState(!1),[T,Y]=w.useState(""),[O,H]=w.useState(t.status),te=[{value:"pending",label:"معلق"},{value:"accepted",label:"مقبول"},{value:"processing",label:"قيد التحضير"},{value:"waiting-for-driver",label:"في قائمة الانتظار"},{value:"delivering",label:"مع السائق"},{value:"completed",label:"مكتمل"},{value:"cancelled",label:"ملغي"}];w.useEffect(()=>{if(!r){console.warn("User not authenticated");return}G(),B()},[r]);const G=async()=>{try{S(!0);const{data:se,error:ue}=await ee.from("drivers").select("id, name, status, rating, phone").order("name");if(ue)throw ue;a(se||[])}catch(se){console.error("Error loading drivers:",se),z.error("حدث خطأ أثناء تحميل قائمة السائقين")}finally{S(!1)}},B=async()=>{try{M(!0);const se=await kB(t.id);se&&se.length>0?g(se.map(ue=>({id:ue.id,status:ue.status,note:ue.note||V(ue.status),created_at:ue.created_at}))):g([{id:"initial",status:t.status,note:"تم إنشاء الطلب",created_at:t.created_at}])}catch(se){console.error("Error loading status history:",se),g([{id:"initial",status:t.status,note:"تم إنشاء الطلب",created_at:t.created_at}])}finally{M(!1)}},Z=async()=>{var se;if(!r){z.error("يجب تسجيل الدخول أولاً");return}try{A(!0);const{data:ue,error:U}=await ee.from("vendors").select("id").eq("store_name",(se=t.vendor)==null?void 0:se.store_name).single();if(U)throw U;const{error:oe}=await ee.from("driver_waiting_list").insert([{order_id:t.id,vendor_id:ue.id,status:"pending"}]);if(oe)throw oe;await I("waiting-for-driver","تم إضافة الطلب لقائمة انتظار السائقين"),z.success("تم إضافة الطلب لقائمة انتظار السائقين")}catch(ue){console.error("Error adding to waiting list:",ue),z.error("حدث خطأ أثناء إضافة الطلب لقائمة الانتظار")}finally{A(!1)}},C=async()=>{if(!r){z.error("يجب تسجيل الدخول أولاً");return}if(v==="waiting-list"){await Z();return}if(!o){z.error("الرجاء اختيار سائق");return}try{const{error:se}=await ee.from("orders").update({driver_id:o.id,status:"delivering"}).eq("id",t.id);if(se)throw se;const{error:ue}=await ee.from("order_status_history").insert([{order_id:t.id,status:"delivering",note:`تم تعيين السائق ${o.name}`,created_by:r.id}]);ue&&console.error("Error adding status history:",ue),f("delivering"),typeof n=="function"&&n(t.id,"delivering"),await B(),z.success(`تم تعيين السائق ${o.name} للطلب`)}catch(se){console.error("Error assigning driver:",se),z.error("فشل في تعيين السائق")}},V=se=>{switch(se){case"processing":return"تم بدء تحضير الطلب";case"delivering":return"تم تحويل الطلب للتوصيل";case"waiting-for-driver":return"تم إضافة الطلب لقائمة انتظار السائقين";case"completed":return"تم إكمال الطلب";default:return`تم تغيير الحالة إلى ${X(se)}`}},I=async(se,ue="")=>{if(!r){z.error("يجب تسجيل الدخول أولاً");return}try{const{error:U}=await ee.from("order_status_history").insert([{order_id:t.id,status:se,note:ue||T||V(se),created_by:r.id}]);if(U)throw U;const{error:oe}=await ee.from("orders").update({status:se}).eq("id",t.id);if(oe)throw oe;f(se),typeof n=="function"&&n(t.id,se),await B(),Y(""),z.success("تم تحديث حالة الطلب"),se==="completed"&&_(!0)}catch(U){console.error("Error updating status:",U),z.error("حدث خطأ أثناء تحديث الحالة")}},X=se=>{const ue=te.find(U=>U.value===se);return ue?ue.label:se},E=se=>{switch(se){case"pending":return"bg-yellow-100 text-yellow-800";case"accepted":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";case"processing":return"bg-yellow-100 text-yellow-800";case"waiting-for-driver":return"bg-orange-100 text-orange-800";case"delivering":return"bg-purple-100 text-purple-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},K=()=>{I("accepted","تم قبول الطلب"),z.success("تم قبول الطلب بنجاح")},re=()=>{I("rejected","تم رفض الطلب"),z.error("تم رفض الطلب")},Q=()=>{z.success("تم تقييم الزبون بنجاح"),_(!1)};return r?i.jsxs("div",{className:"bg-white rounded-lg p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h2",{className:"text-xl font-semibold",children:["إجراءات الطلب #",t.id.substring(0,8)]}),i.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),j?i.jsx(HF,{orderId:t.id,driverId:(o==null?void 0:o.id)||t.driver_id,customerId:t.customer_id,onComplete:Q}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold mb-3",children:"معلومات الطلب"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("p",{children:["المتجر: ",((ie=t.vendor)==null?void 0:ie.store_name)||"غير محدد"]}),i.jsxs("p",{children:["الزبون: ",((le=t.customer)==null?void 0:le.name)||"غير محدد"]}),i.jsxs("p",{children:["المبلغ: ₪",parseFloat(t.total).toFixed(2)]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("h4",{className:"font-medium mb-2",children:"المنتجات:"}),i.jsx("ul",{className:"list-disc list-inside",children:(ae=t.items)==null?void 0:ae.map((se,ue)=>{var U;return i.jsxs("li",{children:[((U=se.product)==null?void 0:U.name)||"منتج"," × ",se.quantity," (₪",parseFloat(se.price).toFixed(2),")"]},ue)})})]})]})]}),i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold mb-3",children:"تعيين سائق"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex space-x-4 mb-4",children:[i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",value:"specific",checked:v==="specific",onChange:se=>b(se.target.value),className:"ml-2"}),"تعيين سائق محدد"]}),i.jsxs("label",{className:"flex items-center",children:[i.jsx("input",{type:"radio",value:"waiting-list",checked:v==="waiting-list",onChange:se=>b(se.target.value),className:"ml-2"}),"إضافة لقائمة الانتظار"]})]}),v==="specific"&&i.jsxs("select",{className:"w-full border rounded-md p-2",value:(o==null?void 0:o.id)||"",onChange:se=>{const ue=s.find(U=>U.id===se.target.value);l(ue||null)},children:[i.jsx("option",{value:"",children:"اختر سائق"}),N?i.jsx("option",{disabled:!0,children:"جاري تحميل السائقين..."}):s.map(se=>i.jsxs("option",{value:se.id,disabled:se.status==="busy",children:[se.name," (",se.rating," ★) - ",se.status==="available"?"متاح":"مشغول"]},se.id))]}),i.jsx("button",{onClick:C,disabled:R||v==="specific"&&!o||p==="delivering",className:`w-full text-white py-2 rounded-md transition-colors ${R||v==="specific"&&!o||p==="delivering"?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:R?"جاري الإضافة...":p==="delivering"?"تم تعيين السائق":v==="waiting-list"?"إضافة للقائمة":"تعيين السائق"})]})]})]}),t.status==="pending"&&i.jsxs("div",{className:"border rounded-lg p-4 mb-6",children:[i.jsx("h3",{className:"font-semibold mb-4",children:"قبول/رفض الطلب"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx("button",{onClick:K,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition-colors",children:"قبول الطلب"}),i.jsx("button",{onClick:re,className:"flex-1 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 transition-colors",children:"رفض الطلب"})]})]}),i.jsxs("div",{className:"border rounded-lg p-4 mb-6",children:[i.jsx("h3",{className:"font-semibold mb-3",children:"وقت التحضير"}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("input",{type:"number",min:"5",max:"120",value:d,onChange:se=>u(se.target.value),className:"border rounded-md p-2 w-24"}),i.jsx("span",{children:"دقيقة"})]})]}),i.jsxs("div",{className:"border rounded-lg p-4 mb-6",children:[i.jsx("h3",{className:"font-semibold mb-3",children:"تحديث الحالة"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{children:i.jsx("select",{value:O,onChange:se=>H(se.target.value),className:"w-full border rounded-md p-2",children:te.map(se=>i.jsx("option",{value:se.value,children:se.label},se.value))})}),i.jsx("div",{children:i.jsx("input",{type:"text",value:T,onChange:se=>Y(se.target.value),placeholder:"ملاحظات (اختياري)",className:"w-full border rounded-md p-2"})}),i.jsx("button",{onClick:()=>I(O),className:"w-full bg-blue-500 text-white py-2 rounded-md hover:bg-blue-600 transition-colors",children:"تحديث الحالة"})]})]}),i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h3",{className:"font-semibold mb-3",children:"سجل الحالات"}),P?i.jsx("div",{className:"flex justify-center py-4",children:i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):i.jsx("div",{className:"space-y-3",children:x.map(se=>i.jsxs("div",{className:"flex items-center space-x-4 border-b pb-2",children:[i.jsx("div",{className:`px-3 py-1 rounded-full ${E(se.status)}`,children:X(se.status)}),i.jsx("div",{className:"text-gray-600",children:se.note}),i.jsx("div",{className:"text-gray-500 text-sm",children:new Date(se.created_at).toLocaleTimeString("ar-SA")})]},se.id))})]})]})]}):i.jsx("div",{className:"bg-white rounded-lg p-6",children:i.jsx("div",{className:"text-center text-red-600",children:"يجب تسجيل الدخول للوصول إلى هذه الصفحة"})})}const CB={customer_name:"اسم العميل",customer_phone:"هاتف العميل",address:"العنوان",vendor_name:"اسم التاجر",total:"المبلغ",status:"الحالة",created_at:"تاريخ الطلب"},tm=["customer_name","customer_phone","address","vendor_name","total","status","created_at"];function EB(){const[t,e]=w.useState([]),[n,r]=w.useState(!0),[s,a]=w.useState(null),[o,l]=w.useState(null),[d,u]=w.useState(!1),p=v=>v?`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(v)}`:null,f=w.useCallback(async()=>{r(!0),a(null);try{if(!ee)throw new Error("Supabase client is not initialized");const{data:v,error:b}=await ee.from("orders").select(`
          id,
          total,
          status,
          created_at,
          address,
          customer_name,
          customer_phone,
          vendor_name
        `).order("created_at",{ascending:!1});if(b)throw b;if(!v)throw new Error("No data received from the server");const j=v.map(_=>({id:_.id,customer_name:_.customer_name||"غير معروف",customer_phone:_.customer_phone||"غير متوفر",address:_.address||"غير متوفر",vendor_name:_.vendor_name||"غير معروف",total:_.total,status:_.status,created_at:_.created_at}));e(j)}catch(v){console.error("Error fetching orders:",v),a(v.message),z.error("فشل في جلب الطلبات. يرجى التحقق من اتصال الإنترنت والمحاولة مرة أخرى.")}finally{r(!1)}},[]);w.useEffect(()=>{f()},[f]);const x=(v,b)=>v==null?"غير متوفر":b==="created_at"?new Date(v).toLocaleString("ar-EG"):b==="total"?`${Number(v).toFixed(2)} شيكل`:String(v),g=v=>{l(v),u(!0)};return i.jsxs("div",{className:"p-4 relative",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"قائمة الطلبات"}),n&&i.jsx("p",{className:"text-center py-4",children:"جاري التحميل..."}),s&&i.jsxs("div",{className:"text-red-500 text-center py-4 mb-4",children:[i.jsx("p",{children:s}),i.jsx("button",{onClick:f,className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"إعادة المحاولة"})]}),!n&&!s&&i.jsx("div",{className:"overflow-x-auto shadow-md rounded-lg",children:i.jsxs("table",{className:"min-w-full bg-white",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[tm.map(v=>i.jsx("th",{className:"p-3 text-right border-b",children:CB[v]},v)),i.jsx("th",{className:"p-3 text-right border-b",children:"الإجراءات"})]})}),i.jsx("tbody",{children:t.length>0?t.map(v=>i.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[tm.map(b=>i.jsx("td",{className:"p-3 border-b text-right",children:b==="address"&&v.address?i.jsxs("a",{href:p(v.address),target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline hover:text-blue-700",title:"فتح في خرائط Google",children:[v.address,i.jsx("svg",{className:"w-4 h-4 inline-block mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}):x(v[b],b)},`${v.id}-${b}`)),i.jsx("td",{className:"p-3 border-b",children:i.jsx("button",{onClick:()=>g(v),className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"إجراءات"})})]},v.id)):i.jsx("tr",{children:i.jsx("td",{colSpan:tm.length+1,className:"p-4 text-center text-gray-500",children:"لا توجد طلبات متاحة"})})})]})}),d&&o&&i.jsx(SB,{order:o,onClose:()=>{u(!1),f()}})]})}function TB(){const[t,e]=w.useState([]),[n,r]=w.useState(!0),[s,a]=w.useState("grid");w.useEffect(()=>{o()},[]);const o=async()=>{try{r(!0);const g=await dF();e(g)}catch(g){console.error("Error fetching vendors:",g),z.error("فشل في تحميل البائعين"),e([{id:1,store_name:"متجر كوفي",phone:"0599123456",address:"غزة - الرمال",description:"متجر متخصص في القهوة والمشروبات الساخنة",rating:4.8,rating_count:156,status:"active",logo_url:"https://images.unsplash.com/photo-1559925393-8be0ec4767c8?q=80&w=100&auto=format&fit=crop",banner_url:"https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?q=80&w=400&auto=format&fit=crop",delivery_type:"distance",delivery_radius:5,price_per_km:2},{id:2,store_name:"متجر الشاي",phone:"0599234567",address:"غزة - النصر",description:"متجر متخصص في الشاي والأعشاب",rating:4.5,rating_count:98,status:"active",logo_url:"https://images.unsplash.com/photo-1576092768241-dec231879fc3?q=80&w=100&auto=format&fit=crop",banner_url:"https://images.unsplash.com/photo-1564890369478-c89ca6d9cde9?q=80&w=400&auto=format&fit=crop",delivery_type:"fixed",delivery_radius:null,price_per_km:null},{id:3,store_name:"متجر العصائر",phone:"0599345678",address:"غزة - التفاح",description:"متجر متخصص في العصائر الطازجة",rating:4.7,rating_count:120,status:"active",logo_url:"https://images.unsplash.com/photo-1589733955941-5eeaf752f6dd?q=80&w=100&auto=format&fit=crop",banner_url:"https://images.unsplash.com/photo-1600271886742-f049cd451bba?q=80&w=400&auto=format&fit=crop",delivery_type:"distance",delivery_radius:3,price_per_km:3}])}finally{r(!1)}},l=async(g,v)=>{try{const{error:b}=await ee.rpc("update_vendor_status",{p_vendor_id:g,p_status:v});if(b)throw b;e(t.map(j=>j.id===g?{...j,status:v}:j)),z.success(`تم تغيير حالة البائع إلى ${u(v)}`)}catch(b){console.error("Error updating vendor status:",b),z.error("فشل في تحديث حالة البائع")}},d=g=>{switch(g){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"busy":return"bg-yellow-100 text-yellow-800";case"pending":return"bg-blue-100 text-blue-800";case"suspended":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},u=g=>{switch(g){case"active":return"مفتوح";case"inactive":return"مغلق";case"busy":return"مشغول";case"pending":return"معلق";case"suspended":return"موقوف";default:return g}},p=g=>{switch(g){case"distance":return"حسب المسافة";case"fixed":return"سعر ثابت";case"zones":return"مناطق";default:return g}},f=()=>i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map(g=>i.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[g.banner_url&&i.jsx("img",{src:g.banner_url,alt:`${g.store_name} banner`,className:"w-full h-48 object-cover",onError:v=>{v.target.onerror=null,v.target.src="https://via.placeholder.com/300x200?text=No+Image"}}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{className:"flex items-center",children:[g.logo_url&&i.jsx("img",{src:g.logo_url,alt:g.store_name,className:"w-10 h-10 rounded-full object-cover ml-3",onError:v=>{v.target.onerror=null,v.target.src="https://via.placeholder.com/40?text=Logo"}}),i.jsx("h3",{className:"text-lg font-semibold",children:g.store_name})]}),i.jsxs("div",{className:"relative inline-block",children:[i.jsxs("select",{value:g.status,onChange:v=>l(g.id,v.target.value),className:`px-2 py-1 text-xs rounded-full ${d(g.status)} appearance-none pr-8 cursor-pointer`,children:[i.jsx("option",{value:"active",children:"مفتوح"}),i.jsx("option",{value:"inactive",children:"مغلق"}),i.jsx("option",{value:"busy",children:"مشغول"}),i.jsx("option",{value:"pending",children:"معلق"}),i.jsx("option",{value:"suspended",children:"موقوف"})]}),i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-2",children:i.jsx("svg",{className:"h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),i.jsxs("div",{className:"flex items-center mt-1",children:[i.jsx("span",{className:"text-yellow-500",children:"★"}),i.jsx("span",{className:"ml-1",children:g.rating}),i.jsxs("span",{className:"text-gray-500 ml-1",children:["(",g.rating_count,")"]})]}),i.jsx("p",{className:"text-gray-600 text-sm mt-2",children:g.description}),i.jsxs("div",{className:"mt-4 space-y-1 text-sm",children:[i.jsx("p",{className:"text-gray-500",children:g.address}),i.jsx("p",{className:"text-gray-500",children:g.phone})]}),i.jsx("div",{className:"mt-4 pt-4 border-t",children:i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"font-medium text-gray-900",children:p(g.delivery_type)}),g.delivery_type==="distance"&&i.jsxs("div",{className:"text-sm text-gray-500",children:[g.delivery_radius," كم - ₪",g.price_per_km,"/كم"]})]})})]})]},g.id))}),x=()=>i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"المتجر"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التقييم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"العنوان"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"التوصيل"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الحالة"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(g=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[g.logo_url&&i.jsx("img",{src:g.logo_url,alt:g.store_name,className:"w-10 h-10 rounded-full object-cover ml-3",onError:v=>{v.target.onerror=null,v.target.src="https://via.placeholder.com/40?text=Logo"}}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:g.store_name}),i.jsx("div",{className:"text-gray-500",children:g.phone})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-yellow-500",children:"★"}),i.jsx("span",{className:"ml-1",children:g.rating}),i.jsxs("span",{className:"text-gray-500 ml-1",children:["(",g.rating_count,")"]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500",children:g.address}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:p(g.delivery_type)}),g.delivery_type==="distance"&&i.jsxs("div",{className:"text-sm text-gray-500",children:[g.delivery_radius," كم - ₪",g.price_per_km,"/كم"]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"relative inline-block",children:[i.jsxs("select",{value:g.status,onChange:v=>l(g.id,v.target.value),className:`px-2 py-1 text-xs rounded-full ${d(g.status)} appearance-none pr-8 cursor-pointer`,children:[i.jsx("option",{value:"active",children:"مفتوح"}),i.jsx("option",{value:"inactive",children:"مغلق"}),i.jsx("option",{value:"busy",children:"مشغول"}),i.jsx("option",{value:"pending",children:"معلق"}),i.jsx("option",{value:"suspended",children:"موقوف"})]}),i.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-2",children:i.jsx("svg",{className:"h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})})]},g.id))})]})})});return n?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"البائعين"}),i.jsx("div",{className:"flex items-center space-x-4",children:i.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{onClick:()=>a("grid"),className:`px-3 py-1 rounded ${s==="grid"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض شبكي"}),i.jsx("button",{onClick:()=>a("table"),className:`px-3 py-1 rounded ${s==="table"?"bg-white shadow":"hover:bg-gray-200"}`,children:"عرض جدول"})]})})]}),s==="grid"?f():x()]})}function PB({categoryId:t,className:e=""}){var x;const[n,r]=w.useState(null),[s,a]=w.useState(!0),[o,l]=w.useState(null);w.useEffect(()=>{t&&d()},[t]);const d=async()=>{try{a(!0);const g=new Date().toISOString().split("T")[0],{data:v,error:b}=await ee.from("advertisements").select(`
          *,
          vendor:vendor_id(store_name)
        `).eq("vendor_category_id",t).eq("position","vendor_category").eq("status","active").lte("start_date",g).gte("end_date",g).order("priority",{ascending:!0}).limit(1);if(b)throw b;v&&v.length>0?(r(v[0]),u(v[0].id)):r(null),l(null)}catch(g){console.error("Error fetching vendor category advertisement:",g),l("فشل في تحميل الإعلان"),r(null)}finally{a(!1)}},u=async g=>{try{await ee.rpc("increment_advertisement_views",{p_ad_id:g})}catch(v){console.error("Error recording advertisement view:",v)}},p=async()=>{if(n!=null&&n.id)try{await ee.rpc("increment_advertisement_clicks",{p_ad_id:n.id})}catch(g){console.error("Error recording advertisement click:",g)}};if(s)return i.jsx("div",{className:`animate-pulse bg-gray-200 rounded-lg ${e}`,style:{aspectRatio:"16/5"}});if(o||!n)return null;const f=i.jsxs("div",{className:`relative overflow-hidden rounded-lg ${e}`,style:{aspectRatio:"16/5"},children:[i.jsx("img",{src:n.image_url,alt:n.title,className:"w-full h-full object-cover",onError:g=>{g.target.onerror=null,g.target.src="data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22800%22%20height%3D%22250%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Crect%20width%3D%22800%22%20height%3D%22250%22%20fill%3D%22%23e2e8f0%22%3E%3C%2Frect%3E%3Ctext%20x%3D%22400%22%20y%3D%22125%22%20font-size%3D%2230%22%20text-anchor%3D%22middle%22%20alignment-baseline%3D%22middle%22%20font-family%3D%22Arial%2C%20sans-serif%22%20fill%3D%22%2364748b%22%3E%D8%A5%D8%B9%D9%84%D8%A7%D9%86%3C%2Ftext%3E%3C%2Fsvg%3E"}}),i.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent flex flex-col justify-end p-4",children:[i.jsx("h3",{className:"text-white text-xl font-bold",children:n.title}),n.description&&i.jsx("p",{className:"text-white/90 text-sm mt-1",children:n.description})]}),((x=n.vendor)==null?void 0:x.store_name)&&i.jsx("div",{className:"absolute top-2 left-2 bg-white/80 px-2 py-1 rounded text-xs",children:n.vendor.store_name})]});return n.link?i.jsx(Qu,{to:n.link,onClick:p,children:f}):f}function DB(){const[t,e]=w.useState([]),[n,r]=w.useState([]),[s,a]=w.useState(!0),[o,l]=w.useState(null),[d,u]=w.useState(!1),[p,f]=w.useState(!1),[x,g]=w.useState(!1),[v,b]=w.useState(null),[j,_]=w.useState(null),[N,S]=w.useState({name:"",description:"",image_url:"",slug:""}),[P,M]=w.useState(""),[R,A]=w.useState([]),[T,Y]=w.useState({title:"",description:"",vendor_id:"",image_url:"",link:"",start_date:"",end_date:"",status:"draft",type:"banner",position:"vendor_category",priority:1});w.useEffect(()=>{O()},[]);const O=async()=>{try{a(!0),l(null);const{data:E,error:K}=await ee.from("vendor_categories_table").select("*").order("name");if(K)throw K;e(E||[]);const{data:re,error:Q}=await ee.from("vendors").select("id, store_name").order("store_name");if(Q)throw Q;r(re||[])}catch(E){console.error("Error fetching data:",E),l("فشل في تحميل البيانات. الرجاء المحاولة مرة أخرى."),z.error("فشل في تحميل البيانات")}finally{a(!1)}},H=async E=>{E.preventDefault();try{a(!0);const K=N.slug||N.name.toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"");if(v){const{data:re,error:Q}=await ee.from("vendor_categories_table").update({name:N.name,description:N.description,image_url:N.image_url,slug:K,updated_at:new Date().toISOString()}).eq("id",v.id).select();if(Q)throw Q;z.success("تم تحديث القسم بنجاح")}else{const{data:re,error:Q}=await ee.from("vendor_categories_table").insert([{name:N.name,description:N.description,image_url:N.image_url,slug:K}]).select();if(Q)throw Q;z.success("تم إضافة القسم بنجاح")}O(),u(!1),b(null),S({name:"",description:"",image_url:"",slug:""})}catch(K){console.error("Error saving category:",K),z.error(v?"فشل في تحديث القسم":"فشل في إضافة القسم")}finally{a(!1)}},te=async E=>{E.preventDefault();try{if(a(!0),!T.title||!T.image_url||!T.start_date||!T.end_date){z.error("الرجاء تعبئة جميع الحقول المطلوبة"),a(!1);return}const{data:K,error:re}=await ee.from("advertisements").insert([{title:T.title,description:T.description,vendor_id:T.vendor_id||null,vendor_category_id:j.id,image_url:T.image_url,link:T.link,start_date:T.start_date,end_date:T.end_date,status:T.status,type:T.type,position:"vendor_category",priority:parseInt(T.priority)}]).select();if(re)throw re;z.success("تم إضافة الإعلان بنجاح"),g(!1),Y({title:"",description:"",vendor_id:"",image_url:"",link:"",start_date:"",end_date:"",status:"draft",type:"banner",position:"vendor_category",priority:1})}catch(K){console.error("Error saving advertisement:",K),z.error("فشل في حفظ الإعلان")}finally{a(!1)}},G=async E=>{if(window.confirm("هل أنت متأكد من حذف هذا القسم؟"))try{const{error:K}=await ee.from("vendor_categories_table").delete().eq("id",E);if(K)throw K;z.success("تم حذف القسم بنجاح"),O()}catch(K){console.error("Error deleting category:",K),z.error("فشل في حذف القسم")}},B=({preview:E})=>{E&&S({...N,image_url:E})},Z=({preview:E})=>{E&&Y({...T,image_url:E})},C=async E=>{try{a(!0),_(E);const{data:K,error:re}=await ee.from("vendor_to_category").select(`
          vendor:vendor_id(id, store_name)
        `).eq("category_id",E.id);if(re)console.error("Error fetching category vendors:",re),A([]);else{const Q=K.filter(ie=>ie.vendor).map(ie=>ie.vendor);A(Q)}f(!0)}catch(K){console.error("Error fetching category vendors:",K),z.error("فشل في تحميل البائعين")}finally{a(!1)}},V=async()=>{if(!j||!P){z.error("الرجاء اختيار البائع");return}try{a(!0);const{data:E,error:K}=await ee.from("vendor_to_category").select("*").eq("vendor_id",P).eq("category_id",j.id);if(K&&K.code!=="PGRST116")throw K;if(E&&E.length>0){z.info("هذا البائع مرتبط بالفعل بهذا القسم"),M("");return}const{error:re}=await ee.from("vendor_to_category").insert([{vendor_id:P,category_id:j.id}]);if(re)throw re;z.success("تم ربط البائع بالقسم بنجاح");const{data:Q,error:ie}=await ee.from("vendor_to_category").select(`
          vendor:vendor_id(id, store_name)
        `).eq("category_id",j.id);if(ie)throw ie;const le=Q.filter(ae=>ae.vendor).map(ae=>ae.vendor);A(le),M("")}catch(E){console.error("Error linking vendor to category:",E),z.error("فشل في ربط البائع بالقسم: "+E.message)}finally{a(!1)}},I=async E=>{if(!(!j||!E))try{a(!0);const{error:K}=await ee.from("vendor_to_category").delete().eq("vendor_id",E).eq("category_id",j.id);if(K)throw K;z.success("تم إلغاء ربط البائع بالقسم بنجاح"),A(R.filter(re=>re.id!==E))}catch(K){console.error("Error unlinking vendor from category:",K),z.error("فشل في إلغاء ربط البائع بالقسم")}finally{a(!1)}},X=E=>{_(E),Y({title:"",description:"",vendor_id:"",image_url:"",link:"",start_date:"",end_date:"",status:"draft",type:"banner",position:"vendor_category",priority:1}),g(!0)};return s&&t.length===0?i.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o?i.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-800",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"خطأ"}),i.jsx("p",{children:o}),i.jsx("button",{onClick:O,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"إعادة المحاولة"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"أقسام المتاجر"}),i.jsx("button",{onClick:()=>{b(null),S({name:"",description:"",image_url:"",slug:""}),u(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"إضافة قسم جديد"})]}),i.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الصورة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الاسم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الوصف"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"عدد البائعين"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإعلان"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500",children:"لا توجد أقسام بعد. قم بإضافة قسم جديد."})}):t.map(E=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:E.image_url?i.jsx("img",{src:E.image_url,alt:E.name,className:"w-10 h-10 rounded-full object-cover",onError:K=>{K.target.onerror=null,K.target.src="https://via.placeholder.com/40?text=No+Image"}}):i.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center",children:i.jsx("span",{className:"text-gray-500",children:"لا توجد صورة"})})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[i.jsx("div",{className:"font-medium text-gray-900",children:E.name}),i.jsx("div",{className:"text-sm text-gray-500",children:E.slug})]}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"text-sm text-gray-900",children:E.description||"لا يوجد وصف"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("button",{onClick:()=>C(E),className:"text-blue-600 hover:text-blue-800",children:"عرض البائعين"})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("div",{className:"flex space-x-2",children:i.jsx("button",{onClick:()=>X(E),className:"text-green-600 hover:text-green-800",children:"إضافة إعلان"})})}),i.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[i.jsx("button",{onClick:()=>{b(E),S({name:E.name,description:E.description||"",image_url:E.image_url||"",slug:E.slug||""}),u(!0)},className:"text-blue-600 hover:text-blue-800 ml-4",children:"تعديل"}),i.jsx("button",{onClick:()=>G(E.id),className:"text-red-600 hover:text-red-800",children:"حذف"})]})]},E.id))})]})})}),t.length>0&&i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"معاينة إعلانات الأقسام"}),i.jsx("div",{className:"space-y-6",children:t.map(E=>i.jsxs("div",{className:"border-b pb-6 last:border-b-0 last:pb-0",children:[i.jsx("h4",{className:"text-md font-semibold mb-2",children:E.name}),i.jsx(PB,{categoryId:E.id,className:"w-full"})]},E.id))})]}),i.jsx(be,{open:d,onClose:()=>{u(!1),b(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(be.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsx(be.Title,{className:"text-2xl font-bold mb-6",children:v?"تعديل قسم":"إضافة قسم جديد"}),i.jsxs("form",{onSubmit:H,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم القسم ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:N.name,onChange:E=>S({...N,name:E.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),i.jsx("textarea",{value:N.description,onChange:E=>S({...N,description:E.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الرابط المختصر (Slug)"}),i.jsx("input",{type:"text",value:N.slug,onChange:E=>S({...N,slug:E.target.value}),className:"w-full border rounded-md px-3 py-2",placeholder:"سيتم إنشاؤه تلقائيًا إذا تُرك فارغًا"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"صورة القسم"}),i.jsx(ps,{type:"image",preview:N.image_url,onUpload:B,storeInSupabase:!0,bucket:Lt.GENERAL,folder:"vendor-categories"})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{u(!1),b(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:s,children:s?"جارٍ الحفظ...":v?"تحديث":"إضافة"})]})]})]})]})}),i.jsx(be,{open:p,onClose:()=>{f(!1),_(null),A([]),M("")},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(be.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsxs(be.Title,{className:"text-2xl font-bold mb-6",children:["البائعين في قسم: ",j==null?void 0:j.name]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"إضافة بائع للقسم"}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs("select",{value:P,onChange:E=>M(E.target.value),className:"flex-1 border rounded-md px-3 py-2",children:[i.jsx("option",{value:"",children:"اختر بائع"}),n.map(E=>i.jsx("option",{value:E.id,children:E.store_name},E.id))]}),i.jsx("button",{type:"button",onClick:V,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:!P||s,children:"إضافة"})]})]}),i.jsx("div",{className:"max-h-60 overflow-y-auto",children:R.length===0?i.jsx("p",{className:"text-center text-gray-500 py-4",children:"لا يوجد بائعين في هذا القسم"}):i.jsx("ul",{className:"divide-y divide-gray-200",children:R.map(E=>i.jsxs("li",{className:"py-3 flex justify-between items-center",children:[i.jsx("span",{children:E.store_name}),i.jsx("button",{onClick:()=>I(E.id),className:"text-red-600 hover:text-red-800",children:"إلغاء الربط"})]},E.id))})}),i.jsx("div",{className:"mt-6 flex justify-end",children:i.jsx("button",{type:"button",onClick:()=>{f(!1),_(null),A([]),M("")},className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300",children:"إغلاق"})})]})]})}),i.jsx(be,{open:x,onClose:()=>{g(!1),_(null)},className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[i.jsx(be.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),i.jsxs("div",{className:"relative bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[i.jsxs(be.Title,{className:"text-2xl font-bold mb-6",children:["إضافة إعلان لقسم: ",j==null?void 0:j.name]}),i.jsxs("form",{onSubmit:te,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["عنوان الإعلان ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"text",value:T.title,onChange:E=>Y({...T,title:E.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),i.jsx("textarea",{value:T.description,onChange:E=>Y({...T,description:E.target.value}),className:"w-full border rounded-md px-3 py-2",rows:"3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المتجر"}),i.jsxs("select",{value:T.vendor_id,onChange:E=>Y({...T,vendor_id:E.target.value}),className:"w-full border rounded-md px-3 py-2",children:[i.jsx("option",{value:"",children:"اختر المتجر"}),n.map(E=>i.jsx("option",{value:E.id,children:E.store_name},E.id))]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["صورة الإعلان ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx(ps,{type:"image",preview:T.image_url,onUpload:Z,storeInSupabase:!0,bucket:Lt.ADVERTISEMENTS})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رابط الإعلان"}),i.jsx("input",{type:"text",value:T.link,onChange:E=>Y({...T,link:E.target.value}),className:"w-full border rounded-md px-3 py-2",placeholder:"https://example.com"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["تاريخ البداية ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"date",value:T.start_date,onChange:E=>Y({...T,start_date:E.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["تاريخ النهاية ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"date",value:T.end_date,onChange:E=>Y({...T,end_date:E.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نوع الإعلان ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:T.type,onChange:E=>Y({...T,type:E.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"banner",children:"بانر"}),i.jsx("option",{value:"popup",children:"نافذة منبثقة"}),i.jsx("option",{value:"slider",children:"شريحة عرض"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الحالة ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsxs("select",{value:T.status,onChange:E=>Y({...T,status:E.target.value}),className:"w-full border rounded-md px-3 py-2",required:!0,children:[i.jsx("option",{value:"draft",children:"مسودة"}),i.jsx("option",{value:"pending",children:"معلق"}),i.jsx("option",{value:"active",children:"نشط"}),i.jsx("option",{value:"expired",children:"منتهي"})]})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الأولوية ",i.jsx("span",{className:"text-red-600",children:"*"})]}),i.jsx("input",{type:"number",value:T.priority,onChange:E=>Y({...T,priority:parseInt(E.target.value)}),className:"w-full border rounded-md px-3 py-2",min:"1",required:!0}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"الإعلانات ذات الأرقام الأقل تظهر أولاً"})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{g(!1),_(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"إلغاء"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:s,children:s?"جارٍ الحفظ...":"إضافة الإعلان"})]})]})]})]})})]})}function OB(){const t=aa(),e=ia(),{settings:n}=qh(),[r,s]=w.useState("overview");w.useEffect(()=>{document.title=`لوحة تحكم ${n.store.name}`},[n.store.name]),w.useEffect(()=>{const o=e.pathname.split("/").pop();s(o&&o!=="admin-dashboard"?o:"overview")},[e]);const a=o=>{s(o),t(`/admin-dashboard/${o}`)};return i.jsxs("div",{className:"min-h-screen bg-gray-100 flex font-sans overflow-x-hidden w-full",children:[i.jsx(VD,{activeTab:r,onTabChange:a}),i.jsxs("div",{className:"flex-1 mr-64 max-w-[calc(100vw-16rem)]",children:[i.jsx(qD,{}),i.jsx("main",{className:"p-6 space-y-6 overflow-x-hidden",children:i.jsxs(Kj,{children:[i.jsx(Pe,{path:"/",element:i.jsx(Sf,{})}),i.jsx(Pe,{path:"/overview",element:i.jsx(Sf,{})}),i.jsx(Pe,{path:"/products",element:i.jsx(h3,{})}),i.jsx(Pe,{path:"/products-management",element:i.jsx(UR,{})}),i.jsx(Pe,{path:"/categories",element:i.jsx(WR,{})}),i.jsx(Pe,{path:"/vendors",element:i.jsx(pF,{})}),i.jsx(Pe,{path:"/vendors-list",element:i.jsx(TB,{})}),i.jsx(Pe,{path:"/add-vendor",element:i.jsx(fF,{})}),i.jsx(Pe,{path:"/vendor-categories-table",element:i.jsx(DB,{})}),i.jsx(Pe,{path:"/drivers",element:i.jsx(mF,{})}),i.jsx(Pe,{path:"/add-driver",element:i.jsx(gF,{})}),i.jsx(Pe,{path:"/shipping-methods",element:i.jsx(xF,{})}),i.jsx(Pe,{path:"/customers",element:i.jsx(vF,{})}),i.jsx(Pe,{path:"/add-customer",element:i.jsx(yF,{})}),i.jsx(Pe,{path:"/users",element:i.jsx(bF,{})}),i.jsx(Pe,{path:"/media",element:i.jsx(kF,{})}),i.jsx(Pe,{path:"/points-rewards",element:i.jsx(LF,{})}),i.jsx(Pe,{path:"/referral",element:i.jsx(AF,{})}),i.jsx(Pe,{path:"/coupons",element:i.jsx(IF,{})}),i.jsx(Pe,{path:"/wallet",element:i.jsx(EF,{})}),i.jsx(Pe,{path:"/wallet-settings",element:i.jsx(TF,{})}),i.jsx(Pe,{path:"/notifications",element:i.jsx(PF,{})}),i.jsx(Pe,{path:"/settings",element:i.jsx(OF,{})}),i.jsx(Pe,{path:"/advertisements",element:i.jsx(MF,{})}),i.jsx(Pe,{path:"/wholesale",element:i.jsx(RF,{})}),i.jsx(Pe,{path:"/payments",element:i.jsx($F,{})}),i.jsx(Pe,{path:"/vendor-ratings",element:i.jsx(Hf,{type:"vendor"})}),i.jsx(Pe,{path:"/driver-ratings",element:i.jsx(Hf,{type:"driver"})}),i.jsx(Pe,{path:"/customer-ratings",element:i.jsx(Hf,{type:"customer"})}),i.jsx(Pe,{path:"/ratings-report",element:i.jsx(V7,{})}),i.jsx(Pe,{path:"/financial-dashboard",element:i.jsx(K7,{})}),i.jsx(Pe,{path:"/api-keys",element:i.jsx(G7,{})}),i.jsx(Pe,{path:"/orders",element:i.jsx(EB,{})}),i.jsx(Pe,{path:"*",element:i.jsx(Sf,{})})]})})]})]})}function MB(){const{isAuthenticated:t,user:e}=Do(),n=aa(),r=()=>{if(!t())return"/login";if(e)switch(e.role){case"admin":return"/admin-dashboard";default:return"/login"}return"/login"};return i.jsx("div",{className:"min-h-screen bg-gray-100 flex flex-col items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md max-w-md w-full text-center",children:[i.jsx("h1",{className:"text-6xl font-bold text-red-500 mb-4",children:"404"}),i.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"الصفحة غير موجودة"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"عذراً، الصفحة التي تبحث عنها غير موجودة أو تم نقلها."}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(Qu,{to:r(),className:"block w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"العودة إلى لوحة التحكم"}),i.jsx("button",{onClick:()=>n(-1),className:"block w-full bg-gray-200 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors",children:"العودة للصفحة السابقة"})]})]})})}function LB(){return ia().pathname!=="/"?null:i.jsx(eo,{to:"/login",replace:!0})}function AB(){return i.jsx(nD,{children:i.jsx(rD,{children:i.jsx(HP,{children:i.jsxs("div",{className:"w-full overflow-x-hidden",children:[i.jsxs(Kj,{children:[i.jsx(Pe,{path:"/login",element:i.jsx(iD,{})}),i.jsx(Pe,{path:"/admin-dashboard/*",element:i.jsx(sD,{allowedRoles:["admin"],children:i.jsx(OB,{})})}),i.jsx(Pe,{path:"/",element:i.jsx(LB,{})}),i.jsx(Pe,{path:"*",element:i.jsx(MB,{})})]}),i.jsx(Xm,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})})})})}nm.createRoot(document.getElementById("root")).render(i.jsx(q.StrictMode,{children:i.jsx(AB,{})}));export{Lt as B,ps as M,z as Q,ms as g,i as j,w as r};
